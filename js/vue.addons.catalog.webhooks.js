window.$app.defineComponent("addons.catalog.webhooks","vue-addons-catalog-webhooks-options",{props:["values","variants","addon_id","isInstalling","currentTab"],mixins:[FormModel],data:function(){return{formats:{json:"JSON",form:"Form (Depricated)"},sending:{}}},computed:{devDocLink:function(){return console.log(i18n.locale),("ru"!=i18n.locale?"/en":"")+"/dev/webhooks.html"}},methods:{test:function(t){var o=this;this.$set(this.sending,t,!0),this.$parent.action("test",{action_id:t,endpoint:this.values.options.webhooks[t].endpoint,secret:this.values.options.secret}).then(function(e){o.$set(o.sending,t,!1)})}},template:'<section class="modal-card-body modal-card-body-blocks"> <section class="content" v-if="currentTab == \'description\'"> <slot name="allow"></slot> <p>{{\'WebHooks – это уведомление сторонних приложений посредством отправки уведомлений о событиях, произошедших в Taplink\'|gettext}}</p> <p><a :href="devDocLink" target="_blank">{{\'Документация для разработчиков\'|gettext}}</a></p> </section> <section v-if="currentTab == \'options\'"> <mx-item class="is-hidden-mobile mx-item-header"> <div class="item-row row"> <div class="col-sm-4">{{\'Событие\'|gettext}}</div> <div class="col-sm-8">{{\'Ссылка\'|gettext}}</div> </div> </mx-item> <mx-item v-for="(w, action_id) in values.options.webhooks"> <div class="item-row row"> <div class="col-sm-4"> <b-checkbox v-model="w.active">{{ variants.actions[action_id] }}</b-checkbox> </div> <div class="col-sm-8" :class="{disabled: !w.active}"> <b-field> <b-input v-model="w.endpoint" :disabled="!w.active"></b-input> </b-field> </div> </div> </mx-item> </section> <section v-if="currentTab == \'options\'"> <div class="row"> <div class="col-xs-12 col-sm-4 has-xs-mb-2"> <b-field :label="\'Секретная фраза\'|gettext"> <b-input type="text" v-model="values.options.secret"></b-input> </b-field> <b-field :label="\'Формат данных\'|gettext"> <b-select type="text" v-model="values.options.format"> <option v-for="(v, k) in formats" :value="k">{{v}}</option> </b-select> </b-field> </div> </div> </section> </section>'}),window.$app.defineModule("addons.catalog.webhooks",[]);
