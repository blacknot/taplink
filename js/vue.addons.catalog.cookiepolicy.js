window.$app.defineComponent("addons.catalog.cookiepolicy","vue-addons-catalog-cookiepolicy-options",{props:["values","variants","addon_id","isInstalling","currentTab","isAllowSave"],mixins:[FormModel],data:function(){return{types:{text:this.$gettext("Текст"),link:this.$gettext("Ссылка")},index:0,options:{theme:"snow",modules:{toolbar:[[{header:[1,2,3,4,5,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["link"],["clean"]]}}}},methods:{deleteForm:function(){var e=this;this.$confirm(this.$gettext("Вы уверены что хотите удалить этот документ?"),"is-danger").then(function(){e.values.options.forms.splice(e.index,1),e.index=0})},emptyTagTitle:function(e){return e||this.$gettext("Без названия")},addForm:function(){this.values.options.forms.push({tag:"",title:"",body:"",type:"text",link:""}),this.index=this.values.options.forms.length-1},checkInputScroll:function(){this.$refs.tagDiv.scrollLeft=this.$refs.tagInput.scrollLeft},markTags:function(t){return t=t.replace(/#([^#]*)#/g,"<span>#$1#</span>"),_.each(this.values.options.forms,function(e){t=t.replace(new RegExp("<span>(#"+e.tag+"#)</span>","g"),'<span class="good">$1</span>')}),this.isAllowSave=-1==t.indexOf("<span>"),this.$emit("update:isAllowSave",this.isAllowSave),t}},template:'<section class="modal-card-body modal-card-body-blocks" :class="{\'is-rtl\': $account.locale.text_direction == \'rtl\'}"> <section class="content" v-if="currentTab == \'description\'"> <slot name="allow"></slot> <div class="field">{{\'С помощью модуля "Политика файлов cookie" вы можете добавить pop-up сообщение с уведомлением пользователей об использовании файлов cookie\'|gettext}}</div> </section> <section class="content is-marginless" v-if="currentTab == \'options\'"> <b-field :label="\'Сообщение\'|gettext" :message="errors.text" :class="{\'has-error\': errors.text}"> <div class="input input-tags has-rtl"> <div v-html="markTags(values.options.text)" class="input" ref="tagDiv"></div> <input type="text" v-model="values.options.text" class="input" @scroll="checkInputScroll" ref="tagInput"> </div> </b-field> </section> <div> <ul class="nav nav-tabs has-text-left nav-tabs-scroll" v-if="currentTab == \'options\'" style="background: transparent"> <li v-for="(f, i) in values.options.forms" :class="{active: index== i}" @click="index = i"><a>{{emptyTagTitle(f.tag)}}</a></li> <li @click="addForm"><a><i class="fas fa-plus has-mr-1"></i>{{\'Добавить документ\'|gettext}}</a></li> </ul> </div> <section class="content" v-if="currentTab == \'options\'"> <div class="row row-small has-mb-3"> <div class="col-xs"> <b-field :label="\'Метка\'|gettext" :message="errors.tag" :class="{\'has-error\': errors.tag}"> <input type="text" class="input has-rtl" v-model="values.options.forms[index].tag"> </b-field> </div> <div class="col-xs-shrink"> <label class="label">&nbsp;</label> <button type="button" class="button is-clear has-text-danger" :disabled="values.options.forms.length == 1" @click="deleteForm"><i class="fa fa-trash-alt"></i></button> </div> </div> <div class="row row-small has-mb-3"> <div class="col-xs-12 has-xs-mb-3 col-sm-2"> <b-field :label="\'Тип\'|gettext"> <b-select v-model="values.options.forms[index].type" expanded> <option v-for="(title, v) in types" :value="v">{{title}}</option> </b-select> </b-field> </div> <div class="col-xs"> <div v-show="values.options.forms[index].type == \'text\'"> <b-field :label="\'Заголовок формы\'|gettext" :message="errors.text" :class="{\'has-error\': errors.text}"> <input type="text" class="input has-rtl" v-model="values.options.forms[index].title"> </b-field> </div> </div> </div> <b-field :label="\'Текст документа\'|gettext" :message="errors.body" :class="{\'has-error\': errors.body}" v-show="values.options.forms[index].type == \'text\'"> <vue-component-editor v-model="values.options.forms[index].body" :options="options"></vue-component-editor> </b-field> <b-field :label="\'Ссылка\'|gettext" :message="errors.link" :class="{\'has-error\': errors.link}" v-show="values.options.forms[index].type == \'link\'"> <b-input v-model="values.options.forms[index].link"></b-input> </b-field> </section> </section>'}),window.$app.defineModule("addons.catalog.cookiepolicy",[]);
