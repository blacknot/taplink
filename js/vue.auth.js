window.$app.defineComponent("auth","vue-auth-attach",{data:function(){return{state:""}},template:'<section class="hero is-fullheight is-fullscreen is-auth-hero has-background-white"> <div class="signin-header"> <a :href="\'{1}/\'|format(window.base_path_prefix)" class="signin-header-logo"></a> <router-link class="button" :to="{name: \'signin\'}">{{\'Авторизация\'|gettext}}</router-link> </div> <div class="hero-body has-p-1"> <div style="width: 480px;margin: 0 auto" class="has-p-3"> <div> <h1 class="has-mb-6 has-xs-mb-4 has-text-centered" style="font-size: 2.5rem;font-weight: bold;letter-spacing:-.06rem;">{{\'Подключить Instagram профиль\'|gettext}}</h1> <div class="message is-success"> <div class="message-body"> {{\'Для подключения Instagram профиля вам необходимо авторизоваться через Instagram\'|gettext}} </div> </div> <a type="button"class="button is-medium is-fullwidth is-light" :class="{\'disabled\': state== \'logging\', \'is-loading\': state== \'instagram\'}" :href="\'{1}/login/instagrambasic/\'|format(window.base_path_prefix)" @click="state = \'instagram\'"><i class="fab fa-ig"></i><span class="is-hidden-mobile has-ml-1">{{\'Подключить через Instagram\'|gettext}}</span></a> </div> <div class="row has-mt-3"> <div class="col-xs-12 col-sm"><div class="has-text-left has-text-grey has-text-centered-mobile has-xs-mb-2">{{\'Вернуться на\'|gettext}} <router-link :to="{name: \'signin\'}">{{\'страницу входа\'|gettext}}</router-link></div></div> <div class="col-xs col-sm-shrink has-text-right has-text-centered-mobile"> <vue-component-locale-change></vue-component-locale-change> </div> </div> </div> </div> </section>'}),window.$app.defineComponent("auth","vue-auth-change",{data:function(){return{avatar:"",isFetching:!0,isLoading:!1,allow:!1,values:{email:"",code:"",state:"",password1:"",password2:""}}},props:["username"],mixins:[FormModel],computed:{avatarBg:function(){return this.isFetching?null:"background-image: url("+this.avatar+");background-size:100%"}},created:function(){var s=this,t=getSearchParams();this.$api.get("auth/avatar",{username:this.username}).then(function(e){"success"==e.result?(s.avatar=e.response.avatar,s.allow=e.response.allow,s.isFetching=!1,null!=t.email&&(s.values.email=t.email,s.values.code=t.code,s.values.state="sent",s.submit())):s.$router.replace({name:"restore"})})},methods:{submit:function(){var s=this;this.isLoading=!0,this.$api.post("auth/emailchange",Object.assign({username:this.username},this.values),this).then(function(e){if(s.isLoading=!1,"success"==e.result){if(null!=e.response.account)return s.$auth.refresh(e.response.account,function(){s.$router.replace({name:"pages",params:{page_id:s.$account.page_id}})});s.values.state=e.response.values.state}})}},template:'<section class="hero is-fullheight is-fullscreen is-auth-hero has-background-white"> <div class="signin-header"> <a :href="\'{1}/\'|format(window.base_path_prefix)" class="signin-header-logo"></a> <router-link class="button" :to="{name: \'signin\'}">{{\'Авторизация\'|gettext}}</router-link> </div> <div class="hero-body has-p-1"> <div style="max-width: 450px;width: 450px;margin: 0 auto" class="has-p-3"> <div> <div class="has-text-centered"> <div class="profile-avatar profile-avatar-65 has-mb-2" :class="{skeleton: isFetching}" :style="avatarBg"></div> </div> <h2 class="has-mb-4 has-text-centered" style="font-weight: bold"><div :class="{skeleton: isFetching, \'has-mb-1\': isFetching}">{{\'Смена электронной почты для {1}\'|gettext|format(username)}}</span></h2> <div v-if="allow"> <h4 class="has-text-grey has-text-centered has-mb-3" v-if="values.state == \'\'">{{\'Какой у вас email?\'|gettext}}</h4> <h4 class="has-text-grey has-text-centered has-mb-3" v-if="values.state == \'sent\'">{{\'Мы отправили его на {1}\'|gettext|format(values.email)}}</h4> <h4 class="has-text-grey has-text-centered has-mb-3" v-if="values.state == \'pass\'">{{\'Придумайте пароль\'|gettext}}</h4> <form @submit.prevent="submit"> <b-field :class="{\'has-error\': errors.email}" :message="errors.email" v-if="values.state == \'\'"> <input type="email" v-model="values.email" class="input is-medium" :placeholder="\'Электронная почта\'|gettext" v-focus :disabled="values.state == \'sent\' || values.state == \'pass\' || isLoading" required></input> </b-field> <div :class="{\'has-error\': errors.code}" class="has-mb-3" v-if="values.state == \'sent\'"> <div class="row has-mb-1" v-if="values.state == \'sent\' || values.state == \'pass\'"> <div class="col-xs"><label class="label">{{\'Проверочный код\'|gettext}}</label></div> <div class="col-xs has-text-right"><a @click="values.state = \'\'" v-if="values.state != \'pass\'">{{\'Другая почта\'|gettext}}</a></div> </div> <b-field v-if="values.state == \'sent\' || values.state == \'pass\'" :message="errors.code"> <vue-component-verifyfield v-model="values.code" type="tel"></vue-component-verifyfield> </b-field> </div> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="values.state == \'pass\'"> <b-input :placeholder="\'Новый пароль\'|gettext" type="password" minlength="6" maxlength="40" v-model="values.password1" size="is-medium" :disabled="isLoading" ref="password" v-focus password-reveal icon-pack="fa" :has-counter="false"></b-input> </b-field> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="values.state == \'pass\'"> <b-input :placeholder="\'Повторите новый пароль\'|gettext" type="password" minlength="6" maxlength="40" v-model="values.password2" size="is-medium" :disabled="isLoading" password-reveal icon-pack="fa" :has-counter="false"></b-input> </b-field> <button class="button is-medium is-fullwidth is-primary has-mb-3" :class="{\'is-loading\': isLoading, disabled: isFetching}" :disabled="isFetching">{{\'Продолжить\'|gettext}}</button> </form> </div> <div v-else> <div style="height: 4em;position: relative" v-if="isFetching"> <div class="loading-overlay is-active"><div class="loading-icon"></div></div> </div> <div v-else> <div class="message is-success"> <div class="message-body"> {{\'Для смены электронной почты вам необходимо подтвердить ваш аккуант. Вы можете сделать это через Instagram профиль.\'|gettext|format(username)}} </div> </div> <a class="button is-medium is-fullwidth is-light has-mb-3" :class="{\'is-loading\': isLoading, disabled: isFetching}" :disabled="isFetching" :href="\'{1}/login/instagrambasic/?method=attach&emailchange=1\'|format(window.base_path_prefix, username)" @click="isLoading = true"><i class="fab fa-ig"></i><span class="has-ml-1">{{\'Подтвердить через Instagram\'|gettext}}</span></a> </div> </div> </div> <div class="row has-mt-3"> <div class="col-xs-12 col-sm"><div class="has-text-left has-text-grey has-text-centered-mobile has-xs-mb-2">{{\'Вернуться на\'|gettext}} <router-link :to="{name: \'signin\'}">{{\'страницу входа\'|gettext}}</router-link></div></div> <div class="col-xs col-sm-shrink has-text-right has-text-centered-mobile"> <vue-component-locale-change></vue-component-locale-change> </div> </div> </div> </div> </section>'}),window.$app.defineComponent("auth","vue-auth-email",{data:function(){return{isLoading:!1,state:"",email:"",code:""}},mixins:[FormModel],computed:{terms:function(){return this.$gettext("Я подтверждаю что ознакомлен и согласен с условиями <a %s>договора-оферты</a>").replace("%s",'href="'+window.base_path_prefix+'/about/terms.html" target="_blank"')}},created:function(){this.toPage(),null==this.profile_id&&window.$events.one("account:refresh",this.toPage)},methods:{submit:function(){var s=this;switch(this.isLoading=!0,this.state){case"":this.$api.post("auth/email/set",{email:this.email},this).then(function(e){switch(e.result){case"found":s.state="found";break;case"success":return s.updateProfile(e.response.account)}s.isLoading=!1});break;case"found":this.$api.post("auth/email/send",{email:this.email},this).then(function(e){"success"==e.result&&(s.state="sent",s.$nextTick(function(){s.$refs.verify_input.focus()})),s.isLoading=!1});break;case"sent":this.$api.post("auth/email/check",{email:this.email,code:this.code},this).then(function(e){"success"==e.result?s.updateProfile(e.response.account):s.isLoading=!1})}},toPage:function(){this.$account.profile_id&&this.$account.user.email&&this.$router.replace({name:"pages",params:{page_id:this.$account.page_id}})},updateProfile:function(e){var s=this;this.$auth.refresh(e,function(){s.toPage()})}},template:'<section class="hero is-fullheight is-fullscreen is-auth-hero"> <div class="hero-body has-p-1"> <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-lg-4 col-lg-offset-4 has-text-centered"> <a :href="\'{1}/\'|format(window.base_path_prefix)"><img src="/s/i/logo/title-logo-grey.png?2" style="width:150px;height:36px;margin-bottom: 2rem" alt="Taplink"></a> <div style="background:#fff;background: var(--background-white-color);border-radius: 4px;border-top: 1px solid #0383de;border-color: var(--link-color);"> <div class="has-p-3"> <h4 class="has-mb-3">{{\'Пожалуйста укажите вашу электронную почту\'|gettext}}</h4> <div class="message is-warning" v-if="state == \'found\'"> <div class="message-body"> {{\'Ранее вы уже создали аккаунт с данной электронной почтой. Подтвердите владение аккаунтом введя проверочный код, отправленный на вашу почту\'|gettext}} </div> </div> <div class="message is-success" v-if="state == \'sent\'"> <div class="message-body"> {{\'Мы отправили проверочный код на вашу электронную почту. Введите его и нажмите кнопку "Продолжить"\'|gettext}} </div> </div> <form @submit.prevent="submit"> <b-field :class="{\'has-error\': errors.email}" :message="errors.email"> <input :placeholder="\'Электронная почта\'|gettext" type="email" v-model="email" class="input is-medium" :class="{\'disabled\': isLoading || state != \'\'}" autofocus="on"></input> </b-field> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="state == \'sent\'"> <input :placeholder="\'Проверочный код\'|gettext" type="text" maxlength="6" v-model="code" class="input is-medium" :class="{\'disabled\': isLoading}" autofocus="on" ref="verify_input"></input> </b-field> <div class="row row-small" v-if="state == \'found\' || state== \'sent\'"> <div class="col-xs-12 col-sm-5 last-xs"> <button type="button" class="button is-medium is-fullwidth is-text has-text-no-underline" :class="{\'disabled\': isLoading}" @click="state = \'\'">{{\'Другая почта\'|gettext}}</button> </div> <div class="col-xs-12 col-sm-7 last-sm has-xs-mb-2"> <button type="submit" class="button is-medium is-primary is-fullwidth" :class="{\'is-loading\': isLoading}"><span v-if="state == \'found\'">{{\'Отправить проверочный код\'|gettext}}</span><span v-else>{{\'Продолжить\'|gettext}}</span></button> </div> </div> <button v-else type="submit" class="button is-primary is-medium is-fullwidth" :class="{\'is-loading\': isLoading}">{{\'Продолжить\'|gettext}}</button> </form> <div class="has-text-grey-light has-mt-3" v-if="state == \'\'"> <span v-html="terms"></span> </div> </div> </div> <div class="level has-mt-2"> <div class="level-left"></div> <div class="level-right"> <vue-component-locale-change></vue-component-locale-change> </div> </div> </div> </div> </section>'}),window.$app.defineComponent("auth","vue-auth-restore",{data:function(){return{isLoading:!1,withCaptcha:!1,sitekey:null,username:"",email:"",code:"",password1:"",password2:"",state:0,message:""}},mixins:[FormModel],components:{VueRecaptcha:VueRecaptcha},created:function(){var e=getSearchParams();null!=e.email&&(this.email=e.email,this.code=e.code,this.state=3,this.submit())},methods:{doRecaptcha:function(){var e=this;this.withCaptcha=!0,this.isFetching=!0,$mx.lazy("https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit",function(){setTimeout(function(){e.$refs.recaptcha.reset(),e.$refs.recaptcha.execute()},250)})},submit:function(){this.internalSubmit(void 0)},internalSubmit:function(e){var s=this;this.isLoading=!0,this.$api.post("auth/email/restore",{username:this.username,email:this.email,code:this.code,password1:this.password1,password2:this.password2,state:this.state,token:e},this).then(function(e){if("success"==e.result)switch(null!=e.response.values&&(s.state=e.response.values.state,s.email=e.response.values.email,s.message=e.response.values.message),s.state){case 1:s.message||s.$router.replace({name:"change",params:{username:s.username.trim().toLowerCase()}});break;case 2:s.state=3;break;case 3:s.state=4;break;case 4:return s.$auth.refresh(e.response.account,function(){s.$router.replace({name:"pages",params:{page_id:s.$account.page_id}})})}else"challenge"==e.result&&(s.sitekey=e.response.sitekey,s.doRecaptcha());s.isLoading=!1})}},template:'<section class="hero is-fullheight is-fullscreen is-auth-hero has-background-white"> <vue-recaptcha ref="recaptcha" size="invisible" :sitekey="sitekey" badge="bottomleft" @verify="internalSubmit" @error="" v-if="withCaptcha"/> <div class="signin-header"> <a :href="\'{1}/\'|format(window.base_path_prefix)" class="signin-header-logo"></a> <router-link class="button" :to="{name: \'signin\'}">{{\'Авторизация\'|gettext}}</router-link> </div> <div class="hero-body has-p-1"> <div style="width: 480px;margin: 0 auto" class="has-p-3"> <div> <h2 class="has-mb-3 has-text-centered" style="font-weight: bold" v-if="state == 0">{{\'Восстановление доступа\'|gettext}}</h2> <h2 class="has-mb-3 has-text-centered" style="font-weight: bold" v-if="state == 3">{{\'Введите проверочный код\'|gettext}}</h2> <h2 class="has-mb-3 has-text-centered" style="font-weight: bold" v-if="state == 1">{{\'Какой у вас email?\'|gettext}}</h2> <h2 class="has-mb-3 has-text-centered" style="font-weight: bold" v-if="state == 4">{{\'Придумайте пароль\'|gettext}}</h2> <div class="message is-success" v-if="state == 1"> <div class="message-body" v-html="message"></div> </div> <h4 class="has-text-grey has-text-centered has-mb-4" v-if="state == 0">{{\'Укажите email или имя профиля Instagram\'|gettext}}</h4> <h4 class="has-text-grey has-text-centered has-mb-4" v-if="state == 3">{{\'Мы отправили его на {1}\'|gettext|format(email)}}</h4> <form @submit.prevent="submit" class="has-mb-2"> <b-field :class="{\'has-error\': errors.username}" :message="errors.username" v-if="state == 0"> <input type="text" v-model="username" class="input is-medium" :disabled="isLoading" v-focus autocapitalize="off"></input> </b-field> <div class="field" :class="{\'has-error\': errors.email}" v-if="state == 1"> <div class="row has-mb-1"> <div class="col-xs"><label class="label">{{\'Электронная почта\'|gettext}}</label></div> <div class="col-xs has-text-right" v-if="state == 1"><router-link :to="{name: \'change\', params: {username: username.trim().toLowerCase()}}">{{\'Сменить почту\'|gettext}}</router-link></div> </div> <input type="text" v-model="email" class="input is-medium" :disabled="isLoading || state> 1" v-focus autocapitalize="off"></input> <p class="help" v-if="errors.email">{{errors.email}}</p> </div> <div :class="{\'has-error\': errors.code}" class="has-mb-3" v-if="state == 3"> <div class="row has-mb-1"> <div class="col-xs"><label class="label">{{\'Проверочный код\'|gettext}}</label></div> <div class="col-xs has-text-right"><a @click="state = 0">{{\'Другая почта\'|gettext}}</a></div> </div> <b-field :message="errors.code"> <vue-component-verifyfield v-model="code" :disabled="isLoading || state> 3"></vue-component-verifyfield> </b-field> </div> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="state> 3"> <b-input :placeholder="\'Новый пароль\'|gettext" type="password" minlength="6" maxlength="40" v-model="password1" size="is-medium" :disabled="isLoading" ref="password" v-focus password-reveal icon-pack="fa" :has-counter="false"></b-input> </b-field> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="state> 3"> <b-input :placeholder="\'Повторите новый пароль\'|gettext" type="password" minlength="6" maxlength="40" v-model="password2" size="is-medium" :disabled="isLoading" password-reveal icon-pack="fa" :has-counter="false"></b-input> </b-field> <button type="submit" class="button is-primary is-medium is-fullwidth" :class="{\'is-loading\': isLoading}">{{\'Продолжить\'|gettext}}</button> </form> </div> <div class="row has-mt-3"> <div class="col-xs-12 col-sm"><div class="has-text-left has-text-grey has-text-centered-mobile has-xs-mb-2">{{\'Вернуться на\'|gettext}} <router-link :to="{name: \'signin\'}">{{\'страницу входа\'|gettext}}</router-link></div></div> <div class="col-xs col-sm-shrink has-text-right has-text-centered-mobile"> <vue-component-locale-change></vue-component-locale-change> </div> </div> </div> </div> </section>'}),window.$app.defineComponent("auth","vue-auth-signin",{data:function(){return{email:"",password:"",password1:"",password2:"",state:"",confirm:!0,code:"",alert:!1,isFetching:!1,sitekey:null,fingerprint:null,withCaptcha:!1,captchaToken:"",twofactor:"",params:{}}},components:{VueRecaptcha:VueRecaptcha},mixins:[FormModel],props:["tab"],created:function(){this.toPage(),null==this.$account.profile_id&&window.$events.one("account:refresh",this.toPage),"signup"==this.tab&&this.withCaptcha&&this.initReCaptcha()},mounted:function(){this.params=getSearchParams(),null!=this.params.code&&(this.email=this.params.email,this.code=this.params.code,this.state="sent")},watch:{tab:function(e){this.state="","signup"==e&&this.withCaptcha&&this.initReCaptcha()}},computed:{terms:function(){return this.$gettext("Я подтверждаю что ознакомлен и согласен с условиями <a %s>договора-оферты</a>").replace("%s",'href="'+window.base_path_prefix+'/about/terms.html" target="_blank"')},localeRu:function(){return"ru"==window.i18n.locale}},methods:{initReCaptcha:function(){$mx.lazy("https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit")},changeTab:function(e){this.tab=e,this.state="",this.code="",this.alert=!1},chooseState:function(e){var s=this;this.state=e,setTimeout(function(){s.state=""},1250)},toPage:function(){this.$account.profile_id&&(this.$account.user.email?null!=this.params.comeback&&this.params.comeback?document.location=this.params.comeback:this.$router.replace({name:"pages",params:{page_id:this.$account.page_id}}):this.$router.replace({name:"email"}))},signup:function(){this.withCaptcha?(this.isFetching=!0,this.$refs.recaptcha.reset(),this.$refs.recaptcha.execute()):this.internalSignup(null)},doRecaptcha:function(){var e=this;this.withCaptcha=!0,this.isFetching=!0,$mx.lazy("https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit",function(){setTimeout(function(){e.$refs.recaptcha.reset(),e.$refs.recaptcha.execute()},250)})},verifyRecaptcha:function(e){"signin"==this.state?this.internalSignin(e):this.internalSignup(e)},internalSignup:function(e){var s=this;this.isFetching=!0,this.$api.post("auth/signup",{email:this.email,password1:this.password1,password2:this.password2,code:this.code,state:this.state,token:e,hash:this.fingerprint},this).then(function(e){s.isFetching=!1,"success"==e.result&&(null!=e.response.account?(s.$auth.session=e.response.session,s.$auth.refresh(e.response.account),s.toPage()):"captcha"==e.response.values.state?(s.sitekey=e.response.values.sitekey,s.doRecaptcha()):s.state=e.response.values.state)}).catch(function(e){s.isFetching=!1})},login:function(){this.internalSignin(null)},internalSignin:function(s){var t=this;this.state="signin",this.$api.post("auth/login",{email:this.email,password:this.password,token:s,twofactor:this.twofactor},this).then(function(e){"success"==e.result?(t.$auth.session=e.response.session,t.$auth.refresh(e.response.account),t.toPage()):"challenge"==e.result?(t.sitekey=e.response.sitekey,t.doRecaptcha()):"twofactor"==e.result?(t.state="",t.$challenge({account_token:e.response.account_token}).then(function(e){t.twofactor=e,t.internalSignin(s)})):t.state=""}).catch(function(){t.state=""})}},template:'<section class="hero is-fullheight is-fullscreen is-auth-hero has-background-white"> <vue-recaptcha ref="recaptcha" size="invisible" :sitekey="sitekey" badge="bottomleft" @verify="verifyRecaptcha" @error="" v-if="withCaptcha"/> <div class="signin-header"> <a :href="\'{1}/\'|format(window.base_path_prefix)" class="signin-header-logo"></a> <router-link class="button" :to="{name: \'signup\'}" v-if="tab == \'signin\'">{{\'Регистрация\'|gettext}}</router-link> <router-link class="button" :to="{name: \'signin\'}" v-if="tab == \'signup\'">{{\'Авторизация\'|gettext}}</router-link> </div> <div class="hero-body has-p-1"> <div style="width: 480px;margin: 0 auto" class="has-p-3"> <div v-if="tab == \'signin\'"> <h1 class="has-mb-6 has-xs-mb-4 has-text-centered" style="font-size: 2.5rem;font-weight: bold;letter-spacing:-.06rem;">{{\'Авторизация\'|gettext}}</h1> </div> <div v-if="tab == \'signup\'"> <h1 class="has-mb-6 has-xs-mb-4 has-text-centered" style="font-size: 2.5rem;font-weight: bold;letter-spacing:-.06rem;" v-if="state == \'\'">{{\'Регистрация\'|gettext}}</h1> <h2 class="has-mb-4 has-text-centered" v-if="state ==\'sent\'" style="font-weight: bold">{{\'Введите проверочный код\'|gettext}}</h2> <h2 class="has-mb-4 has-text-centered" style="font-weight: bold" v-if="state == \'pass\'">{{\'Придумайте пароль\'|gettext}}</h2> </div> <div v-if="!alert"> <div class="row row-small"> <div class="col-xs"> <a type="button" class="button is-medium is-fullwidth is-light" :class="{\'disabled\': state && state != \'facebook\', \'is-loading\': state== \'facebook\'}" :href="\'{1}/login/facebook/\'|format(window.base_path_prefix)" @click="chooseState(\'facebook\')"><i class="fab fa-fb-o"></i></a> </div> <div class="col-xs"> <a type="button" class="button is-medium is-fullwidth is-light" :class="{\'disabled\': state && state != \'google\', \'is-loading\': state== \'google\'}" :href="\'{1}/login/google/\'|format(window.base_path_prefix)" @click="chooseState(\'google\')"><i class="fab fa-g"></i></a> </div> <div class="col-xs" v-if="localeRu"> <a type="button" class="button is-medium is-fullwidth is-light" :class="{\'disabled\': state && state != \'vkontakte\', \'is-loading\': state== \'vkontakte\'}" :href="\'{1}/login/vkontakte/\'|format(window.base_path_prefix)" @click="chooseState(\'vkontakte\')"><i class="fab fa-vk" style="font-size: 1.9rem"></i></a> </div> </div> <div class="hr has-mb-5 has-mt-6 has-xs-mt-4 has-xs-mb-3 has-text-centered" :data-title="\'Или\'|gettext"></div> <form @submit.prevent="login" v-if="tab == \'signin\'"> <b-field :label="\'Электронная почта\'|gettext"> <b-input type="email" v-model="email" size="is-medium" :class="{\'disabled\': state != \'\'}" autofocus="on" tabindex="1"></b-input> </b-field> <div class="has-mb-4"> <div class="row has-mb-1"> <div class="col-xs"><label class="label">{{\'Пароль\'|gettext}}</label></div> <div class="col-xs has-text-right"><router-link :to="{name: \'restore\'}" :class="{\'disabled\': state != \'\'}">{{\'Восстановить доступ\'|gettext}}</router-link></div> </div> <b-input type="password" v-model="password" size="is-medium" :class="{\'disabled\': state != \'\'}" tabindex="2" password-reveal icon-pack="fa" :has-counter="false"></b-input> </div> <button type="submit" class="button is-primary is-medium is-fullwidth" :class="{\'is-loading\': state== \'signin\', \'disabled\': state== \'instagram\'}">{{\'Войти\'|gettext}}</button> </form> <div v-if="tab == \'signup\'"> <form @submit.prevent="signup"> <h4 class="has-text-grey has-text-centered has-mb-4" v-if="state == \'sent\' || state== \'check\'">{{\'Мы отправили его на {1}\'|gettext|format(email)}}</h4> <b-field :label="\'Какой у вас email?\'|gettext" :class="{\'has-error\': errors.email}" :message="errors.email" v-if="state == \'\'"> <input type="email" v-model="email" :placeholder="\'Электронная почта\'|gettext" class="input is-medium" :disabled="isFetching" autofocus="on"></input> </b-field> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="state == \'sent\' || state== \'check\'"> <vue-component-verifyfield v-model="code" :disabled="state == \'check\' || isFetching" @keydown="errors.code = null" type="tel"></vue-component-verifyfield> </b-field> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="state == \'pass\'"> <b-input :placeholder="\'Пароль\'|gettext" type="password" minlength="6" maxlength="40" v-model="password1" size="is-medium" :disabled="isFetching" v-focus password-reveal icon-pack="fa" :has-counter="false" v-focus></b-input> </b-field> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="state == \'pass\'"> <b-input :placeholder="\'Повторите пароль\'|gettext" type="password" minlength="6" maxlength="40" v-model="password2" size="is-medium" :disabled="isFetching" password-reveal icon-pack="fa" :has-counter="false"></b-input> </b-field> <div class="field" v-if="state != \'sent\' && state== \'pass\'"> <label class="checkbox"><input type="checkbox" v-model="confirm" :disabled="isFetching"><span v-html="terms"></span></label> </div> <button type="submit" class="button is-primary is-medium is-fullwidth" :class="{\'is-loading\': isFetching, \'disabled\': state== \'instagram\'}" :disabled="!confirm">{{\'Продолжить\'|gettext}}</button> </form> </div> <div class="row has-mt-3"> <div class="col-xs is-hidden-mobile" v-if="tab == \'signin\'">{{\'Нет аккаунта?\'|gettext}} <router-link :to="{name: \'signup\'}">{{\'Регистрация\'|gettext}}</router-link></div> <div class="col-xs is-hidden-mobile" v-if="tab == \'signup\'">{{\'Есть аккаунт?\'|gettext}} <router-link :to="{name: \'signin\'}">{{\'Авторизация\'|gettext}}</router-link></div> <div class="col-xs col-sm-shrink has-text-centered"> <vue-component-locale-change></vue-component-locale-change> </div> </div> </div> </div> </div> </section>'}),window.$app.defineModule("auth",[]);
