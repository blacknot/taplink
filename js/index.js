function getRandom(t){var a=t.length;return Math.floor(Math.random()*Math.floor(a))}function indexAutomationBlocksRebuild(t){var a=_.map(t.find("li.in"),function(t){return $mx(t).data("name")});t.closest(".row").find(".index-automate-canvas [data-block]").each(function(t){if(t=$mx(t),-1==a.indexOf(t.data("block"))){if(0<t.data("step"))return;t.data("step",1),setTimeout(function(){t.data("step",2),setTimeout(function(){t.data("step",3)},100)},50)}else{if(0==t.data("step"))return;t.data("step",2),setTimeout(function(){t.data("step",1),setTimeout(function(){t.data("step",0)},100)},50)}})}$mx.observe(".screen-sliders",function(t){var a,e=t.children(),n=(n=t.data("animation"))||"Up",i=0;e.length<=1||(a=function(){var t=$mx(e[i]);++i>e.length-1&&(i=0);var a=$mx(e[i]);e.removeClass("fadeIn"+n+" fadeOut"+n+" animated faster"),e.addClass("is-hidden"),t.removeClass("is-hidden").addClass("fadeOut"+n+" animated faster"),setTimeout(function(){a.removeClass("is-hidden").addClass("fadeIn"+n+" animated faster")},100)},setInterval(a,3e3),a())}),$mx.observe(".index-counter-more",function(e){var n=e.closest(".hero-block"),i=n.find("iframe").map(function(t){return $mx(t).data("profile")}),s=6;e.on("click",function(){function a(){var t=n.find(".examples-columns");t.children().css("transform","translate(-14.2857%, 0)"),setTimeout(function(){t.css("transition","none"),t.children().css("transform",null),t.children().eq(0).appendTo(t).find("iframe").attr("src","//taplink.cc/"+i[s]+"?static=1"),t.css("transition",null)},250)}var t;++s>=i.length?(t=e.data("page")+1,e.data("page",t),$mx.get(e.data("prefix")+"/examples/get.json?page="+t).then(function(t){i=i.concat(_.map(t.data,function(t){return t.nickname})),a()})):a()}).on("click",".index-container-welcome .btn-group-tariffs .button",function(t){var a=$mx(this).parent(),e=a.closest(".hero-block"),n=e.find(".device").removeClass("in").eq(a.index()).addClass("in").find("video");n.length&&(n[0].currentTime=0),e.find(".btn-group-gray .button").removeClass("active").eq(a.index()).addClass("active")})}),$mx.observe(".index-chatbot",function(t){var n=t.data("names").split(","),i=t.data("pages").split(","),s=t.data("prices").split(","),o=t.data("labels").split(","),r=t.find(".index-chatbot-container");function d(){var t=getRandom(i);m=$mx('<div class="index-message is-prepare"><div><b>'+o[0]+"</b><br>"+o[1]+": "+n[getRandom(n)]+"<br>"+o[2]+": "+i[t]+"<br>"+o[3]+": "+s[t]+"</div></div>").appendTo(r);var a=m.outerHeight()+15;r.addClass("is-animated").css("transform","translate3d(0, -"+a+"px, 0)"),m.css({transform:"translate3d(0, "+a+"px, 0)",opacity:0}).addClass("is-animated");var e=r.children();f=3<e.length?$mx(e.get(0)):null,f&&f.css({transform:"translate3d(0, 0, 0)",opacity:1}).addClass("is-animated"),setTimeout(function(){m.css({transform:"",opacity:1}),f&&f.css({transform:"translate3d(0, -"+f.outerHeight()+", 0)",opacity:0}),setTimeout(function(){m.removeClass("is-animated").removeClass("is-prepare"),r.removeClass("is-animated").css("transform",""),f&&f.remove(),setTimeout(function(){d()},2e3)},300)},10)}d()}),$mx.observe(".index-automation-blocks-list",function(a){a.find("li").click(function(t){$mx(this).toggleClass("in"),indexAutomationBlocksRebuild(a)}),indexAutomationBlocksRebuild(a)});
