function getRandom(e){var t=e.length;return Math.floor(Math.random()*Math.floor(t))}function indexAutomationBlocksRebuild(e){var t=_.map(e.find("li.in"),function(e){return $mx(e).data("name")});e.closest(".row").find(".index-automate-canvas [data-block]").each(function(e){if(e=$mx(e),-1==t.indexOf(e.data("block"))){if(0<e.data("step"))return;e.data("step",1),setTimeout(function(){e.data("step",2),setTimeout(function(){e.data("step",3)},100)},50)}else{if(0==e.data("step"))return;e.data("step",2),setTimeout(function(){e.data("step",1),setTimeout(function(){e.data("step",0)},100)},50)}})}$mx.observe(".screen-sliders",function(e){var t,a=e.children(),n=(n=e.data("animation"))||"Up",i=0;a.length<=1||(t=function(){var e=$mx(a[i]);++i>a.length-1&&(i=0);var t=$mx(a[i]);a.removeClass("fadeIn"+n+" fadeOut"+n+" animated faster"),a.addClass("is-hidden"),e.removeClass("is-hidden").addClass("fadeOut"+n+" animated faster"),setTimeout(function(){t.removeClass("is-hidden").addClass("fadeIn"+n+" animated faster")},100)},setInterval(t,3e3),t())}),$mx.observe(".index-counter-more",function(a){var n=a.closest(".hero-block"),i=n.find("iframe").map(function(e){return $mx(e).data("profile")}),s=6;a.on("click",function(){function t(){var e=n.find(".examples-columns");e.children().css("transform","translate(-14.2857%, 0)"),setTimeout(function(){e.css("transition","none"),e.children().css("transform",null),e.children().eq(0).appendTo(e).find("iframe").attr("src","//taplink.cc/"+i[s]+"?static=1"),e.css("transition",null)},250)}var e;++s>=i.length?(e=a.data("page")+1,a.data("page",e),$mx.get(a.data("prefix")+"/examples/get.json?page="+e).then(function(e){i=i.concat(_.map(e.data,function(e){return e.nickname})),t()})):t()}).on("click",".index-container-welcome .btn-group-tariffs .button",function(e){var t=$mx(this).parent(),a=t.closest(".hero-block"),n=a.find(".device").removeClass("in").eq(t.index()).addClass("in").find("video");n.length&&(n[0].currentTime=0),a.find(".btn-group-gray .button").removeClass("active").eq(t.index()).addClass("active")})}),$mx.observe(".index-chatbot",function(e){var i=e.data("names").split(","),s=e.data("pages").split(","),o=e.data("prices").split(","),d=e.data("labels").split(","),r=e.find(".index-chatbot-container");function c(){var e=getRandom(s);m=$mx('<div class="index-message is-prepare"><div><b>'+d[0]+"</b><br>"+d[1]+": "+i[getRandom(i)]+"<br>"+d[2]+": "+s[e]+"<br>"+d[3]+": "+o[e]+"</div></div>").appendTo(r);var t=m.outerHeight()+15;r.addClass("is-animated").css("transform","translate3d(0, -"+t+"px, 0)"),m.css({transform:"translate3d(0, "+t+"px, 0)",opacity:0}).addClass("is-animated");var a=r.children(),n=3<a.length?$mx(a.get(0)):null;n&&n.css({transform:"translate3d(0, 0, 0)",opacity:1}).addClass("is-animated"),setTimeout(function(){m.css({transform:"",opacity:1}),n&&n.css({transform:"translate3d(0, -"+n.outerHeight()+", 0)",opacity:0}),setTimeout(function(){m.removeClass("is-animated").removeClass("is-prepare"),r.removeClass("is-animated").css("transform",""),n&&n.remove(),setTimeout(function(){c()},2e3)},300)},10)}c()}),$mx.observe(".index-automation-blocks-list",function(t){t.find("li").click(function(e){$mx(this).toggleClass("in"),indexAutomationBlocksRebuild(t)}),indexAutomationBlocksRebuild(t)}),$mx.observe(".index-design-cards",function(a){setTimeout(function t(){a.addClass("in"),setTimeout(function(){a.addClass("frized"),setTimeout(function(){a.removeClass("in"),list=a.find(".index-design-cards-container");var e=list.children();e.eq(e.length-1).prependTo(list),setTimeout(function(){a.removeClass("frized"),setTimeout(t(),1e3)},100)},100)},1e3)},1e3)});
