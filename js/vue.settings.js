window.$app.defineComponent("settings","vue-settings-common",{data:function(){return{isUpdating:!1,isFetching:!1,is_active_onlinekassa:!1,variants:{time_zones:[],languages:[],currencies:[],unit_systems:{m:"",i:""},weight_units:{m:{h:null,l:null},i:{h:null,l:null}}},values:{utc_timezone:5,language_id:0,currency_code:"",is_hidelink:!1,options:{unit_system:"m",weight:{unit:"h"},seo:{title:"",description:""}}},errors:{},fractional_prices:!0}},mixins:[FormModel],created:function(){this.fetchData()},watch:{fractional_prices:function(e){this.values.options.currency.precision=e?2:0}},computed:{tariff:function(){return this.$account.tariff},seoTitlePlaceholder:function(){var e,s=this.$account;return s.custom_domain_verified?s.custom_domain:(s.nickname?(e=s.nickname).charAt(0).toUpperCase()+e.slice(1):"id:"+s.profile_id)+" at Taplink"},disallow:function(){return{pro:!this.$auth.isAllowTariff("pro"),business:!this.$auth.isAllowTariff("business")}}},methods:{fetchData:function(){var a=this;this.isFetching=!0,this.$api.get("settings/common/get").then(function(e){a.isFetching=!1;var s=e.response.common;a.variants=s.variants,a.values=s.values,a.fractional_prices=2==a.values.options.currency.precision,a.is_active_onlinekassa=s.is_active_onlinekassa,a.fetchTimezones()})},fetchTimezones:function(){var a=this;this.variants.time_zones=[];for(var t=new Date,i=t.getTimezoneOffset()/60,l=t.getTime(),e=-12;e<=13;e++){var s=[];switch(e){case 4:case 5:case 6:case 9:case 10:s=[e,e+.5];break;case-9:case-2:case-3:s=[e-.5,e];break;case 5:case 8:case 12:case 13:s=[e,e+.75];break;default:s=[e]}_.each(s,function(e){t.setTime(l-3600*(-i-e)*1e3);var s=e-Math.floor(e);a.variants.time_zones.push({key:e,title:a.$datetime(t)+", (Etc/GMT"+(0<=e?"+":"-")+(Math.abs(e)<10?"0":"")+Math.floor(Math.abs(e))+":"+(s?60*s:"00")+")"})})}},updateData:function(e){var s=this;this.isUpdating=!0,this.$api.post("settings/common/set",Object.assign({part:e},this.values),this).then(function(e){s.errors="fail"==e.result?e.errors:{},"success"==e.result&&(s.fetchData(),s.$auth.refresh()),s.isUpdating=!1})}},template:'<div class=\'has-mb-4 has-mt-4 has-xs-mb-3 has-xs-mt-3\'> <div class="container"> <div class="row has-mb-2-mobile"> <div class="col-xs-12 col-sm-4"> <h3 class="has-mb-1">{{\'Настройки страницы\'|gettext}}</h3> <div class="has-text-grey has-mb-2 is-hidden-mobile">{{\'Настройка интерфейса и локализация страницы\'|gettext}}</div> </div> <div class="col-xs-12 col-sm-8"> <div class="panel panel-default"> <div class="has-p-2"> <div class="row"> <div class="col-xs-12 col-sm-6 has-mb-3"> <b-field :label="\'Текущее время\'|gettext"> <b-select v-model="values.utc_timezone" :disabled="isUpdating" expanded> <option v-for="v in variants.time_zones" :value="v.key">{{ v.title }}</option> </b-select> </b-field> </div> <div class="col-xs-12 col-sm-6 has-mb-3"> <b-field :label="\'Язык страницы\'|gettext"> <b-select v-model="values.language_id" :disabled="isUpdating" expanded> <option v-for="(v, k) in variants.languages" :value="k">{{ v }}</option> </b-select> </b-field> </div> </div> <div class="row"> <div class="col-xs-12 col-sm-6"> <div class="label-pro-container"> <div v-if="disallow.pro" class="tag is-pro" v-tippy :content="\'Эта возможность доступна<br>на pro тарифе\'|gettext">pro</div> <b-field :label="\'Валюта\'|gettext" class="has-sm-mb-3" :class="{disabled: disallow.pro}" :type="((is_active_onlinekassa && (values.currency_code != \'RUB\')) || (errors.currency_code != undefined))?\'is-danger\':\'\'" :message="(is_active_onlinekassa && (values.currency_code != \'RUB\'))?\'Онлайн касса отправляет чеки только с продаж в рублях\':((errors.currency_code != undefined)?errors.currency_code:\'\')"> <b-autocomplete v-model="values.currency_code" field="currency_code" open-on-focus="true" :data="variants.currencies" class="select is-fullwidth" :disabled="isUpdating || disallow.pro"> <template slot-scope="props"> {{props.option.title}} </template> <template slot="empty">{{\'Ничего не найдено\'|gettext}}</template> </b-autocomplete> </b-field> </div> </div> <div class="col-xs-12 col-sm-6 last-sm has-xs-mt-2 has-xs-mb-2"> <label class="checkbox" :disabled="isUpdating"> <input v-model="fractional_prices" type="checkbox">{{\'Дробные цены\'|gettext}} </label> </div> <div class="col-xs-12 col-sm-6"> <div> <div class="label-pro-container"> <div v-if="disallow.business" class="tag is-business" v-tippy :content="\'Эта возможность доступна на Business тарифе\'|gettext">biz</div> <b-field :label="\'Скрыть логотип Taplink на странице\'|gettext" :class="{disabled: disallow.business}"> <mx-toggle v-model="values.is_hidelink" :disabled="isUpdating || disallow.business"/> </b-field> </div> </div> </div> </div> </div> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div> </div> </div> <div v-if="$auth.hasFeature(\'products\')"> <hr class="is-hidden-mobile"> <div class="row has-mb-2-mobile"> <div class="col-xs-12 col-sm-4"> <div class="label-pro-container"> <div v-if="disallow.business" class="tag is-business is-middle" v-tippy :content="\'Эта возможность доступна на Business тарифе\'|gettext">biz</div> <h3 class="has-mb-1">{{\'Стандарты и форматы\'|gettext}}</h3> </div> <div class="has-text-grey has-mb-2 is-hidden-mobile">{{\'Стандарты и форматы используются для веса товаров\'|gettext}}</div> </div> <div class="col-xs-12 col-sm-8"> <div class="panel panel-default has-p-2"> <div class="row"> <div class="col-xs-12 col-sm-6 has-xs-mb-3"> <b-field :label="\'Система единиц\'|gettext" :class="disallow.business"> <b-select v-model="values.options.unit_system" :disabled="isUpdating || disallow.business" expanded> <option v-for="(v, i) in variants.unit_systems" :value="i">{{v|gettext}}</option> </b-select> </b-field> </div> <div class="col-xs-12 col-sm-6"> <b-field :label="\'Единица измерения веса\'|gettext" :class="{disabled: disallow.business}"> <b-select v-model="values.options.weight.unit" :disabled="isUpdating || disallow.business" expanded> <option v-for="(v, i) in variants.weight_units[values.options.unit_system]" :value="i">{{v|gettext}}</option> </b-select> </b-field> </div> </div> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div> </div> </div> </div> <hr class="is-hidden-mobile"> <div class="row has-mb-2-mobile"> <div class="col-xs-12 col-sm-4"> <div class="label-pro-container"> <div v-if="disallow.pro" class="tag is-pro is-middle" v-tippy :content="\'Вставка HTML кода<br>доступна на PRO тарифе\'|gettext">pro</div> <h3 class="has-mb-1">{{\'Вставка HTML кода\'|gettext}}</h3> </div> <div class="has-text-grey has-mb-2 is-hidden-mobile">{{\'Обычно HTML код используется для вставки виджетов и интеграций других сервисов\'|gettext}}</div> </div> <div class="col-xs-12 col-sm-8"> <div class="panel panel-default"> <vue-component-codemirror v-model="values.options.html" :disabled="isUpdating || disallow.pro"></vue-component-codemirror> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div> </div> </div> <hr class="is-hidden-mobile"> <div class="row has-mb-2-mobile"> <div class="col-xs-12 col-sm-4"> <div class="label-pro-container"> <div v-if="disallow.pro" class="tag is-pro is-middle" v-tippy :content="\'Эта возможность доступна на PRO тарифе\'|gettext">pro</div> <h3 class="has-mb-1">{{\'Настройки SEO\'|gettext}}</h3> </div> <div class="has-text-grey has-mb-2 is-hidden-mobile">{{\'Управляйте отображением сайта в поисковых системах\'|gettext}}</div> </div> <div class="col-xs-12 col-sm-8"> <div class="panel panel-default has-p-2"> <b-field :label="\'Заголовок страницы\'|gettext" :class="{disabled: disallow.pro}"> <div class="control"> <input type="text" class="input" maxlength="180" :disabled="isUpdating || disallow.pro" v-model="values.options.seo.title" :placeholder="seoTitlePlaceholder"> <p class="has-mt-1 has-text-grey">{{\'Отображается в названии вкладки браузера и в результатах поисковых систем\'|gettext}}</p> </div> </b-field> <b-field :label="\'SEO описание\'|gettext" :class="{disabled: disallow.pro}"> <div class="control"> <textarea class="input" maxlength="512" rows="4" :disabled="isUpdating || disallow.pro" v-model="values.options.seo.description"></textarea> <p class="has-mt-1 has-text-grey">{{\'Отображается в результатах поисковых систем под ссылкой\'|gettext}}</p> </div> </b-field> </div> </div> </div> <hr class="is-hidden-mobile"> <div class="has-text-right"> <button type="button" class="button is-primary is-fullwidth-mobile" :class="{\'is-loading\': isUpdating}" @click="updateData(\'common\')" :disabled="isUpdating">{{\'Сохранить изменения\'|gettext}}</button> </div> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-domain-certificate-form",{data:function(){return{isFetching:!1,isUpdating:!1,cert:"",key:"",expires_at:null}},mixins:[FormModel],created:function(){var s=this;this.isFetching=!0,this.$api.get("settings/domain/certificate/get").then(function(e){s.cert=e.response.values.cert,s.key=e.response.values.key,s.expires_at=e.response.values.expires_at,s.isFetching=!1})},methods:{update:function(){var s=this;this.isUpdating=!0,this.$api.post("settings/domain/certificate/upload",{cert:this.cert,key:this.key},this).then(function(e){s.isUpdating=!1,"success"==e.result&&s.$parent.close()})}},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title">{{\'SSL сертификат\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <section class="message is-warning" v-if="expires_at"> <div class="message-body">{{\'Сертификат истекает: {1}\'|gettext|format($date(expires_at))}}</div> </section> <section class="modal-card-body"> <div class="field"> <label class="label">{{\'Сертификат\'|gettext}}</label> <textarea class="input" rows="10" v-model="cert"></textarea> </div> <div class="field"> <label class="label">{{\'Приватный ключ\'|gettext}}</label> <textarea class="input" rows="7" v-model="key"></textarea> </div> </section> <footer class="modal-card-foot"> <button class="button is-primary" :class="{\'is-loading\': isUpdating}" @click="update"><span v-if="expires_at">{{\'Обновить сертификат\'|gettext}}</span><span v-else>{{\'Загрузить сертификат\'|gettext}}</span></button> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("settings","vue-settings-domain-zonemanager-form",{data:function(){return{isFetching:!1,isUpdating:!1,current:-1,priority:{0:"0 - High",1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,15:15,20:"20 - Low"},records:[]}},mixins:[FormModel],created:function(){this.fetchData()},methods:{deleteZone:function(e){var s=this,a=this.records[e];this.$confirm(this.$format(this.$gettext('Вы уверены, что хотите удалить запись "{1}" для поддомена "{2}"?'),a.type,a.subdomain?a.subdomain:"subdomain"),"is-danger").then(function(){s.records.splice(e,1)})},getError:function(e,s){return null!=this.errors[e]&&null!=this.errors[e][s]?this.errors[e][s]:null},onAction:function(e){this.records.push({type:e,subdomain:"",content:"",priority:0}),this.current=this.records.length-1},openBlock:function(e){this.current=this.current==e?-1:e,this.$emit("update:current",this.current)},update:function(){var s=this;this.isUpdating=!0,this.$api.get("settings/domain/zonemanager/update",{records:this.records},this).then(function(e){s.isUpdating=!1,0<_.size(s.errors)&&null==s.errors[s.current]&&(s.current=Object.keys(s.errors)[0]),"success"==e.result&&s.$parent.close()})},fetchData:function(){var s=this;this.isFetching=!0,this.$api.get("settings/domain/zonemanager/list").then(function(e){s.isFetching=!1,s.records=e.response.records})}},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Управление зоной\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <section class="modal-card-body" style="display: flex;justify-content: space-between;flex-direction: column"> <div class="form-fields-item-list" :class="{\'has-mb-2\': records.length, disabled: isUpdating}"> <div class="form-fields-item" v-for="(f, index) in records" :class="{in: current== index}"> <div class="form-fields-item-title" @click="openBlock(index)"> <div class="form-fields-item-handle block-handle-link-caret"></div> <a class="has-text-danger is-pulled-right" @click.stop="deleteZone(index)"><i class="fa fa-trash-alt"></i></a> <span><span style="margin: 0 .5rem;width:3.5rem" class="tag is-dark">{{f.type}}</span> <span v-if="f.type == \'A\'"><span v-if="f.subdomain">{{f.subdomain}}</span><span class="has-text-grey-light" v-else>subdomain</span><span><i class="fal fa-long-arrow-right" style="margin: 0 1rem"></i><span v-if="f.content">{{f.content}}</span><span class="has-text-grey-light" v-else>0.0.0.0</span></span></span> <span v-if="f.type == \'CNAME\'"><span v-if="f.subdomain">{{f.subdomain}}</span><span class="has-text-grey-light" v-else>subdomain</span><span><i class="fal fa-long-arrow-right" style="margin: 0 1rem"></i><span v-if="f.content">{{f.content}}</span><span class="has-text-grey-light" v-else>Canonical name</span></span></span> <span v-if="f.type == \'TXT\'"><span v-if="f.subdomain">{{f.subdomain}}</span><span class="has-text-grey-light" v-else>subdomain</span><span><i class="fal fa-long-arrow-right" style="margin: 0 1rem"></i><span v-if="f.content">"{{f.content}}"</span><span class="has-text-grey-light" v-else>Text</span></span></span> <span v-if="f.type == \'MX\'"><span v-if="f.subdomain">{{f.subdomain}}</span><span class="has-text-grey-light" v-else>subdomain</span><span><i class="fal fa-long-arrow-right" style="margin: 0 1rem"></i><span v-if="f.content">{{f.content}} {{f.priority}}</span><span class="has-text-grey-light" v-else>Mail server</span></span></span> </span> </div> <div class="form-fields-item-options"> <div v-if="f.type == \'A\'" class="row row-small"> <div class="col-xs-12 col-sm-8 has-mb-2-mobile"> <vue-component-subdomain-field v-model="f.subdomain" :domain="$account.custom_domain" :error="getError(index, \'subdomain\')"></vue-component-subdomain-field> </div> <div class="col-xs-12 col-sm-4"> <b-field :message="getError(index, \'content\')" :class="{\'has-error\': getError(index, \'content\')}"> <b-input type="input" v-model="f.content" expanded placeholder="IP address"></b-input> </b-field> </div> </div> <div v-if="f.type == \'CNAME\'" class="row row-small"> <div class="col-xs-12 col-sm-8 has-mb-2-mobile"> <vue-component-subdomain-field v-model="f.subdomain" :domain="$account.custom_domain" :error="getError(index, \'subdomain\')"></vue-component-subdomain-field> </div> <div class="col-xs-12 col-sm-4"> <b-field :message="getError(index, \'content\')" :class="{\'has-error\': getError(index, \'content\')}"> <input type="input" v-model="f.content" class="input is-expanded" placeholder="Canonical name"> </b-field> </div> </div> <div v-if="f.type == \'MX\'" class="row row-small"> <div class="col-xs-12 col-sm-6 has-mb-2-mobile"> <vue-component-subdomain-field v-model="f.subdomain" :domain="$account.custom_domain" :error="getError(index, \'subdomain\')"></vue-component-subdomain-field> </div> <div class="col-xs-5 col-sm-2"> <div class="select is-fullwidth"> <select v-model="f.priority"> <option v-for="(v, i) in priority" :value="i">{{v}}</option> </select> </div> </div> <div class="col-xs-7 col-sm-4"> <b-field :message="getError(index, \'content\')" :class="{\'has-error\': getError(index, \'content\')}"> <input type="input" v-model="f.content" class="input is-expanded" placeholder="Mail server"> </b-field> </div> </div> <div v-if="f.type == \'TXT\'" class="row row-small"> <div class="col-xs-12 col-sm-8 has-mb-2-mobile"> <vue-component-subdomain-field v-model="f.subdomain" :domain="$account.custom_domain" :error="getError(index, \'subdomain\')"></vue-component-subdomain-field> </div> <div class="col-xs-12 col-sm-4"> <input type="input" v-model="f.content" class="input is-expanded" placeholder="text"> </div> </div> </div> </div> </div> <div class="block-arrow-left-bottom has-mt-2" style="opacity:0.5" v-if="records.length == 0"> {{\'Для добавления записей в DNS сервер нажмите тут\'|gettext}} </div> </section> <footer class="modal-card-foot level"> <div class="level-left"> <vue-component-action-button @action="onAction" :title="\'Добавить запись\'|gettext" classname="button is-clear" icon=\'fa fa-plus\'> <template slot="actions"> <b-dropdown-item value="A">A</b-dropdown-item> <b-dropdown-item value="CNAME">CNAME</b-dropdown-item> <b-dropdown-item value="MX">MX</b-dropdown-item> <b-dropdown-item value="TXT">TXT</b-dropdown-item> </template> </vue-component-action-button> </div> <div class="leve-right"> <button class="button is-primary" :class="{\'is-loading\': isUpdating}" @click="update">{{\'Сохранить\'|gettext}}</button> </div> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-index",{created:function(){},template:'<div class=\'has-mb-4 has-mt-4 has-xs-mb-3 has-xs-mt-3\'> <div class="container"> <vue-settings-payments-providers class="has-mb-4"></vue-settings-payments-providers> <hr class="is-hidden-mobile" v-if="$auth.hasFeature(\'onlinekassa\')"> <vue-settings-payments-onlinekassa v-if="$auth.hasFeature(\'onlinekassa\')"></vue-settings-payments-onlinekassa> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-onlinekassa-errors",{data:function(){return{isFetching:!1,fields:[],variants:{type:{sell:"Приход",sell_refund:"Возврат прихода"}},total:0,perPage:30,page:1}},created:function(){this.fetchData(!0),this.$io.on("events:settings.payments.onlinekassa.errors.list:refresh",this.refresh)},destroyed:function(){this.$io.off("events:settings.payments.onlinekassa.errors.list:refresh",this.refresh)},methods:{refresh:function(){this.fetchData(!1)},fetchData:function(e){var s=this;this.isFetching=e,this.$api.get("settings/payments/onlinekassa/errors/list",{page:this.page,count:this.perPage}).then(function(e){s.fields=e.response.settings.payments.onlinekassa.errors.fields,s.total=e.response.settings.payments.onlinekassa.errors.total,s.isFetching=!1}).catch(function(e){throw s.fields=[],s.total=0,s.isFetching=!1,e})},onPageChange:function(e){this.page=e,this.fetchData()},onRepeat:function(e){var s=this;this.$confirm("Вы уверены что хотите отправить чек №%s в онлайн кассу повторно?".replace("%s",e.order_number),"is-warning").then(function(){s.$api.get("settings/payments/onlinekassa/errors/repeat",{order_id:e.order_id,order_version:e.order_version})})}},template:'<div class="has-mb-4 has-mt-4"> <div class="container"> <router-link :to="{name: \'settings.payments\'}" class="button is-light has-mb-2 is-fullwidth-mobile"><i class="fa fa-angle-left" style="margin-right:5px"></i> Вернуться к настройкам</router-link> <b-table paginated backend-pagination :data="fields" :loading="isFetching" :per-page="perPage" :total="total" @page-change="onPageChange" bordered> <b-table-column field="name" label="Счет" class="has-width-10" v-slot="props">№{{ props.row.order_number }}</b-table-column> <b-table-column field="name" label="Тип" class="has-width-20" v-slot="props">{{ variants.type[props.row.type] }}</b-table-column> <b-table-column field="name" label="Ошибка" class="has-text-danger" v-slot="props"> {{ props.row.error }} <a v-if="props.row.error" @click="onRepeat(props.row)" class="button is-small is-default is-pulled-right"><i class="fa fa-repeat" style="margin-right: 5px"></i> <span v-if="props.row.uuid">Отправить новый запрос</span><span v-else>Отправить повторно</span></a> </b-table-column> <template slot="empty"> <section class="has-mb-4 has-mt-4 content has-text-grey has-text-centered" v-if="!isFetching"> <p><b-icon icon="smile" size="is-large"></b-icon></p> <p>{{\'Пока ничего нет\'|gettext}}</p> </section> <section class="has-mb-4 has-mt-4 content has-text-grey has-text-centered" v-if="isFetching"> <p>{{\'Загрузка данных\'|gettext}}</p> </section> </template> </b-table> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-onlinekassa",{data:function(){return{isUpdating:!1,isFetching:!1,values:{is_active:!1,receipt_errors:0},variants:{},errors:{group:""}}},created:function(){this.fetchData(!0)},computed:{currentOnlinekassa:function(){return this.values.onlinekassa_provider_id?"vue-settings-payments-onlinekassa-"+this.variants.onlinekassa_provider_id[this.values.onlinekassa_provider_id].onlinekassa_provider_name:null},isAllow:function(){return this.$auth.isAllowTariff("business")}},mixins:[FormModel],methods:{fetchData:function(e){var s=this;this.isFetching=e,this.$api.get(["settings/payments/onlinekassa/get","settings/payments/onlinekassa/info"]).then(function(e){s.isFetching=!1,s.values=e.response.settings.payments.onlinekassa.values,s.variants=e.response.settings.payments.onlinekassa.variants,s.$account.hits.settings.payments.onlinekassa.errors=s.values.receipt_errors})},updateData:function(){var s=this;this.isUpdating=!0,this.$api.post("settings/payments/onlinekassa/set",this.values,this).then(function(e){s.isUpdating=!1,"success"==e.result&&(s.values=e.response.values)}).catch(function(e){s.isUpdating=!1})}},template:'<div class="row"> <div class="col-xs-12 col-sm-4"> <div class="label-pro-container"> <div v-if="!$auth.isAllowTariff(\'business\')" class="tag is-business is-middle" v-tippy :content="\'Эта возможность доступна на Business тарифе\'|gettext">biz</div> <h3 class="has-mb-1">Онлайн касса</h3> </div> <div class="has-text-grey has-mb-2"> Подключите онлайн-кассу для уведомления налоговой инспекции о продажах и отправки электронных чеков клиентам</div> </div> <div class="col-xs-12 col-sm-8"> <div class="message is-danger" v-if="values.receipt_errors"><div class="message-body"><router-link :to="{name: \'settings.payments.onlinekassa.errors\'}" class="button is-small is-danger is-pulled-right is-hidden-mobile" type="submit" name="action" value="update">Посмотреть ошибки</router-link>Обнаружены ошибки в работе с онлайн кассой<router-link :to="{name: \'settings.payments.onlinekassa.errors\'}" class="button is-fullwidth is-danger is-visible-mobile" type="submit" name="action" value="update" style="margin-top:10px">Посмотреть ошибки</router-link></div></div> <div class="panel panel-default" :class="{disabled: !isAllow}"> <div class="card-content"> <div class="field"> <mx-toggle title="Активировать поддержку онлайн касс" v-model="values.is_active"></mx-toggle> </div> <div class="row has-mb-2" :class="{disabled: !values.is_active}"> <div class="col-xs-12 col-sm-6"> <b-field label="ИНН" :message="errors.inn" :class="{\'has-error\': errors.inn}" class="has-mb-2"> <b-input v-model="values.inn" type="number" :disabled="!values.is_active"> </b-field> </div> <div class="col-xs-12 col-sm-6"> <b-field label="Онлайн касса" :message="errors.onlinekassa_provider_id" :class="{\'has-error\': errors.onlinekassa_provider_id}"> <b-select placeholder="-- Только через платежные системы --" v-model="values.onlinekassa_provider_id" :disabled="!values.is_active" expanded> <option :value="null">-- Только через платежные системы --</option> <option v-for="v in variants.onlinekassa_provider_id" :value="v.onlinekassa_provider_id">{{v.onlinekassa_provider_title}}</option> </b-select> </b-field> </div> </div> <div class="row" :class="{disabled: !values.is_active}"> <div class="col-xs-12 col-sm-4"> <b-field label="Система налогообложения" class="has-mb-2" :message="errors.sno_id" :class="{\'has-error\': errors.sno_id}"> <b-select placeholder="-- Не выбрано --" v-model="values.sno_id" :disabled="!values.is_active" expanded> <option v-for="(v, k) in variants.sno_id" :value="k">{{v}}</option> </b-select> </b-field> </div> <div class="col-xs-12 col-sm-4"> <b-field label="Ставка НДС" :message="errors.tax_id" class="has-mb-2" :class="{\'has-error\': errors.tax_id}"> <b-select placeholder="-- Не выбрано --" v-model="values.tax_id" :disabled="!values.is_active" expanded> <option v-for="(v, k) in variants.tax_id" :value="k">{{v}}</option> </b-select> </b-field> </div> <div class="col-xs-12 col-sm-4"> <b-field label="Признак способа расчета" :message="errors.method_id" :class="{\'has-error\': errors.method_id}"> <b-select v-model="values.method_id" :disabled="!values.is_active" expanded> <option v-for="(v, k) in variants.method_id" :value="k">{{v}}</option> </b-select> </b-field> </div> </div> </div> <div class="card-content" :class="{disabled: !values.is_active}" v-if="values.onlinekassa_provider_id"> <h2 class="has-mb-4 has-text-grey-light">Настройки онлайн кассы</h2> <component v-bind:is="currentOnlinekassa" v-model="values.options[values.onlinekassa_provider_id]" :variants="variants" :is_active="values.is_active" :errors="errors" v-if="values.onlinekassa_provider_id"></component> </div> <footer class="mx-item-footer"> <button type="button" class="button is-primary is-fullwidth-mobile" :class="{\'is-loading\': isUpdating}" @click="updateData">Сохранить изменения</button> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-onlinekassa-atolonline",{data:function(){return{}},created:function(){null==this.value.version&&(this.value.version=3)},props:["value","errors","is_active"],mixins:[FormModel],methods:{},template:'<div> <b-field label="Код группы касс" :message="errors.group" :class="{\'has-error\': errors.group}"> <b-input type=\'text\' v-model=\'value.group\' :disabled="!is_active"></b-input> </b-field> <b-field label="Адрес места расчетов" :message="errors.payment_address" :class="{\'has-error\': errors.payment_address}"> <b-input type=\'text\' v-model=\'value.payment_address\' maxlength="256" :has-counter="false" :disabled="!is_active"></b-input> </b-field> <b-field label="Логин для токена" :message="errors.login" :class="{\'has-error\': errors.login}"> <b-input type=\'text\' v-model=\'value.login\' :disabled="!is_active"></b-input> </b-field> <b-field label="Пароль для токена" :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type=\'text\' v-model=\'value.password\' :disabled="!is_active"></b-input> </b-field> <b-field label="Версия API"> <b-select placeholder="-- Не выбрано --" v-model="value.version" :disabled="!is_active" expanded> <option value="3">v3</option> <option value="4">v4</option> </b-select> </b-field> <b-field label="Электронная почта отправителя чека" :message="errors.email" :class="{\'has-error\': errors.email}"> <b-input type=\'text\' v-model=\'value.email\' :disabled="!is_active"></b-input> </b-field> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-onlinekassa-cloudkassir",{data:function(){return{receiptLink:"https://taplink.cc/payments/cloudkassir/receipt.html"}},created:function(){},props:["value","errors","is_active"],mixins:[FormModel],methods:{},template:'<div> <b-field label="Public ID" :message="errors.login" :class="{\'has-error\': errors.login}"> <b-input type=\'text\' v-model=\'value.login\' :disabled="!is_active"></b-input> </b-field> <b-field label="Пароль для API" :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type=\'text\' v-model=\'value.password\' :disabled="!is_active"></b-input> </b-field> <b-field label="Установите уведомление Receipt в настройках CloudKassir"> <div class="has-feedback"> <b-input type=\'text\' :value=\'receiptLink\' onfocus="this.focus();this.select()" readonly="on"></b-input> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="receiptLink" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </b-field> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-onlinekassa-modulkassa",{data:function(){return{}},computed:{isAuth:function(){return this.value&&""!=this.value.auth}},props:["value","errors","is_active"],mixins:[FormModel],methods:{disconnect:function(){this.value.username="",this.value.password="",this.value.auth=!1}},template:'<div> <b-field label="Идентификатор" :message="errors.point" :class="{\'has-error\': errors.point}"> <b-input type=\'text\' v-model=\'value.point\' :disabled="!is_active || isAuth"></b-input> </b-field> <div v-if="isAuth"> <button class="button is-warning" @click="disconnect"><i class="fal fa-exchange"></i> Указать другой идентификатор</button> </div> <div v-else> <b-field label="Логин" :message="errors.username" :class="{\'has-error\': errors.username}"> <b-input type=\'text\' v-model=\'value.username\' :disabled="!is_active"></b-input> </b-field> <b-field label="Пароль" :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type=\'password\' v-model=\'value.password\' :disabled="!is_active" password-reveal icon-pack="fa"></b-input> </b-field> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-onlinekassa-orangedata",{data:function(){return{}},created:function(){},props:["value","errors","is_active"],mixins:[FormModel],methods:{},template:'<div> <b-field label="Код группы касс" :message="errors.group" :class="{\'has-error\': errors.group}"> <b-input type=\'text\' v-model=\'value.group\' :disabled="!is_active"></b-input> </b-field> <b-field label="Приватный ключ организации для подписи запросов" :message="errors.priv" :class="{\'has-error\': errors.priv}"> <b-input type=\'textarea\' v-model=\'value.priv\' :disabled="!is_active"></b-input> </b-field> <b-field label="Содержимое файла client.crt" :message="errors.cert" :class="{\'has-error\': errors.cert}"> <b-input type=\'textarea\' v-model=\'value.cert\' :disabled="!is_active"></b-input> </b-field> <b-field label="Содержимое файла client.key" :message="errors.key" :class="{\'has-error\': errors.key}"> <b-input type=\'textarea\' v-model=\'value.key\' :disabled="!is_active"></b-input> </b-field> <b-field label="Пароль" :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type=\'text\' v-model=\'value.password\' :disabled="!is_active"></b-input> </b-field> <div class="field"> <label class="label">Имя ключа</label> <p class="control"> <b-field> <b-input type=\'text\' v-model=\'value.keyname\' :disabled="!is_active"></b-input> </b-field> <p class="has-text-grey has-mt-1">Если имя ключа не указано для проверки подписи будет использован ключ, заданный по умолчанию.</p> </p> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-provider-form",{data:function(){return{isUpdating:!1,isFetching:!1,currentProvider:null,payment_provider_id:null,is_new:!1,is_lock:!1,providers:null,values:{},variants:{},challenge:"",title:null}},created:function(){var a=this;if(this.payment_provider_id)this.fetchData(!0);else{this.providers={general:[]};for(var e=0;e<16;e++)this.providers.general.push({classname:"payments-button payments-button-blank"});this.isFetching=!0,this.$api.get("settings/payments/providers/info").then(function(e){a.isFetching=!1;var s=_.map(e.response.settings.payments.provider.providers,function(e){return e.classname="payments-button",e.style="background:url(/s/i/pays/providers/"+e.payment_provider_id+".png) no-repeat;background-size: 100%",e});a.providers.general=s})}},props:["payment_provider_id"],mixins:[FormModel],methods:{fetchData:function(e){var a=this;this.isFetching=e,this.$api.get("settings/payments/providers/get",{payment_provider_id:this.payment_provider_id}).then(function(e){var s=e.response.settings.payments.provider;a.is_new=s.is_new,a.values=s.values,a.variants=s.variants,a.currentProvider="vue-settings-payments-providers-"+s.payment_provider.name,a.title=s.payment_provider.title,a.isAllowCurrency=s.payment_provider.allow_currency,a.is_new?a.values.payments_methods=_.filter(_.map(a.variants.payments_methods,function(e){return e.is_main_method?e.payment_method_id:null})):(a.is_lock=s.is_lock,a.account_token=s.account_token),window.i18n.extend(s.phrases),a.isFetching=!1})},unlock:function(){var s=this;this.$challenge({account_token:this.account_token}).then(function(e){s.challenge=e,s.is_lock=!1})},chooseProvider:function(e){this.payment_provider_id=e,this.fetchData(!0)},close:function(){this.$parent.close()},popupCenter:function(e,s,a,t,i,l){var d=null!=window.screenLeft?window.screenLeft:window.screenX,n=null!=window.screenTop?window.screenTop:window.screenY,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,r=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;a=Math.max(i,o/100*a),h=Math.max(l,a*t);var c=o/window.screen.availWidth,v=(o-a)/2/c+d,p=(r-h)/2/c+n,m=window.open(e,s,"location=no,status=no,scrollbars=yes, width="+a/c+", height="+h/c+", top="+p+", left="+v);window.focus&&m.focus()},onAction:function(e){var s=this;switch(e){case"delete":this.$confirm(this.$gettext("Вы уверены что хотите удалить эту платежную систему?"),"is-danger").then(function(e){s.$api.get("settings/payments/providers/delete",Object.assign({payment_provider_id:s.payment_provider_id},{challenge:s.challenge})).then(function(e){switch(e.result){case"success":s.$parent.close();break;case"challenge":s.unlock()}})})}},save:function(s,e,a){var t=this;null==a&&(a={}),this.isUpdating=!(null!=e&&!e),this.$api.post("settings/payments/providers/set",Object.assign(this.values,a,{challenge:this.challenge}),this.$refs.model).then(function(e){switch(t.isUpdating=!1,e.result){case"success":null!=s&&s&&t.$parent.close();break;case"challenge":t.unlock()}}).catch(function(e){t.isUpdating=!1})}},template:'<div class="modal-card modal-card-large"> <header class="modal-card-head"> <p class="modal-card-title" v-if="title">{{title}}</p> <p class="modal-card-title" v-else>{{\'Платежные системы\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <section class="modal-card-body" v-if="currentProvider"> <div class=\'message is-danger\' v-if="!isAllowCurrency"><div class="message-body"><i class="fa fa-exclamation-triangle has-mr-1"></i> {{\'Ваша валюта не поддерживается данной платежной системой\'|gettext}}</div></div> <component v-bind:is="currentProvider" ref=\'model\' :values.async="values" :variants="variants" :payment_provider_id="payment_provider_id" :is_new="is_new" :disabled="is_lock"></component> </section> <section class="modal-card-body modal-card-body-blocks" v-else> <section v-if="providers"> <div class="row row-small" style="margin-bottom: -1rem"> <div class="col-sm-3 col-xs-6 has-mb-2" v-for="f in providers.general"><button @click="chooseProvider(f.payment_provider_id)" class="button is-vertical btn-block is-block-button" :class="{skeleton: !f.title && isFetching}"> <dd class="payments-auto" v-if="f.tags && f.tags.indexOf(\'auto\') != -1" v-tippy content="Быстрая настройка" @click.stop=""></dd> <dd class="payments-people" v-if="f.tags && f.tags.indexOf(\'people\') != -1" v-tippy content="Работают с физ. лицами" @click.stop=""></dd> <i :class="f.classname" :style="f.style"></i> <div>{{f.title}}</div> </button></div> </div> </section> </section> <footer class="modal-card-foot level" v-if="currentProvider"> <div class="level-left" v-if="is_new"> <button class="button is-dark is-hidden-tablet" type="button" @click="$parent.close()">{{\'Отмена\'|gettext}}</button> </div> <div class="level-left" v-else> <tippy to="lock-button" :visible="true" trigger="manual" placement=\'top-start\' v-if="is_lock">{{\'Нажмите на замок, чтобы внести изменения\'|gettext}}</tippy> <button name="lock-button" v-if="!is_new && is_lock" class="button has-mr-2 is-warning" @click="unlock"><i :class="\'fa fa-\'+(is_lock?\'lock\':\'lock-open\')"></i></button> <vue-component-action-button @action="onAction" :title="\'Действие\'|gettext" v-else-if="!is_new"> <template slot="actions"> <b-dropdown-item value="delete" class="has-text-danger"><i class="fa fa-trash-alt has-mr-1"></i>{{\'Удалить\'|gettext}}</b-dropdown-item> </template> </vue-component-action-button> </div> <div class="level-right"> <button class="button is-primary" :class="{\'is-loading\': isUpdating}" @click="save" :disabled="is_lock">{{\'Сохранить\'|gettext}}</button> </div> </footer> <footer class="modal-card-foot is-hidden-mobile" v-if="!currentProvider"> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Закрыть\'|gettext}}</button> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-provider-methods",{props:["index","values","variants","disabled"],template:'<div class="media"> <div class="media-left"><span class=\'tag is-dark\'>{{index}}</span></div> <div class="media-content"> <div class="has-mb-1">{{\'Выберите доступные варианты оплаты\'|gettext}}</div> <div class="is-block" v-for="v in variants.payments_methods"><b-checkbox :native-value="v.payment_method_id" v-model="values.payments_methods" :disabled="disabled">{{v.payment_method_title}}</b-checkbox></div> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-provider-mode",{props:["index","values","variants","disabled"],template:'<div class="media"> <div class="media-left"><span class=\'tag is-dark\'>{{index}}</span></div> <div class="media-content"> <div class="has-mb-1">{{\'Режим работы\'|gettext}}</div> <div class="row"> <div class="col-xs-12 col-sm-6"><label class="radio"><input type=\'radio\' name=\'mode\' value="test" v-model="values.mode" :disabled="disabled"> {{\'Тестовый режим\'|gettext}}</label></div> <div class="col-xs-12 col-sm-6"><label class="radio"><input type=\'radio\' name=\'mode\' value="work" v-model="values.mode" :disabled="disabled"> {{\'Рабочий режим\'|gettext}}</label></div> </div> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers",{data:function(){return{isFetching:!1,providers:[]}},computed:{isAllow:function(){return this.$auth.isAllowTariff("business")}},created:function(){this.$io.on("events:settings.payments.providers:refresh",this.refresh),this.fetchData(!0)},destroyed:function(){this.$io.off("events:settings.payments.providers:refresh",this.refresh)},methods:{refresh:function(){this.fetchData(!1)},fetchData:function(e){var s=this;this.isFetching=e,this.$api.get("settings/payments/list",{page:this.page}).then(function(e){s.providers=e.response.settings.payments.providers,s.isFetching=!1}).catch(function(e){throw s.providers=[],s.isFetching=!1,e})},openForm:function(e){this.$modal("vue-settings-payments-provider-form",{payment_provider_id:e?e.payment_provider_id:null},this)}},template:'<div class="row"> <div class="col-xs-12 col-sm-4 has-mb-2"> <div class="label-pro-container"> <div v-if="!$auth.isAllowTariff(\'business\')" class="tag is-business is-middle" v-tippy :content="\'Эта возможность доступна на Business тарифе\'|gettext">biz</div> <h3 class="has-mb-1">{{\'Платежные системы\'|gettext}}</h3> </div> <div class="has-text-grey">{{\'Подключите платежные системы чтобы принимать платежи напрямую от своих клиентов за ваши услуги и товары\'|gettext}}</div> </div> <div class="col-xs-12 col-sm-8"> <div class="card1" :class="{disabled: !isAllow}"> <b-table :data="providers" :loading="isFetching" :mobile-cards="false" hoverable bordered class="table-header-hide" @click="openForm"> <template slot-scope="props" slot="header" style="color:red" class="is-hidden"> <div class="has-text-center">{{ props.column.label }}</div> </template> <b-table-column field="name" :label="\'Платежная система\'|gettext" style="vertical-align:middle" v-slot="props"> <div class="has-sm-p-1"> <div v-if="props.row.allow_currency == 0" class="is-pulled-right has-text-danger"><i class="fa fa-exclamation-triangle"></i> <span class="is-hidden-mobile">{{\'Валюта не поддерживается\'|gettext}}</span></div> <div v-else> <div class="is-pulled-right has-text-warning" v-if="props.row.mode == \'test\'"><i class="fa fa-exclamation-triangle"></i> <span class="is-hidden-mobile">{{\'Тестовый режим\'|gettext}}</span></div> </div> <h3 class="has-mb-1">{{ props.row.title }}</h3> <div class="tags" v-if="props.row.methods"> <i v-for="v in props.row.methods" class="tag is-default" style="padding: 5px 30px;border-radius: 3px;zoom:.5"> <img v-if="v.picture" :src="v.picture" style="width:80px;height:80px"> <span :class="\'payments-button payments-button-{1}\'|format(v.payment_method)" v-else></span> </i> </div> <div class="has-text-grey" v-else>{{\'Варианты оплаты не выбраны\'|gettext}}</div> </div> </b-table-column> <template slot="empty"> <section class="has-mb-4 has-mt-4 content has-text-grey has-text-centered" v-if="isFetching"> <p>{{\'Загрузка данных\'|gettext}}</p> </section> <section class="has-mb-4 has-mt-4 content has-text-grey has-text-centered" v-else> <p>{{\'Настроенных платежных систем пока нет\'|gettext}}</p> </section> </template> <template slot="footer"> <a class=\'mx-link mx-tap\' @click="openForm(null)" class="button is-text is-fullwidth" style="text-decoration:none"><i class="fa fa-plus-circle has-mr-1"></i>{{\'Добавить платежную систему\'|gettext}}</a> </template> </b-table> </div> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-alfabank",{data:function(){return{resultUrl:this.variants.domain_base+"/payments/alfabank/result.html",countries:{ru:"Россия",by:"Беларусь"}}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <div class="has-mb-1">Страна</div> <b-select type="text" v-model="values.country" :disabled="disabled"> <option v-for="(v, id) in countries" :value="id">{{v}}</option> </b-select> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <p><a href="https://alfabank.ru/sme/rko/internet-acquiring/" target="_blank">Зарегистрируйтесь</a> на сайте эквайринга от Альфа-банка</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <p class="has-mb-1">Передайте в Альфабанк URL для Callback-уведомлений с симметричной криптографией:</p> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on" :disabled="disabled"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <b-field label="Логин магазина, полученный при подключении:" :message="errors.username" :class="{\'has-error\': errors.username}"> <b-input type="text" v-model="values.username" :disabled="disabled"></b-input> </b-field> <b-field label="Пароль магазина, полученный при подключении:" :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type="text" v-model="values.password" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="5" :variants="variants" :values="values" :disabled="disabled"/> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>6</span></div> <div class="media-content"> <div>Онлайн касса</div> <b-checkbox v-model="values.onlinekassa" :disabled="disabled">Использовать Альфа-банк в качестве онлайн кассы для отправки чеков</b-checkbox> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>7</span></div> <div class="media-content"> <div>Двухстадийная оплата</div> <b-checkbox v-model="values.withaccept" :disabled="disabled">Подтверждать каждую оплату в личном кабинете</b-checkbox> </div> </div> <vue-settings-payments-provider-mode index="8" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-alif",{computed:{domain:function(){return this.variants.domain_must+"/"},signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте alif.mobi").replace("%s",'href="https://alif.mobi" target="_blank"')}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Укажите данные полученные от Алиф</div> <b-field :label="\'Ключ:\'|gettext" :message="errors.key" :class="{\'has-error\': errors.key}"> <b-input type="text" v-model="values.key" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Пароль\'|gettext" :message="errors.pass" :class="{\'has-error\': errors.pass}"> <b-input type="text" v-model="values.pass" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-bepaid",{computed:{domain:function(){return this.variants.domain_must+"/"},signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте bepaid.by").replace("%s",'href="https://bepaid.by" target="_blank"')}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Используйте настройки</div> <div class="field"> <label class="label">URL сайта:</label> <div class="has-feedback"> <input type="text" :value="domain" class="input" onfocus="this.focus();this.select()" readonly="on" :disabled="disabled"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="domain" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">Укажите полученные ID и Secret Key</div> <b-field :label="\'ID:\'|gettext" :message="errors.id" :class="{\'has-error\': errors.id}"> <b-input type="text" v-model="values.id" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Secret Key:\'|gettext" :message="errors.secret_key" :class="{\'has-error\': errors.secret_key}"> <b-input type="text" v-model="values.secret_key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="5" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-capusta",{data:function(){return{resultUrl:"https://taplink.cc/payments/capusta/result.html",isAutoMode:!0,isConnecting:!1,sent:!1,agree:!0}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],created:function(){this.$io.on("events:payments.capusta:connect.resolve",this.connectResolve)},destroyed:function(){this.$io.off("events:payments.capusta:connect.resolve",this.connectResolve)},methods:{connectResolve:function(e){e.merchantId==this.values.merchantId&&(this.values.token=e.token,this.sent=!1,this.values.activated=!0,this.$toast("Интеграция успешно подключена","is-success"))},connect:function(){var a=this;this.isConnecting=!0,this.$api.post("settings/payments/providers/set",Object.assign(this.values,{action:"connect"}),this).then(function(e){if(a.isConnecting=!1,"success"==e.result)switch(_.each(e.response.values,function(e,s){a.values[s]=e}),e.response.values.result.status){case"EXIST":case"MERCHANT_EXIST":a.sent=!0;break;case"NEW":a.values.activated=!0,a.$toast("Интеграция успешно подключена. На ваш email были отправлены регистрационные данные сервиса Capusta.Space","is-success")}}).catch(function(e){a.isConnecting=!1})}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <div class="has-mb-1">Настройки проекта</div> <label class="checkbox has-mb-2"><input type="checkbox" v-model="isAutoMode" :disabled="sent || disabled">Подключить автоматически</label> <label class="label">Укажите ваш email:</label> <b-field :class="{\'has-error\': errors.email}" class="has-mb-2"> <b-input type="text" v-model="values.email" :disabled="(values.activated || sent || disabled) && isAutoMode" expanded></b-input> <p class="control" v-if="isAutoMode"> <button class="button is-success" :class="{\'is-loading\': isConnecting}" @click="connect" :disabled="sent || !agree || disabled" v-if="!values.activated"><i class="fas fa-plug has-mr-2"></i> Подключить</button> <button class="button is-dark" @click="values.activated = false" v-else>Другой аккаунт</button> </p> </b-field> <transition name="fade"> <div class="message is-warning has-mb-1" v-if="sent"><div class="message-body"> <i class="fa fa-exclamation-triangle has-mr-1"></i>{{\'На ваш email была отправлена ссылка для подтверждения аккаунта\'}} <a @click="sent = false" class="is-pulled-right">{{\'Другая почта\'|gettext}}</a> </div></div> </transition> <b-checkbox v-model="agree" :disabled="sent || disabled" v-if="isAutoMode && !values.activated">Я принимаю условия <a target="_blank" href="https://docs.capusta.space/Agreement.pdf">пользовательского соглашения</a></b-checkbox> <div v-if="!isAutoMode"> <b-field label="Укажите ваш ID проекта:" :message="errors.project" :class="{\'has-error\': errors.project}"> <b-input type="text" v-model="values.project" :disabled="disabled"></b-input> </b-field> <b-field label="Укажите ваш Токен:" :message="errors.token" :class="{\'has-error\': errors.token}"> <b-input type="text" v-model="values.token" :disabled="disabled"></b-input> </b-field> </div> </div> </div> <vue-settings-payments-provider-methods index="2" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-cash",{props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],data:function(){return{current:0,isSorting:!1}},methods:{sortStart:function(){this.isSorting=!0},sortEnd:function(){var e=this;this.$nextTick(function(){e.isSorting=!1})},onRemove:function(e){var s=this;1!=this.values.list.length&&this.$confirm(this.$gettext("Вы уверены что хотите удалить этот способ оплаты?"),"is-danger").then(function(){s.values.list.splice(e,1)})},onAdd:function(){var e=this;this.values.list.push({title:"",message:"",picture:null,custom_picture:0}),this.current=this.values.list.length-1,this.$nextTick(function(){e.$refs.list.querySelector(".in input").focus()})},deletePicture:function(e){e.custom_picture=0}},template:'<div> <div ref="list"> <vue-component-sortable-form-fields v-model="values.list" @sortEnd="sortEnd" @sortStart="sortStart" class="has-mb-2" :current.sync="current"> <template v-slot:title="{ item }"> <span><span v-if="item.title">{{ item.title }}</span><span v-else>{{\'Наличными\'|gettext}}</span></span> </template> <template v-slot:action="{ index }"> <a class="is-pulled-right has-text-danger" @click.stop="onRemove(index)" v-if="values.list.length> 1"><i class="fa fa-trash-alt"></i></a> </template> <template v-slot:form="{ item, index }"> <div class="has-mb-1"> <b-field :label="\'Заголовок\'|gettext"> <b-input type="text" v-model="item.title" :placeholder="\'Наличными\'|gettext" maxlength="80" :has-counter="false" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Инструкция для оплаты\'|gettext"> <b-input type="textarea" v-model="item.message" maxlength="8192" :has-counter="false" :disabled="disabled"></b-input> </b-field> </div> <p class="has-text-grey">{{\'Этот текст будет показан клиенту когда он выберет этот способ оплаты\'|gettext}}</p> <label class="label has-mt-2">{{\'Картинка\'|gettext}}</label> <div class="payments-picture-choose"> <i class="payments-button payments-button-cash" :class="{in: item.custom_picture == 0}" @click="item.custom_picture = 0"></i> <vue-component-pictures class="payments-picture" :class="{in: item.custom_picture == 1}" @click="item.custom_picture = 1" v-model="item.picture" :button-title="\'Загрузить\'|gettext" button-icon="fa fal fa-cloud-upload" max-size="80" updatable @input="if (!isSorting && current== index) item.custom_picture = (item.picture != null)?1:0" :disabled="disabled"></vue-component-pictures> </div> </template> </vue-component-sortable-form-fields> </div> <a href=\'#\' @click="onAdd" v-if="!disabled">{{\'Добавить новый способ оплаты\'|gettext}}</a> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-cloudpayments",{computed:{resultUrl:function(){return"https://taplink.cc/payments/cloudpayments/result.html"},checkUrl:function(){return"https://taplink.cc/payments/cloudpayments/check.html"}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://cloudpayments.ru" target="_blank">Зарегистрируйтесь</a> на сайте cloudpayments.ru и добавьте сайт<br> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Укажите настройки уведомлений</div> <div class="field"> <label class="label">Check уведомления:</label> <div class="has-feedback"> <input type="text" :value="checkUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="checkUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">Pay уведомления:</label> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <p>HTTP метод должен быть указан "POST", кодировка "UTF-8", а формат запросов "CloudPayments"</p> </div> <div class="field"> <b-field label="У меня есть Apple MerchantID"> <div class="control" style="display: flex"> <mx-toggle v-model="values.apple_pay_has_merchant" class="has-mr-2" :disabled="disabled"></mx-toggle> <div style="flex:1"> <b-input type="text" v-model="values.apple_pay_merchant" placeholder="MerchantID" v-show="values.apple_pay_has_merchant" :disabled="disabled || $account.custom_domain_verified"></b-input> </div> </div> </b-field> <b-field label="Содержимое файла верификации для Apple Pay:" :message="errors.apple_pay_code" :class="{\'has-error\': errors.apple_pay_code}"> <b-input type="text" v-model="values.apple_pay_code" :disabled="disabled || !$account.custom_domain_verified"></b-input> </b-field> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div>Онлайн касса</div> <b-checkbox v-model="values.onlinekassa" :disabled="disabled">Использовать CloudPayments в качестве онлайн кассы для отправки чеков</b-checkbox> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <div class="has-mb-1">Укажите "Public ID" и "Пароль для API":</div> <b-field label="Public ID:" :message="errors.public_id" :class="{\'has-error\': errors.public_id}"> <b-input type="text" v-model="values.public_id" :disabled="disabled"></b-input> </b-field> <b-field label="Пароль для API:" :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type="text" v-model="values.password" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="5" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="6" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-ecommerce24",{props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте ecommerce24.kz").replace("%s",'href="https://ecommerce24.kz" target="_blank"')}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">{{\'Укажите полученные данные от Ecommerce24\'|gettext}}</div> <b-field :label="\'Merchant Id:\'|gettext" :message="errors.merchantId" :class="{\'has-error\': errors.merchantId}"> <b-input type="text" v-model="values.merchantId" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Login:\'|gettext" :message="errors.login" :class="{\'has-error\': errors.login}"> <b-input type="text" v-model="values.login" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Password:\'|gettext" :message="errors.pass" :class="{\'has-error\': errors.pass}"> <b-input type="text" v-model="values.pass" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="4" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-ecommpay",{data:function(){return{resultUrl:"https://taplink.cc/payments/ecommpay/result.html"}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте ecommpay.com").replace("%s",'href="https://ecommpay.com" target="_blank"')}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <label class="has-mb-1 is-block">{{\'Укажите адрес для Callback\'|gettext}}</label> <div class="field"> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">{{\'Укажите полученные данные от EcommPay\'|gettext}}</div> <b-field :label="\'project_id:\'|gettext" :message="errors.project_id" :class="{\'has-error\': errors.project_id}"> <b-input type="text" v-model="values.project_id" :disabled="disabled"></b-input> </b-field> <b-field :label="\'secret:\'|gettext" :message="errors.secret" :class="{\'has-error\': errors.secret}"> <b-input type="text" v-model="values.secret" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="5" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-fastspring",{data:function(){return{resultUrl:"https://taplink.cc/payments/fastspring/result.html"}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://fastspring.com" target="_blank">Зарегистрируйтесь</a> на сайте fastspring.com</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "Product Path":\' :message="errors.product_path" :class="{\'has-error\': errors.product_path}"> <b-input type="text" v-model="values.product_path" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "Popup Storefront":\' :message="errors.storefront" :class="{\'has-error\': errors.storefront}"> <b-input type="text" v-model="values.storefront" placeholder="VENDOR.onfastspring.com/popup-ABC-XYZ-123" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <b-field label=\'Укажите ваш Store Builder Library "access_key":\' :message="errors.access_key" :class="{\'has-error\': errors.access_key}"> <b-input type="text" v-model="values.access_key" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>5</span></div> <div class="media-content"> <b-field label=\'Укажите ваш Store Builder Library "private_key":\' :message="errors.private_key" :class="{\'has-error\': errors.private_key}"> <b-input type="textarea" v-model="values.private_key" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>6</span></div> <div class="media-content"> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on" :disabled="disabled"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> <p class="has-mt-1 has-text-grey">Выберите <b>order.completed</b> и <b>order.canceled</b></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>7</span></div> <div class="media-content"> <b-field label=\'Укажите Webhook HMAC SHA256 Secret:\' :message="errors.secret" :class="{\'has-error\': errors.secret}"> <b-input type="text" v-model="values.secret" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="8" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-flutterwave",{data:function(){return{}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://flutterwave.com" target="_blank">Зарегистрируйтесь</a> на сайте flutterwave.com</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "Secret key":\' :message="errors.secret_key" :class="{\'has-error\': errors.secret_key}"> <b-input type="text" v-model="values.secret_key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-fondy",{data:function(){return{}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://fondy.ru" target="_blank">Зарегистрируйтесь</a> на сайте fondy.ru</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "ID мерчанта":\' :message="errors.merchant_id" :class="{\'has-error\': errors.merchant_id}"> <b-input type="text" v-model="values.merchant_id" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "Ключ платежа":\' :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type="text" v-model="values.password" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-freekassa",{data:function(){return{}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],computed:{domain:function(){return this.variants.domain_must+"/"},resultUrl:function(){return this.variants.domain_must+"/payments/freekassa/result.html"},successUrl:function(){return this.variants.domain_must+"/payments/freekassa/success.html"},failUrl:function(){return this.variants.domain_must+"/payments/freekassa/fail.html"}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://www.free-kassa.ru/" target="_blank">Зарегистрируйтесь</a> на сайте free-kassa.ru и добавьте магазин<br> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Укажите настройки </div> <div class="field"> <label class="label">URL сайта:</label> <div class="has-feedback"> <input type="text" :value="domain" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="domain" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">URL оповещения:</label> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">URL успеха:</label> <div class="has-feedback"> <input type="text" :value="successUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="successUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">URL неудачи:</label> <div class="has-feedback"> <input type="text" :value="failUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="failUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">Укажите Идентификатор магазина, \'Секретное слово #1\' и \'Секретное слово #2\'</div> <b-field label="Идентификатор магазина:" :message="errors.merchant_id" :class="{\'has-error\': errors.merchant_id}"> <b-input type="text" v-model="values.merchant_id" :disabled="disabled"></b-input> </b-field> <b-field label="Секретное слово #1:" :message="errors.password_1" :class="{\'has-error\': errors.password_1}"> <b-input type="text" v-model="values.password_1" :disabled="disabled"></b-input> </b-field> <b-field label="Секретное слово #2:" :message="errors.password_2" :class="{\'has-error\': errors.password_2}"> <b-input type="text" v-model="values.password_2" :disabled="disabled"></b-input> </b-field> </div> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-idram",{props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <b-field label="EDP REC ACCOUNT" :message="errors.account" :class="{\'has-error\': errors.key}"> <b-input type="input" v-model="values.account" :disabled="disabled"></b-input> </b-field> <b-field label="SECRET KEY" :message="errors.secret_key" :class="{\'has-error\': errors.secret_key}"> <b-input type="input" v-model="values.secret_key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="2" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="3" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-instamojo",{computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте instamojo.com").replace("%s",'href="https://instamojo.com" target="_blank"')}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field label="API Key" :message="errors.key" :class="{\'has-error\': errors.key}"> <b-input type="input" v-model="values.key" :disabled="disabled"></b-input> </b-field> <b-field label="AUTH token" :message="errors.token" :class="{\'has-error\': errors.token}"> <b-input type="input" v-model="values.token" :disabled="disabled"></b-input> </b-field> <b-field label="Private Salt" :message="errors.salt" :class="{\'has-error\': errors.salt}"> <b-input type="input" v-model="values.salt" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="4" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-ipaymu",{computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте ipaymu.com").replace("%s",'href="https://www.ipaymu.com" target="_blank"')}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field label="Virtual Account" :message="errors.account" :class="{\'has-error\': errors.account}"> <b-input type="input" v-model="values.account" :disabled="disabled"></b-input> </b-field> <b-field label="API key" :message="errors.key" :class="{\'has-error\': errors.key}"> <b-input type="input" v-model="values.key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="4" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-iyzico",{computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте iyzico.com").replace("%s",'href="https://iyzico.com" target="_blank"')}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field label="API key" :message="errors.api_key" :class="{\'has-error\': errors.api_key}"> <b-input type="input" v-model="values.api_key" :disabled="disabled"></b-input> </b-field> <b-field label="Secret key" :message="errors.api_key" :class="{\'has-error\': errors.secret_key}"> <b-input type="input" v-model="values.secret_key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="4" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-liqpay",{props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://www.liqpay.ua/" target="_blank">Зарегистрируйтесь</a> на сайте www.liqpay.ua<br> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Введите полученные "public_key" и "private_key"</div> <b-field label="public_key:" :message="errors.public_key" :class="{\'has-error\': errors.public_key}"> <b-input type="text" v-model="values.public_key" :disabled="disabled"></b-input> </b-field> <b-field label="private_key:" :message="errors.private_key" :class="{\'has-error\': errors.private_key}"> <b-input type="text" v-model="values.private_key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="4" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-midtrans",{props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте midtrans.com").replace("%s",'href="https://midtrans.com" target="_blank"')}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">{{\'Укажите полученные данные от Midtrans\'|gettext}}</div> <b-field label="Client Key:" :message="errors.client_key" :class="{\'has-error\': errors.client_key}"> <b-input type="text" v-model="values.client_key" :disabled="disabled"></b-input> </b-field> <b-field label="Server Key:" :message="errors.server_key" :class="{\'has-error\': errors.server_key}"> <b-input type="text" v-model="values.server_key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="4" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-modulbank",{computed:{domain:function(){return this.$account.custom_domain_verified?this.$account.link:"https://"+this.variants.domain_must}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://modulbank.ru" target="_blank">Зарегистрируйтесь</a> на сайте modulbank.ru и добавьте "Интернет-эквайринг"<br> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Укажите адрес сайта:</div> <div class="field" v-if="$account.custom_domain"> <div class="has-feedback"> <input type="text" :value="domain" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="domain" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div v-else class="message is-danger"> <div class="message-body">МодульБанк требует наличие своего доменного имени, подробнее о <a href="https://modulbank.ru/fs/files/demands-for-sources.pdf" target="_blank">требованиях</a></div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">Укажите данные полученные из МодульБанка:</div> <b-field label="Идентификатор магазина:" :message="errors.merchant_id" :class="{\'has-error\': errors.merchant_id}"> <b-input type="text" v-model="values.merchant_id" :disabled="disabled"></b-input> </b-field> <b-field label="Тестовый секретный ключ:" :message="errors.test_key" :class="{\'has-error\': errors.test_key}"> <b-input type="text" v-model="values.test_key" :disabled="disabled"></b-input> </b-field> <b-field label="Рабочий секретный ключ:" :message="errors.work_key" :class="{\'has-error\': errors.work_key}"> <b-input type="text" v-model="values.work_key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>5</span></div> <div class="media-content"> <div>Онлайн касса</div> <b-checkbox v-model="values.onlinekassa" :disabled="disabled">Использовать Modulbank в качестве онлайн кассы для отправки чеков</b-checkbox> </div> </div> <vue-settings-payments-provider-mode index="6" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-paddle",{data:function(){return{resultUrl:"http://taplink.cc/payments/paddle/result.html"}},computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте paddle.com").replace("%s",'href="https://www.paddle.com" target="_blank"')},webhookText:function(){return this.$gettext("<a %s>Установите</a> URL для получения уведомлений и выберите все Webhook события").replace("%s",'href="https://vendors.paddle.com/account#tabs-alerts" target="_blank"')}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field :label="\'Укажите ваш vendor_id:\'|gettext" :message="errors.vendor_id" :class="{\'has-error\': errors.vendor_id}"> <b-input type="text" v-model="values.vendor_id" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Укажите ваш vendor_auth_code:\'|gettext" :message="errors.vendor_auth_code" :class="{\'has-error\': errors.vendor_auth_code}"> <b-input type="text" v-model="values.vendor_auth_code" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Укажите ваш public_key:\'|gettext" :message="errors.public_key" :class="{\'has-error\': errors.public_key}"> <b-input type="textarea" v-model="values.public_key" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1" v-html="webhookText"></div> <div class="field"> <label class="label">{{\'URL для Webhook:\'|gettext}}</label> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-payanyway",{props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],computed:{checkUrl:function(){return"https://taplink.cc/payments/payanyway/check.html"},payUrl:function(){return"https://taplink.cc/payments/payanyway/result.html"},comebackUrl:function(){return this.variants.domain_base+"/payments/payanyway/comeback.html"},processingUrl:function(){return this.variants.domain_base+"/payments/payanyway/processing.html"}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://payanyway.ru" target="_blank">Зарегистрируйтесь</a> на сайте payanyway.ru</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="row row-small"> <div class="col-xs-12 col-sm-6 has-xs-mb-2"> <b-field label="Номер счета, полученный при подключении:" :message="errors.mnt_id" :class="{\'has-error\': errors.mnt_id}"> <b-input type="text" v-model="values.mnt_id" :disabled="disabled"></b-input> </b-field> </div> <div class="col-xs-12 col-sm-6"> <b-field label="Код проверки целостности данных:" :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type="text" v-model="values.password" :disabled="disabled"></b-input> </b-field> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">Укажите настройки уведомлений об оплате </div> <div class="field"> <label class="label">Check URL:</label> <div class="has-feedback"> <input type="text" :value="checkUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="checkUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">Pay URL:</label> <div class="has-feedback"> <input type="text" :value="payUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="payUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <div class="has-mb-1">Укажите настройки возврата в магазин</div> <div class="field"> <label class="label">Success URL, Fail URL, Return URL:</label> <div class="has-feedback"> <input type="text" :value="comebackUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="comebackUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">InProgress URL:</label> <div class="has-feedback"> <input type="text" :value="processingUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="processingUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <vue-settings-payments-provider-methods index="5" :variants="variants" :values="values" :disabled="disabled"/> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>6</span></div> <div class="media-content"> <div>Онлайн касса</div> <b-checkbox v-model="values.onlinekassa" :disabled="disabled">Использовать Payanyway в качестве онлайн кассы для отправки чеков</b-checkbox> </div> </div> <vue-settings-payments-provider-mode index="7" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-payberry",{props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://payberry.ru" target="_blank">Зарегистрируйтесь</a> на сайте payberry.ru</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "merchant_id"\' :message="errors.merchant_id" :class="{\'has-error\': errors.merchant_id}"> <b-input type="text" v-model="values.merchant_id" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "service_id"\' :message="errors.service_id" :class="{\'has-error\': errors.service_id}"> <b-input type="text" v-model="values.service_id" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "key"\' :message="errors.key" :class="{\'has-error\': errors.key}"> <b-input type="text" v-model="values.key" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "url"\' :message="errors.url" :class="{\'has-error\': errors.url}"> <b-input type="text" v-model="values.url" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="5" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-paybox",{props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://paybox.money" target="_blank">Зарегистрируйтесь</a> на сайте paybox.money</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "merchant_id"\' :message="errors.merchant_id" :class="{\'has-error\': errors.merchant_id}"> <b-input type="text" v-model="values.merchant_id" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "secret_key"\' :message="errors.secret_key" :class="{\'has-error\': errors.secret_key}"> <b-input type="text" v-model="values.secret_key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="5" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-payeer",{computed:{domain:function(){return this.$account.custom_domain_verified?this.$account.link:"https://"+this.variants.domain_must},comebackUrl:function(){return this.$account.custom_domain_verified?this.variants.domain_must+"/payments/payeer/comeback.html":""},resultUrl:function(){return this.$account.custom_domain_verified?this.variants.domain_must+"/payments/payeer/result.html":""}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://www.payeer.com/" target="_blank">Зарегистрируйтесь</a> на сайте www.payeer.com<br> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Укажите адрес сайта:</div> <div class="field" v-if="$account.custom_domain"> <div class="has-feedback"> <input type="text" :value="domain" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="domain" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div v-else class="message is-danger"> <div class="message-body">Payeer требует наличие своего доменного имени</div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <b-field label="Укажите содержимое проверочного файла:"> <b-input type="text" v-model="values.verifycode" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <div class="has-mb-1">Введите полученные "ID" и "Секретный ключ"</div> <b-field label="ID:" :message="errors.id" :class="{\'has-error\': errors.id}"> <b-input type="text" v-model="values.id" :disabled="disabled"></b-input> </b-field> <b-field label="Секретный ключ:" :message="errors.secret" :class="{\'has-error\': errors.secret}"> <b-input type="text" v-model="values.secret" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>5</span></div> <div class="media-content"> <div class="has-mb-1">Укажите настройки</div> <div class="field"> <label class="label">URL успешной оплаты:</label> <div class="has-feedback"> <input type="text" :value="comebackUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="comebackUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">URL неуспешной оплаты:</label> <div class="has-feedback"> <input type="text" :value="comebackUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="comebackUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">URL обработчика:</label> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <vue-settings-payments-provider-methods index="6" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="7" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-paykeeper",{computed:{domain:function(){return this.variants.domain_base+"/"},notifyUrl:function(){return this.variants.domain_base+"/payments/paykeeper/result.html"}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://paykeeper.ru" target="_blank">Зарегистрируйтесь</a> на сайте paykeeper.ru</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Заполните раздел "Обратные вызовы", везде выберите POST запрос</div> <div class="field"> <label class="label">Payment notification:</label> <div class="has-feedback"> <input type="text" :value="notifyUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="notifyUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> Включите галочку "Повторно отправлять Payment Notification при сбоях" и "Разрешена замена URL" </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <div class="has-mb-1">Укажите полученные данные от paykeeper</div> <b-field :label="\'Ваш сайт:\'|gettext" :message="errors.website" :class="{\'has-error\': errors.website}"> <b-field> <b-input type="text" v-model="values.website" :disabled="disabled"></b-input> <p class="control"><span class="button is-static">.server.paykeeper.ru</span></p> </b-field> </b-field> <b-field :label="\'Имя пользователя:\'|gettext" :message="errors.user" :class="{\'has-error\': errors.user}"> <b-input type="text" v-model="values.user" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Пароль:\'|gettext" :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type="text" v-model="values.password" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Секретное слово:\'|gettext" :message="errors.secret" :class="{\'has-error\': errors.secret}"> <b-input type="text" v-model="values.secret" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>5</span></div> <div class="media-content"> <div>Онлайн касса</div> <b-checkbox v-model="values.onlinekassa" :disabled="disabled">Использовать PayKeeper в качестве онлайн кассы для отправки чеков</b-checkbox> </div> </div> <vue-settings-payments-provider-methods index="6" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-paymaster",{computed:{domain:function(){return this.variants.domain_base+"/"},notifyUrl:function(){return this.variants.domain_must+"/payments/paymaster/result.html"},successUrl:function(){return this.variants.domain_must+"/payments/paymaster/success.html"},failUrl:function(){return this.variants.domain_must+"/payments/paymaster/fail.html"}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://paymaster.ru" target="_blank">Зарегистрируйтесь</a> на сайте PayMaster.ru</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Заполните раздел "Обратные вызовы", везде выберите POST запрос</div> <div class="field"> <label class="label">Payment notification:</label> <div class="has-feedback"> <input type="text" :value="notifyUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="notifyUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">Success redirect и Fail redirect:</label> <div class="has-feedback"> <input type="text" :value="successUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="successUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> Включите галочку "Повторно отправлять Payment Notification при сбоях" и "Разрешена замена URL" </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <div class="has-mb-1">Укажите полученные данные от PayMaster</div> <b-field :label="\'Идентификатор сайта:\'|gettext" :message="errors.merchant_id" :class="{\'has-error\': errors.merchant_id}"> <b-input type="text" v-model="values.merchant_id" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Секретный ключ:\'|gettext" :message="errors.secret" :class="{\'has-error\': errors.secret}"> <b-input type="text" v-model="values.secret" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Тип подписи:\'|gettext"> <b-select type="text" v-model="values.hash" :disabled="disabled"><option value="md5">MD5</option><option value="sha256">SHA256</option></b-select> </b-field> </div> </div> <vue-settings-payments-provider-methods index="5" :variants="variants" :values="values" :disabled="disabled"/> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>6</span></div> <div class="media-content"> <div>Онлайн касса</div> <b-checkbox v-model="values.onlinekassa" :disabled="disabled">Использовать PayMaster в качестве онлайн кассы для отправки чеков</b-checkbox> </div> </div> <vue-settings-payments-provider-mode index="7" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-paymentwall",{computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте paymentwall.com").replace("%s",'href="https://paymentwall.com" target="_blank"')}},props:["values","variants","payment_provider_id","is_new"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field :label="\'Укажите ваш public_key:\'|gettext" :message="errors.public_key" :class="{\'has-error\': errors.public_key}"> <b-input type="text" v-model="values.public_key"></b-input> </b-field> <b-field :label="\'Укажите ваш private_key:\'|gettext" :message="errors.private_key" :class="{\'has-error\': errors.private_key}"> <b-input type="text" v-model="values.private_key"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">{{\'Выберите доступные варианты оплаты\'|gettext}}</div> <div class="is-block" v-for="v in variants.payments_methods"><b-checkbox :native-value="v.payment_method_id" v-model="values.payments_methods">{{v.payment_method_title|gettext}}</b-checkbox></div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <div class="has-mb-1">{{\'Режим работы\'|gettext}}</div> <div class="row"> <div class="col-xs-12 col-sm-6"><label class="radio"><input type=\'radio\' name=\'mode\' value="test" v-model="values.mode"> {{\'Тестовый режим\'|gettext}}</label></div> <div class="col-xs-12 col-sm-6"><label class="radio"><input type=\'radio\' name=\'mode\' value="work" v-model="values.mode"> {{\'Рабочий режим\'|gettext}}</label></div> </div> </div> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-paypal",{data:function(){return{resultUrl:"https://taplink.cc/payments/paypal/result.html"}},computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте paypal.com").replace("%s",'href="https://www.paypal.com" target="_blank"')},businessTitle:function(){return this.$gettext("Введите ваш business аккаунт:")+" (email)"}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <label class="has-mb-1 is-block">{{\'Укажите адрес для "Профиль" > "Мои инструменты продаж" > "Уведомления о мгновенных платежах" (IPN)\'|gettext}}</label> <div class="field"> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.select()" readonly="on" :disabled="disabled"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <b-field :label="businessTitle" :message="errors.business" :class="{\'has-error\': errors.business}"> <b-input type="email" v-model="values.business" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="5" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-paypostkz",{data:function(){return{resultUrl:"https://taplink.cc/payments/paypostkz/result.html"}},computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте pay.post.kz").replace("%s",'href="http://pay.post.kz" target="_blank"')}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="field"> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <b-field :label="\'Введите ваш token:\'|gettext" :message="errors.business" :class="{\'has-error\': errors.token}"> <b-input type="text" v-model="values.token" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="5" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-paysera",{computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте paysera.com").replace("%s",'href="https://paysera.com" target="_blank"')}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field :label="\'Укажите ваш projectid:\'|gettext" :message="errors.projectid" :class="{\'has-error\': errors.projectid}"> <b-input type="text" v-model="values.projectid" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Укажите ваш password:\'|gettext" :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type="text" v-model="values.password" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="4" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-paystack",{data:function(){return{resultUrl:"https://taplink.cc/payments/paystack/result.html",comebackUrl:"https://taplink.cc/payments/paystack/comeback.html"}},computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте paystack.com").replace("%s",'href="https://paystack.com" target="_blank"')},webhookText:function(){return this.$gettext("<a %s>Установите</a> Callback URL и Webhook URL").replace("%s",'href="https://dashboard.paystack.com/#/settings/developer" target="_blank"')}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field :label="\'Укажите ваш Secret Key:\'|gettext" :message="errors.secret_key" :class="{\'has-error\': errors.secret_key}"> <b-input type="text" v-model="values.secret_key" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1" v-html="webhookText"></div> <div class="field"> <label class="label">{{\'Callback URL:\'|gettext}}</label> <div class="has-feedback"> <input type="text" :value="comebackUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="comebackUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">{{\'Webhook URL:\'|gettext}}</label> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="5" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-payu",{data:function(){return{versions:{lu:"Live Update",rest21:"REST API 2.1"}}},computed:{titles:function(){var e={lu:{merchant:"Merchant",secret_key:"Secret key"},rest21:{merchant:"POS ID",secret_key:"Second key"}};return e[this.values.version]}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://payu.ru" target="_blank">Зарегистрируйтесь</a> на сайте payu.ru</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Выберите метод подключения</div> <b-select type="text" v-model="values.version" :disabled="disabled"> <option v-for="(v, id) in versions" :value="id">{{v}}</option> </b-select> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">Укажите полученные данные от PayU</div> <b-field :label="titles.merchant" :message="errors.merchant" :class="{\'has-error\': errors.merchant}"> <b-input type="text" v-model="values.merchant" :disabled="disabled"></b-input> </b-field> <b-field :label="titles.secret_key" :message="errors.secret_key" :class="{\'has-error\': errors.secret_key}"> <b-input type="text" v-model="values.secret_key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="5" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-pulpal",{data:function(){return{resultUrl:"https://taplink.cc/payments/pulpal/result.html",redirectUrl:"https://taplink.cc/payments/pulpal/comeback.html"}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],computed:{resultUrl:function(){return this.variants.domain_base+"/payments/pulpal/result.html"},redirectUrl:function(){return this.variants.domain_base+"/payments/pulpal/comeback.html"},signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте pulpal.az").replace("%s",'href="https://pulpal.az" target="_blank"')}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> <div v-if="i18n.locale == \'az\'"> <br> <p>Pulpal\'da hesabıma ödəniş qəbul etmək üçün nə lazımdır?</p> <p>- Hüquqi şəxslər üçün:</p> <p>1.Cixarış</p> <p>2.VÖEN</p> <p>3.Nizamnamə</p> <p>4.Şəxsiyyət vəsiqəsi direktorun</p> <p>5.Direktorun təyin olunması</p><br> <p>Fərdi sahibkar üçün:</p> <p>1. VÖEN</p> <p>2. Şəxsiyyət vəsiqəsi</p><br> <p>Müqaviləni yükləyirsiniz, tələb olunan məlumatları daxil edirsiniz və <a href=\'mailto:office@pulpal.az\' target="_blank">office@pulpal.az</a> email ünvanına göndərirsiniz. Gün ərzində hesabınız aktivləşdirilir. Daha sonra öz məhslunuzu və ya xidmətinizi müştərilərinizə sata bilərsiniz.</p> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <label class="has-mb-1 is-block">{{\'Укажите адрес для Delivery URL и Redirect URL\'|gettext}}</label> <div class="field"> <label class="label">Delivery URL</label> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">Redirect URL</label> <div class="has-feedback"> <input type="text" :value="redirectUrl" class="input" onfocus="this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="redirectUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">{{\'Укажите полученные данные от PulPal\'|gettext}}</div> <b-field :label="\'merchant_id:\'|gettext" :message="errors.merchant_id" :class="{\'has-error\': errors.merchant_id}"> <b-input type="text" v-model="values.merchant_id" :disabled="disabled"></b-input> </b-field> <b-field :label="\'key:\'|gettext" :message="errors.key" :class="{\'has-error\': errors.key}"> <b-input type="text" v-model="values.key" :disabled="disabled"></b-input> </b-field> <b-field :label="\'salt:\'|gettext" :message="errors.salt" :class="{\'has-error\': errors.salt}"> <b-input type="text" v-model="values.salt" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="5" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-razorpay",{data:function(){return{resultUrl:"https://taplink.cc/payments/razorpay/result.html"}},computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте razorpay.com").replace("%s",'href="https://razorpay.com" target="_blank"')},webhookText:function(){return this.$format(this.$gettext('<a {1}>Добавьте</a> Webhook для получения уведомлений и выберите событие "{2}"'),'href="https://dashboard.razorpay.com/app/webhooks" target="_blank"',"payment.authorized")}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <b-field label="Key Id" :message="errors.key_id" :class="{\'has-error\': errors.key_id}"> <b-input type="input" v-model="values.key_id" :disabled="disabled"></b-input> </b-field> <b-field label="Key secret" :message="errors.secret" :class="{\'has-error\': errors.secret}"> <b-input type="input" v-model="values.secret" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1" v-html="webhookText"></div> <div class="field"> <label class="label">{{\'URL для Webhook:\'|gettext}}</label> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <b-field label="Webhook secret" :message="errors.webhook_secret" :class="{\'has-error\': errors.webhook_secret}"> <b-input type="input" v-model="values.webhook_secret" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-robokassa",{props:["values","variants","payment_provider_id","is_new","disabled"],computed:{domain:function(){return this.$account.link},resultUrl:function(){return this.variants.domain_base+"/payments/robokassa/result.html"},successUrl:function(){return this.variants.domain_base+"/payments/robokassa/success.html"},failUrl:function(){return this.variants.domain_base+"/payments/robokassa/fail.html"}},mixins:[FormModel],template:'<div> <div class="message is-success"><div class="message-body">Инструкции по настройке Робокассы <a href="/guide/payments-robokassa.html" target="_blank" class="is-pulled-right">Посмотреть <i class="fa fa-angle-right" style="margin-left: 5px"></i></a></div></div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://partner.robokassa.ru/Reg/Register" target="_blank">Зарегистрируйтесь</a> на сайте robokassa.ru и добавьте магазин<br> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Укажите настройки </div> <div class="field"> <label class="label">URL сайта:</label> <div class="has-feedback"> <input type="text" :value="domain" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="domain" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">Result URL:</label> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">Success URL:</label> <div class="has-feedback"> <input type="text" :value="successUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="successUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">Fail URL:</label> <div class="has-feedback"> <input type="text" :value="failUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="failUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <p>Алгоритм расчета хеша необходимо указать MD5, а метод отсылки данных везде указать GET</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">Укажите Идентификатор магазина, \'Пароль #1\' и \'Пароль #2\'</div> <b-field label="Идентификатор магазина:" :message="errors.login" :class="{\'has-error\': errors.login}"> <b-input type="text" v-model="values.login" :disabled="disabled"></b-input> </b-field> <b-field label="Пароль #1:" :message="errors.password_1" :class="{\'has-error\': errors.password_1}"> <b-input type="text" v-model="values.password_1" :disabled="disabled"></b-input> </b-field> <b-field label="Пароль #2:" :message="errors.password_2" :class="{\'has-error\': errors.password_2}"> <b-input type="text" v-model="values.password_2" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>5</span></div> <div class="media-content"> <div>Онлайн касса</div> <b-checkbox v-model="values.onlinekassa" :disabled="disabled">Использовать Робокассу в качестве онлайн кассы для отправки чеков</b-checkbox> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>6</span></div> <div class="media-content"> <div class="has-mb-1">Кто оплачивает комиссию Робокассы?</div> <div class="row"> <div class="col-xs-12 col-sm-6"><label class="radio"><input type=\'radio\' name=\'commission\' value="buyer" v-model="values.commission" :disabled="disabled"> Покупатель</label></div> <div class="col-xs-12 col-sm-6"><label class="radio"><input type=\'radio\' name=\'commission\' value="seller" v-model="values.commission" :disabled="disabled"> Продавец</label></div> </div> </div> </div> <vue-settings-payments-provider-mode index="7" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-sberbank",{data:function(){return{resultUrl:this.variants.domain_base+"/payments/sberbank/result.html",countries:{ru:"Россия",kz:"Казахстан"}}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],computed:{link:function(){return{ru:"https://www.sberbank.ru/ru/s_m_business/bankingservice/acquiring_total",kz:"https://www.sberbank.kz/ru/acquring"}[this.values.country]}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <div class="has-mb-1">Страна</div> <b-select type="text" v-model="values.country" :disabled="disabled"> <option v-for="(v, id) in countries" :value="id">{{v}}</option> </b-select> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <p><a :href="link" target="_blank">Зарегистрируйтесь</a> на сайте эквайринга от Сбербанка</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <p class="has-mb-1">Передайте в Сбербанк URL для Callback-уведомлений с симметричной криптографией:</p> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <div class="row"> <div class="col-xs-12 col-sm-6"> <b-field :label="\'Логин служебной учётной записи продавца:\'|gettext" :message="errors.username" :class="{\'has-error\': errors.username}"> <b-input type="text" v-model="values.username" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Пароль служебной учётной записи продавца:\'|gettext" :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type="text" v-model="values.password" :disabled="disabled"></b-input> </b-field> </div> </div> </div> </div> <vue-settings-payments-provider-methods index="5" :variants="variants" :values="values" :disabled="disabled"/> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>6</span></div> <div class="media-content"> <div>Онлайн касса</div> <b-checkbox v-model="values.onlinekassa" :disabled="disabled">Использовать Сбербанк в качестве онлайн кассы для отправки чеков</b-checkbox> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>7</span></div> <div class="media-content"> <div>Двухстадийная оплата</div> <b-checkbox v-model="values.withaccept" :disabled="disabled">Подтверждать каждую оплату в личном кабинете</b-checkbox> </div> </div> <vue-settings-payments-provider-mode index="8" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-sposkz",{data:function(){return{resultUrl:"https://taplink.cc/payments/ecommpay/result.html"}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте spos.kz").replace("%s",'href="https://spos.kz" target="_blank"')}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">{{\'Укажите полученные данные от Smart Pay\'|gettext}}</div> <b-field :label="\'merchant_id:\'|gettext" :message="errors.merchant_id" :class="{\'has-error\': errors.merchant_id}"> <b-input type="text" v-model="values.merchant_id" :disabled="disabled"></b-input> </b-field> <b-field :label="\'key:\'|gettext" :message="errors.key" :class="{\'has-error\': errors.key}"> <b-input type="text" v-model="values.key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="5" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-square",{data:function(){return{resultUrl:"https://taplink.cc/payments/square/result.html"}},computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте squareup.com").replace("%s",'href="https://squareup.com" target="_blank"')}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],created:function(){this.$io.on("events:payments.square:connect.resolve",this.connectResolve)},destroyed:function(){this.$io.off("events:payments.square:connect.resolve",this.connectResolve)},methods:{connectResolve:function(e){var a=this;_.each(e,function(e,s){a.values[s]=e}),this.$parent.save(!1,!1)},connect:function(){this.$parent.popupCenter("/payments/square/connect.html","square",70,.6,800,400)}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">{{\'Подключите интеграцию\'|gettext}}</div> <b-field :message="errors.access_token" :class="{\'has-error\': errors.access_token}"> <button class="button is-success" @click="connect" :disabled="disabled"><i class="fas fa-plug has-mr-2"></i> {{\'Подключить\'|gettext}}</button> <div class="form-control-static has-ml-2 has-text-success" v-if="values.access_token"> <i class="fas fa-check has-mr-1"></i> {{\'Готово\'|gettext}} </div> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-stripe",{data:function(){return{resultUrl:"https://taplink.cc/payments/stripe/result.html"}},computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте stripe.com").replace("%s",'href="https://stripe.com" target="_blank"')}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field :label="\'Укажите ваш Publishable key:\'|gettext" :message="errors.pk" :class="{\'has-error\': errors.pk}"> <b-input type="text" v-model="values.pk" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Укажите ваш Secret key:\'|gettext" :message="errors.sk" :class="{\'has-error\': errors.sk}"> <b-input type="text" v-model="values.sk" :disabled="disabled"></b-input> </b-field> <transition name="fade"> <b-field :label="\'Содержимое файла верификации для Apple Pay:\'|gettext" :message="errors.apple_pay_code" :class="{\'has-error\': errors.apple_pay_code}" v-if="values.payments_methods.indexOf(21) != -1"> <b-input type="text" v-model="values.apple_pay_code" :disabled="disabled || !$account.custom_domain_verified"></b-input> </b-field> </transition> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="4" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-tinkoff",{data:function(){return{resultUrl:"https://taplink.cc/payments/tinkoff/result.html"}},computed:{successUrl:function(){return this.variants.domain_base+"/payments/tinkoff/comeback.html"},failUrl:function(){return this.variants.domain_base+"/payments/tinkoff/fail.html"}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://oplata.tinkoff.ru" target="_blank">Зарегистрируйтесь</a> на сайте oplata.tinkoff.ru</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="field"> <label class="label">Укажите тип нотификации "HTTP"</label> <p class="has-mb-1">Ссылка для уведомлений:</p> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">Укажите целевые URL в настройках подключения</div> <div class="field"> <label class="label">URL страницы успешного платежа:</label> <div class="has-feedback"> <input type="text" :value="successUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="successUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> <div class="field"> <label class="label">URL страницы неуспешного платежа:</label> <div class="has-feedback"> <input type="text" :value="failUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="failUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "Терминал":\' :message="errors.terminalkey" :class="{\'has-error\': errors.terminalkey}"> <b-input type="text" v-model="values.terminalkey" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>5</span></div> <div class="media-content"> <b-field label=\'Укажите ваш "Пароль":\' :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type="text" v-model="values.password" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>6</span></div> <div class="media-content"> <b-field label="Содержимое файла верификации для Apple Pay:" :message="errors.apple_pay_code" :class="{\'has-error\': errors.apple_pay_code}"> <b-input type="text" v-model="values.apple_pay_code" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="7" :variants="variants" :values="values" :disabled="disabled"/> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>8</span></div> <div class="media-content"> <div>Онлайн касса</div> <b-checkbox v-model="values.onlinekassa" :disabled="disabled">Использовать Тинькофф в качестве онлайн кассы для отправки чеков</b-checkbox> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>9</span></div> <div class="media-content"> <div>Двухстадийная оплата</div> <b-checkbox v-model="values.withaccept" :disabled="disabled">Подтверждать каждую оплату в личном кабинете</b-checkbox> </div> </div> <vue-settings-payments-provider-mode index="10" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-unitpay",{computed:{resultUrl:function(){return this.domain+"/payments/unitpay/result.html"},signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте unitpay.ru").replace("%s",'href="https://unitpay.ru" target="_blank"')},domain:function(){return this.$account.custom_domain_verified?this.$account.link:this.variants.domain_must}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field :label="\'Вы зарегистрироваилсь как:\'|gettext" :message="errors.type" :class="{\'has-error\': errors.type}"> <b-select type="text" v-model="values.type" :disabled="disabled"> <option value="1">Юридическое лицо</option> <option value="2">Физическое лицо</option> </b-select> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">Добавьте проект и укажите настройки настройки </div> <div class="field" v-if="$account.custom_domain"> <label class="label">URL проекта:</label> <div class="has-feedback"> <input type="text" :value="domain" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="domain" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> <p class="has-mt-1">Для подтверждения сайта используйте Мета-тег который следует разместить в HTML коде (Настройки -> Общие -> Вставка HTML кода) </div> </div> <div v-else class="message is-danger"> <div class="message-body">Unitpay требует наличие своего доменного имени</div> </div> <div class="field" v-if="$account.custom_domain"> <label class="label">Обработчик платежей:</label> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <b-field :label="\'Укажите ID вашего проекта:\'|gettext" :message="errors.project_id" :class="{\'has-error\': errors.project_id}"> <b-input type="text" v-model="values.project_id" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Укажите ваш секретный ключ:\'|gettext" :message="errors.secret_key" :class="{\'has-error\': errors.secret_key}"> <b-input type="text" v-model="values.secret_key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="5" :variants="variants" :values="values" :disabled="disabled"/> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>6</span></div> <div class="media-content"> <div>Онлайн касса</div> <b-checkbox v-model="values.onlinekassa" :disabled="values.type != 1" :disabled="disabled">Использовать Unitpay в качестве онлайн кассы для отправки чеков</b-checkbox> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>7</span></div> <div class="media-content"> <div>Двухстадийная оплата</div> <b-checkbox v-model="values.withaccept" :disabled="disabled">Подтверждать каждую оплату в личном кабинете</b-checkbox> </div> </div> <vue-settings-payments-provider-mode index="8" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-walletone",{props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте walletone.com").replace("%s",'href="https://walletone.com" target="_blank"')},notifyUrl:function(){return this.variants.domain_base+"/payments/walletone/result.html"}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">{{\'Укажите полученные данные от WalletOne\'|gettext}}</div> <b-field :label="\'Идентификатор интернет-магазина:\'|gettext" :message="errors.merchant_id" :class="{\'has-error\': errors.merchant_id}"> <b-input type="text" v-model="values.merchant_id" :disabled="disabled"></b-input> </b-field> <b-field :label="\'Цифровая подпись (MD5):\'|gettext" :message="errors.secret_key" :class="{\'has-error\': errors.secret_key}"> <b-input type="text" v-model="values.secret_key" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="field"> <label class="label">URL скрипта интеграции:</label> <div class="has-feedback"> <input type="text" :value="notifyUrl" class="input" onfocus="this.focus();this.select()" readonly="on" :disabled="disabled"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="notifyUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> </div> <vue-settings-payments-provider-methods index="4" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="5" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-wayforpay",{props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте wayforpay.com").replace("%s",'href="https://wayforpay.com" target="_blank"')}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">{{\'Укажите полученные данные от WayForPay\'|gettext}}</div> <b-field :label="\'Идентификатор продавца:\'|gettext" :message="errors.merchant" :class="{\'has-error\': errors.merchant}"> <b-input type="text" v-model="values.merchant" :disabled="disabled"></b-input> </b-field> <b-field :label="\'SecretKey:\'|gettext" :message="errors.secret_key" :class="{\'has-error\': errors.secret_key}"> <b-input type="text" v-model="values.secret_key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> <vue-settings-payments-provider-mode index="4" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-xendit",{props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте xendit.co").replace("%s",'href="https://xendit.co" target="_blank"')}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field :label="\'Public key:\'|gettext" :message="errors.public_key" :class="{\'has-error\': errors.public_key}"> <b-input type="text" v-model="values.public_key" :disabled="disabled"></b-input> </b-field> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field :label="\'Secret key (Money-in products: Write):\'|gettext" :message="errors.secret_key" :class="{\'has-error\': errors.secret_key}"> <b-input type="text" v-model="values.secret_key" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-yandexkassa",{data:function(){return{resultUrl:"https://taplink.cc/payments/yandexkassa/result.html"}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],template:'<div> <div v-if="values.method == \'api\'"> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://yookassa.ru" target="_blank">Зарегистрируйтесь</a> на сайте yookassa.ru<br> В настройках выберите способ подключения: API</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Укажите URL для уведомлений о платежах</div> <div class="has-feedback"> <input type="text" :value="resultUrl" class="input" onfocus="this.focus();this.select()" readonly="on" :disabled="disabled"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <div class="has-mb-1">Введите полученные "shopId" и "секретный ключ"</div> <b-field label="shopId:" :message="errors.shop_id" :class="{\'has-error\': errors.shop_id}"> <b-input type="text" v-model="values.shop_id" :disabled="disabled"></b-input> </b-field> <b-field label="Секретный ключ:" :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type="text" v-model="values.password" :disabled="disabled"></b-input> </b-field> <div class="field"> <b-field label="Содержимое файла верификации для Apple Pay:" :message="errors.apple_pay_code" :class="{\'has-error\': errors.apple_pay_code}"> <b-input type="text" v-model="values.apple_pay_code" :disabled="disabled || !$account.custom_domain_verified"></b-input> </b-field> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <div>Онлайн касса</div> <b-checkbox v-model="values.onlinekassa" :disabled="disabled">Использовать ЮКассу в качестве онлайн кассы для отправки чеков</b-checkbox> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>5</span></div> <div class="media-content"> <div>Двухстадийная оплата</div> <b-checkbox v-model="values.withaccept" :disabled="disabled">Подтверждать каждую оплату в личном кабинете</b-checkbox> </div> </div> <vue-settings-payments-provider-methods index="6" :variants="variants" :values="values" :disabled="disabled"/> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>7</span></div> <div class="media-content"> <div class="has-mb-1">После проведения тестового платежа, сообщите менеджеру ЮКассы об успешном окончании тестирования и включите рабочий режим.</div> <div class="row"> <div class="col-xs-12 col-sm-6"><label class="radio"><input type=\'radio\' name=\'mode\' value="test" v-model="values.mode" :disabled="disabled"> Тестовый режим</label></div> <div class="col-xs-12 col-sm-6"><label class="radio"><input type=\'radio\' name=\'mode\' value="work" v-model="values.mode" :disabled="disabled"> Рабочий режим</label></div> </div> </div> </div> </div> <div v-else> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://yookassa.ru" target="_blank">Зарегистрируйтесь</a> на сайте yookassa.ru<br> В настройках выберите HTTP-протокол</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1">Укажите целевые URL ЮКассе </div> <div class="has-mb-2"> <div class="field"> <label class="label">checkUrl:</label> <input type="text" value="https://taplink.cc/payments/yandexkassa/check.html" class="input" onfocus="this.focus();this.select()" readonly="on" :disabled="disabled"> </div> <div class="field"> <label class="label">avisoUrl:</label> <input type="text" value="https://taplink.cc/payments/yandexkassa/result.html" class="input" onfocus="this.focus();this.select()" readonly="on" :disabled="disabled"> </div> </div> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>3</span></div> <div class="media-content"> <label>Включите</label> "Использовать страницы успеха и ошибки с динамическими адресами" </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>4</span></div> <div class="media-content"> <div class="has-mb-1">Введите полученные shopId, scid витрины и пароль к магазину</div> <div class="form-horizontal"> <b-field label="shopId:" :message="errors.shop_id" :class="{\'has-error\': errors.shop_id}"> <b-input type="text" v-model="values.shop_id :disabled="disabled""></b-input> </b-field> <b-field label="scid:" :message="errors.id" :class="{\'has-error\': errors.id}"> <b-input type="text" v-model="values.id" :disabled="disabled"></b-input> </b-field> <b-field label="shopPassword:" :message="errors.password" :class="{\'has-error\': errors.password}"> <b-input type="text" v-model="values.password" :disabled="disabled"></b-input> </b-field> </div> </div> </div> <vue-settings-payments-provider-methods index="5" :variants="variants" :values="values" :disabled="disabled"/> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>6</span></div> <div class="media-content"> <div class="has-mb-1">Совершите тестовый платёж (<a href=\'https://tech.yandex.ru/money/doc/payment-solution/shop-config/intro-docpage/\' target="_blank">Подробнее о тестировании</a>)</div> <div class="has-mb-1">Настройте форму на странице. Заполните ее и перейдите к оплате. Выберите способ «Visa». Укажите специальные <a target="_blank" href="https://tech.yandex.ru/money/doc/payment-solution/examples/examples-test-data-docpage/">тестовые данные</a></div> <blockquote class=\'has-text-grey-light has-mb-1\'> Номер карты: 4444 4444 4444 4448<br> Действует до: любой год и месяц в будущем<br> Код CVV: 000 </blockquote> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>7</span></div> <div class="media-content"> <div class="has-mb-1">После проведения тестового платежа, сообщите менеджеру ЮКассы об успешном окончании тестирования и включите рабочий режим.</div> <div class="row"> <div class="col-xs-12 col-sm-6"><label class="radio"><input type=\'radio\' name=\'mode\' value="test" v-model="values.mode" :disabled="disabled"> Тестовый режим</label></div> <div class="col-xs-12 col-sm-6"><label class="radio"><input type=\'radio\' name=\'mode\' value="work" v-model="values.mode" :disabled="disabled"> Рабочий режим</label></div> </div> </div> </div> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-yandexmoney",{data:function(){return{resultUrl:"https://taplink.cc/payments/yandexmoney/result.html",isAutoMode:!0}},props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],created:function(){this.$io.on("events:payments.yandexmoney:connect.resolve",this.connectResolve)},destroyed:function(){this.$io.off("events:payments.yandexmoney:connect.resolve",this.connectResolve)},computed:{text:function(){return this.$format(this.$gettext("Чтобы заказы помечались оплаченными при оплате через Яндекс.Деньги, необходимо <a {1}>подключить HTTP-уведомления для кошелька</a> и указать адрес для HTTP-уведомлений:"),'href="https://yoomoney.ru/myservices/online.xml" target="_blank"')}},methods:{connectResolve:function(e){var a=this;this.$account.profile_id==e.profile_id&&(_.each(e,function(e,s){a.values[s]=e}),this.$parent.save(!1,!1))},connect:function(){this.$parent.popupCenter("/payments/yandexmoney/connect.html","yandexmoney",70,.6,800,400)}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p><a href="https://yoomoney.ru" target="_blank">Зарегистрируйтесь</a> на сайте yoomoney.ru</p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <div class="has-mb-1"> {{\'Привяжите ваш кошелек\'|gettext}}</div> <label class="checkbox has-mb-2"><input type="checkbox" v-model="isAutoMode" :disabled="disabled"> {{\'Автоматическая настройка\'|gettext}}</label> <div class="row row-small" v-if="isAutoMode"> <div class="col-xs-12 col-sm col-sm-shrink"> <button class="button is-success is-fullwidth" @click="connect" :disabled="disabled"><i class="fas fa-plug has-mr-2"></i> {{\'Привязать кошелек\'|gettext}}</button> </div> <div class="col-xs-12 col-sm" :class="{\'has-text-warning\': !values.receiver}" style="align-self: center"> <span v-if="values.receiver">{{\'Номер кошелька: {1}\'|gettext|format(values.receiver)}}</span> <span v-else><i class="fa fa-exclamation-triangle has-mr-1"></i>{{\'Кошелек не привязан\'|gettext}}</span> </div> </div> <div v-if="!isAutoMode"> <b-field label="Введите ваш номер кошелька Яндекс.Деньги:" :message="errors.receiver" :class="{\'has-error\': errors.receiver}"> <b-input type="text" v-model="values.receiver"></b-input> </b-field> <div class="has-mb-1" v-html="text"></div> <div class="has-feedback has-mb-3"> <input type="text" :value="resultUrl" class="input" onfocus="this.select()" readonly="on" :disabled="disabled"> <a class="form-control-feedback has-text-grey-light"><vue-component-clipboard :text="resultUrl" :success-message="\'URL скопирован\'|gettext"></vue-component-clipboard></a> </div> <b-field :label="\'Введите секрет полученный в настройках HTTP-уведомления\'|gettext" :message="errors.secret" :class="{\'has-error\': errors.secret}"> <b-input type="text" v-model="values.secret" :disabled="disabled"></b-input> </b-field> </div> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-payments-providers-zitopay",{props:["values","variants","payment_provider_id","is_new","disabled"],mixins:[FormModel],computed:{signupText:function(){return this.$gettext("<a %s>Зарегистрируйтесь</a> на сайте zitopay.africa").replace("%s",'href="https://zitopay.africa" target="_blank"')}},template:'<div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>1</span></div> <div class="media-content"> <p v-html="signupText"></p> </div> </div> <div class="media"> <div class="media-left"><span class=\'tag is-dark\'>2</span></div> <div class="media-content"> <b-field :label="\'Имя пользователя получателя\'|gettext" :message="errors.receiver" :class="{\'has-error\': errors.receiver}"> <b-input type="text" v-model="values.receiver" :disabled="disabled"></b-input> </b-field> </div> </div> <vue-settings-payments-provider-methods index="3" :variants="variants" :values="values" :disabled="disabled"/> </div>'}),window.$app.defineComponent("settings","vue-settings-products",{data:function(){return{isFetching:!1,configured:{checkout:!1,products:!1,channels:!1,payments:!1,shipping:!1,legal:!1,addons:!1}}},created:function(){this.$io.on("events:settings.products:refresh",this.refresh),this.fetchData(!0)},destroyed:function(){this.$io.off("events:settings.products:refresh",this.refresh)},methods:{refresh:function(){this.fetchData(!0)},fetchData:function(e){var s=this;this.isFetching=e,this.$api.get("settings/products/configured").then(function(e){s.isFetching=!1,s.configured=e.response.settings.products.configured})},openForm:function(e){this.$modal("vue-settings-products-"+e+"-form",null,this)}},template:'<div class=\'has-mb-2 has-mt-4\'> <div class="container"> <div v-if="!isFetching"> <div v-if="$account.tariff == \'business\'"> </div> <div v-else> <div class="message is-info"><div class="message-body">Здесь вы можете настроить свой интернет магазин</div></div> <div class="message is-danger has-mb-3"><div class="message-body">Доступно на business-тарифе <a @click="$form.open(\'vue-index-pricing-form\')" class=\'is-pulled-right\'>Подробнее <i class="fa fa-angle-right" style="margin-left: 5px"></i></a></div></div> </div> </div> <div class="label-pro-container" :class="{disabled: $account.tariff != \'business\'}"> <div class="row"> <div class="col-xs-12 col-sm-6 col-md-4" style="display: flex"> <div class="panel panel-default product-settings-item"> <div class="media-checkitem has-alert" :class="{in: configured.products, \'is-loading\': isFetching}"><i class="fa fal fa-cube"></i></div> <h4 class="media-heading"> {{\'Добавление товаров\'|gettext}}</h4> <p class="has-mb-2 has-text-grey">{{\'Загрузите фото ваших товаров и добавьте описание\'|gettext}}</p> <router-link :to="{name: \'products\'}" class="button is-default is-fullwidth">{{\'Добавить товары\'|gettext}}</router-link> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div> </div> <div class="col-xs-12 col-sm-6 col-md-4" style="display: flex"> <div class="panel panel-default product-settings-item"> <div class="media-checkitem has-alert" :class="{in: configured.checkout, \'is-loading\': isFetching}"><i class="fa fal fa-file-alt"></i></div> <h4 class="media-heading"></i> {{\'Страница оформления заказа\'|gettext}}</h4> <p class="has-mb-2 has-text-grey">{{\'Настройте страницу с контактными данными для отправки заказа\'|gettext}}</p> <button type="button" @click="openForm(\'checkout\')" class="button is-default is-fullwidth">{{\'Настроить страницу\'|gettext}}</button> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div> </div> <div class="col-xs-12 col-sm-6 col-md-4" style="display: flex"> <div class="panel panel-default product-settings-item"> <div class="media-checkitem has-alert" :class="{in: configured.shipping, \'is-loading\': isFetching}"><i class="fa fal fa-truck"></i></div> <h4 class="media-heading"> {{\'Настройка стоимости доставки\'|gettext}}</h4> <p class="has-mb-2 has-text-grey">{{\'Укажите стоимость и условия доставки\'|gettext}}</p> <button type="button" @click="openForm(\'shipping\')" class="button is-default is-fullwidth">{{\'Настроить параметры доставки\'|gettext}}</button> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div> </div> <div class="col-xs-12 col-sm-6 col-md-4" style="display: flex"> <div class="panel panel-default product-settings-item"> <div class="media-checkitem has-alert" :class="{in: configured.legal, \'is-loading\': isFetching}"><i class="fa fal fa-file-alt"></i></div> <h4 class="media-heading"> {{\'Юридическая информация\'|gettext}}</h4> <p class="has-mb-2 has-text-grey">{{\'Добавьте договор-оферту\'|gettext}}</p> <button type="button" @click="openForm(\'legal\')" class="button is-default is-fullwidth">{{\'Настроить юридическую информацию\'|gettext}}</button> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div> </div> <div class="col-xs-12 col-sm-6 col-md-4" style="display: flex"> <div class="panel panel-default product-settings-item"> <div class="media-checkitem has-alert" :class="{in: configured.payments, \'is-loading\': isFetching}"><i class="fa fal fa-credit-card-blank"></i></div> <h4 class="media-heading"> {{\'Прием оплат\'|gettext}}</h4> <p class="has-mb-2 has-text-grey">{{\'Настройте способы приема платежей\'|gettext}}</p> <router-link :to="{name: \'settings.payments\'}" class="button is-default is-fullwidth">{{\'Настроить прием платежей\'|gettext}}</router-link> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div> </div> <div class="col-xs-12 col-sm-6 col-md-4" style="display: flex"> <div class="panel panel-default product-settings-item"> <div class="media-checkitem has-alert in"><i class="fa fal fa-pencil-ruler"></i></div> <h4 class="media-heading"> {{\'Оформление каталога\'|gettext}}</h4> <p class="has-mb-2 has-text-grey">{{\'Настройте внешнее оформление вашего магазина\'|gettext}}</p> <button type="button" @click="openForm(\'common\')" class="button is-default is-fullwidth">{{\'Настроить оформление\'|gettext}}</button> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div> </div> <div class="col-xs-12 col-sm-6 col-md-4" style="display: flex"> <div class="panel panel-default product-settings-item"> <div class="media-checkitem has-alert" :class="{in: configured.addons, \'is-loading\': isFetching}"><i class="fa fal fa-cog"></i></div> <h4 class="media-heading">{{\'Модули\'|gettext}}</h4> <p class="has-mb-2 has-text-grey">{{\'Настройте модули, которые будут работать с интернет магазином\'|gettext}}</p> <button type="button" @click="openForm(\'addons\')" class="button is-default is-fullwidth">{{\'Настроить модули\'|gettext}}</button> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div> </div> <div class="col-xs-12 col-sm-6 col-md-4" style="display: flex"> <div class="panel panel-default product-settings-item"> <div class="media-checkitem"><i class="fa fab fa-ig"></i></div> <h4 class="media-heading">{{\'Интеграция магазина с Instagram\'|gettext}}</h4> <p class="has-mb-2 has-text-grey">{{\'Подключите магазин к вашему instagram аккаунту\'|gettext}}</p> <button type="button" @click="openForm(\'facebook\')" class="button is-default is-fullwidth">{{\'Настроить интеграцию\'|gettext}}</button> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div> </div> </div> </div> </div>'}),window.$app.defineComponent("settings","vue-settings-products-addons-form",{data:function(){return{isUpdating:!1,isFetching:!1,variants:{},addons:{},addons_values:{},values:{fields:[],fields_extended:[{fields:[{idx:"a",title:this.$gettext("Номер заявки"),value_type:"number"},{idx:"b",title:this.$gettext("Контактные данные"),value_type:"text"},{idx:"c",title:this.$gettext("Состав корзины"),value_type:"text"},{idx:"d",title:this.$gettext("Бюджет"),value_type:"number"},{idx:"e",title:this.$gettext("Данные доставки"),value_type:"text"},{idx:"f",title:this.$gettext("Стоимость доставки"),value_type:"number"},{idx:"g",title:this.$gettext("Ссылка на оплату"),value_type:"string"},{idx:"h",title:this.$gettext("Общий вес"),value_type:"number"},{idx:"i",title:this.$gettext("Номер счёта"),value_type:"number"},{idx:"j",title:this.$gettext("Ссылка на страницу"),value_type:"string"},{idx:"k",title:this.$gettext("Промокоды или акции"),value_type:"string"}],title:"Заказ"}]},errors:{}}},created:function(){this.fetchData(!0)},mixins:[FormModel],methods:{fetchData:function(e){var a=this;this.isFetching=e,this.$api.get("settings/products/addons/get").then(function(e){a.isFetching=!1;var s=e.response.settings.products.addons;a.variants=s.variants,a.addons=s.addons,a.addons_values=s.values.addons,a.values.fields_extended.push({title:"Поля формы оформления заказа",fields:s.fields}),_.each(s.addons_fields,function(e,s){a.values.fields_extended.push({title:s,fields:e})})})},updateData:function(){var s=this;this.isUpdating=!0,this.$api.post("settings/products/addons/set",{addons:this.addons_values},this).then(function(e){"success"==e.result&&s.$parent.close(),s.isUpdating=!1}).catch(function(e){s.isUpdating=!1})}},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Модули\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <section class="modal-card-body modal-card-body-blocks"> <vue-pages-blocks-form-addons :values="values" :addons="addons" :addons_values="addons_values" :variants_addons="variants.addons" :loading="isFetching" :parent="$parent"> <template slot="message">{{\'Вы можете выбрать модули которые будут срабатывать для магазина\'|gettext}}</template> <template slot="empty">{{\'В настоящий момент ни одного модуля не подключено\'|gettext}}</template> </vue-pages-blocks-form-addons> </section> <footer class="modal-card-foot"> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Закрыть\'|gettext}}</button> <button class="button is-primary" :class="{\'is-loading\': isUpdating}" @click="updateData">{{\'Сохранить\'|gettext}}</button> </footer> </div>'}),window.$app.defineComponent("settings","vue-settings-products-checkout-form",{data:function(){return{isUpdating:!1,isFetching:!1,activeTab:"contacts",values:{fields:[],link_page_id:null,buttons:{pay:{type:null}}},action:null,variants:{fields_types:[],buttons:{pay:[]}}}},created:function(){this.fetchData(!0)},mixins:[FormModel],methods:{fetchData:function(e){var s=this;this.isFetching=e,this.$api.get(["settings/products/checkout/get","settings/products/checkout/info"]).then(function(e){s.isFetching=!1,s.values=e.response.settings.products.checkout.values,s.variants=e.response.settings.products.checkout.variants})},updateData:function(){var s=this;this.isUpdating=!0,this.$api.post("settings/products/checkout/set",this.values,this).then(function(e){"success"==e.result&&s.$parent.close(),s.isUpdating=!1}).catch(function(e){s.isUpdating=!1})},onAction:function(e){var s=this;e&&(this.values.fields_idx.toString(16),this.values.fields.push({title:this.variants.fields_types[e],text:"",type_id:e,required:!1,default:0,variants:"",opened:!0,idx:this.values.fields_idx.toString(16)}),this.values.fields_idx++,Vue.nextTick(function(){s.action=null}))}},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Страница оформления заказа\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <ul class="nav nav-tabs has-text-left"> <li :class="{active: activeTab== \'contacts\'}"><a href="#" @click="activeTab = \'contacts\'">{{\'Контакты\'|gettext}}</a></li> <li :class="{active: activeTab== \'confirm\'}"><a href="#" @click="activeTab = \'confirm\'">{{\'Подтверждение\'|gettext}}</a></li> </ul> <section class="modal-card-body modal-card-body-blocks" v-if="activeTab == \'contacts\'"> <section> <label class="label">{{\'Укажите необходимые поля при оформлении заказа\'|gettext}}</label> <vue-component-form-blocks v-model="values.fields" :variants="variants"></vue-component-form-blocks> <vue-component-dropdown position="is-top-left is-fullwidth" v-model="action" @input="onAction" :withArrow="false" :title="\'Добавить поле\'|gettext" button-class="button is-light is-fullwidth has-text-primary is-form-adding has-mt-2" :without-value="true"> <span slot="button"><i class="fas fa-plus has-mr-2"></i>{{\'Добавить поле\'|gettext}}</span> <b-dropdown-item v-for="(v, k) in variants.fields_types" :value="k" aria-role="menuitem"><i class="form-element-icon" v-html="\'&#x\'+(1000+parseInt(k))+\';\'"></i>{{v}}</b-dropdown-item> </vue-component-dropdown> </section> </section> <section class="modal-card-body modal-card-body-blocks" v-if="activeTab == \'confirm\'"> <section> <b-field :label="\'Кнопка завершения\'|gettext"> <div class="row"> <div class="col-xs-12 col-sm"> <b-select v-model="values.buttons.pay.type" class="has-xs-mb-2" expanded> <option value="custom">-- {{\'Свой текст\'|gettext}} --</option> <option v-for="(v, i) in variants.buttons.pay" :value="i">{{ v }}</option> </b-select> </div> <div class="col-xs-12 col-sm-6" v-if="values.buttons.pay.type == \'custom\'"> <b-input v-model="values.buttons.pay.title" :placeholder="\'Укажите заголовок кнопки\'|gettext"> </div> </div> </b-field> </section> <section> <b-field :label="\'Какую страницу открыть после заказа\'|gettext"> <b-select v-model="values.link_page_id" expanded> <option :value="null">-- {{\'Главная\'|gettext}} --</option> <option v-for="(v, i) in variants.page_id" :value="i">{{ v }}</option> </b-select> </b-field> <b-field :label="\'После успешной оплаты менять статус\'|gettext"> <b-select v-model="values.paid_status_id" expanded> <option value="2">{{\'В работе\'|gettext}}</option> <option value="3">{{\'Выполнена\'|gettext}}</option> </b-select> </b-field> <div class="field"> <label class="label">{{\'Назначение платежа\'|gettext}}</label> <input type=\'text\' v-model=\'values.purpose\' class=\'input\' maxlength="128"> </div> </section> </section> <footer class="modal-card-foot"> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Закрыть\'|gettext}}</button> <button class="button is-primary" :class="{\'is-loading\': isUpdating}" @click="updateData">{{\'Сохранить\'|gettext}}</button> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("settings","vue-settings-products-common-form",{data:function(){return{activeTab:"common",isUpdating:!1,isFetching:!1,values:{products_avatar:0},variants:[]}},created:function(){this.fetchData(!0)},mixins:[FormModel],methods:{fetchData:function(e){var s=this;this.isFetching=e,this.$api.get(["settings/products/common/get","settings/products/common/info"]).then(function(e){s.isFetching=!1,s.values=e.response.settings.products.common.values,s.variants=e.response.settings.products.common.variants})},updateData:function(){var s=this;this.isUpdating=!0,this.$api.post("settings/products/common/set",this.values,this).then(function(e){"success"==e.result&&s.$parent.close(),s.isUpdating=!1}).catch(function(e){s.isUpdating=!1})}},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Оформление каталога\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <ul class="nav nav-tabs has-text-left"> <li :class="{active: activeTab== \'common\'}"><a href="#" @click="activeTab = \'common\'">{{\'Лента\'|gettext}}</a></li> <li :class="{active: activeTab== \'product\'}"><a href="#" @click="activeTab = \'product\'">{{\'Товар\'|gettext}}</a></li> </ul> <section class="modal-card-body modal-card-body-blocks" v-if="activeTab == \'common\'"> <section> <b-field :label="\'Аватар\'|gettext"> <b-select v-model="values.products_avatar" class="has-xs-mb-2" expanded> <option v-for="(v, i) in variants.products_avatar" :value="i">{{v|gettext}}</option> </b-select> </b-field> <b-field :label="\'Картинки\'|gettext"> <b-select v-model="values.products_pictures_placement" class="has-xs-mb-2" expanded> <option v-for="(v, i) in variants.products_pictures_placement" :value="i">{{v|gettext}}</option> </b-select> </b-field> <div class="row has-mb-2"> <div class="col-xs-12 col-sm-6"> <b-field :label="\'Коллекции\'|gettext"> <b-select v-model="values.products_collections_view" class="has-xs-mb-2" expanded> <option v-for="(v, i) in variants.products_collections_view" :value="i">{{v|gettext}}</option> </b-select> </b-field> </div> <div class="col-xs-12 col-sm-6"> <b-field :label="\'Варианты\'|gettext"> <b-select v-model="values.products_variants_view" class="has-xs-mb-2" expanded> <option v-for="(v, i) in variants.products_variants_view" :value="i">{{v|gettext}}</option> </b-select> </b-field> </div> </div> <div class="field"> <label class="label">{{\'Цвет фона\'|gettext}}</label> <vue-component-colorpicker v-model="values.products_pictures_background"></vue-component-colorpicker> </div> </section> <section> <mx-toggle v-model="values.products_show_filter" :title="\'Показывать фильтр по коллекциям\'|gettext" class="has-mb-2"></mx-toggle> <mx-toggle v-model="values.products_show_search" :title="\'Показывать поиск по каталогу\'|gettext" class="has-mb-2"></mx-toggle> <mx-toggle v-model="values.products_show_snippet_overlay" :title="\'Название и цена товара отображается поверх изображения\'|gettext" class="has-mb-2"></mx-toggle> <mx-toggle v-model="values.products_show_snippet_title" :title="\'Показывать название товара в каталоге\'|gettext" class="has-mb-2"></mx-toggle> <mx-toggle v-model="values.products_show_snippet_price" :title="\'Показывать цену товара в каталоге\'|gettext" class="has-mb-2"></mx-toggle> <mx-toggle v-model="values.products_show_snippet_compare_price" :title="\'Показывать старую цену товара в каталоге\'|gettext" class="has-mb-2"></mx-toggle> <mx-toggle v-model="values.products_hide_checkout" :title="\'Скрыть кнопку Добавить в корзину\'|gettext"></mx-toggle> </section> </section> <section class="modal-card-body modal-card-body-blocks" v-if="activeTab == \'product\'"> <section> <b-field :label="\'Добавочный текст в описании товара\'|gettext"> <div class="control"> <b-input type="textarea" v-model="values.products_description_footer" class="has-mb-1" style="min-height: 100px"></b-input> <p class="has-text-grey">{{\'Этот текст будет добавлен к описанию каждого товара\'|gettext}}</p> </div> </b-field> <b-field :label="\'Добавочный текст в перед опциями товара\'|gettext"> <div class="control"> <b-input type="textarea" v-model="values.products_description_before_options" class="has-mb-1" style="min-height: 100px"></b-input> <p class="has-text-grey">{{\'Этот текст будет вставлен перед опциями в каждом товаре\'|gettext}}</p> </div> </b-field> </section> </section> <footer class="modal-card-foot"> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Закрыть\'|gettext}}</button> <button class="button is-primary" :class="{\'is-loading\': isUpdating}" @click="updateData">{{\'Сохранить\'|gettext}}</button> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("settings","vue-settings-products-facebook-form",{data:function(){return{}},computed:{text1:function(){return this.$format(this.$gettext("<a {1}>Создать каталог</a> в Facebook"),'href="https://www.facebook.com/products/" target="_blank"')},text2:function(){return this.$format(this.$gettext("Для загрузки товаров используйте <a {1}>специальную ссылку</a>"),'href="'+this.$account.link+'/m/catalog.csv" target="_blank"')}},created:function(){this.fetchData()},methods:{fetchData:function(){}},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Интеграция магазина с Instagram\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <section class="modal-card-body"> <div v-if="i18n.locale == \'ru\'"> <h4 class="has-mb-1">Условия подключения Shoppable Tags:</h4> <ul class="has-mb-2"> <li>— Вы ведете бизнес в одной из <a href="https://help.instagram.com/321000045119159" target="_blank">доступных стран</a></li> <li>— Продаете физические товары</li> <li>— Не продаете <a href="https://www.facebook.com/policies/commerce" target="_blank">запрещенные товары</a></li> <li>— У вас бизнес аккаунт Instagram</li> </ul> </div> <h4 class="has-mb-1">{{\'Процесс подключения Shoppable Tags\'|gettext}}:</h4> <ul> <li>— <span v-html="text1"></span></li> <li>— <span v-html="text2"></span></li> <li>— {{\'Как только Facebook одобрит магазин товары из Taplink появятся в Instagram\'|gettext}}</li> </ul> </section> <footer class="modal-card-foot"> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Закрыть\'|gettext}}</button> </footer> </div>'}),window.$app.defineComponent("settings","vue-settings-products-legal-form",{data:function(){return{isUpdating:!1,isFetching:!1,values:{body:"",text:""},errors:{text:""},options:{theme:"snow",modules:{toolbar:[[{header:[1,2,3,4,5,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["link"],["clean"]]}}}},created:function(){this.fetchData(!0)},mixins:[FormModel],methods:{fetchData:function(e){var s=this;this.isFetching=e,this.$api.get("settings/products/legal/get").then(function(e){s.isFetching=!1,s.values=e.response.settings.products.legal.values})},updateData:function(){var s=this;this.isUpdating=!0,this.$api.post("settings/products/legal/set",this.values,this).then(function(e){"success"==e.result&&s.$parent.close(),s.isUpdating=!1}).catch(function(e){s.isUpdating=!1})}},template:'<div class="modal-card modal-card-large"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Юридическая информация\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <section class="modal-card-body modal-card-body-blocks"> <section> <b-field :label="\'Надпись\'|gettext" :message="errors.text" :class="{\'has-error\': errors.text}"> <b-input v-model="values.text"></b-input> </b-field> </section> <section> <label class="label">{{\'Текст\'|gettext}}</label> <vue-component-editor v-model="values.body" :options="options"></vue-component-editor> </section> </section> <footer class="modal-card-foot"> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Закрыть\'|gettext}}</button> <button class="button is-primary" :class="{\'is-loading\': isUpdating}" @click="updateData">{{\'Сохранить\'|gettext}}</button> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("settings","vue-settings-products-shipping-form",{data:function(){return{isUpdating:!1,isFetching:!1,activeTab:"address",values:{use_selfservice:!0,use_zones:!0,custom:[],fields_zones:[]},variants:[],precisions:{budget:this.$account.currency.precision,weight:this.$account.weight.precision},types:{budget:this.$gettext("По цене"),weight:this.$gettext("По весу")},fields:{country:this.$gettext("Страна"),state:this.$gettext("Область или край"),city:this.$gettext("Город"),addr1:this.$gettext("Адрес"),zip:this.$gettext("Индекс")},countries:[]}},created:function(){this.fetchData(!0)},mixins:[FormModel],methods:{fetchData:function(e){var a=this;this.isFetching=e,this.$api.get(["settings/products/shipping/get","settings/products/shipping/info"]).then(function(e){a.isFetching=!1;var s=e.response.settings.products.shipping.values;a.variants=e.response.settings.products.shipping.variants,a.variants.units={budget:a.$account.currency.title,weight:a.$account.weight.unit_title},_.each(s.types,function(e){e.zones=_.map(e.zones,function(s){return s.countries=_.filter(a.variants.countries,function(e){return-1!=s.countries.indexOf(e.country_id)}),s})}),a.values=s})},updateData:function(){var s=this;this.isUpdating=!0;var e=this.$clone(this.values);_.each(e.types,function(e){e.zones=_.map(e.zones,function(e){return e.countries=_.map(e.countries,function(e){return e.country_id}),e})}),this.$api.post("settings/products/shipping/set",e,this).then(function(e){"success"==e.result&&s.$parent.close(),s.isUpdating=!1}).catch(function(e){s.isUpdating=!1})},onRemoveAdress:function(e){var s=this;this.$confirm(this.$gettext("Вы уверены что хотите удалить эту опцию?"),"is-danger").then(function(){s.values.custom.splice(e,1)})},onAction:function(e){var s=this;e&&(this.values.fields.push({title:this.variants.fields_types[e],text:"",type_id:e,required:!1,default:0,variants:"",opened:!0}),Vue.nextTick(function(){s.action=null}))},onAddAddress:function(){this.values.custom.push({on:!0,title:"",price:0,fields:["addr1"]})},onRemoveShipping:function(e){var s=this;this.$confirm(this.$gettext("Вы уверены что хотите удалить этот склад?"),"is-danger").then(function(){s.values.shipping.splice(e,1)})},onAddShipping:function(){this.values.shipping.push({country:null,state:"",city:"",addr1:"",zip:""})},onAddZone:function(e){this.values.types[e].zones.push({countries:[],rules:[{price:0}]})},onRemoveZone:function(e,s){var a=this;s&&this.$confirm(this.$gettext("Вы уверены что хотите удалить эту зону?"),"is-danger").then(function(){a.values.types[e].zones.splice(s,1)})},onDeleteRule:function(e,s,a){var t=this;this.$confirm(this.$gettext("Вы уверены что хотите удалить это условие?"),"is-danger").then(function(){t.values.types[e].zones[s].rules.splice(a,1)})},onAddRule:function(e,s){var a=this.values.types[e].zones[s].rules,t=a.pop();a.push({max:0,price:0}),a.push(t)},getFilteredCountries:function(s){this.countries=_.filter(this.variants.countries,function(e){return-1!=e.country.toLowerCase().indexOf(s.toLowerCase())})}},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Настройка стоимости доставки\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <ul class="nav nav-tabs has-text-left"> <li :class="{active: activeTab== \'address\'}"><a href="#" @click="activeTab = \'address\'">{{\'Адрес\'|gettext}}</a></li> <li :class="{active: activeTab== \'warehouses\'}"><a href="#" @click="activeTab = \'warehouses\'">{{\'Склады\'|gettext}}</a></li> <li :class="{active: activeTab== k}" v-for="(t, k) in values.types" v-if="values.use_zones"><a href="#" @click="activeTab = k">{{types[k]|gettext}}</a></li> </ul> <section class="modal-card-body modal-card-body-blocks" v-if="activeTab == \'address\'"> <section> <div class="has-mb-2"> <div class="has-text-grey-light">{{\'Укажите опции доставки\'|gettext}}</div> </div> <div class="has-mb-2"> <mx-item class="mx-item-header is-hidden-mobile"> <div class="item-row row"> <div class="col-sm col-shrink block-xs first-xs" style="line-height: 0"><div style="visibility: hidden;height: 5px"><mx-toggle v-model="values.use_selfservice"></div></div> <div class="col-sm">{{\'Название\'|gettext}}</div> <div class="col-sm-3">{{\'Стоимость\'|gettext}}</div> <div class="col-xs col-shrink"> <div style="visibility: hidden;height: 5px"><button type="button" class="button is-danger"><i class="fa fa-trash-alt"></i></button></div> </div> </div> </mx-item> <mx-item> <div class="item-row row"> <div class="col-sm col-shrink block-xs first-xs" style="line-height: 0"><mx-toggle v-model="values.use_selfservice"></mx-toggle></div> <div class="col-sm block-xs"><input type="text" :value="\'Самовывоз\'|gettext" class="input" disabled="on"></div> <div class="col-sm-3 block-xs"><input type="text" class="input" :value="\'Бесплатно\'|gettext" disabled="on"></div> <div class="col-xs col-sm-shrink first-xs last-sm text-xs-right"> <button type="button" class="button is-danger disabled" disabled="on"><i class="fa fa-trash-alt"></i></button> </div> </div> </mx-item> <mx-item v-for="(v, i) in values.custom"> <div class="item-row row"> <div class="col-sm col-shrink block-xs first-xs" style="line-height: 0"><mx-toggle v-model="v.on"></mx-toggle></div> <div class="col-sm block-xs" style="overflow: visible"> <div class="has-feedback"> <b-input type="text" v-model="v.title" :placeholder="\'Например: Центр Москвы\'|gettext" :disabled="!v.on"></b-input> <a class="form-control-feedback has-text-grey-light has-mr-2" :class="{disabled: !v.on}"><vue-component-dropdown-list v-model="v.fields" :list="fields" :title="\'Поля\'|gettext" :exclude="[\'country\']"/></a> </div> </div> <div class="col-sm-3 block-xs"><div class="has-feedback"><number type="text" v-model="v.price" :precision="$account.currency.precision" class="input" :disabled="!v.on"></number><span class="form-control-feedback has-text-grey-light">{{ $account.currency.title }}</span></div></div> <div class="col-xs col-sm-shrink first-xs last-sm text-xs-right"> <button type="button" class="button is-danger" @click="onRemoveAdress(i)"><i class="fa fa-trash-alt"></i></button> </div> </div> </mx-item> <mx-item> <div class="item-row row"> <div class="col-sm col-shrink block-xs first-xs" style="line-height: 0"><mx-toggle v-model="values.use_zones"></mx-toggle></div> <div class="col-sm block-xs" style="overflow: visible"> <div class="has-feedback"><input type="text" placeholder="Другие страны" class="input" v-model="values.title_zones" :disabled="!values.use_zones"><a class="form-control-feedback has-text-grey-light has-mr-2" :class="{disabled: !values.use_zones}"><vue-component-dropdown-list v-model="values.fields_zones" :list="fields" :title="\'Поля\'|gettext" :frozen="[\'country\']"/></a></div> </div> <div class="col-xs col-sm-shrink first-xs last-sm text-xs-right"> <button type="button" class="button is-danger disabled" disabled="on"><i class="fa fa-trash-alt"></i></button> </div> </div> </mx-item> </div> <a href="#" @click="onAddAddress" style="text-decoration: underline">{{\'Добавить опцию\'|gettext}}</a> </section> </section> <section class="modal-card-body modal-card-body-blocks" v-if="activeTab == \'warehouses\'"> <section v-for="(f, i) in values.shipping"> <div class="has-mb-2" v-if="i == 0"> <div class="has-text-grey-light">{{\'Укажите адрес, с которого клиент может забрать свой заказ\'|gettext}}</div> </div> <div class="row row-small"> <div class="col-xs-12 col-sm-6"> <div class="field has-mb-2"> <b-select :placeholder="\'-- Выберите страну --\'|gettext" v-model=\'f.country\' expanded> <optgroup :label="\'-- Выберите страну --\'|gettext"> <option v-for="(c, k) in variants.countries" :value="c.country_id">{{c.country}}</option> </optgroup> </b-select> </div> </div> </div> <div class="has-mb-2"> <div class="row row-small"> <div class="col-xs-12 col-sm-6"> <div class="field has-mb-2"> <b-input v-model=\'f.state\' :placeholder="\'Область или край\'|gettext"></b-input> </div> </div> <div class="col-xs-12 col-sm-6"> <div class="field has-mb-2"> <b-input v-model=\'f.city\' :placeholder="\'Город\'|gettext"></b-input> </div> </div> <div class="col-xs-12 col-sm-6"> <div class="block-xs"> <b-input v-model=\'f.addr1\' :placeholder="\'Адрес\'|gettext"></b-input> </div> </div> <div class="col-xs-12 col-sm-6"> <div class="block-xs"> <b-input v-model="f.zip" :placeholder="\'Индекс\'|gettext"> </div> </div> </div> </div> <a href=\'#\' @click="onRemoveShipping(i)" class=\'has-text-danger\' style="text-decoration: underline" v-if="i"> {{\'Удалить склад\'|gettext}}</a> <a href=\'#\' @click="onAddShipping" style="text-decoration: underline" v-else>{{\'Добавить дополнительный склад\'|gettext}}</a> </section> </section> <section v-for="(t, k) in values.types" class="modal-card-body modal-card-body-blocks" v-if="activeTab == k"> <section v-for="(zone, zi) in t.zones"> <div class="has-mb-2"> <div class="has-text-grey-light">{{\'Укажите условия формирования цены для других стран\'|gettext}}</div> </div> <div class="row row-small has-mb-2"> <div class="col-xs"> <b-taginput v-model="zone.countries" :data="countries" @typing="getFilteredCountries" field="country" allow-new="false" confirm-key-codes=\'[13]\' autocomplete :placeholder="\'Весь мир\'|gettext" attached> <template slot-scope="props"> <strong>{{props.option.country}}</strong> </template> <template slot="empty"> <div>{{\'Ничего не найдено\'|gettext}}</div> </template> </b-taginput> </div> <div class="col-xs col-shrink"> <button type="button" class="button is-danger" :class="{disabled: !zi}" @click="onRemoveZone(k, zi)" :disabled="!zi"><i class="fa fa-trash-alt"></i></button> </div> </div> <div class="has-mb-2"> <mx-item class=\'mx-item-header is-hidden-mobile\'> <div class="item-row row"> <div class="col-sm-4">{{\'От\'|gettext}}</div> <div class="col-sm-4">{{\'До\'|gettext}}</div> <div class="col-sm-4">{{\'Цена доставки\'|gettext}}</div> </div> </mx-item> <mx-item v-for="(f, i) in zone.rules"> <div class="item-row row"> <div class="col-sm-4 block-xs"><label class="label is-visible-mobile">{{\'От\'|gettext}}</label> <div class="has-feedback"> <number type=\'text\' class="input" v-model="zone.rules[i-1].max" disabled="on" v-if="i" :precision="precisions[k]"></number> <number type=\'text\' class="input" value="0" disabled="on" :precision="precisions[k]" v-else></number> <span class="form-control-feedback has-text-grey-light">{{ variants.units[k] }}</span></div> </div> <div class="col-sm-4 block-xs"><label class="label is-visible-mobile">{{\'До\'|gettext}}</label> <div class="has-feedback"> <number v-model="f.max" :class="{\'is-danger\': f.max < 0 || (i && f.max < zone.rules[i-1].max)}" type=\'text\' class="input" v-if="i < zone.rules.length-1" :precision="precisions[k]"></number> <input type=\'text\' class="input" value="∞" disabled="on" v-else> <span class="form-control-feedback has-text-grey-light">{{ variants.units[k] }}</span> </div> </div> <div class="col-sm-4 block-xs"> <label class="label is-visible-mobile">Цена доставки</label> <div class="media"> <div class="media-content"> <div class="has-feedback"><number type=\'text\' class="input" :class="{\'is-danger\': f.price < 0}" v-model="f.price" :precision="$account.currency.precision"></number><span class="form-control-feedback has-text-grey-light">{{ $account.currency.title }}</span></div> </div> <div class="media-right"><a class="button has-text-danger" :class="{disabled: zone.rules.length-1 == i}" :disabled="zone.rules.length-1 == i" @click=\'onDeleteRule(k, zi, i)\'><i class="fa fa-trash-alt"></i></a></div> </div> </div> </div> </mx-item> </div> <a href=\'#\' @click=\'onAddRule(k, zi)\' style="text-decoration: underline">{{\'Добавить условие\'|gettext}}</a> </section> <section> <button type="button" class="button is-success" @click=\'onAddZone(k)\'><i class="fa fa-plus-circle has-mr-1"></i>{{\'Добавить новую зону\'|gettext}}</button> </section> </section> <footer class="modal-card-foot"> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Закрыть\'|gettext}}</button> <button class="button is-primary" :class="{\'is-loading\': isUpdating}" @click="updateData">{{\'Сохранить\'|gettext}}</button> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineModule("settings",[{path:"/:page_id/settings/common/",component:"vue-settings-common",meta:{statistic_event:"settings",title:"Общие"},props:!0,name:"settings.common"},{path:"/:page_id/settings/payments/",redirect:"/:page_id/settings/payments/index/",meta:{title:"Платежи",feature:"payments"},props:!0,name:"settings.payments",children:[{path:"/:page_id/settings/payments/index/",component:"vue-settings-payments-index",props:!0,alias:"/:page_id/settings/payments/",name:"settings.payments.index"},{path:"/:page_id/settings/payments/errors/",component:"vue-settings-payments-onlinekassa-errors",props:!0,name:"settings.payments.onlinekassa.errors"}]},{path:"/:page_id/settings/products/",component:"vue-settings-products",meta:{title:"Товары",feature:"products"},props:!0,name:"settings.products"}]);
