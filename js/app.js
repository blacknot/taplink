var _createClass2=function(){function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}}(),_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _classCallCheck2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function date_format(e,t){function i(e,t){return c[e]?c[e]():t}function s(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}var n,a,o,r=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],l=/\\?(.?)/gi,c={d:function(){return s(c.j(),2)},D:function(){return c.l().slice(0,3)},j:function(){return n.getDate()},l:function(){return r[c.w()]+"day"},N:function(){return c.w()||7},S:function(){var e=c.j(),t=e%10;return t<=3&&1===parseInt(e%100/10,10)&&(t=0),["st","nd","rd"][t-1]||"th"},w:function(){return n.getDay()},z:function(){var e=new Date(c.Y(),c.n()-1,c.j()),t=new Date(c.Y(),0,1);return Math.round((e-t)/864e5)},W:function(){var e=new Date(c.Y(),c.n()-1,c.j()-c.N()+3),t=new Date(e.getFullYear(),0,4);return s(1+Math.round((e-t)/864e5/7),2)},F:function(){return r[6+c.n()]},m:function(){return s(c.n(),2)},M:function(){return c.F().slice(0,3)},n:function(){return n.getMonth()+1},t:function(){return new Date(c.Y(),c.n(),0).getDate()},L:function(){var e=c.Y();return e%4==0&e%100!=0|e%400==0},o:function(){var e=c.n(),t=c.W();return c.Y()+(12===e&&t<9?1:1===e&&9<t?-1:0)},Y:function(){return n.getFullYear()},y:function(){return c.Y().toString().slice(-2)},a:function(){return 11<n.getHours()?"pm":"am"},A:function(){return c.a().toUpperCase()},B:function(){var e=3600*n.getUTCHours(),t=60*n.getUTCMinutes(),i=n.getUTCSeconds();return s(Math.floor((e+t+i+3600)/86.4)%1e3,3)},g:function(){return c.G()%12||12},G:function(){return n.getHours()},h:function(){return s(c.g(),2)},H:function(){return s(c.G(),2)},i:function(){return s(n.getMinutes(),2)},s:function(){return s(n.getSeconds(),2)},u:function(){return s(1e3*n.getMilliseconds(),6)},e:function(){throw new Error("Not supported (see source code of date() for timezone on how to add support)")},I:function(){return new Date(c.Y(),0)-Date.UTC(c.Y(),0)!=new Date(c.Y(),6)-Date.UTC(c.Y(),6)?1:0},O:function(){var e=n.getTimezoneOffset(),t=Math.abs(e);return(0<e?"-":"+")+s(100*Math.floor(t/60)+t%60,4)},P:function(){var e=c.O();return e.substr(0,3)+":"+e.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-n.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(l,i)},r:function(){return"D, d M Y H:i:s O".replace(l,i)},U:function(){return n/1e3|0}};return a=e,n=void 0===(o=t)?new Date:o instanceof Date?new Date(o):new Date(1e3*o),a.replace(l,i)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Buefy={})}(this,function(e){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)})(e)}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(t,e){var i,s=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,i)),s}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach(function(e){o(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(e){return function(e){if(Array.isArray(e))return e}(e)||t(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function t(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}var i=Math.sign||function(e){return e<0?-1:0<e?1:0};function a(e,t){return(e&t)===t}function d(e,t,i){return Math.max(t,Math.min(i,e))}function u(e,t){return t.split(".").reduce(function(e,t){return e?e[t]:null},e)}function p(e,t,i){if(!e)return-1;if(!i||"function"!=typeof i)return e.indexOf(t);for(var s=0;s<e.length;s++)if(i(e[s],t))return s;return-1}function h(e){return"object"===l(e)&&!Array.isArray(e)}var f=function i(s,n,e){var a=2<arguments.length&&void 0!==e&&e;if(!a&&Object.assign)return Object.assign(s,n);var t=Object.getOwnPropertyNames(n).map(function(e){return o({},e,h(n[t=e])&&null!==s&&s.hasOwnProperty(t)&&h(s[t])?i(s[e],n[e],a):n[e]);var t}).reduce(function(e,t){return r({},e,{},t)},{});return r({},s,{},t)},m={Android:function(){return"undefined"!=typeof window&&window.navigator.userAgent.match(/Android/i)},BlackBerry:function(){return"undefined"!=typeof window&&window.navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return"undefined"!=typeof window&&window.navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return"undefined"!=typeof window&&window.navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return"undefined"!=typeof window&&window.navigator.userAgent.match(/IEMobile/i)},any:function(){return m.Android()||m.BlackBerry()||m.iOS()||m.Opera()||m.Windows()}};function v(e){void 0!==e.remove?e.remove():void 0!==e.parentNode&&null!==e.parentNode&&e.parentNode.removeChild(e)}function g(e){var t=document.createElement("div");t.style.position="absolute",t.style.left="0px",t.style.top="0px";var i=document.createElement("div");return t.appendChild(i),i.appendChild(e),document.body.appendChild(t),t}function b(e){return e&&e._isVue}function y(e){return e?e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"):e}function k(e,t){var n;return JSON.parse(JSON.stringify(e)).sort((n=t,function(i,s){return n.map(function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substring(1)),i[e]>s[e]?t:i[e]<s[e]?-t:0}).reduce(function(e,t){return e||t},0)}))}function w(e){return void 0===e?null:isNaN(e)?e:e+"px"}function x(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"long",i=[],s=0;s<12;s++)i.push(new Date(2e3,s,15));var n=new Intl.DateTimeFormat(e,{month:t,timezome:"UTC"});return i.map(function(e){return n.format(e)})}function _(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"narrow",i=[],s=new Date(2e3,0,1),n=s.getDay();s.setDate(s.getDate()-n);for(var a=0;a<7;a++)i.push(new Date(s.getFullYear(),s.getMonth(),s.getDate()+a));var o=new Intl.DateTimeFormat(e,{weekday:t,timezome:"UTC"});return i.map(function(e){return o.format(e)})}function $(e,t){var n=t.match(e);return e.toString().match(/<(.+?)>/g).map(function(e){var t=e.match(/<(.+)>/);return!t||t.length<=0?null:e.match(/<(.+)>/)[1]}).reduce(function(e,t,i,s){return n&&n.length>i?e[t]=n[i+1]:e[t]=null,e},{})}function C(e){return"shadowRoot"in e.$root.$options}function S(e){return void 0!==e}function T(e){F=e}function D(){var e=F&&F.defaultIconComponent?"":"fa-";return{sizes:{default:null,"is-small":null,"is-medium":e+"lg","is-large":e+"2x"},iconPrefix:e,internalIcons:{information:"info-circle",alert:"exclamation-triangle","alert-circle":"exclamation-circle","chevron-right":"angle-right","chevron-left":"angle-left","chevron-down":"angle-down","eye-off":"eye-slash","menu-down":"caret-down","menu-up":"caret-up","close-circle":"times-circle"}}}var A,F={defaultContainerElement:null,defaultIconPack:"mdi",defaultIconComponent:null,defaultIconPrev:"chevron-left",defaultIconNext:"chevron-right",defaultLocale:void 0,defaultDialogConfirmText:null,defaultDialogCancelText:null,defaultSnackbarDuration:3500,defaultSnackbarPosition:null,defaultToastDuration:2e3,defaultToastPosition:null,defaultNotificationDuration:2e3,defaultNotificationPosition:null,defaultTooltipType:"is-primary",defaultTooltipDelay:null,defaultInputAutocomplete:"on",defaultDateFormatter:null,defaultDateParser:null,defaultDateCreator:null,defaultTimeCreator:null,defaultDayNames:null,defaultMonthNames:null,defaultFirstDayOfWeek:null,defaultUnselectableDaysOfWeek:null,defaultTimeFormatter:null,defaultTimeParser:null,defaultModalCanCancel:["escape","x","outside","button"],defaultModalScroll:null,defaultDatepickerMobileNative:!0,defaultTimepickerMobileNative:!0,defaultNoticeQueue:!0,defaultInputHasCounter:!0,defaultTaginputHasCounter:!0,defaultUseHtml5Validation:!0,defaultDropdownMobileModal:!0,defaultFieldLabelPosition:null,defaultDatepickerYearsRange:[-100,10],defaultDatepickerNearbyMonthDays:!0,defaultDatepickerNearbySelectableMonthDays:!1,defaultDatepickerShowWeekNumber:!1,defaultDatepickerMobileModal:!0,defaultTrapFocus:!0,defaultButtonRounded:!1,defaultCarouselInterval:3500,defaultTabsExpanded:!1,defaultTabsAnimated:!0,defaultTabsType:null,defaultStatusIcon:!0,defaultProgrammaticPromise:!1,defaultLinkTags:["a","button","input","router-link","nuxt-link","n-link","RouterLink","NuxtLink","NLink"],defaultImageWebpFallback:null,defaultImageLazy:!0,defaultImageResponsive:!0,defaultImageRatio:null,defaultImageSrcsetFormatter:null,customIconPacks:null},O={props:{size:String,expanded:Boolean,loading:Boolean,rounded:Boolean,icon:String,iconPack:String,autocomplete:String,maxlength:[Number,String],useHtml5Validation:{type:Boolean,default:function(){return F.defaultUseHtml5Validation}},validationMessage:String,locale:{type:[String,Array],default:function(){return F.defaultLocale}},statusIcon:{type:Boolean,default:function(){return F.defaultStatusIcon}}},data:function(){return{isValid:!0,isFocused:!1,newIconPack:this.iconPack||F.defaultIconPack}},computed:{parentField:function(){for(var e=this.$parent,t=0;t<3;t++)e&&!e.$data._isField&&(e=e.$parent);return e},statusType:function(){var e=(this.parentField||{}).newType;if(e){if("string"==typeof e)return e;for(var t in e)if(e[t])return t}},statusMessage:function(){if(this.parentField)return this.parentField.newMessage||this.parentField.$slots.message},iconSize:function(){switch(this.size){case"is-small":return this.size;case"is-medium":return;case"is-large":return"mdi"===this.newIconPack?"is-medium":""}}},methods:{focus:function(){var e=this.getElement();void 0!==e&&this.$nextTick(function(){e&&e.focus()})},onBlur:function(e){this.isFocused=!1,this.$emit("blur",e),this.checkHtml5Validity()},onFocus:function(e){this.isFocused=!0,this.$emit("focus",e)},getElement:function(){for(var e=this.$refs[this.$data._elementRef];b(e);)e=e.$refs[e.$data._elementRef];return e},setInvalid:function(){var e=this.validationMessage||this.getElement().validationMessage;this.setValidity("is-danger",e)},setValidity:function(e,t){var i=this;this.$nextTick(function(){i.parentField&&(i.parentField.type||(i.parentField.newType=e),i.parentField.message||(i.parentField.newMessage=t))})},checkHtml5Validity:function(){if(this.useHtml5Validation){var e=this.getElement();if(void 0!==e)return e.checkValidity()?(this.setValidity(null,null),this.isValid=!0):(this.setInvalid(),this.isValid=!1),this.isValid}}}},M={sizes:{default:"mdi-24px","is-small":null,"is-medium":"mdi-36px","is-large":"mdi-48px"},iconPrefix:"mdi-"};function P(e){"undefined"!=typeof window&&window.Vue&&window.Vue.use(e)}function B(e,t){e.component(t.name,t)}function z(e,t,i){e.prototype.$buefy||(e.prototype.$buefy={}),e.prototype.$buefy[t]=i}var E=function(e,t,i,s,n,a,o,r,l,c){"boolean"!=typeof o&&(l=r,r=o,o=!1);var d,u,p,h="function"==typeof i?i.options:i;return e&&e.render&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0,n&&(h.functional=!0)),s&&(h._scopeId=s),a?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},h._ssrRegister=d):t&&(d=o?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,r(e))}),d&&(h.functional?(u=h.render,h.render=function(e,t){return d.call(t),u(e,t)}):(p=h.beforeCreate,h.beforeCreate=p?[].concat(p,d):[d])),i},R=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon",class:[e.newType,e.size]},[e.useIconComponent?i(e.useIconComponent,{tag:"component",class:[e.customClass],attrs:{icon:[e.newPack,e.newIcon],size:e.newCustomSize}}):i("i",{class:[e.newPack,e.newIcon,e.newCustomSize,e.customClass]})],1)},staticRenderFns:[]},void 0,{name:"BIcon",props:{type:[String,Object],component:String,pack:String,icon:String,size:String,customSize:String,customClass:String,both:Boolean},computed:{iconConfig:function(){var e;return(e={mdi:M,fa:D(),fas:D(),far:D(),fad:D(),fab:D(),fal:D()},F&&F.customIconPacks&&(e=f(e,F.customIconPacks,!0)),e)[this.newPack]},iconPrefix:function(){return this.iconConfig&&this.iconConfig.iconPrefix?this.iconConfig.iconPrefix:""},newIcon:function(){return"".concat(this.iconPrefix).concat(this.getEquivalentIconOf(this.icon))},newPack:function(){return this.pack||F.defaultIconPack},newType:function(){if(this.type){var e=[];if("string"==typeof this.type)e=this.type.split("-");else for(var t in this.type)if(this.type[t]){e=t.split("-");break}if(!(e.length<=1)){var i=n(e).slice(1);return"has-text-".concat(i.join("-"))}}},newCustomSize:function(){return this.customSize||this.customSizeByPack},customSizeByPack:function(){if(this.iconConfig&&this.iconConfig.sizes){if(this.size&&void 0!==this.iconConfig.sizes[this.size])return this.iconConfig.sizes[this.size];if(this.iconConfig.sizes.default)return this.iconConfig.sizes.default}return null},useIconComponent:function(){return this.component||F.defaultIconComponent}},methods:{getEquivalentIconOf:function(e){return this.both&&this.iconConfig&&this.iconConfig.internalIcons&&this.iconConfig.internalIcons[e]?this.iconConfig.internalIcons[e]:e}}},void 0,!1,void 0,void 0,void 0),I=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control",class:t.rootClasses},["textarea"!==t.type?i("input",t._b({ref:"input",staticClass:"input",class:[t.inputClasses,t.customClass],attrs:{type:t.newType,autocomplete:t.newAutocomplete,maxlength:t.maxlength},domProps:{value:t.computedValue},on:{input:t.onInput,change:t.onChange,blur:t.onBlur,focus:t.onFocus}},"input",t.$attrs,!1)):i("textarea",t._b({ref:"textarea",staticClass:"textarea",class:[t.inputClasses,t.customClass],attrs:{maxlength:t.maxlength},domProps:{value:t.computedValue},on:{input:t.onInput,change:t.onChange,blur:t.onBlur,focus:t.onFocus}},"textarea",t.$attrs,!1)),t.icon?i("b-icon",{staticClass:"is-left",class:{"is-clickable":t.iconClickable},attrs:{icon:t.icon,pack:t.iconPack,size:t.iconSize},nativeOn:{click:function(e){return t.iconClick("icon-click",e)}}}):t._e(),!t.loading&&t.hasIconRight?i("b-icon",{staticClass:"is-right",class:{"is-clickable":t.passwordReveal||t.iconRightClickable},attrs:{icon:t.rightIcon,pack:t.iconPack,size:t.iconSize,type:t.rightIconType,both:""},nativeOn:{click:function(e){return t.rightIconClick(e)}}}):t._e(),t.maxlength&&t.hasCounter&&"number"!==t.type?i("small",{staticClass:"help counter",class:{"is-invisible":!t.isFocused}},[t._v(" "+t._s(t.valueLength)+" / "+t._s(t.maxlength)+" ")]):t._e()],1)},staticRenderFns:[]},void 0,{name:"BInput",components:o({},R.name,R),mixins:[O],inheritAttrs:!1,props:{value:[Number,String],type:{type:String,default:"text"},lazy:{type:Boolean,default:!1},passwordReveal:Boolean,iconClickable:Boolean,hasCounter:{type:Boolean,default:function(){return F.defaultInputHasCounter}},customClass:{type:String,default:""},iconRight:String,iconRightClickable:Boolean},data:function(){return{newValue:this.value,newType:this.type,newAutocomplete:this.autocomplete||F.defaultInputAutocomplete,isPasswordVisible:!1,_elementRef:"textarea"===this.type?"textarea":"input"}},computed:{computedValue:{get:function(){return this.newValue},set:function(e){this.newValue=e,this.$emit("input",e)}},rootClasses:function(){return[this.iconPosition,this.size,{"is-expanded":this.expanded,"is-loading":this.loading,"is-clearfix":!this.hasMessage}]},inputClasses:function(){return[this.statusType,this.size,{"is-rounded":this.rounded}]},hasIconRight:function(){return this.passwordReveal||this.loading||this.statusIcon&&this.statusTypeIcon||this.iconRight},rightIcon:function(){return this.passwordReveal?this.passwordVisibleIcon:this.iconRight?this.iconRight:this.statusTypeIcon},rightIconType:function(){return this.passwordReveal?"is-primary":this.iconRight?null:this.statusType},iconPosition:function(){var e="";return this.icon&&(e+="has-icons-left "),this.hasIconRight&&(e+="has-icons-right"),e},statusTypeIcon:function(){switch(this.statusType){case"is-success":return"check";case"is-danger":return"alert-circle";case"is-info":return"information";case"is-warning":return"alert"}},hasMessage:function(){return!!this.statusMessage},passwordVisibleIcon:function(){return this.isPasswordVisible?"eye-off":"eye"},valueLength:function(){return"string"==typeof this.computedValue?this.computedValue.length:"number"==typeof this.computedValue?this.computedValue.toString().length:0}},watch:{value:function(e){this.newValue=e}},methods:{togglePasswordVisibility:function(){var e=this;this.isPasswordVisible=!this.isPasswordVisible,this.newType=this.isPasswordVisible?"text":"password",this.$nextTick(function(){e.focus()})},iconClick:function(e,t){var i=this;this.$emit(e,t),this.$nextTick(function(){i.focus()})},rightIconClick:function(e){this.passwordReveal?this.togglePasswordVisibility():this.iconRightClickable&&this.iconClick("icon-right-click",e)},onInput:function(e){var t;this.lazy||(t=e.target.value,this.updateValue(t))},onChange:function(e){var t;this.lazy&&(t=e.target.value,this.updateValue(t))},updateValue:function(e){this.computedValue=e,this.isValid||this.checkHtml5Validity()}}},void 0,!1,void 0,void 0,void 0),L=E({render:function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("div",{staticClass:"autocomplete control",class:{"is-expanded":s.expanded}},[n("b-input",s._b({ref:"input",attrs:{type:"text",size:s.size,loading:s.loading,rounded:s.rounded,icon:s.icon,"icon-right":s.newIconRight,"icon-right-clickable":s.newIconRightClickable,"icon-pack":s.iconPack,maxlength:s.maxlength,autocomplete:s.newAutocomplete,"use-html5-validation":!1},on:{input:s.onInput,focus:s.focused,blur:s.onBlur,"icon-right-click":s.rightIconClick,"icon-click":function(e){return s.$emit("icon-click",e)}},nativeOn:{keyup:function(e){if(!e.type.indexOf("key")&&s._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;e.preventDefault(),s.isActive=!1},keydown:[function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"tab",9,e.key,"Tab")?null:s.tabPressed(e)},function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),s.enterPressed(e))},function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),s.keyArrows("up"))},function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),s.keyArrows("down"))}]},model:{value:s.newValue,callback:function(e){s.newValue=e},expression:"newValue"}},"b-input",s.$attrs,!1)),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:s.isActive&&(!s.isEmpty||s.hasEmptySlot||s.hasHeaderSlot),expression:"isActive && (!isEmpty || hasEmptySlot || hasHeaderSlot)"}],ref:"dropdown",staticClass:"dropdown-menu",class:{"is-opened-top":s.isOpenedTop&&!s.appendToBody},style:s.style},[n("div",{directives:[{name:"show",rawName:"v-show",value:s.isActive,expression:"isActive"}],staticClass:"dropdown-content",style:s.contentStyle},[s.hasHeaderSlot?n("div",{staticClass:"dropdown-item"},[s._t("header")],2):s._e(),s._l(s.computedData,function(e,i){return[e.group?n("div",{key:i+"group",staticClass:"dropdown-item"},[s.hasGroupSlot?s._t("group",null,{group:e.group,index:i}):n("span",{staticClass:"has-text-weight-bold"},[s._v(" "+s._s(e.group)+" ")])],2):s._e(),s._l(e.items,function(t,e){return n("a",{key:i+":"+e,staticClass:"dropdown-item",class:{"is-hovered":t===s.hovered},on:{click:function(e){return s.setSelected(t,void 0,e)}}},[s.hasDefaultSlot?s._t("default",null,{option:t,index:e}):n("span",[s._v(" "+s._s(s.getValue(t,!0))+" ")])],2)})]}),s.isEmpty&&s.hasEmptySlot?n("div",{staticClass:"dropdown-item is-disabled"},[s._t("empty")],2):s._e(),s.hasFooterSlot?n("div",{staticClass:"dropdown-item"},[s._t("footer")],2):s._e()],2)])])],1)},staticRenderFns:[]},void 0,{name:"BAutocomplete",components:o({},I.name,I),mixins:[O],inheritAttrs:!1,props:{value:[Number,String],data:{type:Array,default:function(){return[]}},field:{type:String,default:"value"},keepFirst:Boolean,clearOnSelect:Boolean,openOnFocus:Boolean,customFormatter:Function,checkInfiniteScroll:Boolean,keepOpen:Boolean,clearable:Boolean,maxHeight:[String,Number],dropdownPosition:{type:String,default:"auto"},groupField:String,groupOptions:String,iconRight:String,iconRightClickable:Boolean,appendToBody:Boolean},data:function(){return{selected:null,hovered:null,isActive:!1,newValue:this.value,newAutocomplete:this.autocomplete||"off",isListInViewportVertically:!0,hasFocus:!1,style:{},_isAutocomplete:!0,_elementRef:"input",_bodyEl:void 0}},computed:{computedData:function(){var s=this;if(this.groupField){if(this.groupOptions){var n=[];return this.data.forEach(function(e){var t=u(e,s.groupField),i=u(e,s.groupOptions);n.push({group:t,items:i})}),n}var i={};this.data.forEach(function(e){var t=u(e,s.groupField);i[t]||(i[t]=[]),i[t].push(e)});var t=[];return Object.keys(i).forEach(function(e){t.push({group:e,items:i[e]})}),t}return[{items:this.data}]},isEmpty:function(){return!this.computedData||!this.computedData.some(function(e){return e.items&&e.items.length})},whiteList:function(){var e=[];if(e.push(this.$refs.input.$el.querySelector("input")),e.push(this.$refs.dropdown),void 0!==this.$refs.dropdown){var t=this.$refs.dropdown.querySelectorAll("*"),i=!0,s=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var r=a.value;e.push(r)}}catch(e){s=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}}if(this.$parent.$data._isTaginput){e.push(this.$parent.$el);var l=this.$parent.$el.querySelectorAll("*"),c=!0,d=!1,u=void 0;try{for(var p,h=l[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var f=p.value;e.push(f)}}catch(e){d=!0,u=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw u}}}return e},hasDefaultSlot:function(){return!!this.$scopedSlots.default},hasGroupSlot:function(){return!!this.$scopedSlots.group},hasEmptySlot:function(){return!!this.$slots.empty},hasHeaderSlot:function(){return!!this.$slots.header},hasFooterSlot:function(){return!!this.$slots.footer},isOpenedTop:function(){return"top"===this.dropdownPosition||"auto"===this.dropdownPosition&&!this.isListInViewportVertically},newIconRight:function(){return this.clearable&&this.newValue?"close-circle":this.iconRight},newIconRightClickable:function(){return!!this.clearable||this.iconRightClickable},contentStyle:function(){return{maxHeight:w(this.maxHeight)}}},watch:{isActive:function(e){var t=this;"auto"===this.dropdownPosition&&(e?this.calcDropdownInViewportVertical():setTimeout(function(){t.calcDropdownInViewportVertical()},100))},newValue:function(e){this.$emit("input",e);var t=this.getValue(this.selected);t&&t!==e&&this.setSelected(null,!1),!this.hasFocus||this.openOnFocus&&!e||(this.isActive=!!e)},value:function(e){this.newValue=e},data:function(){this.keepFirst&&this.selectFirstOption(this.computedData)}},methods:{setHovered:function(e){void 0!==e&&(this.hovered=e)},setSelected:function(e,t,i){var s=this,n=!(1<arguments.length&&void 0!==t)||t,a=2<arguments.length&&void 0!==i?i:void 0;void 0!==e&&(this.selected=e,this.$emit("select",this.selected,a),null!==this.selected&&(this.newValue=this.clearOnSelect?"":this.getValue(this.selected),this.setHovered(null)),n&&this.$nextTick(function(){s.isActive=!1}),this.checkValidity())},selectFirstOption:function(t){var i=this;this.$nextTick(function(){var e;t.length?(e=t[0].items[0],(i.openOnFocus||""!==i.newValue&&i.hovered!==e)&&i.setHovered(e)):i.setHovered(null)})},enterPressed:function(e){null!==this.hovered&&this.setSelected(this.hovered,!this.keepOpen,e)},tabPressed:function(e){null!==this.hovered?this.setSelected(this.hovered,!this.keepOpen,e):this.isActive=!1},clickedOutside:function(e){var t=C(this)?e.composedPath()[0]:e.target;!this.hasFocus&&this.whiteList.indexOf(t)<0&&(this.isActive=!1)},getValue:function(e){if(null!==e)return void 0!==this.customFormatter?this.customFormatter(e):"object"===l(e)?u(e,this.field):e},checkIfReachedTheEndOfScroll:function(e){e.clientHeight!==e.scrollHeight&&e.scrollTop+e.clientHeight>=e.scrollHeight&&this.$emit("infinite-scroll")},calcDropdownInViewportVertical:function(){var t=this;this.$nextTick(function(){var e;void 0!==t.$refs.dropdown&&(e=t.$refs.dropdown.getBoundingClientRect(),t.isListInViewportVertically=0<=e.top&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight),t.appendToBody&&t.updateAppendToBody())})},keyArrows:function(e){var t="down"===e?1:-1;if(this.isActive){var i=this.computedData.map(function(e){return e.items}).reduce(function(e,t){return[].concat(c(e),c(t))},[]),s=i.indexOf(this.hovered)+t;s=(s=s>i.length-1?i.length-1:s)<0?0:s,this.setHovered(i[s]);var n=this.$refs.dropdown.querySelector(".dropdown-content"),a=n.querySelectorAll("a.dropdown-item:not(.is-disabled)")[s];if(!a)return;var o=n.scrollTop,r=n.scrollTop+n.clientHeight-a.clientHeight;a.offsetTop<o?n.scrollTop=a.offsetTop:a.offsetTop>=r&&(n.scrollTop=a.offsetTop-n.clientHeight+a.clientHeight)}else this.isActive=!0},focused:function(e){this.getValue(this.selected)===this.newValue&&this.$el.querySelector("input").select(),this.openOnFocus&&(this.isActive=!0,this.keepFirst&&this.selectFirstOption(this.computedData)),this.hasFocus=!0,this.$emit("focus",e)},onBlur:function(e){this.hasFocus=!1,this.$emit("blur",e)},onInput:function(){var e=this.getValue(this.selected);e&&e===this.newValue||(this.$emit("typing",this.newValue),this.checkValidity())},rightIconClick:function(e){this.clearable?(this.newValue="",this.openOnFocus&&this.$refs.input.$el.focus()):this.$emit("icon-right-click",e)},checkValidity:function(){var e=this;this.useHtml5Validation&&this.$nextTick(function(){e.checkHtml5Validity()})},updateAppendToBody:function(){var t,e,i,s,n=this.$refs.dropdown,a=this.$refs.input.$el;n&&a&&((t=this.$data._bodyEl).classList.forEach(function(e){return t.classList.remove(e)}),t.classList.add("autocomplete"),t.classList.add("control"),this.expandend&&t.classList.add("is-expandend"),i=(e=a.getBoundingClientRect()).top+window.scrollY,s=e.left+window.scrollX,this.isOpenedTop?i-=n.clientHeight:i+=a.clientHeight,this.style={position:"absolute",top:"".concat(i,"px"),left:"".concat(s,"px"),width:"".concat(a.clientWidth,"px"),maxWidth:"".concat(a.clientWidth,"px"),zIndex:"99"})}},created:function(){"undefined"!=typeof window&&(document.addEventListener("click",this.clickedOutside),"auto"===this.dropdownPosition&&window.addEventListener("resize",this.calcDropdownInViewportVertical))},mounted:function(){var e,t=this;this.checkInfiniteScroll&&this.$refs.dropdown&&this.$refs.dropdown.querySelector(".dropdown-content")&&(e=this.$refs.dropdown.querySelector(".dropdown-content")).addEventListener("scroll",function(){return t.checkIfReachedTheEndOfScroll(e)}),this.appendToBody&&(this.$data._bodyEl=g(this.$refs.dropdown),this.updateAppendToBody())},beforeDestroy:function(){"undefined"!=typeof window&&(document.removeEventListener("click",this.clickedOutside),"auto"===this.dropdownPosition&&window.removeEventListener("resize",this.calcDropdownInViewportVertical)),this.checkInfiniteScroll&&this.$refs.dropdown&&this.$refs.dropdown.querySelector(".dropdown-content")&&this.$refs.dropdown.querySelector(".dropdown-content").removeEventListener("scroll",this.checkIfReachedTheEndOfScroll),this.appendToBody&&v(this.$data._bodyEl)}},void 0,!1,void 0,void 0,void 0),N={install:function(e){B(e,L)}};P(N);var V=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.computedTag,e._g(e._b({tag:"component",staticClass:"button",class:[e.size,e.type,{"is-rounded":e.rounded,"is-loading":e.loading,"is-outlined":e.outlined,"is-fullwidth":e.expanded,"is-inverted":e.inverted,"is-focused":e.focused,"is-active":e.active,"is-hovered":e.hovered,"is-selected":e.selected}],attrs:{type:e.nativeType}},"component",e.$attrs,!1),e.$listeners),[e.iconLeft?i("b-icon",{attrs:{pack:e.iconPack,icon:e.iconLeft,size:e.iconSize}}):e._e(),e.label?i("span",[e._v(e._s(e.label))]):e.$slots.default?i("span",[e._t("default")],2):e._e(),e.iconRight?i("b-icon",{attrs:{pack:e.iconPack,icon:e.iconRight,size:e.iconSize}}):e._e()],1)},staticRenderFns:[]},void 0,{name:"BButton",components:o({},R.name,R),inheritAttrs:!1,props:{type:[String,Object],size:String,label:String,iconPack:String,iconLeft:String,iconRight:String,rounded:{type:Boolean,default:function(){return F.defaultButtonRounded}},loading:Boolean,outlined:Boolean,expanded:Boolean,inverted:Boolean,focused:Boolean,active:Boolean,hovered:Boolean,selected:Boolean,nativeType:{type:String,default:"button",validator:function(e){return 0<=["button","submit","reset"].indexOf(e)}},tag:{type:String,default:"button",validator:function(e){return 0<=F.defaultLinkTags.indexOf(e)}}},computed:{computedTag:function(){return void 0!==this.$attrs.disabled&&!1!==this.$attrs.disabled?"button":this.tag},iconSize:function(){return this.size&&"is-medium"!==this.size?"is-large"===this.size?"is-medium":this.size:"is-small"}}},void 0,!1,void 0,void 0,void 0),j={install:function(e){B(e,V)}};P(j);function H(e,t){var i=1<arguments.length&&void 0!==t?t:0,s={inject:{parent:{from:"b"+e,default:!1}},created:function(){if(this.parent)this.parent._registerItem&&this.parent._registerItem(this);else if(!a(i,2))throw this.$destroy(),new Error("You should wrap "+this.$options.name+" in a "+e)},beforeDestroy:function(){this.parent&&this.parent._unregisterItem&&this.parent._unregisterItem(this)}};return a(i,1)&&(s.data=function(){return{index:null}}),s}var q={props:{value:[String,Number,Boolean,Function,Object,Array],nativeValue:[String,Number,Boolean,Function,Object,Array],type:String,disabled:Boolean,required:Boolean,name:String,size:String},data:function(){return{newValue:this.value}},computed:{computedValue:{get:function(){return this.newValue},set:function(e){this.newValue=e,this.$emit("input",e)}}},watch:{value:function(e){this.newValue=e}},methods:{focus:function(){this.$refs.input.focus()}}},U=E({render:function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("label",{ref:"label",staticClass:"b-checkbox checkbox",class:[o.size,{"is-disabled":o.disabled}],attrs:{disabled:o.disabled},on:{click:o.focus,keydown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.$refs.label.click())}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"checkbox",disabled:o.disabled,required:o.required,name:o.name,"true-value":o.trueValue,"false-value":o.falseValue},domProps:{indeterminate:o.indeterminate,value:o.nativeValue,checked:Array.isArray(o.computedValue)?-1<o._i(o.computedValue,o.nativeValue):o._q(o.computedValue,o.trueValue)},on:{click:function(e){e.stopPropagation()},change:function(e){var t,i,s=o.computedValue,n=e.target,a=n.checked?o.trueValue:o.falseValue;Array.isArray(s)?(t=o.nativeValue,i=o._i(s,t),n.checked?i<0&&(o.computedValue=s.concat([t])):-1<i&&(o.computedValue=s.slice(0,i).concat(s.slice(i+1)))):o.computedValue=a}}}),t("span",{staticClass:"check",class:o.type}),t("span",{staticClass:"control-label"},[o._t("default")],2)])},staticRenderFns:[]},void 0,{name:"BCheckbox",mixins:[q],props:{indeterminate:Boolean,trueValue:{type:[String,Number,Boolean,Function,Object,Array],default:!0},falseValue:{type:[String,Number,Boolean,Function,Object,Array],default:!1}}},void 0,!1,void 0,void 0,void 0),W=E({render:function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"control",class:{"is-expanded":o.expanded}},[t("label",{ref:"label",staticClass:"b-checkbox checkbox button",class:[o.checked?o.type:null,o.size,{"is-disabled":o.disabled,"is-focused":o.isFocused}],attrs:{disabled:o.disabled},on:{click:o.focus,keydown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.$refs.label.click())}}},[o._t("default"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"checkbox",disabled:o.disabled,required:o.required,name:o.name},domProps:{value:o.nativeValue,checked:Array.isArray(o.computedValue)?-1<o._i(o.computedValue,o.nativeValue):o.computedValue},on:{click:function(e){e.stopPropagation()},focus:function(){o.isFocused=!0},blur:function(){o.isFocused=!1},change:function(e){var t,i,s=o.computedValue,n=e.target,a=!!n.checked;Array.isArray(s)?(t=o.nativeValue,i=o._i(s,t),n.checked?i<0&&(o.computedValue=s.concat([t])):-1<i&&(o.computedValue=s.slice(0,i).concat(s.slice(i+1)))):o.computedValue=a}}})],2)])},staticRenderFns:[]},void 0,{name:"BCheckboxButton",mixins:[q],props:{type:{type:String,default:"is-primary"},expanded:Boolean},data:function(){return{isFocused:!1}},computed:{checked:function(){return Array.isArray(this.newValue)?0<=this.newValue.indexOf(this.nativeValue):this.newValue===this.nativeValue}}},void 0,!1,void 0,void 0,void 0),Y={install:function(e){B(e,U),B(e,W)}};P(Y);function K(e,t){return e?1<arguments.length&&void 0!==t&&t?e.querySelectorAll('*[tabindex="-1"]'):e.querySelectorAll('a[href]:not([tabindex="-1"]),\n                                     area[href],\n                                     input:not([disabled]),\n                                     select:not([disabled]),\n                                     textarea:not([disabled]),\n                                     button:not([disabled]),\n                                     iframe,\n                                     object,\n                                     embed,\n                                     *[tabindex]:not([tabindex="-1"]),\n                                     *[contenteditable]'):null}var X,G,Q="AM",J="PM",Z="12",ee={mixins:[O],inheritAttrs:!1,props:{value:Date,inline:Boolean,minTime:Date,maxTime:Date,placeholder:String,editable:Boolean,disabled:Boolean,hourFormat:{type:String,validator:function(e){return"24"===e||e===Z}},incrementHours:{type:Number,default:1},incrementMinutes:{type:Number,default:1},incrementSeconds:{type:Number,default:1},timeFormatter:{type:Function,default:function(e,t){return"function"==typeof F.defaultTimeFormatter?F.defaultTimeFormatter(e):(i=e,t.dtf.format(i));var i}},timeParser:{type:Function,default:function(e,t){return"function"==typeof F.defaultTimeParser?F.defaultTimeParser(e):function(e,t){if(e){var i=null;if(t.computedValue&&!isNaN(t.computedValue)?i=new Date(t.computedValue):(i=t.timeCreator()).setMilliseconds(0),t.dtf.formatToParts&&"function"==typeof t.dtf.formatToParts){var s=$(t.dtf.formatToParts(i).map(function(e){return"literal"===e.type?e.value.replace(/ /g,"\\s?"):"dayPeriod"===e.type?"((?!=<".concat(e.type,">)(").concat(t.amString,"|").concat(t.pmString,"|").concat(Q,"|").concat(J,"|").concat(Q.toLowerCase(),"|").concat(J.toLowerCase(),")?)"):"((?!=<".concat(e.type,">)\\d+)")}).join(""),e);if(s.hour=s.hour?parseInt(s.hour,10):null,s.minute=s.minute?parseInt(s.minute,10):null,s.second=s.second?parseInt(s.second,10):null,s.hour&&0<=s.hour&&s.hour<24&&s.minute&&0<=s.minute&&s.minute<59)return s.dayPeriod&&(s.dayPeriod.toLowerCase()===t.pmString.toLowerCase()||s.dayPeriod.toLowerCase()===J.toLowerCase())&&s.hour<12&&(s.hour+=12),i.setHours(s.hour),i.setMinutes(s.minute),i.setSeconds(s.second||0),i}var n,a=!1;t.hourFormat===Z&&(e=(n=e.split(" "))[0],a=n[1]===t.amString||n[1]===Q);var o=e.split(":"),r=parseInt(o[0],10),l=parseInt(o[1],10),c=t.enableSeconds?parseInt(o[2],10):0;return isNaN(r)||r<0||23<r||t.hourFormat===Z&&(r<1||12<r)||isNaN(l)||l<0||59<l?null:(i.setSeconds(c),i.setMinutes(l),t.hourFormat===Z&&(a&&12===r?r=0:a||12===r||(r+=12)),i.setHours(r),new Date(i.getTime()))}return null}(e,t)}},mobileNative:{type:Boolean,default:function(){return F.defaultTimepickerMobileNative}},timeCreator:{type:Function,default:function(){return"function"==typeof F.defaultTimeCreator?F.defaultTimeCreator():new Date}},position:String,unselectableTimes:Array,openOnFocus:Boolean,enableSeconds:Boolean,defaultMinutes:Number,defaultSeconds:Number,focusable:{type:Boolean,default:!0},tzOffset:{type:Number,default:0},appendToBody:Boolean,resetOnMeridianChange:{type:Boolean,default:!1}},data:function(){return{dateSelected:this.value,hoursSelected:null,minutesSelected:null,secondsSelected:null,meridienSelected:null,_elementRef:"input",AM:Q,PM:J,HOUR_FORMAT_24:"24",HOUR_FORMAT_12:Z}},computed:{computedValue:{get:function(){return this.dateSelected},set:function(e){this.dateSelected=e,this.$emit("input",this.dateSelected)}},localeOptions:function(){return new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",second:this.enableSeconds?"numeric":void 0}).resolvedOptions()},dtf:function(){return new Intl.DateTimeFormat(this.locale,{hour:this.localeOptions.hour||"numeric",minute:this.localeOptions.minute||"numeric",second:this.enableSeconds?this.localeOptions.second||"numeric":void 0,hour12:!this.isHourFormat24,timezome:"UTC"})},newHourFormat:function(){return this.hourFormat||(this.localeOptions.hour12?Z:"24")},sampleTime:function(){var e=this.timeCreator();return e.setHours(10),e.setSeconds(0),e.setMinutes(0),e.setMilliseconds(0),e},hourLiteral:function(){if(this.dtf.formatToParts&&"function"==typeof this.dtf.formatToParts){var e=this.sampleTime,i=this.dtf.formatToParts(e),t=i.find(function(e,t){return 0<t&&"hour"===i[t-1].type});if(t)return t.value}return":"},minuteLiteral:function(){if(this.dtf.formatToParts&&"function"==typeof this.dtf.formatToParts){var e=this.sampleTime,i=this.dtf.formatToParts(e),t=i.find(function(e,t){return 0<t&&"minute"===i[t-1].type});if(t)return t.value}return":"},secondLiteral:function(){if(this.dtf.formatToParts&&"function"==typeof this.dtf.formatToParts){var e=this.sampleTime,i=this.dtf.formatToParts(e),t=i.find(function(e,t){return 0<t&&"second"===i[t-1].type});if(t)return t.value}},amString:function(){if(this.dtf.formatToParts&&"function"==typeof this.dtf.formatToParts){var e=this.sampleTime;e.setHours(10);var t=this.dtf.formatToParts(e).find(function(e){return"dayPeriod"===e.type});if(t)return t.value}return this.AM},pmString:function(){if(this.dtf.formatToParts&&"function"==typeof this.dtf.formatToParts){var e=this.sampleTime;e.setHours(20);var t=this.dtf.formatToParts(e).find(function(e){return"dayPeriod"===e.type});if(t)return t.value}return this.PM},hours:function(){if(!this.incrementHours||this.incrementHours<1)throw new Error("Hour increment cannot be null or less than 1.");for(var e=[],t=this.isHourFormat24?24:12,i=0;i<t;i+=this.incrementHours){var s=i,n=s;this.isHourFormat24||(n=s=i+1,this.meridienSelected===this.amString||this.meridienSelected===this.AM?12===s&&(s=0):this.meridienSelected!==this.pmString&&this.meridienSelected!==this.PM||12!==s&&(s+=12)),e.push({label:this.formatNumber(n),value:s})}return e},minutes:function(){if(!this.incrementMinutes||this.incrementMinutes<1)throw new Error("Minute increment cannot be null or less than 1.");for(var e=[],t=0;t<60;t+=this.incrementMinutes)e.push({label:this.formatNumber(t,!0),value:t});return e},seconds:function(){if(!this.incrementSeconds||this.incrementSeconds<1)throw new Error("Second increment cannot be null or less than 1.");for(var e=[],t=0;t<60;t+=this.incrementSeconds)e.push({label:this.formatNumber(t,!0),value:t});return e},meridiens:function(){return[this.amString,this.pmString]},isMobile:function(){return this.mobileNative&&m.any()},isHourFormat24:function(){return"24"===this.newHourFormat}},watch:{hourFormat:function(){null!==this.hoursSelected&&(this.meridienSelected=12<=this.hoursSelected?this.pmString:this.amString)},value:{handler:function(e){this.updateInternalState(e),this.isValid||this.$refs.input.checkHtml5Validity()},immediate:!0}},methods:{onMeridienChange:function(e){null!==this.hoursSelected&&this.resetOnMeridianChange?(this.hoursSelected=null,this.minutesSelected=null,this.secondsSelected=null,this.computedValue=null):null!==this.hoursSelected&&(e===this.pmString||e===J?this.hoursSelected+=12:e!==this.amString&&e!==Q||(this.hoursSelected-=12)),this.updateDateSelected(this.hoursSelected,this.minutesSelected,this.enableSeconds?this.secondsSelected:0,e)},onHoursChange:function(e){this.minutesSelected||void 0===this.defaultMinutes||(this.minutesSelected=this.defaultMinutes),this.secondsSelected||void 0===this.defaultSeconds||(this.secondsSelected=this.defaultSeconds),this.updateDateSelected(parseInt(e,10),this.minutesSelected,this.enableSeconds?this.secondsSelected:0,this.meridienSelected)},onMinutesChange:function(e){!this.secondsSelected&&this.defaultSeconds&&(this.secondsSelected=this.defaultSeconds),this.updateDateSelected(this.hoursSelected,parseInt(e,10),this.enableSeconds?this.secondsSelected:0,this.meridienSelected)},onSecondsChange:function(e){this.updateDateSelected(this.hoursSelected,this.minutesSelected,parseInt(e,10),this.meridienSelected)},updateDateSelected:function(e,t,i,s){var n;null!=e&&null!=t&&(!this.isHourFormat24&&null!==s||this.isHourFormat24)&&(n=null,this.computedValue&&!isNaN(this.computedValue)?n=new Date(this.computedValue):(n=this.timeCreator()).setMilliseconds(0),n.setHours(e),n.setMinutes(t),n.setSeconds(i),this.computedValue=new Date(n.getTime()))},updateInternalState:function(e){e?(this.hoursSelected=e.getHours(),this.minutesSelected=e.getMinutes(),this.secondsSelected=e.getSeconds(),this.meridienSelected=12<=e.getHours()?this.pmString:this.amString):(this.hoursSelected=null,this.minutesSelected=null,this.secondsSelected=null,this.meridienSelected=this.amString),this.dateSelected=e},isHourDisabled:function(i){var e,t,s=this,n=!1;return this.minTime&&(e=this.minTime.getHours(),t=this.minutes.every(function(e){return s.isMinuteDisabledForHour(i,e.value)}),n=i<e||t),this.maxTime&&(n=n||this.maxTime.getHours()<i),this.unselectableTimes&&(n=n||(0<this.unselectableTimes.filter(function(e){return s.enableSeconds&&null!==s.secondsSelected?e.getHours()===i&&e.getMinutes()===s.minutesSelected&&e.getSeconds()===s.secondsSelected:null!==s.minutesSelected&&(e.getHours()===i&&e.getMinutes()===s.minutesSelected)}).length||this.minutes.every(function(t){return 0<s.unselectableTimes.filter(function(e){return e.getHours()===i&&e.getMinutes()===t.value}).length}))),n},isMinuteDisabledForHour:function(e,t){var i,s,n,a,o=!1;return this.minTime&&(i=this.minTime.getHours(),s=this.minTime.getMinutes(),o=e===i&&t<s),this.maxTime&&(o||(n=this.maxTime.getHours(),a=this.maxTime.getMinutes(),o=e===n&&a<t)),o},isMinuteDisabled:function(t){var i=this,e=!1;return null!==this.hoursSelected&&(e=!!this.isHourDisabled(this.hoursSelected)||this.isMinuteDisabledForHour(this.hoursSelected,t),this.unselectableTimes&&(e=e||0<this.unselectableTimes.filter(function(e){return i.enableSeconds&&null!==i.secondsSelected?e.getHours()===i.hoursSelected&&e.getMinutes()===t&&e.getSeconds()===i.secondsSelected:e.getHours()===i.hoursSelected&&e.getMinutes()===t}).length)),e},isSecondDisabled:function(t){var e,i,s,n,a,o,r=this,l=!1;return null!==this.minutesSelected&&(this.isMinuteDisabled(this.minutesSelected)?l=!0:(this.minTime&&(e=this.minTime.getHours(),i=this.minTime.getMinutes(),s=this.minTime.getSeconds(),l=this.hoursSelected===e&&this.minutesSelected===i&&t<s),this.maxTime&&(l||(n=this.maxTime.getHours(),a=this.maxTime.getMinutes(),o=this.maxTime.getSeconds(),l=this.hoursSelected===n&&this.minutesSelected===a&&o<t))),this.unselectableTimes&&(l=l||0<this.unselectableTimes.filter(function(e){return e.getHours()===r.hoursSelected&&e.getMinutes()===r.minutesSelected&&e.getSeconds()===t}).length)),l},onChange:function(e){var t=this.timeParser(e,this);this.updateInternalState(t),t&&!isNaN(t)?this.computedValue=t:(this.computedValue=null,this.$refs.input.newValue=this.computedValue)},toggle:function(e){this.$refs.dropdown&&(this.$refs.dropdown.isActive="boolean"==typeof e?e:!this.$refs.dropdown.isActive)},close:function(){this.toggle(!1)},handleOnFocus:function(){this.onFocus(),this.openOnFocus&&this.toggle(!0)},formatHHMMSS:function(e){var t=new Date(e);if(!e||isNaN(t))return"";var i=t.getHours(),s=t.getMinutes(),n=t.getSeconds();return this.formatNumber(i,!0)+":"+this.formatNumber(s,!0)+":"+this.formatNumber(n,!0)},onChangeNativePicker:function(e){var t,i,s=e.target.value;s?(t=null,this.computedValue&&!isNaN(this.computedValue)?t=new Date(this.computedValue):(t=new Date).setMilliseconds(0),i=s.split(":"),t.setHours(parseInt(i[0],10)),t.setMinutes(parseInt(i[1],10)),t.setSeconds(i[2]?parseInt(i[2],10):0),this.computedValue=new Date(t.getTime())):this.computedValue=null},formatNumber:function(e,t){return this.isHourFormat24||t?this.pad(e):e},pad:function(e){return(e<10?"0":"")+e},formatValue:function(e){return e&&!isNaN(e)?this.timeFormatter(e,this):null},keyPress:function(e){var t=e.key;this.$refs.dropdown&&this.$refs.dropdown.isActive&&("Escape"===t||"Esc"===t)&&this.toggle(!1)},onActiveChange:function(e){e||this.onBlur()}},created:function(){"undefined"!=typeof window&&document.addEventListener("keyup",this.keyPress)},beforeDestroy:function(){"undefined"!=typeof window&&document.removeEventListener("keyup",this.keyPress)}},te={bind:function(s,e){var n,a,t=e.value;void 0!==t&&!t||(n=K(s),a=K(s,!0),n&&0<n.length&&(X=function(e){n=K(s),a=K(s,!0);var t=n[0],i=n[n.length-1];e.target===t&&e.shiftKey&&"Tab"===e.key?(e.preventDefault(),i.focus()):(e.target===i||0<=Array.from(a).indexOf(e.target))&&!e.shiftKey&&"Tab"===e.key&&(e.preventDefault(),t.focus())},s.addEventListener("keydown",X)))},unbind:function(e){e.removeEventListener("keydown",X)}},ie=["escape","outside"],se=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"dropdown",staticClass:"dropdown dropdown-menu-animation",class:t.rootClasses},[t.inline?t._e():i("div",{ref:"trigger",staticClass:"dropdown-trigger",attrs:{role:"button","aria-haspopup":"true"},on:{click:t.onClick,contextmenu:function(e){return e.preventDefault(),t.onContextMenu(e)},mouseenter:t.onHover,"!focus":function(e){return t.onFocus(e)}}},[t._t("trigger",null,{active:t.isActive})],2),i("transition",{attrs:{name:t.animation}},[t.isMobileModal?i("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"background",attrs:{"aria-hidden":!t.isActive}}):t._e()]),i("transition",{attrs:{name:t.animation}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.disabled&&(t.isActive||t.isHoverable)||t.inline,expression:"(!disabled && (isActive || isHoverable)) || inline"},{name:"trap-focus",rawName:"v-trap-focus",value:t.trapFocus,expression:"trapFocus"}],ref:"dropdownMenu",staticClass:"dropdown-menu",style:t.style,attrs:{"aria-hidden":!t.isActive}},[i("div",{staticClass:"dropdown-content",style:t.contentStyle,attrs:{role:t.ariaRole}},[t._t("default")],2)])])],1)},staticRenderFns:[]},void 0,{name:"BDropdown",directives:{trapFocus:te},mixins:[function(e,t){var i=1<arguments.length&&void 0!==t?t:0,s={provide:function(){return o({},"b"+e,this)}};return a(i,1)&&(s.data=function(){return{childItems:[]}},s.methods={_registerItem:function(e){this.childItems.push(e)},_unregisterItem:function(t){this.childItems=this.childItems.filter(function(e){return e!==t})}},a(i,3)&&(s.watch={childItems:function(r){var l,c;0<r.length&&this.$scopedSlots.default&&(l=r[0].$vnode.tag,c=0,function s(e){var t=!0,i=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)!function(){var e,t,i=a.value;i.tag===l?(e=r.find(function(e){return e.$vnode===i}))&&(e.index=c++):i.tag&&(t=i.componentInstance?i.componentInstance.$scopedSlots.default?i.componentInstance.$scopedSlots.default():i.componentInstance.$children:i.children,Array.isArray(t)&&0<t.length&&s(t.map(function(e){return e.$vnode})))}()}catch(e){i=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(i)throw n}}return!1}(this.$scopedSlots.default()))}},s.computed={sortedItems:function(){return this.childItems.slice().sort(function(e,t){return e.index-t.index})}})),s}("dropdown")],props:{value:{type:[String,Number,Boolean,Object,Array,Function],default:null},disabled:Boolean,inline:Boolean,scrollable:Boolean,maxHeight:{type:[String,Number],default:200},position:{type:String,validator:function(e){return-1<["is-top-right","is-top-left","is-bottom-left","is-bottom-right"].indexOf(e)}},triggers:{type:Array,default:function(){return["click"]}},mobileModal:{type:Boolean,default:function(){return F.defaultDropdownMobileModal}},ariaRole:{type:String,validator:function(e){return-1<["menu","list","dialog"].indexOf(e)},default:null},animation:{type:String,default:"fade"},multiple:Boolean,trapFocus:{type:Boolean,default:function(){return F.defaultTrapFocus}},closeOnClick:{type:Boolean,default:!0},canClose:{type:[Array,Boolean],default:!0},expanded:Boolean,appendToBody:Boolean,appendToBodyCopyParent:Boolean},data:function(){return{selected:this.value,style:{},isActive:!1,isHoverable:!1,_bodyEl:void 0}},computed:{rootClasses:function(){return[this.position,{"is-disabled":this.disabled,"is-hoverable":this.hoverable,"is-inline":this.inline,"is-active":this.isActive||this.inline,"is-mobile-modal":this.isMobileModal,"is-expanded":this.expanded}]},isMobileModal:function(){return this.mobileModal&&!this.inline},cancelOptions:function(){return"boolean"==typeof this.canClose?this.canClose?ie:[]:this.canClose},contentStyle:function(){return{maxHeight:this.scrollable?w(this.maxHeight):null,overflow:this.scrollable?"auto":null}},hoverable:function(){return 0<=this.triggers.indexOf("hover")}},watch:{value:function(e){this.selected=e},isActive:function(e){var t=this;this.$emit("active-change",e),this.appendToBody&&this.$nextTick(function(){t.updateAppendToBody()})}},methods:{selectItem:function(e){var t;this.multiple?(this.selected?-1===(t=this.selected.indexOf(e))?this.selected.push(e):this.selected.splice(t,1):this.selected=[e],this.$emit("change",this.selected)):this.selected!==e&&(this.selected=e,this.$emit("change",this.selected)),this.$emit("input",this.selected),this.multiple||(this.isActive=!this.closeOnClick,this.hoverable&&this.closeOnClick&&(this.isHoverable=!1))},isInWhiteList:function(e){if(e===this.$refs.dropdownMenu)return!0;if(e===this.$refs.trigger)return!0;if(void 0!==this.$refs.dropdownMenu){var t=this.$refs.dropdownMenu.querySelectorAll("*"),i=!0,s=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){if(e===a.value)return!0}}catch(e){s=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}}if(void 0!==this.$refs.trigger){var r=this.$refs.trigger.querySelectorAll("*"),l=!0,c=!1,d=void 0;try{for(var u,p=r[Symbol.iterator]();!(l=(u=p.next()).done);l=!0){if(e===u.value)return!0}}catch(e){c=!0,d=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw d}}}return!1},clickedOutside:function(e){var t;this.cancelOptions.indexOf("outside")<0||this.inline||(t=C(this)?e.composedPath()[0]:e.target,this.isInWhiteList(t)||(this.isActive=!1))},keyPress:function(e){var t=e.key;if(this.isActive&&("Escape"===t||"Esc"===t)){if(this.cancelOptions.indexOf("escape")<0)return;this.isActive=!1}},onClick:function(){this.triggers.indexOf("click")<0||this.toggle()},onContextMenu:function(){this.triggers.indexOf("contextmenu")<0||this.toggle()},onHover:function(){this.triggers.indexOf("hover")<0||(this.isHoverable=!0)},onFocus:function(){this.triggers.indexOf("focus")<0||this.toggle()},toggle:function(){var t=this;this.disabled||(this.isActive?this.isActive=!this.isActive:this.$nextTick(function(){var e=!t.isActive;t.isActive=e,setTimeout(function(){return t.isActive=e})}))},updateAppendToBody:function(){var i,e,t,s,n,a,o=this.$refs.dropdownMenu,r=this.$refs.trigger;o&&r&&((i=this.$data._bodyEl.children[0]).classList.forEach(function(e){return i.classList.remove(e)}),i.classList.add("dropdown"),i.classList.add("dropdown-menu-animation"),this.$vnode&&this.$vnode.data&&this.$vnode.data.staticClass&&i.classList.add(this.$vnode.data.staticClass),this.rootClasses.forEach(function(e){if(e&&"object"===l(e))for(var t in e)e[t]&&i.classList.add(t)}),this.appendToBodyCopyParent&&(e=this.$refs.dropdown.parentNode,(t=this.$data._bodyEl).classList.forEach(function(e){return t.classList.remove(e)}),e.classList.forEach(function(e){t.classList.add(e)})),n=(s=r.getBoundingClientRect()).top+window.scrollY,a=s.left+window.scrollX,!this.position||0<=this.position.indexOf("bottom")?n+=r.clientHeight:n-=o.clientHeight,this.position&&0<=this.position.indexOf("left")&&(a-=o.clientWidth-r.clientWidth),this.style={position:"absolute",top:"".concat(n,"px"),left:"".concat(a,"px"),zIndex:"99"})}},mounted:function(){this.appendToBody&&(this.$data._bodyEl=g(this.$refs.dropdownMenu),this.updateAppendToBody())},created:function(){"undefined"!=typeof window&&(document.addEventListener("click",this.clickedOutside),document.addEventListener("keyup",this.keyPress))},beforeDestroy:function(){"undefined"!=typeof window&&(document.removeEventListener("click",this.clickedOutside),document.removeEventListener("keyup",this.keyPress)),this.appendToBody&&v(this.$data._bodyEl)}},void 0,!1,void 0,void 0,void 0),ne=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.separator?i("hr",{staticClass:"dropdown-divider"}):e.custom||e.hasLink?i("div",{class:e.itemClasses,attrs:{role:e.ariaRoleItem,tabindex:e.isFocusable?0:null},on:{click:e.selectItem}},[e._t("default")],2):i("a",{staticClass:"dropdown-item",class:e.anchorClasses,attrs:{role:e.ariaRoleItem,tabindex:e.isFocusable?0:null},on:{click:e.selectItem}},[e._t("default")],2)},staticRenderFns:[]},void 0,{name:"BDropdownItem",mixins:[H("dropdown")],props:{value:{type:[String,Number,Boolean,Object,Array,Function],default:null},separator:Boolean,disabled:Boolean,custom:Boolean,focusable:{type:Boolean,default:!0},paddingless:Boolean,hasLink:Boolean,ariaRole:{type:String,default:""}},computed:{anchorClasses:function(){return{"is-disabled":this.parent.disabled||this.disabled,"is-paddingless":this.paddingless,"is-active":this.isActive}},itemClasses:function(){return{"dropdown-item":!this.hasLink,"is-disabled":this.disabled,"is-paddingless":this.paddingless,"is-active":this.isActive,"has-link":this.hasLink}},ariaRoleItem:function(){return"menuitem"===this.ariaRole||"listitem"===this.ariaRole?this.ariaRole:null},isClickable:function(){return!(this.parent.disabled||this.separator||this.disabled||this.custom)},isActive:function(){return null!==this.parent.selected&&(this.parent.multiple?0<=this.parent.selected.indexOf(this.value):this.value===this.parent.selected)},isFocusable:function(){return!this.hasLink&&this.focusable}},methods:{selectItem:function(){this.isClickable&&(this.parent.selectItem(this.value),this.$emit("click"))}}},void 0,!1,void 0,void 0,void 0),ae=E({},void 0,{name:"BFieldBody",props:{message:{type:[String,Array]},type:{type:[String,Object]}},render:function(i){var s=this,n=!0;return i("div",{attrs:{class:"field-body"}},this.$slots.default.map(function(e){return e.tag?(n&&(t=s.message,n=!1),i("b-field",{attrs:{type:s.type,message:t}},[e])):e;var t}))}},void 0,void 0,void 0,void 0,void 0),oe=E({render:function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"field",class:i.rootClasses},[i.horizontal?s("div",{staticClass:"field-label",class:[i.customClass,i.fieldLabelSize]},[i.hasLabel?s("label",{staticClass:"label",class:i.customClass,attrs:{for:i.labelFor}},[i.$slots.label?i._t("label"):[i._v(i._s(i.label))]],2):i._e()]):[i.hasLabel?s("label",{staticClass:"label",class:i.customClass,attrs:{for:i.labelFor}},[i.$slots.label?i._t("label"):[i._v(i._s(i.label))]],2):i._e()],i.horizontal?s("b-field-body",{attrs:{message:i.newMessage?i.formattedMessage:"",type:i.newType}},[i._t("default")],2):i.hasInnerField?s("div",{staticClass:"field-body"},[s("b-field",{class:i.innerFieldClasses,attrs:{addons:!1,type:i.newType}},[i._t("default")],2)],1):[i._t("default")],i.hasMessage&&!i.horizontal?s("p",{staticClass:"help",class:i.newType},[i.$slots.message?i._t("message"):[i._l(i.formattedMessage,function(e,t){return[i._v(" "+i._s(e)+" "),t+1<i.formattedMessage.length?s("br",{key:t}):i._e()]})]],2):i._e()],2)},staticRenderFns:[]},void 0,{name:"BField",components:o({},ae.name,ae),provide:function(){return{BField:this}},inject:{parent:{from:"BField",default:!1}},props:{type:[String,Object],label:String,labelFor:String,message:[String,Array,Object],grouped:Boolean,groupMultiline:Boolean,position:String,expanded:Boolean,horizontal:Boolean,addons:{type:Boolean,default:!0},customClass:String,labelPosition:{type:String,default:function(){return F.defaultFieldLabelPosition}}},data:function(){return{newType:this.type,newMessage:this.message,fieldLabelSize:null,_isField:!0}},computed:{rootClasses:function(){return[{"is-expanded":this.expanded,"is-horizontal":this.horizontal,"is-floating-in-label":this.hasLabel&&!this.horizontal&&"inside"===this.labelPosition,"is-floating-label":this.hasLabel&&!this.horizontal&&"on-border"===this.labelPosition},this.numberInputClasses]},innerFieldClasses:function(){return[this.fieldType(),this.newPosition,{"is-grouped-multiline":this.groupMultiline}]},hasInnerField:function(){return this.grouped||this.groupMultiline||this.hasAddons()},newPosition:function(){if(void 0!==this.position){var e=this.position.split("-");if(!(e.length<1)){var t=this.grouped?"is-grouped-":"has-addons-";return this.position?t+e[1]:void 0}}},formattedMessage:function(){if(this.parent&&this.parent.hasInnerField)return"";if("string"==typeof this.newMessage)return[this.newMessage];var i=[];if(Array.isArray(this.newMessage))this.newMessage.forEach(function(e){if("string"==typeof e)i.push(e);else for(var t in e)e[t]&&i.push(t)});else for(var e in this.newMessage)this.newMessage[e]&&i.push(e);return i.filter(function(e){if(e)return e})},hasLabel:function(){return this.label||this.$slots.label},hasMessage:function(){return(!this.parent||!this.parent.hasInnerField)&&this.newMessage||this.$slots.message},numberInputClasses:function(){if(this.$slots.default){var e=this.$slots.default.filter(function(e){return e.tag&&0<=e.tag.toLowerCase().indexOf("numberinput")})[0];if(e){var t=["has-numberinput"],i=e.componentOptions.propsData.controlsPosition,s=e.componentOptions.propsData.size;return i&&t.push("has-numberinput-".concat(i)),s&&t.push("has-numberinput-".concat(s)),t}}return null}},watch:{type:function(e){this.newType=e},message:function(e){this.newMessage=e},newMessage:function(e){this.parent&&this.parent.hasInnerField&&(this.parent.type||(this.parent.newType=this.newType),this.parent.newMessage=e)}},methods:{fieldType:function(){return this.grouped?"is-grouped":this.hasAddons()?"has-addons":void 0},hasAddons:function(){var e=0;return this.$slots.default&&(e=this.$slots.default.reduce(function(e,t){return t.tag?e+1:e},0)),1<e&&this.addons&&!this.horizontal}},mounted:function(){this.horizontal&&0<this.$el.querySelectorAll(".input, .select, .button, .textarea, .b-slider").length&&(this.fieldLabelSize="is-normal")}},void 0,!1,void 0,void 0,void 0),re=E({render:function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"b-clockpicker-face",on:{mousedown:i.onMouseDown,mouseup:i.onMouseUp,mousemove:i.onDragMove,touchstart:i.onMouseDown,touchend:i.onMouseUp,touchmove:i.onDragMove}},[s("div",{ref:"clock",staticClass:"b-clockpicker-face-outer-ring"},[s("div",{staticClass:"b-clockpicker-face-hand",style:i.handStyle}),i._l(i.faceNumbers,function(e,t){return s("span",{key:t,staticClass:"b-clockpicker-face-number",class:i.getFaceNumberClasses(e),style:{transform:i.getNumberTranslate(e.value)}},[s("span",[i._v(i._s(e.label))])])})],2)])},staticRenderFns:[]},void 0,{name:"BClockpickerFace",props:{pickerSize:Number,min:Number,max:Number,double:Boolean,value:Number,faceNumbers:Array,disabledValues:Function},data:function(){return{isDragging:!1,inputValue:this.value,prevAngle:720}},computed:{count:function(){return this.max-this.min+1},countPerRing:function(){return this.double?this.count/2:this.count},radius:function(){return this.pickerSize/2},outerRadius:function(){return this.radius-5-20},innerRadius:function(){return Math.max(.6*this.outerRadius,this.outerRadius-5-40)},degreesPerUnit:function(){return 360/this.countPerRing},degrees:function(){return this.degreesPerUnit*Math.PI/180},handRotateAngle:function(){for(var e=this.prevAngle;e<0;)e+=360;var t=this.calcHandAngle(this.displayedValue),i=this.shortestDistanceDegrees(e,t);return this.prevAngle+i},handScale:function(){return this.calcHandScale(this.displayedValue)},handStyle:function(){return{transform:"rotate(".concat(this.handRotateAngle,"deg) scaleY(").concat(this.handScale,")"),transition:".3s cubic-bezier(.25,.8,.50,1)"}},displayedValue:function(){return null==this.inputValue?this.min:this.inputValue}},watch:{value:function(e){e!==this.inputValue&&(this.prevAngle=this.handRotateAngle),this.inputValue=e}},methods:{isDisabled:function(e){return this.disabledValues&&this.disabledValues(e)},euclidean:function(e,t){var i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)},shortestDistanceDegrees:function(e,t){var i=(t-e)%360,s=180-Math.abs(Math.abs(i)-180);return(360+i)%360<180?s:-1*s},coordToAngle:function(e,t){var i=2*Math.atan2(t.y-e.y-this.euclidean(e,t),t.x-e.x);return Math.abs(180*i/Math.PI)},getNumberTranslate:function(e){var t=this.getNumberCoords(e),i=t.x,s=t.y;return"translate(".concat(i,"px, ").concat(s,"px)")},getNumberCoords:function(e){var t=this.isInnerRing(e)?this.innerRadius:this.outerRadius;return{x:Math.round(t*Math.sin((e-this.min)*this.degrees)),y:Math.round(-t*Math.cos((e-this.min)*this.degrees))}},getFaceNumberClasses:function(e){return{active:e.value===this.displayedValue,disabled:this.isDisabled(e.value)}},isInnerRing:function(e){return this.double&&e-this.min>=this.countPerRing},calcHandAngle:function(e){var t=this.degreesPerUnit*(e-this.min);return this.isInnerRing(e)&&(t-=360),t},calcHandScale:function(e){return this.isInnerRing(e)?this.innerRadius/this.outerRadius:1},onMouseDown:function(e){e.preventDefault(),this.isDragging=!0,this.onDragMove(e)},onMouseUp:function(){this.isDragging=!1,this.isDisabled(this.inputValue)||this.$emit("change",this.inputValue)},onDragMove:function(e){var t,i,s,n,a,o,r,l,c,d;e.preventDefault(),!this.isDragging&&"click"!==e.type||(i=(t=this.$refs.clock.getBoundingClientRect()).width,s=t.top,n=t.left,o={x:i/2,y:-i/2},r={x:(a="touches"in e?e.touches[0]:e).clientX-n,y:s-a.clientY},l=Math.round(this.coordToAngle(o,r)+360)%360,c=this.double&&this.euclidean(o,r)<(this.outerRadius+this.innerRadius)/2-16,d=Math.round(l/this.degreesPerUnit)+this.min+(c?this.countPerRing:0),l>=360-this.degreesPerUnit/2&&(d=c?this.max:this.min),this.update(d))},update:function(e){this.inputValue===e||this.isDisabled(e)||(this.prevAngle=this.handRotateAngle,this.inputValue=e,this.$emit("input",e))}}},void 0,!1,void 0,void 0,void 0),le=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-clockpicker control",class:[t.size,t.type,{"is-expanded":t.expanded}]},[!t.isMobile||t.inline?i("b-dropdown",{ref:"dropdown",attrs:{position:t.position,disabled:t.disabled,inline:t.inline,"append-to-body":t.appendToBody,"append-to-body-copy-parent":""},on:{"active-change":t.onActiveChange},scopedSlots:t._u([t.inline?null:{key:"trigger",fn:function(){return[t._t("trigger",[i("b-input",t._b({ref:"input",attrs:{slot:"trigger",autocomplete:"off",value:t.formatValue(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,loading:t.loading,disabled:t.disabled,readonly:!t.editable,rounded:t.rounded,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus,blur:function(){t.onBlur()&&t.checkHtml5Validity()}},nativeOn:{click:function(e){return e.stopPropagation(),t.toggle(!0)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toggle(!0)},change:function(e){return t.onChange(e.target.value)}},slot:"trigger"},"b-input",t.$attrs,!1))])]},proxy:!0}],null,!0)},[i("div",{staticClass:"card",attrs:{disabled:t.disabled,custom:""}},[t.inline?i("header",{staticClass:"card-header"},[i("div",{staticClass:"b-clockpicker-header card-header-title"},[i("div",{staticClass:"b-clockpicker-time"},[i("span",{staticClass:"b-clockpicker-btn",class:{active:t.isSelectingHour},on:{click:function(){t.isSelectingHour=!0}}},[t._v(t._s(t.hoursDisplay))]),i("span",[t._v(t._s(t.hourLiteral))]),i("span",{staticClass:"b-clockpicker-btn",class:{active:!t.isSelectingHour},on:{click:function(){t.isSelectingHour=!1}}},[t._v(t._s(t.minutesDisplay))])]),t.isHourFormat24?t._e():i("div",{staticClass:"b-clockpicker-period"},[i("div",{staticClass:"b-clockpicker-btn",class:{active:t.meridienSelected===t.amString||t.meridienSelected===t.AM},on:{click:function(){return t.onMeridienClick(t.amString)}}},[t._v(t._s(t.amString))]),i("div",{staticClass:"b-clockpicker-btn",class:{active:t.meridienSelected===t.pmString||t.meridienSelected===t.PM},on:{click:function(){return t.onMeridienClick(t.pmString)}}},[t._v(t._s(t.pmString))])])])]):t._e(),i("div",{staticClass:"card-content"},[i("div",{staticClass:"b-clockpicker-body",style:{width:t.faceSize+"px",height:t.faceSize+"px"}},[t.inline?t._e():i("div",{staticClass:"b-clockpicker-time"},[i("div",{staticClass:"b-clockpicker-btn",class:{active:t.isSelectingHour},on:{click:function(){t.isSelectingHour=!0}}},[t._v(t._s(t.hoursLabel))]),i("span",{staticClass:"b-clockpicker-btn",class:{active:!t.isSelectingHour},on:{click:function(){t.isSelectingHour=!1}}},[t._v(t._s(t.minutesLabel))])]),t.isHourFormat24||t.inline?t._e():i("div",{staticClass:"b-clockpicker-period"},[i("div",{staticClass:"b-clockpicker-btn",class:{active:t.meridienSelected===t.amString||t.meridienSelected===t.AM},on:{click:function(){return t.onMeridienClick(t.amString)}}},[t._v(t._s(t.amString))]),i("div",{staticClass:"b-clockpicker-btn",class:{active:t.meridienSelected===t.pmString||t.meridienSelected===t.PM},on:{click:function(){return t.onMeridienClick(t.pmString)}}},[t._v(t._s(t.pmString))])]),i("b-clockpicker-face",{attrs:{"picker-size":t.faceSize,min:t.minFaceValue,max:t.maxFaceValue,"face-numbers":t.isSelectingHour?t.hours:t.minutes,"disabled-values":t.faceDisabledValues,double:t.isSelectingHour&&t.isHourFormat24,value:t.isSelectingHour?t.hoursSelected:t.minutesSelected},on:{input:t.onClockInput,change:t.onClockChange}})],1)]),void 0!==t.$slots.default&&t.$slots.default.length?i("footer",{staticClass:"b-clockpicker-footer card-footer"},[t._t("default")],2):t._e()])]):i("b-input",t._b({ref:"input",attrs:{type:"time",autocomplete:"off",value:t.formatHHMMSS(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,loading:t.loading,max:t.formatHHMMSS(t.maxTime),min:t.formatHHMMSS(t.minTime),disabled:t.disabled,readonly:!1,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus,blur:function(){t.onBlur()&&t.checkHtml5Validity()}},nativeOn:{click:function(e){return e.stopPropagation(),t.toggle(!0)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toggle(!0)},change:function(e){return t.onChangeNativePicker(e)}}},"b-input",t.$attrs,!1))],1)},staticRenderFns:[]},void 0,{name:"BClockpicker",components:(o(G={},re.name,re),o(G,I.name,I),o(G,oe.name,oe),o(G,R.name,R),o(G,se.name,se),o(G,ne.name,ne),G),mixins:[ee],props:{pickerSize:{type:Number,default:290},incrementMinutes:{type:Number,default:5},autoSwitch:{type:Boolean,default:!0},type:{type:String,default:"is-primary"},hoursLabel:{type:String,default:function(){return F.defaultClockpickerHoursLabel||"Hours"}},minutesLabel:{type:String,default:function(){return F.defaultClockpickerMinutesLabel||"Min"}}},data:function(){return{isSelectingHour:!0,isDragging:!1,_isClockpicker:!0}},computed:{hoursDisplay:function(){if(null==this.hoursSelected)return"--";if(this.isHourFormat24)return this.pad(this.hoursSelected);var e=this.hoursSelected;return this.meridienSelected!==this.pmString&&this.meridienSelected!==this.PM||(e-=12),0===e&&(e=12),e},minutesDisplay:function(){return null==this.minutesSelected?"--":this.pad(this.minutesSelected)},minFaceValue:function(){return!this.isSelectingHour||this.isHourFormat24||this.meridienSelected!==this.pmString&&this.meridienSelected!==this.PM?0:12},maxFaceValue:function(){return this.isSelectingHour?this.isHourFormat24||this.meridienSelected!==this.amString&&this.meridienSelected!==this.AM?23:11:59},faceSize:function(){return this.pickerSize-24},faceDisabledValues:function(){return this.isSelectingHour?this.isHourDisabled:this.isMinuteDisabled}},methods:{onClockInput:function(e){this.isSelectingHour?(this.hoursSelected=e,this.onHoursChange(e)):(this.minutesSelected=e,this.onMinutesChange(e))},onClockChange:function(){this.autoSwitch&&this.isSelectingHour&&(this.isSelectingHour=!this.isSelectingHour)},onMeridienClick:function(e){this.meridienSelected!==e&&(this.meridienSelected=e,this.onMeridienChange(e))}}},void 0,!1,void 0,void 0,void 0),ce={install:function(e){B(e,le)}};P(ce);var de,ue,pe=E({render:function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"control",class:{"is-expanded":i.expanded,"has-icons-left":i.icon}},[t("span",{staticClass:"select",class:i.spanClasses},[t("select",i._b({directives:[{name:"model",rawName:"v-model",value:i.computedValue,expression:"computedValue"}],ref:"select",attrs:{multiple:i.multiple,size:i.nativeSize},on:{blur:function(e){i.$emit("blur",e)&&i.checkHtml5Validity()},focus:function(e){return i.$emit("focus",e)},change:function(e){var t=Array.prototype.filter.call(e.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});i.computedValue=e.target.multiple?t:t[0]}}},"select",i.$attrs,!1),[i.placeholder?[null==i.computedValue?t("option",{attrs:{disabled:"",hidden:""},domProps:{value:null}},[i._v(" "+i._s(i.placeholder)+" ")]):i._e()]:i._e(),i._t("default")],2)]),i.icon?t("b-icon",{staticClass:"is-left",attrs:{icon:i.icon,pack:i.iconPack,size:i.iconSize}}):i._e()],1)},staticRenderFns:[]},void 0,{name:"BSelect",components:o({},R.name,R),mixins:[O],inheritAttrs:!1,props:{value:{type:[String,Number,Boolean,Object,Array,Function],default:null},placeholder:String,multiple:Boolean,nativeSize:[String,Number]},data:function(){return{selected:this.value,_elementRef:"select"}},computed:{computedValue:{get:function(){return this.selected},set:function(e){this.selected=e,this.$emit("input",e),this.isValid||this.checkHtml5Validity()}},spanClasses:function(){return[this.size,this.statusType,{"is-fullwidth":this.expanded,"is-loading":this.loading,"is-multiple":this.multiple,"is-rounded":this.rounded,"is-empty":null===this.selected}]}},watch:{value:function(e){this.selected=e,this.isValid||this.checkHtml5Validity()}}},void 0,!1,void 0,void 0,void 0),he=E({render:function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"datepicker-row"},[i.showWeekNumber?s("a",{staticClass:"datepicker-cell is-week-number"},[s("span",[i._v(i._s(i.getWeekNumber(i.week[6])))])]):i._e(),i._l(i.week,function(t,e){return[i.selectableDate(t)&&!i.disabled?s("a",{key:e,ref:"day-"+t.getDate(),refInFor:!0,staticClass:"datepicker-cell",class:[i.classObject(t),{"has-event":i.eventsDateMatch(t)},i.indicators],attrs:{role:"button",href:"#",disabled:i.disabled,tabindex:i.day===t.getDate()?null:-1},on:{click:function(e){return e.preventDefault(),i.emitChosenDate(t)},mouseenter:function(){return i.setRangeHoverEndDate(t)},keydown:function(e){return e.preventDefault(),i.manageKeydown(e,t)}}},[s("span",[i._v(i._s(t.getDate()))]),i.eventsDateMatch(t)?s("div",{staticClass:"events"},i._l(i.eventsDateMatch(t),function(e,t){return s("div",{key:t,staticClass:"event",class:e.type})}),0):i._e()]):s("div",{key:e,staticClass:"datepicker-cell",class:i.classObject(t)},[s("span",[i._v(i._s(t.getDate()))])])]})],2)},staticRenderFns:[]},void 0,{name:"BDatepickerTableRow",props:{selectedDate:{type:[Date,Array]},hoveredDateRange:Array,day:{type:Number},week:{type:Array,required:!0},month:{type:Number,required:!0},minDate:Date,maxDate:Date,disabled:Boolean,unselectableDates:Array,unselectableDaysOfWeek:Array,selectableDates:Array,events:Array,indicators:String,dateCreator:Function,nearbyMonthDays:Boolean,nearbySelectableMonthDays:Boolean,showWeekNumber:{type:Boolean,default:function(){return!1}},range:Boolean,multiple:Boolean,rulesForFirstWeek:{type:Number,default:function(){return 4}},firstDayOfWeek:Number},watch:{day:function(e){var t=this,i="day-".concat(e);this.$nextTick(function(){t.$refs[i]&&0<t.$refs[i].length&&t.$refs[i][0]&&t.$refs[i][0].focus()})}},methods:{firstWeekOffset:function(e,t,i){var s=7+t-i;return s-(7+new Date(e,0,s).getDay()-t)%7-1},daysInYear:function(e){return this.isLeapYear(e)?366:365},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getSetDayOfYear:function(e){return Math.round((e-new Date(e.getFullYear(),0,1))/864e5)+1},weeksInYear:function(e,t,i){var s=this.firstWeekOffset(e,t,i),n=this.firstWeekOffset(e+1,t,i);return(this.daysInYear(e)-s+n)/7},getWeekNumber:function(e){var t,i,s=this.firstDayOfWeek,n=this.rulesForFirstWeek,a=this.firstWeekOffset(e.getFullYear(),s,n),o=Math.floor((this.getSetDayOfYear(e)-a-1)/7)+1;return o<1?(i=e.getFullYear()-1,t=o+this.weeksInYear(i,s,n)):o>this.weeksInYear(e.getFullYear(),s,n)?(t=o-this.weeksInYear(e.getFullYear(),s,n),i=e.getFullYear()+1):(i=e.getFullYear(),t=o),t},selectableDate:function(e){var t=[];if(this.minDate&&t.push(e>=this.minDate),this.maxDate&&t.push(e<=this.maxDate),this.nearbyMonthDays&&!this.nearbySelectableMonthDays&&t.push(e.getMonth()===this.month),this.selectableDates)for(var i=0;i<this.selectableDates.length;i++){var s=this.selectableDates[i];if(e.getDate()===s.getDate()&&e.getFullYear()===s.getFullYear()&&e.getMonth()===s.getMonth())return!0;t.push(!1)}if(this.unselectableDates)for(var n=0;n<this.unselectableDates.length;n++){var a=this.unselectableDates[n];t.push(e.getDate()!==a.getDate()||e.getFullYear()!==a.getFullYear()||e.getMonth()!==a.getMonth())}if(this.unselectableDaysOfWeek)for(var o=0;o<this.unselectableDaysOfWeek.length;o++){var r=this.unselectableDaysOfWeek[o];t.push(e.getDay()!==r)}return t.indexOf(!1)<0},emitChosenDate:function(e){this.disabled||this.selectableDate(e)&&this.$emit("select",e)},eventsDateMatch:function(e){if(!this.events||!this.events.length)return!1;for(var t=[],i=0;i<this.events.length;i++)this.events[i].date.getDay()===e.getDay()&&t.push(this.events[i]);return!!t.length&&t},classObject:function(e){function t(t,e,i){return!(!t||!e||i)&&(Array.isArray(e)?e.some(function(e){return t.getDate()===e.getDate()&&t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()}):t.getDate()===e.getDate()&&t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth())}function i(e,t,i){return!(!Array.isArray(t)||i)&&(e>t[0]&&e<t[1])}return{"is-selected":t(e,this.selectedDate)||i(e,this.selectedDate,this.multiple),"is-first-selected":t(e,Array.isArray(this.selectedDate)&&this.selectedDate[0],this.multiple),"is-within-selected":i(e,this.selectedDate,this.multiple),"is-last-selected":t(e,Array.isArray(this.selectedDate)&&this.selectedDate[1],this.multiple),"is-within-hovered-range":this.hoveredDateRange&&2===this.hoveredDateRange.length&&(t(e,this.hoveredDateRange)||i(e,this.hoveredDateRange)),"is-first-hovered":t(e,Array.isArray(this.hoveredDateRange)&&this.hoveredDateRange[0]),"is-within-hovered":i(e,this.hoveredDateRange),"is-last-hovered":t(e,Array.isArray(this.hoveredDateRange)&&this.hoveredDateRange[1]),"is-today":t(e,this.dateCreator()),"is-selectable":this.selectableDate(e)&&!this.disabled,"is-unselectable":!this.selectableDate(e)||this.disabled,"is-invisible":!this.nearbyMonthDays&&e.getMonth()!==this.month,"is-nearby":this.nearbySelectableMonthDays&&e.getMonth()!==this.month}},setRangeHoverEndDate:function(e){this.range&&this.$emit("rangeHoverEndDate",e)},manageKeydown:function(e,t){switch(e.key){case" ":case"Space":case"Spacebar":case"Enter":this.emitChosenDate(t);break;case"ArrowLeft":case"Left":this.changeFocus(t,-1);break;case"ArrowRight":case"Right":this.changeFocus(t,1);break;case"ArrowUp":case"Up":this.changeFocus(t,-7);break;case"ArrowDown":case"Down":this.changeFocus(t,7)}},changeFocus:function(e,t){var i=e;i.setDate(e.getDate()+t),this.$emit("change-focus",i)}}},void 0,!1,void 0,void 0,void 0),fe=E({render:function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("section",{staticClass:"datepicker-table"},[s("header",{staticClass:"datepicker-header"},i._l(i.visibleDayNames,function(e,t){return s("div",{key:t,staticClass:"datepicker-cell"},[s("span",[i._v(i._s(e))])])}),0),s("div",{staticClass:"datepicker-body",class:{"has-events":i.hasEvents}},i._l(i.weeksInThisMonth,function(e,t){return s("b-datepicker-table-row",{key:t,attrs:{"selected-date":i.value,day:i.focused.day,week:e,month:i.focused.month,"min-date":i.minDate,"max-date":i.maxDate,disabled:i.disabled,"unselectable-dates":i.unselectableDates,"unselectable-days-of-week":i.unselectableDaysOfWeek,"selectable-dates":i.selectableDates,events:i.eventsInThisWeek(e),indicators:i.indicators,"date-creator":i.dateCreator,"nearby-month-days":i.nearbyMonthDays,"nearby-selectable-month-days":i.nearbySelectableMonthDays,"show-week-number":i.showWeekNumber,"first-day-of-week":i.firstDayOfWeek,"rules-for-first-week":i.rulesForFirstWeek,range:i.range,"hovered-date-range":i.hoveredDateRange,multiple:i.multiple},on:{select:i.updateSelectedDate,rangeHoverEndDate:i.setRangeHoverEndDate,"change-focus":i.changeFocus}})}),1)])},staticRenderFns:[]},void 0,{name:"BDatepickerTable",components:o({},he.name,he),props:{value:{type:[Date,Array]},dayNames:Array,monthNames:Array,firstDayOfWeek:Number,events:Array,indicators:String,minDate:Date,maxDate:Date,focused:Object,disabled:Boolean,dateCreator:Function,unselectableDates:Array,unselectableDaysOfWeek:Array,selectableDates:Array,nearbyMonthDays:Boolean,nearbySelectableMonthDays:Boolean,showWeekNumber:{type:Boolean,default:function(){return!1}},rulesForFirstWeek:{type:Number,default:function(){return 4}},range:Boolean,multiple:Boolean},data:function(){return{selectedBeginDate:void 0,selectedEndDate:void 0,hoveredEndDate:void 0,multipleSelectedDates:this.multiple&&this.value?this.value:[]}},computed:{visibleDayNames:function(){for(var e=[],t=this.firstDayOfWeek;e.length<this.dayNames.length;){var i=this.dayNames[t%this.dayNames.length];e.push(i),t++}return this.showWeekNumber&&e.unshift(""),e},hasEvents:function(){return this.events&&this.events.length},eventsInThisMonth:function(){if(!this.events)return[];for(var e=[],t=0;t<this.events.length;t++){var i=this.events[t];i.hasOwnProperty("date")||(i={date:i}),i.hasOwnProperty("type")||(i.type="is-primary"),i.date.getMonth()===this.focused.month&&i.date.getFullYear()===this.focused.year&&e.push(i)}return e},weeksInThisMonth:function(){this.validateFocusedDay();for(var e=this.focused.month,t=this.focused.year,i=[],s=1;i.length<6;){var n=this.weekBuilder(s,e,t);i.push(n),s+=7}return i},hoveredDateRange:function(){return this.range&&isNaN(this.selectedEndDate)?this.hoveredEndDate<this.selectedBeginDate?[this.hoveredEndDate,this.selectedBeginDate].filter(S):[this.selectedBeginDate,this.hoveredEndDate].filter(S):[]}},methods:{updateSelectedDate:function(e){this.range||this.multiple?this.range?this.handleSelectRangeDate(e):this.multiple&&this.handleSelectMultipleDates(e):this.$emit("input",e)},handleSelectRangeDate:function(e){this.selectedBeginDate&&this.selectedEndDate?(this.selectedBeginDate=e,this.selectedEndDate=void 0,this.$emit("range-start",e)):this.selectedBeginDate&&!this.selectedEndDate?(this.selectedBeginDate>e?(this.selectedEndDate=this.selectedBeginDate,this.selectedBeginDate=e):this.selectedEndDate=e,this.$emit("range-end",e),this.$emit("input",[this.selectedBeginDate,this.selectedEndDate])):(this.selectedBeginDate=e,this.$emit("range-start",e))},handleSelectMultipleDates:function(t){this.multipleSelectedDates.filter(function(e){return e.getDate()===t.getDate()&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}).length?this.multipleSelectedDates=this.multipleSelectedDates.filter(function(e){return e.getDate()!==t.getDate()||e.getFullYear()!==t.getFullYear()||e.getMonth()!==t.getMonth()}):this.multipleSelectedDates.push(t),this.$emit("input",this.multipleSelectedDates)},weekBuilder:function(e,t,i){for(var s=new Date(i,t),n=[],a=new Date(i,t,e).getDay(),o=a>=this.firstDayOfWeek?a-this.firstDayOfWeek:7-this.firstDayOfWeek+a,r=1,l=0;l<o;l++)n.unshift(new Date(s.getFullYear(),s.getMonth(),e-r)),r++;n.push(new Date(i,t,e));for(var c=1;n.length<7;)n.push(new Date(i,t,e+c)),c++;return n},validateFocusedDay:function(){var e=new Date(this.focused.year,this.focused.month,this.focused.day);if(!this.selectableDate(e))for(var t=0,i=new Date(this.focused.year,this.focused.month+1,0).getDate(),s=null;!s&&++t<i;){var n,a=new Date(this.focused.year,this.focused.month,t);this.selectableDate(a)&&(s=e,n={day:a.getDate(),month:a.getMonth(),year:a.getFullYear()},this.$emit("update:focused",n))}},selectableDate:function(e){var t=[];if(this.minDate&&t.push(e>=this.minDate),this.maxDate&&t.push(e<=this.maxDate),this.nearbyMonthDays&&!this.nearbySelectableMonthDays&&t.push(e.getMonth()===this.focused.month),this.selectableDates)for(var i=0;i<this.selectableDates.length;i++){var s=this.selectableDates[i];if(e.getDate()===s.getDate()&&e.getFullYear()===s.getFullYear()&&e.getMonth()===s.getMonth())return!0;t.push(!1)}if(this.unselectableDates)for(var n=0;n<this.unselectableDates.length;n++){var a=this.unselectableDates[n];t.push(e.getDate()!==a.getDate()||e.getFullYear()!==a.getFullYear()||e.getMonth()!==a.getMonth())}if(this.unselectableDaysOfWeek)for(var o=0;o<this.unselectableDaysOfWeek.length;o++){var r=this.unselectableDaysOfWeek[o];t.push(e.getDay()!==r)}return t.indexOf(!1)<0},eventsInThisWeek:function(s){return this.eventsInThisMonth.filter(function(e){var t=new Date(Date.parse(e.date));t.setHours(0,0,0,0);var i=t.getTime();return s.some(function(e){return e.getTime()===i})})},setRangeHoverEndDate:function(e){this.hoveredEndDate=e},changeFocus:function(e){var t={day:e.getDate(),month:e.getMonth(),year:e.getFullYear()};this.$emit("update:focused",t)}}},void 0,!1,void 0,void 0,void 0),me=E({render:function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("section",{staticClass:"datepicker-table"},[s("div",{staticClass:"datepicker-body",class:{"has-events":i.hasEvents}},[s("div",{staticClass:"datepicker-months"},[i._l(i.monthDates,function(t,e){return[i.selectableDate(t)&&!i.disabled?s("a",{key:e,ref:"month-"+t.getMonth(),refInFor:!0,staticClass:"datepicker-cell",class:[i.classObject(t),{"has-event":i.eventsDateMatch(t)},i.indicators],attrs:{role:"button",href:"#",disabled:i.disabled,tabindex:i.focused.month===t.getMonth()?null:-1},on:{click:function(e){return e.preventDefault(),i.updateSelectedDate(t)},mouseenter:function(){return i.setRangeHoverEndDate(t)},keydown:function(e){return e.preventDefault(),i.manageKeydown(e,t)}}},[i._v(" "+i._s(i.monthNames[t.getMonth()])+" "),i.eventsDateMatch(t)?s("div",{staticClass:"events"},i._l(i.eventsDateMatch(t),function(e,t){return s("div",{key:t,staticClass:"event",class:e.type})}),0):i._e()]):s("div",{key:e,staticClass:"datepicker-cell",class:i.classObject(t)},[i._v(" "+i._s(i.monthNames[t.getMonth()])+" ")])]})],2)])])},staticRenderFns:[]},void 0,{name:"BDatepickerMonth",props:{value:{type:[Date,Array]},monthNames:Array,events:Array,indicators:String,minDate:Date,maxDate:Date,focused:Object,disabled:Boolean,dateCreator:Function,unselectableDates:Array,unselectableDaysOfWeek:Array,selectableDates:Array,range:Boolean,multiple:Boolean},data:function(){return{selectedBeginDate:void 0,selectedEndDate:void 0,hoveredEndDate:void 0,multipleSelectedDates:this.multiple&&this.value?this.value:[]}},computed:{hasEvents:function(){return this.events&&this.events.length},eventsInThisYear:function(){if(!this.events)return[];for(var e=[],t=0;t<this.events.length;t++){var i=this.events[t];i.hasOwnProperty("date")||(i={date:i}),i.hasOwnProperty("type")||(i.type="is-primary"),i.date.getFullYear()===this.focused.year&&e.push(i)}return e},monthDates:function(){for(var e=this.focused.year,t=[],i=0;i<12;i++){var s=new Date(e,i,1);s.setHours(0,0,0,0),t.push(s)}return t},focusedMonth:function(){return this.focused.month},hoveredDateRange:function(){return this.range&&isNaN(this.selectedEndDate)?this.hoveredEndDate<this.selectedBeginDate?[this.hoveredEndDate,this.selectedBeginDate].filter(S):[this.selectedBeginDate,this.hoveredEndDate].filter(S):[]}},watch:{focusedMonth:function(e){var t=this,i="month-".concat(e);this.$refs[i]&&0<this.$refs[i].length&&this.$nextTick(function(){t.$refs[i][0]&&t.$refs[i][0].focus()})}},methods:{selectMultipleDates:function(t){this.multipleSelectedDates.filter(function(e){return e.getDate()===t.getDate()&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}).length?this.multipleSelectedDates=this.multipleSelectedDates.filter(function(e){return e.getDate()!==t.getDate()||e.getFullYear()!==t.getFullYear()||e.getMonth()!==t.getMonth()}):this.multipleSelectedDates.push(t),this.$emit("input",this.multipleSelectedDates)},selectableDate:function(e){var t=[];if(this.minDate&&t.push(e>=this.minDate),this.maxDate&&t.push(e<=this.maxDate),t.push(e.getFullYear()===this.focused.year),this.selectableDates)for(var i=0;i<this.selectableDates.length;i++){var s=this.selectableDates[i];if(e.getFullYear()===s.getFullYear()&&e.getMonth()===s.getMonth())return!0;t.push(!1)}if(this.unselectableDates)for(var n=0;n<this.unselectableDates.length;n++){var a=this.unselectableDates[n];t.push(e.getFullYear()!==a.getFullYear()||e.getMonth()!==a.getMonth())}if(this.unselectableDaysOfWeek)for(var o=0;o<this.unselectableDaysOfWeek.length;o++){var r=this.unselectableDaysOfWeek[o];t.push(e.getDay()!==r)}return t.indexOf(!1)<0},eventsDateMatch:function(e){if(!this.eventsInThisYear.length)return!1;for(var t=[],i=0;i<this.eventsInThisYear.length;i++)this.eventsInThisYear[i].date.getMonth()===e.getMonth()&&t.push(this.events[i]);return!!t.length&&t},classObject:function(e){function t(t,e,i){return!(!t||!e||i)&&(Array.isArray(e)?e.some(function(e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()}):t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth())}function i(e,t,i){return!(!Array.isArray(t)||i)&&(e>t[0]&&e<t[1])}return{"is-selected":t(e,this.value,this.multiple)||i(e,this.value,this.multiple)||(s=e,n=this.multipleSelectedDates,a=this.multiple,!(!Array.isArray(n)||!a)&&n.some(function(e){return s.getDate()===e.getDate()&&s.getFullYear()===e.getFullYear()&&s.getMonth()===e.getMonth()})),"is-first-selected":t(e,Array.isArray(this.value)&&this.value[0],this.multiple),"is-within-selected":i(e,this.value,this.multiple),"is-last-selected":t(e,Array.isArray(this.value)&&this.value[1],this.multiple),"is-within-hovered-range":this.hoveredDateRange&&2===this.hoveredDateRange.length&&(t(e,this.hoveredDateRange)||i(e,this.hoveredDateRange)),"is-first-hovered":t(e,Array.isArray(this.hoveredDateRange)&&this.hoveredDateRange[0]),"is-within-hovered":i(e,this.hoveredDateRange),"is-last-hovered":t(e,Array.isArray(this.hoveredDateRange)&&this.hoveredDateRange[1]),"is-today":t(e,this.dateCreator()),"is-selectable":this.selectableDate(e)&&!this.disabled,"is-unselectable":!this.selectableDate(e)||this.disabled};var s,n,a},manageKeydown:function(e,t){switch(e.key){case" ":case"Space":case"Spacebar":case"Enter":this.updateSelectedDate(t);break;case"ArrowLeft":case"Left":this.changeFocus(t,-1);break;case"ArrowRight":case"Right":this.changeFocus(t,1);break;case"ArrowUp":case"Up":this.changeFocus(t,-3);break;case"ArrowDown":case"Down":this.changeFocus(t,3)}},updateSelectedDate:function(e){this.range||this.multiple?this.range?this.handleSelectRangeDate(e):this.multiple&&this.selectMultipleDates(e):this.emitChosenDate(e)},emitChosenDate:function(e){this.disabled||(this.multiple?this.selectMultipleDates(e):this.selectableDate(e)&&this.$emit("input",e))},handleSelectRangeDate:function(e){this.disabled||(this.selectedBeginDate&&this.selectedEndDate?(this.selectedBeginDate=e,this.selectedEndDate=void 0,this.$emit("range-start",e)):this.selectedBeginDate&&!this.selectedEndDate?(this.selectedBeginDate>e?(this.selectedEndDate=this.selectedBeginDate,this.selectedBeginDate=e):this.selectedEndDate=e,this.$emit("range-end",e),this.$emit("input",[this.selectedBeginDate,this.selectedEndDate])):(this.selectedBeginDate=e,this.$emit("range-start",e)))},setRangeHoverEndDate:function(e){this.range&&(this.hoveredEndDate=e)},changeFocus:function(e,t){var i=e;i.setMonth(e.getMonth()+t),this.$emit("change-focus",i)}}},void 0,!1,void 0,void 0,void 0),ve=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"datepicker control",class:[t.size,{"is-expanded":t.expanded}]},[!t.isMobile||t.inline?i("b-dropdown",{ref:"dropdown",attrs:{position:t.position,disabled:t.disabled,inline:t.inline,"mobile-modal":t.mobileModal,"trap-focus":t.trapFocus,"aria-role":t.ariaRole,"aria-modal":!t.inline,"append-to-body":t.appendToBody,"append-to-body-copy-parent":""},on:{"active-change":t.onActiveChange},scopedSlots:t._u([t.inline?null:{key:"trigger",fn:function(){return[t._t("trigger",[i("b-input",t._b({ref:"input",attrs:{autocomplete:"off",value:t.formattedValue,placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,rounded:t.rounded,loading:t.loading,disabled:t.disabled,readonly:!t.editable,"use-html5-validation":!1},on:{focus:t.handleOnFocus},nativeOn:{click:function(e){return t.onInputClick(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.togglePicker(!0)},change:function(e){return t.onChange(e.target.value)}}},"b-input",t.$attrs,!1))])]},proxy:!0}],null,!0)},[i("b-dropdown-item",{class:{"dropdown-horizonal-timepicker":t.horizontalTimePicker},attrs:{disabled:t.disabled,focusable:t.focusable,custom:""}},[i("div",[i("header",{staticClass:"datepicker-header"},[void 0!==t.$slots.header&&t.$slots.header.length?[t._t("header")]:i("div",{staticClass:"pagination field is-centered",class:t.size},[i("a",{directives:[{name:"show",rawName:"v-show",value:!t.showPrev&&!t.disabled,expression:"!showPrev && !disabled"}],staticClass:"pagination-previous",attrs:{role:"button",href:"#",disabled:t.disabled,"aria-label":t.ariaPreviousLabel},on:{click:function(e){return e.preventDefault(),t.prev(e)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.prev(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.prev(e))}]}},[i("b-icon",{attrs:{icon:t.iconPrev,pack:t.iconPack,both:"",type:"is-primary is-clickable"}})],1),i("a",{directives:[{name:"show",rawName:"v-show",value:!t.showNext&&!t.disabled,expression:"!showNext && !disabled"}],staticClass:"pagination-next",attrs:{role:"button",href:"#",disabled:t.disabled,"aria-label":t.ariaNextLabel},on:{click:function(e){return e.preventDefault(),t.next(e)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.next(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.next(e))}]}},[i("b-icon",{attrs:{icon:t.iconNext,pack:t.iconPack,both:"",type:"is-primary is-clickable"}})],1),i("div",{staticClass:"pagination-list"},[i("b-field",[t.isTypeMonth?t._e():i("b-select",{attrs:{disabled:t.disabled,size:t.size},model:{value:t.focusedDateData.month,callback:function(e){t.$set(t.focusedDateData,"month",e)},expression:"focusedDateData.month"}},t._l(t.listOfMonths,function(e){return i("option",{key:e.name,attrs:{disabled:e.disabled},domProps:{value:e.index}},[t._v(" "+t._s(e.name)+" ")])}),0),i("b-select",{attrs:{disabled:t.disabled,size:t.size},model:{value:t.focusedDateData.year,callback:function(e){t.$set(t.focusedDateData,"year",e)},expression:"focusedDateData.year"}},t._l(t.listOfYears,function(e){return i("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}),0)],1)],1)])],2),t.isTypeMonth?i("div",[i("b-datepicker-month",{attrs:{"month-names":t.newMonthNames,"min-date":t.minDate,"max-date":t.maxDate,focused:t.focusedDateData,disabled:t.disabled,"unselectable-dates":t.unselectableDates,"unselectable-days-of-week":t.unselectableDaysOfWeek,"selectable-dates":t.selectableDates,events:t.events,indicators:t.indicators,"date-creator":t.dateCreator,range:t.range,multiple:t.multiple},on:{"range-start":function(e){return t.$emit("range-start",e)},"range-end":function(e){return t.$emit("range-end",e)},close:function(){return t.togglePicker(!1)},"change-focus":t.changeFocus,"update:focused":function(e){t.focusedDateData=e}},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}})],1):i("div",{staticClass:"datepicker-content",class:{"content-horizonal-timepicker":t.horizontalTimePicker}},[i("b-datepicker-table",{attrs:{"day-names":t.newDayNames,"month-names":t.newMonthNames,"first-day-of-week":t.firstDayOfWeek,"rules-for-first-week":t.rulesForFirstWeek,"min-date":t.minDate,"max-date":t.maxDate,focused:t.focusedDateData,disabled:t.disabled,"unselectable-dates":t.unselectableDates,"unselectable-days-of-week":t.unselectableDaysOfWeek,"selectable-dates":t.selectableDates,events:t.events,indicators:t.indicators,"date-creator":t.dateCreator,"type-month":t.isTypeMonth,"nearby-month-days":t.nearbyMonthDays,"nearby-selectable-month-days":t.nearbySelectableMonthDays,"show-week-number":t.showWeekNumber,range:t.range,multiple:t.multiple},on:{"range-start":function(e){return t.$emit("range-start",e)},"range-end":function(e){return t.$emit("range-end",e)},close:function(){return t.togglePicker(!1)},"update:focused":function(e){t.focusedDateData=e}},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}})],1)]),void 0!==t.$slots.default&&t.$slots.default.length?i("footer",{staticClass:"datepicker-footer",class:{"footer-horizontal-timepicker":t.horizontalTimePicker}},[t._t("default")],2):t._e()])],1):i("b-input",t._b({ref:"input",attrs:{type:t.isTypeMonth?"month":"date",autocomplete:"off",value:t.formatNative(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,rounded:t.rounded,loading:t.loading,max:t.formatNative(t.maxDate),min:t.formatNative(t.minDate),disabled:t.disabled,readonly:!1,"use-html5-validation":!1},on:{focus:t.onFocus,blur:t.onBlur},nativeOn:{change:function(e){return t.onChangeNativePicker(e)}}},"b-input",t.$attrs,!1))],1)},staticRenderFns:[]},void 0,{name:"BDatepicker",components:(o(de={},fe.name,fe),o(de,me.name,me),o(de,I.name,I),o(de,oe.name,oe),o(de,pe.name,pe),o(de,R.name,R),o(de,se.name,se),o(de,ne.name,ne),de),mixins:[O],inheritAttrs:!1,props:{value:{type:[Date,Array]},dayNames:{type:Array,default:function(){if(Array.isArray(F.defaultDayNames))return F.defaultDayNames}},monthNames:{type:Array,default:function(){if(Array.isArray(F.defaultMonthNames))return F.defaultMonthNames}},firstDayOfWeek:{type:Number,default:function(){return"number"==typeof F.defaultFirstDayOfWeek?F.defaultFirstDayOfWeek:0}},inline:Boolean,minDate:Date,maxDate:Date,focusedDate:Date,placeholder:String,editable:Boolean,disabled:Boolean,horizontalTimePicker:Boolean,unselectableDates:Array,unselectableDaysOfWeek:{type:Array,default:function(){return F.defaultUnselectableDaysOfWeek}},selectableDates:Array,dateFormatter:{type:Function,default:function(e,t){return"function"==typeof F.defaultDateFormatter?F.defaultDateFormatter(e):(i=e,s=t,n=(Array.isArray(i)?i:[i]).map(function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),12);return s.isTypeMonth?s.dtfMonth.format(t):s.dtf.format(t)}),s.multiple?n.join(", "):n.join(" - "));var i,s,n}},dateParser:{type:Function,default:function(e,t){return"function"==typeof F.defaultDateParser?F.defaultDateParser(e):function(e,t){if(t.dtf.formatToParts&&"function"==typeof t.dtf.formatToParts){var i=$((t.isTypeMonth?t.dtfMonth:t.dtf).formatToParts(new Date(2e3,11,25)).map(function(e){return"literal"===e.type?e.value:"((?!=<".concat(e.type,">)\\d+)")}).join(""),e);if(i.year&&4===i.year.length&&i.month&&i.month<=12){if(t.isTypeMonth)return new Date(i.year,i.month-1);if(i.day&&i.day<=31)return new Date(i.year,i.month-1,i.day,12)}}if(!t.isTypeMonth)return new Date(Date.parse(e));if(e){var s=e.split("/"),n=4===s[0].length?s[0]:s[1],a=2===s[0].length?s[0]:s[1];if(n&&a)return new Date(parseInt(n,10),parseInt(a-1,10),1,0,0,0,0)}return null}(e,t)}},dateCreator:{type:Function,default:function(){return"function"==typeof F.defaultDateCreator?F.defaultDateCreator():new Date}},mobileNative:{type:Boolean,default:function(){return F.defaultDatepickerMobileNative}},position:String,events:Array,indicators:{type:String,default:"dots"},openOnFocus:Boolean,iconPrev:{type:String,default:function(){return F.defaultIconPrev}},iconNext:{type:String,default:function(){return F.defaultIconNext}},yearsRange:{type:Array,default:function(){return F.defaultDatepickerYearsRange}},type:{type:String,validator:function(e){return 0<=["month"].indexOf(e)}},nearbyMonthDays:{type:Boolean,default:function(){return F.defaultDatepickerNearbyMonthDays}},nearbySelectableMonthDays:{type:Boolean,default:function(){return F.defaultDatepickerNearbySelectableMonthDays}},showWeekNumber:{type:Boolean,default:function(){return F.defaultDatepickerShowWeekNumber}},rulesForFirstWeek:{type:Number,default:function(){return 4}},range:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},mobileModal:{type:Boolean,default:function(){return F.defaultDatepickerMobileModal}},focusable:{type:Boolean,default:!0},trapFocus:{type:Boolean,default:function(){return F.defaultTrapFocus}},appendToBody:Boolean,ariaNextLabel:String,ariaPreviousLabel:String},data:function(){var e=(Array.isArray(this.value)?this.value[0]:this.value)||this.focusedDate||this.dateCreator();return this.maxDate&&this.maxDate.getFullYear()<(new Date).getFullYear()&&e.setFullYear(this.maxDate.getFullYear()),{dateSelected:this.value,focusedDateData:{day:e.getDate(),month:e.getMonth(),year:e.getFullYear()},_elementRef:"input",_isDatepicker:!0}},computed:{computedValue:{get:function(){return this.dateSelected},set:function(e){var t=this;this.updateInternalState(e),this.multiple||this.togglePicker(!1),this.$emit("input",e),this.useHtml5Validation&&this.$nextTick(function(){t.checkHtml5Validity()})}},formattedValue:function(){return this.formatValue(this.computedValue)},localeOptions:function(){return new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric"}).resolvedOptions()},dtf:function(){return new Intl.DateTimeFormat(this.locale,{timezome:"UTC"})},dtfMonth:function(){return new Intl.DateTimeFormat(this.locale,{year:this.localeOptions.year||"numeric",month:this.localeOptions.month||"2-digit",timezome:"UTC"})},newMonthNames:function(){return Array.isArray(this.monthNames)?this.monthNames:x(this.locale)},newDayNames:function(){return Array.isArray(this.dayNames)?this.dayNames:_(this.locale)},listOfMonths:function(){var i=0,s=12;return this.minDate&&this.focusedDateData.year===this.minDate.getFullYear()&&(i=this.minDate.getMonth()),this.maxDate&&this.focusedDateData.year===this.maxDate.getFullYear()&&(s=this.maxDate.getMonth()),this.newMonthNames.map(function(e,t){return{name:e,index:t,disabled:t<i||s<t}})},listOfYears:function(){var e=this.focusedDateData.year+this.yearsRange[1];this.maxDate&&this.maxDate.getFullYear()<e&&(e=Math.max(this.maxDate.getFullYear(),this.focusedDateData.year));var t=this.focusedDateData.year+this.yearsRange[0];this.minDate&&this.minDate.getFullYear()>t&&(t=Math.min(this.minDate.getFullYear(),this.focusedDateData.year));for(var i=[],s=t;s<=e;s++)i.push(s);return i.reverse()},showPrev:function(){return!!this.minDate&&(this.isTypeMonth?this.focusedDateData.year<=this.minDate.getFullYear():new Date(this.focusedDateData.year,this.focusedDateData.month)<=new Date(this.minDate.getFullYear(),this.minDate.getMonth()))},showNext:function(){if(!this.maxDate)return!1;if(this.isTypeMonth)return this.focusedDateData.year>=this.maxDate.getFullYear();var e=new Date(this.focusedDateData.year,this.focusedDateData.month);return new Date(this.maxDate.getFullYear(),this.maxDate.getMonth())<=e},isMobile:function(){return this.mobileNative&&m.any()},isTypeMonth:function(){return"month"===this.type},ariaRole:function(){if(!this.inline)return"dialog"}},watch:{value:function(e){this.updateInternalState(e),this.multiple||this.togglePicker(!1)},focusedDate:function(e){e&&(this.focusedDateData={day:e.getDate(),month:e.getMonth(),year:e.getFullYear()})},"focusedDateData.month":function(e){this.$emit("change-month",e)},"focusedDateData.year":function(e){this.$emit("change-year",e)}},methods:{onChange:function(e){var t=this.dateParser(e,this);!t||isNaN(t)&&(!Array.isArray(t)||2!==t.length||isNaN(t[0])||isNaN(t[1]))?(this.computedValue=null,this.$refs.input&&(this.$refs.input.newValue=this.computedValue)):this.computedValue=t},formatValue:function(e){return Array.isArray(e)?Array.isArray(e)&&e.every(function(e){return!isNaN(e)})?this.dateFormatter(c(e),this):null:e&&!isNaN(e)?this.dateFormatter(e,this):null},prev:function(){this.disabled||(this.isTypeMonth?--this.focusedDateData.year:0<this.focusedDateData.month?--this.focusedDateData.month:(this.focusedDateData.month=11,--this.focusedDateData.year))},next:function(){this.disabled||(this.isTypeMonth?this.focusedDateData.year+=1:this.focusedDateData.month<11?this.focusedDateData.month+=1:(this.focusedDateData.month=0,this.focusedDateData.year+=1))},formatNative:function(e){return this.isTypeMonth?this.formatYYYYMM(e):this.formatYYYYMMDD(e)},formatYYYYMMDD:function(e){var t=new Date(e);if(!e||isNaN(t))return"";var i=t.getFullYear(),s=t.getMonth()+1,n=t.getDate();return i+"-"+(s<10?"0":"")+s+"-"+(n<10?"0":"")+n},formatYYYYMM:function(e){var t=new Date(e);if(!e||isNaN(t))return"";var i=t.getFullYear(),s=t.getMonth()+1;return i+"-"+(s<10?"0":"")+s},onChangeNativePicker:function(e){var t,i,s,n=e.target.value,a=n?n.split("-"):[];3===a.length?(t=parseInt(a[0],10),i=parseInt(a[1])-1,s=parseInt(a[2]),this.computedValue=new Date(t,i,s)):this.computedValue=null},updateInternalState:function(e){var t=Array.isArray(e)?e.length?e[0]:this.dateCreator():e||this.dateCreator();this.focusedDateData={day:t.getDate(),month:t.getMonth(),year:t.getFullYear()},this.dateSelected=e},togglePicker:function(e){this.$refs.dropdown&&this.closeOnClick&&(this.$refs.dropdown.isActive="boolean"==typeof e?e:!this.$refs.dropdown.isActive)},handleOnFocus:function(e){this.onFocus(e),this.openOnFocus&&this.togglePicker(!0)},toggle:function(){if(this.mobileNative&&this.isMobile){var e=this.$refs.input.$refs.input;return e.focus(),void e.click()}this.$refs.dropdown.toggle()},onInputClick:function(e){this.$refs.dropdown.isActive&&e.stopPropagation()},keyPress:function(e){var t=e.key;this.$refs.dropdown&&this.$refs.dropdown.isActive&&("Escape"===t||"Esc"===t)&&this.togglePicker(!1)},onActiveChange:function(e){e||this.onBlur()},changeFocus:function(e){this.focusedDateData={day:e.getDate(),month:e.getMonth(),year:e.getFullYear()}}},created:function(){"undefined"!=typeof window&&document.addEventListener("keyup",this.keyPress)},beforeDestroy:function(){"undefined"!=typeof window&&document.removeEventListener("keyup",this.keyPress)}},void 0,!1,void 0,void 0,void 0),ge={install:function(e){B(e,ve)}};P(ge);var be,ye=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timepicker control",class:[t.size,{"is-expanded":t.expanded}]},[!t.isMobile||t.inline?i("b-dropdown",{ref:"dropdown",attrs:{position:t.position,disabled:t.disabled,inline:t.inline,"append-to-body":t.appendToBody,"append-to-body-copy-parent":""},on:{"active-change":t.onActiveChange},scopedSlots:t._u([t.inline?null:{key:"trigger",fn:function(){return[t._t("trigger",[i("b-input",t._b({ref:"input",attrs:{autocomplete:"off",value:t.formatValue(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,loading:t.loading,disabled:t.disabled,readonly:!t.editable,rounded:t.rounded,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toggle(!0)},change:function(e){return t.onChange(e.target.value)}}},"b-input",t.$attrs,!1))])]},proxy:!0}],null,!0)},[i("b-dropdown-item",{attrs:{disabled:t.disabled,focusable:t.focusable,custom:""}},[i("b-field",{attrs:{grouped:"",position:"is-centered"}},[i("b-select",{attrs:{disabled:t.disabled,placeholder:"00"},nativeOn:{change:function(e){return t.onHoursChange(e.target.value)}},model:{value:t.hoursSelected,callback:function(e){t.hoursSelected=e},expression:"hoursSelected"}},t._l(t.hours,function(e){return i("option",{key:e.value,attrs:{disabled:t.isHourDisabled(e.value)},domProps:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])}),0),i("span",{staticClass:"control is-colon"},[t._v(t._s(t.hourLiteral))]),i("b-select",{attrs:{disabled:t.disabled,placeholder:"00"},nativeOn:{change:function(e){return t.onMinutesChange(e.target.value)}},model:{value:t.minutesSelected,callback:function(e){t.minutesSelected=e},expression:"minutesSelected"}},t._l(t.minutes,function(e){return i("option",{key:e.value,attrs:{disabled:t.isMinuteDisabled(e.value)},domProps:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])}),0),t.enableSeconds?[i("span",{staticClass:"control is-colon"},[t._v(t._s(t.minuteLiteral))]),i("b-select",{attrs:{disabled:t.disabled,placeholder:"00"},nativeOn:{change:function(e){return t.onSecondsChange(e.target.value)}},model:{value:t.secondsSelected,callback:function(e){t.secondsSelected=e},expression:"secondsSelected"}},t._l(t.seconds,function(e){return i("option",{key:e.value,attrs:{disabled:t.isSecondDisabled(e.value)},domProps:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])}),0),i("span",{staticClass:"control is-colon"},[t._v(t._s(t.secondLiteral))])]:t._e(),t.isHourFormat24?t._e():i("b-select",{attrs:{disabled:t.disabled},nativeOn:{change:function(e){return t.onMeridienChange(e.target.value)}},model:{value:t.meridienSelected,callback:function(e){t.meridienSelected=e},expression:"meridienSelected"}},t._l(t.meridiens,function(e){return i("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}),0)],2),void 0!==t.$slots.default&&t.$slots.default.length?i("footer",{staticClass:"timepicker-footer"},[t._t("default")],2):t._e()],1)],1):i("b-input",t._b({ref:"input",attrs:{type:"time",step:t.nativeStep,autocomplete:"off",value:t.formatHHMMSS(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,rounded:t.rounded,loading:t.loading,max:t.formatHHMMSS(t.maxTime),min:t.formatHHMMSS(t.minTime),disabled:t.disabled,readonly:!1,"reset-on-meridian-change":t.isReset,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus,blur:function(){t.onBlur()&&t.checkHtml5Validity()}},nativeOn:{change:function(e){return t.onChange(e.target.value)}}},"b-input",t.$attrs,!1))],1)},staticRenderFns:[]},void 0,{name:"BTimepicker",components:(o(ue={},I.name,I),o(ue,oe.name,oe),o(ue,pe.name,pe),o(ue,R.name,R),o(ue,se.name,se),o(ue,ne.name,ne),ue),mixins:[ee],inheritAttrs:!1,data:function(){return{_isTimepicker:!0}},computed:{nativeStep:function(){if(this.enableSeconds)return"1"}}},void 0,!1,void 0,void 0,void 0),ke=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return!t.isMobile||t.inline?i("b-datepicker",t._b({ref:"datepicker",attrs:{"open-on-focus":t.openOnFocus,position:t.position,loading:t.loading,inline:t.inline,editable:t.editable,expanded:t.expanded,"close-on-click":!1,"date-formatter":t.defaultDatetimeFormatter,"date-parser":t.defaultDatetimeParser,"min-date":t.minDate,"max-date":t.maxDate,icon:t.icon,"icon-pack":t.iconPack,size:t.datepickerSize,placeholder:t.placeholder,"horizontal-time-picker":t.horizontalTimePicker,range:!1,disabled:t.disabled,"mobile-native":t.isMobileNative,locale:t.locale,focusable:t.focusable,"append-to-body":t.appendToBody},on:{focus:t.onFocus,blur:t.onBlur,"change-month":function(e){return t.$emit("change-month",e)},"change-year":function(e){return t.$emit("change-year",e)}},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}},"b-datepicker",t.datepicker,!1),[i("nav",{staticClass:"level is-mobile"},[void 0!==t.$slots.left?i("div",{staticClass:"level-item has-text-centered"},[t._t("left")],2):t._e(),i("div",{staticClass:"level-item has-text-centered"},[i("b-timepicker",t._b({ref:"timepicker",attrs:{inline:"",editable:t.editable,"min-time":t.minTime,"max-time":t.maxTime,size:t.timepickerSize,disabled:t.timepickerDisabled,focusable:t.focusable,"mobile-native":t.isMobileNative,locale:t.locale},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}},"b-timepicker",t.timepicker,!1))],1),void 0!==t.$slots.right?i("div",{staticClass:"level-item has-text-centered"},[t._t("right")],2):t._e()])]):i("b-input",t._b({ref:"input",attrs:{type:"datetime-local",autocomplete:"off",value:t.formatNative(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,rounded:t.rounded,loading:t.loading,max:t.formatNative(t.maxDate),min:t.formatNative(t.minDate),disabled:t.disabled,readonly:!1,"use-html5-validation":t.useHtml5Validation},on:{focus:t.onFocus,blur:t.onBlur},nativeOn:{change:function(e){return t.onChangeNativePicker(e)}}},"b-input",t.$attrs,!1))},staticRenderFns:[]},void 0,{name:"BDatetimepicker",components:(o(be={},ve.name,ve),o(be,ye.name,ye),be),mixins:[O],inheritAttrs:!1,props:{value:{type:Date},editable:{type:Boolean,default:!1},placeholder:String,horizontalTimePicker:Boolean,disabled:Boolean,icon:String,iconPack:String,inline:Boolean,openOnFocus:Boolean,position:String,mobileNative:{type:Boolean,default:!0},minDatetime:Date,maxDatetime:Date,datetimeFormatter:{type:Function},datetimeParser:{type:Function},datetimeCreator:{type:Function,default:function(e){return"function"==typeof F.defaultDatetimeCreator?F.defaultDatetimeCreator(e):e}},datepicker:Object,timepicker:Object,tzOffset:{type:Number,default:0},focusable:{type:Boolean,default:!0},appendToBody:Boolean},data:function(){return{newValue:this.adjustValue(this.value)}},computed:{computedValue:{get:function(){return this.newValue},set:function(e){var t;e?(t=new Date(e.getTime()),this.newValue?e.getDate()===this.newValue.getDate()&&e.getMonth()===this.newValue.getMonth()&&e.getFullYear()===this.newValue.getFullYear()||0!==e.getHours()||0!==e.getMinutes()||0!==e.getSeconds()||t.setHours(this.newValue.getHours(),this.newValue.getMinutes(),this.newValue.getSeconds(),0):t=this.datetimeCreator(e),this.minDatetime&&t<this.adjustValue(this.minDatetime)?t=this.adjustValue(this.minDatetime):this.maxDatetime&&t>this.adjustValue(this.maxDatetime)&&(t=this.adjustValue(this.maxDatetime)),this.newValue=new Date(t.getTime())):this.newValue=this.adjustValue(this.value);var i=this.adjustValue(this.newValue,!0);this.$emit("input",i)}},localeOptions:function(){return new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:this.enableSeconds()?"numeric":void 0}).resolvedOptions()},dtf:function(){return new Intl.DateTimeFormat(this.locale,{year:this.localeOptions.year||"numeric",month:this.localeOptions.month||"numeric",day:this.localeOptions.day||"numeric",hour:this.localeOptions.hour||"numeric",minute:this.localeOptions.minute||"numeric",second:this.enableSeconds()?this.localeOptions.second||"numeric":void 0,hour12:!this.isHourFormat24(),timezome:"UTC"})},isMobileNative:function(){return this.mobileNative&&0===this.tzOffset},isMobile:function(){return this.isMobileNative&&m.any()},minDate:function(){if(!this.minDatetime)return this.datepicker?this.adjustValue(this.datepicker.minDate):null;var e=this.adjustValue(this.minDatetime);return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)},maxDate:function(){if(!this.maxDatetime)return this.datepicker?this.adjustValue(this.datepicker.maxDate):null;var e=this.adjustValue(this.maxDatetime);return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)},minTime:function(){if(!this.minDatetime||null===this.newValue||void 0===this.newValue)return this.timepicker?this.adjustValue(this.timepicker.minTime):null;var e=this.adjustValue(this.minDatetime);return e.getFullYear()===this.newValue.getFullYear()&&e.getMonth()===this.newValue.getMonth()&&e.getDate()===this.newValue.getDate()?e:void 0},maxTime:function(){if(!this.maxDatetime||null===this.newValue||void 0===this.newValue)return this.timepicker?this.adjustValue(this.timepicker.maxTime):null;var e=this.adjustValue(this.maxDatetime);return e.getFullYear()===this.newValue.getFullYear()&&e.getMonth()===this.newValue.getMonth()&&e.getDate()===this.newValue.getDate()?e:void 0},datepickerSize:function(){return this.datepicker&&this.datepicker.size?this.datepicker.size:this.size},timepickerSize:function(){return this.timepicker&&this.timepicker.size?this.timepicker.size:this.size},timepickerDisabled:function(){return this.timepicker&&this.timepicker.disabled?this.timepicker.disabled:this.disabled}},watch:{value:function(){this.newValue=this.adjustValue(this.value)},tzOffset:function(){this.newValue=this.adjustValue(this.value)}},methods:{enableSeconds:function(){return!!this.$refs.timepicker&&this.$refs.timepicker.enableSeconds},isHourFormat24:function(){return this.$refs.timepicker?this.$refs.timepicker.isHourFormat24:!this.localeOptions.hour12},adjustValue:function(e,t){return e?1<arguments.length&&void 0!==t&&t?new Date(e.getTime()-6e4*this.tzOffset):new Date(e.getTime()+6e4*this.tzOffset):e},defaultDatetimeParser:function(e){if("function"==typeof this.datetimeParser)return this.datetimeParser(e);if("function"==typeof F.defaultDatetimeParser)return F.defaultDatetimeParser(e);if(this.dtf.formatToParts&&"function"==typeof this.dtf.formatToParts){var i=["AM","PM","AM".toLowerCase(),"PM".toLowerCase()];this.$refs.timepicker&&(i.push(this.$refs.timepicker.amString),i.push(this.$refs.timepicker.pmString));var s=this.dtf.formatToParts(new Date),t=$(s.map(function(e,t){return"literal"===e.type?t+1<s.length&&"hour"===s[t+1].type?"[^\\d]+":e.value.replace(/ /g,"\\s?"):"dayPeriod"===e.type?"((?!=<".concat(e.type,">)(").concat(i.join("|"),")?)"):"((?!=<".concat(e.type,">)\\d+)")}).join(""),e);if(t.year&&4===t.year.length&&t.month&&t.month<=12&&t.day&&t.day<=31&&t.hour&&0<=t.hour&&t.hour<24&&t.minute&&0<=t.minute&&t.minute<59)return new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second||0)}return new Date(Date.parse(e))},defaultDatetimeFormatter:function(e){return"function"==typeof this.datetimeFormatter?this.datetimeFormatter(e):"function"==typeof F.defaultDatetimeFormatter?F.defaultDatetimeFormatter(e):this.dtf.format(e)},onChangeNativePicker:function(e){var t,i,s,n,a,o=e.target.value,r=o?o.split(/\D/):[];5<=r.length?(t=parseInt(r[0],10),i=parseInt(r[1],10)-1,s=parseInt(r[2],10),n=parseInt(r[3],10),a=parseInt(r[4],10),this.computedValue=new Date(t,i,s,n,a)):this.computedValue=null},formatNative:function(e){var t=new Date(e);if(!e||isNaN(t))return"";var i=t.getFullYear(),s=t.getMonth()+1,n=t.getDate(),a=t.getHours(),o=t.getMinutes(),r=t.getSeconds();return i+"-"+(s<10?"0":"")+s+"-"+(n<10?"0":"")+n+"T"+(a<10?"0":"")+a+":"+(o<10?"0":"")+o+":"+(r<10?"0":"")+r},toggle:function(){this.$refs.datepicker.toggle()}},mounted:function(){this.isMobile&&!this.inline||this.newValue&&this.$refs.datepicker.$forceUpdate()}},void 0,!1,void 0,void 0,void 0),we={install:function(e){B(e,ke)}};P(we);var xe,_e=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:e.animation},on:{"after-enter":e.afterEnter,"before-leave":e.beforeLeave,"after-leave":e.afterLeave}},[e.destroyed?e._e():i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"},{name:"trap-focus",rawName:"v-trap-focus",value:e.trapFocus,expression:"trapFocus"}],staticClass:"modal is-active",class:[{"is-full-screen":e.fullScreen},e.customClass],attrs:{tabindex:"-1",role:e.ariaRole,"aria-modal":e.ariaModal}},[i("div",{staticClass:"modal-background",on:{click:function(){return e.cancel("outside")}}}),i("div",{staticClass:"animation-content",class:{"modal-content":!e.hasModalCard},style:e.customStyle},[e.component?i(e.component,e._g(e._b({tag:"component",attrs:{"can-cancel":e.canCancel},on:{close:e.close}},"component",e.props,!1),e.events)):e.content?[i("div",{domProps:{innerHTML:e._s(e.content)}})]:e._t("default",null,{canCancel:e.canCancel,close:e.close}),e.showX?i("button",{directives:[{name:"show",rawName:"v-show",value:!e.animating,expression:"!animating"}],staticClass:"modal-close is-large",attrs:{type:"button"},on:{click:function(){return e.cancel("x")}}}):e._e()],2)])])},staticRenderFns:[]},void 0,{name:"BModal",directives:{trapFocus:te},model:{prop:"active",event:"update:active"},props:{active:Boolean,component:[Object,Function,String],content:[String,Array],programmatic:Boolean,props:Object,events:Object,width:{type:[String,Number],default:960},hasModalCard:Boolean,animation:{type:String,default:"zoom-out"},canCancel:{type:[Array,Boolean],default:function(){return F.defaultModalCanCancel}},onCancel:{type:Function,default:function(){}},scroll:{type:String,default:function(){return F.defaultModalScroll?F.defaultModalScroll:"clip"},validator:function(e){return 0<=["clip","keep"].indexOf(e)}},fullScreen:Boolean,trapFocus:{type:Boolean,default:function(){return F.defaultTrapFocus}},customClass:String,ariaRole:{type:String,validator:function(e){return 0<=["dialog","alertdialog"].indexOf(e)}},ariaModal:Boolean,destroyOnHide:{type:Boolean,default:!0}},data:function(){return{isActive:this.active||!1,savedScrollTop:null,newWidth:"number"==typeof this.width?this.width+"px":this.width,animating:!0,destroyed:!this.active}},computed:{cancelOptions:function(){return"boolean"==typeof this.canCancel?this.canCancel?F.defaultModalCanCancel:[]:this.canCancel},showX:function(){return 0<=this.cancelOptions.indexOf("x")&&!this.hasModalCard},customStyle:function(){return this.fullScreen?null:{maxWidth:this.newWidth}}},watch:{active:function(e){this.isActive=e},isActive:function(e){var t=this;e&&(this.destroyed=!1),this.handleScroll(),this.$nextTick(function(){e&&t.$el&&t.$el.focus&&t.$el.focus()})}},methods:{handleScroll:function(){"undefined"!=typeof window&&("clip"!==this.scroll?(this.savedScrollTop=this.savedScrollTop?this.savedScrollTop:document.documentElement.scrollTop,this.isActive?document.body.classList.add("is-noscroll"):document.body.classList.remove("is-noscroll"),this.isActive?document.body.style.top="-".concat(this.savedScrollTop,"px"):(document.documentElement.scrollTop=this.savedScrollTop,document.body.style.top=null,this.savedScrollTop=null)):this.isActive?document.documentElement.classList.add("is-clipped"):document.documentElement.classList.remove("is-clipped"))},cancel:function(e){this.cancelOptions.indexOf(e)<0||(this.$emit("cancel",arguments),this.onCancel.apply(null,arguments),this.close())},close:function(){var e=this;this.$emit("close"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout(function(){e.$destroy(),v(e.$el)},150))},keyPress:function(e){var t=e.key;!this.isActive||"Escape"!==t&&"Esc"!==t||this.cancel("escape")},afterEnter:function(){this.animating=!1,this.$emit("after-enter")},beforeLeave:function(){this.animating=!0},afterLeave:function(){this.destroyOnHide&&(this.destroyed=!0),this.$emit("after-leave")}},created:function(){"undefined"!=typeof window&&document.addEventListener("keyup",this.keyPress)},beforeMount:function(){this.programmatic&&document.body.appendChild(this.$el)},mounted:function(){this.programmatic?this.isActive=!0:this.isActive&&this.handleScroll()},beforeDestroy:function(){var e;"undefined"!=typeof window&&(document.removeEventListener("keyup",this.keyPress),document.documentElement.classList.remove("is-clipped"),e=this.savedScrollTop?this.savedScrollTop:document.documentElement.scrollTop,document.body.classList.remove("is-noscroll"),document.documentElement.scrollTop=e,document.body.style.top=null)}},void 0,!1,void 0,void 0,void 0),$e=E({render:function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("transition",{attrs:{name:o.animation}},[o.isActive?t("div",{directives:[{name:"trap-focus",rawName:"v-trap-focus",value:o.trapFocus,expression:"trapFocus"}],staticClass:"dialog modal is-active",class:o.dialogClass,attrs:{role:o.ariaRole,"aria-modal":o.ariaModal}},[t("div",{staticClass:"modal-background",on:{click:function(){return o.cancel("outside")}}}),t("div",{staticClass:"modal-card animation-content"},[o.title?t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[o._v(o._s(o.title))])]):o._e(),t("section",{staticClass:"modal-card-body",class:{"is-titleless":!o.title,"is-flex":o.hasIcon}},[t("div",{staticClass:"media"},[o.hasIcon&&(o.icon||o.iconByType)?t("div",{staticClass:"media-left"},[t("b-icon",{attrs:{icon:o.icon?o.icon:o.iconByType,pack:o.iconPack,type:o.type,both:!o.icon,size:"is-large"}})],1):o._e(),t("div",{staticClass:"media-content"},[t("p",[o.$slots.default?[o._t("default")]:[t("div",{domProps:{innerHTML:o._s(o.message)}})]],2),o.hasInput?t("div",{staticClass:"field"},[t("div",{staticClass:"control"},["checkbox"===o.inputAttrs.type?t("input",o._b({directives:[{name:"model",rawName:"v-model",value:o.prompt,expression:"prompt"}],ref:"input",staticClass:"input",class:{"is-danger":o.validationMessage},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(o.prompt)?-1<o._i(o.prompt,null):o.prompt},on:{keyup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.confirm(e)},change:function(e){var t,i,s=o.prompt,n=e.target,a=!!n.checked;Array.isArray(s)?(t=null,i=o._i(s,t),n.checked?i<0&&(o.prompt=s.concat([t])):-1<i&&(o.prompt=s.slice(0,i).concat(s.slice(i+1)))):o.prompt=a}}},"input",o.inputAttrs,!1)):"radio"===o.inputAttrs.type?t("input",o._b({directives:[{name:"model",rawName:"v-model",value:o.prompt,expression:"prompt"}],ref:"input",staticClass:"input",class:{"is-danger":o.validationMessage},attrs:{type:"radio"},domProps:{checked:o._q(o.prompt,null)},on:{keyup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.confirm(e)},change:function(){o.prompt=null}}},"input",o.inputAttrs,!1)):t("input",o._b({directives:[{name:"model",rawName:"v-model",value:o.prompt,expression:"prompt"}],ref:"input",staticClass:"input",class:{"is-danger":o.validationMessage},attrs:{type:o.inputAttrs.type},domProps:{value:o.prompt},on:{keyup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.confirm(e)},input:function(e){e.target.composing||(o.prompt=e.target.value)}}},"input",o.inputAttrs,!1))]),t("p",{staticClass:"help is-danger"},[o._v(o._s(o.validationMessage))])]):o._e()])])]),t("footer",{staticClass:"modal-card-foot"},[o.showCancel?t("button",{ref:"cancelButton",staticClass:"button",on:{click:function(){return o.cancel("button")}}},[o._v(o._s(o.cancelText))]):o._e(),t("button",{ref:"confirmButton",staticClass:"button",class:o.type,on:{click:o.confirm}},[o._v(o._s(o.confirmText))])])])]):o._e()])},staticRenderFns:[]},void 0,{name:"BDialog",components:o({},R.name,R),directives:{trapFocus:te},extends:_e,props:{title:String,message:[String,Array],icon:String,iconPack:String,hasIcon:Boolean,type:{type:String,default:"is-primary"},size:String,confirmText:{type:String,default:function(){return F.defaultDialogConfirmText?F.defaultDialogConfirmText:"OK"}},cancelText:{type:String,default:function(){return F.defaultDialogCancelText?F.defaultDialogCancelText:"Cancel"}},hasInput:Boolean,inputAttrs:{type:Object,default:function(){return{}}},onConfirm:{type:Function,default:function(){}},closeOnConfirm:{type:Boolean,default:!0},container:{type:String,default:function(){return F.defaultContainerElement}},focusOn:{type:String,default:"confirm"},trapFocus:{type:Boolean,default:function(){return F.defaultTrapFocus}},ariaRole:{type:String,validator:function(e){return 0<=["dialog","alertdialog"].indexOf(e)}},ariaModal:Boolean},data:function(){return{prompt:this.hasInput&&this.inputAttrs.value||"",isActive:!1,validationMessage:""}},computed:{dialogClass:function(){return[this.size,{"has-custom-container":null!==this.container}]},iconByType:function(){switch(this.type){case"is-info":return"information";case"is-success":return"check-circle";case"is-warning":return"alert";case"is-danger":return"alert-circle";default:return null}},showCancel:function(){return 0<=this.cancelOptions.indexOf("button")}},methods:{confirm:function(){var e=this;if(void 0!==this.$refs.input&&!this.$refs.input.checkValidity())return this.validationMessage=this.$refs.input.validationMessage,void this.$nextTick(function(){return e.$refs.input.select()});this.$emit("confirm",this.prompt),this.onConfirm(this.prompt,this),this.closeOnConfirm&&this.close()},close:function(){var e=this;this.isActive=!1,setTimeout(function(){e.$destroy(),v(e.$el)},150)}},beforeMount:function(){var e=this;"undefined"!=typeof window&&this.$nextTick(function(){(document.querySelector(e.container)||document.body).appendChild(e.$el)})},mounted:function(){var e=this;this.isActive=!0,void 0===this.inputAttrs.required&&this.$set(this.inputAttrs,"required",!0),this.$nextTick(function(){e.hasInput?e.$refs.input.focus():"cancel"===e.focusOn&&e.showCancel?e.$refs.cancelButton.focus():e.$refs.confirmButton.focus()})}},void 0,!1,void 0,void 0,void 0);function Ce(e){var t;Array.isArray(e.message)&&(t=e.message,delete e.message);var i=new(("undefined"!=typeof window&&window.Vue?window.Vue:xe||A).extend($e))({el:document.createElement("div"),propsData:e});return t&&(i.$slots.default=t,i.$forceUpdate()),F.defaultProgrammaticPromise?new Promise(function(t){i.$on("confirm",function(e){return t({result:e||!0,dialog:i})}),i.$on("cancel",function(){return t({result:!1,dialog:i})})}):i}var Se={alert:function(e){"string"==typeof e&&(e={message:e});return Ce(f({canCancel:!1},e))},confirm:function(e){return Ce(f({},e))},prompt:function(e){return Ce(f({hasInput:!0,confirmText:"Done"},e))}},Te={install:function(e){B(xe=e,$e),z(e,"dialog",Se)}};P(Te);var De={install:function(e){B(e,se),B(e,ne)}};P(De);var Ae={install:function(e){B(e,oe)}};P(Ae);var Fe={install:function(e){B(e,R)}};P(Fe);var Oe={install:function(e){B(e,I)}};P(Oe);var Me,Pe="undefined"==typeof window,Be=Pe?Object:window.HTMLElement,ze=Pe?Object:window.File,Ee=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:e.animation}},[e.isActive?i("div",{staticClass:"loading-overlay is-active",class:{"is-full-page":e.displayInFullPage}},[i("div",{staticClass:"loading-background",on:{click:e.cancel}}),e._t("default",[i("div",{staticClass:"loading-icon"})])],2):e._e()])},staticRenderFns:[]},void 0,{name:"BLoading",model:{prop:"active",event:"update:active"},props:{active:Boolean,programmatic:Boolean,container:[Object,Function,Be],isFullPage:{type:Boolean,default:!0},animation:{type:String,default:"fade"},canCancel:{type:Boolean,default:!1},onCancel:{type:Function,default:function(){}}},data:function(){return{isActive:this.active||!1,displayInFullPage:this.isFullPage}},watch:{active:function(e){this.isActive=e},isFullPage:function(e){this.displayInFullPage=e}},methods:{cancel:function(){this.canCancel&&this.isActive&&this.close()},close:function(){var e=this;this.onCancel.apply(null,arguments),this.$emit("close"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout(function(){e.$destroy(),v(e.$el)},150))},keyPress:function(e){var t=e.key;"Escape"!==t&&"Esc"!==t||this.cancel()}},created:function(){"undefined"!=typeof window&&document.addEventListener("keyup",this.keyPress)},beforeMount:function(){this.programmatic&&(this.container?(this.displayInFullPage=!1,this.$emit("update:is-full-page",!1),this.container.appendChild(this.$el)):document.body.appendChild(this.$el))},mounted:function(){this.programmatic&&(this.isActive=!0)},beforeDestroy:function(){"undefined"!=typeof window&&document.removeEventListener("keyup",this.keyPress)}},void 0,!1,void 0,void 0,void 0),Re={open:function(e){var t=f({programmatic:!0},e);return new(("undefined"!=typeof window&&window.Vue?window.Vue:Me||A).extend(Ee))({el:document.createElement("div"),propsData:t})}},Ie={install:function(e){B(Me=e,Ee),z(e,"loading",Re)}};P(Ie);var Le,Ne={components:o({},R.name,R),model:{prop:"active",event:"update:active"},props:{active:{type:Boolean,default:!0},title:String,closable:{type:Boolean,default:!0},message:String,type:String,hasIcon:Boolean,size:String,icon:String,iconPack:String,iconSize:String,autoClose:{type:Boolean,default:!1},duration:{type:Number,default:2e3}},data:function(){return{isActive:this.active}},watch:{active:function(e){this.isActive=e},isActive:function(e){e?this.setAutoClose():this.timer&&clearTimeout(this.timer)}},computed:{computedIcon:function(){if(this.icon)return this.icon;switch(this.type){case"is-info":return"information";case"is-success":return"check-circle";case"is-warning":return"alert";case"is-danger":return"alert-circle";default:return null}}},methods:{close:function(){this.isActive=!1,this.$emit("close"),this.$emit("update:active",!1)},setAutoClose:function(){var e=this;this.autoClose&&(this.timer=setTimeout(function(){e.isActive&&e.close()},this.duration))}},mounted:function(){this.setAutoClose()}},Ve=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"fade"}},[e.isActive?i("article",{staticClass:"message",class:[e.type,e.size]},[e.title?i("header",{staticClass:"message-header"},[i("p",[e._v(e._s(e.title))]),e.closable?i("button",{staticClass:"delete",attrs:{type:"button","aria-label":e.ariaCloseLabel},on:{click:e.close}}):e._e()]):e._e(),e.$slots.default?i("section",{staticClass:"message-body"},[i("div",{staticClass:"media"},[e.computedIcon&&e.hasIcon?i("div",{staticClass:"media-left"},[i("b-icon",{class:e.type,attrs:{icon:e.computedIcon,pack:e.iconPack,both:"",size:e.newIconSize}})],1):e._e(),i("div",{staticClass:"media-content"},[e._t("default")],2)])]):e._e()]):e._e()])},staticRenderFns:[]},void 0,{name:"BMessage",mixins:[Ne],props:{ariaCloseLabel:String},data:function(){return{newIconSize:this.iconSize||this.size||"is-large"}}},void 0,!1,void 0,void 0,void 0),je={install:function(e){B(e,Ve)}};P(je);var He={open:function(e){var t;"string"==typeof e&&(e={content:e});var i;e.parent&&(t=e.parent,delete e.parent),Array.isArray(e.content)&&(i=e.content,delete e.content);var s=f({programmatic:!0},e),n=new(("undefined"!=typeof window&&window.Vue?window.Vue:Le||A).extend(_e))({parent:t,el:document.createElement("div"),propsData:s});return i&&(n.$slots.default=i,n.$forceUpdate()),n}},qe={install:function(e){B(Le=e,_e),z(e,"modal",He)}};P(qe);var Ue,We=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:e.animation}},[i("article",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"notification",class:[e.type,e.position]},[e.closable?i("button",{staticClass:"delete",attrs:{type:"button","aria-label":e.ariaCloseLabel},on:{click:e.close}}):e._e(),e.$slots.default||e.message?i("div",{staticClass:"media"},[e.computedIcon&&e.hasIcon?i("div",{staticClass:"media-left"},[i("b-icon",{attrs:{icon:e.computedIcon,pack:e.iconPack,both:"",size:"is-large","aria-hidden":""}})],1):e._e(),i("div",{staticClass:"media-content"},[e.$slots.default?[e._t("default")]:[i("p",{staticClass:"text",domProps:{innerHTML:e._s(e.message)}})]],2)]):e._e()])])},staticRenderFns:[]},void 0,{name:"BNotification",mixins:[Ne],props:{position:String,ariaCloseLabel:String,animation:{type:String,default:"fade"}}},void 0,!1,void 0,void 0,void 0),Ye={props:{type:{type:String,default:"is-dark"},message:[String,Array],duration:Number,queue:{type:Boolean,default:void 0},position:{type:String,default:"is-top",validator:function(e){return-1<["is-top-right","is-top","is-top-left","is-bottom-right","is-bottom","is-bottom-left"].indexOf(e)}},container:String},data:function(){return{isActive:!1,parentTop:null,parentBottom:null,newContainer:this.container||F.defaultContainerElement}},computed:{correctParent:function(){switch(this.position){case"is-top-right":case"is-top":case"is-top-left":return this.parentTop;case"is-bottom-right":case"is-bottom":case"is-bottom-left":return this.parentBottom}},transition:function(){switch(this.position){case"is-top-right":case"is-top":case"is-top-left":return{enter:"fadeInDown",leave:"fadeOut"};case"is-bottom-right":case"is-bottom":case"is-bottom-left":return{enter:"fadeInUp",leave:"fadeOut"}}}},methods:{shouldQueue:function(){return!(void 0!==this.queue?!this.queue:!F.defaultNoticeQueue)&&(0<this.parentTop.childElementCount||0<this.parentBottom.childElementCount)},close:function(){var e=this;clearTimeout(this.timer),this.isActive=!1,this.$emit("close"),setTimeout(function(){e.$destroy(),v(e.$el)},150)},showNotice:function(){var e=this;this.shouldQueue()?setTimeout(function(){return e.showNotice()},250):(this.correctParent.insertAdjacentElement("afterbegin",this.$el),this.isActive=!0,this.indefinite||(this.timer=setTimeout(function(){return e.close()},this.newDuration)))},setupContainer:function(){var e;this.parentTop=document.querySelector((this.newContainer?this.newContainer:"body")+">.notices.is-top"),this.parentBottom=document.querySelector((this.newContainer?this.newContainer:"body")+">.notices.is-bottom"),this.parentTop&&this.parentBottom||(this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="notices is-top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="notices is-bottom"),(e=document.querySelector(this.newContainer)||document.body).appendChild(this.parentTop),e.appendChild(this.parentBottom),this.newContainer&&(this.parentTop.classList.add("has-custom-container"),this.parentBottom.classList.add("has-custom-container")))}},beforeMount:function(){this.setupContainer()},mounted:function(){this.showNotice()}},Ke=E({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-notification",e._b({on:{close:e.close}},"b-notification",e.$options.propsData,!1),[e._t("default")],2)},staticRenderFns:[]},void 0,{name:"BNotificationNotice",mixins:[Ye],props:{indefinite:{type:Boolean,default:!1}},data:function(){return{newDuration:this.duration||F.defaultNotificationDuration}}},void 0,!1,void 0,void 0,void 0),Xe={open:function(e){var t;"string"==typeof e&&(e={message:e});var i,s={position:F.defaultNotificationPosition||"is-top-right"};e.parent&&(t=e.parent,delete e.parent),Array.isArray(e.message)&&(i=e.message,delete e.message),e.active=!1;var n=f(s,e),a=new(("undefined"!=typeof window&&window.Vue?window.Vue:Ue||A).extend(Ke))({parent:t,el:document.createElement("div"),propsData:n});return i&&(a.$slots.default=i,a.$forceUpdate()),a.$children[0].isActive=!0,a}},Ge={install:function(e){B(Ue=e,We),z(e,"notification",Xe)}};P(Ge);var Qe,Je=E({render:function(){var e,t=this,i=t.$createElement;return(t._self._c||i)(t.tag,t._b({tag:"component",staticClass:"pagination-link",class:((e={"is-current":t.page.isCurrent})[t.page.class]=!0,e),attrs:{role:"button",href:t.href,disabled:t.isDisabled,"aria-label":t.page["aria-label"],"aria-current":t.page.isCurrent},on:{click:function(e){return e.preventDefault(),t.page.click(e)}}},"component",t.$attrs,!1),[t._t("default",[t._v(t._s(t.page.number))])],2)},staticRenderFns:[]},void 0,{name:"BPaginationButton",props:{page:{type:Object,required:!0},tag:{type:String,default:"a",validator:function(e){return 0<=F.defaultLinkTags.indexOf(e)}},disabled:{type:Boolean,default:!1}},computed:{href:function(){if("a"===this.tag)return"#"},isDisabled:function(){return this.disabled||this.page.disabled}}},void 0,!1,void 0,void 0,void 0),Ze=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",{staticClass:"pagination",class:t.rootClasses},[t.$scopedSlots.previous?t._t("previous",[i("b-icon",{attrs:{icon:t.iconPrev,pack:t.iconPack,both:"","aria-hidden":"true"}})],{page:t.getPage(t.current-1,{disabled:!t.hasPrev,class:"pagination-previous","aria-label":t.ariaPreviousLabel})}):i("BPaginationButton",{staticClass:"pagination-previous",attrs:{disabled:!t.hasPrev,page:t.getPage(t.current-1)}},[i("b-icon",{attrs:{icon:t.iconPrev,pack:t.iconPack,both:"","aria-hidden":"true"}})],1),t.$scopedSlots.next?t._t("next",[i("b-icon",{attrs:{icon:t.iconNext,pack:t.iconPack,both:"","aria-hidden":"true"}})],{page:t.getPage(t.current+1,{disabled:!t.hasNext,class:"pagination-next","aria-label":t.ariaNextLabel})}):i("BPaginationButton",{staticClass:"pagination-next",attrs:{disabled:!t.hasNext,page:t.getPage(t.current+1)}},[i("b-icon",{attrs:{icon:t.iconNext,pack:t.iconPack,both:"","aria-hidden":"true"}})],1),t.simple?i("small",{staticClass:"info"},[1==t.perPage?[t._v(" "+t._s(t.firstItem)+" / "+t._s(t.total)+" ")]:[t._v(" "+t._s(t.firstItem)+"-"+t._s(Math.min(t.current*t.perPage,t.total))+" / "+t._s(t.total)+" ")]],2):i("ul",{staticClass:"pagination-list"},[t.hasFirst?i("li",[t.$scopedSlots.default?t._t("default",null,{page:t.getPage(1)}):i("BPaginationButton",{attrs:{page:t.getPage(1)}})],2):t._e(),t.hasFirstEllipsis?i("li",[i("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):t._e(),t._l(t.pagesInRange,function(e){return i("li",{key:e.number},[t.$scopedSlots.default?t._t("default",null,{page:e}):i("BPaginationButton",{attrs:{page:e}})],2)}),t.hasLastEllipsis?i("li",[i("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):t._e(),t.hasLast?i("li",[t.$scopedSlots.default?t._t("default",null,{page:t.getPage(t.pageCount)}):i("BPaginationButton",{attrs:{page:t.getPage(t.pageCount)}})],2):t._e()],2)],2)},staticRenderFns:[]},void 0,{name:"BPagination",components:(o(Qe={},R.name,R),o(Qe,Je.name,Je),Qe),model:{prop:"current",event:"update:current"},props:{total:[Number,String],perPage:{type:[Number,String],default:20},current:{type:[Number,String],default:1},rangeBefore:{type:[Number,String],default:1},rangeAfter:{type:[Number,String],default:1},size:String,simple:Boolean,rounded:Boolean,order:String,iconPack:String,iconPrev:{type:String,default:function(){return F.defaultIconPrev}},iconNext:{type:String,default:function(){return F.defaultIconNext}},ariaNextLabel:String,ariaPreviousLabel:String,ariaPageLabel:String,ariaCurrentLabel:String},computed:{rootClasses:function(){return[this.order,this.size,{"is-simple":this.simple,"is-rounded":this.rounded}]},beforeCurrent:function(){return parseInt(this.rangeBefore)},afterCurrent:function(){return parseInt(this.rangeAfter)},pageCount:function(){return Math.ceil(this.total/this.perPage)},firstItem:function(){var e=this.current*this.perPage-this.perPage+1;return 0<=e?e:0},hasPrev:function(){return 1<this.current},hasFirst:function(){return this.current>=2+this.beforeCurrent},hasFirstEllipsis:function(){return this.current>=this.beforeCurrent+4},hasLast:function(){return this.current<=this.pageCount-(1+this.afterCurrent)},hasLastEllipsis:function(){return this.current<this.pageCount-(2+this.afterCurrent)},hasNext:function(){return this.current<this.pageCount},pagesInRange:function(){if(!this.simple){var e=Math.max(1,this.current-this.beforeCurrent);e-1==2&&e--;var t=Math.min(this.current+this.afterCurrent,this.pageCount);this.pageCount-t==2&&t++;for(var i=[],s=e;s<=t;s++)i.push(this.getPage(s));return i}}},watch:{pageCount:function(e){this.current>e&&this.last()}},methods:{prev:function(e){this.changePage(this.current-1,e)},next:function(e){this.changePage(this.current+1,e)},first:function(e){this.changePage(1,e)},last:function(e){this.changePage(this.pageCount,e)},changePage:function(e,t){this.current===e||e<1||e>this.pageCount||(this.$emit("update:current",e),this.$emit("change",e),t&&t.target&&this.$nextTick(function(){return t.target.focus()}))},getPage:function(t,e){var i=this,s=1<arguments.length&&void 0!==e?e:{};return{number:t,isCurrent:this.current===t,click:function(e){return i.changePage(t,e)},disabled:s.disabled||!1,class:s.class||"","aria-label":s["aria-label"]||this.getAriaPageLabel(t,this.current===t)}},getAriaPageLabel:function(e,t){return!this.ariaPageLabel||t&&this.ariaCurrentLabel?this.ariaPageLabel&&t&&this.ariaCurrentLabel?this.ariaCurrentLabel+", "+this.ariaPageLabel+" "+e+".":null:this.ariaPageLabel+" "+e+"."}}},void 0,!1,void 0,void 0,void 0),et={install:function(e){B(e,Ze),B(e,Je)}};P(et);var tt=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"progress-wrapper"},[i("progress",{ref:"progress",staticClass:"progress",class:e.newType,attrs:{max:e.max},domProps:{value:e.value}},[e._v(e._s(e.newValue))]),e.showValue?i("p",{staticClass:"progress-value"},[e._t("default",[e._v(e._s(e.newValue))])],2):e._e()])},staticRenderFns:[]},void 0,{name:"BProgress",props:{type:{type:[String,Object],default:"is-darkgrey"},size:String,value:{type:Number,default:void 0},max:{type:Number,default:100},showValue:{type:Boolean,default:!1},format:{type:String,default:"raw",validator:function(e){return 0<=["raw","percent"].indexOf(e)}},precision:{type:Number,default:2},keepTrailingZeroes:{type:Boolean,default:!1},locale:{type:[String,Array],default:function(){return F.defaultLocale}}},computed:{isIndeterminate:function(){return void 0===this.value||null===this.value},newType:function(){return[this.size,this.type,{"is-more-than-half":this.value&&this.value>this.max/2}]},newValue:function(){if(void 0!==this.value&&null!==this.value&&!isNaN(this.value)){var e=this.keepTrailingZeroes?this.precision:0,t=this.precision;return"percent"===this.format?new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:e,maximumFractionDigits:t}).format(this.value/this.max):new Intl.NumberFormat(this.locale,{minimumFractionDigits:e,maximumFractionDigits:t}).format(this.value)}}},watch:{isIndeterminate:function(e){var t=this;this.$nextTick(function(){t.$refs.progress&&(e?t.$refs.progress.removeAttribute("value"):t.$refs.progress.setAttribute("value",t.value))})}}},void 0,!1,void 0,void 0,void 0),it={install:function(e){B(e,tt)}};P(it);var st=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{ref:"label",staticClass:"b-radio radio",class:[t.size,{"is-disabled":t.disabled}],attrs:{disabled:t.disabled},on:{click:t.focus,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.$refs.label.click())}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"radio",disabled:t.disabled,required:t.required,name:t.name},domProps:{value:t.nativeValue,checked:t._q(t.computedValue,t.nativeValue)},on:{click:function(e){e.stopPropagation()},change:function(){t.computedValue=t.nativeValue}}}),i("span",{staticClass:"check",class:t.type}),i("span",{staticClass:"control-label"},[t._t("default")],2)])},staticRenderFns:[]},void 0,{name:"BRadio",mixins:[q]},void 0,!1,void 0,void 0,void 0),nt=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control",class:{"is-expanded":t.expanded}},[i("label",{ref:"label",staticClass:"b-radio radio button",class:[t.newValue===t.nativeValue?t.type:null,t.size,{"is-disabled":t.disabled,"is-focused":t.isFocused}],attrs:{disabled:t.disabled},on:{click:t.focus,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.$refs.label.click())}}},[t._t("default"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"radio",disabled:t.disabled,required:t.required,name:t.name},domProps:{value:t.nativeValue,checked:t._q(t.computedValue,t.nativeValue)},on:{click:function(e){e.stopPropagation()},focus:function(){t.isFocused=!0},blur:function(){t.isFocused=!1},change:function(){t.computedValue=t.nativeValue}}})],2)])},staticRenderFns:[]},void 0,{name:"BRadioButton",mixins:[q],props:{type:{type:String,default:"is-primary"},expanded:Boolean},data:function(){return{isFocused:!1}}},void 0,!1,void 0,void 0,void 0),at={install:function(e){B(e,st),B(e,nt)}};P(at);var ot={install:function(e){B(e,pe)}};P(ot);var rt=E({},void 0,{name:"BSkeleton",functional:!0,props:{active:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:[Number,String],height:[Number,String],circle:Boolean,rounded:{type:Boolean,default:!0},count:{type:Number,default:1},position:{type:String,default:"",validator:function(e){return-1<["","is-centered","is-right"].indexOf(e)}},size:String},render:function(e,t){if(t.props.active){for(var i=[],s=t.props.width,n=t.props.height,a=0;a<t.props.count;a++)i.push(e("div",{staticClass:"b-skeleton-item",class:{"is-rounded":t.props.rounded},key:a,style:{height:void 0===n?null:isNaN(n)?n:n+"px",width:void 0===s?null:isNaN(s)?s:s+"px",borderRadius:t.props.circle?"50%":null}}));return e("div",{staticClass:"b-skeleton",class:[t.props.size,t.props.position,{"is-animated":t.props.animated}]},i)}}},void 0,void 0,void 0,void 0,void 0),lt={install:function(e){B(e,rt)}};P(lt);var ct,dt=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{ref:"tooltip",class:t.rootClasses},[i("transition",{attrs:{name:t.newAnimation}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.active&&(t.isActive||t.always),expression:"active && (isActive || always)"}],ref:"content",class:["tooltip-content",t.contentClass],style:t.style},[t.label?[t._v(t._s(t.label))]:t.$slots.content?[t._t("content")]:t._e()],2)]),i("div",{ref:"trigger",staticClass:"tooltip-trigger",on:{click:t.onClick,contextmenu:t.onContextMenu,mouseenter:t.onHover,"!focus":function(e){return t.onFocus(e)},mouseleave:t.close}},[t._t("default")],2)],1)},staticRenderFns:[]},void 0,{name:"BTooltip",props:{active:{type:Boolean,default:!0},type:{type:String,default:function(){return F.defaultTooltipType}},label:String,delay:{type:Number,default:function(){return F.defaultTooltipDelay}},position:{type:String,default:"is-top",validator:function(e){return-1<["is-top","is-bottom","is-left","is-right"].indexOf(e)}},triggers:{type:Array,default:function(){return["hover"]}},always:Boolean,square:Boolean,dashed:Boolean,multilined:Boolean,size:{type:String,default:"is-medium"},appendToBody:Boolean,animated:{type:Boolean,default:!0},animation:{type:String,default:"fade"},contentClass:String,autoClose:{type:[Array,Boolean],default:!0}},data:function(){return{isActive:!1,style:{},timer:null,_bodyEl:void 0}},computed:{rootClasses:function(){return["b-tooltip",this.type,this.position,this.size,{"is-square":this.square,"is-always":this.always,"is-multiline":this.multilined,"is-dashed":this.dashed}]},newAnimation:function(){return this.animated?this.animation:void 0}},watch:{isActive:function(){this.appendToBody&&this.updateAppendToBody()}},methods:{updateAppendToBody:function(){var i,e,t,s,n,a=this.$refs.tooltip,o=this.$refs.trigger;a&&o&&((i=this.$data._bodyEl.children[0]).classList.forEach(function(e){return i.classList.remove(e)}),this.$vnode&&this.$vnode.data&&this.$vnode.data.staticClass&&i.classList.add(this.$vnode.data.staticClass),this.rootClasses.forEach(function(e){if("object"===l(e))for(var t in e)e[t]&&i.classList.add(t);else i.classList.add(e)}),i.style.width="".concat(o.clientWidth,"px"),i.style.height="".concat(o.clientHeight,"px"),t=(e=o.getBoundingClientRect()).top+window.scrollY,s=e.left+window.scrollX,(n=this.$data._bodyEl).style.position="absolute",n.style.top="".concat(t,"px"),n.style.left="".concat(s,"px"),n.style.zIndex=this.isActive||this.always?"99":"-1")},onClick:function(){var e=this;this.triggers.indexOf("click")<0||this.$nextTick(function(){setTimeout(function(){return e.open()})})},onHover:function(){this.triggers.indexOf("hover")<0||this.open()},onContextMenu:function(e){this.triggers.indexOf("contextmenu")<0||(e.preventDefault(),this.open())},onFocus:function(){this.triggers.indexOf("focus")<0||this.open()},open:function(){var e=this;this.delay?this.timer=setTimeout(function(){e.isActive=!0,e.timer=null},this.delay):this.isActive=!0},close:function(){"boolean"==typeof this.autoClose&&(this.isActive=!this.autoClose,this.autoClose&&this.timer&&clearTimeout(this.timer))},clickedOutside:function(e){this.isActive&&Array.isArray(this.autoClose)&&(0<=this.autoClose.indexOf("outside")?this.isInWhiteList(e.target)||(this.isActive=!1):0<=this.autoClose.indexOf("inside")&&this.isInWhiteList(e.target)&&(this.isActive=!1))},keyPress:function(e){var t=e.key;!this.isActive||"Escape"!==t&&"Esc"!==t||Array.isArray(this.autoClose)&&0<=this.autoClose.indexOf("escape")&&(this.isActive=!1)},isInWhiteList:function(e){if(e===this.$refs.content)return!0;if(void 0!==this.$refs.content){var t=this.$refs.content.querySelectorAll("*"),i=!0,s=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){if(e===a.value)return!0}}catch(e){s=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}}return!1}},mounted:function(){this.appendToBody&&"undefined"!=typeof window&&(this.$data._bodyEl=g(this.$refs.content),this.updateAppendToBody())},created:function(){"undefined"!=typeof window&&(document.addEventListener("click",this.clickedOutside),document.addEventListener("keyup",this.keyPress))},beforeDestroy:function(){"undefined"!=typeof window&&(document.removeEventListener("click",this.clickedOutside),document.removeEventListener("keyup",this.keyPress)),this.appendToBody&&v(this.$data._bodyEl)}},void 0,!1,void 0,void 0,void 0),ut=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-slider-thumb-wrapper",class:{"is-dragging":t.dragging},style:t.wrapperStyle},[i("b-tooltip",{attrs:{label:t.tooltipLabel,type:t.type,always:t.dragging||t.isFocused,active:!t.disabled&&t.tooltip}},[i("div",t._b({staticClass:"b-slider-thumb",attrs:{tabindex:!t.disabled&&0},on:{mousedown:t.onButtonDown,touchstart:t.onButtonDown,focus:t.onFocus,blur:t.onBlur,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.preventDefault(),t.onLeftKeyDown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:(e.preventDefault(),t.onRightKeyDown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onLeftKeyDown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onRightKeyDown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"home",void 0,e.key,void 0)?null:(e.preventDefault(),t.onHomeKeyDown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"end",void 0,e.key,void 0)?null:(e.preventDefault(),t.onEndKeyDown(e))}]}},"div",t.$attrs,!1))])],1)},staticRenderFns:[]},void 0,{name:"BSliderThumb",components:o({},dt.name,dt),inheritAttrs:!1,props:{value:{type:Number,default:0},type:{type:String,default:""},tooltip:{type:Boolean,default:!0},customFormatter:Function},data:function(){return{isFocused:!1,dragging:!1,startX:0,startPosition:0,newPosition:null,oldValue:this.value}},computed:{disabled:function(){return this.$parent.disabled},max:function(){return this.$parent.max},min:function(){return this.$parent.min},step:function(){return this.$parent.step},precision:function(){return this.$parent.precision},currentPosition:function(){return"".concat((this.value-this.min)/(this.max-this.min)*100,"%")},wrapperStyle:function(){return{left:this.currentPosition}},tooltipLabel:function(){return void 0!==this.customFormatter?this.customFormatter(this.value):this.value.toString()}},methods:{onFocus:function(){this.isFocused=!0},onBlur:function(){this.isFocused=!1},onButtonDown:function(e){this.disabled||(e.preventDefault(),this.onDragStart(e),"undefined"!=typeof window&&(document.addEventListener("mousemove",this.onDragging),document.addEventListener("touchmove",this.onDragging),document.addEventListener("mouseup",this.onDragEnd),document.addEventListener("touchend",this.onDragEnd),document.addEventListener("contextmenu",this.onDragEnd)))},onLeftKeyDown:function(){this.disabled||this.value===this.min||(this.newPosition=parseFloat(this.currentPosition)-this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitValue("change"))},onRightKeyDown:function(){this.disabled||this.value===this.max||(this.newPosition=parseFloat(this.currentPosition)+this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitValue("change"))},onHomeKeyDown:function(){this.disabled||this.value===this.min||(this.newPosition=0,this.setPosition(this.newPosition),this.$parent.emitValue("change"))},onEndKeyDown:function(){this.disabled||this.value===this.max||(this.newPosition=100,this.setPosition(this.newPosition),this.$parent.emitValue("change"))},onDragStart:function(e){this.dragging=!0,this.$emit("dragstart"),"touchstart"===e.type&&(e.clientX=e.touches[0].clientX),this.startX=e.clientX,this.startPosition=parseFloat(this.currentPosition),this.newPosition=this.startPosition},onDragging:function(e){var t;this.dragging&&("touchmove"===e.type&&(e.clientX=e.touches[0].clientX),t=(e.clientX-this.startX)/this.$parent.sliderSize()*100,this.newPosition=this.startPosition+t,this.setPosition(this.newPosition))},onDragEnd:function(){this.dragging=!1,this.$emit("dragend"),this.value!==this.oldValue&&this.$parent.emitValue("change"),this.setPosition(this.newPosition),"undefined"!=typeof window&&(document.removeEventListener("mousemove",this.onDragging),document.removeEventListener("touchmove",this.onDragging),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("touchend",this.onDragEnd),document.removeEventListener("contextmenu",this.onDragEnd))},setPosition:function(e){var t,i;null===e||isNaN(e)||(e<0?e=0:100<e&&(e=100),t=100/((this.max-this.min)/this.step),i=Math.round(e/t)*t/100*(this.max-this.min)+this.min,i=parseFloat(i.toFixed(this.precision)),this.$emit("input",i),this.dragging||i===this.oldValue||(this.oldValue=i))}}},void 0,!1,void 0,void 0,void 0),pt=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-slider-tick",class:{"is-tick-hidden":e.hidden},style:e.getTickStyle(e.position)},[e.$slots.default?i("span",{staticClass:"b-slider-tick-label"},[e._t("default")],2):e._e()])},staticRenderFns:[]},void 0,{name:"BSliderTick",props:{value:{type:Number,default:0}},computed:{position:function(){var e=(this.value-this.$parent.min)/(this.$parent.max-this.$parent.min)*100;return 0<=e&&e<=100?e:0},hidden:function(){return this.value===this.$parent.min||this.value===this.$parent.max}},methods:{getTickStyle:function(e){return{left:e+"%"}}},created:function(){if(!this.$parent.$data._isSlider)throw this.$destroy(),new Error("You should wrap bSliderTick on a bSlider")}},void 0,!1,void 0,void 0,void 0),ht=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-slider",class:[t.size,t.type,t.rootClasses],on:{click:t.onSliderClick}},[i("div",{ref:"slider",staticClass:"b-slider-track"},[i("div",{staticClass:"b-slider-fill",style:t.barStyle}),t.ticks?t._l(t.tickValues,function(e,t){return i("b-slider-tick",{key:t,attrs:{value:e}})}):t._e(),t._t("default"),i("b-slider-thumb",{ref:"button1",attrs:{type:t.newTooltipType,tooltip:t.tooltip,"custom-formatter":t.customFormatter,role:"slider","aria-valuenow":t.value1,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-orientation":"horizontal","aria-label":Array.isArray(t.ariaLabel)?t.ariaLabel[0]:t.ariaLabel,"aria-disabled":t.disabled},on:{dragstart:t.onDragStart,dragend:t.onDragEnd},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t.isRange?i("b-slider-thumb",{ref:"button2",attrs:{type:t.newTooltipType,tooltip:t.tooltip,"custom-formatter":t.customFormatter,role:"slider","aria-valuenow":t.value2,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-orientation":"horizontal","aria-label":Array.isArray(t.ariaLabel)?t.ariaLabel[1]:"","aria-disabled":t.disabled},on:{dragstart:t.onDragStart,dragend:t.onDragEnd},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}}):t._e()],2)])},staticRenderFns:[]},void 0,{name:"BSlider",components:(o(ct={},ut.name,ut),o(ct,pt.name,pt),ct),props:{value:{type:[Number,Array],default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},type:{type:String,default:"is-primary"},size:String,ticks:{type:Boolean,default:!1},tooltip:{type:Boolean,default:!0},tooltipType:String,rounded:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},customFormatter:Function,ariaLabel:[String,Array],biggerSliderFocus:{type:Boolean,default:!1}},data:function(){return{value1:null,value2:null,dragging:!1,isRange:!1,_isSlider:!0}},computed:{newTooltipType:function(){return this.tooltipType?this.tooltipType:this.type},tickValues:function(){if(!this.ticks||this.min>this.max||0===this.step)return[];for(var e=[],t=this.min+this.step;t<this.max;t+=this.step)e.push(t);return e},minValue:function(){return Math.min(this.value1,this.value2)},maxValue:function(){return Math.max(this.value1,this.value2)},barSize:function(){return this.isRange?"".concat(100*(this.maxValue-this.minValue)/(this.max-this.min),"%"):"".concat(100*(this.value1-this.min)/(this.max-this.min),"%")},barStart:function(){return this.isRange?"".concat(100*(this.minValue-this.min)/(this.max-this.min),"%"):"0%"},precision:function(){var e=[this.min,this.max,this.step].map(function(e){var t=(""+e).split(".")[1];return t?t.length:0});return Math.max.apply(Math,c(e))},barStyle:function(){return{width:this.barSize,left:this.barStart}},rootClasses:function(){return{"is-rounded":this.rounded,"is-dragging":this.dragging,"is-disabled":this.disabled,"slider-focus":this.biggerSliderFocus}}},watch:{value:function(e){this.setValues(e)},value1:function(){this.onInternalValueUpdate()},value2:function(){this.onInternalValueUpdate()},min:function(){this.setValues(this.value)},max:function(){this.setValues(this.value)}},methods:{setValues:function(e){var t,i;this.min>this.max||(Array.isArray(e)?(this.isRange=!0,t="number"!=typeof e[0]||isNaN(e[0])?this.min:d(e[0],this.min,this.max),i="number"!=typeof e[1]||isNaN(e[1])?this.max:d(e[1],this.min,this.max),this.value1=this.isThumbReversed?i:t,this.value2=this.isThumbReversed?t:i):(this.isRange=!1,this.value1=isNaN(e)?this.min:d(e,this.min,this.max),this.value2=null))},onInternalValueUpdate:function(){this.isRange&&(this.isThumbReversed=this.value1>this.value2),this.lazy&&this.dragging||this.emitValue("input"),this.dragging&&this.emitValue("dragging")},sliderSize:function(){return this.$refs.slider.getBoundingClientRect().width},onSliderClick:function(e){if(!this.disabled&&!this.isTrackClickDisabled){var t=this.$refs.slider.getBoundingClientRect().left,i=(e.clientX-t)/this.sliderSize()*100,s=this.min+i*(this.max-this.min)/100,n=Math.abs(s-this.value1);if(this.isRange){var a=Math.abs(s-this.value2);if(n<=a){if(n<this.step/2)return;this.$refs.button1.setPosition(i)}else{if(a<this.step/2)return;this.$refs.button2.setPosition(i)}}else{if(n<this.step/2)return;this.$refs.button1.setPosition(i)}this.emitValue("change")}},onDragStart:function(){this.dragging=!0,this.$emit("dragstart")},onDragEnd:function(){var e=this;this.isTrackClickDisabled=!0,setTimeout(function(){e.isTrackClickDisabled=!1},0),this.dragging=!1,this.$emit("dragend"),this.lazy&&this.emitValue("input")},emitValue:function(e){this.$emit(e,this.isRange?[this.minValue,this.maxValue]:this.value1)}},created:function(){this.isThumbReversed=!1,this.isTrackClickDisabled=!1,this.setValues(this.value)}},void 0,!1,void 0,void 0,void 0),ft={install:function(e){B(e,ht),B(e,pt)}};P(ft);var mt,vt=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{"enter-active-class":e.transition.enter,"leave-active-class":e.transition.leave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"snackbar",class:[e.type,e.position],attrs:{role:e.actionText?"alertdialog":"alert"}},[e.$slots.default?[e._t("default")]:[i("div",{staticClass:"text",domProps:{innerHTML:e._s(e.message)}})],e.actionText?i("div",{staticClass:"action",class:e.type,on:{click:e.action}},[i("button",{staticClass:"button"},[e._v(e._s(e.actionText))])]):e._e()],2)])},staticRenderFns:[]},void 0,{name:"BSnackbar",mixins:[Ye],props:{actionText:{type:String,default:"OK"},onAction:{type:Function,default:function(){}},indefinite:{type:Boolean,default:!1}},data:function(){return{newDuration:this.duration||F.defaultSnackbarDuration}},methods:{action:function(){this.onAction(),this.close()}}},void 0,!1,void 0,void 0,void 0),gt={open:function(e){var t;"string"==typeof e&&(e={message:e});var i,s={type:"is-success",position:F.defaultSnackbarPosition||"is-bottom-right"};e.parent&&(t=e.parent,delete e.parent),Array.isArray(e.message)&&(i=e.message,delete e.message);var n=f(s,e),a=new(("undefined"!=typeof window&&window.Vue?window.Vue:mt||A).extend(vt))({parent:t,el:document.createElement("div"),propsData:n});return i&&(a.$slots.default=i,a.$forceUpdate()),a}},bt={install:function(e){z(mt=e,"snackbar",gt)}};P(bt);var yt,kt={name:"BSlotComponent",props:{component:{type:Object,required:!0},name:{type:String,default:"default"},scoped:{type:Boolean},props:{type:Object},tag:{type:String,default:"div"},event:{type:String,default:"hook:updated"}},methods:{refresh:function(){this.$forceUpdate()}},created:function(){b(this.component)&&this.component.$on(this.event,this.refresh)},beforeDestroy:function(){b(this.component)&&this.component.$off(this.event,this.refresh)},render:function(e){if(b(this.component))return e(this.tag,{},this.scoped?this.component.$scopedSlots[this.name](this.props):this.component.$slots[this.name])}};var wt,xt=E({render:function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"field table-mobile-sort"},[s("div",{staticClass:"field has-addons"},[i.sortMultiple?s("b-select",{attrs:{expanded:""},model:{value:i.sortMultipleSelect,callback:function(e){i.sortMultipleSelect=e},expression:"sortMultipleSelect"}},i._l(i.columns,function(e,t){return e.sortable?s("option",{key:t,domProps:{value:e}},[i._v(" "+i._s(i.getLabel(e))+" "),i.getSortingObjectOfColumn(e)?[i.columnIsDesc(e)?[i._v(" ↓ ")]:[i._v(" ↑ ")]]:i._e()],2):i._e()}),0):s("b-select",{attrs:{expanded:""},model:{value:i.mobileSort,callback:function(e){i.mobileSort=e},expression:"mobileSort"}},[i.placeholder?[s("option",{directives:[{name:"show",rawName:"v-show",value:i.showPlaceholder,expression:"showPlaceholder"}],attrs:{selected:"",disabled:"",hidden:""},domProps:{value:{}}},[i._v(" "+i._s(i.placeholder)+" ")])]:i._e(),i._l(i.columns,function(e,t){return e.sortable?s("option",{key:t,domProps:{value:e}},[i._v(" "+i._s(e.label)+" ")]):i._e()})],2),s("div",{staticClass:"control"},[i.sortMultiple&&0<i.sortMultipleData.length?[s("button",{staticClass:"button is-primary",on:{click:i.sort}},[s("b-icon",{class:{"is-desc":i.columnIsDesc(i.sortMultipleSelect)},attrs:{icon:i.sortIcon,pack:i.iconPack,size:i.sortIconSize,both:""}})],1),s("button",{staticClass:"button is-primary",on:{click:i.removePriority}},[s("b-icon",{attrs:{icon:"delete",size:i.sortIconSize,both:""}})],1)]:i.sortMultiple?i._e():s("button",{staticClass:"button is-primary",on:{click:i.sort}},[s("b-icon",{directives:[{name:"show",rawName:"v-show",value:i.currentSortColumn===i.mobileSort,expression:"currentSortColumn === mobileSort"}],class:{"is-desc":!i.isAsc},attrs:{icon:i.sortIcon,pack:i.iconPack,size:i.sortIconSize,both:""}})],1)],2)],1)])},staticRenderFns:[]},void 0,{name:"BTableMobileSort",components:(o(yt={},pe.name,pe),o(yt,R.name,R),yt),props:{currentSortColumn:Object,sortMultipleData:Array,isAsc:Boolean,columns:Array,placeholder:String,iconPack:String,sortIcon:{type:String,default:"arrow-up"},sortIconSize:{type:String,default:"is-small"},sortMultiple:{type:Boolean,default:!1}},data:function(){return{sortMultipleSelect:"",mobileSort:this.currentSortColumn,defaultEvent:{shiftKey:!0,altKey:!0,ctrlKey:!0},ignoreSort:!1}},computed:{showPlaceholder:function(){var t=this;return!this.columns||!this.columns.some(function(e){return e===t.mobileSort})}},watch:{sortMultipleSelect:function(e){this.ignoreSort?this.ignoreSort=!1:this.$emit("sort",e,this.defaultEvent)},mobileSort:function(e){this.currentSortColumn!==e&&this.$emit("sort",e,this.defaultEvent)},currentSortColumn:function(e){this.mobileSort=e}},methods:{removePriority:function(){var t=this;this.$emit("removePriority",this.sortMultipleSelect),this.ignoreSort=!0;var i=this.sortMultipleData.filter(function(e){return e.field!==t.sortMultipleSelect.field}).map(function(e){return e.field});this.sortMultipleSelect=this.columns.filter(function(e){return i.includes(e.field)})[0]},getSortingObjectOfColumn:function(t){return this.sortMultipleData.filter(function(e){return e.field===t.field})[0]},columnIsDesc:function(e){var t=this.getSortingObjectOfColumn(e);return!t||!(!t.order||"desc"!==t.order)},getLabel:function(e){var t=this.getSortingObjectOfColumn(e);return t?e.label+"("+(this.sortMultipleData.indexOf(t)+1)+")":e.label},sort:function(){this.$emit("sort",this.sortMultiple?this.sortMultipleSelect:this.mobileSort,this.defaultEvent)}}},void 0,!1,void 0,void 0,void 0),_t=E({},void 0,{name:"BTableColumn",inject:{$table:{name:"$table",default:!1}},props:{label:String,customKey:[String,Number],field:String,meta:[String,Number,Boolean,Function,Object,Array],width:[Number,String],numeric:Boolean,centered:Boolean,searchable:Boolean,sortable:Boolean,visible:{type:Boolean,default:!0},subheading:[String,Number],customSort:Function,sticky:Boolean,headerSelectable:Boolean,headerClass:String,cellClass:String},data:function(){return{newKey:this.customKey||this.label,_isTableColumn:!0}},computed:{rootClasses:function(){return[this.cellClass,{"has-text-right":this.numeric&&!this.centered,"has-text-centered":this.centered,"is-sticky":this.sticky}]},style:function(){return{width:w(this.width)}},hasDefaultSlot:function(){return!!this.$scopedSlots.default},isHeaderUnSelectable:function(){return!this.headerSelectable&&this.sortable}},created:function(){if(!this.$table)throw this.$destroy(),new Error("You should wrap bTableColumn on a bTable");this.$table.refreshSlots()},render:function(){return null}},void 0,void 0,void 0,void 0,void 0),$t=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"top level"},[i("div",{staticClass:"level-left"},[e._t("default")],2),i("div",{staticClass:"level-right"},[e.paginated?i("div",{staticClass:"level-item"},[i("b-pagination",{attrs:{"icon-pack":e.iconPack,total:e.total,"per-page":e.perPage,simple:e.paginationSimple,size:e.paginationSize,current:e.newCurrentPage,rounded:e.rounded,"aria-next-label":e.ariaNextLabel,"aria-previous-label":e.ariaPreviousLabel,"aria-page-label":e.ariaPageLabel,"aria-current-label":e.ariaCurrentLabel},on:{change:e.pageChanged}})],1):e._e()])])},staticRenderFns:[]},void 0,{name:"BTablePagination",components:o({},Ze.name,Ze),props:{paginated:Boolean,total:[Number,String],perPage:[Number,String],currentPage:[Number,String],paginationSimple:Boolean,paginationSize:String,rounded:Boolean,iconPack:String,ariaNextLabel:String,ariaPreviousLabel:String,ariaPageLabel:String,ariaCurrentLabel:String},data:function(){return{newCurrentPage:this.currentPage}},watch:{currentPage:function(e){this.newCurrentPage=e}},methods:{pageChanged:function(e){this.newCurrentPage=0<e?e:1,this.$emit("update:currentPage",this.newCurrentPage),this.$emit("page-change",this.newCurrentPage)}}},void 0,!1,void 0,void 0,void 0),Ct=E({render:function(){var n=this,e=n.$createElement,a=n._self._c||e;return a("div",{staticClass:"b-table"},[n._t("default"),n.mobileCards&&n.hasSortablenewColumns?a("b-table-mobile-sort",{attrs:{"current-sort-column":n.currentSortColumn,"sort-multiple":n.sortMultiple,"sort-multiple-data":n.sortMultipleDataComputed,"is-asc":n.isAsc,columns:n.newColumns,placeholder:n.mobileSortPlaceholder,"icon-pack":n.iconPack,"sort-icon":n.sortIcon,"sort-icon-size":n.sortIconSize},on:{sort:function(e,t){return n.sort(e,null,t)},removePriority:function(e){return n.removeSortingPriority(e)}}}):n._e(),!n.paginated||"top"!==n.paginationPosition&&"both"!==n.paginationPosition?n._e():[n._t("pagination",[a("b-table-pagination",n._b({attrs:{"per-page":n.perPage,paginated:n.paginated,"icon-pack":n.iconPack,total:n.newDataTotal,"current-page":n.newCurrentPage},on:{"update:currentPage":function(e){n.newCurrentPage=e},"update:current-page":function(e){n.newCurrentPage=e},"page-change":function(e){return n.$emit("page-change",e)}}},"b-table-pagination",n.$attrs,!1),[n._t("top-left")],2)])],a("div",{staticClass:"table-wrapper",class:n.tableWrapperClasses,style:n.tableStyle},[a("table",{staticClass:"table",class:n.tableClasses,attrs:{tabindex:!!n.focusable&&0},on:{keydown:[function(e){return!e.type.indexOf("key")&&n._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])||e.target!==e.currentTarget?null:(e.preventDefault(),n.pressedArrow(-1))},function(e){return!e.type.indexOf("key")&&n._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])||e.target!==e.currentTarget?null:(e.preventDefault(),n.pressedArrow(1))}]}},[n.newColumns.length&&n.showHeader?a("thead",[a("tr",[n.showDetailRowIcon?a("th",{attrs:{width:"40px"}}):n._e(),n.checkable&&"left"===n.checkboxPosition?a("th",{staticClass:"checkbox-cell"},[n.headerCheckable?[a("b-checkbox",{attrs:{value:n.isAllChecked,disabled:n.isAllUncheckable},nativeOn:{change:function(e){return n.checkAll(e)}}})]:n._e()],2):n._e(),n._l(n.visibleColumns,function(t,e){return a("th",{key:t.newKey+":"+e+"header",class:[t.headerClass,{"is-current-sort":!n.sortMultiple&&n.currentSortColumn===t,"is-sortable":t.sortable,"is-sticky":t.sticky,"is-unselectable":t.isHeaderUnSelectable}],style:t.style,on:{click:function(e){return e.stopPropagation(),n.sort(t,null,e)}}},[a("div",{staticClass:"th-wrap",class:{"is-numeric":t.numeric,"is-centered":t.centered}},[t.$scopedSlots&&t.$scopedSlots.header?[a("b-slot-component",{attrs:{component:t,scoped:"",name:"header",tag:"span",props:{column:t,index:e}}})]:[a("span",{staticClass:"is-relative"},[n._v(" "+n._s(t.label)+" "),n.sortMultiple&&n.sortMultipleDataComputed&&0<n.sortMultipleDataComputed.length&&0<n.sortMultipleDataComputed.filter(function(e){return e.field===t.field}).length?[a("b-icon",{class:{"is-desc":"desc"===n.sortMultipleDataComputed.filter(function(e){return e.field===t.field})[0].order},attrs:{icon:n.sortIcon,pack:n.iconPack,both:"",size:n.sortIconSize}}),n._v(" "+n._s(n.findIndexOfSortData(t))+" "),a("button",{staticClass:"delete is-small multi-sort-cancel-icon",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),n.removeSortingPriority(t)}}})]:a("b-icon",{staticClass:"sort-icon",class:{"is-desc":!n.isAsc,"is-invisible":n.currentSortColumn!==t},attrs:{icon:n.sortIcon,pack:n.iconPack,both:"",size:n.sortIconSize}})],2)]],2)])}),n.checkable&&"right"===n.checkboxPosition?a("th",{staticClass:"checkbox-cell"},[n.headerCheckable?[a("b-checkbox",{attrs:{value:n.isAllChecked,disabled:n.isAllUncheckable},nativeOn:{change:function(e){return n.checkAll(e)}}})]:n._e()],2):n._e()],2),n.hasCustomSubheadings?a("tr",{staticClass:"is-subheading"},[n.showDetailRowIcon?a("th",{attrs:{width:"40px"}}):n._e(),n.checkable&&"left"===n.checkboxPosition?a("th"):n._e(),n._l(n.visibleColumns,function(e,t){return a("th",{key:e.newKey+":"+t+"subheading",style:e.style},[a("div",{staticClass:"th-wrap",class:{"is-numeric":e.numeric,"is-centered":e.centered}},[e.$scopedSlots&&e.$scopedSlots.subheading?[a("b-slot-component",{attrs:{component:e,scoped:"",name:"subheading",tag:"span",props:{column:e,index:t}}})]:[n._v(n._s(e.subheading))]],2)])}),n.checkable&&"right"===n.checkboxPosition?a("th"):n._e()],2):n._e(),n.hasSearchablenewColumns?a("tr",[n.showDetailRowIcon?a("th",{attrs:{width:"40px"}}):n._e(),n.checkable&&"left"===n.checkboxPosition?a("th"):n._e(),n._l(n.visibleColumns,function(t,e){return a("th",{key:t.newKey+":"+e+"searchable",class:{"is-sticky":t.sticky},style:t.style},[a("div",{staticClass:"th-wrap"},[t.searchable?[t.$scopedSlots&&t.$scopedSlots.searchable?[a("b-slot-component",{attrs:{component:t,scoped:!0,name:"searchable",tag:"span",props:{column:t,filters:n.filters}}})]:a("b-input",{attrs:{type:t.numeric?"number":"text"},nativeOn:n._d({},[n.filtersEvent,function(e){return n.onFiltersEvent(e)}]),model:{value:n.filters[t.field],callback:function(e){n.$set(n.filters,t.field,e)},expression:"filters[column.field]"}})]:n._e()],2)])}),n.checkable&&"right"===n.checkboxPosition?a("th"):n._e()],2):n._e()]):n._e(),a("tbody",[n._l(n.visibleData,function(i,s){return[a("tr",{key:n.customRowKey?i[n.customRowKey]:s,class:[n.rowClass(i,s),{"is-selected":n.isRowSelected(i,n.selected),"is-checked":n.isRowChecked(i)}],attrs:{draggable:n.draggable},on:{click:function(){return n.selectRow(i)},dblclick:function(){return n.$emit("dblclick",i)},mouseenter:function(){n.$listeners.mouseenter&&n.$emit("mouseenter",i)},mouseleave:function(){n.$listeners.mouseleave&&n.$emit("mouseleave",i)},contextmenu:function(e){return n.$emit("contextmenu",i,e)},dragstart:function(e){return n.handleDragStart(e,i,s)},dragend:function(e){return n.handleDragEnd(e,i,s)},drop:function(e){return n.handleDrop(e,i,s)},dragover:function(e){return n.handleDragOver(e,i,s)},dragleave:function(e){return n.handleDragLeave(e,i,s)}}},[n.showDetailRowIcon?a("td",{staticClass:"chevron-cell"},[n.hasDetailedVisible(i)?a("a",{attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),n.toggleDetails(i)}}},[a("b-icon",{class:{"is-expanded":n.isVisibleDetailRow(i)},attrs:{icon:"chevron-right",pack:n.iconPack,both:""}})],1):n._e()]):n._e(),n.checkable&&"left"===n.checkboxPosition?a("td",{staticClass:"checkbox-cell"},[a("b-checkbox",{attrs:{disabled:!n.isRowCheckable(i),value:n.isRowChecked(i)},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.checkRow(i,s,e)}}})],1):n._e(),n._l(n.visibleColumns,function(e,t){return[e.$scopedSlots&&e.$scopedSlots.default?[a("b-slot-component",{key:e.newKey+":"+s+":"+t,class:e.rootClasses,attrs:{component:e,scoped:"",name:"default",tag:"td","data-label":e.label,props:{row:i,column:e,index:s}}})]:n._e()]}),n.checkable&&"right"===n.checkboxPosition?a("td",{staticClass:"checkbox-cell"},[a("b-checkbox",{attrs:{disabled:!n.isRowCheckable(i),value:n.isRowChecked(i)},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),n.checkRow(i,s,e)}}})],1):n._e()],2),n.isActiveDetailRow(i)?a("tr",{key:(n.customRowKey?i[n.customRowKey]:s)+"detail",staticClass:"detail"},[a("td",{attrs:{colspan:n.columnCount}},[a("div",{staticClass:"detail-container"},[n._t("detail",null,{row:i,index:s})],2)])]):n._e(),n.isActiveCustomDetailRow(i)?n._t("detail",null,{row:i,index:s}):n._e()]}),n.visibleData.length?n._e():a("tr",{staticClass:"is-empty"},[a("td",{attrs:{colspan:n.columnCount}},[n._t("empty")],2)])],2),void 0!==n.$slots.footer?a("tfoot",[a("tr",{staticClass:"table-footer"},[n.hasCustomFooterSlot()?n._t("footer"):a("th",{attrs:{colspan:n.columnCount}},[n._t("footer")],2)],2)]):n._e()]),n.loading?[n._t("loading",[a("b-loading",{attrs:{"is-full-page":!1,active:n.loading},on:{"update:active":function(e){n.loading=e}}})])]:n._e()],2),n.checkable&&n.hasBottomLeftSlot()||n.paginated&&("bottom"===n.paginationPosition||"both"===n.paginationPosition)?[n._t("pagination",[a("b-table-pagination",n._b({attrs:{"per-page":n.perPage,paginated:n.paginated,"icon-pack":n.iconPack,total:n.newDataTotal,"current-page":n.newCurrentPage},on:{"update:currentPage":function(e){n.newCurrentPage=e},"update:current-page":function(e){n.newCurrentPage=e},"page-change":function(e){return n.$emit("page-change",e)}}},"b-table-pagination",n.$attrs,!1),[n._t("bottom-left")],2)])]:n._e()],2)},staticRenderFns:[]},void 0,{name:"BTable",components:(o(wt={},U.name,U),o(wt,R.name,R),o(wt,I.name,I),o(wt,Ee.name,Ee),o(wt,kt.name,kt),o(wt,xt.name,xt),o(wt,_t.name,_t),o(wt,$t.name,$t),wt),inheritAttrs:!1,provide:function(){return{$table:this}},props:{data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},bordered:Boolean,striped:Boolean,narrowed:Boolean,hoverable:Boolean,loading:Boolean,detailed:Boolean,checkable:Boolean,headerCheckable:{type:Boolean,default:!0},checkboxPosition:{type:String,default:"left",validator:function(e){return 0<=["left","right"].indexOf(e)}},selected:Object,isRowSelectable:{type:Function,default:function(){return!0}},focusable:Boolean,customIsChecked:Function,isRowCheckable:{type:Function,default:function(){return!0}},checkedRows:{type:Array,default:function(){return[]}},mobileCards:{type:Boolean,default:!0},defaultSort:[String,Array],defaultSortDirection:{type:String,default:"asc"},sortIcon:{type:String,default:"arrow-up"},sortIconSize:{type:String,default:"is-small"},sortMultiple:{type:Boolean,default:!1},sortMultipleData:{type:Array,default:function(){return[]}},sortMultipleKey:{type:String,default:null},paginated:Boolean,currentPage:{type:Number,default:1},perPage:{type:[Number,String],default:20},showDetailIcon:{type:Boolean,default:!0},paginationPosition:{type:String,default:"bottom",validator:function(e){return 0<=["bottom","top","both"].indexOf(e)}},backendSorting:Boolean,backendFiltering:Boolean,rowClass:{type:Function,default:function(){return""}},openedDetailed:{type:Array,default:function(){return[]}},hasDetailedVisible:{type:Function,default:function(){return!0}},detailKey:{type:String,default:""},customDetailRow:{type:Boolean,default:!1},backendPagination:Boolean,total:{type:[Number,String],default:0},iconPack:String,mobileSortPlaceholder:String,customRowKey:String,draggable:{type:Boolean,default:!1},scrollable:Boolean,ariaNextLabel:String,ariaPreviousLabel:String,ariaPageLabel:String,ariaCurrentLabel:String,stickyHeader:Boolean,height:[Number,String],filtersEvent:{type:String,default:""},cardLayout:Boolean,showHeader:{type:Boolean,default:!0},debounceSearch:Number},data:function(){return{sortMultipleDataLocal:[],getValueByPath:u,visibleDetailRows:this.openedDetailed,newData:this.data,newDataTotal:this.backendPagination?this.total:this.data.length,newCheckedRows:c(this.checkedRows),lastCheckedRowIndex:null,newCurrentPage:this.currentPage,currentSortColumn:{},isAsc:!0,filters:{},defaultSlots:[],firstTimeSort:!0,_isTable:!0}},computed:{sortMultipleDataComputed:function(){return this.backendSorting?this.sortMultipleData:this.sortMultipleDataLocal},tableClasses:function(){return{"is-bordered":this.bordered,"is-striped":this.striped,"is-narrow":this.narrowed,"is-hoverable":(this.hoverable||this.focusable)&&this.visibleData.length}},tableWrapperClasses:function(){return{"has-mobile-cards":this.mobileCards,"has-sticky-header":this.stickyHeader,"is-card-list":this.cardLayout,"table-container":this.isScrollable}},tableStyle:function(){return{height:w(this.height)}},visibleData:function(){if(!this.paginated)return this.newData;var e=this.newCurrentPage,t=this.perPage;if(this.newData.length<=t)return this.newData;var i=(e-1)*t,s=parseInt(i,10)+parseInt(t,10);return this.newData.slice(i,s)},visibleColumns:function(){return this.newColumns?this.newColumns.filter(function(e){return e.visible||void 0===e.visible}):this.newColumns},isAllChecked:function(){var t=this,e=this.visibleData.filter(function(e){return t.isRowCheckable(e)});if(0===e.length)return!1;var i=e.some(function(e){return p(t.newCheckedRows,e,t.customIsChecked)<0});return!i},isAllUncheckable:function(){var t=this;return 0===this.visibleData.filter(function(e){return t.isRowCheckable(e)}).length},hasSortablenewColumns:function(){return this.newColumns.some(function(e){return e.sortable})},hasSearchablenewColumns:function(){return this.newColumns.some(function(e){return e.searchable})},hasCustomSubheadings:function(){return!(!this.$scopedSlots||!this.$scopedSlots.subheading)||this.newColumns.some(function(e){return e.subheading||e.$scopedSlots&&e.$scopedSlots.subheading})},columnCount:function(){var e=this.newColumns.length;return e+=this.checkable?1:0,e+=this.detailed&&this.showDetailIcon?1:0},showDetailRowIcon:function(){return this.detailed&&this.showDetailIcon},isScrollable:function(){return!!this.scrollable||!!this.newColumns&&this.newColumns.some(function(e){return e.sticky})},newColumns:function(){var e=this;return this.columns&&this.columns.length?this.columns.map(function(t){var i=new(A.extend(_t))({parent:e,propsData:t});return i.$scopedSlots={default:function(e){return[i.$createElement("span",{domProps:{innerHTML:u(e.row,t.field)}})]}},i}):this.defaultSlots.filter(function(e){return e.componentInstance&&e.componentInstance.$data&&e.componentInstance.$data._isTableColumn}).map(function(e){return e.componentInstance})}},watch:{data:function(e){var t=this;this.newData=e,this.backendFiltering||(this.newData=e.filter(function(e){return t.isRowFiltered(e)})),this.backendSorting||this.sort(this.currentSortColumn,!0),this.backendPagination||(this.newDataTotal=this.newData.length)},total:function(e){this.backendPagination&&(this.newDataTotal=e)},currentPage:function(e){this.newCurrentPage=e},checkedRows:function(e){this.newCheckedRows=c(e)},debounceSearch:{handler:function(e){var s,n,a,o;this.debouncedHandleFiltersChange=(s=this.handleFiltersChange,n=e,function(){var e=this,t=arguments,i=a&&!o;clearTimeout(o),o=setTimeout(function(){o=null,a||s.apply(e,t)},n),i&&s.apply(e,t)})},immediate:!0},filters:{handler:function(e){this.debounceSearch?this.debouncedHandleFiltersChange(e):this.handleFiltersChange(e)},deep:!0},openedDetailed:function(e){this.visibleDetailRows=e}},methods:{onFiltersEvent:function(e){this.$emit("filters-event-".concat(this.filtersEvent),{event:e,filters:this.filters})},handleFiltersChange:function(e){var t=this;this.backendFiltering?this.$emit("filters-change",e):(this.newData=this.data.filter(function(e){return t.isRowFiltered(e)}),this.backendPagination||(this.newDataTotal=this.newData.length),this.backendSorting||(this.sortMultiple&&this.sortMultipleDataLocal&&0<this.sortMultipleDataLocal.length?this.doSortMultiColumn():0<Object.keys(this.currentSortColumn).length&&this.doSortSingleColumn(this.currentSortColumn)))},findIndexOfSortData:function(t){var e=this.sortMultipleDataComputed.filter(function(e){return e.field===t.field})[0];return this.sortMultipleDataComputed.indexOf(e)+1},removeSortingPriority:function(t){var e;this.backendSorting?this.$emit("sorting-priority-removed",t.field):(this.sortMultipleDataLocal=this.sortMultipleDataLocal.filter(function(e){return e.field!==t.field}),e=this.sortMultipleDataLocal.map(function(e){return(e.order&&"desc"===e.order?"-":"")+e.field}),this.newData=k(this.newData,e))},resetMultiSorting:function(){this.sortMultipleDataLocal=[],this.currentSortColumn={},this.newData=this.data},sortBy:function(e,n,i,a){return i&&"function"==typeof i?c(e).sort(function(e,t){return i(e,t,a)}):c(e).sort(function(e,t){var i=u(e,n),s=u(t,n);return"boolean"==typeof i&&"boolean"==typeof s?a?i-s:s-i:i||0===i?s||0===s?i===s?0:(i="string"==typeof i?i.toUpperCase():i,s="string"==typeof s?s.toUpperCase():s,a?s<i?1:-1:s<i?-1:1):-1:1})},sortMultiColumn:function(t){var e;this.currentSortColumn={},this.backendSorting||((e=this.sortMultipleDataLocal.filter(function(e){return e.field===t.field})[0])?e.order="desc"===e.order?"asc":"desc":this.sortMultipleDataLocal.push({field:t.field,order:t.isAsc}),this.doSortMultiColumn())},doSortMultiColumn:function(){var e=this.sortMultipleDataLocal.map(function(e){return(e.order&&"desc"===e.order?"-":"")+e.field});this.newData=k(this.newData,e)},sort:function(e,t,i){var s=1<arguments.length&&void 0!==t&&t,n=2<arguments.length&&void 0!==i?i:null;if(!this.backendSorting&&this.sortMultiple&&(this.sortMultipleKey&&n[this.sortMultipleKey]||!this.sortMultipleKey))s?this.doSortMultiColumn():this.sortMultiColumn(e);else{if(!e||!e.sortable)return;this.sortMultiple&&(this.sortMultipleDataLocal=[]),s||(this.isAsc=e===this.currentSortColumn?!this.isAsc:"desc"!==this.defaultSortDirection.toLowerCase()),this.firstTimeSort||this.$emit("sort",e.field,this.isAsc?"asc":"desc",n),this.backendSorting||this.doSortSingleColumn(e),this.currentSortColumn=e}},doSortSingleColumn:function(e){this.newData=this.sortBy(this.newData,e.field,e.customSort,this.isAsc)},isRowSelected:function(e,t){return!!t&&(this.customRowKey?e[this.customRowKey]===t[this.customRowKey]:e===t)},isRowChecked:function(e){return 0<=p(this.newCheckedRows,e,this.customIsChecked)},removeCheckedRow:function(e){var t=p(this.newCheckedRows,e,this.customIsChecked);0<=t&&this.newCheckedRows.splice(t,1)},checkAll:function(){var t=this,i=this.isAllChecked;this.visibleData.forEach(function(e){t.isRowCheckable(e)&&t.removeCheckedRow(e),i||t.isRowCheckable(e)&&t.newCheckedRows.push(e)}),this.$emit("check",this.newCheckedRows),this.$emit("check-all",this.newCheckedRows),this.$emit("update:checkedRows",this.newCheckedRows)},checkRow:function(e,t,i){var s;this.isRowCheckable(e)&&(s=this.lastCheckedRowIndex,this.lastCheckedRowIndex=t,i.shiftKey&&null!==s&&t!==s?this.shiftCheckRow(e,t,s):this.isRowChecked(e)?this.removeCheckedRow(e):this.newCheckedRows.push(e),this.$emit("check",this.newCheckedRows,e),this.$emit("update:checkedRows",this.newCheckedRows))},shiftCheckRow:function(e,t,i){var s=this,n=this.visibleData.slice(Math.min(t,i),Math.max(t,i)+1),a=!this.isRowChecked(e);n.forEach(function(e){s.removeCheckedRow(e),a&&s.isRowCheckable(e)&&s.newCheckedRows.push(e)})},selectRow:function(e){this.$emit("click",e),this.selected!==e&&this.isRowSelectable(e)&&(this.$emit("select",e,this.selected),this.$emit("update:selected",e))},toggleDetails:function(e){this.isVisibleDetailRow(e)?(this.closeDetailRow(e),this.$emit("details-close",e)):(this.openDetailRow(e),this.$emit("details-open",e)),this.$emit("update:openedDetailed",this.visibleDetailRows)},openDetailRow:function(e){var t=this.handleDetailKey(e);this.visibleDetailRows.push(t)},closeDetailRow:function(e){var t=this.handleDetailKey(e),i=this.visibleDetailRows.indexOf(t);this.visibleDetailRows.splice(i,1)},isVisibleDetailRow:function(e){var t=this.handleDetailKey(e);return 0<=this.visibleDetailRows.indexOf(t)},isActiveDetailRow:function(e){return this.detailed&&!this.customDetailRow&&this.isVisibleDetailRow(e)},isActiveCustomDetailRow:function(e){return this.detailed&&this.customDetailRow&&this.isVisibleDetailRow(e)},isRowFiltered:function(e){for(var t in this.filters){if(!this.filters[t])return delete this.filters[t],!0;var i=this.getValueByPath(e,t);if(null==i)return!1;if(Number.isInteger(i)){if(i!==Number(this.filters[t]))return!1}else if(!new RegExp(y(this.filters[t]),"i").test(i))return!1}return!0},handleDetailKey:function(e){var t=this.detailKey;return t.length&&e?e[t]:e},checkPredefinedDetailedRows:function(){if(0<this.openedDetailed.length&&!this.detailKey.length)throw new Error('If you set a predefined opened-detailed, you must provide a unique key using the prop "detail-key"')},checkSort:function(){if(this.newColumns.length&&this.firstTimeSort)this.initSort(),this.firstTimeSort=!1;else if(this.newColumns.length&&0<Object.keys(this.currentSortColumn).length)for(var e=0;e<this.newColumns.length;e++)if(this.newColumns[e].field===this.currentSortColumn.field){this.currentSortColumn=this.newColumns[e];break}},hasCustomFooterSlot:function(){if(1<this.$slots.footer.length)return!0;var e=this.$slots.footer[0].tag;return"th"===e||"td"===e},hasBottomLeftSlot:function(){return void 0!==this.$slots["bottom-left"]},pressedArrow:function(e){if(this.visibleData.length){var t=(t=this.visibleData.indexOf(this.selected)+e)<0?0:t>this.visibleData.length-1?this.visibleData.length-1:t,i=this.visibleData[t];if(this.isRowSelectable(i))this.selectRow(i);else{var s=null;if(0<e)for(var n=t;n<this.visibleData.length&&null===s;n++)this.isRowSelectable(this.visibleData[n])&&(s=n);else for(var a=t;0<=a&&null===s;a--)this.isRowSelectable(this.visibleData[a])&&(s=a);0<=s&&this.selectRow(this.visibleData[s])}}},focus:function(){this.focusable&&this.$el.querySelector("table").focus()},initSort:function(){var t=this;if(this.sortMultiple&&this.sortMultipleData)this.sortMultipleData.forEach(function(e){t.sortMultiColumn(e)});else{if(!this.defaultSort)return;var i="",e=this.defaultSortDirection;Array.isArray(this.defaultSort)?(i=this.defaultSort[0],this.defaultSort[1]&&(e=this.defaultSort[1])):i=this.defaultSort;var s=this.newColumns.filter(function(e){return e.field===i})[0];s&&(this.isAsc="desc"!==e.toLowerCase(),this.sort(s,!0))}},handleDragStart:function(e,t,i){this.$emit("dragstart",{event:e,row:t,index:i})},handleDragEnd:function(e,t,i){this.$emit("dragend",{event:e,row:t,index:i})},handleDrop:function(e,t,i){this.$emit("drop",{event:e,row:t,index:i})},handleDragOver:function(e,t,i){this.$emit("dragover",{event:e,row:t,index:i})},handleDragLeave:function(e,t,i){this.$emit("dragleave",{event:e,row:t,index:i})},refreshSlots:function(){this.defaultSlots=this.$slots.default||[]}},mounted:function(){this.refreshSlots(),this.checkPredefinedDetailedRows(),this.checkSort()}},void 0,!1,void 0,void 0,void 0),St={install:function(e){B(e,Ct),B(e,_t)}};P(St);var Tt,Dt=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.attached&&t.closable?i("div",{staticClass:"tags has-addons"},[i("span",{staticClass:"tag",class:[t.type,t.size,{"is-rounded":t.rounded}]},[i("span",{class:{"has-ellipsis":t.ellipsis}},[t._t("default")],2)]),i("a",{staticClass:"tag",class:[t.size,t.closeType,{"is-rounded":t.rounded},t.closeIcon?"has-delete-icon":"is-delete"],attrs:{role:"button","aria-label":t.ariaCloseLabel,tabindex:!!t.tabstop&&0,disabled:t.disabled},on:{click:t.close,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:(e.preventDefault(),t.close(e))}}},[t.closeIcon?i("b-icon",{attrs:{"custom-class":"",icon:t.closeIcon,size:t.size,type:t.closeIconType,pack:t.closeIconPack}}):t._e(),i("a")],1)]):i("span",{staticClass:"tag",class:[t.type,t.size,{"is-rounded":t.rounded}]},[i("span",{class:{"has-ellipsis":t.ellipsis}},[t._t("default")],2),t.closable?i("a",{staticClass:"delete is-small",class:t.closeType,attrs:{role:"button","aria-label":t.ariaCloseLabel,disabled:t.disabled,tabindex:!!t.tabstop&&0},on:{click:t.close,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:(e.preventDefault(),t.close(e))}}}):t._e()])},staticRenderFns:[]},void 0,{name:"BTag",props:{attached:Boolean,closable:Boolean,type:String,size:String,rounded:Boolean,disabled:Boolean,ellipsis:Boolean,tabstop:{type:Boolean,default:!0},ariaCloseLabel:String,closeType:String,closeIcon:String,closeIconPack:String,closeIconType:String},methods:{close:function(e){this.disabled||this.$emit("close",e)}}},void 0,!1,void 0,void 0,void 0),At=E({render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"tags",class:{"has-addons":this.attached}},[this._t("default")],2)},staticRenderFns:[]},void 0,{name:"BTaglist",props:{attached:Boolean}},void 0,!1,void 0,void 0,void 0),Ft={install:function(e){B(e,Dt),B(e,At)}};P(Ft);var Ot=E({render:function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"taginput control",class:i.rootClasses},[s("div",{staticClass:"taginput-container",class:[i.statusType,i.size,i.containerClasses],attrs:{disabled:i.disabled},on:{click:function(e){i.hasInput&&i.focus(e)}}},[i._t("selected",i._l(i.tags,function(e,t){return s("b-tag",{key:i.getNormalizedTagText(e)+t,attrs:{type:i.type,"close-type":i.closeType,size:i.size,rounded:i.rounded,attached:i.attached,tabstop:!1,disabled:i.disabled,ellipsis:i.ellipsis,closable:i.closable,title:i.ellipsis&&i.getNormalizedTagText(e)},on:{close:function(e){return i.removeTag(t,e)}}},[i._t("tag",[i._v(" "+i._s(i.getNormalizedTagText(e))+" ")],{tag:e})],2)}),{tags:i.tags}),i.hasInput?s("b-autocomplete",i._b({ref:"autocomplete",attrs:{data:i.data,field:i.field,icon:i.icon,"icon-pack":i.iconPack,maxlength:i.maxlength,"has-counter":!1,size:i.size,disabled:i.disabled,loading:i.loading,autocomplete:i.nativeAutocomplete,"open-on-focus":i.openOnFocus,"keep-open":i.openOnFocus,"keep-first":!i.allowNew,"group-field":i.groupField,"group-options":i.groupOptions,"use-html5-validation":i.useHtml5Validation,"check-infinite-scroll":i.checkInfiniteScroll,"append-to-body":i.appendToBody},on:{typing:i.onTyping,focus:i.onFocus,blur:i.customOnBlur,select:i.onSelect,"infinite-scroll":i.emitInfiniteScroll},nativeOn:{keydown:function(e){return i.keydown(e)}},scopedSlots:i._u([i.hasHeaderSlot?{key:"header",fn:function(){return[i._t("header")]},proxy:!0}:null,i.hasDefaultSlot?{key:"default",fn:function(e){return[i._t("default",null,{option:e.option,index:e.index})]}}:null,i.hasEmptySlot?{key:"empty",fn:function(){return[i._t("empty")]},proxy:!0}:null,i.hasFooterSlot?{key:"footer",fn:function(){return[i._t("footer")]},proxy:!0}:null],null,!0),model:{value:i.newTag,callback:function(e){i.newTag=e},expression:"newTag"}},"b-autocomplete",i.$attrs,!1)):i._e()],2),i.hasCounter&&(i.maxtags||i.maxlength)?s("small",{staticClass:"help counter"},[i.maxlength&&0<i.valueLength?[i._v(" "+i._s(i.valueLength)+" / "+i._s(i.maxlength)+" ")]:i.maxtags?[i._v(" "+i._s(i.tagsLength)+" / "+i._s(i.maxtags)+" ")]:i._e()],2):i._e()])},staticRenderFns:[]},void 0,{name:"BTaginput",components:(o(Tt={},L.name,L),o(Tt,Dt.name,Dt),Tt),mixins:[O],inheritAttrs:!1,props:{value:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},type:String,closeType:String,rounded:{type:Boolean,default:!1},attached:{type:Boolean,default:!1},maxtags:{type:[Number,String],required:!1},hasCounter:{type:Boolean,default:function(){return F.defaultTaginputHasCounter}},field:{type:String,default:"value"},autocomplete:Boolean,groupField:String,groupOptions:String,nativeAutocomplete:String,openOnFocus:Boolean,disabled:Boolean,ellipsis:Boolean,closable:{type:Boolean,default:!0},confirmKeys:{type:Array,default:function(){return[",","Enter"]}},removeOnKeys:{type:Array,default:function(){return["Backspace"]}},allowNew:Boolean,onPasteSeparators:{type:Array,default:function(){return[","]}},beforeAdding:{type:Function,default:function(){return!0}},allowDuplicates:{type:Boolean,default:!1},checkInfiniteScroll:{type:Boolean,default:!1},createTag:{type:Function,default:function(e){return e}},appendToBody:Boolean},data:function(){return{tags:Array.isArray(this.value)?this.value.slice(0):this.value||[],newTag:"",_elementRef:"autocomplete",_isTaginput:!0}},computed:{rootClasses:function(){return{"is-expanded":this.expanded}},containerClasses:function(){return{"is-focused":this.isFocused,"is-focusable":this.hasInput}},valueLength:function(){return this.newTag.trim().length},hasDefaultSlot:function(){return!!this.$scopedSlots.default},hasEmptySlot:function(){return!!this.$slots.empty},hasHeaderSlot:function(){return!!this.$slots.header},hasFooterSlot:function(){return!!this.$slots.footer},hasInput:function(){return null==this.maxtags||this.tagsLength<this.maxtags},tagsLength:function(){return this.tags.length},separatorsAsRegExp:function(){var e=this.onPasteSeparators;return e.length?new RegExp(e.map(function(e){return e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):null}).join("|"),"g"):null}},watch:{value:function(e){this.tags=Array.isArray(e)?e.slice(0):e||[]},hasInput:function(){this.hasInput||this.onBlur()}},methods:{addTag:function(e){var t=e||this.newTag.trim();if(t){if(!this.autocomplete){var i=this.separatorsAsRegExp;if(i&&t.match(i))return void t.split(i).map(function(e){return e.trim()}).filter(function(e){return 0!==e.length}).map(this.addTag)}(!!this.allowDuplicates||-1===this.tags.indexOf(t))&&this.beforeAdding(t)&&(this.tags.push(this.createTag(t)),this.$emit("input",this.tags),this.$emit("add",t))}this.newTag=""},getNormalizedTagText:function(e){return"object"===l(e)&&(e=u(e,this.field)),"".concat(e)},customOnBlur:function(e){this.autocomplete||this.addTag(),this.onBlur(e)},onSelect:function(e){var t=this;e&&(this.addTag(e),this.$nextTick(function(){t.newTag=""}))},removeTag:function(e,t){var i=this.tags.splice(e,1)[0];return this.$emit("input",this.tags),this.$emit("remove",i),t&&t.stopPropagation(),this.openOnFocus&&this.$refs.autocomplete&&this.$refs.autocomplete.focus(),i},removeLastTag:function(){0<this.tagsLength&&this.removeTag(this.tagsLength-1)},keydown:function(e){var t=e.key;-1===this.removeOnKeys.indexOf(t)||this.newTag.length||this.removeLastTag(),this.autocomplete&&!this.allowNew||0<=this.confirmKeys.indexOf(t)&&(e.preventDefault(),this.addTag())},onTyping:function(e){this.$emit("typing",e.trim())},emitInfiniteScroll:function(){this.$emit("infinite-scroll")}}},void 0,!1,void 0,void 0,void 0),Mt={install:function(e){B(e,Ot)}};P(Mt);var Pt={install:function(e){B(e,ye)}};P(Pt);var Bt,zt=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{"enter-active-class":e.transition.enter,"leave-active-class":e.transition.leave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"toast",class:[e.type,e.position],attrs:{"aria-hidden":!e.isActive,role:"alert"}},[e.$slots.default?[e._t("default")]:[i("div",{domProps:{innerHTML:e._s(e.message)}})]],2)])},staticRenderFns:[]},void 0,{name:"BToast",mixins:[Ye],data:function(){return{newDuration:this.duration||F.defaultToastDuration}}},void 0,!1,void 0,void 0,void 0),Et={open:function(e){var t;"string"==typeof e&&(e={message:e});var i,s={position:F.defaultToastPosition||"is-top"};e.parent&&(t=e.parent,delete e.parent),Array.isArray(e.message)&&(i=e.message,delete e.message);var n=f(s,e),a=new(("undefined"!=typeof window&&window.Vue?window.Vue:Bt||A).extend(zt))({parent:t,el:document.createElement("div"),propsData:n});return i&&(a.$slots.default=i,a.$forceUpdate()),a}},Rt={install:function(e){z(Bt=e,"toast",Et)}};P(Rt);var It={install:function(e){B(e,dt)}};P(It);var Lt=E({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"upload control",class:{"is-expanded":t.expanded}},[t.dragDrop?i("div",{staticClass:"upload-draggable",class:[t.type,{"is-loading":t.loading,"is-disabled":t.disabled,"is-hovered":t.dragDropFocus,"is-expanded":t.expanded}],on:{dragover:function(e){return e.preventDefault(),t.updateDragDropFocus(!0)},dragleave:function(e){return e.preventDefault(),t.updateDragDropFocus(!1)},dragenter:function(e){return e.preventDefault(),t.updateDragDropFocus(!0)},drop:function(e){return e.preventDefault(),t.onFileChange(e)}}},[t._t("default")],2):[t._t("default")],i("input",t._b({ref:"input",attrs:{type:"file",multiple:t.multiple,accept:t.accept,disabled:t.disabled},on:{change:t.onFileChange}},"input",t.$attrs,!1))],2)},staticRenderFns:[]},void 0,{name:"BUpload",mixins:[O],inheritAttrs:!1,props:{value:{type:[Object,Function,ze,Array]},multiple:Boolean,disabled:Boolean,accept:String,dragDrop:Boolean,type:{type:String,default:"is-primary"},native:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1}},data:function(){return{newValue:this.value,dragDropFocus:!1,_elementRef:"input"}},watch:{value:function(e){(!(this.newValue=e)||Array.isArray(e)&&0===e.length)&&(this.$refs.input.value=null),this.isValid||this.dragDrop||this.checkHtml5Validity()}},methods:{onFileChange:function(e){if(!this.disabled&&!this.loading){this.dragDrop&&this.updateDragDropFocus(!1);var t=e.target.files||e.dataTransfer.files;if(0===t.length){if(!this.newValue)return;this.native&&(this.newValue=null)}else if(this.multiple){var i=!1;!this.native&&this.newValue||(this.newValue=[],i=!0);for(var s=0;s<t.length;s++){var n=t[s];this.checkType(n)&&(this.newValue.push(n),i=!0)}if(!i)return}else{if(this.dragDrop&&1!==t.length)return;var a=t[0];if(this.checkType(a))this.newValue=a;else{if(!this.newValue)return;this.newValue=null}}this.$emit("input",this.newValue),this.dragDrop||this.checkHtml5Validity()}},updateDragDropFocus:function(e){this.disabled||this.loading||(this.dragDropFocus=e)},checkType:function(e){if(!this.accept)return!0;var t=this.accept.split(",");if(0===t.length)return!0;for(var i=!1,s=0;s<t.length&&!i;s++){var n,a=t[s].trim();a&&("."===a.substring(0,1)?(0<=(n=e.name.lastIndexOf("."))?e.name.substring(n):"").toLowerCase()===a.toLowerCase()&&(i=!0):e.type.match(a)&&(i=!0))}return i}}},void 0,!1,void 0,void 0,void 0),Nt={install:function(e){B(e,Lt)}};P(Nt);var Vt=Object.freeze({Autocomplete:N,Button:j,Checkbox:Y,Clockpicker:ce,Datepicker:ge,Datetimepicker:we,Dialog:Te,Dropdown:De,Field:Ae,Icon:Fe,Input:Oe,Loading:Ie,Message:je,Modal:qe,Notification:Ge,Pagination:et,Progress:it,Radio:at,Select:ot,Skeleton:lt,Slider:ft,Snackbar:bt,Table:St,Tag:Ft,Taginput:Mt,Timepicker:Pt,Toast:Rt,Tooltip:It,Upload:Nt}),jt={getOptions:function(){return F},setOptions:function(e){T(f(F,e,!0))}},Ht={install:function(e,t){var i=1<arguments.length&&void 0!==t?t:{};for(var s in A=e,T(f(F,i,!0)),Vt)e.use(Vt[s]);z(e,"config",jt)}};P(Ht),e.Autocomplete=N,e.Button=j,e.Checkbox=Y,e.Clockpicker=ce,e.ConfigProgrammatic=jt,e.Datepicker=ge,e.Datetimepicker=we,e.Dialog=Te,e.DialogProgrammatic=Se,e.Dropdown=De,e.Field=Ae,e.Icon=Fe,e.Input=Oe,e.Loading=Ie,e.LoadingProgrammatic=Re,e.Message=je,e.Modal=qe,e.ModalProgrammatic=He,e.Notification=Ge,e.NotificationProgrammatic=Xe,e.Pagination=et,e.Progress=it,e.Radio=at,e.Select=ot,e.Skeleton=lt,e.Slider=ft,e.Snackbar=bt,e.SnackbarProgrammatic=gt,e.Table=St,e.Tag=Ft,e.Taginput=Mt,e.Timepicker=Pt,e.Toast=Rt,e.ToastProgrammatic=Et,e.Tooltip=It,e.Upload=Nt,e.bound=d,e.createAbsoluteElement=g,e.createNewEvent=function(e){var t;return"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t},e.default=Ht,e.escapeRegExpChars=y,e.getMonthNames=x,e.getValueByPath=u,e.getWeekdayNames=_,e.hasFlag=a,e.indexOf=p,e.isCustomElement=C,e.isDefined=S,e.isMobile=m,e.isVueComponent=b,e.isWebpSupported=function(){return new Promise(function(e){var t=new Image;t.onerror=function(){return e(!1)},t.onload=function(){return e(1===t.width)},t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="}).catch(function(){return!1})},e.matchWithGroups=$,e.merge=f,e.mod=function(e,t){return(e%t+t)%t},e.multiColumnSort=k,e.removeElement=v,e.sign=i,e.toCssWidth=w,Object.defineProperty(e,"__esModule",{value:!0})}),Vue.component("mx-toggle",{props:{value:Boolean,disabled:Boolean,trueValue:{default:"Да"},falseValue:{default:"Нет"},title:String,spaceBetween:Boolean,invert:Boolean},data:function(){return{val:!1}},created:function(){this.val=this.invert?!this.value:this.value},watch:{value:function(e){this.val=this.invert?!e:e},val:function(e){this.invert&&(e=!e),this.value!=e&&(this.value=e,this.$emit("input",e))}},template:'<div :class="{\'mx-toggle-space-between\': spaceBetween}"><label class="mx-toggle" :class="{disabled: disabled}" :data-true-value="trueValue|gettext" @click.stop><input type="checkbox" v-model="val"><div :data-false-value="falseValue|gettext"></div></label><p class="form-control-static" v-if="title" :class="{disabled: disabled}">{{title}}</p></div>'}),Vue.component("mx-phone",{data:function(){return{tmp:""}},props:{value:String,disabled:Boolean,title:String},created:function(){this.tmp=this.value,this.title||(this.title=this.$gettext("Страна"))},mounted:function(){var i=this;$mx(this.$refs.hidden).on("change",function(e,t){i.value=e.target.value,i.$emit("input",e.target.value)})},template:'<div class="form-field"><input type="tel" :data-country="$account.client.country" :data-title="title" inputmode="tel" :value="tmp" class="input" autocorrect="off" autocapitalize="none" :disabled="disabled"><input type="hidden" ref="hidden" class="tel-code" v-model="tmp"></div>'}),Vue.directive("focus",{inserted:function(e){setTimeout(function(){"input"==e.tagName.toLowerCase()?e.focus():$mx(e).find("input").focus()},50)}}),function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.vRuntimeTemplate=t()}(this,function(){function S(e,t,i){var s;t.hasOwnProperty(i)||(s=Object.getOwnPropertyDescriptor(e,i),Object.defineProperty(t,i,s))}return{props:{template:String,parent:Object,templateProps:{type:Object,default:function(){return{}}}},render:function(e){if(this.template){var t=this.parent||this.$parent,i=t.$data;void 0===i&&(i={});var s=t.$props;void 0===s&&(s={});var n=t.$options;void 0===n&&(n={});var a=n.components;void 0===a&&(a={});var o=n.computed;void 0===o&&(o={});var r=n.methods;void 0===r&&(r={});var l=this.$data;void 0===l&&(l={});var c=this.$props;void 0===c&&(c={});var d=this.$options;void 0===d&&(d={});var u=d.methods;void 0===u&&(u={});var p=d.computed;void 0===p&&(p={});var h=d.components;void 0===h&&(h={});var f={$data:{},$props:{},$options:{},components:{},computed:{},methods:{}};Object.keys(i).forEach(function(e){void 0===l[e]&&(f.$data[e]=i[e])}),Object.keys(s).forEach(function(e){void 0===c[e]&&(f.$props[e]=s[e])}),Object.keys(r).forEach(function(e){void 0===u[e]&&(f.methods[e]=r[e])}),Object.keys(o).forEach(function(e){void 0===p[e]&&(f.computed[e]=o[e])}),Object.keys(a).forEach(function(e){void 0===h[e]&&(f.components[e]=a[e])});var m=Object.keys(f.methods||{}),v=Object.keys(f.$data||{}),g=Object.keys(f.$props||{}),b=Object.keys(this.templateProps),y=v.concat(g).concat(m).concat(b),k=($=t,C={},m.forEach(function(e){return S($,C,e)}),C),w=(x=[f.$data,f.$props,k,this.templateProps],_={},x.forEach(function(t){t&&Object.getOwnPropertyNames(t).forEach(function(e){return S(t,_,e)})}),_);return e({template:this.template||"<div></div>",props:y,computed:f.computed,components:f.components},{props:w})}var x,_,$,C}}}),function(){var t,i,a=document.attachEvent,o=!1;if(!a){var e=(i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},function(e){return i(e)}),s=(t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return t(e)}),r=function(e){var t=e.__resizeTriggers__,i=t.firstElementChild,s=t.lastElementChild,n=i.firstElementChild;s.scrollLeft=s.scrollWidth,s.scrollTop=s.scrollHeight,n.style.width=i.offsetWidth+1+"px",n.style.height=i.offsetHeight+1+"px",i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight},l=function(t){var i=this;r(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=e(function(){var e;(e=i).offsetWidth==e.__resizeLast__.width&&e.offsetHeight==e.__resizeLast__.height||(i.__resizeLast__.width=i.offsetWidth,i.__resizeLast__.height=i.offsetHeight,i.__resizeListeners__.forEach(function(e){e.call(i,t)}))})},n=!1,c="",d="animationstart",u="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h="",f=document.createElement("fakeelement");if(void 0!==f.style.animationName&&(n=!0),!1===n)for(var m=0;m<u.length;m++)if(void 0!==f.style[u[m]+"AnimationName"]){h=u[m],c="-"+h.toLowerCase()+"-",d=p[m],n=!0;break}var v="resizeanim",g="@"+c+"keyframes "+v+" { from { opacity: 0; } to { opacity: 0; } } ",b=c+"animation: 1ms "+v+"; "}window.addResizeListener=function(t,e){var i,s,n;a?t.attachEvent("onresize",e):(t.__resizeTriggers__||("static"==getComputedStyle(t).position&&(t.style.position="relative"),o||(i=(g||"")+".resize-triggers { "+(b||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',s=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("style")).type="text/css",n.styleSheet?n.styleSheet.cssText=i:n.appendChild(document.createTextNode(i)),s.appendChild(n),o=!0),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),r(t),t.addEventListener("scroll",l,!0),d&&t.__resizeTriggers__.addEventListener(d,function(e){e.animationName==v&&r(t)})),t.__resizeListeners__.push(e))},window.removeResizeListener=function(e,t){a?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",l),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}();var Device={install:function(e){e.prototype.$device={mobile:!1,desktop:!1};function t(){e.prototype.$device.mobile=!!window.matchMedia("(max-width: 767px)").matches,e.prototype.$device.desktop=!!window.matchMedia("(min-width: 768px)").matches}t(),$mx(window).on("resize orientationchange",t)}};Vue.use(Device),function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof2(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?exports.VueInfiniteLoading=t():e.VueInfiniteLoading=t()}("undefined"!=typeof self?self:this,function(){return n={},s.m=i=[function(e,t){function s(e,t){var i,s=e[1]||"",n=e[3];if(!n)return s;if(t&&"function"==typeof btoa){var a=(i=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");return[s].concat(n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"})).concat([a]).join("\n")}return[s].join("\n")}e.exports=function(i){var o=[];return o.toString=function(){return this.map(function(e){var t=s(e,i);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")},o.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},s=0;s<this.length;s++){var n=this[s][0];"number"==typeof n&&(i[n]=!0)}for(s=0;s<e.length;s++){var a=e[s];"number"==typeof a[0]&&i[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),o.push(a))}},o}},function(e,t,i){function l(e){for(var t=0;t<e.length;t++){var i=e[t],s=d[i.id];if(s){s.refs++;for(var n=0;n<s.parts.length;n++)s.parts[n](i.parts[n]);for(;n<i.parts.length;n++)s.parts.push(o(i.parts[n]));s.parts.length>i.parts.length&&(s.parts.length=i.parts.length)}else{for(var a=[],n=0;n<i.parts.length;n++)a.push(o(i.parts[n]));d[i.id]={id:i.id,refs:1,parts:a}}}}function a(){var e=document.createElement("style");return e.type="text/css",n.appendChild(e),e}function o(t){var e,i,s,n=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(n){if(h)return f;n.parentNode.removeChild(n)}return s=m?(e=p++,n=u=u||a(),i=r.bind(null,n,e,!1),r.bind(null,n,e,!0)):(n=a(),i=function(e,t){var i=t.css,s=t.media,n=t.sourceMap;if(s&&e.setAttribute("media",s),n&&(i+="\n/*# sourceURL="+n.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,n),function(){n.parentNode.removeChild(n)}),i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else s()}}function r(e,t,i,s){var n,a,o=i?"":s.css;e.styleSheet?e.styleSheet.cssText=g(t,o):(n=document.createTextNode(o),(a=e.childNodes)[t]&&e.removeChild(a[t]),a.length?e.insertBefore(n,a[t]):e.appendChild(n))}var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=i(7),d={},n=s&&(document.head||document.getElementsByTagName("head")[0]),u=null,p=0,h=!1,f=function(){},m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(o,e,t){h=t;var r=c(o,e);return l(r),function(e){for(var t=[],i=0;i<r.length;i++){var s=r[i];(n=d[s.id]).refs--,t.push(n)}e?l(r=c(o,e)):r=[];for(var n,i=0;i<t.length;i++){if(0===(n=t[i]).refs){for(var a=0;a<n.parts.length;a++)n.parts[a]();delete d[n.id]}}}};var v,g=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")})},function(e,t){e.exports=function(e,t,i,s,n,a){var o,r=e=e||{},l=_typeof2(e.default);"object"!==l&&"function"!==l||(r=(o=e).default);var c,d,u,p="function"==typeof r?r.options:r;return t&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0),i&&(p.functional=!0),n&&(p._scopeId=n),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},p._ssrRegister=c):s&&(c=s),c&&(d=p.functional,u=d?p.render:p.beforeCreate,d?(p._injectStyles=c,p.render=function(e,t){return c.call(t),u(e,t)}):p.beforeCreate=u?[].concat(u,c):[c]),{esModule:o,exports:r,options:p}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(4);t.default=s.a,"undefined"!=typeof window&&window.Vue&&window.Vue.component("infinite-loading",s.a)},function(e,t,i){"use strict";function s(e){i(5)}var n=i(8),a=i(14),o=i(2)(n.a,a.a,!1,s,"data-v-fb2c869e",null);t.a=o.exports},function(e,t,i){var s=i(6);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals),i(1)("2249d7a7",s,!0)},function(e,t,i){(e.exports=i(0)(void 0)).push([e.i,".infinite-loading-container[data-v-fb2c869e]{clear:both;text-align:center}.infinite-loading-container[data-v-fb2c869e] [class^=loading-]{display:inline-block;margin:15px 0;width:28px;height:28px;font-size:28px;line-height:28px;border-radius:50%}.infinite-status-prompt[data-v-fb2c869e]{color:#666;font-size:14px;text-align:center;padding:10px 0}",""])},function(e,t){e.exports=function(e,t){for(var i=[],s={},n=0;n<t.length;n++){var a=t[n],o=a[0],r={id:e+":"+n,css:a[1],media:a[2],sourceMap:a[3]};s[o]?s[o].parts.push(r):i.push(s[o]={id:o,parts:[r]})}return i}},function(e,t,i){"use strict";var s=i(9),n={STATE_CHANGER:["[Vue-infinite-loading warn]: emit `loaded` and `complete` event through component instance of `$refs` may cause error, so it will be deprecated soon, please use the `$state` argument instead (`$state` just the special `$event` variable):","\ntemplate:",'<infinite-loading @infinite="infiniteHandler"></infinite-loading>',"\nscript:\n...\ninfiniteHandler($state) {\n  ajax('https://www.example.com/api/news')\n    .then((res) => {\n      if (res.data.length) {\n        $state.loaded();\n      } else {\n        $state.complete();\n      }\n    });\n}\n...","","more details: https://github.com/PeachScript/vue-infinite-loading/issues/57#issuecomment-324370549"].join("\n"),INFINITE_EVENT:"[Vue-infinite-loading warn]: `:on-infinite` property will be deprecated soon, please use `@infinite` event instead."},a={INFINITE_LOOP:["[Vue-infinite-loading error]: executed the callback function more than 10 times for a short time, it looks like searched a wrong scroll wrapper that doest not has fixed height or maximum height, please check it. If you want to force to set a element as scroll wrapper ranther than automatic searching, you can do this:",'\n\x3c!-- add a special attribute for the real scroll wrapper --\x3e\n<div infinite-wrapper>\n  ...\n  \x3c!-- set force-use-infinite-wrapper to true --\x3e\n  <infinite-loading force-use-infinite-wrapper="true"></infinite-loading>\n</div>\n    ',"more details: https://github.com/PeachScript/vue-infinite-loading/issues/55#issuecomment-316934169"].join("\n")};t.a={name:"InfiniteLoading",data:function(){return{scrollParent:null,scrollHandler:null,isLoading:!1,isComplete:!1,isFirstLoad:!0,debounceTimer:null,debounceDuration:50,infiniteLoopChecked:!1,infiniteLoopTimer:null,continuousCallTimes:0}},components:{Spinner:s.a},computed:{isNoResults:{cache:!1,get:function(){var e=this.$slots["no-results"],t=e&&e[0].elm&&""===e[0].elm.textContent;return!this.isLoading&&this.isComplete&&this.isFirstLoad&&!t}},isNoMore:{cache:!1,get:function(){var e=this.$slots["no-more"],t=e&&e[0].elm&&""===e[0].elm.textContent;return!this.isLoading&&this.isComplete&&!this.isFirstLoad&&!t}}},props:{distance:{type:Number,default:100},onInfinite:Function,spinner:String,direction:{type:String,default:"bottom"},forceUseInfiniteWrapper:null},mounted:function(){var t=this;this.scrollParent=this.getScrollParent(),this.scrollHandler=function(e){this.isLoading||(clearTimeout(this.debounceTimer),e&&e.constructor===Event?this.debounceTimer=setTimeout(this.attemptLoad,this.debounceDuration):this.attemptLoad())}.bind(this),setTimeout(this.scrollHandler,1),this.scrollParent.addEventListener("scroll",this.scrollHandler),this.$on("$InfiniteLoading:loaded",function(e){t.isFirstLoad=!1,t.isLoading&&t.$nextTick(t.attemptLoad.bind(null,!0)),e&&e.target===t||console.warn(n.STATE_CHANGER)}),this.$on("$InfiniteLoading:complete",function(e){t.isLoading=!1,t.isComplete=!0,t.$nextTick(function(){t.$forceUpdate()}),t.scrollParent.removeEventListener("scroll",t.scrollHandler),e&&e.target===t||console.warn(n.STATE_CHANGER)}),this.$on("$InfiniteLoading:reset",function(){t.isLoading=!1,t.isComplete=!1,t.isFirstLoad=!0,t.scrollParent.addEventListener("scroll",t.scrollHandler),setTimeout(t.scrollHandler,1)}),this.onInfinite&&console.warn(n.INFINITE_EVENT),this.stateChanger={loaded:function(){t.$emit("$InfiniteLoading:loaded",{target:t})},complete:function(){t.$emit("$InfiniteLoading:complete",{target:t})},reset:function(){t.$emit("$InfiniteLoading:reset",{target:t})}},this.$watch("forceUseInfiniteWrapper",function(){t.scrollParent=t.getScrollParent()})},deactivated:function(){this.isLoading=!1,this.scrollParent.removeEventListener("scroll",this.scrollHandler)},activated:function(){this.scrollParent.addEventListener("scroll",this.scrollHandler)},methods:{attemptLoad:function(e){var t=this,i=this.getCurrentDistance();!this.isComplete&&i<=this.distance&&0<this.$el.offsetWidth+this.$el.offsetHeight?(this.isLoading=!0,"function"==typeof this.onInfinite?this.onInfinite.call(null,this.stateChanger):this.$emit("infinite",this.stateChanger),!e||this.forceUseInfiniteWrapper||this.infiniteLoopChecked||(this.continuousCallTimes+=1,clearTimeout(this.infiniteLoopTimer),this.infiniteLoopTimer=setTimeout(function(){t.infiniteLoopChecked=!0},1e3),10<this.continuousCallTimes&&(console.error(a.INFINITE_LOOP),this.infiniteLoopChecked=!0))):this.isLoading=!1},getCurrentDistance:function(){return"top"===this.direction?isNaN(this.scrollParent.scrollTop)?this.scrollParent.pageYOffset:this.scrollParent.scrollTop:this.$el.getBoundingClientRect().top-(this.scrollParent===window?window.innerHeight:this.scrollParent.getBoundingClientRect().bottom)},getScrollParent:function(e){var t=0<arguments.length&&void 0!==e?e:this.$el,i=void 0;return"BODY"===t.tagName?i=window:(!this.forceUseInfiniteWrapper&&-1<["scroll","auto"].indexOf(getComputedStyle(t).overflowY)||t.hasAttribute("infinite-wrapper")||t.hasAttribute("data-infinite-wrapper"))&&(i=t),i||this.getScrollParent(t.parentNode)}},destroyed:function(){this.isComplete||this.scrollParent.removeEventListener("scroll",this.scrollHandler)}}},function(e,t,i){"use strict";function s(e){i(10)}var n=i(12),a=i(13),o=i(2)(n.a,a.a,!1,s,"data-v-6e1fd88f",null);t.a=o.exports},function(e,t,i){var s=i(11);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals),i(1)("29881045",s,!0)},function(e,t,i){(e.exports=i(0)(void 0)).push([e.i,'.loading-wave-dots[data-v-6e1fd88f]{position:relative}.loading-wave-dots[data-v-6e1fd88f] .wave-item{position:absolute;top:50%;left:50%;display:inline-block;margin-top:-4px;width:8px;height:8px;border-radius:50%;-webkit-animation:loading-wave-dots-data-v-6e1fd88f linear 2.8s infinite;animation:loading-wave-dots-data-v-6e1fd88f linear 2.8s infinite}.loading-wave-dots[data-v-6e1fd88f] .wave-item:first-child{margin-left:-36px}.loading-wave-dots[data-v-6e1fd88f] .wave-item:nth-child(2){margin-left:-20px;-webkit-animation-delay:.14s;animation-delay:.14s}.loading-wave-dots[data-v-6e1fd88f] .wave-item:nth-child(3){margin-left:-4px;-webkit-animation-delay:.28s;animation-delay:.28s}.loading-wave-dots[data-v-6e1fd88f] .wave-item:nth-child(4){margin-left:12px;-webkit-animation-delay:.42s;animation-delay:.42s}.loading-wave-dots[data-v-6e1fd88f] .wave-item:last-child{margin-left:28px;-webkit-animation-delay:.56s;animation-delay:.56s}@-webkit-keyframes loading-wave-dots-data-v-6e1fd88f{0%{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}10%{-webkit-transform:translateY(-6px);transform:translateY(-6px);background:#999}20%{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}to{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}}@keyframes loading-wave-dots-data-v-6e1fd88f{0%{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}10%{-webkit-transform:translateY(-6px);transform:translateY(-6px);background:#999}20%{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}to{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}}.loading-circles[data-v-6e1fd88f] .circle-item{width:5px;height:5px;-webkit-animation:loading-circles-data-v-6e1fd88f linear .75s infinite;animation:loading-circles-data-v-6e1fd88f linear .75s infinite}.loading-circles[data-v-6e1fd88f] .circle-item:first-child{margin-top:-14.5px;margin-left:-2.5px}.loading-circles[data-v-6e1fd88f] .circle-item:nth-child(2){margin-top:-11.26px;margin-left:6.26px}.loading-circles[data-v-6e1fd88f] .circle-item:nth-child(3){margin-top:-2.5px;margin-left:9.5px}.loading-circles[data-v-6e1fd88f] .circle-item:nth-child(4){margin-top:6.26px;margin-left:6.26px}.loading-circles[data-v-6e1fd88f] .circle-item:nth-child(5){margin-top:9.5px;margin-left:-2.5px}.loading-circles[data-v-6e1fd88f] .circle-item:nth-child(6){margin-top:6.26px;margin-left:-11.26px}.loading-circles[data-v-6e1fd88f] .circle-item:nth-child(7){margin-top:-2.5px;margin-left:-14.5px}.loading-circles[data-v-6e1fd88f] .circle-item:last-child{margin-top:-11.26px;margin-left:-11.26px}@-webkit-keyframes loading-circles-data-v-6e1fd88f{0%{background:#dfdfdf}90%{background:#505050}to{background:#dfdfdf}}@keyframes loading-circles-data-v-6e1fd88f{0%{background:#dfdfdf}90%{background:#505050}to{background:#dfdfdf}}.loading-bubbles[data-v-6e1fd88f] .bubble-item{background:#666;-webkit-animation:loading-bubbles-data-v-6e1fd88f linear .75s infinite;animation:loading-bubbles-data-v-6e1fd88f linear .75s infinite}.loading-bubbles[data-v-6e1fd88f] .bubble-item:first-child{margin-top:-12.5px;margin-left:-.5px}.loading-bubbles[data-v-6e1fd88f] .bubble-item:nth-child(2){margin-top:-9.26px;margin-left:8.26px}.loading-bubbles[data-v-6e1fd88f] .bubble-item:nth-child(3){margin-top:-.5px;margin-left:11.5px}.loading-bubbles[data-v-6e1fd88f] .bubble-item:nth-child(4){margin-top:8.26px;margin-left:8.26px}.loading-bubbles[data-v-6e1fd88f] .bubble-item:nth-child(5){margin-top:11.5px;margin-left:-.5px}.loading-bubbles[data-v-6e1fd88f] .bubble-item:nth-child(6){margin-top:8.26px;margin-left:-9.26px}.loading-bubbles[data-v-6e1fd88f] .bubble-item:nth-child(7){margin-top:-.5px;margin-left:-12.5px}.loading-bubbles[data-v-6e1fd88f] .bubble-item:last-child{margin-top:-9.26px;margin-left:-9.26px}@-webkit-keyframes loading-bubbles-data-v-6e1fd88f{0%{width:1px;height:1px;box-shadow:0 0 0 3px #666}90%{width:1px;height:1px;box-shadow:0 0 0 0 #666}to{width:1px;height:1px;box-shadow:0 0 0 3px #666}}@keyframes loading-bubbles-data-v-6e1fd88f{0%{width:1px;height:1px;box-shadow:0 0 0 3px #666}90%{width:1px;height:1px;box-shadow:0 0 0 0 #666}to{width:1px;height:1px;box-shadow:0 0 0 3px #666}}.loading-default[data-v-6e1fd88f]{position:relative;border:1px solid #999;-webkit-animation:loading-rotating-data-v-6e1fd88f ease 1.5s infinite;animation:loading-rotating-data-v-6e1fd88f ease 1.5s infinite}.loading-default[data-v-6e1fd88f]:before{content:"";position:absolute;display:block;top:0;left:50%;margin-top:-3px;margin-left:-3px;width:6px;height:6px;background-color:#999;border-radius:50%}.loading-spiral[data-v-6e1fd88f]{border:2px solid #777;border-right-color:transparent;-webkit-animation:loading-rotating-data-v-6e1fd88f linear .85s infinite;animation:loading-rotating-data-v-6e1fd88f linear .85s infinite}@-webkit-keyframes loading-rotating-data-v-6e1fd88f{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loading-rotating-data-v-6e1fd88f{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.loading-bubbles[data-v-6e1fd88f],.loading-circles[data-v-6e1fd88f]{position:relative}.loading-bubbles[data-v-6e1fd88f] .bubble-item,.loading-circles[data-v-6e1fd88f] .circle-item{position:absolute;top:50%;left:50%;display:inline-block;border-radius:50%}.loading-bubbles[data-v-6e1fd88f] .bubble-item:nth-child(2),.loading-circles[data-v-6e1fd88f] .circle-item:nth-child(2){-webkit-animation-delay:93ms;animation-delay:93ms}.loading-bubbles[data-v-6e1fd88f] .bubble-item:nth-child(3),.loading-circles[data-v-6e1fd88f] .circle-item:nth-child(3){-webkit-animation-delay:.186s;animation-delay:.186s}.loading-bubbles[data-v-6e1fd88f] .bubble-item:nth-child(4),.loading-circles[data-v-6e1fd88f] .circle-item:nth-child(4){-webkit-animation-delay:.279s;animation-delay:.279s}.loading-bubbles[data-v-6e1fd88f] .bubble-item:nth-child(5),.loading-circles[data-v-6e1fd88f] .circle-item:nth-child(5){-webkit-animation-delay:.372s;animation-delay:.372s}.loading-bubbles[data-v-6e1fd88f] .bubble-item:nth-child(6),.loading-circles[data-v-6e1fd88f] .circle-item:nth-child(6){-webkit-animation-delay:.465s;animation-delay:.465s}.loading-bubbles[data-v-6e1fd88f] .bubble-item:nth-child(7),.loading-circles[data-v-6e1fd88f] .circle-item:nth-child(7){-webkit-animation-delay:.558s;animation-delay:.558s}.loading-bubbles[data-v-6e1fd88f] .bubble-item:last-child,.loading-circles[data-v-6e1fd88f] .circle-item:last-child{-webkit-animation-delay:.651s;animation-delay:.651s}',""])},function(e,t,i){"use strict";var s={BUBBLES:{render:function(e){return e("span",{attrs:{class:"loading-bubbles"}},Array.apply(Array,Array(8)).map(function(){return e("span",{attrs:{class:"bubble-item"}})}))}},CIRCLES:{render:function(e){return e("span",{attrs:{class:"loading-circles"}},Array.apply(Array,Array(8)).map(function(){return e("span",{attrs:{class:"circle-item"}})}))}},DEFAULT:{render:function(e){return e("i",{attrs:{class:"loading-default"}})}},SPIRAL:{render:function(e){return e("i",{attrs:{class:"loading-spiral"}})}},WAVEDOTS:{render:function(e){return e("span",{attrs:{class:"loading-wave-dots"}},Array.apply(Array,Array(5)).map(function(){return e("span",{attrs:{class:"wave-item"}})}))}}};t.a={name:"spinner",computed:{spinnerView:function(){return s[(this.spinner||"").toUpperCase()]||s.DEFAULT}},props:{spinner:String}}},function(e,t,i){"use strict";var s={render:function(){var e=this.$createElement;return(this._self._c||e)(this.spinnerView,{tag:"component"})},staticRenderFns:[]};t.a=s},function(e,t,i){"use strict";var s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"infinite-loading-container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]},[e._t("spinner",[i("spinner",{attrs:{spinner:e.spinner}})])],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isNoResults,expression:"isNoResults"}],staticClass:"infinite-status-prompt"},[e._t("no-results",[e._v("No results :(")])],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isNoMore,expression:"isNoMore"}],staticClass:"infinite-status-prompt"},[e._t("no-more",[e._v("No more data :)")])],2)])},staticRenderFns:[]};t.a=s}],s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=3);function s(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}var i,n});var NativeApplication={setBadge:function(e){if("ExperimentalBadge"in window)if(e)try{window.ExperimentalBadge.set(e)}catch(e){window.ExperimentalBadge.set()}else window.ExperimentalBadge.clear()}};"serviceWorker"in navigator&&window.addEventListener("load",function(){var e=document.querySelector("link[type='text/css']").href.match(/\?([0-9\.]+)/),t=e?e[0]:"";navigator.serviceWorker.register("/serviceworker.js?v="+t).then(function(e){}).catch(function(e){})}),function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof2(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?exports.VNumber=t():e.VNumber=t()}(this,function(){return n={},s.m=i=[function(e,t,i){"use strict";t.a={prefix:"",suffix:"",thousands:",",decimal:".",precision:2}},function(e,t,n){"use strict";var a=n(2),o=n(5),r=n(0);t.a=function(t,e){var i,s;e.value&&(i=n.i(o.a)(r.a,e.value),"INPUT"!==t.tagName.toLocaleUpperCase()&&(1!==(s=t.getElementsByTagName("input")).length||(t=s[0])),t.oninput=function(){var e=t.value.length-t.selectionEnd;"R$ 0,0"!=t.value&&t.value?t.value=n.i(a.a)(t.value,i):t.value="",e=Math.max(e,i.suffix.length),e=t.value.length-e,e=Math.max(e,i.prefix.length+1),n.i(a.b)(t,e),t.dispatchEvent(n.i(a.c)("change"))},t.onfocus=function(){n.i(a.b)(t,t.value.length-i.suffix.length)},t.oninput(),t.dispatchEvent(n.i(a.c)("input")))}},function(e,t,i){"use strict";var s=window.number_format;i(0);i.d(t,"a",function(){return s}),i.d(t,"d",function(){return unformat}),i.d(t,"b",function(){return setCursor}),i.d(t,"c",function(){return event})},function(e,t,i){"use strict";function s(e,t){t&&Object.keys(t).map(function(e){r.a[e]=t[e]}),e.directive("number",o.a),e.component("number",a.a)}Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),a=i.n(n),o=i(1),r=i(0);i.d(t,"Number",function(){return a.a}),i.d(t,"VNumber",function(){return o.a}),i.d(t,"options",function(){return r.a}),t.default=s,"undefined"!=typeof window&&window.Vue&&window.Vue.use(s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),n=i(0),a=i(2);t.default={name:"Number",props:{value:{required:!0,default:0},masked:{type:Boolean,default:0},precision:{type:Number,default:function(){return Vue.prototype.$account.number.precision}},decimal:{type:String,default:function(){return Vue.prototype.$account.number.decimal}},thousands:{type:String,default:function(){return Vue.prototype.$account.number.thousands}},prefix:{type:String,default:function(){return n.a.prefix}},suffix:{type:String,default:function(){return n.a.suffix}}},directives:{number:s.a},data:function(){return{formattedValue:""}},watch:{value:{immediate:!0,handler:function(e){var t;(t=null===e||""===e?"":i.i(a.a)(e,this.$props))!==this.formattedValue&&(this.formattedValue=t)}}},methods:{change:function(e){this.$emit("input",!this.masked&&e.target.value?i.i(a.d)(e.target.value,this.precision):e.target.value)}}}},function(e,t,i){"use strict";t.a=function(i,s){return i=i||{},s=s||{},Object.keys(i).concat(Object.keys(s)).reduce(function(e,t){return e[t]=void 0===s[t]?i[t]:s[t],e},{})}},function(e,t,i){var s=i(7)(i(4),i(8),null,null);e.exports=s.exports},function(e,t){e.exports=function(e,t,i,s){var n,a=e=e||{},o=_typeof2(e.default);"object"!==o&&"function"!==o||(a=(n=e).default);var r,l="function"==typeof a?a.options:a;return t&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns),i&&(l._scopeId=i),s&&(r=l.computed||(l.computed={}),Object.keys(s).forEach(function(e){var t=s[e];r[e]=function(){return t}})),{esModule:n,exports:a,options:l}}},function(e,t){e.exports={render:function(){var e=this.$createElement;return(this._self._c||e)("input",{directives:[{name:"number",rawName:"v-number",value:{precision:this.precision,decimal:this.decimal,thousands:this.thousands,prefix:this.prefix,suffix:this.suffix},expression:"{precision, decimal, thousands, prefix, suffix}"}],staticClass:"v-number",attrs:{type:"text"},domProps:{value:this.formattedValue},on:{change:this.change}})},staticRenderFns:[]}},function(e,t,i){e.exports=i(3)}],s.c=n,s.i=function(e){return e},s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p=".",s(s.s=9);function s(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}var i,n}),function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.VueSlicksort={})}(this,function(e){"use strict";function k(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var t={inject:["manager"],props:{index:{type:Number,required:!0},collection:{type:[String,Number],default:"default"},disabled:{type:Boolean,default:!1}},mounted:function(){var e=this.$props,t=e.collection,i=e.disabled,s=e.index;i||this.setDraggable(t,s)},watch:{index:function(e){this.$el&&this.$el.sortableInfo&&(this.$el.sortableInfo.index=e)},disabled:function(e){e?this.removeDraggable(this.collection):this.setDraggable(this.collection,this.index)},collection:function(e,t){this.removeDraggable(t),this.setDraggable(e,this.index)}},beforeDestroy:function(){var e=this.collection;this.disabled||this.removeDraggable(e)},methods:{setDraggable:function(e,t){var i=this.$el;i.sortableInfo={index:t,collection:e,manager:this.manager},this.ref={node:i},this.manager.add(e,this.ref)},removeDraggable:function(e){this.manager.remove(e,this.ref)}}},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},f=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],s=!0,n=!1,a=void 0;try{for(var o,r=e[Symbol.iterator]();!(s=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);s=!0);}catch(e){n=!0,a=e}finally{try{!s&&r.return&&r.return()}finally{if(n)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=(function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}(n,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var i=this.getIndex(e,t);-1!==i&&this.refs[e].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find(function(e){return e.node.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.active.collection;return this.refs[t].sort(function(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index})}}]),n);function n(){i(this,n),this.refs={}}function a(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function l(e,t,i){var s=e.slice(0);if(i>=s.length)for(var n=i-s.length;1+n--;)s.push(void 0);return s.splice(i,0,s.splice(t,1)[0]),s}var w={start:["touchstart","mousedown"],move:["touchmove","mousemove"],end:["touchend","touchcancel","mouseup"]},x=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];switch(t){case"ms":return"ms";default:return t&&t.length?t[0].toUpperCase()+t.substr(1):""}}();function d(e,t){for(;e;){if(t(e))return e;e=e.parentNode}}function m(e,t,i){return i<e?e:t<i?t:i}function _(e){return"px"===e.substr(-2)?parseFloat(e):0}var o={data:function(){return{sorting:!1,sortingIndex:null,manager:new s,events:{start:this.handleStart,move:this.handleMove,end:this.handleEnd}}},props:{value:{type:Array,required:!0},axis:{type:String,default:"y"},distance:{type:Number,default:0},pressDelay:{type:Number,default:0},pressThreshold:{type:Number,default:5},useDragHandle:{type:Boolean,default:!1},useWindowAsScrollContainer:{type:Boolean,default:!1},hideSortableGhost:{type:Boolean,default:!0},lockToContainerEdges:{type:Boolean,default:!1},lockOffset:{type:[String,Number,Array],default:"50%"},transitionDuration:{type:Number,default:300},scrollContainer:{type:Object,default:null},lockAxis:String,helperClass:String,contentWindow:Object,shouldCancelStart:{type:Function,default:function(e){return-1!==["input","textarea","select","option","button"].indexOf(e.target.tagName.toLowerCase())}},getHelperDimensions:{type:Function,default:function(e){var t=e.node;return{width:t.offsetWidth,height:t.offsetHeight}}}},provide:function(){return{manager:this.manager}},mounted:function(){var i=this;this.container=this.$el,this.document=this.container.ownerDocument||document,this._window=this.contentWindow||window,this.scrollContainer||(this.scrollContainer=this.useWindowAsScrollContainer?document.scrollingElement||document.documentElement:this.container);for(var e in this.events)!function(t){i.events.hasOwnProperty(t)&&w[t].forEach(function(e){return i.container.addEventListener(e,i.events[t],!1)})}(e)},beforeDestroy:function(){var i=this;for(var e in this.events)!function(t){i.events.hasOwnProperty(t)&&w[t].forEach(function(e){return i.container.removeEventListener(e,i.events[t])})}(e)},methods:{handleStart:function(e){var t=this,i=this.$props,s=i.distance,n=i.shouldCancelStart;if(2===e.button||n(e))return!1;this._touched=!0,this._pos={x:e.pageX,y:e.pageY};var a=d(e.target,function(e){return null!=e.sortableInfo});if(a&&a.sortableInfo&&this.nodeIsChild(a)&&!this.sorting){var o=this.$props.useDragHandle,r=a.sortableInfo,l=r.index,c=r.collection;if(o&&!d(e.target,function(e){return null!=e.sortableHandle}))return;this.manager.active={index:l,collection:c},"a"===e.target.tagName.toLowerCase()&&e.preventDefault(),s||(0===this.$props.pressDelay?this.handlePress(e):this.pressTimer=setTimeout(function(){return t.handlePress(e)},this.$props.pressDelay))}},nodeIsChild:function(e){return e.sortableInfo.manager===this.manager},handleMove:function(e){var t,i=this.$props,s=i.distance,n=i.pressThreshold;!this.sorting&&this._touched&&(this._delta={x:this._pos.x-e.pageX,y:this._pos.y-e.pageY},t=Math.abs(this._delta.x)+Math.abs(this._delta.y),s||n&&!(n&&n<=t)?s&&s<=t&&this.manager.isActive()&&this.handlePress(e):(clearTimeout(this.cancelTimer),this.cancelTimer=setTimeout(this.cancel,0)))},handleEnd:function(){var e=this.$props.distance;this._touched=!1,e||this.cancel()},cancel:function(){this.sorting||(clearTimeout(this.pressTimer),this.manager.active=null)},handlePress:function(e){var t,i,s,n,a,o,r,l,c,d,u,p,h,f,m,v,g,b=this,y=this.manager.getActive();y&&(s=(i=this.$props).axis,n=i.getHelperDimensions,a=i.helperClass,o="",r=i.hideSortableGhost,l=i.useWindowAsScrollContainer,c=y.node,d=y.collection,u=c.sortableInfo.index,p={top:_((t=window.getComputedStyle(c)).marginTop),right:_(t.marginRight),bottom:_(t.marginBottom),left:_(t.marginLeft)},h=this.container.getBoundingClientRect(),f=n({index:u,node:c,collection:d}),this.$emit("helper",{node:c,resolve:function(e){o=e}}),this.node=c,this.margin=p,this.width=f.width,this.height=f.height,this.marginOffset={x:this.margin.left+this.margin.right,y:Math.max(this.margin.top,this.margin.bottom)},this.boundingClientRect=c.getBoundingClientRect(),this.containerBoundingRect=h,this.index=u,this.newIndex=u,this._axis={x:0<=s.indexOf("x"),y:0<=s.indexOf("y")},this.offsetEdge=this.getEdgeOffset(c),this.initialOffset=this.getOffset(e),this.initialScroll={top:this.scrollContainer.scrollTop,left:this.scrollContainer.scrollLeft},this.initialWindowScroll={top:window.pageYOffset,left:window.pageXOffset},v=c.querySelectorAll("input, textarea, select"),g=c.cloneNode(!0),[].concat(k(g.querySelectorAll("input, textarea, select"))).forEach(function(e,t){"file"!==e.type&&v[t]&&(e.value=v[t].value)}),this.helperContainer=$mx('<div class="main-theme1"></div>').appendTo(this.document.body),this.helperContainerInner=$mx('<div class="'+o+'"></div>').appendTo(this.helperContainer),this.helperContainerInner[0].appendChild(g),this.helper=this.document.body.appendChild(this.helperContainer[0]),this.helper.style.position="fixed",this.helper.style.top=this.boundingClientRect.top-p.top+"px",this.helper.style.left=this.boundingClientRect.left-p.left+"px",this.helper.style.width=this.width+"px",this.helper.style.height=this.height+"px",this.helper.style.boxSizing="border-box",this.helper.style.zIndex=1090,this.helper.style.pointerEvents="none",r&&((this.sortableGhost=c).style.visibility="hidden",c.style.opacity=0),this.minTranslate={},this.maxTranslate={},this._axis.x&&(this.minTranslate.x=(l?0:h.left)-this.boundingClientRect.left-this.width/2,this.maxTranslate.x=(l?window.innerWidth:h.left+h.width)-this.boundingClientRect.left-this.width/2),this._axis.y&&(this.minTranslate.y=(l?0:h.top)-this.boundingClientRect.top-this.height/2,this.maxTranslate.y=(l?window.innerHeight:h.top+h.height)-this.boundingClientRect.top-this.height/2),a&&(m=this.helper.classList).add.apply(m,k(a.split(" "))),this.listenerNode=e.touches?c:this._window,w.move.forEach(function(e){return b.listenerNode.addEventListener(e,b.handleSortMove,!1)}),w.end.forEach(function(e){return b.listenerNode.addEventListener(e,b.handleSortEnd,!1)}),this.sorting=!0,this.sortingIndex=u,this.$emit("sortStart",{event:e,node:c,index:u,collection:d}))},handleSortMove:function(e){$mx("html").addClass("is-dragging"),e.preventDefault(),this.updatePosition(e),this.animateNodes(),this.autoscroll(),this.$emit("sortMove",{event:e})},handleSortEnd:function(e){$mx("html").removeClass("is-dragging");var t=this,i=this.manager.active.collection;this.listenerNode&&(w.move.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)}),w.end.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})),this.helper.parentNode.removeChild(this.helper),this.hideSortableGhost&&this.sortableGhost&&(this.sortableGhost.style.visibility="",this.sortableGhost.style.opacity="");for(var s=this.manager.refs[i],n=0,a=s.length;n<a;n++){var o=s[n],r=o.node;o.edgeOffset=null,r.style[x+"Transform"]="",r.style[x+"TransitionDuration"]=""}clearInterval(this.autoscrollInterval),this.autoscrollInterval=null,this.manager.active=null,this.sorting=!1,this.sortingIndex=null,this.$emit("sortEnd",{event:e,oldIndex:this.index,newIndex:this.newIndex,collection:i}),this.$emit("input",l(this.value,this.index,this.newIndex)),this._touched=!1},getEdgeOffset:function(e){for(var t=0,i=0,s=e;s&&s!==this.container;)t+=parseInt(s.offsetTop),i+=parseInt(s.offsetLeft),s=s.offsetParent;return{top:t,left:i}},getOffset:function(e){return{x:e.touches?e.touches[0].pageX:e.pageX,y:e.touches?e.touches[0].pageY:e.pageY}},getLockPixelOffsets:function(){var e=this.$props.lockOffset;if(Array.isArray(this.lockOffset)||(e=[e,e]),2!==e.length)throw new Error("lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given "+e);var t=f(e,2),i=t[0],s=t[1];return[this.getLockPixelOffset(i),this.getLockPixelOffset(s)]},getLockPixelOffset:function(e){var t=e,i=e,s="px";if("string"==typeof e){var n=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(e);if(null===n)throw new Error('lockOffset value should be a number or a string of a number followed by "px" or "%". Given '+e);t=i=parseFloat(e),s=n[1]}if(!isFinite(t)||!isFinite(i))throw new Error("lockOffset value should be a finite. Given "+e);return"%"===s&&(t=t*this.width/100,i=i*this.height/100),{x:t,y:i}},updatePosition:function(e){var t,i,s,n,a,o,r,l,c=this.$props,d=c.lockAxis,u=c.lockToContainerEdges,p=this.getOffset(e),h={x:p.x-this.initialOffset.x,y:p.y-this.initialOffset.y};h.y-=window.pageYOffset-this.initialWindowScroll.top,h.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=h,u&&(t=this.getLockPixelOffsets(),s=(i=f(t,2))[0],n=i[1],a=this.width/2-s.x,o=this.height/2-s.y,r=this.width/2-n.x,l=this.height/2-n.y,h.x=m(this.minTranslate.x+a,this.maxTranslate.x-r,h.x),h.y=m(this.minTranslate.y+o,this.maxTranslate.y-l,h.y)),"x"===d?h.y=0:"y"===d&&(h.x=0),this.helper.style[x+"Transform"]="translate3d("+h.x+"px,"+h.y+"px, 0)"},animateNodes:function(){var e=this.$props,t=e.transitionDuration,i=e.hideSortableGhost,s=this.manager.getOrderedRefs(),n=this.scrollContainer.scrollLeft-this.initialScroll.left,a=this.scrollContainer.scrollTop-this.initialScroll.top,o=this.offsetEdge.left+this.translate.x+(e.useWindowAsScrollContainer?0:n),r=this.offsetEdge.top+this.translate.y+(!e.useWindowAsScrollContainer||window.matchMedia("(max-width: 767px)").matches?a:0),l=window.pageYOffset-this.initialWindowScroll.top,c=window.pageXOffset-this.initialWindowScroll.left;this.newIndex=null;for(var d=0,u=s.length;d<u;d++){var p=s[d].node,h=p.sortableInfo.index,f=p.offsetWidth,m=p.offsetHeight,v=this.width>f?f/2:this.width/2,g=this.height>m?m/2:this.height/2,b={x:0,y:0},y=s[d].edgeOffset;y||(s[d].edgeOffset=y=this.getEdgeOffset(p));var k=d<s.length-1&&s[d+1],w=0<d&&s[d-1];k&&!k.edgeOffset&&(k.edgeOffset=this.getEdgeOffset(k.node)),h!==this.index?(t&&(p.style[x+"TransitionDuration"]=t+"ms"),this._axis.x?this._axis.y?h<this.index&&(o+c-v<=y.left&&r+l<=y.top+g||r+l+g<=y.top)?(b.x=this.width+this.marginOffset.x,y.left+b.x>this.containerBoundingRect.width-v&&(b.x=k.edgeOffset.left-y.left,b.y=k.edgeOffset.top-y.top),null===this.newIndex&&(this.newIndex=h)):h>this.index&&(o+c+v>=y.left&&r+l+g>=y.top||r+l+g>=y.top+m)&&(b.x=-(this.width+this.marginOffset.x),y.left+b.x<this.containerBoundingRect.left+v&&(b.x=w.edgeOffset.left-y.left,b.y=w.edgeOffset.top-y.top),this.newIndex=h):h>this.index&&o+c+v>=y.left?(b.x=-(this.width+this.marginOffset.x),this.newIndex=h):h<this.index&&o+c<=y.left+v&&(b.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=h)):this._axis.y&&(h>this.index&&r+l+g>=y.top?(b.y=-(this.height+this.marginOffset.y),this.newIndex=h):h<this.index&&r+l<=y.top+g&&(b.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=h))),p.style[x+"Transform"]="translate3d("+b.x+"px,"+b.y+"px,0)"):i&&((this.sortableGhost=p).style.visibility="hidden",p.style.opacity=0)}null==this.newIndex&&(this.newIndex=this.index)},autoscroll:function(){var i=this,e=this.translate,s={x:0,y:0},n={x:1,y:1};e.y>=this.maxTranslate.y-this.height/2?(s.y=1,n.y=10*Math.abs((this.maxTranslate.y-this.height/2-e.y)/this.height)):e.x>=this.maxTranslate.x-this.width/2?(s.x=1,n.x=10*Math.abs((this.maxTranslate.x-this.width/2-e.x)/this.width)):e.y<=this.minTranslate.y+this.height/2?(s.y=-1,n.y=10*Math.abs((e.y-this.height/2-this.minTranslate.y)/this.height)):e.x<=this.minTranslate.x+this.width/2&&(s.x=-1,n.x=10*Math.abs((e.x-this.width/2-this.minTranslate.x)/this.width)),this.autoscrollInterval&&(clearInterval(this.autoscrollInterval),this.autoscrollInterval=null,this.isAutoScrolling=!1),0===s.x&&0===s.y||(this.autoscrollInterval=setInterval(function(){i.isAutoScrolling=!0;var e=n.x*s.x,t=n.y*s.y;i.scrollContainer.scrollTop+=t,i.scrollContainer.scrollLeft+=e,i.translate.x+=e,i.translate.y+=t,i.animateNodes()},5))}}},r={name:"slick-list",mixins:[o],render:function(e){return e("div",this.$slots.default)}},c={name:"slick-item",mixins:[t],render:function(e){return e("div",this.$slots.default)}};e.ElementMixin=t,e.ContainerMixin=o,e.HandleDirective={bind:function(e){e.sortableHandle=!0}},e.SlickList=r,e.SlickItem=c,e.arrayMove=l,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof2(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?exports.io=t():e.io=t()}(this,function(){return n={},i.m=s=[function(e,t,i){"use strict";function s(e,t){"object"===(void 0===e?"undefined":l(e))&&(t=e,e=void 0),t=t||{};var i=c(e),s=i.source,n=i.id,a=i.path,o=p[n]&&a in p[n].nsps,r=t.forceNew||t["force new connection"]||!1===t.multiplex||o?(u("ignoring socket cache for %s",s),d(s,t)):(p[n]||(u("new io instance for %s",s),p[n]=d(s,t)),p[n]);return i.query&&!t.query&&(t.query=i.query),r.socket(i.path,t)}var l="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},c=i(1),n=i(7),d=i(12),u=i(3)("socket.io-client");e.exports=t=s;var p=t.managers={};t.protocol=n.protocol,t.connect=s,t.Manager=i(12),t.Socket=i(37)},function(e,t,i){(function(n){"use strict";var a=i(2),o=i(3)("socket.io-client:url");e.exports=function(e,t){var i=e;t=t||n.location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),i=a(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var s=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port,i.href=i.protocol+"://"+s+(t&&t.port===i.port?"":":"+i.port),i}}).call(t,function(){return this}())},function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,l=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),s=e.indexOf("]");-1!=i&&-1!=s&&(e=e.substring(0,i)+e.substring(i,s).replace(/:/g,";")+e.substring(s,e.length));for(var n=r.exec(e||""),a={},o=14;o--;)a[l[o]]=n[o]||"";return-1!=i&&-1!=s&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(i,a,s){(function(t){function e(){var e;try{e=a.storage.debug}catch(e){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(a=i.exports=s(5)).log=function(){return"object"==("undefined"==typeof console?"undefined":_typeof2(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},a.formatArgs=function(e){var t,i,s,n=this.useColors;e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+a.humanize(this.diff),n&&(t="color: "+this.color,e.splice(1,0,t,"color: inherit"),e[s=i=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(s=i))}),e.splice(s,0,t))},a.save=function(e){try{null==e?a.storage.removeItem("debug"):a.storage.debug=e}catch(e){}},a.load=e,a.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},a.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],a.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},a.enable(e())}).call(a,s(4))},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function n(t){if(c===setTimeout)return setTimeout(t,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(){f&&p&&(f=!1,p.length?h=p.concat(h):m=-1,h.length&&o())}function o(){if(!f){var e=n(a);f=!0;for(var t=h.length;t;){for(p=h,h=[];++m<t;)p&&p[m].run();m=-1,t=h.length}p=null,f=!1,function(t){if(d===clearTimeout)return clearTimeout(t);if((d===s||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}(e)}}function r(e,t){this.fun=e,this.array=t}function l(){}var c,d,u=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:i}catch(e){c=i}try{d="function"==typeof clearTimeout?clearTimeout:s}catch(e){d=s}}();var p,h=[],f=!1,m=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new r(e,t)),1!==h.length||f||n(o)},r.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=l,u.addListener=l,u.once=l,u.off=l,u.removeListener=l,u.removeAllListeners=l,u.emit=l,u.prependListener=l,u.prependOnceListener=l,u.listeners=function(e){return[]},u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,l,t){function i(e){function s(){if(s.enabled){var n=s,e=+new Date,t=e-(r||e);n.diff=t,n.prev=r,n.curr=e,r=e;for(var a=new Array(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];a[0]=l.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var o=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;o++;var i,s=l.formatters[t];return"function"==typeof s&&(i=a[o],e=s.call(n,i),a.splice(o,1),o--),e}),l.formatArgs.call(n,a),(s.log||l.log||console.log.bind(console)).apply(n,a)}}var r;return s.namespace=e,s.enabled=l.enabled(e),s.useColors=l.useColors(),s.color=function(e){var t,i=0;for(t in e)i=(i<<5)-i+e.charCodeAt(t),i|=0;return l.colors[Math.abs(i)%l.colors.length]}(e),s.destroy=n,"function"==typeof l.init&&l.init(s),l.instances.push(s),s}function n(){var e=l.instances.indexOf(this);return-1!==e&&(l.instances.splice(e,1),!0)}(l=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},l.disable=function(){l.enable("")},l.enable=function(e){l.save(e),l.names=[],l.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),i=t.length,s=0;s<i;s++)t[s]&&("-"===(e=t[s].replace(/\*/g,".*?"))[0]?l.skips.push(new RegExp("^"+e.substr(1)+"$")):l.names.push(new RegExp("^"+e+"$")));for(s=0;s<l.instances.length;s++){var n=l.instances[s];n.enabled=l.enabled(n.namespace)}},l.enabled=function(e){if("*"===e[e.length-1])return!0;for(var t=0,i=l.skips.length;t<i;t++)if(l.skips[t].test(e))return!1;for(t=0,i=l.names.length;t<i;t++)if(l.names[t].test(e))return!0;return!1},l.humanize=t(6),l.instances=[],l.names=[],l.skips=[],l.formatters={}},function(e,t){function a(e,t,i){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}e.exports=function(e,t){t=t||{};var i,s,n=void 0===e?"undefined":_typeof2(e);if("string"===n&&0<e.length)return function(e){if(!(100<(e=String(e)).length)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return 864e5*i;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*i;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===n&&!1===isNaN(e))return t.long?a(s=e,864e5,"day")||a(s,36e5,"hour")||a(s,6e4,"minute")||a(s,1e3,"second")||s+" ms":864e5<=(i=e)?Math.round(i/864e5)+"d":36e5<=i?Math.round(i/36e5)+"h":6e4<=i?Math.round(i/6e4)+"m":1e3<=i?Math.round(i/1e3)+"s":i+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,r,t){function i(){}function a(e){var t=""+e.type;if(r.BINARY_EVENT!==e.type&&r.BINARY_ACK!==e.type||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===i)return m;t+=i}return d("encoded %j as %s",e,t),t}function s(e,n){p.removeBlobs(e,function(e){var t=p.deconstructPacket(e),i=a(t.packet),s=t.buffers;s.unshift(i),n(s)})}function n(){this.reconstructor=null}function o(e){var t=0,i={type:Number(e.charAt(0))};if(null==r.types[i.type])return c("unknown packet type "+i.type);if(r.BINARY_EVENT===i.type||r.BINARY_ACK===i.type){for(var s="";"-"!==e.charAt(++t)&&(s+=e.charAt(t),t!=e.length););if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");i.attachments=Number(s)}if("/"===e.charAt(t+1))for(i.nsp="";++t;){if(","===(n=e.charAt(t)))break;if(i.nsp+=n,t===e.length)break}else i.nsp="/";var n,a=e.charAt(t+1);if(""!==a&&Number(a)==a){for(i.id="";++t;){if(null==(n=e.charAt(t))||Number(n)!=n){--t;break}if(i.id+=e.charAt(t),t===e.length)break}i.id=Number(i.id)}if(e.charAt(++t)){var o=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!(!1!==o&&(i.type===r.ERROR||h(o))))return c("invalid payload");i.data=o}return d("decoded %s as %j",e,i),i}function l(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:r.ERROR,data:"parser error: "+e}}var d=t(3)("socket.io-parser"),u=t(8),p=t(9),h=t(10),f=t(11);r.protocol=4,r.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],r.CONNECT=0,r.DISCONNECT=1,r.EVENT=2,r.ACK=3,r.ERROR=4,r.BINARY_EVENT=5,r.BINARY_ACK=6,r.Encoder=i,r.Decoder=n;var m=r.ERROR+'"encode error"';i.prototype.encode=function(e,t){d("encoding packet %j",e),r.BINARY_EVENT===e.type||r.BINARY_ACK===e.type?s(e,t):t([a(e)])},u(n.prototype),n.prototype.add=function(e){var t;if("string"==typeof e)t=o(e),r.BINARY_EVENT===t.type||r.BINARY_ACK===t.type?(this.reconstructor=new l(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!f(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},n.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length!==this.reconPack.attachments)return null;var t=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,i){function s(e){if(e)return function(e){for(var t in s.prototype)e[t]=s.prototype[t];return e}(e)}(e.exports=s).prototype.on=s.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},s.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var s,n=0;n<i.length;n++)if((s=i[n])===t||s.fn===t){i.splice(n,1);break}return this},s.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i)for(var s=0,n=(i=i.slice(0)).length;s<n;++s)i[s].apply(this,t);return this},s.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},s.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,i,s){(function(e){var d=s(10),u=s(11),t=Object.prototype.toString,p="function"==typeof e.Blob||"[object BlobConstructor]"===t.call(e.Blob),h="function"==typeof e.File||"[object FileConstructor]"===t.call(e.File);i.deconstructPacket=function(e){var t=[],i=e.data,s=e;return s.data=function e(t,i){if(!t)return t;if(u(t)){var s={_placeholder:!0,num:i.length};return i.push(t),s}if(d(t)){for(var n=new Array(t.length),a=0;a<t.length;a++)n[a]=e(t[a],i);return n}if("object"!=(void 0===t?"undefined":_typeof2(t))||t instanceof Date)return t;n={};for(var o in t)n[o]=e(t[o],i);return n}(i,t),s.attachments=t.length,{packet:s,buffers:t}},i.reconstructPacket=function(e,t){return e.data=function e(t,i){if(!t)return t;if(t&&t._placeholder)return i[t.num];if(d(t))for(var s=0;s<t.length;s++)t[s]=e(t[s],i);else if("object"==(void 0===t?"undefined":_typeof2(t)))for(var n in t)t[n]=e(t[n],i);return t}(e.data,t),e.attachments=void 0,e},i.removeBlobs=function(e,r){var l=0,c=e;(function e(t,i,s){if(!t)return t;if(p&&t instanceof Blob||h&&t instanceof File){l++;var n=new FileReader;n.onload=function(){s?s[i]=this.result:c=this.result,--l||r(c)},n.readAsArrayBuffer(t)}else if(d(t))for(var a=0;a<t.length;a++)e(t[a],a,t);else if("object"==(void 0===t?"undefined":_typeof2(t))&&!u(t))for(var o in t)e(t[o],o,t)})(c),l||r(c)}}).call(i,function(){return this}())},function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},function(e,t){(function(t){e.exports=function(e){return i&&t.Buffer.isBuffer(e)||s&&(e instanceof t.ArrayBuffer||n(e))};var i="function"==typeof t.Buffer&&"function"==typeof t.Buffer.isBuffer,s="function"==typeof t.ArrayBuffer,n=s&&"function"==typeof t.ArrayBuffer.isView?t.ArrayBuffer.isView:function(e){return e.buffer instanceof t.ArrayBuffer}}).call(t,function(){return this}())},function(e,t,i){"use strict";function s(e,t){if(!(this instanceof s))return new s(e,t);e&&"object"===(void 0===e?"undefined":n(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var i=t.parser||r;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var n="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},l=i(13),a=i(37),o=i(8),r=i(7),c=i(39),d=i(40),u=i(3)("socket.io-client:manager"),p=i(36),h=i(41),f=Object.prototype.hasOwnProperty;(e.exports=s).prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},s.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},s.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},o(s.prototype),s.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},s.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},s.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},s.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},s.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},s.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},s.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},s.prototype.open=s.prototype.connect=function(i,e){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=l(this.uri,this.opts);var t=this.engine,s=this;this.readyState="opening",this.skipReconnect=!1;var n,a,o=c(t,"open",function(){s.onopen(),i&&i()}),r=c(t,"error",function(e){var t;u("connect_error"),s.cleanup(),s.readyState="closed",s.emitAll("connect_error",e),i?((t=new Error("Connection error")).data=e,i(t)):s.maybeReconnectOnOpen()});return!1!==this._timeout&&(n=this._timeout,u("connect attempt will timeout after %d",n),a=setTimeout(function(){u("connect attempt timed out after %d",n),o.destroy(),t.close(),t.emit("error","timeout"),s.emitAll("connect_timeout",n)},n),this.subs.push({destroy:function(){clearTimeout(a)}})),this.subs.push(o),this.subs.push(r),this},s.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",d(this,"ondata"))),this.subs.push(c(e,"ping",d(this,"onping"))),this.subs.push(c(e,"pong",d(this,"onpong"))),this.subs.push(c(e,"error",d(this,"onerror"))),this.subs.push(c(e,"close",d(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",d(this,"ondecoded")))},s.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},s.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},s.prototype.ondata=function(e){this.decoder.add(e)},s.prototype.ondecoded=function(e){this.emit("packet",e)},s.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},s.prototype.socket=function(e,t){function i(){~p(s.connecting,n)||s.connecting.push(n)}var s,n=this.nsps[e];return n||(n=new a(this,e,t),this.nsps[e]=n,s=this,n.on("connecting",i),n.on("connect",function(){n.id=s.generateId(e)}),this.autoConnect&&i()),n},s.prototype.destroy=function(e){var t=p(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},s.prototype.packet=function(i){u("writing packet %j",i);var s=this;i.query&&0===i.type&&(i.nsp+="?"+i.query),s.encoding?s.packetBuffer.push(i):(s.encoding=!0,this.encoder.encode(i,function(e){for(var t=0;t<e.length;t++)s.engine.write(e[t],i.options);s.encoding=!1,s.processPacketQueue()}))},s.prototype.processPacketQueue=function(){var e;0<this.packetBuffer.length&&!this.encoding&&(e=this.packetBuffer.shift(),this.packet(e))},s.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},s.prototype.close=s.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},s.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},s.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e,t,i=this;this.backoff.attempts>=this._reconnectionAttempts?(u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(e=this.backoff.duration(),u("will wait %dms before reconnect attempt",e),this.reconnecting=!0,t=setTimeout(function(){i.skipReconnect||(u("attempting reconnect"),i.emitAll("reconnect_attempt",i.backoff.attempts),i.emitAll("reconnecting",i.backoff.attempts),i.skipReconnect||i.open(function(e){e?(u("reconnect attempt error"),i.reconnecting=!1,i.reconnect(),i.emitAll("reconnect_error",e.data)):(u("reconnect success"),i.onreconnect())}))},e),this.subs.push({destroy:function(){clearTimeout(t)}}))},s.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,i){e.exports=i(14),e.exports.parser=i(21)},function(t,e,i){(function(s){function u(e,t){if(!(this instanceof u))return new u(e,t);t=t||{},e&&"object"==(void 0===e?"undefined":_typeof2(e))&&(t=e,e=null),e?(e=r(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=r(t.host).host),this.secure=null!=t.secure?t.secure:s.location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(s.location?location.hostname:"localhost"),this.port=t.port||(s.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode;var i="object"==(void 0===s?"undefined":_typeof2(s))&&s;i.global===i&&(t.extraHeaders&&0<Object.keys(t.extraHeaders).length&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}var n=i(15),e=i(8),p=i(3)("engine.io-client:socket"),a=i(36),o=i(21),r=i(2),l=i(30);(t.exports=u).priorWebsocketSuccess=!1,e(u.prototype),u.protocol=o.protocol,(u.Socket=u).Transport=i(20),u.transports=i(15),u.parser=i(21),u.prototype.createTransport=function(e){p('creating transport "%s"',e);var t=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(this.query);t.EIO=o.protocol,t.transport=e;var i=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new n[e]({query:t,socket:this,agent:i.agent||this.agent,hostname:i.hostname||this.hostname,port:i.port||this.port,secure:i.secure||this.secure,path:i.path||this.path,forceJSONP:i.forceJSONP||this.forceJSONP,jsonp:i.jsonp||this.jsonp,forceBase64:i.forceBase64||this.forceBase64,enablesXDR:i.enablesXDR||this.enablesXDR,timestampRequests:i.timestampRequests||this.timestampRequests,timestampParam:i.timestampParam||this.timestampParam,policyPort:i.policyPort||this.policyPort,pfx:i.pfx||this.pfx,key:i.key||this.key,passphrase:i.passphrase||this.passphrase,cert:i.cert||this.cert,ca:i.ca||this.ca,ciphers:i.ciphers||this.ciphers,rejectUnauthorized:i.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:i.perMessageDeflate||this.perMessageDeflate,extraHeaders:i.extraHeaders||this.extraHeaders,forceNode:i.forceNode||this.forceNode,localAddress:i.localAddress||this.localAddress,requestTimeout:i.requestTimeout||this.requestTimeout,protocols:i.protocols||void 0})},u.prototype.open=function(){var e;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},u.prototype.setTransport=function(e){p("setting transport %s",e.name);var t=this;this.transport&&(p("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=e).on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},u.prototype.probe=function(i){function e(){var e;d.onlyBinaryUpgrades&&(e=!this.supportsBinary&&d.transport.supportsBinary,c=c||e),c||(p('probe transport "%s" opened',i),l.send([{type:"ping",data:"probe"}]),l.once("packet",function(e){if(!c)if("pong"===e.type&&"probe"===e.data){if(p('probe transport "%s" pong',i),d.upgrading=!0,d.emit("upgrading",l),!l)return;u.priorWebsocketSuccess="websocket"===l.name,p('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){c||"closed"!==d.readyState&&(p("changing transport and sending upgrade packet"),r(),d.setTransport(l),l.send([{type:"upgrade"}]),d.emit("upgrade",l),l=null,d.upgrading=!1,d.flush())})}else{p('probe transport "%s" failed',i);var t=new Error("probe error");t.transport=l.name,d.emit("upgradeError",t)}}))}function s(){c||(c=!0,r(),l.close(),l=null)}function t(e){var t=new Error("probe error: "+e);t.transport=l.name,s(),p('probe transport "%s" failed because of error: %s',i,e),d.emit("upgradeError",t)}function n(){t("transport closed")}function a(){t("socket closed")}function o(e){l&&e.name!==l.name&&(p('"%s" works - aborting "%s"',e.name,l.name),s())}function r(){l.removeListener("open",e),l.removeListener("error",t),l.removeListener("close",n),d.removeListener("close",a),d.removeListener("upgrading",o)}p('probing transport "%s"',i);var l=this.createTransport(i,{probe:1}),c=!1,d=this;u.priorWebsocketSuccess=!1,l.once("open",e),l.once("error",t),l.once("close",n),this.once("close",a),this.once("upgrading",o),l.open()},u.prototype.onOpen=function(){if(p("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){p("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},u.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(p('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else p('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},u.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){p("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},u.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(p("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(e,t,i){return this.sendPacket("message",e,t,i),this},u.prototype.sendPacket=function(e,t,i,s){var n;"function"==typeof t&&(s=t,t=void 0),"function"==typeof i&&(s=i,i=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((i=i||{}).compress=!1!==i.compress,n={type:e,data:t,options:i},this.emit("packetCreate",n),this.writeBuffer.push(n),s&&this.once("flush",s),this.flush())},u.prototype.close=function(){function e(){s.onClose("forced close"),p("socket closing - telling transport to close"),s.transport.close()}function t(){s.removeListener("upgrade",t),s.removeListener("upgradeError",t),e()}function i(){s.once("upgrade",t),s.once("upgradeError",t)}var s;return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",(s=this).writeBuffer.length?this.once("drain",function(){(this.upgrading?i:e)()}):(this.upgrading?i:e)()),this},u.prototype.onError=function(e){p("socket error %j",e),u.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},u.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(p('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},u.prototype.filterUpgrades=function(e){for(var t=[],i=0,s=e.length;i<s;i++)~a(this.transports,e[i])&&t.push(e[i]);return t}}).call(e,function(){return this}())},function(e,t,i){(function(o){var r=i(16),l=i(18),c=i(33),e=i(34);t.polling=function(e){var t,i,s=!1,n=!1,a=!1!==e.jsonp;if(o.location&&(t="https:"===location.protocol,i=(i=location.port)||(t?443:80),s=e.hostname!==location.hostname||i!==e.port,n=e.secure!==t),e.xdomain=s,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new l(e);if(!a)throw new Error("JSONP disabled");return new c(e)},t.websocket=e}).call(t,function(){return this}())},function(e,t,i){(function(n){var a=i(17);e.exports=function(e){var t=e.xdomain,i=e.xscheme,s=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||a))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!i&&s)return new XDomainRequest}catch(e){}if(!t)try{return new(n[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(t,function(){return this}())},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(d,e,u){(function(n){function t(){}function e(e){var t,i;s.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,n.location&&(t="https:"===location.protocol,i=(i=location.port)||(t?443:80),this.xd=e.hostname!==n.location.hostname||i!==e.port,this.xs=e.secure!==t)}function a(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function i(){for(var e in a.requests)a.requests.hasOwnProperty(e)&&a.requests[e].abort()}var o=u(16),s=u(19),r=u(8),l=u(31),c=u(3)("engine.io-client:polling-xhr");d.exports=e,d.exports.Request=a,l(e,s),e.prototype.supportsBinary=!0,e.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new a(e)},e.prototype.doWrite=function(e,t){var i="string"!=typeof e&&void 0!==e,s=this.request({method:"POST",data:e,isBinary:i}),n=this;s.on("success",t),s.on("error",function(e){n.onError("xhr post error",e)}),this.sendXhr=s},e.prototype.doPoll=function(){c("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},r(a.prototype),a.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new o(e),i=this;try{c("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var s in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(s)&&t.setRequestHeader(s,this.extraHeaders[s])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){i.onLoad()},t.onerror=function(){i.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");i.supportsBinary&&"application/octet-stream"===e&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?i.onLoad():setTimeout(function(){i.onError(t.status)},0))},c("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){i.onError(e)},0)}n.document&&(this.index=a.requestsCount++,a.requests[this.index]=this)},a.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},a.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},a.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},a.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=t:this.xhr.onreadystatechange=t,e)try{this.xhr.abort()}catch(e){}n.document&&delete a.requests[this.index],this.xhr=null}},a.prototype.onLoad=function(){var e,t;try{try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e="application/octet-stream"===t&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},a.prototype.hasXDR=function(){return void 0!==n.XDomainRequest&&!this.xs&&this.enablesXDR},a.prototype.abort=function(){this.cleanup()},a.requestsCount=0,a.requests={},n.document&&(n.attachEvent?n.attachEvent("onunload",i):n.addEventListener&&n.addEventListener("beforeunload",i,!1))}).call(e,function(){return this}())},function(e,t,i){function s(e){var t=e&&e.forceBase64;d&&!t||(this.supportsBinary=!1),n.call(this,e)}var n=i(20),a=i(30),o=i(21),r=i(31),l=i(32),c=i(3)("engine.io-client:polling");e.exports=s;var d=null!=new(i(16))({xdomain:!1}).responseType;r(s,n),s.prototype.name="polling",s.prototype.doOpen=function(){this.poll()},s.prototype.pause=function(e){function t(){c("paused"),s.readyState="paused",e()}var i,s=this;this.readyState="pausing",this.polling||!this.writable?(i=0,this.polling&&(c("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){c("pre-pause polling complete"),--i||t()})),this.writable||(c("we are currently writing - waiting to pause"),i++,this.once("drain",function(){c("pre-pause writing complete"),--i||t()}))):t()},s.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},s.prototype.onData=function(e){var t=this;c("polling got data %s",e);o.decodePayload(e,this.socket.binaryType,function(e){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},s.prototype.doClose=function(){function e(){c("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},s.prototype.write=function(e){var t=this;this.writable=!1;function i(){t.writable=!0,t.emit("drain")}o.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,i)})},s.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||e.sid||(e.b64=1),e=a.encode(e),this.port&&("https"==t&&443!==Number(this.port)||"http"==t&&80!==Number(this.port))&&(i=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+e}},function(e,t,i){function s(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var n=i(21);i(8)((e.exports=s).prototype),s.prototype.onError=function(e,t){var i=new Error(e);return i.type="TransportError",i.description=t,this.emit("error",i),this},s.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},s.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},s.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},s.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},s.prototype.onData=function(e){var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)},s.prototype.onPacket=function(e){this.emit("packet",e)},s.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,g,s){(function(c){function r(e,t,i){if(!t)return g.encodeBase64Packet(e,i);if(u)return function(e,t,i){if(!t)return g.encodeBase64Packet(e,i);var s=new FileReader;return s.onload=function(){e.data=s.result,g.encodePacket(e,t,!0,i)},s.readAsArrayBuffer(e.data)}(e,t,i);var s=new Uint8Array(1);return s[0]=h[e.type],i(new v([s.buffer,e.data]))}function n(e,t,i){for(var n=new Array(e.length),s=l(e.length,i),a=0;a<e.length;a++)!function(i,e,s){t(e,function(e,t){n[i]=t,s(e,n)})}(a,e[a],s)}var a,e=s(22),o=s(23),p=s(24),l=s(25),d=s(26);c&&c.ArrayBuffer&&(a=s(28));var t="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),i="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),u=t||i;g.protocol=3;var h=g.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=e(h),m={type:"error",data:"parser error"},v=s(29);g.encodePacket=function(e,t,i,s){"function"==typeof t&&(s=t,t=!1),"function"==typeof i&&(s=i,i=null);var n,a=void 0===e.data?void 0:e.data.buffer||e.data;if(c.ArrayBuffer&&a instanceof ArrayBuffer)return function(e,t,i){if(!t)return g.encodeBase64Packet(e,i);var s=e.data,n=new Uint8Array(s),a=new Uint8Array(1+s.byteLength);a[0]=h[e.type];for(var o=0;o<n.length;o++)a[o+1]=n[o];return i(a.buffer)}(e,t,s);if(v&&a instanceof c.Blob)return r(e,t,s);if(a&&a.base64)return n=e,s("b"+g.packets[n.type]+n.data.data);var o=h[e.type];return void 0!==e.data&&(o+=i?d.encode(String(e.data),{strict:!1}):String(e.data)),s(""+o)},g.encodeBase64Packet=function(t,i){var s,n="b"+g.packets[t.type];if(v&&t.data instanceof c.Blob){var a=new FileReader;return a.onload=function(){var e=a.result.split(",")[1];i(n+e)},a.readAsDataURL(t.data)}try{s=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var o=new Uint8Array(t.data),r=new Array(o.length),l=0;l<o.length;l++)r[l]=o[l];s=String.fromCharCode.apply(null,r)}return n+=c.btoa(s),i(n)},g.decodePacket=function(e,t,i){if(void 0===e)return m;if("string"==typeof e){if("b"===e.charAt(0))return g.decodeBase64Packet(e.substr(1),t);if(i&&!1===(e=function(e){try{e=d.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return m;var s=e.charAt(0);return Number(s)==s&&f[s]?1<e.length?{type:f[s],data:e.substring(1)}:{type:f[s]}:m}var s=new Uint8Array(e)[0],n=p(e,1);return v&&"blob"===t&&(n=new v([n])),{type:f[s],data:n}},g.decodeBase64Packet=function(e,t){var i=f[e.charAt(0)];if(!a)return{type:i,data:{base64:!0,data:e.substr(1)}};var s=a.decode(e.substr(1));return"blob"===t&&v&&(s=new v([s])),{type:i,data:s}},g.encodePayload=function(e,t,i){"function"==typeof t&&(i=t,t=null);var s=o(e);return t&&s?v&&!u?g.encodePayloadAsBlob(e,i):g.encodePayloadAsArrayBuffer(e,i):e.length?void n(e,function(e,i){g.encodePacket(e,!!s&&t,!1,function(e){var t;i(null,(t=e).length+":"+t)})},function(e,t){return i(t.join(""))}):i("0:")},g.decodePayload=function(e,t,i){if("string"!=typeof e)return g.decodePayloadAsBinary(e,t,i);var s;if("function"==typeof t&&(i=t,t=null),""===e)return i(m,0,1);for(var n,a,o="",r=0,l=e.length;r<l;r++){var c=e.charAt(r);if(":"===c){if(""===o||o!=(n=Number(o)))return i(m,0,1);if(o!=(a=e.substr(r+1,n)).length)return i(m,0,1);if(a.length){if(s=g.decodePacket(a,t,!1),m.type===s.type&&m.data===s.data)return i(m,0,1);if(!1===i(s,r+n,l))return}r+=n,o=""}else o+=c}return""!==o?i(m,0,1):void 0},g.encodePayloadAsArrayBuffer=function(e,s){return e.length?void n(e,function(e,t){g.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,t){var i=t.reduce(function(e,t){var i="string"==typeof t?t.length:t.byteLength;return e+i.toString().length+i+2},0),o=new Uint8Array(i),r=0;return t.forEach(function(e){var t="string"==typeof e,i=e;if(t){for(var s=new Uint8Array(e.length),n=0;n<e.length;n++)s[n]=e.charCodeAt(n);i=s.buffer}o[r++]=t?0:1;for(var a=i.byteLength.toString(),n=0;n<a.length;n++)o[r++]=parseInt(a[n]);o[r++]=255;for(s=new Uint8Array(i),n=0;n<s.length;n++)o[r++]=s[n]}),s(o.buffer)}):s(new ArrayBuffer(0))},g.encodePayloadAsBlob=function(e,i){n(e,function(e,r){g.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);e=i.buffer,t[0]=0}for(var n,a=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),o=new Uint8Array(a.length+1),s=0;s<a.length;s++)o[s]=parseInt(a[s]);o[a.length]=255,v&&(n=new v([t.buffer,o.buffer,e]),r(null,n))})},function(e,t){return i(new v(t))})},g.decodePayloadAsBinary=function(e,i,s){"function"==typeof i&&(s=i,i=null);for(var t=e,n=[];0<t.byteLength;){for(var a=new Uint8Array(t),o=0===a[0],r="",l=1;255!==a[l];l++){if(310<r.length)return s(m,0,1);r+=a[l]}t=p(t,2+r.length),r=parseInt(r);var c=p(t,0,r);if(o)try{c=String.fromCharCode.apply(null,new Uint8Array(c))}catch(e){var d=new Uint8Array(c);c="";for(l=0;l<d.length;l++)c+=String.fromCharCode(d[l])}n.push(c),t=p(t,r)}var u=n.length;n.forEach(function(e,t){s(g.decodePacket(e,i,!0),t,u)})}}).call(g,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t=[],i=Object.prototype.hasOwnProperty;for(var s in e)i.call(e,s)&&t.push(s);return t}},function(t,e,i){(function(a){var o=i(10),e=Object.prototype.toString,r="function"==typeof a.Blob||"[object BlobConstructor]"===e.call(a.Blob),l="function"==typeof a.File||"[object FileConstructor]"===e.call(a.File);t.exports=function e(t){if(!t||"object"!=(void 0===t?"undefined":_typeof2(t)))return!1;if(o(t)){for(var i=0,s=t.length;i<s;i++)if(e(t[i]))return!0;return!1}if("function"==typeof a.Buffer&&a.Buffer.isBuffer&&a.Buffer.isBuffer(t)||"function"==typeof a.ArrayBuffer&&t instanceof ArrayBuffer||r&&t instanceof Blob||l&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return!0;return!1}}).call(e,function(){return this}())},function(e,t){e.exports=function(e,t,i){var s=e.byteLength;if(t=t||0,i=i||s,e.slice)return e.slice(t,i);if(t<0&&(t+=s),i<0&&(i+=s),s<i&&(i=s),s<=t||i<=t||0===s)return new ArrayBuffer(0);for(var n=new Uint8Array(e),a=new Uint8Array(i-t),o=t,r=0;o<i;o++,r++)a[r]=n[o];return a.buffer}},function(e,t){function o(){}e.exports=function(e,i,s){function n(e,t){if(n.count<=0)throw new Error("after called too many times");--n.count,e?(a=!0,i(e),i=s):0!==n.count||a||i(null,t)}var a=!1;return s=s||o,0===(n.count=e)?i():n}},function(e,n,h){var f;(function(i,s){!function(){function r(e){for(var t,i,s=[],n=0,a=e.length;n<a;)55296<=(t=e.charCodeAt(n++))&&t<=56319&&n<a?56320==(64512&(i=e.charCodeAt(n++)))?s.push(((1023&t)<<10)+(1023&i)+65536):(s.push(t),n--):s.push(t);return s}function l(e,t){if(!(55296<=e&&e<=57343))return 1;if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function c(e,t){return p(e>>t&63|128)}function a(){if(d<=u)throw Error("Invalid byte index");var e=255&o[u];if(u++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}void 0===n||_typeof2(n);var e=("object"==(void 0===i?"undefined":_typeof2(i))&&i&&i.exports,"object"==(void 0===s?"undefined":_typeof2(s))&&s);e.global!==e&&e.window;var o,d,u,p=String.fromCharCode,t={version:"2.1.2",encode:function(e,t){for(var i=!1!==(t=t||{}).strict,s=r(e),n=s.length,a=-1,o="";++a<n;)o+=function(e,t){if(0==(4294967168&e))return p(e);var i="";return 0==(4294965248&e)?i=p(e>>6&31|192):0==(4294901760&e)?(l(e,t)||(e=65533),i=p(e>>12&15|224),i+=c(e,6)):0==(4292870144&e)&&(i=p(e>>18&7|240),i+=c(e,12),i+=c(e,6)),i+p(63&e|128)}(s[a],i);return o},decode:function(e,t){var i=!1!==(t=t||{}).strict;o=r(e),d=o.length,u=0;for(var s,n=[];!1!==(s=function(e){var t,i;if(d<u)throw Error("Invalid byte index");if(u==d)return!1;if(t=255&o[u],u++,0==(128&t))return t;if(192==(224&t)){if(128<=(i=(31&t)<<6|a()))return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if(2048<=(i=(15&t)<<12|a()<<6|a()))return l(i,e)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(65536<=(i=(7&t)<<18|a()<<12|a()<<6|a())&&i<=1114111))return i;throw Error("Invalid UTF-8 detected")}(i));)n.push(s);return function(e){for(var t,i=e.length,s=-1,n="";++s<i;)65535<(t=e[s])&&(n+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),n+=p(t);return n}(n)}};void 0===(f=function(){return t}.call(n,h,n,i))||(i.exports=f)}()}).call(n,h(27)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){!function(){"use strict";for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=new Uint8Array(256),e=0;e<a.length;e++)u[a.charCodeAt(e)]=e;t.encode=function(e){for(var t=new Uint8Array(e),i=t.length,s="",n=0;n<i;n+=3)s+=a[t[n]>>2],s+=a[(3&t[n])<<4|t[n+1]>>4],s+=a[(15&t[n+1])<<2|t[n+2]>>6],s+=a[63&t[n+2]];return i%3==2?s=s.substring(0,s.length-1)+"=":i%3==1&&(s=s.substring(0,s.length-2)+"=="),s},t.decode=function(e){var t,i,s,n,a=.75*e.length,o=e.length,r=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);for(var l=new ArrayBuffer(a),c=new Uint8Array(l),d=0;d<o;d+=4)t=u[e.charCodeAt(d)],i=u[e.charCodeAt(d+1)],s=u[e.charCodeAt(d+2)],n=u[e.charCodeAt(d+3)],c[r++]=t<<2|i>>4,c[r++]=(15&i)<<4|s>>2,c[r++]=(3&s)<<6|63&n;return l}}()},function(l,e){(function(e){function n(e){for(var t=0;t<e.length;t++){var i,s,n=e[t];n.buffer instanceof ArrayBuffer&&(i=n.buffer,n.byteLength!==i.byteLength&&((s=new Uint8Array(n.byteLength)).set(new Uint8Array(i,n.byteOffset,n.byteLength)),i=s.buffer),e[t]=i)}}function t(e,t){t=t||{};var i=new a;n(e);for(var s=0;s<e.length;s++)i.append(e[s]);return t.type?i.getBlob(t.type):i.getBlob()}function i(e,t){return n(e),new Blob(e,t||{})}var a=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=s&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),r=a&&a.prototype.append&&a.prototype.getBlob;l.exports=s?o?e.Blob:i:r?t:void 0}).call(e,function(){return this}())},function(e,t){t.encode=function(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t},t.decode=function(e){for(var t={},i=e.split("&"),s=0,n=i.length;s<n;s++){var a=i[s].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},function(e,t){e.exports=function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},function(e,t){"use strict";function i(e){for(var t="";t=a[e%o]+t,0<(e=Math.floor(e/o)););return t}function s(){var e=i(+new Date);return e!==n?(l=0,n=e):e+"."+i(l++)}for(var n,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,r={},l=0,c=0;c<o;c++)r[a[c]]=c;s.encode=i,s.decode=function(e){var t=0;for(c=0;c<e.length;c++)t=t*o+r[e.charAt(c)];return t},e.exports=s},function(o,e,r){(function(i){function s(){}function e(e){n.call(this,e),this.query=this.query||{},a||(i.___eio||(i.___eio=[]),a=i.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,i.document&&i.addEventListener&&i.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=s)},!1)}var n=r(19),t=r(31);o.exports=e;var a,c=/\n/g,d=/\\n/g;t(e,n),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},e.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var i=document.getElementsByTagName("script")[0];i?i.parentNode.insertBefore(e,i):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},e.prototype.doWrite=function(e,t){function i(){s(),t()}function s(){if(l.iframe)try{l.form.removeChild(l.iframe)}catch(e){l.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+l.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=l.iframeId,n.src="javascript:0"}n.id=l.iframeId,l.form.appendChild(n),l.iframe=n}var n,a,o,r,l=this;this.form||(a=document.createElement("form"),o=document.createElement("textarea"),r=this.iframeId="eio_iframe_"+this.index,a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=r,a.method="POST",a.setAttribute("accept-charset","utf-8"),o.name="d",a.appendChild(o),document.body.appendChild(a),this.form=a,this.area=o),this.form.action=this.uri(),s(),e=e.replace(d,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===l.iframe.readyState&&i()}:this.iframe.onload=i}}).call(e,function(){return this}())},function(u,e,p){(function(a){function e(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=c&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(d=t),i.call(this,e)}var t,i=p(20),o=p(21),s=p(30),n=p(31),r=p(32),l=p(3)("engine.io-client:websocket"),c=a.WebSocket||a.MozWebSocket;if("undefined"==typeof window)try{t=p(35)}catch(e){}var d=c;d||"undefined"!=typeof window||(d=t),n(u.exports=e,i),e.prototype.name="websocket",e.prototype.supportsBinary=!0,e.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,i={agent:this.agent,perMessageDeflate:this.perMessageDeflate};i.pfx=this.pfx,i.key=this.key,i.passphrase=this.passphrase,i.cert=this.cert,i.ca=this.ca,i.ciphers=this.ciphers,i.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(i.headers=this.extraHeaders),this.localAddress&&(i.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?t?new d(e,t):new d(e):new d(e,t,i)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},e.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},e.prototype.write=function(e){var s=this;this.writable=!1;for(var n=e.length,t=0,i=n;t<i;t++)!function(i){o.encodePacket(i,s.supportsBinary,function(e){var t;s.usingBrowserWebSocket||(t={},i.options&&(t.compress=i.options.compress),!s.perMessageDeflate||("string"==typeof e?a.Buffer.byteLength(e):e.length)<s.perMessageDeflate.threshold&&(t.compress=!1));try{s.usingBrowserWebSocket?s.ws.send(e):s.ws.send(e,t)}catch(e){l("websocket closed before onclose event")}--n||(s.emit("flush"),setTimeout(function(){s.writable=!0,s.emit("drain")},0))})}(e[t])},e.prototype.onClose=function(){i.prototype.onClose.call(this)},e.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},e.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",i="";return this.port&&("wss"==t&&443!==Number(this.port)||"ws"==t&&80!==Number(this.port))&&(i=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=r()),this.supportsBinary||(e.b64=1),(e=s.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+e},e.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===e.prototype.name)}}).call(e,function(){return this}())},function(e,t){},function(e,t){var s=[].indexOf;e.exports=function(e,t){if(s)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},function(e,t,i){"use strict";function s(e,t,i){this.io=e,this.nsp=t,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},i&&i.query&&(this.query=i.query),this.io.autoConnect&&this.open()}var n="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},a=i(7),o=i(8),r=i(38),l=i(39),c=i(40),d=i(3)("socket.io-client:socket"),u=i(30),p=i(23);e.exports=s;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=o.prototype.emit;o(s.prototype),s.prototype.subEvents=function(){var e;this.subs||(e=this.io,this.subs=[l(e,"open",c(this,"onopen")),l(e,"packet",c(this,"onpacket")),l(e,"close",c(this,"onclose"))])},s.prototype.open=s.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},s.prototype.send=function(){var e=r(arguments);return e.unshift("message"),this.emit.apply(this,e),this},s.prototype.emit=function(e){if(h.hasOwnProperty(e))return f.apply(this,arguments),this;var t=r(arguments),i={type:(void 0!==this.flags.binary?this.flags.binary:p(t))?a.BINARY_EVENT:a.EVENT,data:t,options:{}};return i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(d("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this.flags={},this},s.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},s.prototype.onopen=function(){var e;d("transport is open - connecting"),"/"!==this.nsp&&(this.query?(e="object"===n(this.query)?u.encode(this.query):this.query,d("sending connect packet with query %s",e),this.packet({type:a.CONNECT,query:e})):this.packet({type:a.CONNECT}))},s.prototype.onclose=function(e){d("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},s.prototype.onpacket=function(e){var t=e.nsp===this.nsp,i=e.type===a.ERROR&&"/"===e.nsp;if(t||i)switch(e.type){case a.CONNECT:this.onconnect();break;case a.EVENT:case a.BINARY_EVENT:this.onevent(e);break;case a.ACK:case a.BINARY_ACK:this.onack(e);break;case a.DISCONNECT:this.ondisconnect();break;case a.ERROR:this.emit("error",e.data)}},s.prototype.onevent=function(e){var t=e.data||[];d("emitting event %j",t),null!=e.id&&(d("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},s.prototype.ack=function(t){var i=this,s=!1;return function(){var e;s||(s=!0,e=r(arguments),d("sending ack %j",e),i.packet({type:p(e)?a.BINARY_ACK:a.ACK,id:t,data:e}))}},s.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(d("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):d("bad ack %s",e.id)},s.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},s.prototype.emitBuffered=function(){for(var e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},s.prototype.ondisconnect=function(){d("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},s.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},s.prototype.close=s.prototype.disconnect=function(){return this.connected&&(d("performing disconnect (%s)",this.nsp),this.packet({type:a.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},s.prototype.compress=function(e){return this.flags.compress=e,this},s.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t){for(var i=[],s=(t=t||0)||0;s<e.length;s++)i[s-t]=e[s];return i}},function(e,t){"use strict";e.exports=function(e,t,i){return e.on(t,i),{destroy:function(){e.removeListener(t,i)}}}},function(e,t){var s=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=s.call(arguments,2);return function(){return t.apply(e,i.concat(s.call(arguments)))}}},function(e,t){function i(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}(e.exports=i).prototype.duration=function(){var e,t,i=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(e=Math.random(),t=Math.floor(e*this.jitter*i),i=0==(1&Math.floor(10*e))?i-t:i+t),0|Math.min(i,this.max)},i.prototype.reset=function(){this.attempts=0},i.prototype.setMin=function(e){this.ms=e},i.prototype.setMax=function(e){this.max=e},i.prototype.setJitter=function(e){this.jitter=e}}],i.c=n,i.p="",i(0);function i(e){if(n[e])return n[e].exports;var t=n[e]={exports:{},id:e,loaded:!1};return s[e].call(t.exports,t,t.exports,i),t.loaded=!0,t.exports}var s,n});var SortableTable={data:function(){return{isSortable:!1,draggingRow:null,draggingRowIndex:null}},methods:{rowDragStart:function(e){$mx("html").addClass("is-dragging"),this.draggingRow=e.row,this.draggingRowIndex=e.index,e.event.dataTransfer.effectAllowed="copy"},rowDrop:function(e){var t=this;e.event.target.closest("tr").classList.remove("is-selected");var i,s,n,a=this.draggingRowIndex,o=e.index;a!=o&&(i=this.fields,s=i[o],n=i.splice(a,1)[0],i.splice(o,0,n),this.fields=[],this.$nextTick(function(){t.fields=i,t.onReSort(a,o,n,s)})),$mx("html").removeClass("is-dragging")},rowDragOver:function(e){e.event.dataTransfer.dropEffect="copy",e.event.target.closest("tr").classList.add("is-selected"),e.event.preventDefault()},rowDragLeave:function(e){e.event.target.closest("tr").classList.remove("is-selected"),e.event.preventDefault()}}};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).VueTippy={})}(this,function(e){"use strict";function t(t,e){var i,s=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,i)),s}var s={a11y:!0,allowHTML:!0,animateFill:!0,arrow:!1,flip:!0,flipOnUpdate:!1,followCursor:!1,hideOnClick:!0,ignoreAttributes:!1,inertia:!1,interactive:!1,lazy:!0,multiple:!1,showOnInit:!1,sticky:!1,touch:!0,touchHold:!1},n=function(n){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?t(Object(a),!0).forEach(function(e){var t,i,s;t=n,s=a[i=e],i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}({animation:"shift-away",appendTo:function(){return document.body},aria:"describedby",arrow:!0,boundary:"scrollParent",content:"",delay:0,distance:10,duration:[325,275],flipBehavior:"flip",interactiveBorder:2,interactiveDebounce:0,maxWidth:350,offset:0,onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},placement:"top",popperOptions:{},role:"tooltip",size:"regular",target:"",theme:"dark",trigger:"mouseenter focus",updateDuration:0,wait:null,zIndex:9999},s);function i(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{ref:"trigger"},[this._t("trigger")],2),this._v(" "),t("div",{ref:"content"},[this._t("default")],2)])}var a={props:["to","toSelector","toElement","content","enabled","visible","triggerTarget"],data:function(){return{tip:null,options:{}}},mounted:function(){this.init()},watch:{content:function(){this.tip&&this.tip.setProps(this.getOptions())},enabled:function(e){this.tip&&(e?this.tip.enable():(this.tip.hide(),this.tip.disable()))},visible:function(e){this.tip&&(e?this.tip.show():this.tip.hide())}},updated:function(){this.tip&&!this.content&&this.tip.setProps(this.getOptions())},beforeDestroy:function(){this.tip&&this.tip.destroy()},computed:{isManualTrigger:function(){return"manual"===this.options.trigger}},methods:{init:function(){if(this.tip){try{this.tip.destroy()}catch(e){}this.tip=null}var e=this.toElement;if(null==e&&(e=this.to?document.querySelector("[name='".concat(this.to,"']")):this.toSelector?document.querySelector(this.toSelector):this.$refs.trigger&&0<this.$refs.trigger.childElementCount?this.$refs.trigger:this.$el.parentElement),e){var t=tippy(e,this.getOptions());if(t){if(Array.isArray(t)){if(!(0<t.length))return;this.tip=t[0]}this.tip=t,this.$emit("onCreate",this.tip),this.$emit("init",this.tip),!1===this.enabled&&this.tip.disable(),this.isManualTrigger&&!0===this.visible&&this.tip.show()}}},tippy:function(){return this.tip},filterOptions:function(){for(var e=0,t=Object.keys(this.options);e<t.length;e++){var i=t[e];n.hasOwnProperty(i)||delete this.options[i],this.options[i]=function(e,t){if(s.hasOwnProperty(e)){if(""===t)return!0;if("false"===t)return!1;if("true"===t)return!0}return t}(i,this.options[i])}return this.options},getOptions:function(){var e,i,s=this;return Object.assign(this.options,(e=this.$attrs,i={},_.each(e,function(e,t){i[_.camelCase(t)]=e}),i)),this.filterOptions(),!this.options.onShow&&this.$listeners&&this.$listeners.show&&(this.options.onShow=function(){var e;return(e=s.$listeners.show).fns.apply(e,arguments)}),this.options.onShown||(this.options.onShown=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s.$emit.apply(s,["shown"].concat(t))}),this.options.onHidden||(this.options.onHidden=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s.$emit.apply(s,["hidden"].concat(t))}),!this.options.onHide&&this.$listeners&&this.$listeners.hide&&(this.options.onHide=function(){var e;return(e=s.$listeners.hide).fns.apply(e,arguments)}),this.options.onMount||(this.options.onMount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s.$emit.apply(s,["mount"].concat(t))}),this.options.hasOwnProperty("content")||(this.options.content=this.content?this.content:this.$refs.content),this.options.triggerTarget=this.triggerTarget,this.options}}};i._withStripped=!0;var o,r=function(e,t,i,s,n,a,o,r,l,c){"boolean"!=typeof o&&(l=r,r=o,o=!1);var d="function"==typeof i?i.options:i;e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,n&&(d.functional=!0)),s&&(d._scopeId=s);var u,p,h=void 0;return a?(h=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=h):t&&(h=o?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,r(e))}),h&&(d.functional?(u=d.render,d.render=function(e,t){return h.call(t),u(e,t)}):(p=d.beforeCreate,d.beforeCreate=p?[].concat(p,h):[h])),i}({render:i,staticRenderFns:[]},void 0,a,void 0,!1,void 0,!1,void 0,void 0,void 0),l={install:function(l,e){var c=1<arguments.length&&void 0!==e?e:{};o=c.directive||"tippy",tippy.setDefaultProps(c||{}),l.directive(o,{inserted:function(a,o,r){l.nextTick(function(){var e,t,i,s,n;e=a,t=o,s=(i=r).data&&i.data.on||i.componentOptions&&i.componentOptions.listeners,n=t.value||{},n=Object.assign({},c,n),s&&s.show&&(n.onShow=function(){var e;return(e=s.show).fns.apply(e,arguments)}),s&&s.shown&&(n.onShown=function(){var e;(e=s.shown).fns.apply(e,arguments)}),s&&s.hidden&&(n.onHidden=function(){var e;(e=s.hidden).fns.apply(e,arguments)}),s&&s.hide&&(n.onHide=function(){var e;return(e=s.hide).fns.apply(e,arguments)}),s&&s.mount&&(n.onMount=function(){var e;(e=s.mount).fns.apply(e,arguments)}),e.getAttribute("title")&&!n.content&&(n.content=e.getAttribute("title")),e.getAttribute("content")&&!n.content&&(n.content=e.getAttribute("content")),tippy(e,n),n.showOnLoad&&e._tippy.show(),l.nextTick(function(){s&&s.init&&s.init.fns(e._tippy,e)})})},unbind:function(e){e._tippy&&e._tippy.destroy()},componentUpdated:function(e,t){var i;e._tippy&&(i=t.value||{},e.getAttribute("title")&&!i.content&&(i.content=e.getAttribute("title")),e.getAttribute("content")&&!i.content&&(i.content=e.getAttribute("content")),e._tippy.setProps(i))}})}};e.TippyComponent=r,e.default=l,e.tippy=tippy,Object.defineProperty(e,"__esModule",{value:!0})}),function(e){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=e()}(function(){return function a(o,r,l){function c(i,e){if(!r[i]){if(!o[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(d)return d(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var n=r[i]={exports:{}};o[i][0].call(n.exports,function(e){var t=o[i][1][e];return c(t||e)},n,n.exports,a,o,r,l)}return r[i].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,i){var s;"undefined"==typeof Element||Element.prototype.matches||((s=Element.prototype).matches=s.matchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.webkitMatchesSelector),t.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},{}],2:[function(e,t,i){var o=e("./closest");t.exports=function(e,t,i,s,n){var a=function(t,i,e,s){return function(e){e.delegateTarget=o(e.target,i),e.delegateTarget&&s.call(t,e)}}.apply(this,arguments);return e.addEventListener(i,a,n),{destroy:function(){e.removeEventListener(i,a,n)}}}},{"./closest":1}],3:[function(e,t,i){i.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},i.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||i.node(e[0]))},i.string=function(e){return"string"==typeof e||e instanceof String},i.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],4:[function(e,t,i){var p=e("./is"),h=e("delegate");t.exports=function(e,t,i){if(!e&&!t&&!i)throw new Error("Missing required arguments");if(!p.string(t))throw new TypeError("Second argument must be a String");if(!p.fn(i))throw new TypeError("Third argument must be a Function");if(p.node(e))return d=t,u=i,(c=e).addEventListener(d,u),{destroy:function(){c.removeEventListener(d,u)}};if(p.nodeList(e))return o=e,r=t,l=i,Array.prototype.forEach.call(o,function(e){e.addEventListener(r,l)}),{destroy:function(){Array.prototype.forEach.call(o,function(e){e.removeEventListener(r,l)})}};if(p.string(e))return s=e,n=t,a=i,h(document.body,s,n,a);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var s,n,a,o,r,l,c,d,u}},{"./is":3,delegate:2}],5:[function(e,t,i){t.exports=function(e){var t,i,s,n="SELECT"===e.nodeName?(e.focus(),e.value):"INPUT"===e.nodeName||"TEXTAREA"===e.nodeName?((t=e.hasAttribute("readonly"))||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),t||e.removeAttribute("readonly"),e.value):(e.hasAttribute("contenteditable")&&e.focus(),i=window.getSelection(),(s=document.createRange()).selectNodeContents(e),i.removeAllRanges(),i.addRange(s),i.toString());return n}},{}],6:[function(e,t,i){function s(){}s.prototype={on:function(e,t,i){var s=this.e||(this.e={});return(s[e]||(s[e]=[])).push({fn:t,ctx:i}),this},once:function(e,t,i){var s=this;function n(){s.off(e,n),t.apply(i,arguments)}return n._=t,this.on(e,n,i)},emit:function(e){for(var t=[].slice.call(arguments,1),i=((this.e||(this.e={}))[e]||[]).slice(),s=0,n=i.length;s<n;s++)i[s].fn.apply(i[s].ctx,t);return this},off:function(e,t){var i=this.e||(this.e={}),s=i[e],n=[];if(s&&t)for(var a=0,o=s.length;a<o;a++)s[a].fn!==t&&s[a].fn._!==t&&n.push(s[a]);return n.length?i[e]=n:delete i[e],this}},t.exports=s},{}],7:[function(e,t,i){var s,n,a;s=this,n=function(e,t){"use strict";var i,s=(i=t)&&i.__esModule?i:{default:i};var n="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)};function a(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var o=(function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}(r,[{key:"resolveOptions",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,s.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,s.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(e){var t=0<arguments.length&&void 0!==e?e:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":n(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),r);function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.resolveOptions(e),this.initSelection()}e.exports=o},void 0!==i?n(t,e("select")):(n(a={exports:{}},s.select),s.clipboardAction=a.exports)},{select:5}],8:[function(e,t,i){var s,n,a;s=this,n=function(e,t,i,s){"use strict";var n=r(t),a=r(i),o=r(s);function r(e){return e&&e.__esModule?e:{default:e}}var l="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)};var c=function(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),e};function d(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,a.default),c(p,[{key:"resolveOptions",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===l(t.container)?t.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,o.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new n.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return h("action",e)}},{key:"defaultTarget",value:function(e){var t=h("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return h("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(e){var t=0<arguments.length&&void 0!==e?e:["copy","cut"],i="string"==typeof t?[t]:t,s=!!document.queryCommandSupported;return i.forEach(function(e){s=s&&!!document.queryCommandSupported(e)}),s}}]),p);function p(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return i.resolveOptions(t),i.listenClick(e),i}function h(e,t){var i="data-clipboard-"+e;if(t.hasAttribute(i))return t.getAttribute(i)}e.exports=u},void 0!==i?n(t,e("./clipboard-action"),e("tiny-emitter"),e("good-listener")):(n(a={exports:{}},s.clipboardAction,s.tinyEmitter,s.goodListener),s.clipboard=a.exports)},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),window.modules_loaded={},window.components_hooks={},window.modules_hooks={};var App={modules:{},endpoints:{},components:{},defineModuleLazy:[],data:[],loadModule:function(e){$mx.lazy("vue."+e+".js","vue."+e+".css"),window.modules_loaded[e]=!0},loadComponent:function(n){var a=this;return new Promise(function(e,t){var i,s=/^vue\-([^-]+)/gi.exec(n);null!=Vue.options.components[n]?e(Vue.options.components[n]):(null==Vue.options.components[n]&&Vue.component(n,function(e){window.components_hooks[n]=e}),s?(window.components_hooks[n]=e,i=s[1],null==window.modules_loaded[i]&&a.loadModule(i)):t())})},defineComponent:function(e,t,i){null==this.components[e]&&(this.components[e]={}),this.components[e][t]=[t,i],window.modules_loaded[e]=!0,Vue.component(t,i)},defineModuleComplete:function(){var t=this;_.each(this.defineModuleLazy,function(e){t.defineModule(e[0],e[1],!0)}),this.defineModuleLazy=[]},defineModule:function(n,a,e){var o=this;null!=window.$vue||null!=e?"index"==n||"frontend"==n?(function e(t){_.each(t,function(i){i.pathToRegexpOptions={strict:!0},null!=window.account&&window.account.custom_domain&&-1!=["index","inner"].indexOf(i.name)&&(i.path="/"),"string"==typeof i.component?(i.componentName=i.component,i.component=function(e,t){App.loadComponent(i.componentName).then(e,t)}):null==i.component&&(i.component={template:"<router-view></router-view>"}),null!=i.children&&i.children.length&&e(i.children)})}(a),router_options.routes=a,(router=new VueRouter(router_options)).getRoute=function(e){return function e(t,i){if(r=_.find(t,i),r)return r;for(var s=0;s<t.length;s++)if(null!=t[s].children&&(r=e(t[s].children,i)),r)return r;return null}(this.options.routes,e)},router.beforeEach(function(e,t,i){window.$events.fire("beforeNavigate",t),i()}),router.afterEach(function(e){window.$events.fire("navigate",e)}),router.beforeResolve(function(e,t,i){var s,n=/^\/[0-9]+\/([^\/]+)\//gi.exec(e.path);n&&n.length?(s=n[1],null==window.modules_loaded[s]?(window.components_hooks[s]=function(){i(),router.replace(router.currentRoute)},o.loadModule(s)):i()):i()}),window.vue_options.router=router):$mx.get("/api/permissions/get.json",{module:n}).then(function(e){var t=e.data.response.endpoints[n];o.endpoints[n]=t;var i,s;!function e(t){_.each(t,function(i){i.pathToRegexpOptions={strict:!0},null==i.meta&&(i.meta={}),i.meta.module=n,null!=i.children&&(i.children=_.filter(i.children,function(e){if(null==e.meta||null==e.meta.endpoint)return!0;var t=e.meta.endpoint.split("/"),i=o.endpoints,s=!0;for(var n in t){if(!(null!=i[t[n]]||-1!=_.findIndex(i,t[n])||_.isArray(i)&&-1!=i.indexOf(t[n]))){s=!1;break}i=_.isArray(i)?null:i[t[n]]}return s}),null!=i.children&&i.children.length&&e(i.children)),null!=i.children&&i.children.length&&null==i.component&&null==i.redirect&&(i.redirect=i.path+i.children[0].path),"string"==typeof i.component?(i.componentName=i.component,i.component=function(e,t){App.loadComponent(i.componentName).then(e,t)}):null==i.component&&(i.component={template:"<router-view></router-view>"}),null==router&&base&&(i.path=base+i.path.substring(1))})}(a),o.modules[n]=a,_.each(o.components[n],function(e){null!=window.components_hooks[e[0]]&&window.components_hooks[e[0]](e[1])}),delete o.components[n],null!=router&&a.length&&((i=router.getRoute({name:n}))&&(i.children=a),router_options.routes=router.options.routes,s=new VueRouter(router_options),router.matcher=s.matcher),null!=window.components_hooks[n]&&window.components_hooks[n](a)}):this.defineModuleLazy.push([n,a])},defineLanguage:function(e,t,i){i18n.phrases[e]=i,i18n.first_day_week[e]=t,window.$vue&&window.$vue.$forceUpdate()}};window.$app=App;var i18n={locale:"",formats:{},phrases:{},counties:{},first_day_week:{ru:1},init:function(e){null!=e.locales&&(window.locales=e.locales);var t=$mx("html");this.locale=t.attr("lang"),this.formats={date:t.data("format-date"),datetime:t.data("format-datetime")},null==this.phrases[this.locale]&&(this.phrases[this.locale]=[],$mx.lazy("locales."+this.locale+".js"))},extend:function(e){this.phrases[this.locale]=Object.assign(this.phrases[this.locale],e)},install:function(n){function e(e){return"string"==typeof(e=p.phrases[p.locale]&&p.phrases[p.locale][e]||e)?e.split("|")[0]:e}function t(e,t){var i=p.phrases[p.locale]&&p.phrases[p.locale][e]||e;if((i=i.split("|")).length){if(1==i.length)return t+" "+i[0];if(0==(t=Math.abs(t)))return i[2];return t+" "+i[4<t%100&&t%100<20?2:[2,0,1,1,1,2][Math.min(t%10,5)]]}return t+" "+e}function i(e,t){null==t&&(t=0);var i=n.prototype.$account.number;return _.isNumber(e)?window.number_format(e,{decimal:i.decimal,thousands:i.thousands,precision:t}):e}function s(e){return _.isNumber(e)?window.number_format(e,n.prototype.$account.number):e}function a(e,t,i){var s=_.isObject(t)?t:n.prototype.$account.currency;return null!=t&&!_.isObject(t)||(t=s.title),null==i&&(i=s.format),_.isNumber(e)?i.replace("%p",window.number_format(e,s)).replace("%c",t).replace(/ /g," "):e}function o(e){return e?date_format(p.formats.datetime,_.isNumber(e)?e:Date.parse(e)/1e3|0):e}function r(e){return e?date_format(p.formats.date,_.isNumber(e)?e:Date.parse(e)/1e3|0):e}function l(){var i=arguments;return i[0].replace(/{(\d+)}/g,function(e,t){return void 0!==i[t]?i[t]:e})}function c(e){return"string"==typeof e?e.replace(/\n/g,"<br>"):e}function d(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e,t){return void 0===e||null==e||""===e?t:e}var p=this;n.filter("gettext",e),n.prototype.$gettext=e,n.filter("plural",t),n.prototype.$plural=t,n.filter("number",i),n.filter("weight",function(e,t){var i=n.prototype.$account.weight;return(_.isNumber(e)?window.number_format(e,i):e)+(t?" "+i.unit_title:"")}),n.prototype.$number=i,n.filter("decimal",s),n.prototype.$decimal=s,n.filter("currency",a),n.prototype.$currency=a,n.filter("datetime",o),n.prototype.$datetime=o,n.filter("date",r),n.prototype.$date=r,n.filter("nvl",u),n.prototype.$nvl=u,n.filter("sprintf",function(e,t){return t.replace("%s",e)}),n.filter("replace",function(){var e=arguments;return e[0].replace(e[1],e[2])}),n.filter("format",l),n.filter("nl2br",c),n.filter("escape",d),n.prototype.$nl2br=c,n.prototype.$format=l,n.prototype.$escape=d,n.prototype.$clone=function(e){return JSON.parse(JSON.stringify(e))},n.filter("join",function(e,t){return e?e.join(t):e}),n.prototype.$getDaysNames=function(){return _.map(["ВС","ПН","ВТ","СР","ЧТ","ПТ","СБ"],n.prototype.$gettext)},n.prototype.$getMonthsNames=function(){return _.map(["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],n.prototype.$gettext)},n.prototype.$getFirstDayWeek=function(){return p.first_day_week[p.locale]}}};window.i18n=i18n,Vue.use(i18n),Buefy.ConfigProgrammatic.setOptions({defaultIconPack:"fal",defaultDateFormatter:function(e){return date_format(window.i18n.formats.date,Date.parse(e)/1e3|0)}}),Vue.prototype.$http=$mx;var path=document.location.pathname.split("/");null==window.base_path_prefix&&(window.base_path_prefix=/^[a-z]{2}(\-[a-z]{2})?$/.test(path[1])?"/"+path[1]:"",window.base_path=window.base_path_prefix+"/profile/");var router=null,router_options={mode:"history",routes:[],base:window.base_path,linkExactActiveClass:"active",linkActiveClass:"active"};Vue.component("sortable-list",{mixins:[VueSlicksort.ContainerMixin],template:"<div><slot /></div>"}),Vue.component("sortable-item",{mixins:[VueSlicksort.ElementMixin],props:["item"],template:"<div><slot /></div>"}),Vue.component("sortable-handle",{mixins:[VueSlicksort.ElementMixin]}),Vue.directive("sortable-handle",VueSlicksort.HandleDirective),Vue.use(VueTippy.default,{animation:"shift-away",arrow:tippy.roundArrow,placement:"top",allowHTML:!0,zIndex:99999}),Vue.component("tippy",VueTippy.TippyComponent),function(e){"use strict";e.ListModel={data:function(){return{fields:[],current:null,last:null,next:null,total:0,page:1,perPage:30,pages:[],checkedRows:[],sortField:"",sortOrder:""}},methods:{clearPages:function(){this.next=null,this.current=null,this.pages=[],this.page=1},refresh:function(){this.$delete(this.pages,this.page),this.next=this.current,alert,this.fetchData()},onSort:function(e,t){this.sortField=e,this.sortOrder=t,this.clearPages(),this.fetchData(!0)},onPageChange:function(e){this.page=e,this.fetchData(!0)},cachePage:function(e,t){this.pages[this.page]=e,null!=t?t(e):this.fields=e.fields,this.current=this.next,this.next=e.next,this.total=this.perPage*this.page+(this.next?1:0)},checkCache:function(e){if(null==this.pages[this.page])return!1;var t=this.pages[this.page];return null!=e?e(t):this.fields=t.fields,this.current=t.current,this.next=t.next,!0},merge:function(t,i,e,s){var n=this.checkIds(t,i,e);n.length&&s(n,function(e){return _.map(t,function(t){return Object.assign(t,_.find(e,function(e){return e[i]==t[i]}))})})},checkIds:function(e,t,i){return i?_.values(_.pickBy(_.map(e,function(e){return-1!=i.indexOf(e[t])?e[t]:null}),_.identity)):_.map(e,t)},onCheckAll:function(e,i){var s=e.target.closest(".checkbox").querySelectorAll("input")[0],t=s.closest(".table");_.each(t.querySelectorAll('td [type="checkbox"]:not(:disabled)'),function(e){var t;e=parseInt(e.value),s.checked?-1!=(t=i.indexOf(e))&&i.splice(t,1):-1==i.indexOf(e)&&i.push(e)})}}},e.FormModel={data:function(){return{values:{},variants:{},errors:{}}},methods:{checkResult:function(e){var i,s;this.errors=[],"fail"==e.result&&(null!=e.errors&&(this.errors=e.errors),s=i=0,_.each(e.errors,function(e,t){(_.isNumber(t)||t.match(/^[0-9]+$/))&&"object"!=(void 0===e?"undefined":_typeof2(e))?(Vue.prototype.$toast(e,"is-danger"),s++):i++}),i&&!s&&null==e.message&&(e.message=this.$gettext("В форме присутствуют ошибки"))),null!=e.message&&e.message&&Vue.prototype.$toast(e.message,"fail"==e.result?"is-danger":"is-success")}}};var t={install:function(h){h.prototype.$api={queues:{},get:function(e,t,i,s,n){var a=3<arguments.length&&void 0!==s?s:null,o=4<arguments.length&&void 0!==n&&n;return this.process("get",i,e,t,a,o)},post:function(e,t,i,s,n){var a=3<arguments.length&&void 0!==s?s:null,o=4<arguments.length&&void 0!==n&&n;return this.process("post",i,e,t,a,o)},checkResult:function(s,n,e,t){var a=this,o=2<arguments.length&&void 0!==e?e:null,r=3<arguments.length&&void 0!==t&&t;return new Promise(function(e,t){return null!=s.redirect?(window.$events.fire("account:redirect"),router.replace(s.redirect)):"unauthorized"!=s.result||r?(null!=n&&null!=n.checkResult&&n.checkResult(s),o&&(a.queues[o].shift(),a.queues[o].length&&(i=a.queues[o][0],a.process(i[0],i[1],i[2],i[3],o,r,!0).then(i[4],i[5]))),void e(s)):window.$events.fire("account:logout");var i})},process:function(s,n,a,o,e,t,i){var r=4<arguments.length&&void 0!==e?e:null,l=this,c=5<arguments.length&&void 0!==t&&t,d=6<arguments.length&&void 0!==i&&i;if(o=o&&_.clone(o),r){if(null!=this.queues[r]&&this.queues[r].length&&!d)return new Promise(function(e,t){l.queues[r].push([s,n,a,o,e,t])});null==this.queues[r]&&(this.queues[r]=[]),d||this.queues[r].push(null)}var u=window.base_path_prefix+"/api/";null==o&&(o={}),null!=h.prototype.$account.profile_id&&h.prototype.$account.profile_id&&!h.prototype.$auth.session&&(o._uid=h.prototype.$account.profile_id);var p=h.prototype.$auth.session&&h.prototype.$account.profile_id?{Authentication:"Barier "+h.prototype.$account.profile_id+"."+h.prototype.$auth.session}:{};return Array.isArray(a)?(o._endpoints=a,a="batch",s="post",new Promise(function(i,t){$mx.request({url:u+a+".json",method:s,json:o,headers:p}).then(function(e){var t=null==e.data.batch?e.data:{result:"success",response:{}};_.each(e.data.batch||[],function(e){"success"!=e.result&&(t.result=e.result),null!=e.redirect&&(t.redirect=e.redirect),t.response=_.merge(t.response,e.response,!0)}),l.checkResult(t,n,r,c).then(i)}).catch(function(e){e&&t(e)})})):new Promise(function(t,i){$mx.request({url:u+a+".json",method:s,json:o,headers:p}).then(function(e){return"fail"==e.data.result&&null!=e.data.redirect?router.replace(e.data.redirect):void l.checkResult(e.data,n,r,c).then(t)}).catch(function(e){i(e)})})}},h.prototype.$account=h.observable({}),h.prototype.$auth={session:Cookies.get("session"),getMenu:function(e){return App.modules[e]},prepareMenu:function(e){var t=this;return _.filter(e,function(e){return null!=e.meta&&null!=e.meta.tariff&&-1==h.prototype.$account.platform.tariffs.indexOf(e.meta.tariff)||null!=e.meta&&null!=e.meta.access&&(e.meta.access&h.prototype.$account.access)!=e.meta.access||null!=e.meta&&null!=e.meta.feature&&!t.hasFeature(e.meta.feature)||null!=e.meta&&null!=e.meta.endpoint&&!h.prototype.$auth.isAllowEndpoint(e.meta.endpoint)||null!=e.children&&0==e.children.length?null:e})},isAllowEndpoint:function(e){e=e.split("/");for(var t=window.$app.endpoints,i=0;i<e.length-1;i++){if(null==t[e[i]])return!1;t=t[e[i]]}return-1!=Object.values(t).indexOf(e[e.length-1])},isAllowTariff:function(e){var t=["basic","plus","pro","business"];return t.indexOf(h.prototype.$account.tariff)>=t.indexOf(e)},hasFeature:function(e){if(null==h.prototype.$account.features)return!1;var t=!0;return _.each(e.split(","),function(e){t&=-1!=h.prototype.$account.features.indexOf(e)}),t},refresh:function(e,t,i){function s(e,t){e.currency=Object.assign(_.clone(e.number),e.currency),e.weight=Object.assign(_.clone(e.number),e.weight),_.each(e,function(e,t){h.prototype.$set(h.prototype.$account,t,e)}),window.account=h.prototype.$account,h.prototype.$account.theme=StylesFactory.checkStyles(h.prototype.$account.theme),h.prototype.$auth.refreshStyles(function(){h.prototype.$forceUpdate(),window.$events.fire("account:refresh",e),t&&t()}),h.prototype.$io.auth()}e?s(e,t):h.prototype.$api.get("account/get").then(function(e){"success"==e.result?s(e.response,t):(i(),window.$events.fire("account:logout"))})},changeProfile:function(e,t,i){null!=t&&$mx.isFunction(t)&&(i=t,t=void 0),h.prototype.$api.get("account/change",{profile_id:e}).then(function(e){"success"==e.result&&(h.prototype.$auth.refresh(e.response,function(){router.replace({name:null==t?"pages":t,params:{page_id:e.response.page_id}})}),null!=i&&i(),h.prototype.$auth.closeMenu())})},closeMenu:function(){window.$events.fire("menu:close")},refreshStyles:function(e){h.prototype.$account.styles=buildStyles(h.prototype.$account.theme,"design",".main-theme"),h.prototype.$events.fire("theme:refresh"),null!=e&&e()}},window.$events.on("account:logout",function(){h.prototype.$auth.session=null}),h.prototype.$toast=function(e,t){h.prototype.$buefy.toast.open({duration:5e3,message:e,type:t,position:"is-top",queue:!1})},h.prototype.$alert=function(i,s){return new Promise(function(e,t){h.prototype.$buefy.dialog.alert({message:i,confirmText:h.prototype.$gettext("Ok"),type:s,hasIcon:!0,onConfirm:e})})},h.prototype.$prompt=function(i,s){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is-primary",a=arguments[3],o=4<arguments.length&&void 0!==arguments[4]&&arguments[4],a=_.merge({yes:h.prototype.$gettext("Ok"),no:h.prototype.$gettext("Отмена")},a);return new Promise(function(e,t){h.prototype.$buefy.dialog.prompt({message:i,confirmText:h.prototype.$gettext(a.yes),cancelText:h.prototype.$gettext(a.no),inputAttrs:s,hasIcon:o,type:n,trapFocus:!0,onConfirm:e})})},h.prototype.$confirm=function(i){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"is-primary",n=arguments[2],n=_.merge({yes:h.prototype.$gettext("Да"),no:h.prototype.$gettext("Отмена")},n);return new Promise(function(e,t){h.prototype.$buefy.dialog.confirm({message:i,confirmText:h.prototype.$gettext(n.yes),cancelText:h.prototype.$gettext(n.no),type:s,hasIcon:!0,onConfirm:e})})},h.prototype.$challenge=function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t,e){h.prototype.$modal("vue-index-challenge-form",i).then(function(e){e.$on("result",t)})})},h.prototype.$modal=function(s,n,a){return new Promise(function(i,e){window.$app.loadComponent(s).then(function(){function e(){t.close()}var t=h.prototype.$buefy.modal.open({parent:a,component:h.options.components[s],props:n,width:"auto",canCancel:["outside"],hasModalCard:!0});t.$on("close",function(){window.$events.off("account:logout",e),window.$events.off("account:redirect",e),window.$events.off("modals:close",e)}),window.$events.on("account:logout",e),window.$events.on("account:redirect",e),window.$events.on("modals:close",e),i(t)})})},h.prototype.$form=h.observable({isOpened:!1,isOpenedHeader:!1,props:null,stack:[],top:null,open:function(e,t,i){var s=1<arguments.length&&void 0!==t?t:{},n=2<arguments.length&&void 0!==i?i:null;s.is=e,h.prototype.$form.top&&h.prototype.$form.top.name==e||(window.$events.fire("modals:close"),window.$events.fire("menu:close"),h.prototype.$form.stack.push({name:e,buttons:[],props:s,title:"Title",cb_close:n}),h.prototype.$form.top=h.prototype.$form.stack[h.prototype.$form.stack.length-1],e&&(h.prototype.$form.isOpened=!0),h.prototype.$form.isOpenedHeader=!0,$mx("html").addClass("has-form-opened"))},close:function(){h.prototype.$form.top.cb_close&&h.prototype.$form.top.cb_close(),h.prototype.$form.stack.pop(),h.prototype.$form.isOpenedHeader=h.prototype.$form.isOpened=h.prototype.$form.stack.length,h.prototype.$form.top=h.prototype.$form.isOpened?h.prototype.$form.stack[h.prototype.$form.stack.length-1]:null,$mx("html").toggleClass("has-form-opened",null!=h.prototype.$form.top)}}),h.prototype.$events=window.$events}},i={install:function(i){var e=io();e.connect(),e.auth=function(){null!=i.prototype.$account.socket_hash&&e.emit("auth",{hash:i.prototype.$account.socket_hash})},e.on("connect",function(){e.auth()}),(i.prototype.$io=e).on("events:account:refresh",function(e){i.prototype.$auth.refresh()}),e.on("events:account:update",function(e){_.each(e,function(e,t){i.prototype.$set(i.prototype.$account,t,e)})})}};Vue.use(i),Vue.use(t),null!=vue_components&&_.each(vue_components,function(e,t){Vue.component(t,e)}),null!=e.vue_modules&&_.each(vue_modules,function(e,t){window.defineModule(t,e)}),Vue.config.ignoredElements=["mx-item"],e.vue_options={}}((document,window));var Page={install:function(p){p.prototype.$page=p.observable({data:{},isUpdating:!1,isViewMode:!1,styles:{},default_options:{valign:"top",max_width:"lg"},setViewMode:function(e){this.isViewMode=e,$mx("html").toggleClass("is-view-mode",e)},pageChanged:function(){0==(16&p.prototype.$account.tips_bits)&&($mx.get("/api/account/updatetipsbits.json?bit=16"),p.prototype.$account.tips_bits|=16)},setData:function(e){var i=this;this.styles={},_.each(this.prepareData(e),function(e,t){return p.prototype.$set(i.data,t,e)}),window.$events.fire("page:updated")},clearData:function(){this.data={page:{page_id:null,is_readonly:!0,link:{path:""},page_type_id:1,title:""},blocks:{},sections:{},blocks_order:[]},this.isUpdating=!1,window.$events.fire("page:updated")},setOption:function(e,t){"valign"==e&&this.pageChanged(),this.data.options[e]!=t&&(this.data.options[e]=t,this.updateOptions())},updateOptions:_.debounce(function(){var e=this;this.isUpdating=!0,p.prototype.$api.post("pages/options",{page_id:this.data.page.page_id,values:_.differenceWith(this.data.options,this.default_options)}).then(function(){e.isUpdating=!1})},500),prepareData:function(c){var d=this;c.options=_.merge(this.default_options,c.options);var u=p.prototype.$account.theme;return _.each(c.blocks,function(t){var e,i=null==c.sections[t.section_id]?void 0:c.sections[t.section_id],s=0;switch(100==(s=null!=i&&null!=i.link&&null!=i.link.transparent?i.link.transparent:u.link.transparent)&&(s=0),t.block_type_name){case"link":if(t.stylesheet=t.stylesheetTitle=t.stylesheetSubtitle={},t.classname=null!=t.options.animation&&t.options.animation?"has-animation has-animation-"+t.options.animation:"",null==t.options.thumb||"n"==t.options.thumb.t)t.classname+=" without-thumb";else{t.classname+=" with-thumb";var n=t.options.thumb,a='<img src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==">',o="";switch(n.t||"i"){case"i":n.i&&(o="/s/icons/"+n.i+".svg",t.thumb='<div class="is-icon" style="-webkit-mask-image:url('+o+");mask-image:url("+o+')">'+a+"</div>");break;case"p":n.p&&(o="//"+p.prototype.$account.storage_domain+"/p/"+n.p.filename,t.thumb='<div class="is-picture" style="background-image:url('+o+')">'+a+"</div>")}}t.options.design.on&&(e=t.options.design,t.stylesheet={background:transparentColor(s,e.bg),borderColor:e.bg,color:e.text,"--color-text":e.text},t.stylesheetTitle={color:e.text},t.stylesheetSubtitle={color:null==e.subtitle?e.text:e.subtitle});break;case"banner":t.stylesheet_picture="padding-top: "+(t.options.p?t.options.p.height/t.options.p.width*100:50)+"%"+(t.options.p?";background: url(//"+p.prototype.$account.storage_domain+"/p/"+t.options.p.filename+")  0 0 / 100%":"");break;case"pictures":var r={100:100,70:"70.6",50:50,138:"141.4516"};_.each(t.options.list,function(e){e.stylesheet_picture="padding-top: calc("+r[t.options.picture_size]+"%)"+(e.p?";background-image: url("+e.p+")":""),t.options.link&&!e.link.title&&(e.link.title=p.prototype.$gettext("Открыть"))});break;case"socialnetworks":_.each(t.options.items,function(e){e.classname=("default"!=t.options.socials_style?"btn-socials btn-socials-"+e.n:"")+(-1!=["default","block"].indexOf(t.options.socials_style)?" btn-link-styled":"")}),t.stylesheet="",t.options.design.on&&(t.stylesheet+="background: "+transparentColor(s,t.options.design.bg)+" !important;border-color: "+t.options.design.bg+" !important;color: "+t.options.design.text+" !important");break;case"messenger":_.each(t.options.items,function(e){e.classname="btn-link-"+t.options.messenger_style+" "+("default"!=t.options.messenger_style?"btn-socials btn-link-"+e.n:"")+(-1!=["default","block"].indexOf(t.options.messenger_style)?" btn-link-styled":"")}),t.stylesheet="",t.options.design.on&&"icon"!=t.options.messenger_style&&(t.stylesheet+="background: "+transparentColor(s,t.options.design.bg)+" !important;border-color: "+t.options.design.bg+" !important;color: "+t.options.design.text+" !important");break;case"map":_.each(t.options.markers,function(e){e.title||(e.title=p.prototype.$gettext("Заголовок")),e.stylesheet="",t.options.design.on&&(t.options.design.text||t.options.design.bg)&&(e.stylesheet=(t.options.design.text?"color:"+t.options.design.text+" !important;":"")+(t.options.design.bg?"background:"+t.options.design.bg+" !important;border-color:"+t.options.design.bg+" !important;":""))});break;case"form":_.each(t.options.fields,function(e){switch(e.stylesheet="",t.options.design.on&&(t.options.design.text||t.options.design.bg)&&(e.stylesheet=(t.options.design.text?"color:"+t.options.design.text+" !important;":"")+(t.options.design.bg?"background:"+t.options.design.bg+" !important;border-color:"+t.options.design.bg+" !important;":"")),e.typename){case"paragraph":e.text=e.text.replace(/<a/g,"<span").replace(/<\/a>/g,"</span>");break;default:e.input_type="text","number"==e.typename&&(e.input_type="number")}});break;case"collapse":t.options.texts=_.map(t.options.texts,p.prototype.$nl2br)}var l=p.prototype.$auth.isAllowTariff(t.tariff);t.is_visible&&(t.is_visible=l),StylesFactory.prepareStyles(t.block_id,t.block_type_name,t.options,d.styles,".main-theme")}),this.prepareSections(c,this.styles),c},prepareSections:function(e,s,n,t,i){var a=3<arguments.length&&void 0!==t?t:".page-blocks",o=4<arguments.length&&void 0!==i?i:"design";null==n&&(n=p.prototype.$account.theme),_.each(e.sections,function(e,t){var i;"object"==(void 0===e?"undefined":_typeof2(e))&&(e=e.id&&null!=n.sections&&null!=n.sections[e.id]?(i=_.merge(StylesFactory.getDefaultSection(n),n.sections[e.id]||[],!0),_.merge(i,e,!0)):_.merge(StylesFactory.getDefaultSection(n),e,!0),StylesFactory.prepareSectionStyles(e,t,n,s,a,o))})},eventResortBlocks:function(i){var e,t,s,n=this;i.page_id==this.data.page.page_id&&(t=(e=function(e,t){return e.filter(function(e){return-1===t.indexOf(e)})})(this.data.blocks_order,i.blocks_order),s=e(i.blocks_order,this.data.blocks_order),t.length&&_.each(t,function(e){delete n.data.blocks[e],n.data.blocks_order.splice(n.data.blocks_order.indexOf(e),1)}),s.length?(this.isUpdating=!0,p.prototype.$api.post("pages/blocks",{page_id:this.data.page.page_id,block_ids:s}).then(function(e){var t;n.isUpdating=!1,"success"==e.result&&(t=n.prepareData(e.response.page),n.data.blocks=Object.assign({},n.data.blocks,t.blocks),n.data.sections=Object.assign({},n.data.sections,t.sections),n.data.blocks_order=i.blocks_order,window.$events.fire("page.styles:updated"),window.$events.fire("page:updated"))})):this.data.blocks_order=i.blocks_order),null!=i.sections_changed&&_.each(i.sections_changed,function(e,t){n.data.blocks[t].section_id=e}),window.$events.fire("page:updated")},eventRefreshBlocks:function(e){var i=this;e.page_id==this.data.page.page_id&&(null!=e.block_id?(this.isUpdating=!0,p.prototype.$api.post("pages/blocks",{page_id:this.data.page.page_id,block_ids:[e.block_id]}).then(function(e){var t;i.isUpdating=!1,"success"==e.result&&(t=i.prepareData(e.response.page),i.data.blocks=Object.assign({},i.data.blocks,t.blocks),i.data.sections=Object.assign({},i.data.sections,t.sections),window.$events.fire("page.styles:updated"),window.$events.fire("page:updated"))})):this.fetchData(this.data.page.page_id,!0))},fetchData:function(i,s){var n=this;return new Promise(function(t,e){if(n.data.page.page_id==i&&!s)return t({result:"cached",code:200});p.prototype.$api.get("pages/get",{page_id:i}).then(function(e){"success"==e.result&&n.setData(e.response.page),t(e)}).catch(e)})},eventSectionsUpdate:function(e){var i=this;e.page_id==this.data.page.page_id&&(null!=e.sections&&(this.data.sections=Object.assign({},this.data.sections,e.sections)),null!=e.modified&&_.each(e.modified,function(e,t){_.each(i.data.blocks,function(e){e.section_id==t&&(e.section_id=null)}),_.each(e,function(e){return i.data.blocks[e].section_id=t})}),null!=e.deleted&&_.each(e.deleted,function(e){return p.prototype.$delete(i.data.sections,e)})),window.$events.fire("page:updated")},eventOptionsUpdate:function(e){e.page_id==this.data.page.page_id&&(this.data.options=_.merge(this.data.options,e.options))},eventDeleteBlock:function(e){var t;e.page_id==this.data.page.page_id&&(-1!=(t=this.data.blocks_order.indexOf(e.block_id))&&this.data.blocks_order.splice(t,1),p.prototype.$delete(this.data.blocks,e.block_id),window.$events.fire("page:updated"))}}),p.prototype.$page.clearData(),p.prototype.$io.on("events:page.blocks:resort",function(e){return p.prototype.$page.eventResortBlocks(e)}),p.prototype.$io.on("events:page.blocks:refresh",function(e){return p.prototype.$page.eventRefreshBlocks(e)}),p.prototype.$io.on("events:page.blocks:delete",function(e){return p.prototype.$page.eventDeleteBlock(e)}),p.prototype.$io.on("events:page.sections:update",function(e){return p.prototype.$page.eventSectionsUpdate(e)}),p.prototype.$io.on("events:page.options:update",function(e){return p.prototype.$page.eventOptionsUpdate(e)}),$events.on("account:refresh",p.prototype.$page.clearData),$events.on("theme:refresh",function(e){return p.prototype.$page.prepareSections(p.prototype.$page.data,p.prototype.$page.styles)}),$events.on("online",function(){var e=p.prototype.$page.data.page;e.page_id&&p.prototype.$page.fetchData(e.page_id,!0)})}};Vue.use(Page),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).VueRecaptcha=t()}(this,function(){"use strict";function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}var e=Object.prototype.hasOwnProperty;var n,a,t,o=(n=!1,a=[],t={resolved:function(){return n},resolve:function(e){if(!n){n=!0;for(var t=0,i=a.length;t<i;t++)a[t](e)}},promise:{then:function(e){n?e():a.push(e)}}},{notify:function(){t.resolve()},wait:function(){return t.promise},render:function(e,t,i){this.wait().then(function(){i(window.grecaptcha.render(e,t))})},reset:function(e){void 0!==e&&(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.reset(e)}))},execute:function(e){void 0!==e&&(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.execute(e)}))},checkRecaptchaLoad:function(){e.call(window,"grecaptcha")&&e.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!t.resolved())throw new Error("ReCAPTCHA has not been loaded")}});return"undefined"!=typeof window&&(window.vueRecaptchaApiLoaded=o.notify),{name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!1},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},beforeMount:function(){var e;this.loadRecaptchaScript&&(document.getElementById(this.recaptchaScriptId)||((e=document.createElement("script")).id=this.recaptchaScriptId,e.src="https://"+this.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+this.language,e.async=!0,e.defer=!0,document.head.appendChild(e)))},mounted:function(){var t=this;o.checkRecaptchaLoad();var e=s({},this.$props,{callback:this.emitVerify,"expired-callback":this.emitExpired,"error-callback":this.emitError}),i=this.$slots.default?this.$el.children[0]:this.$el;o.render(i,e,function(e){t.$widgetId=e,t.$emit("render",e)})},methods:{reset:function(){o.reset(this.$widgetId)},execute:function(){o.execute(this.$widgetId)},emitVerify:function(e){this.$emit("verify",e)},emitExpired:function(){this.$emit("expired")},emitError:function(){this.$emit("error")}},render:function(e){return e("div",{},this.$slots.default)}}});var EditorVideo=function(){function i(e){var t=e.data;e.config,e.api,e.readOnly;_classCallCheck2(this,i),this.data={url:t.url||""}}return _createClass2(i,[{key:"_updateVideo",value:function(){var e=[{src:this.data.url,type:this.data.type}];this.player.src(e)}},{key:"render",value:function(){var t=this;return this.wrapper=$mx('<div class="video-container" style="pointer-events:none">'),this.node=$mx('<video class="video-js vjs-fill"></video>'),this.node.appendTo(this.wrapper),$mx.lazy("//cdn.jsdelivr.net/npm/video.js@7.1.0/dist/video.min.js","videoplayer.css",function(){var e={poster:null,controls:!0,autoplay:!1,loop:!1,controlBar:{volumePanel:{inline:!1}},sources:[]};t.player=videojs(t.node[0],e),t.data&&t._updateVideo()}),this.wrapper[0]}},{key:"save",value:function(){return this.data}},{key:"onPaste",value:function(e){switch(e.type){case"pattern":this.data={url:e.detail.data}}}},{key:"data",set:function(e){var t={mp4:"video/mp4",m3u8:"application/x-mpegURL",webm:"video/webm"},i=e.url.toLowerCase().match(/https?:\/\/\S+\.(mp4)(\?.*)?$/);i&&null!=t[i[1]]&&(e.type=t[i[1]]),this._data=Object.assign({url:null,type:null},this.data,e),this.wrapper&&this.data.type&&this._updateVideo()},get:function(){return this._data}}],[{key:"pasteConfig",get:function(){return{patterns:{video:/https?:\/\/\S+\.(mp4)(\?.*)?$/i}}}}]),i}();!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof2(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))?exports.postscribe=t():e.postscribe=t()}(this,function(){return n={},i.m=s=[function(e,t,i){"use strict";var s,n=i(1),a=(s=n)&&s.__esModule?s:{default:s};e.exports=a.default},function(e,t,i){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e};t.default=f;var s,n=i(2),l=(s=n)&&s.__esModule?s:{default:s},a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(4));function c(){}var o={afterAsync:c,afterDequeue:c,afterStreamStart:c,afterWrite:c,autoFix:!0,beforeEnqueue:c,beforeWriteToken:function(e){return e},beforeWrite:function(e){return e},done:c,error:function(e){throw new Error(e.msg)},releaseAsync:!1},d=0,u=[],p=null;function h(){var e,t=u.shift();t&&((e=a.last(t)).afterDequeue(),t.stream=function(e,t,s){(p=new l.default(e,s)).id=d++,p.name=s.name||p.id,f.streams[p.name]=p;var i=e.ownerDocument,n={close:i.close,open:i.open,write:i.write,writeln:i.writeln};function a(e){e=s.beforeWrite(e),p.write(e),s.afterWrite(e)}r(i,{close:c,open:c,write:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return a(t.join(""))},writeln:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return a(t.join("")+"\n")}});var o=p.win.onerror||c;return p.win.onerror=function(e,t,i){s.error({msg:e+" - "+t+": "+i}),o.apply(p.win,[e,t,i])},p.write(t,function(){r(i,n),p.win.onerror=o,s.done(),p=null,h()}),p}.apply(void 0,t),e.afterStreamStart())}function f(e,t,i){if(a.isFunction(i))i={done:i};else if("clear"===i)return u=[],p=null,void(d=0);i=a.defaults(i,o);var s=[e=/^#/.test(e)?window.document.getElementById(e.substr(1)):e.jquery?e[0]:e,t,i];return e.postscribe={cancel:function(){s.stream?s.stream.abort():s[1]=c}},i.beforeEnqueue(s),u.push(s),p||h(),e.postscribe}r(f,{streams:{},queue:u,WriteStream:l.default})},function(e,t,i){"use strict";t.__esModule=!0;var s,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},n=i(3),a=(s=n)&&s.__esModule?s:{default:s},o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(i(4));var d="data-ps-";function l(e,t){var i=d+t,s=e.getAttribute(i);return o.existy(s)?String(s):s}function c(e,t,i){var s=2<arguments.length&&void 0!==i?i:null,n=d+t;o.existy(s)&&""!==s?e.setAttribute(n,s):e.removeAttribute(n)}var u=(p.prototype.write=function(){var e;for((e=this.writeQueue).push.apply(e,arguments);!this.deferredRemote&&this.writeQueue.length;){var t=this.writeQueue.shift();o.isFunction(t)?this._callFunction(t):this._writeImpl(t)}},p.prototype._callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this._onScriptStart(t),e.call(this.win,this.doc),this._onScriptDone(t)},p.prototype._writeImpl=function(e){this.parser.append(e);for(var t=void 0,i=void 0,s=void 0,n=[];(t=this.parser.readToken())&&!(i=o.isScript(t))&&!(s=o.isStyle(t));)(t=this.options.beforeWriteToken(t))&&n.push(t);0<n.length&&this._writeStaticTokens(n),i&&this._handleScriptToken(t),s&&this._handleStyleToken(t)},p.prototype._writeStaticTokens=function(e){var t=this._buildChunk(e);return t.actual?(t.html=this.proxyHistory+t.actual,this.proxyHistory+=t.proxy,this.proxyRoot.innerHTML=t.html,this._walkChunk(),t):null},p.prototype._buildChunk=function(e){for(var t=this.actuals.length,i=[],s=[],n=[],a=e.length,o=0;o<a;o++){var r,l=e[o],c=l.toString();i.push(c),l.attrs?/^noscript$/i.test(l.tagName)||(r=t++,s.push(c.replace(/(\/?>)/," "+d+"id="+r+" $1")),"ps-script"!==l.attrs.id&&"ps-style"!==l.attrs.id&&n.push("atomicTag"===l.type?"":"<"+l.tagName+" "+d+"proxyof="+r+(l.unary?" />":">"))):(s.push(c),n.push("endTag"===l.type?c:""))}return{tokens:e,raw:i.join(""),actual:s.join(""),proxy:n.join("")}},p.prototype._walkChunk=function(){for(var e,t=[this.proxyRoot];o.existy(e=t.shift());){var i,s=1===e.nodeType;s&&l(e,"proxyof")||(s&&c(this.actuals[l(e,"id")]=e,"id"),(i=e.parentNode&&l(e.parentNode,"proxyof"))&&this.actuals[i].appendChild(e)),t.unshift.apply(t,o.toArray(e.childNodes))}},p.prototype._handleScriptToken=function(e){var t=this,i=this.parser.clear();i&&this.writeQueue.unshift(i),e.src=e.attrs.src||e.attrs.SRC,(e=this.options.beforeWriteToken(e))&&(e.src&&this.scriptStack.length?this.deferredRemote=e:this._onScriptStart(e),this._writeScriptToken(e,function(){t._onScriptDone(e)}))},p.prototype._handleStyleToken=function(e){var t=this.parser.clear();t&&this.writeQueue.unshift(t),e.type=e.attrs.type||e.attrs.TYPE||"text/css",(e=this.options.beforeWriteToken(e))&&this._writeStyleToken(e),t&&this.write()},p.prototype._writeStyleToken=function(e){var t=this._buildStyle(e);this._insertCursor(t,"ps-style"),e.content&&(t.styleSheet&&!t.sheet?t.styleSheet.cssText=e.content:t.appendChild(this.doc.createTextNode(e.content)))},p.prototype._buildStyle=function(e){var i=this.doc.createElement(e.tagName);return i.setAttribute("type",e.type),o.eachKey(e.attrs,function(e,t){i.setAttribute(e,t)}),i},p.prototype._insertCursor=function(e,t){this._writeImpl('<span id="'+t+'"/>');var i=this.doc.getElementById(t);i&&i.parentNode.replaceChild(e,i)},p.prototype._onScriptStart=function(e){e.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(e)},p.prototype._onScriptDone=function(e){e===this.scriptStack[0]?(this.scriptStack.shift(),this.write.apply(this,e.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)):this.options.error({msg:"Bad script nesting or script finished twice"})},p.prototype._writeScriptToken=function(e,t){var i=this._buildScript(e),s=this._shouldRelease(i),n=this.options.afterAsync;e.src&&(i.src=e.src,this._scriptLoadHandler(i,s?n:function(){t(),n()}));try{this._insertCursor(i,"ps-script"),i.src&&!s||t()}catch(e){this.options.error(e),t()}},p.prototype._buildScript=function(e){var i=this.doc.createElement(e.tagName);return o.eachKey(e.attrs,function(e,t){i.setAttribute(e,t)}),e.content&&(i.text=e.content),i},p.prototype._scriptLoadHandler=function(t,i){function s(){t=t.onload=t.onreadystatechange=t.onerror=null}var n=this.options.error;function e(){s(),null!=i&&i(),i=null}function a(e){s(),n(e),null!=i&&i(),i=null}function o(e,t){var i=e["on"+t];null!=i&&(e["_on"+t]=i)}o(t,"load"),o(t,"error"),r(t,{onload:function(){if(t._onload)try{t._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){a({msg:"onload handler failed "+e+" @ "+t.src})}e()},onerror:function(){if(t._onerror)try{t._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){return void a({msg:"onerror handler failed "+e+" @ "+t.src})}a({msg:"remote script failed "+t.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(t.readyState)&&e()}})},p.prototype._shouldRelease=function(e){return!/^script$/i.test(e.nodeName)||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))},p);function p(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),this.root=e,this.options=t,this.doc=e.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new a.default("",{autoFix:t.autoFix}),this.actuals=[e],this.proxyHistory="",this.proxyRoot=this.doc.createElement(e.nodeName),this.scriptStack=[],this.writeQueue=[],c(this.proxyRoot,"proxyof",0)}t.default=u},function(e,t,i){var s;s=function(){return n={},i.m=s=[function(e,t,i){"use strict";var s,n=i(1),a=(s=n)&&s.__esModule?s:{default:s};e.exports=a.default},function(e,t,i){"use strict";t.__esModule=!0;var s,o=c(i(2)),n=c(i(3)),a=i(6),r=(s=a)&&s.__esModule?s:{default:s},l=i(5);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}var d={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},u=(p.prototype.append=function(e){this.stream+=e},p.prototype.prepend=function(e){this.stream=e+this.stream},p.prototype._readTokenImpl=function(){var e=this._peekTokenImpl();if(e)return this.stream=this.stream.slice(e.length),e},p.prototype._peekTokenImpl=function(){for(var e in d)if(d.hasOwnProperty(e)&&d[e].test(this.stream)){var t=n[e](this.stream);if(t)return"startTag"===t.type&&/script|style/i.test(t.tagName)?null:(t.text=this.stream.substr(0,t.length),t)}},p.prototype.peekToken=function(){return this._peekToken()},p.prototype.readToken=function(){return this._readToken()},p.prototype.readTokens=function(e){for(var t;t=this.readToken();)if(e[t.type]&&!1===e[t.type](t))return},p.prototype.clear=function(){var e=this.stream;return this.stream="",e},p.prototype.rest=function(){return this.stream},p);function p(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),this.stream=t;var s=!1,n={};for(var a in o)o.hasOwnProperty(a)&&(i.autoFix&&(n[a+"Fix"]=!0),s=s||n[a+"Fix"]);s?(this._readToken=(0,r.default)(this,n,function(){return e._readTokenImpl()}),this._peekToken=(0,r.default)(this,n,function(){return e._peekTokenImpl()})):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}for(var h in(t.default=u).tokenToString=function(e){return e.toString()},u.escapeAttributes=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=(0,l.escapeQuotes)(e[i],null));return t},u.supports=o)o.hasOwnProperty(h)&&(u.browserHasFlaw=u.browserHasFlaw||!o[h]&&h)},function(e,t){"use strict";var i=!(t.__esModule=!0),s=!1,n=window.document.createElement("div");try{var a="<P><I></P></I>";n.innerHTML=a,t.tagSoup=i=n.innerHTML!==a}catch(e){t.tagSoup=i=!1}try{n.innerHTML="<P><i><P></P></i></P>",t.selfClose=s=2===n.childNodes.length}catch(e){t.selfClose=s=!1}n=null,t.tagSoup=i,t.selfClose=s},function(e,t,i){"use strict";t.__esModule=!0;var o="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)};t.comment=function(e){var t=e.indexOf("--\x3e");if(0<=t)return new r.CommentToken(e.substr(4,t-1),t+3)},t.chars=function(e){var t=e.indexOf("<");return new r.CharsToken(0<=t?t:e.length)},t.startTag=n,t.atomicTag=function(e){var t=n(e);if(t){var i=e.slice(t.length);if(i.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var s=i.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(s)return new r.AtomicTagToken(t.tagName,s[0].length+t.length,t.attrs,t.booleanAttrs,s[1])}}},t.endTag=function(e){var t=e.match(l.endTag);if(t)return new r.EndTagToken(t[1],t[0].length)};var r=i(4),l={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i};function n(e){var i,s,n;if(-1!==e.indexOf(">")){var t=e.match(l.startTag);if(t){var a=(i={},s={},n=t[2],t[2].replace(l.attr,function(e,t){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(i[arguments[5]]="",s[arguments[5]]=!0):i[t]=arguments[2]||arguments[3]||arguments[4]||l.fillAttr.test(t)&&t||"":i[t]="",n=n.replace(e,"")}),{v:new r.StartTagToken(t[1],t[0].length,i,s,!!t[3],n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))});if("object"===(void 0===a?"undefined":o(a)))return a.v}}}},function(e,t,i){"use strict";t.__esModule=!0,t.EndTagToken=t.AtomicTagToken=t.StartTagToken=t.TagToken=t.CharsToken=t.CommentToken=t.Token=void 0;var o=i(5);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.Token=function e(t,i){r(this,e),this.type=t,this.length=i,this.text=""},t.CommentToken=(s.prototype.toString=function(){return"\x3c!--"+this.content},s);function s(e,t){r(this,s),this.type="comment",this.length=t||(e?e.length:0),this.text="",this.content=e}t.CharsToken=(n.prototype.toString=function(){return this.text},n);function n(e){r(this,n),this.type="chars",this.length=e,this.text=""}var a=t.TagToken=(l.formatTag=function(e,t){var i,s=1<arguments.length&&void 0!==t?t:null,n="<"+e.tagName;for(var a in e.attrs){e.attrs.hasOwnProperty(a)&&(n+=" "+a,i=e.attrs[a],void 0!==e.booleanAttrs&&void 0!==e.booleanAttrs[a]||(n+='="'+(0,o.escapeQuotes)(i)+'"'))}return e.rest&&(n+=" "+e.rest),e.unary&&!e.html5Unary?n+="/>":n+=">",null!=s&&(n+=s+"</"+e.tagName+">"),n},l);function l(e,t,i,s,n){r(this,l),this.type=e,this.length=i,this.text="",this.tagName=t,this.attrs=s,this.booleanAttrs=n,this.unary=!1,this.html5Unary=!1}t.StartTagToken=(c.prototype.toString=function(){return a.formatTag(this)},c);function c(e,t,i,s,n,a){r(this,c),this.type="startTag",this.length=t,this.text="",this.tagName=e,this.attrs=i,this.booleanAttrs=s,this.html5Unary=!1,this.unary=n,this.rest=a}t.AtomicTagToken=(d.prototype.toString=function(){return a.formatTag(this,this.content)},d);function d(e,t,i,s,n){r(this,d),this.type="atomicTag",this.length=t,this.text="",this.tagName=e,this.attrs=i,this.booleanAttrs=s,this.unary=!1,this.html5Unary=!1,this.content=n}t.EndTagToken=(u.prototype.toString=function(){return"</"+this.tagName+">"},u);function u(e,t){r(this,u),this.type="endTag",this.length=t,this.text="",this.tagName=e}},function(e,t){"use strict";t.__esModule=!0,t.escapeQuotes=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return e?e.replace(/([^"]*)"/g,function(e,t){return/\\/.test(t)?t+'"':t+'\\"'}):t}},function(e,t){"use strict";t.__esModule=!0,t.default=function(a,i,o){var s=function(){var e=[];return e.last=function(){return this[this.length-1]},e.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},e.containsTagName=function(e){for(var t,i=0;t=this[i];i++)if(t.tagName===e)return!0;return!1},e}(),r={startTag:function(e){var t=e.tagName;"TR"===t.toUpperCase()&&s.lastTagNameEq("TABLE")?(a.prepend("<TBODY>"),n()):i.selfCloseFix&&l.test(t)&&s.containsTagName(t)?s.lastTagNameEq(t)?d(a,s):(a.prepend("</"+e.tagName+">"),n()):e.unary||s.push(e)},endTag:function(e){s.last()?i.tagSoupFix&&!s.lastTagNameEq(e.tagName)?d(a,s):s.pop():i.tagSoupFix&&(o(),n())}};function n(){var e,t,i,s,n=(t=o,i=(e=a).stream,s=c(t()),e.stream=i,s);n&&r[n.type]&&r[n.type](n)}return function(){return n(),c(o())}};var i=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,l=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i;function c(e){return e&&"startTag"===e.type&&(e.unary=i.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e}function d(e,t){var i=t.pop();e.prepend("</"+i.tagName+">")}}],i.c=n,i.p="",i(0);function i(e){if(n[e])return n[e].exports;var t=n[e]={exports:{},id:e,loaded:!1};return s[e].call(t.exports,t,t.exports,i),t.loaded=!0,t.exports}var s,n},e.exports=s()},function(e,t){"use strict";t.__esModule=!0;var s="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)};function n(e){return null!=e}function a(e,t,i){for(var s=void 0,n=e&&e.length||0,s=0;s<n;s++)t.call(i,e[s],s)}function o(e,t,i){for(var s in e)e.hasOwnProperty(s)&&t.call(i,s,e[s])}function i(e,t){return!(!e||"startTag"!==e.type&&"atomicTag"!==e.type||!("tagName"in e))&&!!~e.tagName.toLowerCase().indexOf(t)}t.existy=n,t.isFunction=function(e){return"function"==typeof e},t.each=a,t.eachKey=o,t.defaults=function(i,e){return i=i||{},o(e,function(e,t){n(i[e])||(i[e]=t)}),i},t.toArray=function(i){try{return Array.prototype.slice.call(i)}catch(e){var t=function(){var t=[];return a(i,function(e){t.push(e)}),{v:t}}();if("object"===(void 0===t?"undefined":s(t)))return t.v}},t.last=function(e){return e[e.length-1]},t.isTag=i,t.isScript=function(e){return i(e,"script")},t.isStyle=function(e){return i(e,"style")}}],i.c=n,i.p="",i(0);function i(e){if(n[e])return n[e].exports;var t=n[e]={exports:{},id:e,loaded:!1};return s[e].call(t.exports,t,t.exports,i),t.loaded=!0,t.exports}var s,n}),window.$app.defineComponent("component","vue-component-action-button",{data:function(){return{dropdown:""}},props:{classname:{type:String,default:"button is-default"},icon:{type:String,default:"fa fa-ellipsis-v"},title:{type:String,default:"Действие"},position:{type:String,default:"is-top-right"},withTitle:{type:Boolean,default:!0}},methods:{onAction:function(e){var t=this;e&&this.$emit("action",e),Vue.nextTick(function(){t.dropdown=null})}},template:'<vue-component-dropdown v-model="dropdown" @input="onAction" :position="position" class="is-action-dropdown" :button-class="classname" :with-arrow="false"> <span slot="button"><i :class="icon"></i><span v-if="withTitle" class="has-ml-1">{{title}}</span></span> <b-dropdown-item style="border-radius:1rem" class="is-hidden-desktop">{{\'Отмена\'|gettext}}</b-dropdown-item> <div> <slot name="actions"></slot> </div> </vue-component-dropdown>'}),window.$app.defineComponent("component","vue-component-autocomplete-collections",{data:function(){return{isFetchingCollections:!1,autocompleteCollections:[]}},props:{value:String,disabled:{type:Boolean,default:!1},allowNew:{type:Boolean,default:!0},placeholder:{type:String}},watch:{value:function(){this.$emit("input",this.value)}},methods:{onAddingCollection:function(e){return!_.find(this.value,["collection_id",e.collection_id])},onAddedCollection:function(e){"string"==typeof e&&(this.value.pop(),this.value.push({collection_id:null,collection:e}))},asyncAutocompleteCollection:_.debounce(function(e){var t=this;""!=e.trim()?(this.isFetchingCollections=!0,this.$api.get("products/collections/search",{query:e}).then(function(e){t.autocompleteCollections=_.differenceWith(e.response.collections.search,t.value,function(e,t){return e.collection_id==t.collection_id}),t.isFetchingCollections=!1})):this.autocompleteCollections=[]},300)},template:'<b-taginput v-model="value" :data="autocompleteCollections" :before-adding="onAddingCollection" @add="onAddedCollection" :allow-new="allowNew" confirm-key-codes=\'[13]\' autocomplete field="collection" @typing="asyncAutocompleteCollection" :placeholder="placeholder" :disabled="disabled" :loading="isFetchingCollections" attached> <template slot-scope="props"> <strong>{{props.option.collection}}</strong> </template> <template slot="empty"> <div v-if="isFetchingCollections">{{\'Идет загрузка\'|gettext}}</div> <div v-else>{{\'Ничего не найдено\'|gettext}}</div> </template> </b-taginput>'}),window.$app.defineComponent("component","vue-component-autocomplete-products",{data:function(){return{isFetchingProducts:!1,autocompleteProducts:[]}},props:{value:String,disabled:{type:Boolean,default:!1},allowNew:{type:Boolean,default:!0},placeholder:{type:String}},watch:{value:function(){this.$emit("input",this.value)}},methods:{asyncAutocompleteProduct:_.debounce(function(e){var t=this;""!=e.trim()?(this.isFetchingProducts=!0,this.$api.get("products/search",{query:e}).then(function(e){t.autocompleteProducts=_.differenceWith(e.response.products.search,t.value,function(e,t){return e.product_id==t.product_id}),t.isFetchingProducts=!1})):this.autocompleteProducts=[]},500),onAddingProduct:function(e){return!_.find(this.value,["product_id",e.product_id])},onAddProduct:function(e){"string"==typeof e&&(this.value.pop(),this.value.push({product_id:null,product:e}))}},template:'<b-taginput v-model="value" :data="autocompleteProducts" :before-adding="onAddingProduct" @add="onAddProduct" :allow-new="allowNew" confirm-key-codes=\'[13]\' autocomplete field="product" @typing="asyncAutocompleteProduct" :placeholder="placeholder" :disabled="disabled" :loading="isFetchingProducts" attached> <template slot-scope="props"> <strong>{{props.option.product}}</strong> </template> <template slot="empty"> <div v-if="isFetchingProducts">{{\'Идет загрузка\'|gettext}}</div> <div v-else>{{\'Ничего не найдено\'|gettext}}</div> </template> </b-taginput>'}),window.$app.defineComponent("component","vue-component-background-editor",{props:{value:Object,base:Object,disabled:Boolean,sizes:{type:Array,default:["width","cover","tile","adaptive"]},withOpacityBackground:Boolean},data:function(){return{background_types:{solid:this.$gettext("Сплошной цвет"),gradient:this.$gettext("Градиент")}}},computed:{minHeight:function(){return console.log(this.value.picture),this.value.picture&&this.value.picture.width?Math.ceil(2048/this.value.picture.width*this.value.picture.height):0}},methods:{checkBackgroundTile:function(e,t){var i=["0%","50%","100%"],s=this.value.position.split(" ");switch(this.value.repeat){case"repeat":return!0;case"repeat-x":return s[1]==i[e];case"repeat-y":return s[0]==i[t];case"no-repeat":return s[1]==i[e]&&s[0]==i[t]}},pictureChanged:function(){this.value.height=this.minHeight},checkHeight:function(){this.value.height=Math.max(this.value.height,this.minHeight)},properyChanged:function(e,t,i,s){var n=3<arguments.length&&void 0!==s&&s;return this.disabled||!this.base?null:StylesFactory.properyChanged(e,t,i,n,this)},checkBackgroundWidthPosition:function(){return{"0%":"-40px","50%":"-24px","100%":"-7px"}[this.value.position.split(" ")[1]]}},template:'<div :class="{disabled: disabled}"> <div class="has-mb-2 link-styles-container"> <label class="form-control-static"><span :class="properyChanged(base, value, \'bg.type\')" @click="properyChanged(base, value, \'bg.type\', true)">{{\'Тип фона\'|gettext}}</span></label> <div class="select is-hidden-mobile"> <select v-model="value.type" :disabled="disabled"> <option v-for="(v, i) in background_types" :value="i">{{v}}</option> </select> </div> <vue-component-dropdown position="is-bottom-left" v-model="value.type" :disabled="disabled" :title="\'Тип фона\'|gettext" class="is-hidden-tablet" button-class="button is-default is-focusable"> <span slot="button">{{background_types[value.type]}}</span> <b-dropdown-item v-for="(v, k) in background_types" :value="k" aria-role="menuitem">{{v}}</b-dropdown-item> </vue-component-dropdown> </div> <div class="has-mb-2 link-styles-container"> <label class="form-control-static"><span :class="properyChanged(base, value, \'bg.color\')" @click="properyChanged(base, value, \'bg.color\', true)">{{\'Цвет фона\'|gettext}}</span></label> <div class="is-flex"> <vue-component-colorpicker v-model="value.color1" position-horizontal="left" :withOpacity="withOpacityBackground" :disabled="disabled"></vue-component-colorpicker> <vue-component-colorpicker v-model="value.color2" class="has-ml-1" v-if="value.type == \'gradient\'" position-horizontal="left" :withOpacity="withOpacityBackground" :disabled="disabled"></vue-component-colorpicker> </div> </div> <div class="has-mb-2 link-styles-container"> <label class="form-control-static"><span :class="properyChanged(base, value, \'bg.picture\')" @click="properyChanged(base, value, \'bg.picture\', true)">{{\'Картинка\'|gettext}}</span></label> <vue-component-pictures class="theme-picture" v-model="value.picture" :button-title="\'Загрузить\'|gettext" button-icon="fa fal fa-cloud-upload" updatable @upload="pictureChanged" @delete="pictureChanged" :disabled="disabled"></vue-component-pictures> </div> <div v-if="value.picture"> <div class="has-mb-2 link-styles-container link-styles-container" :class="{disabled: !value.picture, \'is-tablet-fullwidth\': sizes.length> 2}"> <label class="form-control-static"><span :class="properyChanged(base, value, \'bg.size\')" @click="properyChanged(base, value, \'bg.size\', true)">{{\'Размер\'|gettext}}</span></label> <div class="theme-background-size is-background-size"> <label :class="{in: value.size == \'adaptive\'}" @click="value.size = \'adaptive\'" :data-title="\'Адаптивный\'|gettext" v-tippy="{placement : \'top-start\', content: $gettext(\'Требуется широкое изображение. Ширина должна быть минимум в 4 раза больше высоты\')}" v-if="sizes.indexOf(\'adaptive\') != -1"><div data-value="adaptive"><dd><i></i><i></i><i></i></dd></div></label> <label :class="{in: value.size == \'width\'}" @click="value.size = \'width\'" :data-title="\'По ширине\'|gettext" v-if="sizes.indexOf(\'width\') != -1"> <div data-value="width"> <span :style="{visibility: ([\'repeat-y\', \'repeat\'].indexOf(value.repeat) != -1)?\'visible\':\'hidden\', \'margin-top\': checkBackgroundWidthPosition()}"></span> <span></span> <span :style="{visibility: ([\'repeat-y\', \'repeat\'].indexOf(value.repeat) != -1)?\'visible\':\'hidden\'}"></span> </div> </label> <label :class="{in: value.size == \'cover\'}" @click="value.size = \'cover\'" :data-title="\'На весь экран\'|gettext" v-if="sizes.indexOf(\'cover\') != -1"><div data-value="cover"><span></span></div></label> <label :class="{in: value.size == \'tile\'}" @click="value.size = \'tile\'" :data-title="\'Плиткой\'|gettext" v-if="sizes.indexOf(\'tile\') != -1"> <div data-value="none"> <dd v-for="dd in [0, 1, 2]"> <dt v-for="dt in [0, 1, 2]" :class="{in: checkBackgroundTile(dd, dt)}"></dt> </dd> </div> </label> </div> </div> <div class="has-mb-2 link-styles-container" :class="{disabled: !value.picture}" v-if="value.size != \'adaptive\'"> <label class="form-control-static"><span :class="properyChanged(base, value, \'bg.position\')" @click="properyChanged(base, value, \'bg.position\', true)">{{\'Выравнивание\'|gettext}}</span></label> <div> <vue-component-background-position-editor v-model="value.position"/> </div> </div> <div class="has-mb-2 link-styles-container" :class="{disabled: !value.picture}" v-if="value.size != \'adaptive\'"> <label class="form-control-static"><span :class="properyChanged(base, value, \'bg.repeat\')" @click="properyChanged(base, value, \'bg.repeat\', true)">{{\'Повторение\'|gettext}}</span></label> <div> <div class="theme-background-size is-background-repeat"> <label> <div> <dd> <dt v-for="v in [\'repeat\', \'repeat-y\', \'repeat-x\', \'no-repeat\']" :data-value="v" :class="{in: value.repeat == v}" @click="value.repeat = v"> <svg width="18px" height="18px" viewBox="0 0 510 510" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g fill-rule="nonzero"> <g class="is-3" transform="translate(330, 330)"> <path d="M18,180 L162,180 C171.94125,180 180,170.701442 180,159.230769 L180,20.7692308 C180,9.29855769 171.94125,0 162,0 L18,0 C8.05875,0 0,9.29855769 0,20.7692308 L0,159.230769 C0,170.701442 8.05875,180 18,180 Z"></path> </g> <g class="is-2" transform="translate(0, 330)"> <path d="M0,20.7692308 L0,159.230769 C0,170.701442 8.05875,180 18,180 L162,180 C171.94125,180 180,170.701442 180,159.230769 L180,20.7692308 C180,9.29855769 171.94125,0 162,0 L18,0 C8.05875,0 0,9.29855769 0,20.7692308 Z"></path> </g> <g class="is-1" transform="translate(330, 0)"> <path d="M18,0 L162,0 C171.94125,0 180,9.29855769 180,20.7692308 L180,159.230769 C180,170.701442 171.94125,180 162,180 L18,180 C8.05875,180 0,170.701442 0,159.230769 L0,20.7692308 C0,9.29855769 8.05875,0 18,0 Z"></path> </g> <g class="is-0" transform="translate(0, 0)"> <path d="M162,0 L18,0 C8.05875,0 0,9.29855769 0,20.7692308 L0,159.230769 C0,170.701442 8.05875,180 18,180 L162,180 C171.94125,180 180,170.701442 180,159.230769 L180,20.7692308 C180,9.29855769 171.94125,0 162,0 Z"></path> </g> </g> </g> </svg> </dt> </dd> </div> </label> </div> </div> </div> <div class="has-mb-2 link-styles-container" v-if="value.size == \'adaptive\'"> <label class="form-control-static"><span :class="properyChanged(base, value, \'bg.height\')" @click="properyChanged(base, value, \'bg.height\', true)">{{\'Высота фона\'|gettext}}</span></label> <div class="field has-addons"> <p class="control"> <input type="number" v-model="value.height" class="input" style="width: 90px" :min="minHeight" @keyup="checkHeight" @keypress="checkHeight"> </p> <p class="control"> <span class="button is-static" style="width:40px">px</span> </p> </div> </div> <div class="has-mb-2 link-styles-container" :class="{disabled: !value.picture}"> <label class="form-control-static"><span :class="properyChanged(base, value, \'bg.opacity\')" @click="properyChanged(base, value, \'bg.opacity\', true)">{{\'Прозрачность\'|gettext}}</span></label> <div class="control input-slider"> <div class="field has-addons is-marginless"> <p class="control"> <input type="number" class="input" v-model.number="value.opacity" min="0" max="100" style="width:90px"> </p> <p class="control"> <span class="button is-static" style="width:40px">%</span> </p> </div> <b-slider v-model="value.opacity" rounded :tooltip="false" :min="0" :max="100"></b-slider> </div> </div> </div> </div>'}),window.$app.defineComponent("component","vue-component-background-position-editor",{props:["value"],watch:{value:function(){this.$emit("input",this.value)}},template:'<div class="theme-background-size is-background-position"> <label> <div> <dd v-for="(dd_v, dd) in {0: \'0%\', 1: \'50%\', 2: \'100%\'}"> <dt v-for="(dt_v, dt) in {0: \'0%\', 1: \'50%\', 2: \'100%\'}" :class="[$format(\'is-{1}{2}\', dt, dd), {in: value== dt_v+\' \'+dd_v}]" @click="value = dt_v+\' \'+dd_v"> <svg width="23px" height="23px" viewBox="0 0 25 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <polygon class="is-left" fill-rule="nonzero" points="3 10 0 12.5 3 15 3 13 6 13 6 12 3 12"></polygon> <polygon class="is-bottom" fill-rule="nonzero" points="13 19 12 19 12 22 10 22 12.5 25 15 22 13 22"></polygon> <polygon class="is-right" fill-rule="nonzero" points="25 12.5 22 10 22 12 19 12 19 13 22 13 22 15"></polygon> <polygon class="is-top" fill-rule="nonzero" points="10 3 12 3 12 6 13 6 13 3 15 3 12.5 0"></polygon> <path d="M14,12.5 C14,11.7 13.3,11 12.5,11 C11.7,11 11,11.7 11,12.5 C11,13.3 11.7,14 12.5,14 C13.3,14 14,13.3 14,12.5 Z" class="is-dot" fill-rule="nonzero"></path> </g> </svg> </dt> </dd> </div> </label> </div>'}),window.$app.defineComponent("component","vue-component-blocks-flipclock",{data:function(){return{countdown:0,clock:null}},watch:{value:function(){this.countdown=this.prepare(!0)}},props:["value","page_id","id"],mounted:function(){this.countdown=this.prepare()},methods:{prepare:function(e){var t,i,s,n=Math.min(this.value.tms,8639999);return 2==this.value.type&&(t="timer"+this.page_id+"-"+this.id,i=Math.round(new Date/1e3),(s=Cookies.get(t))&&!e?n=s-i:Cookies.set(t,n+i,{maxAge:this.value.expires,path:this.value.path?this.value.path:"/"})),n<0&&(n=0),n}},template:'<vue-blocks-flipclock-countdown :countdown="countdown"></vue-blocks-flipclock-countdown>'}),window.$app.defineComponent("component","vue-component-blocks-html",{mounted:function(){this.refresh()},watch:{value:function(){this.refresh()}},props:["value"],methods:{refresh:function(){var t=this;this.$nextTick(function(){t.$el.innerHTML="";var e=Firewall.checkHTML(t.value);postscribe(t.$el,e,{done:function(){document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!1}))},beforeWrite:Firewall.checkHTML})})}},template:"<div></div>"}),window.$app.defineComponent("component","vue-component-blocks-map",{data:function(){return{map:null,icon:null,markers:[]}},mounted:function(){var i=this;$mx.lazy("map.js","map.css",function(){var e=i.value.bounds,t=i.value.is_fixed;i.map=L.map(i.$refs.map,{dragging:!t,doubleClickZoom:!t,boxZoom:!t,touchZoom:!t,zoomControl:!0,attributionControl:!1}),null!=e.center&&i.map.setView([e.center.lat,e.center.lng],e.zoom),L.control.attribution({prefix:""}).addTo(i.map),null!=e.bounds&&i.map.fitBounds(e.bounds),L.tileLayer("/maps/{z}/{x}/{y}.png",{attribution:"",crossOrigin:!0}).addTo(i.map),i.icon=L.icon({iconUrl:"/s/i/marker.png",iconSize:[28,37],popupAnchor:[0,-10],shadowUrl:"/s/i/marker-shadow.png",shadowSize:[40,50],shadowAnchor:[12,31]}),i.fillMarkers()})},watch:{value:function(){this.refresh()}},props:["value"],methods:{refresh:function(){var e=this.value.bounds;this.map.fitBounds(e.bounds),this.fillMarkers(),this.map.options.zoomControl=!0},fillMarkers:function(){for(var t=this,e=0;e<this.markers.length;e++)this.map.removeLayer(this.markers[e]);_.each(this.value.markers,function(e){t.markers.push(L.marker([parseFloat(e.lat),parseFloat(e.lng)],{icon:t.icon}).addTo(t.map))})}},template:'<div class="map-container" :class="{\'map-view-with-zoom-control\': value.show_zoom}"> <div ref="map" class="map-view"></div> </div>'}),window.$app.defineComponent("component","vue-component-clipboard",{data:function(){return{clipboard:null}},props:{text:String,successMessage:{type:String,default:"Скопировано"},showIcon:{type:Boolean,default:!0},withShare:Boolean},mounted:function(){var t=this;this.clipboard=new Clipboard(this.$refs.button),this.clipboard.on("success",function(e){t.$buefy.toast.open({duration:3e3,message:t.$gettext(t.successMessage),type:"is-success",position:"is-top",queue:!1})})},methods:{click:function(){this.withShare&&null!=navigator.share&&navigator.share({url:this.text}).then(function(){}).catch(function(e){})}},destroyed:function(){this.clipboard.destroy()},template:'<span ref=\'button\' :data-clipboard-text="text" @click.stop="click"> <i class="fas fa-copy button-clipboard" v-if="showIcon"></i><slot></slot> </span>'}),window.$app.defineComponent("component","vue-component-codemirror",{data:function(){return{codeMirror:null,content:"",needAutoFormat:!1}},props:{value:String,disabled:Boolean,readonly:Boolean,theme:{type:String,default:"default"},mode:{type:String,default:"text/html"},baseMode:String,autoHeight:{type:Boolean,default:!1},lineWrapping:{type:Boolean,default:!0}},mounted:function(){var a=this;$mx.lazy("codemirror.js","codemirror.css",function(){var e={lineNumbers:!0,theme:a.theme,lineWrapping:a.lineWrapping,mode:{name:a.mode,baseMode:a.baseMode},readOnly:a.readonly,autoCloseTags:!0,lint:!0,styleActiveLine:!0,gutters:["CodeMirror-lint-markers"],extraKeys:{"Shift-Tab":a.autoFormatSelection,Tab:function(){return a.codeMirror.execCommand("insertTab"),!0}}};a.autoHeight&&(e.viewportMargin=1/0),a.codeMirror=CodeMirror.fromTextArea(a.$refs.el,e),a.codeMirror.on("change",function(e){a.content=e.getValue(),a.$emit("input",a.content)});var n=a.codeMirror.defaultCharWidth();a.codeMirror.on("renderLine",function(e,t,i){var s;a.lineWrapping&&(s=CodeMirror.countColumn(t.text,null,e.getOption("tabSize"))*n,i.style.textIndent="-"+s+"px",i.style.paddingLeft=4+s+"px")}),a.needAutoFormat&&a.autoFormat()})},methods:{getSelectedRange:function(){return{from:this.codeMirror.getCursor(!0),to:this.codeMirror.getCursor(!1)}},autoFormatSelection:function(){var e=this.getSelectedRange();this.codeMirror.autoFormatRange(e.from,e.to)},autoFormat:function(){var e,t;this.codeMirror?(e={line:0,ch:0},this.codeMirror.autoFormatRange(e,{line:1/0,ch:1/0}),this.codeMirror.setSelection(e,e),t=this.codeMirror.getValue(),this.value=t.replace(/[ \s]+\<\/a>/g,"</a>").replace(/[ \s]+\<\/b>/g,"</b>").replace(/[ \s]+\<\/span>/g,"</span>")):this.needAutoFormat=!0}},watch:{value:function(e){var t;this.codeMirror&&e!==this.codeMirror.getValue()&&(t=this.codeMirror.getScrollInfo(),this.codeMirror.setValue(e),this.content=e,this.codeMirror.scrollTo(t.left,t.top))}},beforeDestroy:function(){var e;!this.codeMirror||(e=this.codeMirror.doc.cm.getWrapperElement())&&e.remove&&e.remove()},template:'<div :class="{disabled: disabled}"> <textarea ref=\'el\' v-model="value" style="width: 100%;border: 0;resize: none" class="CodeMirror cm-s-default" :disabled="disabled"></textarea> </div>'}),window.$app.defineComponent("component","vue-component-colorpicker",{data:function(){return{palette:[["#000000","#343a40","#495057","#868e96","#adb5bd","#ced4da","#dee2e6","#e9ecef","#f1f3f5","#ffffff"],["#c92a2a","#e03131","#f03e3e","#fa5252","#ff6b6b","#ff8787","#ffa8a8","#ffc9c9","#ffe3e3","#fff5f5"],["#a61e4d","#c2255c","#d6336c","#e64980","#f06595","#f783ac","#faa2c1","#fcc2d7","#ffdeeb","#fff0f6"],["#862e9c","#9c36b5","#ae3ec9","#be4bdb","#cc5de8","#da77f2","#e599f7","#eebefa","#f3d9fa","#f8f0fc"],["#5f3dc4","#6741d9","#7048e8","#7950f2","#845ef7","#9775fa","#b197fc","#d0bfff","#e5dbff","#f3f0ff"],["#364fc7","#3b5bdb","#4263eb","#4c6ef5","#5c7cfa","#748ffc","#91a7ff","#bac8ff","#dbe4ff","#edf2ff"],["#1864ab","#1971c2","#1c7ed6","#228be6","#339af0","#4dabf7","#74c0fc","#a5d8ff","#d0ebff","#e7f5ff"],["#0b7285","#0c8599","#1098ad","#15aabf","#22b8cf","#3bc9db","#66d9e8","#99e9f2","#c5f6fa","#e3fafc"],["#087f5b","#099268","#0ca678","#12b886","#20c997","#38d9a9","#63e6be","#96f2d7","#c3fae8","#e6fcf5"],["#5c940d","#66a80f","#74b816","#82c91e","#94d82d","#a9e34b","#c0eb75","#d8f5a2","#e9fac8","#f4fce3"],["#e67700","#f08c00","#f59f00","#fab005","#fcc419","#ffd43b","#ffe066","#ffec99","#fff3bf","#fff9db"],["#d9480f","#e8590c","#f76707","#fd7e14","#ff922b","#ffa94d","#ffc078","#ffd8a8","#ffe8cc","#fff4e6"]],position:"",currentTab:"s",colorsPallete:[],oldValue:null,pickr:null,frequenty:[]}},props:{value:String,colors:{type:Array,default:[]},disabled:Boolean,label:String,positionHorizontal:String,positionVertical:String,design:String,withArrow:{type:Boolean,default:!0},withOpacity:Boolean},watch:{value:function(){this.pickr&&6==this.value.replace("#","").length&&this.pickr.setColor(this.value,!0)},currentTab:function(e){var s=this;"p"!=e||this.pickr||(this.pickr=Pickr.create({el:this.$refs.picker,inline:!0,useAsButton:!0,showAlways:!0,default:this.value,sliders:"h",components:{palette:!1,preview:!1,opacity:this.withOpacity,hue:!0}}),this.pickr.on("change",function(e,t){var i=e.toHEXA().toString().toLowerCase();s.value.toLowerCase()!=i&&(s.value=i,s.$device.mobile||s.$emit("input",i))}))},colors:function(){this.updateColorsPallete()}},created:function(){this.oldValue=this.value,this.updateColorsPallete(),this.value||(this.value="#ffffff")},mounted:function(){$mx(window).on("resize",this.checkPosition),this.checkPosition()},destroyed:function(){$mx(window).off("resize",this.checkPosition),this.pickr&&this.pickr.destroy()},methods:{close:function(){this.$refs.dropdown.toggle()},updateColorsPallete:function(){this.colorsPallete="string"==typeof this.colors?this.colors.split(","):this.colors},apply:function(){this.oldValue=this.value,this.close()},inputColor:function(){6!=this.value.replace("#","").length||this.$device.mobile||this.$emit("input",this.value)},selectColor:function(e){this.value=e,this.$device.mobile||(this.$emit("input",e),this.close())},checkPosition:function(){this.position="is-"+(this.positionVertical?this.positionVertical:$mx(document.body).height()-$mx(this.$el).offset().top<400?"top":"bottom")+"-"+(this.positionHorizontal?this.positionHorizontal:this.label?"left":"right")},filterFrequenty:function(e){var t=this;return _.filter(e,function(e){return e&&-1==t.colors.indexOf(e)})},activeChange:function(e){e?(this.checkPosition(),this.oldValue=this.value,this.currentTab="s",this.frequenty=this.filterFrequenty(Storage.get("colors.frequenty",[]))):(this.$device.mobile&&(this.value=this.oldValue,this.$emit("input",this.value)),this.updateFrequenty(this.value)),$mx("html").toggleClass("is-dropdown-opened",e),this.$emit("active-change",e)},lightOrDark:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){return lightOrDark(e)}),updateFrequenty:function(e){var t=this.frequenty.indexOf(e);-1!=t&&this.frequenty.splice(t,1),this.frequenty.unshift(e),this.frequenty=this.filterFrequenty(this.frequenty.slice(0,40)),Storage.set("colors.frequenty",this.frequenty)}},template:'<div :class="{disabled: disabled, \'with-label\': label, \'color-picker-container\': label}" :style="{display: label?\'\':\'inline-block\'}"> <label class="form-control-static" v-if="label">{{label}}</label> <vue-component-dropdown :position="position" @active-change="activeChange" :disabled="disabled" :title="\'Цвет\'|gettext" ref="dropdown" :button-class="[design?(\'is-\'+design):\'\', withArrow?\'\':\'without-arrow\', \'button\', \'color-picker-button\']" :with-arrow="withArrow"> <span :style="{background: value}" slot="button"></span> <b-dropdown-item :focusable="false" class="color-picker" custom paddingless> <div class="color-picker-tabs"> <a @click="currentTab = \'h\'" :class="{in: currentTab== \'h\'}">{{\'История\'|gettext}}</a> <a @click="currentTab = \'s\'" :class="{in: currentTab== \'s\'}">{{\'Палитра\'|gettext}}</a> <a @click="currentTab = \'p\'" :class="{in: currentTab== \'p\'}">{{\'Свой цвет\'|gettext}}</a> </div> <div class="color-picker-swatches" v-if="currentTab == \'s\'"> <div> <div v-for="(l, c) in palette"> <a v-for="c in l" :class="{in: value== c}" @click="selectColor(c)"><dd :style="{\'background\': c}" :data-brightness="lightOrDark(c)"></dd></a> </div> </div> </div> <div class="color-picker-swatches is-horizontal" v-if="currentTab == \'h\'"> <div v-if="colorsPallete.length"> <a v-for="c in colorsPallete" :class="{in: value== c}" @click="selectColor(c)"><dd :style="{\'background\': c}" :data-brightness="lightOrDark(c)"></dd></a> </div> <div v-if="frequenty.length"> <a v-for="c in frequenty" :class="{in: value== c}" @click="selectColor(c)"><dd :style="{\'background\': c}" :data-brightness="lightOrDark(c)"></dd></a> </div> </div> <div v-show="currentTab == \'p\'" style="flex-grow: 1"> <div style="padding: 1rem 1rem 0"> <div class="pcr-color-preview"> <button type="button" class="pcr-last-color" aria-label="use previous color" :style="{color: oldValue}" @click="selectColor(oldValue)"></button> <div class="pcr-current-color" :style="{color: value}"></div> </div> </div> <div ref="picker" class="color-picker"></div> <div style="padding: .8em"><input type="text" class="input" v-model="value" @input="inputColor"></div> </div> <vue-component-dropdown-footer-buttons @close="close" @apply="apply"/> </b-dropdown-item> </vue-component-dropdown> </div>'}),window.$app.defineComponent("component","vue-component-datepicker",{data:function(){return{weekdays:this.$getDaysNames(),months:this.$getMonthsNames(),first_day_week:this.$getFirstDayWeek()}},props:{value:String,placeholder:String,disabled:Boolean},watch:{value:function(e){this.$emit("input",e)}},template:'<div class="has-feedback"> <b-datepicker :placeholder="placeholder" v-model="value" icon="calendar-alt" :day-names="weekdays" :month-names="months" :first-day-of-week="first_day_week" :disabled="disabled"></b-datepicker> <a class="form-control-feedback has-text-grey-light" @click="value = null" :class="{disabled: disabled}" v-if="value"><i class="fal fa-times"></i></a> </div>'}),window.$app.defineComponent("component","vue-component-delay-input",{data:function(){return{v:"",t:null,oldValue:null,types:{s:"Секунда",m:"Минута",h:"Час",d:"День"}}},props:["value"],watch:{value:function(e){this.parse(e)},v:function(){this.build()},t:function(){this.build()}},created:function(){this.value||(this.value=""),this.parse(this.value)},methods:{build:function(){this.value=this.t&&this.v&&parseInt(this.v)?parseInt(this.v)+this.t:"",this.oldValue!=this.value&&this.$emit("input",this.value)},parse:function(e){(this.oldValue=e)?(this.t=e.substr(-1,1),this.v=e.substr(0,e.length-1)):(this.v="",this.t=null)}},template:'<div style="display:flex;margin:.5rem 0"> <input type="number" class="input has-text-right" v-model="v" v-if="t" style="width:70px;margin-right:1rem"> <b-select v-model="t" placeholder="Немедленно" expanded style="flex-grow: 1"> <option :value="null">Немедленно</option> <option v-for="(v, k) in types" :value="k">{{v}}</option> </b-select> </div>'}),window.$app.defineComponent("component","vue-component-design-pictures-chooser",{props:{value:Object,disabled:Boolean},data:function(){return{v:{title:"",text:"",button_text:"",bg:"",nav:""},colorPickerOpened:!1}},watch:{v:{handler:function(){this.$device.mobile||this.$emit("input",this.v)},deep:!0}},methods:{activeChangeColorpicker:function(e){this.colorPickerOpened=e},activeChange:function(e){this.$emit("active-change",e),e&&(this.v=_.clone(this.value))},close:function(){this.$refs.dropdown.toggle()},apply:function(){this.$emit("input",this.v),this.close()}},template:'<vue-component-dropdown @active-change="activeChange" position="is-bottom-left" :class="{\'is-color-picker-opened\': colorPickerOpened}" :disabled="disabled" ref="dropdown" :title="\'Карусель картинок\'|gettext" button-class="button is-default is-fullwidth is-focusable design-picture-button color-picker-button"> <span slot="button"> <dd :style="{background: value.title}"></dd> <dd :style="{background: value.text}"></dd> <dd :style="{background: value.button_text}"></dd> <dd :style="{background: value.bg}"></dd> <dd :style="{background: value.nav}"></dd> </span> <b-dropdown-item custom style="min-width: 300px"> <vue-component-design-pictures v-model="v" @active-change="activeChangeColorpicker"/> </b-dropdown-item> <vue-component-dropdown-footer-buttons @close="close" @apply="apply"/> </vue-component-dropdown>'}),window.$app.defineComponent("component","vue-component-design-pictures",{props:{value:Object,disabled:Boolean},methods:{activeChangeColorpicker:function(e){this.$emit("active-change",e)}},template:'<div> <div class="has-mb-2"> <vue-component-colorpicker v-model="value.title" :disabled="disabled" :colors="[$account.theme.link.color]" :label="\'Цвет заголовка\'|gettext" @active-change="activeChangeColorpicker"></vue-component-colorpicker> </div> <div class="has-mb-2"> <vue-component-colorpicker v-model="value.text" :disabled="disabled" :colors="[$account.theme.link.color]" :label="\'Цвет текста\'|gettext" @active-change="activeChangeColorpicker"></vue-component-colorpicker> </div> <div class="has-mb-2"> <vue-component-colorpicker v-model="value.button_text" :disabled="disabled" :colors="[$account.theme.link.color]" :label="\'Цвет текста кнопки\'|gettext" @active-change="activeChangeColorpicker"></vue-component-colorpicker> </div> <div class="has-mb-2"> <vue-component-colorpicker v-model="value.bg" :disabled="disabled" :colors="[$account.theme.link.bg]" :label="\'Цвет фона кнопки\'|gettext" @active-change="activeChangeColorpicker"></vue-component-colorpicker> </div> <div> <vue-component-colorpicker v-model="value.nav" :disabled="disabled" :colors="[$account.theme.link.color]" :label="\'Цвет навигации\'|gettext" @active-change="activeChangeColorpicker"></vue-component-colorpicker> </div> </div>'}),window.$app.defineComponent("component","vue-component-design-radius-chooser",{data:function(){return{v:0}},props:{value:Number,fullwidth:Boolean,disabled:Boolean},watch:{value:function(){this.$emit("input",this.value)}},methods:{activeChange:function(e){$mx("html").toggleClass("is-dropdown-opened",e),e&&(this.v=_.clone(this.value))},apply:function(){this.$emit("input",this.v),this.close()},close:function(){this.$refs.dropdown.toggle()}},template:'<span> <vue-component-dropdown @active-change="activeChange" class="is-visible-mobile" :class="{\'is-fullwidth\': fullwidth}" :disabled="disabled" :title="\'Радиус\'|gettext" ref="dropdown" button-class="button is-default is-fullwidth is-focusable"> <span slot="button">{{value}}px</span> <b-dropdown-item custom class="has-transparent-bg has-mb-2 is-visible-mobile" style="height: 160px;position: relative;overflow: hidden;"> <div style="background-color: #a0afb4;line-height:100px;height:100px;width:100px;text-align: center;color:#fff;cursor: default;user-select: none;position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);" :style="{\'border-radius\': v+\'px\'}">{{v}}px</div> </b-dropdown-item> <b-dropdown-item custom style="min-width: 300px" class="has-mb-2"> <div class="control input-slider"> <div class="field has-addons is-marginless"> <p class="control is-expanded"> <input type="number" class="input" v-model.number="v" min="0" max="40"> </p> <p class="control"> <span class="button is-static" style="width:40px">px</span> </p> </div> <b-slider v-model="v" rounded :tooltip="false" :min="0" :max="40"></b-slider> </div> </b-dropdown-item> <vue-component-dropdown-footer-buttons @close="close" @apply="apply"/> </vue-component-dropdown> <div class="control input-slider is-hidden-mobile"> <div class="field has-addons is-marginless"> <p class="control is-expanded"> <input type="number" class="input" v-model.number="value" min="0" max="40"> </p> <p class="control"> <span class="button is-static" style="width:40px">px</span> </p> </div> <b-slider v-model="value" rounded :tooltip="false" :min="0" :max="40"></b-slider> </div> </span>'}),window.$app.defineComponent("component","vue-component-design-shadow-chooser",{data:function(){return{v:{x:0,y:0,s:0,b:0,o:0,color:""},position:""}},props:{value:Object,fullwidth:Boolean,disabled:Boolean,colorPickerOpened:Boolean,positionHorizontal:String,positionVertical:String},computed:{style:function(){return"box-shadow: "+StylesFactory.getShadow(this.v)},snippet:function(){var e=this.value;return 0<e.x+e.y+e.s+e.b?e.x+"px, "+e.y+"px, "+e.s+"px, "+e.b+"px":this.$gettext("Нет")}},watch:{v:{handler:function(){this.$device.mobile||this.$emit("input",this.v)},deep:!0}},mounted:function(){$mx(window).on("resize",this.checkPosition),this.checkPosition()},destroyed:function(){$mx(window).off("resize",this.checkPosition)},methods:{apply:function(){this.$emit("input",this.v),this.close()},checkPosition:function(){this.position="is-"+(this.positionVertical?this.positionVertical:$mx(document.body).height()-$mx(this.$el).offset().top<300?"top":"bottom")+"-"+(this.positionHorizontal?this.positionHorizontal:"left")},activeChangeColorpicker:function(e){this.colorPickerOpened=e},activeChange:function(e){$mx("html").toggleClass("is-dropdown-opened",e),e&&(this.v=_.clone(this.value)),this.checkPosition()},close:function(){this.$refs.dropdown.toggle()}},template:'<vue-component-dropdown @active-change="activeChange" :position="position" :class="{\'is-fullwidth\': fullwidth, \'is-color-picker-opened\': colorPickerOpened}" :disabled="disabled" ref="dropdown" :title="\'Тень\'|gettext" button-class="button is-default is-fullwidth is-focusable"> <span slot="button">{{snippet}}</span> <b-dropdown-item custom class="has-transparent-bg has-mb-2 is-visible-mobile" style="height: 100px;padding: 30px;overflow: hidden;"> <div style="background-color: #a0afb4;padding:10px;text-align: center;color:#fff;border-radius: 2px;cursor: default;user-select: none;" :style="style">{{\'Ссылка\'|gettext}}</div> </b-dropdown-item> <b-dropdown-item custom style="min-width: 300px"> <div class="row row-small has-mb-2"> <div class="col-xs-6"> <b-field :label="\'{1} смещение\'|gettext|format(\'X\')"> <p class="control input-slider"> <input type="number" class="input" v-model.number="v.x" min="0" max="50"> <b-slider v-model="v.x" rounded :tooltip="false" :min="0" :max="50"></b-slider> </p> </b-field> </div> <div class="col-xs-6"> <b-field :label="\'Размытие\'|gettext"> <p class="control input-slider"> <input type="number" class="input" v-model.number="v.b" min="0" max="250"> <b-slider v-model="v.b" rounded :tooltip="false" :min="0" :max="250"></b-slider> </p> </b-field> </div> </div> <div class="row row-small has-mb-5"> <div class="col-xs-6"> <b-field :label="\'{1} смещение\'|gettext|format(\'Y\')"> <p class="control input-slider"> <input type="number" class="input" v-model.number="v.y" min="0" max="50"> <b-slider v-model="v.y" rounded :tooltip="false" :min="0" :max="50"></b-slider> </p> </b-field> </div> <div class="col-xs-6"> <b-field :label="\'Растяжение\'|gettext"> <p class="control input-slider"> <input type="number" class="input" v-model.number="v.s" min="0" max="50"> <b-slider v-model="v.s" rounded :tooltip="false" :min="0" :max="50"></b-slider> </p> </b-field> </div> </div> <div style="display: flex"> <b-field :label="\'Цвет\'|gettext" class="is-marginless"> <vue-component-colorpicker v-model="v.color" @active-change="activeChangeColorpicker"/> </b-field> <b-field :label="\'Прозрачность\'|gettext" class="has-ml-2"> <p class="control"> <input type="number" class="input" v-model="v.o" :min="0" :max="100"> </p> <p class="control"> <span class="button is-static">%</span> </p> </b-field> </div> </b-dropdown-item> <vue-component-dropdown-footer-buttons @close="close" @apply="apply"/> </vue-component-dropdown>'}),window.$app.defineComponent("component","vue-component-design-transparent-cooser",{data:function(){return{v:0}},props:{value:Number,fullwidth:Boolean,disabled:Boolean},watch:{value:function(){this.$emit("input",this.value)}},methods:{activeChange:function(e){$mx("html").toggleClass("is-dropdown-opened",e),e&&(this.v=_.clone(this.value))},apply:function(){this.$emit("input",this.v),this.close()},close:function(){this.$refs.dropdown.toggle()}},template:'<span> <vue-component-dropdown @active-change="activeChange" class="is-visible-mobile" :class="{\'is-fullwidth\': fullwidth}" :disabled="disabled" ref="dropdown" :title="\'Прозрачность\'|gettext" button-class="button is-default is-fullwidth is-focusable"> <span slot="button">{{value}}%</span> <b-dropdown-item custom class="has-transparent-bg has-mb-2 is-visible-mobile" style="height: 100px;padding: 30px;overflow: hidden;"> <div style="border: 2px solid #a0afb4;padding:10px;text-align: center;color:#fff;border-radius: 2px;cursor: default;user-select: none;" :style="{background: transparentColor(v, \'#a0afb4\')}">{{\'Ссылка\'|gettext}}</div> </b-dropdown-item> <b-dropdown-item custom style="min-width: 300px" class="has-mb-2"> <div class="control input-slider"> <div class="field has-addons is-marginless"> <p class="control is-expanded"> <input type="number" class="input" v-model.number="v" min="0" max="100"> </p> <p class="control"> <span class="button is-static" style="width:40px">%</span> </p> </div> <b-slider v-model="v" rounded :tooltip="false" :min="0" :max="100"></b-slider> </div> </b-dropdown-item> <vue-component-dropdown-footer-buttons @close="close" @apply="apply"/> </vue-component-dropdown> <div class="control input-slider is-hidden-mobile"> <div class="field has-addons is-marginless"> <p class="control is-expanded"> <input type="number" class="input" v-model.number="value" min="0" max="100" :disabled="disabled"> </p> <p class="control"> <span class="button is-static" style="width:40px">%</span> </p> </div> <b-slider v-model="value" rounded :tooltip="false" :min="0" :max="100" :disabled="disabled"></b-slider> </div> </span>'}),window.$app.defineComponent("component","vue-component-document",{props:["value"],template:'<div> <div v-for="b in value.blocks" class="ce-block" :class="\'is-\'+b.type"> <p v-if="b.type == \'paragraph\'" class="ce-paragraph" v-html="b.data.text"/> <component v-if="b.type == \'header\'" v-bind:is="\'h\'+b.data.level" v-html="b.data.text" class="ce-header"/> <div v-if="b.type == \'image\'" :class="{\'has-bordered\': b.data.withBorder, \'has-stretched\': b.data.stretched, \'has-background\': b.data.withBackground}"> <div class="doc-image" :data-size="(b.data.files != undefined)?b.data.files.length:1"> <img v-if="b.data.file != undefined" :src="b.data.file.url" :alt="b.data.caption" @click="showLightboxPicture(b.data.file.url)"> <img v-for="p in b.data.files" :src="p.url" :alt="b.data.caption" @click="showLightboxPicture(p.url)"> </div> </div> <component v-if="b.type == \'list\'" v-bind:is="(b.data.style == \'ordered\')?\'ol\':\'ul\'"><li v-for="item in b.data.items" v-html="item"/></component> <div v-if="b.type == \'embed\'"> <div v-if="[\'vimeo\', \'youtube\'].indexOf(b.data.service) != -1" class="video-container"> <iframe :src="b.data.embed" frameborder="0" allowtransparency="true" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> </div> </div> <div v-if="b.type == \'alert\'" :class="\'cdx-alert cdx-alert-\'+b.data.type">{{b.data.message}}</div> <div v-if="b.type == \'delimiter\'" class="ce-delimiter"></div> <pre v-if="b.type == \'code\'" class="highlightjs" :class="\'lang-\'+b.data.language">{{b.data.code}}</pre> <blockquote v-if="b.type == \'quote\'" v-html="b.data.text"></blockquote> <table class="doc-table" v-if="b.type == \'table\'"> <tbody> <tr v-for="tr in b.data.content"><td v-for="td in tr" v-html="td"></td></tr> </tbody> </table> <vue-frontend-blocks-video v-if="b.type == \'video\'" :options=\'{"url": b.data.url, "type": b.data.type, "handler": "player", "is_autoplay": false, "is_autohide": false, "poster": null}\'/> </div> </div>'}),window.$app.defineComponent("component","vue-component-domain-attach",{data:function(){return{isFetching:!1,isCheckingDNS:!1,isAttachingDomain:!1,domainProtocol:"http://",values:{domain:"",domain_verified:!1,domain_attached:!1,domain_secured:!1},errors:{}}},props:{value:Object,disabled:Boolean},mixins:[FormModel],created:function(){this.value?this.values=this.value:this.fetchData()},computed:{ns:function(){return"ru"==window.i18n.locale?["ns1.taplink.cc","ns2.taplink.cc"]:["ns1.taplink.at","ns2.taplink.at"]},isSubdomain:function(){var e=this.values.domain.split(".");e.shift();var t=e.join(".");return 1<e.length&&4<e[0].length&&-1==["space.ru"].indexOf(t)||2<e.length}},methods:{fetchData:function(){var t=this;this.isFetching=!0,this.$api.get("settings/domain/get").then(function(e){t.isFetching=!1,t.values=e.response})},updateData:function(e){var t=this;this.isUpdating=!0,this.$api.post("settings/domain/set",Object.assign({part:e},this.values),this).then(function(e){t.errors="fail"==e.result?e.errors:{},"success"==e.result&&(t.fetchData(),t.$auth.refresh()),t.isCheckingDNS=t.isAttachingDomain=t.isUpdating=!1}).catch(function(e){e.data;t.isCheckingDNS=t.isAttachingDomain=t.isUpdating=!1})},onDomainAction:function(e){var t=this;switch(e){case"delete":this.$confirm(this.$gettext("Вы уверены что хотите открепить доменное имя?"),"is-danger").then(function(){t.updateData("domain_unattach")});break;case"zonemanager":this.$modal("vue-settings-domain-zonemanager-form",null,this);break;case"certificate":this.$modal("vue-settings-domain-certificate-form",null,this)}},checkDomainDNS:function(){this.isCheckingDNS=!0,this.updateData("check_dns")},domainAttach:function(){this.isAttachingDomain=!0,this.updateData("domain_attach")}},template:'<div> <b-field :class="{disabled: !$auth.isAllowTariff(\'business\'), \'has-error\': errors.domain}" :message="errors.domain"> <b-field class="is-marginless"> <div v-if="values.domain_attached || isAttachingDomain" class="control is-clearfix is-mouse-locked" :disabled="isFetching"> <div class="input has-text-success" disabled="on" v-if="$account.custom_domain_secured"> <i class="fas fa-lock has-text-success" style="font-size: 90%;line-height: 1rem;color: #599e4d !important"></i><span class="has-ml-1 is-hidden-mobile">HTTPS</span> </div> </div> <div v-if="values.domain_attached || isAttachingDomain" class="control is-expanded is-clearfix"> <div disabled="on" class="input is-mouse-locked has-text-black">{{values.domain}}</div> </div> <b-input type="text" v-model="values.domain" placeholder="mydomain.ru" v-else expanded :disabled="isFetching || disabled"></b-input> <p class="control"> <button class="button is-fullwidth" @click="domainAttach" v-if="!values.domain_attached" :disabled="isFetching || disabled" :class="{\'is-loading\': isAttachingDomain}">{{\'Подключить домен\'|gettext}}</button> <vue-component-action-button v-else @action="onDomainAction" :title="\'Действие\'|gettext" position="is-bottom-left"> <template slot="actions"> <b-dropdown-item value="zonemanager" :disabled="!values.domain_verified" v-if="!isSubdomain"><i class="fa fa-globe"></i> {{\'Управление зоной\'|gettext}}</b-dropdown-item> <b-dropdown-item value="certificate" :disabled="!values.domain_verified" v-if="isSubdomain"><i class="fa fa-globe"></i> {{\'SSL сертификат\'|gettext}}</b-dropdown-item> <hr class="dropdown-divider" aria-role="menuitem"> <b-dropdown-item value="delete" class="has-text-danger"><i class="fa fa-trash-alt"></i> {{\'Отключить домен\'|gettext}}</b-dropdown-item> </template> </vue-component-action-button> </p> </b-field> </b-field> <div v-if="values.domain_attached && !values.domain_verified"> <p class="has-mb-1" v-if="isSubdomain">{{\'Для завершения подключения поддомена {1} нужно добавить CNAME-запись в ваш DNS-сервер\'|gettext|format(values.domain)}}:</p> <p class="has-mb-1" v-else>{{\'Для завершения подключения домена {1} нужно изменить DNS-сервера на\'|gettext|format(values.domain)}}:</p> <table class="table is-bordered is-marginless has-mr-2" style="border-top: 1px solid #f0f0f0;border-top-color: var(--border-grey-color)" v-if="isSubdomain"> <tbody> <tr> <td><i class="fas has-mr-1" :class="{\'fa-check-circle has-text-success\': values.domain_verified, \'fa-exclamation-circle has-text-danger\': !values.domain_verified}"></i> cname.taplink.cc <vue-component-clipboard text="cname.taplink.cc" class="has-ml-1"></vue-component-clipboard></td> </tr> </tbody> </table> <table class="table is-bordered is-marginless has-mr-2" style="border-top: 1px solid #f0f0f0;border-top-color: var(--border-grey-color)" v-else> <tbody> <tr> <td><i class="fas has-mr-1" :class="{\'fa-check-circle has-text-success\': values.domain_verified, \'fa-exclamation-circle has-text-danger\': !values.domain_verified}"></i> {{ns[0]}} <vue-component-clipboard :text="ns[0]" class="has-ml-1"></vue-component-clipboard></td> </tr> <tr> <td><i class="fas has-mr-1" :class="{\'fa-check-circle has-text-success\': values.domain_verified, \'fa-exclamation-circle has-text-danger\': !values.domain_verified}"></i> {{ns[1]}} <vue-component-clipboard :text="ns[1]" class="has-ml-1"></vue-component-clipboard></td> </tr> </tbody> </table> <button class="has-mt-2 button is-dark" @click="checkDomainDNS" :class="{\'is-loading\': isCheckingDNS}" v-if="!values.domain_verified">{{\'Проверить DNS\'|gettext}}</button> </div> <div v-if="window.i18n.locale == \'ru\' && !values.domain_attached" :class="{disabled: !$auth.isAllowTariff(\'business\')}"> Если у вас нет доменного имени вы можете зарегистрировать его в <a href="https://reg.ru?rlink=reflink-44923" target="_blank">REG.RU</a> </div> </div>'}),window.$app.defineComponent("component","vue-component-dropdown-checklist",{data:function(){return{action:null}},created:function(){},props:["list","value"],methods:{onAction:function(){var e,i,s,t,n,a=this;this.action&&(e=this.value.indexOf(this.action),1<(i=this.action.split(":")).length&&"*"==i[1]&&-1!=this.value.indexOf(this.action)?Vue.nextTick(function(){a.action=null}):(s=this.value,-1==e?s.push(this.action):s.splice(e,1),1<i.length&&("*"==i[1]?-1!=s.indexOf(i[0]+":*")&&(s=_.filter(s,function(e){return-1!=e.indexOf(i[0]+":*")||-1==e.indexOf(i[0]+":")})):(t=!1,_.each(this.list,function(e){t|=null!=e.items[i[0]+":*"]}),"true"!=i[1]&&"false"!=i[1]||_.each(this.list,function(e){_.each(e.items,function(e,t){s=_.filter(s,function(e){return-1==e.indexOf(i[0]+":")||-1!=e.indexOf(":"+i[1])})})}),t&&(n={0:0,1:0},_.each(this.list,function(e){_.each(e.items,function(e,t){0==t.indexOf(i[0]+":")&&0!=t.indexOf(i[0]+":*")&&n[-1==s.indexOf(t)?0:1]++})}),0==n[0]?(s=_.filter(s,function(e){return-1==e.indexOf(i[0]+":")})).push(i[0]+":*"):s=_.filter(s,function(e){return-1==e.indexOf(i[0]+":*")})))),Vue.nextTick(function(){a.value=s,a.action=null,a.$emit("input",s)})))}},template:'<b-dropdown class="is-fullwidth" v-model="action" @input="onAction"> <button class="button is-fullwidth level" slot="trigger"> <span>{{\'Фильтр\'|gettext}}</span> <b-icon icon="angle-down"></b-icon> </button> <div v-for="(node, idx) in list"> <hr v-if="node.label && idx> 0" class="dropdown-divider"> <b-dropdown-item v-if="node.label" custom class="has-text-grey-light"> {{node.label|gettext}} </b-dropdown-item> <b-dropdown-item v-for="(t, k) in node.items" :value="k"><i class="fa" :class="{\'fa-square\': value.indexOf(k) == -1, \'fas fa-check-square\': value.indexOf(k) != -1}"></i> {{t}}</b-dropdown-item> </div> </b-dropdown>'}),window.$app.defineComponent("component","vue-component-dropdown-footer-buttons",{template:'<div class="modal-card-foot level is-hidden-tablet"> <div class="level-left"> <button class="button is-dark" type="button" @click="$emit(\'close\')">{{\'Отмена\'|gettext}}</button> </div> <div class="level-right"> <button class="button is-primary is-fullwidth" @click="$emit(\'apply\')">{{\'Применить\'|gettext}}</button> </div> </div>'}),window.$app.defineComponent("component","vue-component-dropdown-list",{props:{title:{type:String,default:"list"},value:{type:Object,default:[]},list:{type:Object,default:[]},frozen:{type:Object,default:[]},exclude:{type:Object,default:[]}},methods:{toggle:function(e){-1==(idx=this.value.indexOf(e))?this.value.push(e):this.value.splice(idx,1)}},template:'<b-dropdown aria-role="list" position="is-top-right" :close-on-click="false"><label class="b-checkbox checkbox is-marginless" slot="trigger" aria-role="listitem">{{title}}</label> <b-dropdown-item v-for="(val, key) in list" @click="toggle(key)" :disabled="frozen.indexOf(key) != -1" v-if="exclude.indexOf(key) == -1"><i class="fa fa-check has-mr-1" :class="{\'is-invisible\': value.indexOf(key) == -1 && frozen.indexOf(key) == -1}"></i>{{val}}</b-dropdown-item> </b-dropdown>'}),window.$app.defineComponent("component","vue-component-dropdown",{data:function(){return{}},props:{position:String,title:String,value:Object,disabled:Boolean,scrollable:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:!1},withArrow:{type:Boolean,default:!0},buttonClass:String},watch:{value:function(){this.$emit("input",this.value)}},methods:{toggle:function(){this.$refs.dropdown.toggle()},activeChange:function(e){this.$emit("active-change",e)}},template:'<b-dropdown aria-role="list" animation="slideup" class="is-slideup" :class="{\'with-title\': title, \'with-arrow\': withArrow}" :position="position" ref="dropdown" @active-change="activeChange" v-model="value" :disabled="disabled" :scrollable="scrollable" :append-to-body="appendToBody"> <b-dropdown-item custom aria-role="menuitem" class="is-title" v-if="title" ref="title"> <div>{{title}}</div> <button type="button" class="modal-close is-small" @click="toggle"></button> </b-dropdown-item> <b-dropdown-item custom class="is-title-after" v-if="title"></b-dropdown-item> <button :class="buttonClass" type="button" role="button" slot="trigger"><span><slot name="button"/><i class="fal fa-chevron-down has-ml-2" v-if="withArrow"></i></span></button> <slot/> </b-dropdown>'}),window.$app.defineComponent("component","vue-component-editor",{data:function(){return{_options:{},_content:"",defaultOptions:{theme:"bubble",boundary:document.body,modules:{toolbar:[[{header:[1,2,3,4,5,!1]}],[{padding:["15px","15px 0px","0px 15px","15px 15px 0px","0px"]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["link","image"],[{color:[]},{background:[]}],["clean"]]},placeholder:"Insert text here ...",readOnly:!1}}},props:{classname:String,content:String,value:String,disabled:{type:Boolean,default:!1},options:{type:Object,required:!1,default:function(){return{}}},globalOptions:{type:Object,required:!1,default:function(){return{}}},blockTag:{type:String,default:"P"}},mounted:function(){var t=this;$mx.lazy("quill.js","quill.css",function(){var e;"P"!=t.blockTag.toUpperCase()&&((e=Quill.import("blots/block")).tagName=t.blockTag,Quill.register(e,!0)),t.initialize(),Array.prototype.slice.call(document.querySelectorAll(".ql-padding .ql-picker-item")).forEach(function(e){return e.textContent=e.dataset.value})})},beforeDestroy:function(){this.quill=null,delete this.quill},methods:{initialize:function(){var o=this;this.$el&&(this._options=Object.assign({},this.defaultOptions,this.globalOptions,this.options),this.quill=new Quill(this.$refs.editor,this._options),this.quill.enable(!1),(this.value||this.content)&&this.quill.pasteHTML(this.value||this.content),this.disabled||this.quill.enable(!0),this.quill.on("selection-change",function(e){e?o.$emit("focus",o.quill):o.$emit("blur",o.quill)}),this.quill.on("text-change",function(e,t,i){var s=o.$refs.editor.children[0].innerHTML,n=o.quill,a=o.quill.getText();"<p><br></p>"!==s&&"<div><br></div>"!==s||(s=""),o._content=s,o.$emit("input",o._content),o.$emit("change",{html:s,text:a,quill:n})}),this.$emit("ready",this.quill))}},watch:{content:function(e){this.quill&&(e&&e!==this._content?(this._content=e,this.quill.pasteHTML(e)):e||this.quill.setText(""))},value:function(e){this.quill&&(e&&e!==this._content?(this._content=e,this.quill.pasteHTML(e)):e||this.quill.setText(""))},disabled:function(e){this.quill&&this.quill.enable(!e)}},template:'<div class="quill-editor" :class="classname"> <slot name="toolbar"></slot> <div ref="editor"></div> </div>'}),window.$app.defineComponent("component","vue-component-emoji-picker-categories",{data:function(){return{categories:[{name:"Frequenty",icon:"frequenty"},{name:"Peoples",icon:"peoples"},{name:"Nature",icon:"nature"},{name:"Foods",icon:"foods"},{name:"Activity",icon:"activity"},{name:"Objects",icon:"objects"},{name:"Places",icon:"places"},{name:"Symbols",icon:"symbols"},{name:"Flags",icon:"flags"}],icons:{activity:'\n\t\t<svg style="max-height:18px" width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 303.6 303.6" fill="gray">\n\t\t<path d="M291.503 11.6c-10.4-10.4-37.2-11.6-48.4-11.6-50.4 0-122.4 18.4-173.6 69.6-77.2 76.8-78.4 201.6-58.4 222 10.8 10.4 35.6 12 49.2 12 49.6 0 121.2-18.4 173.2-70 76.4-76.4 80.4-199.6 58-222zm-231.2 277.2c-24.4 0-36-4.8-38.8-7.6-5.2-5.2-8.4-24.4-6.8-49.6l57.2 56.8c-4 .4-8 .4-11.6.4zm162.8-66c-38.8 38.8-90.4 57.2-132.4 63.6l-74-73.6c6-42 24-94 63.2-133.2 38-38 88-56.4 130.8-62.8l75.6 75.6c-6 40.8-24.4 91.6-63.2 130.4zm65.2-148.8l-58.8-59.2c4.8-.4 9.2-.4 13.6-.4 24.4 0 35.6 4.8 38 7.2 5.6 5.6 9.2 25.6 7.2 52.4z"/>\n\t\t<path d="M215.103 139.6l-20.8-20.8 13.2-13.2c2.8-2.8 2.8-7.6 0-10.4s-7.6-2.8-10.4 0l-13.2 13.6-20.8-20.8c-2.8-2.8-7.6-2.8-10.4 0-2.8 2.8-2.8 7.6 0 10.4l20.8 20.8-22 22-20.8-20.8c-2.8-2.8-7.6-2.8-10.4 0s-2.8 7.6 0 10.4l20.8 20.8-22 22-20.8-20.8c-2.8-2.8-7.6-2.8-10.4 0s-2.8 7.6 0 10.4l20.8 20.8-13.2 13.2c-2.8 2.8-2.8 7.6 0 10.4 1.6 1.6 3.2 2 5.2 2s3.6-.8 5.2-2l13.2-13.2 20.8 20.8c1.6 1.6 3.2 2 5.2 2s3.6-.8 5.2-2c2.8-2.8 2.8-7.6 0-10.4l-20.8-21.2 22-22 20.8 20.8c1.6 1.6 3.2 2 5.2 2s3.6-.8 5.2-2c2.8-2.8 2.8-7.6 0-10.4l-20.8-20.8 22-22 20.8 20.8c1.6 1.6 3.2 2 5.2 2s3.6-.8 5.2-2c2.8-2.8 2.8-7.6 0-10.4zM169.103 47.6c-1.2-4-5.2-6-9.2-4.8-3.2 1.2-80.8 25.6-110.4 98-1.6 4 0 8.4 4 9.6.8.4 2 .4 2.8.4 2.8 0 5.6-1.6 6.8-4.4 27.2-66 100.4-89.6 101.2-89.6 4-1.2 6-5.2 4.8-9.2z"/>\n\t\t</svg>\n\t\t',flags:'\n\t\t<svg style="max-height:18px" width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="gray">\n\t\t<path d="M472.928 34.72c-4.384-2.944-9.984-3.52-14.912-1.568-1.088.448-106.528 42.176-195.168.384C186.752-2.4 102.944 14.4 64 25.76V16c0-8.832-7.168-16-16-16S32 7.168 32 16v480c0 8.832 7.168 16 16 16s16-7.168 16-16V315.296c28.352-9.248 112.384-31.232 185.184 3.168 34.592 16.352 70.784 21.792 103.648 21.792 63.2 0 114.016-20.128 117.184-21.408 6.016-2.464 9.984-8.32 9.984-14.848V48c0-5.312-2.656-10.272-7.072-13.28zM448 292.672c-28.512 9.248-112.512 31.136-185.184-3.168C186.752 253.6 102.944 270.4 64 281.76V59.328c28.352-9.248 112.384-31.232 185.184 3.168 76 35.872 159.872 19.104 198.816 7.712v222.464z"/>\n\t\t</svg>\n\t\t',foods:'\n\t\t<svg style="max-height:18px" width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" fill="gray">\n\t\t<path d="M413.949 155.583a10.153 10.153 0 0 0-3.24-2.16c-.61-.25-1.24-.44-1.87-.57-3.25-.66-6.701.41-9.03 2.73a10.093 10.093 0 0 0-2.93 7.07 10.098 10.098 0 0 0 1.69 5.56c.36.54.779 1.05 1.24 1.52 1.86 1.86 4.44 2.93 7.07 2.93.65 0 1.31-.07 1.96-.2.63-.13 1.26-.32 1.87-.57a10.146 10.146 0 0 0 3.24-2.16c.47-.47.88-.98 1.25-1.52a10.098 10.098 0 0 0 1.49-3.6 10.038 10.038 0 0 0-2.74-9.03zM115.289 385.873c-.12-.64-.32-1.27-.57-1.87-.25-.6-.55-1.18-.91-1.73-.37-.54-.79-1.06-1.25-1.52a9.57 9.57 0 0 0-1.52-1.24c-.54-.36-1.12-.67-1.72-.92-.61-.25-1.24-.44-1.88-.57a9.847 9.847 0 0 0-3.9 0c-.64.13-1.27.32-1.87.57-.61.25-1.19.56-1.73.92-.55.36-1.06.78-1.52 1.24-.46.46-.88.98-1.24 1.52-.36.55-.67 1.13-.92 1.73-.25.6-.45 1.23-.57 1.87-.13.651-.2 1.3-.2 1.96 0 .65.07 1.3.2 1.95.12.64.32 1.27.57 1.87.25.6.56 1.18.92 1.73.36.54.78 1.06 1.24 1.52.46.46.97.88 1.52 1.24.54.36 1.12.67 1.73.92.6.25 1.23.44 1.87.57s1.3.2 1.95.2c.65 0 1.31-.07 1.95-.2.64-.13 1.27-.32 1.88-.57.6-.25 1.18-.56 1.72-.92.55-.36 1.059-.78 1.52-1.24.46-.46.88-.98 1.25-1.52.36-.55.66-1.13.91-1.73.25-.6.45-1.23.57-1.87.13-.65.2-1.3.2-1.95 0-.66-.07-1.31-.2-1.96z"/>\n\t\t<path d="M511.999 222.726c0-14.215-9.228-26.315-22.007-30.624-1.628-74.155-62.456-133.978-136.994-133.978H159.002c-74.538 0-135.366 59.823-136.994 133.978C9.228 196.411 0 208.51 0 222.726a32.076 32.076 0 0 0 3.847 15.203 44.931 44.931 0 0 0-.795 8.427v.708c0 14.06 6.519 26.625 16.693 34.833-10.178 8.275-16.693 20.891-16.693 35.001 0 15.114 7.475 28.515 18.921 36.702v26.668c0 40.588 33.021 73.608 73.608 73.608h320.836c40.588 0 73.608-33.021 73.608-73.608V353.6c11.446-8.186 18.921-21.587 18.921-36.702 0-13.852-6.354-26.385-16.361-34.702 9.983-8.212 16.361-20.656 16.361-34.562v-.708c0-2.985-.294-5.944-.877-8.845a32.082 32.082 0 0 0 3.93-15.355zM44.033 173.229h322.441c5.523 0 10-4.477 10-10s-4.477-10-10-10H49.737c16.896-43.883 59.503-75.106 109.265-75.106h193.996c62.942 0 114.438 49.953 116.934 112.295H42.068c.234-5.848.9-11.588 1.965-17.189zM23.052 316.896c0-13.837 11.257-25.094 25.094-25.094h117.298l55.346 50.188H48.146c-13.837 0-25.094-11.256-25.094-25.094zm.976-62.945c.422.111.847.215 1.275.309 7.421 1.634 14.68 8.002 22.365 14.744a576.29 576.29 0 0 0 3.206 2.799h-3.081c-11.253-.001-20.774-7.551-23.765-17.852zm308.727 89.752l57.233-51.899 49.904.57-81.871 74.24-25.266-22.911zm7.861 34.126H295.12l17.467-15.839h10.563l17.466 15.839zm19.599-86.027l-82.499 74.811-82.499-74.811h164.998zm-59.529-20c.849-.842 1.677-1.675 2.49-2.493 9.531-9.587 17.059-17.16 32.89-17.16 15.832 0 23.359 7.573 32.89 17.162.812.817 1.64 1.65 2.489 2.491h-70.759zm-160.13 0a485.82 485.82 0 0 0 2.489-2.492c9.531-9.588 17.059-17.161 32.89-17.161 15.83 0 23.358 7.573 32.888 17.16.813.818 1.641 1.651 2.49 2.493h-70.757zm275.862 162.073H95.582c-29.56 0-53.608-24.049-53.608-53.608v-18.275h200.872l17.467 15.839H145.897c-5.523 0-10 4.477-10 10s4.477 10 10 10H467.07c-7.288 20.958-27.242 36.044-50.652 36.044zm53.608-56.046h-94.6l17.467-15.839h77.133v15.839zm-6.174-35.837h-48.906l54.624-49.533c11.135 2.604 19.376 12.665 19.376 24.439 0 13.836-11.257 25.094-25.094 25.094zm-2.728-70.19l.262-.227.101-.087.342-.298c.848-.738 1.682-1.469 2.501-2.187 4.105-3.601 8.089-7.095 12.04-9.819 3.446-2.375 6.868-4.164 10.326-4.925l.359-.081.04-.01.317-.076.065-.016a22.897 22.897 0 0 0 .42-.107l.196-.052a.374.374 0 0 0 .048-.012c-2.433 9.276-10.129 16.443-19.691 18.102a9.984 9.984 0 0 0-2.016-.205h-5.31zm21.271-37.073a40.746 40.746 0 0 0-4.536 1.281c-10.109 3.489-18.327 10.602-26.283 17.58l-.434.381c-9.178 8.052-17.923 15.723-29.033 17.834h-13.146c-11.249-1.93-17.833-8.552-25.823-16.591-10.213-10.275-22.923-23.062-47.074-23.062-24.15 0-36.86 12.786-47.074 23.06-7.992 8.04-14.576 14.663-25.829 16.593h-14.327c-11.253-1.93-17.837-8.553-25.829-16.593-10.213-10.274-22.923-23.06-47.072-23.06-24.151 0-36.861 12.787-47.074 23.062-7.991 8.039-14.574 14.661-25.824 16.591h-7.065c-14.134 0-24.325-8.939-35.113-18.404-9.248-8.112-18.81-16.501-31.252-19.241a12.237 12.237 0 0 1-7.025-4.453 10.027 10.027 0 0 0-1.153-1.252 12.234 12.234 0 0 1-1.428-5.727c-.001-6.788 5.52-12.309 12.307-12.309h447.384c6.787 0 12.308 5.521 12.308 12.308 0 5.729-4.039 10.776-9.605 12.002z"/>\n\t\t</svg>\n\t\t',frequenty:'\n\t\t<svg style="max-height:18px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 219.15 219.15" width="24" height="24" fill="gray">\n\t\t<path d="M109.575 0C49.156 0 .001 49.155.001 109.574c0 60.42 49.154 109.576 109.573 109.576 60.42 0 109.574-49.156 109.574-109.576C219.149 49.155 169.995 0 109.575 0zm0 204.15c-52.148 0-94.573-42.427-94.573-94.576C15.001 57.426 57.427 15 109.575 15c52.148 0 94.574 42.426 94.574 94.574 0 52.15-42.426 94.576-94.574 94.576z"/>\n\t\t<path d="M166.112 108.111h-52.051V51.249a7.5 7.5 0 0 0-15 0v64.362a7.5 7.5 0 0 0 7.5 7.5h59.551a7.5 7.5 0 0 0 0-15z"/>\n\t\t</svg>\n\t\t',nature:'\n\t\t<svg style="max-height:18px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="24" height="24" fill="gray">\n\t\t<path d="M490.815 3.784C480.082 5.7 227.049 51.632 148.477 130.203c-39.153 39.153-64.259 87.884-70.694 137.218-5.881 45.081 4.347 85.929 28.878 116.708L.001 490.789 21.212 512l106.657-106.657c33.094 26.378 75.092 34.302 116.711 28.874 49.334-6.435 98.065-31.541 137.218-70.695C460.368 284.951 506.3 31.918 508.216 21.185L511.999 0l-21.184 3.784zm-43.303 39.493L309.407 181.383l-7.544-98.076c46.386-15.873 97.819-29.415 145.649-40.03zm-174.919 50.64l8.877 115.402-78.119 78.119-11.816-153.606c19.947-13.468 47.183-26.875 81.058-39.915zm-109.281 64.119l12.103 157.338-47.36 47.36c-39.246-52.892-24.821-139.885 35.257-204.698zm57.113 247.849c-26.548-.001-51.267-7.176-71.161-21.938l47.363-47.363 157.32 12.102c-40.432 37.475-89.488 57.201-133.522 57.199zm157.743-85.421l-153.605-11.816 78.118-78.118 115.403 8.877c-13.04 33.876-26.448 61.111-39.916 81.057zm50.526-110.326l-98.076-7.544L468.725 64.485c-10.589 47.717-24.147 99.232-40.031 145.653z"/>\n\t\t</svg>\n\t\t',objects:'\n\t\t<svg style="max-height:18px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 792 792" fill="gray">\n\t\t<path d="M425.512 741.214H365.58c-14.183 0-25.164 11.439-25.164 25.622S351.397 792 365.58 792h59.932c15.101 0 26.54-10.981 26.54-25.164s-11.44-25.622-26.54-25.622zM472.638 671.209H319.821c-14.183 0-26.081 10.98-26.081 25.163s11.898 25.164 26.081 25.164h152.817c14.183 0 25.164-10.981 25.164-25.164s-10.982-25.163-25.164-25.163zM639.188 138.634c-25.164-42.548-59.181-76.135-102.49-101.113C493.526 12.621 446.566 0 395.771 0 320.28 0 247.19 31.684 197.205 81.445c-49.761 49.527-81.904 121.24-81.904 196.282 0 33.861 7.779 68.629 22.879 103.866 15.1 35.228 38.565 78.614 70.005 130.396 7.448 12.269 15.764 31.205 25.623 56.271 12.104 30.757 22.87 51.713 31.566 63.602 5.027 6.872 11.899 10.063 20.596 10.063h228.766c9.605 0 16.359-4.188 21.504-11.898 6.754-10.132 13.987-27.516 22.42-51.693 8.951-25.691 16.838-43.982 23.329-55.364 30.571-53.587 54.446-99.747 70.464-137.717 16.018-37.979 24.246-74.124 24.246-107.526 0-49.878-12.347-96.545-37.511-139.093zm-35.696 232.437c-15.012 34.348-36.398 76.974-65.427 126.736-9.41 16.125-18.458 37.003-26.989 63.592-3.367 10.474-7.32 20.596-11.439 30.2H300.153c-6.862-11.439-12.26-25.837-18.761-42.089-12.718-31.801-23.338-52.621-30.2-64.061-28.824-48.043-49.868-87.39-64.051-118.957s-20.537-60.859-21.044-88.766c-2.235-121.718 106.13-228.991 229.674-226.941 41.631.693 80.527 10.063 115.765 30.659 35.227 20.586 63.134 48.043 83.729 82.812 20.586 34.768 31.108 72.748 31.108 113.47-.001 27.449-7.692 58.596-22.881 93.345z"/>\n\t\t</svg>\n\t\t',peoples:'\n\t\t<svg style="max-height:18px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 106.059 106.059" fill="gray">\n\t\t<path d="M90.544 90.542c20.687-20.684 20.685-54.341.002-75.024-20.688-20.689-54.347-20.689-75.031-.006-20.688 20.687-20.686 54.346.002 75.034 20.682 20.684 54.341 20.684 75.027-.004zM21.302 21.3c17.494-17.493 45.959-17.495 63.457.002 17.494 17.494 17.492 45.963-.002 63.455-17.494 17.494-45.96 17.496-63.455.003-17.498-17.498-17.496-45.966 0-63.46zM27 69.865s-2.958-11.438 6.705-8.874c0 0 17.144 9.295 38.651 0 9.662-2.563 6.705 8.874 6.705 8.874C73.539 86.824 53.03 85.444 53.03 85.444S32.521 86.824 27 69.865zm6.24-31.194a6.202 6.202 0 1 1 12.399.001 6.202 6.202 0 0 1-12.399-.001zm28.117 0a6.202 6.202 0 1 1 12.403.001 6.202 6.202 0 0 1-12.403-.001z"/>\n\t\t</svg>\n\t\t',places:'\n\t\t<svg style="max-height:18px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 611.999 611.998" fill="gray">\n\t\t<path d="M596.583 15.454C586.226 5.224 573.354.523 558.423.523c-15.597 0-31.901 4.906-49.452 14.599-17.296 9.551-32.851 20.574-46.458 32.524h-.665c-2.655 2.322-10.953 10.287-25.219 24.553-14.272 14.272-26.217 26.223-35.845 36.51L112.401 26.406c-6.896-1.968-12.928.014-17.593 4.645L46.687 78.839c-4.326 4.297-5.805 9.268-4.977 15.597.829 6.287 3.979 10.627 9.629 13.607L280.32 228.839 161.514 347.978l-95.91 3.32c-4.645.164-8.637 1.643-12.276 5.311L5.872 404.397c-4.312 4.34-6.641 9.289-5.643 16.262 1.657 6.967 5.31 11.611 11.618 13.602l117.142 48.787 48.787 117.148c2.421 5.812 6.634 9.621 13.607 11.279h3.313c4.977 0 9.296-1.658 12.942-5.311l47.456-47.457c3.653-3.645 5.494-7.965 5.643-12.275l3.32-95.91 118.807-118.807 121.128 228.99c2.988 5.643 7.32 8.793 13.607 9.621 6.329.836 11.271-1.316 15.597-5.643l47.456-47.457c4.978-4.977 6.945-10.697 4.978-17.586l-82.296-288.389 59.732-59.739c10.287-10.287 21.699-24.149 33.183-45.134 5.777-10.542 10.032-20.886 12.942-31.194 5.722-20.218 3.258-44.07-12.608-59.73zm-59.4 110.176l-67.039 67.372c-5.628 5.657-6.811 11.122-4.977 17.586l81.637 288.388-22.563 22.238L403.438 292.89c-2.98-5.643-7.299-8.963-12.941-9.621-6.301-1.331-11.611.325-16.263 4.977l-141.37 141.37c-2.987 2.986-4.644 6.973-5.643 11.949l-3.32 95.904-22.896 23.236-41.48-98.566c-1.331-4.645-4.553-8.184-9.629-10.287L51.338 411.03l23.229-22.895 95.578-3.654c5.643-.99 9.622-2.654 12.276-5.309l141.37-141.371c4.651-4.645 6.308-9.954 4.984-16.262-.666-5.643-3.986-9.954-9.629-12.942L90.829 87.47l22.231-22.238 288.389 81.637c6.464 1.833 11.951.666 17.587-4.977l28.545-28.539 26.217-25.884 11.278-11.285 1.331-.666c27.873-23.895 55.088-38.16 72.016-38.16 5.969 0 9.954 1.324 11.611 3.979 18.917 18.585-21.099 72.484-32.851 84.293z"/>\n\t\t</svg>\n\t\t',symbols:'\n\t\t<svg style="max-height:18px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 511.626 511.626" fill="gray">\n\t\t<path d="M475.366 71.949c-24.175-23.606-57.575-35.404-100.215-35.404-11.8 0-23.843 2.046-36.117 6.136-12.279 4.093-23.702 9.615-34.256 16.562-10.568 6.945-19.65 13.467-27.269 19.556a263.828 263.828 0 0 0-21.696 19.414 264.184 264.184 0 0 0-21.698-19.414c-7.616-6.089-16.702-12.607-27.268-19.556-10.564-6.95-21.985-12.468-34.261-16.562-12.275-4.089-24.316-6.136-36.116-6.136-42.637 0-76.039 11.801-100.211 35.404C12.087 95.55 0 128.286 0 170.16c0 12.753 2.24 25.891 6.711 39.398 4.471 13.514 9.566 25.031 15.275 34.546 5.708 9.514 12.181 18.792 19.414 27.834 7.233 9.041 12.519 15.272 15.846 18.698 3.33 3.426 5.948 5.903 7.851 7.427L243.25 469.938c3.427 3.426 7.614 5.144 12.562 5.144s9.138-1.718 12.563-5.144l177.87-171.31c43.588-43.58 65.38-86.406 65.38-128.472.001-41.877-12.085-74.61-36.259-98.207zm-53.961 199.846L255.813 431.391 89.938 271.507C54.344 235.922 36.55 202.133 36.55 170.156c0-15.415 2.046-29.026 6.136-40.824 4.093-11.8 9.327-21.177 15.703-28.124 6.377-6.949 14.132-12.607 23.268-16.988 9.141-4.377 18.086-7.328 26.84-8.85 8.754-1.52 18.079-2.281 27.978-2.281 9.896 0 20.557 2.424 31.977 7.279 11.418 4.853 21.934 10.944 31.545 18.271 9.613 7.332 17.845 14.183 24.7 20.557 6.851 6.38 12.559 12.229 17.128 17.559 3.424 4.189 8.091 6.283 13.989 6.283 5.9 0 10.562-2.094 13.99-6.283 4.568-5.33 10.28-11.182 17.131-17.559 6.852-6.374 15.085-13.222 24.694-20.557 9.613-7.327 20.129-13.418 31.553-18.271 11.416-4.854 22.08-7.279 31.977-7.279s19.219.761 27.977 2.281c8.757 1.521 17.702 4.473 26.84 8.85 9.137 4.38 16.892 10.042 23.267 16.988 6.376 6.947 11.612 16.324 15.705 28.124 4.086 11.798 6.132 25.409 6.132 40.824-.002 31.977-17.89 65.86-53.675 101.639z"/>\n\t\t</svg>\n\t\t'},active:1}},methods:{onSelect:function(e){this.active=e;var t=this.categories[e];this.$emit("select",t)}},template:'<div class="emoji-picker-categories"> <div :class="[\'category\', { active: index=== active }]" v-for="(categorie, index) in categories" :key="index" @click="onSelect(index)" v-html="icons[categorie.icon]"> </div> </div>'}),window.$app.defineComponent("component","vue-component-emoji-picker-list",{props:{data:{type:Object,required:!0},category:{type:String}},methods:{onSelect:function(e){this.$emit("select",e)}},watch:{data:function(){this.$refs["container-emoji"].scrollTop=0},category:function(e){var t;this.continuousList&&(t=this.$refs[e][0].offsetTop-80,this.$refs["container-emoji"].scrollTop=t)}},template:'<div class="emoji-picker-list"> <div ref="container-emoji" class="container-emoji"> <div class="grid-emojis"> <span class="emoji" v-html="emoji" v-for="(emoji, index) in data[this.category]" :key="index" @click="onSelect(emoji)"/> </div> </div> </div>'}),window.$app.defineComponent("component","vue-component-emoji-picker",{props:{value:Object,emojisByRow:{type:Number,default:5},continuousList:{type:Boolean,default:function(){return!1}}},data:function(){return{mapEmojis:{},category:"Peoples",filterEmoji:"",show:!1,inited:!1,editor:null}},computed:{emojis:function(){return this.mapEmojis}},watch:{show:function(e){this.inited||this.editor[0].focus(),this.inited|=e}},created:function(){this.mapperData(),$mx(document.body).on("click",this.onMouseDown)},mounted:function(){this.editor=$mx(this.$refs.root).find("textarea,input")},methods:{onMouseDown:function(e){e.target.closest(".emoji-picker-container")&&-1==["TEXTAREA","INPUT"].indexOf(e.target.tagName)||(this.show=!1)},onChangeCategory:function(e){this.category=e.name,this.$emit("changeCategory",this.category)},onSelectEmoji:function(e){this.updateFrequenty(e);var t,i,s,n=this.editor[0];document.selection?(n.focus(),document.selection.createRange().text=e,n.focus()):n.selectionStart||"0"==n.selectionStart?(t=n.selectionStart,i=n.selectionEnd,s=n.scrollTop,n.value=n.value.substring(0,t)+e+n.value.substring(i,n.value.length),n.focus(),n.selectionStart=t+e.length,n.selectionEnd=t+e.length,n.scrollTop=s):(n.value+=e,n.focus()),this.$emit("input",n.value)},updateFrequenty:function(e){var t=this.mapEmojis.Frequenty,i=t.indexOf(e);-1!=i&&t.splice(i,1),t.unshift(e),this.mapEmojis.Frequenty=t=t.slice(0,40),Storage.set("emoji.frequenty",t)},mapperData:function(){var e={Frequenty:Storage.get("emoji.frequenty",[]),Peoples:["😀","😃","😄","😁","😆","😅","😂","🤣","😌","😊","😇","🙂","🙃","😉","😌","😍","😘","😗","😙","😚","😋","😜","😝","😛","🤑","🤗","🤓","😎","🤡","🤠","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","😤","😠","😡","😶","😐","😑","😯","😦","😧","😮","😲","😵","😳","😱","😨","😰","😢","😥","🤤","😭","😓","😪","😴","🙄","🤔","🤥","😬","🤐","🤢","🤧","😷","🤒","🤕","😈","👿","👹","👺","💩","👻","💀","☠️","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","👐","🙌","👏","🙏","🤝","👍","👎","👊","✊","🤛","🤜","🤞","✌️","🤘","👌","👈","👉","👆","👇","☝️","✋","🤚","🖐","🖖","👋","🤙","💪","🖕","✍️","🤳","💅","💍","💄","💋","👄","👅","👂","👃","👣","👁","👀","🗣","👤","👥","👶","👦","👧","👨","👩","👱‍♀","👱","👴","👵","👲","👳‍♀","👳","👮‍♀","👮","👷‍♀","👷","💂‍♀","💂","👩‍⚕","👨‍⚕","👩‍🌾","👨‍🌾","👩‍🍳","👨‍🍳","👩‍🎓","👨‍🎓","👩‍🎤","👨‍🎤","👩‍🏫","👨‍🏫","👩‍🏭","👨‍🏭","👩‍💻","👨‍💻","👩‍💼","👨‍💼","👩‍🔧","👨‍🔧","👩‍🔬","👨‍🔬","👩‍🎨","👨‍🎨","👩‍🚒","👨‍🚒","👩‍🚀","👨‍🚀","🤶","🎅","👸","🤴","👰","🤵","👼","🤰","🙇‍♀","🙇","💁","💁‍♂","🙅","🙅‍♂","🙆","🙆‍♂","🙋","🙋‍♂","🤦‍♀","🤦‍♂","🤷‍♀","🤷‍♂","🙎","🙎‍♂","🙍","🙍‍♂","💇","💇‍♂","💆","💆‍♂","🕴","💃","🕺","👯","👯‍♂","🚶‍♀","🚶","🏃‍♀","🏃","👫","👭","👬","💑","👩‍❤️‍👩","👨‍❤️‍👨","💏","👩‍❤️‍💋‍👩","👨‍❤️‍💋‍👨","👪","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧‍👧","👨‍👨‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧‍👧","👩‍👦","👩‍👧","👩‍👧‍👦","👩‍👦‍👦","👩‍👧‍👧","👨‍👦","👨‍👧","👨‍👧‍👦","👨‍👦‍👦","👨‍👧‍👧","👚","👕","👖","👔","👗","👙","👘","👠","👡","👢","👞","👟","👒","🎩","🎓","👑","⛑","🎒","👝","👛","👜","💼","👓","🕶","🌂","☂️"],Nature:["🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦅","🦉","🦇","🐺","🐗","🐴","🦄","🐝","🐛","🦋","🐌","🐚","🐞","🐜","🕷","🕸","🐢","🐍","🦎","🦂","🦀","🦑","🐙","🦐","🐠","🐟","🐡","🐬","🦈","🐳","🐋","🐊","🐆","🐅","🐃","🐂","🐄","🦌","🐪","🐫","🐘","🦏","🦍","🐎","🐖","🐐","🐏","🐑","🐕","🐩","🐈","🐓","🦃","🕊","🐇","🐁","🐀","🐿","🐾","🐉","🐲","🌵","🎄","🌲","🌳","🌴","🌱","🌿","☘️","🍀","🎍","🎋","🍃","🍂","🍁","🍄","🌾","💐","🌷","🌹","🥀","🌻","🌼","🌸","🌺","🌎","🌍","🌏","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌚","🌝","🌞","🌛","🌜","🌙","💫","⭐️","🌟","✨","⚡️","🔥","💥","☄","☀️","🌤","⛅️","🌥","🌦","🌈","☁️","🌧","⛈","🌩","🌨","☃️","⛄️","❄️","🌬","💨","🌪","🌫","🌊","💧","💦","☔️"],Foods:["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🍍","🥝","🥑","🍅","🍆","🥒","🥕","🌽","🌶","🥔","🍠","🌰","🥜","🍯","🥐","🍞","🥖","🧀","🥚","🍳","🥓","🥞","🍤","🍗","🍖","🍕","🌭","🍔","🍟","🥙","🌮","🌯","🥗","🥘","🍝","🍜","🍲","🍥","🍣","🍱","🍛","🍚","🍙","🍘","🍢","🍡","🍧","🍨","🍦","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🍩","🍪","🥛","🍼","☕️","🍵","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🍾","🥄","🍴","🍽"],Activity:["⚽️","🏀","🏈","⚾️","🎾","🏐","🏉","🎱","🏓","🏸","🥅","🏒","🏑","🏏","⛳️","🏹","🎣","🥊","🥋","⛸","🎿","⛷","🏂","🏋️‍♀️","🏋","🤺","🤼‍♀","🤼‍♂","🤸‍♀","🤸‍♂","⛹️‍♀️","⛹","🤾‍♀","🤾‍♂","🏌️‍♀️","🏌","🏄‍♀","🏄","🏊‍♀","🏊","🤽‍♀","🤽‍♂","🚣‍♀","🚣","🏇","🚴‍♀","🚴","🚵‍♀","🚵","🎽","🏅","🎖","🥇","🥈","🥉","🏆","🏵","🎗","🎫","🎟","🎪","🤹‍♀","🤹‍♂","🎭","🎨","🎬","🎤","🎧","🎼","🎹","🥁","🎷","🎺","🎸","🎻","🎲","🎯","🎳","🎮","🎰"],Places:["🚗","🚕","🚙","🚌","🚎","🏎","🚓","🚑","🚒","🚐","🚚","🚛","🚜","🛴","🚲","🛵","🏍","🚨","🚔","🚍","🚘","🚖","🚡","🚠","🚟","🚃","🚋","🚞","🚝","🚄","🚅","🚈","🚂","🚆","🚇","🚊","🚉","🚁","🛩","✈️","🛫","🛬","🚀","🛰","💺","🛶","⛵️","🛥","🚤","🛳","⛴","🚢","⚓️","🚧","⛽️","🚏","🚦","🚥","🗺","🗿","🗽","⛲️","🗼","🏰","🏯","🏟","🎡","🎢","🎠","⛱","🏖","🏝","⛰","🏔","🗻","🌋","🏜","🏕","⛺️","🛤","🛣","🏗","🏭","🏠","🏡","🏘","🏚","🏢","🏬","🏣","🏤","🏥","🏦","🏨","🏪","🏫","🏩","💒","🏛","⛪️","🕌","🕍","🕋","⛩","🗾","🎑","🏞","🌅","🌄","🌠","🎇","🎆","🌇","🌆","🏙","🌃","🌌","🌉","🌁"],Objects:["⌚️","📱","📲","💻","⌨️","🖥","🖨","🖱","🖲","🕹","🗜","💽","💾","💿","📀","📼","📷","📸","📹","🎥","📽","🎞","📞","☎️","📟","📠","📺","📻","🎙","🎚","🎛","⏱","⏲","⏰","🕰","⌛️","⏳","📡","🔋","🔌","💡","🔦","🕯","🗑","🛢","💸","💵","💴","💶","💷","💰","💳","💎","⚖️","🔧","🔨","⚒","🛠","⛏","🔩","⚙️","⛓","🔫","💣","🔪","🗡","⚔️","🛡","🚬","⚰️","⚱️","🏺","🔮","📿","💈","⚗️","🔭","🔬","🕳","💊","💉","🌡","🚽","🚰","🚿","🛁","🛀","🛎","🔑","🗝","🚪","🛋","🛏","🛌","🖼","🛍","🛒","🎁","🎈","🎏","🎀","🎊","🎉","🎎","🏮","🎐","✉️","📩","📨","📧","💌","📥","📤","📦","🏷","📪","📫","📬","📭","📮","📯","📜","📃","📄","📑","📊","📈","📉","🗒","🗓","📆","📅","📇","🗃","🗳","🗄","📋","📁","📂","🗂","🗞","📰","📓","📔","📒","📕","📗","📘","📙","📚","📖","🔖","🔗","📎","🖇","📐","📏","📌","📍","✂️","🖊","🖋","✒️","🖌","🖍","📝","✏️","🔍","🔎","🔏","🔐","🔒","🔓"],Symbols:["❤️","💛","💚","💙","💜","🖤","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈️","♉️","♊️","♋️","♌️","♍️","♎️","♏️","♐️","♑️","♒️","♓️","🆔","⚛️","🉑","☢️","☣️","📴","📳","🈶","🈚️","🈸","🈺","🈷️","✴️","🆚","💮","🉐","㊙️","㊗️","🈴","🈵","🈹","🈲","🅰️","🅱️","🆎","🆑","🅾️","🆘","❌","⭕️","🛑","⛔️","📛","🚫","💯","💢","♨️","🚷","🚯","🚳","🚱","🔞","📵","🚭","❗️","❕","❓","❔","‼️","⁉️","🔅","🔆","〽️","⚠️","🚸","🔱","⚜️","🔰","♻️","✅","🈯️","💹","❇️","✳️","❎","🌐","💠","Ⓜ️","🌀","💤","🏧","🚾","♿️","🅿️","🈳","🈂️","🛂","🛃","🛄","🛅","🚹","🚺","🚼","🚻","🚮","🎦","📶","🈁","🔣","ℹ️","🔤","🔡","🔠","🆖","🆗","🆙","🆒","🆕","🆓","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","🔢","#️⃣","*️⃣","▶️","⏸","⏯","⏹","⏺","⏭","⏮","⏩","⏪","⏫","⏬","◀️","🔼","🔽","➡️","⬅️","⬆️","⬇️","↗️","↘️","↙️","↖️","↕️","↔️","↪️","↩️","⤴️","⤵️","🔀","🔁","🔂","🔄","🔃","🎵","🎶","➕","➖","➗","✖️","💲","💱","™️","©️","®️","〰️","➰","➿","🔚","🔙","🔛","🔝","🔜","✔️","☑️","🔘","⚪️","⚫️","🔴","🔵","🔺","🔻","🔸","🔹","🔶","🔷","🔳","🔲","▪️","▫️","◾️","◽️","◼️","◻️","⬛️","⬜️","🔈","🔇","🔉","🔊","🔔","🔕","📣","📢","👁‍🗨","💬","💭","🗯","♠️","♣️","♥️","♦️","🃏","🎴","🀄️","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧"],Flags:["🏳️","🏴","🏁","🚩","🏳️‍🌈","🇦🇫","🇦🇽","🇦🇱","🇩🇿","🇦🇸","🇦🇩","🇦🇴","🇦🇮","🇦🇶","🇦🇬","🇦🇷","🇦🇲","🇦🇼","🇦🇺","🇦🇹","🇦🇿","🇧🇸","🇧🇭","🇧🇩","🇧🇧","🇧🇾","🇧🇪","🇧🇿","🇧🇯","🇧🇲","🇧🇹","🇧🇴","🇧🇶","🇧🇦","🇧🇼","🇧🇷","🇮🇴","🇻🇬","🇧🇳","🇧🇬","🇧🇫","🇧🇮","🇨🇻","🇰🇭","🇨🇲","🇨🇦","🇮🇨","🇰🇾","🇨🇫","🇹🇩","🇨🇱","🇨🇳","🇨🇽","🇨🇨","🇨🇴","🇰🇲","🇨🇬","🇨🇩","🇨🇰","🇨🇷","🇨🇮","🇭🇷","🇨🇺","🇨🇼","🇨🇾","🇨🇿","🇩🇰","🇩🇯","🇩🇲","🇩🇴","🇪🇨","🇪🇬","🇸🇻","🇬🇶","🇪🇷","🇪🇪","🇪🇹","🇪🇺","🇫🇰","🇫🇴","🇫🇯","🇫🇮","🇫🇷","🇬🇫","🇵🇫","🇹🇫","🇬🇦","🇬🇲","🇬🇪","🇩🇪","🇬🇭","🇬🇮","🇬🇷","🇬🇱","🇬🇩","🇬🇵","🇬🇺","🇬🇹","🇬🇬","🇬🇳","🇬🇼","🇬🇾","🇭🇹","🇭🇳","🇭🇰","🇭🇺","🇮🇸","🇮🇳","🇮🇩","🇮🇷","🇮🇶","🇮🇪","🇮🇲","🇮🇱","🇮🇹","🇯🇲","🇯🇵","🎌","🇯🇪","🇯🇴","🇰🇿","🇰🇪","🇰🇮","🇽🇰","🇰🇼","🇰🇬","🇱🇦","🇱🇻","🇱🇧","🇱🇸","🇱🇷","🇱🇾","🇱🇮","🇱🇹","🇱🇺","🇲🇴","🇲🇰","🇲🇬","🇲🇼","🇲🇾","🇲🇻","🇲🇱","🇲🇹","🇲🇭","🇲🇶","🇲🇷","🇲🇺","🇾🇹","🇲🇽","🇫🇲","🇲🇩","🇲🇨","🇲🇳","🇲🇪","🇲🇸","🇲🇦","🇲🇿","🇲🇲","🇳🇦","🇳🇷","🇳🇵","🇳🇱","🇳🇨","🇳🇿","🇳🇮","🇳🇪","🇳🇬","🇳🇺","🇳🇫","🇲🇵","🇰🇵","🇳🇴","🇴🇲","🇵🇰","🇵🇼","🇵🇸","🇵🇦","🇵🇬","🇵🇾","🇵🇪","🇵🇭","🇵🇳","🇵🇱","🇵🇹","🇵🇷","🇶🇦","🇷🇪","🇷🇴","🇷🇺","🇷🇼","🇧🇱","🇸🇭","🇰🇳","🇱🇨","🇵🇲","🇻🇨","🇼🇸","🇸🇲","🇸🇹","🇸🇦","🇸🇳","🇷🇸","🇸🇨","🇸🇱","🇸🇬","🇸🇽","🇸🇰","🇸🇮","🇸🇧","🇸🇴","🇿🇦","🇬🇸","🇰🇷","🇸🇸","🇪🇸","🇱🇰","🇸🇩","🇸🇷","🇸🇿","🇸🇪","🇨🇭","🇸🇾","🇹🇼","🇹🇯","🇹🇿","🇹🇭","🇹🇱","🇹🇬","🇹🇰","🇹🇴","🇹🇹","🇹🇳","🇹🇷","🇹🇲","🇹🇨","🇹🇻","🇺🇬","🇺🇦","🇦🇪","🇬🇧","🇺🇸","🇻🇮","🇺🇾","🇺🇿","🇻🇺","🇻🇦","🇻🇪","🇻🇳","🇼🇫","🇪🇭","🇾🇪","🇿🇲","🇿🇼"]};this.mapEmojis=e}},beforeDestroy:function(){delete this.mapEmojis},template:'<div class="emoji-picker-container" ref="root"> <slot></slot> <svg viewBox="0 0 24 24" @click="show = !show" xmlns="http://www.w3.org/2000/svg" class="emoji-picker-invoker is-hidden-mobile"><path d="M0 0h24v24H0z" fill="none"></path> <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"></path></svg> <div class="emoji-picker-container-popup is-hidden-mobile" :class="{\'is-hidden\': !show}" v-if="inited"> <vue-component-emoji-picker-categories @select="onChangeCategory($event)"/> <vue-component-emoji-picker-list :data="emojis" :category="category" :filter="filterEmoji" :emojisByRow="emojisByRow" :continuousList="continuousList" @select="onSelectEmoji($event)"/> </div>'}),window.$app.defineComponent("component","vue-component-filterbox",{data:function(){return{isFilterVisible:!1,action:"",hash:"",hashEmpty:"",filteredTags:[],currentTag:"",isFetchingTags:!1}},props:{value:Object,allowTags:Object,tagsFetch:Function,isVisible:{type:Boolean,default:!0},selected:Object,disabled:Boolean,withDropdown:{type:Boolean,default:!1},withQuery:{type:Boolean,default:!0},withFilters:{type:Boolean,default:!1},withButtons:{type:Boolean,default:!1},mode:{type:String,default:"table"},showToolbar:Boolean},mounted:function(){this.hashEmpty=this.hash=this.flatten(this.value)},computed:{hasFilter:function(){return this.hashEmpty!=this.hash},placeholder:function(){return this.currentTag?this.$gettext("Значение"):this.$gettext("Поиск")},tagAllowNew:function(){return!!this.currentTag},inputIcon:function(){return this.currentTag?"equals":"search"},tagsKeys:function(){return _.map(this.value.tags,function(e){return e.split(":")[0]})}},watch:{value:{handler:_.debounce(function(){var e=this.flatten(this.value);this.currentTag||(this.$emit("input",this.value),this.$emit("filter",this.value)),this.hash=e},500),deep:!0}},methods:{flatten:function(e){var i=this;return _.map(e,function(e,t){return null===e&&(e=""),_.isObject(e)&&_.isPlainObject(e)?i.flatten(e):"query"==t?"":e.toString()}).join("|")},onDropdown:function(e){this.$emit("dropdown",e)},onAction:function(){var e=this;this.action&&(this.$emit("action",this.action),Vue.nextTick(function(){e.action=null}))},tagTyping:function(t){var i=this;this.currentTag?this.tagsFetch&&(this.isFetchingTags=!0,this.tagsFetch(this.currentTag,t,function(e){i.filteredTags=e,i.isFetchingTags=!1})):(this.filteredTags=this.allowTags.filter(function(e){return 0<=e.toString().toLowerCase().indexOf(t.toLowerCase())&&-1==i.tagsKeys.indexOf(e)}),this.filteredTags.length&&""!=t.trim()||(this.value.query=t))},tagInput:function(){return!1},tagBeforeAdding:function(e){var t=this;return this.currentTag?(this.currentTag="",this.value.tags.push(this.value.tags.pop()+" : "+e),!(this.filteredTags=[])):0<=this.allowTags.indexOf(e)&&(this.currentTag=e,this.filteredTags=[],this.$nextTick(function(){t.value.query=""}),!0)},tagRemove:function(e){e.split(":")[0]==this.currentTag&&(this.currentTag="",this.filteredTags=[])}},template:'<div class="table-toolbar-container" :class="{\'is-mode-standalone\': mode== \'standalone\', \'is-mode-table\': mode== \'table\'}"> <div class="table-toolbar container" :class="{disabled: disabled}"> <div v-if="showToolbar" class="is-action-row"> <slot name="toolbar"></slot> </div> <div v-else> <div v-if="selected && selected.length && !showToolbar"> <div class="row row-small is-action-row" v-if="isVisible || hasFilter || value"> <div class="col-md-2 col-sm-3 col-xs"> <vue-component-dropdown class="is-fullwidth" v-model="action" @input="onAction" button-class="button is-dark is-fullwidth" :title="\'Действие\'|gettext"> <span slot="button">{{\'Действие\'|gettext}}</span> <slot name="actions"></slot> </vue-component-dropdown> </div> <div class="col-xs has-text-grey-light" style="align-self: center" v-if="selected"> {{\'Выбрано всего\'|gettext}}: {{selected.length|number}} </div> </div> </div> <div class="row row-small is-query-row" v-if="!(selected && selected.length) && !showToolbar && (isVisible || hasFilter || value)"> <div class="col-xs" v-if="withQuery"> <b-taginput v-if="allowTags" v-model="value.tags" class="is-query" :class="{\'is-editing\': currentTag}" attached expanded autocomplete slot="trigger" role="button" :data="filteredTags" :allow-new="tagAllowNew" :icon="inputIcon" :placeholder="placeholder" @typing="tagTyping" @input="tagInput" @remove="tagRemove" :before-adding="tagBeforeAdding" :loading="isFetchingTags"></b-taginput> <b-input v-else type="search" icon="search" v-model="value.query" class="is-query" :placeholder="placeholder" expanded slot="trigger" role="button"></b-input> </div> <div class="col-xs col-shrink" v-if="withFilters"> <a class="button is-clear is-fullwidth" style="border:0" @click="isFilterVisible = !isFilterVisible"><i class="fa-filter" :class="{fas: isFilterVisible, fa: !isFilterVisible, \'has-text-grey-light\': !hasFilter, \'has-text-primary\': hasFilter}"></i></a> </div> <div class="col-xs col-shrink" v-if="withDropdown"> <vue-component-action-button @action="onDropdown" position="is-bottom-left" classname="button is-light is-fullwidth" :with-arrow="false" :with-title="false" icon="fa fa-ellipsis-h"> <i class="fa fa-ellipsis-h" slot="button"></i> <template slot="actions"> <slot name="dropdown"></slot> </template> </vue-component-action-button> </div> <div class="col-xs" :class="{\'col-shrink\': withQuery}" v-if="withButtons"> <slot name="buttons"></slot> </div> </div> </div> </div> <div class="container is-filters" v-if="isFilterVisible && (!selected || !selected.length) && !showToolbar" :class="{disabled: disabled}"> <div> <slot name="filters"></slot> </div> </div> </div>'}),window.$app.defineComponent("component","vue-component-font-chooser",{data:function(){return{fonts:_.sortBy(_.map(globalFonts,function(e,t){return{i:parseInt(t),f:e}}),"f"),globalFonts:globalFonts}},props:{value:Number,view:{type:String,default:"letter"},fullwidth:Boolean,disabled:Boolean,defaultFont:Object},watch:{value:function(e){"string"==typeof e&&(this.value=parseInt(e))}},methods:{onAction:function(e){this.value=e,this.$emit("input",this.value)},activeChange:function(e){$mx("html").toggleClass("is-dropdown-opened",e),e&&FontsFactory.loadAll()}},template:'<vue-component-dropdown v-model="value" @input="onAction" @active-change="activeChange" position="is-bottom-left" class="dropdown-fonts" :class="{\'is-fullwidth\': fullwidth}" :disabled="disabled" ref="dropdown" :title="\'Шрифт\'|gettext" :scrollable="true" button-class="button is-default is-fullwidth is-focusable"> <span :style="{\'font-family\': globalFonts[value]}" slot="button"><span v-if="view == \'letter\'">Aa</span><span v-if="view == \'name\'"><span class="is-hidden-tablet">Aa</span><span class="is-hidden-mobile">{{globalFonts[value]}}</span></span></span> <b-dropdown-item :value="v.i" v-for="v in fonts" :class="{\'is-default\': v.i == defaultFont}"> <span :style="{\'font-family\': v.f}"><span style="width:2.5rem;display: inline-block;">Aa</span><span>{{v.f}}</span></span> </b-dropdown-item> </vue-component-dropdown>'}),window.$app.defineComponent("component","vue-component-font-weight-chooser",{props:{value:{type:Number,default:1},fullwidth:Boolean,disabled:Boolean,withArrow:{type:Boolean,default:!0},font:{type:Number,default:0}},computed:{weights:function(){var i={0:{t:this.$gettext("Тонкий"),w:200},1:{t:this.$gettext("Стандартный"),w:400},2:{t:this.$gettext("Жирный"),w:700}},s={};return _.each(globalFontsBase[globalFonts[this.font]].ww,function(e){var t=500<e?2:300<e?1:0;s[t]={title:i[t].t,weight:i[t].w}}),null==s[this.value]&&(this.value=Object.keys(s)[0]),null==(s=_.values(s))[this.value]&&(this.value=1),s}},methods:{onAction:function(e){this.value=e,this.$emit("input",this.value)},activeChange:function(e){$mx("html").toggleClass("is-dropdown-opened",e)}},template:'<vue-component-dropdown v-model.number="value" @input="onAction" @active-change="activeChange" position="is-bottom-left" class="is-dropdown-font-weight" :class="{\'is-fullwidth\': fullwidth}" :disabled="disabled" button-class="button is-default is-fullwidth is-focusable" :title="\'Начертание\'|gettext" :with-arrow="false"> <i class="fas fa-font" :style="{\'font-weight\': weights[value].weight}" slot="button"></i> <b-dropdown-item :value="k" v-for="(v, k) in weights"><i class="fas fa-font" :style="{\'font-weight\': v.weight}"></i> {{v.title}}</b-dropdown-item> </vue-component-dropdown>'}),window.$app.defineComponent("component","vue-component-form-blocks",{watch:{value:function(){this.$emit("input",this.value)}},props:{value:Object,variants:Object,disabled:{type:Boolean,default:!1}},methods:{onRemove:function(e){var t=this;this.$confirm(this.$gettext("Вы уверены что хотите удалить это поле?"),"is-danger").then(function(){t.value.splice(e,1)})},openBlock:function(e){this.$set(this.value[e],"opened",!this.value[e].opened)}},template:'<sortable-list class="form-fields-item-list" lockAxis="y" v-model="value" use-drag-handle> <sortable-item v-for="(f, index) in value" class="form-fields-item" :index="index" :key="index" :item="f" :disabled="disabled"> <div class="form-fields-item" :class="{in: f.opened}"> <div class="form-fields-item-title" @click="openBlock(index)"> <div v-sortable-handle class="form-fields-item-handle"></div> <a class="is-pulled-right has-text-danger" @click.stop="onRemove(index)" :class="{disabled: disabled}"><i class="fa fa-trash-alt"></i></a> <span><span v-if="f.title">{{ f.title }}</span><span v-else>{{\'Без названия\'|gettext}}</span><sup class="required" v-if="f.required">*</sup></span> </div> <div class="form-fields-item-options"> <div class="field"> <label>{{\'Название поля\'|gettext}}</label> <b-input type="text" v-model="f.title" :disabled="disabled"></b-input> </div> <div class="field"> <label>{{\'Описание поля\'|gettext}}</label> <b-input type="text" v-model="f.text" :disabled="disabled"></b-input> </div> <b-field :label="\'Варианты\'|gettext" v-if="f.type_id == 8 || f.type_id == 9"> <b-input type="textarea" v-model="f.variants" :disabled="disabled"></b-input> </b-field> <div class="level is-mobile"> <div class="level-left"> <div class="level-item"><b-checkbox v-model="f.required" :disabled="disabled">{{\'Обязательное поле\'|gettext}}</b-checkbox></div> <div class="level-item" v-if="f.type_id == 10"><b-checkbox v-model="f.default" :disabled="disabled">{{\'Выбрано по умолчанию\'|gettext}}</b-checkbox></div> </div> <div class="level-right"> <div class="level-item has-text-grey-light">{{\'Тип\'|gettext}}: {{variants.fields_types[f.type_id]}}</div> </div> </div> </div> </div> </sortable-item> </sortable-list>'}),window.$app.defineComponent("component","vue-component-form-options-editor",{props:{values:Object,variants:Object,errors:{type:Object,default:{}},disabled:Boolean},data:function(){return{form_type:{text:this.$gettext("Показать сообщение"),link:this.$gettext("Открыть сайт"),page:this.$gettext("Открыть страницу")}}},template:'<div v-if="values"> <b-field :label="\'Действие после заполнения формы\'|gettext" class="has-mb-1 has-mt-2-mobile"> <b-select v-model="values.form_type" :disabled="disabled" class="is-hidden-mobile" expanded> <option v-for="(v, k) in form_type" :value="k">{{v}}</option> </b-select> <vue-component-dropdown position="is-bottom-left is-fullwidth" v-model="values.form_type" :disabled="disabled" :title="\'Действие\'|gettext" class="is-hidden-tablet" button-class="button is-default is-focusable is-fullwidth"> <span slot="button">{{form_type[values.form_type]}}</span> <b-dropdown-item v-for="(v, k) in form_type" :value="k" aria-role="menuitem">{{v}}</b-dropdown-item> </vue-component-dropdown> </b-field> <b-field v-if="values.form_type == \'link\'" :class="{\'has-error\': errors.link}" :message="errors.link"> <input type=\'text\' v-model=\'values.link\' class=\'input\' placeholder=\'http://\' autocorrect="off" autocapitalize="none" :disabled="disabled"> </b-field> <b-field v-if="values.form_type == \'page\'" :class="{\'has-error\': errors.link_page_id}" :message="errors.link_page_id"> <vue-component-page-chooser v-model="values.link_page_id" :pages="variants.link_page_id" :disabled="disabled"/> </b-field> <b-field v-if="values.form_type == \'text\'" :class="{\'has-error\': errors.form_text}" :message="errors.form_text"> <textarea v-model=\'values.form_text\' class=\'input\' style="min-height: 100px" :disabled="disabled" :placeholder="\'Спасибо за вашу заявку\'|gettext"></textarea> </b-field> </div>'}),window.$app.defineComponent("component","vue-component-help-button",{data:function(){return{helpShown:!1}},props:{icon:{type:String,default:"color"},target:Object},created:function(){window.$events.on("help:toggle",this.sidebarTggle)},destoyed:function(){window.$events.off("help:toggle",this.sidebarTggle)},methods:{sidebarTggle:function(e,t){this.helpShown=t.active},toggle:function(){this.$events.fire("help:toggle",{active:!this.helpShown,target:this.target})}},template:'<span v-if="$auth.hasFeature(\'help\') && (i18n.locale == \'ru\')" @click="toggle"> <i class="fa fa-info-circle help-icon" :class="{in: helpShown}" v-if="icon == \'simple\'"></i> <svg v-else class="help-icon" :class="{in: helpShown}" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="m256 0c-141.87 0-256 114.13-256 256s114.13 256 256 256 256-114.13 256-256-114.13-256-256-256zm0 388.27c-72.533 0-132.27-58.667-132.27-132.27 0-72.533 58.667-132.27 132.27-132.27s132.27 59.734 132.27 132.27-59.734 132.27-132.27 132.27z" fill="#F3705A"/><g fill="#E8EAE9"><path d="M256,123.733c18.133,0,35.2,3.2,50.133,9.6l35.2-118.4C314.667,5.333,285.867,0,256,0 s-58.667,5.333-85.333,14.933l35.2,119.467C220.8,128,237.867,123.733,256,123.733z"/><path d="m256 388.27c-18.133 0-35.2-3.2-50.133-9.6l-35.2 118.4c26.666 9.6 55.466 14.933 85.333 14.933s58.667-5.333 85.333-14.933l-35.2-119.47c-14.933 6.4-32 10.667-50.133 10.667z"/><path d="m497.07 170.67-119.47 35.2c6.4 16 9.6 33.067 9.6 50.133 0 18.133-3.2 35.2-9.6 50.133l119.47 35.2c9.6-26.666 14.933-55.466 14.933-85.333s-5.333-58.667-14.933-85.333z"/><path d="M123.733,256c0-18.133,3.2-35.2,9.6-50.133l-118.4-35.2C5.333,197.333,0,226.133,0,256 s5.333,58.667,14.933,85.333l119.467-35.2C128,291.2,123.733,274.133,123.733,256z"/></g></svg> </span>'}),window.$app.defineComponent("component","vue-component-help-sidebar",{data:function(){return{active:!1,path:[],path_items:[],current_item:null,current_name:"home",isFetching:!1,isFetchingSearch:!1,breadCrumbsActive:!1,fullscreen:!1,searchResult:null,query:"",videoIndex:0,list:{home:{id:"home",list:{faq:{id:"faq",title:"Вопросы и ответы",description:"Часто задаваемые вопросы",list:[],icon:'<svg height="48" viewBox="0 0 512 512" width="48" xmlns="http://www.w3.org/2000/svg"><g><g><path d="m90.334 180.729c-53.2 19.608-90.334 64.043-90.334 115.732 0 38.032 20.102 72.143 51.916 95.325l.018-.034-18.565 43.223c-3.204 7.459 2.514 15.882 10.057 14.709 47.943-7.457 75.142-29.634 75.268-29.737 10.534 1.938 21.477 2.968 32.708 2.968 23.584 0 45.904-4.509 65.8-12.546z" fill="#ffcf4d"/><path d="m109.499 174.927c-6.584 1.58-12.981 3.529-19.164 5.808-8.101 18.974-12.526 39.405-12.526 60.702 0 77.154 57.901 143.002 139.385 168.916 7.193-2.906 14.079-6.259 20.583-10.041z" fill="#ffb629"/><path d="m440.712 366.586.025.047c-.025-.047 8.997-18.028 8.997-18.028 33.914-30.89 62.266-67.606 62.266-112.821 0-2.996-.091-5.974-.27-8.932-5.566-91.714-96.362-164.646-207.552-164.646-111.053 0-201.762 72.753-207.532 164.307-.193 3.07-.292 6.162-.292 9.272 0 95.865 111.651 162.299 207.823 164.307 15.414.322 30.437-1.414 44.897-4.074.171.14 37.507 30.582 103.317 40.818 10.354 1.611 12.214-14.621 12.214-14.621z" fill="#ff5876"/><g fill="#e6485d"><path d="m464.606 422.215c-2.729 3.79-7.172 6.134-12.214 5.35-57.699-8.975-93.509-33.481-101.576-39.48-1.14-.848-2.572-1.183-3.972-.939-13.772 2.402-28.04 3.674-42.666 3.674-111.053 0-201.757-72.753-207.527-164.307-.194 3.071-.296 6.161-.296 9.272 0 95.865 93.046 173.579 207.823 173.579 15.417 0 30.437-1.413 44.897-4.073.171.14 37.507 30.582 103.317 40.818 10.354 1.611 18.202-9.952 13.805-20.191z"/><path d="m442.821 346.549c-1.304.976-2.084 2.5-2.084 4.129v15.954c43.67-31.82 71.263-78.642 71.263-130.848 0-3.116-.103-6.212-.297-9.288-2.998 47.641-28.987 90.193-68.882 120.053z"/></g></g><g fill="#f2fdff"><path d="m373.955 291.127 7.356-26.4h37.996l7.356 26.4c3.119 9.793 17.298 5.755 14.886-4.147l-25.998-93.302c-1.929-6.924-8.055-11.575-15.242-11.575-7.188 0-13.313 4.651-15.243 11.576l-25.998 93.301c-2.404 9.951 11.807 13.903 14.887 4.147zm25.998-93.3c.042-.152.082-.212.081-.213.11-.076.443-.076.542-.008.001.001.043.057.089.22l14.335 51.447h-29.383z"/><path d="m245.26 216.773c0-19.142-15.573-34.716-34.715-34.716s-34.715 15.574-34.715 34.716v45.337c0 19.142 15.573 34.715 34.715 34.715 8.209 0 15.756-2.87 21.705-7.651l5.41 5.395c3.022 3.014 7.914 3.006 10.928-.015 3.013-3.022 3.006-7.914-.016-10.927l-6.665-6.647c2.147-4.51 3.353-9.551 3.353-14.87zm-21.539 42.073c-3.022-3.014-7.915-3.006-10.928.015-3.013 3.022-3.006 7.914.016 10.927l8.382 8.358c-3.053 2.033-6.712 3.224-10.647 3.224-10.621 0-19.261-8.641-19.261-19.261v-45.337c0-10.622 8.64-19.262 19.261-19.262s19.262 8.64 19.262 19.262v45.337c0 .886-.081 1.752-.198 2.606z"/><path d="m270.415 278.236c2 9.91 10.205 17.377 20.416 18.582 1.032.121 2.059.181 3.086.181 10.664 0 20.972-6.505 29.176-18.18l8.845 14.3c2.246 3.63 7.007 4.754 10.636 2.506 3.629-2.245 4.751-7.007 2.507-10.636l-13.464-21.767c3.869-8.125 8.542-17.387 8.596-17.494 1.923-3.809.394-8.456-3.415-10.38-3.808-1.921-8.456-.394-10.38 3.416-.142.282-2.05 4.064-4.428 8.895l-9.154-14.799c1.405-1.611 3.035-3.558 4.671-5.68 6.688-8.674 9.803-15.348 9.803-21.005 0-13.299-10.819-24.117-24.117-24.117s-24.117 10.819-24.117 24.117c0 5.656 3.115 12.331 9.803 21.005 1.242 1.611 2.478 3.116 3.617 4.455-9.151 9.542-25.542 29.449-22.081 46.601zm32.777-80.725c4.777 0 8.663 3.886 8.664 8.662-.035 2.309-3.747 8.23-8.664 14.209-4.917-5.979-8.629-11.899-8.664-14.207.001-4.777 3.887-8.664 8.664-8.664zm-1.415 46.847 12.234 19.779c-7.298 13.689-15.68 18.001-21.371 17.332-3.613-.426-6.391-2.896-7.076-6.29-1.673-8.292 7.915-21.674 16.213-30.821z"/></g></g></svg>'},videos:{id:"videos",title:"Видео инструкции",description:"Короткие видео по интерфейсу",list:[],icon:'<svg height="48" viewBox="0 0 512 512" width="48" xmlns="http://www.w3.org/2000/svg"><g><circle cx="256" cy="256" fill="#ffc265" r="256"/><path d="m256 484.129c-136.709 0-248.381-107.161-255.619-242.064-.247 4.614-.381 9.259-.381 13.935 0 141.385 114.615 256 256 256s256-114.615 256-256c0-4.676-.134-9.321-.381-13.936-7.238 134.904-118.91 242.065-255.619 242.065z" fill="#ffb541"/><circle cx="256" cy="256" fill="#ffe9c8" r="214.493"/><path d="m256 442.622c-113.778 0-206.848-88.593-214.03-200.557-.296 4.609-.463 9.252-.463 13.936 0 118.461 96.032 214.493 214.493 214.493s214.493-96.033 214.493-214.494c0-4.683-.167-9.327-.463-13.936-7.182 111.965-100.252 200.558-214.03 200.558z" fill="#ffdca7"/><path d="m215.335 354.568 134.498-85.182c9.823-6.221 9.823-20.552 0-26.773l-134.498-85.182c-10.55-6.681-24.324.898-24.324 13.386v170.364c0 12.489 13.774 20.069 24.324 13.387z" fill="#ff4755"/><path d="m349.833 250.806-134.498 85.181c-10.55 6.682-24.324-.899-24.324-13.386v18.581c0 12.488 13.774 20.068 24.324 13.386l134.498-85.182c8.04-5.092 9.489-15.613 4.367-22.677-1.136 1.567-2.585 2.968-4.367 4.097z" fill="#fc2b3a"/></g></svg>'},guides:{id:"guides",title:"Подробные инструкции",description:"Как настроить свой таплинк",list:[],icon:'<svg id="Capa_1" enable-background="new 0 0 512 512" height="48" viewBox="0 0 512 512" width="48" xmlns="http://www.w3.org/2000/svg"><g><g><path clip-rule="evenodd" d="m67.697 335.808-67.395-187.401c-.968-2.729.469-5.752 3.198-6.749 88.608-31.869 188.454-61.509 273.805-97.927 3.814-2.406 6.807-.029 8.45 4.519l105.89 272.944 28.754 79.967c.968 2.729-.44 5.781-3.169 6.75l-202.625 72.865-78.985 28.407c-2.729.998-5.751-.44-6.748-3.169z" fill="#fff" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m123.884 273.625-33.653-196.264c-.499-2.876 1.438-5.605 4.284-6.104l231.76-39.734 53.077-8.745c2.905-1.262 7.629.205 8.743 6.691l57.331 286.297 14.348 83.753c.499 2.847-1.438 5.605-4.284 6.104l-212.22 36.389-82.74 14.203c-2.846.47-5.604-1.467-6.103-4.314z" fill="#fff" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m188.815 215.755v188.693c0 3.023 2.465 5.517 5.487 5.517h87.581 129.656 18.631 76.344c3.022 0 5.487-2.494 5.487-5.517v-88.653-244.89-2.553h-55.747c-5.369 0-16.519.763-16.519-11.415l-.118-54.437h-245.316c-3.022 0-5.487 2.465-5.487 5.488v47.1 19.926 140.741z" fill="#fff" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m95.805 109.905c-31.394 10.565-62.495 21.041-92.305 31.752-2.729.998-4.166 4.02-3.198 6.749l67.395 187.402 61.175 170.205c.998 2.729 4.02 4.167 6.748 3.169l78.985-28.407 179.975-64.707z" fill="#b5c4cf" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m188.815 55.088-94.3 16.169c-2.846.499-4.783 3.228-4.284 6.104l5.575 32.544 28.079 163.72 30.543 178.275c.499 2.847 3.257 4.783 6.103 4.314l82.74-14.203 151.309-25.942 35.59-6.104h-18.631z" fill="#d7e7ec" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m512 315.795v-244.89-2.553-.851c0-1.585-.675-1.849-3.11-4.226l-60.177-57.4c-2.846-2.7-3.315-3.375-4.988-3.375h-4.108-245.316c-3.022 0-5.487 2.465-5.487 5.488v396.46c0 3.023 2.465 5.517 5.487 5.517h312.212c3.022 0 5.487-2.494 5.487-5.517z" fill="#edf3f4" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m188.815 55.088-22.093 3.786v365.853c0 3.052 2.465 5.517 5.487 5.517h87.581 52.109l82.681-14.174 35.59-6.104h-18.631-22.915-106.741-87.581c-3.022 0-5.487-2.494-5.487-5.517 0-116.445 0-232.918 0-349.361z" fill="#b5c4cf" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m123.884 273.625-28.079-163.72c-7.599 2.553-15.169 5.106-22.71 7.659l3.492 20.337 28.079 163.72 30.573 178.275c.469 2.846 3.227 4.783 6.073 4.314l82.74-14.203 39.258-6.72 118.242-42.551-1.408-2.201-68.246 11.709-68.627 11.768-82.74 14.203c-2.846.47-5.604-1.467-6.103-4.314z" fill="#9aafb7" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m512 315.795v-244.89-2.553c0-2.964-.968-2.993-3.11-5.077l-60.177-57.4c-2.846-2.7-3.315-3.375-4.988-3.375h-4.108-61.058c74.613 99.893 78.867 279.958 23.502 392.352-2.553 5.224-5.223 10.242-8.01 15.113h17.487 18.631 76.344c3.022 0 5.487-2.494 5.487-5.517z" fill="#d7e7ec" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m439.734 56.936c0 12.178 11.149 11.415 16.519 11.415h55.747v-.851c0-1.585-.675-1.849-3.11-4.226l-60.177-57.4c-2.846-2.7-3.315-3.375-4.988-3.375h-4.108z" fill="#fff" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m508.89 63.275-60.177-57.4c-2.846-2.7-3.315-3.375-4.988-3.375h-4.108l.117 54.436c0 12.178 11.149 11.415 16.519 11.415h55.747v-.851c0-1.584-.675-1.848-3.11-4.225z" fill="#b5c4cf" fill-rule="evenodd"/></g><g><path d="m462.414 122.506h-220.904c-4.267 0-7.726-3.46-7.726-7.729s3.459-7.729 7.726-7.729h220.904c4.267 0 7.726 3.46 7.726 7.729s-3.458 7.729-7.726 7.729z" fill="#9aafb7"/></g><g><path d="m462.414 177.411h-220.904c-4.267 0-7.726-3.46-7.726-7.729s3.459-7.729 7.726-7.729h220.904c4.267 0 7.726 3.46 7.726 7.729s-3.458 7.729-7.726 7.729z" fill="#9aafb7"/></g><g><path d="m462.414 232.317h-220.904c-4.267 0-7.726-3.46-7.726-7.729s3.459-7.729 7.726-7.729h220.904c4.267 0 7.726 3.46 7.726 7.729s-3.458 7.729-7.726 7.729z" fill="#9aafb7"/></g><g><path d="m462.414 287.223h-220.904c-4.267 0-7.726-3.46-7.726-7.729s3.459-7.729 7.726-7.729h220.904c4.267 0 7.726 3.46 7.726 7.729s-3.458 7.729-7.726 7.729z" fill="#9aafb7"/></g><g><path d="m462.414 342.129h-220.904c-4.267 0-7.726-3.46-7.726-7.729s3.459-7.729 7.726-7.729h220.904c4.267 0 7.726 3.46 7.726 7.729s-3.458 7.729-7.726 7.729z" fill="#9aafb7"/></g></g></svg>'},youtube:{id:"youtube",title:"Видео уроки",description:"Видео уроки на Youtube",list:[],icon:'<svg height="48" viewBox="0 -77 512.00213 512" width="48" xmlns="http://www.w3.org/2000/svg"><path d="m501.453125 56.09375c-5.902344-21.933594-23.195313-39.222656-45.125-45.128906-40.066406-10.964844-200.332031-10.964844-200.332031-10.964844s-160.261719 0-200.328125 10.546875c-21.507813 5.902344-39.222657 23.617187-45.125 45.546875-10.542969 40.0625-10.542969 123.148438-10.542969 123.148438s0 83.503906 10.542969 123.148437c5.90625 21.929687 23.195312 39.222656 45.128906 45.128906 40.484375 10.964844 200.328125 10.964844 200.328125 10.964844s160.261719 0 200.328125-10.546875c21.933594-5.902344 39.222656-23.195312 45.128906-45.125 10.542969-40.066406 10.542969-123.148438 10.542969-123.148438s.421875-83.507812-10.546875-123.570312zm0 0" fill="#f00"/><path d="m204.96875 256 133.269531-76.757812-133.269531-76.757813zm0 0" fill="#fff"/></svg>'},academy:{id:"academy",title:"Академия Taplink",description:"Как настроить свой таплинк",list:[],icon:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="48" height="48" x="0" y="0" viewBox="0 0 511.995 511.995" xml:space="preserve"><g><g xmlns="http://www.w3.org/2000/svg"><path d="m454.558 348.609h42.322v82.925h-42.322z" fill="#ffe177" data-original="#ffe177" style=""/><path d="m413.118 263.147v106.505c0 5.491-3.015 10.549-7.861 13.152l-138.605 74.677c-6.655 3.587-14.654 3.587-21.309 0l-93.563-50.405-45.041-24.272c-4.846-2.603-7.861-7.66-7.861-13.152v-106.505l157.12 94.854z" fill="#8484f4" data-original="#456b93" style="" class=""/><path d="m252.38 365.818-153.503-92.67v31.742 64.763c0 5.491 3.015 10.549 7.861 13.152l45.041 24.272v-42.129c0-12.356 13.496-19.972 24.073-13.587l76.527 46.2c2.225 1.343 5.011 1.343 7.236 0l153.503-92.67v-31.742l-153.503 92.67c-2.225 1.342-5.01 1.342-7.235-.001z" fill="#7272d9" data-original="#3b4f66" style="" class=""/><path d="m508.417 215.629-248.59 150.06c-2.36 1.42-5.3 1.42-7.66 0l-248.589-150.06c-4.77-2.88-4.77-9.8 0-12.68l15.79-9.53 232.8-140.53c2.36-1.42 5.3-1.42 7.66 0l232.8 140.53 15.79 9.53c4.769 2.88 4.769 9.8-.001 12.68z" fill="#b2b2fc" data-original="#618baa" style="" class=""/><path d="m508.417 215.629-248.59 150.06c-2.36 1.42-5.3 1.42-7.66 0l-248.589-150.06c-4.77-2.88-4.77-9.8 0-12.68l15.79-9.53 236.63 142.84 236.63-142.84 15.79 9.53c4.769 2.88 4.769 9.8-.001 12.68z" fill="#8484f4" data-original="#456b93" style="" class=""/><g><g><path d="m475.72 355.58c-4.383 0-7.935-3.552-7.935-7.935v-105.228l-212.722-25.249c-4.352-.516-7.461-4.463-6.944-8.815.517-4.354 4.48-7.463 8.815-6.944l219.722 26.079c3.992.473 7 3.859 7 7.88v112.276c-.001 4.384-3.553 7.936-7.936 7.936z" fill="#d9ecfd"/></g></g><circle cx="475.719" cy="348.609" fill="#ffffff" r="21.161"/><circle cx="475.719" cy="348.609" fill="#ffc85e" r="21.161"/></g></g></svg>'}}}}}},watch:{query:_.debounce(function(){var t=this;this.searchResult=null,3<=this.query.length&&(this.isFetchingSearch=!0,gtag("event","search",{search_term:this.query}),this.$api.get("help/faq/questions",{query:this.query.trim()}).then(function(e){var i=_.map(t.query.trim().replace(/[^\S\r\n]+/," ").split(" "),function(e){return new RegExp("("+e+")","i")});"success"==e.result&&(t.searchResult=_.map(e.response.list,function(t){return _.each(i,function(e){t.title_html=t.title.replace(e,'<span class="text-light">$1</span>')}),t})),t.isFetchingSearch=!1}))},500)},created:function(){this.clearPath(),this.$events.on("help:toggle",this.sidebarToggle)},destoyed:function(){this.$events.off("help:toggle",this.sidebarToggle)},methods:{clearQuery:function(){this.searchResult=null,this.query=""},sidebarToggle:function(e,t){var i=this;if(this.active=t.active,t.active&&(this.clearPath(),gtag("event","helpcenter")),t.target)switch(this.breadCrumbsActive=!1,this.isFetching=!0,gtag("event","helpcenter_"+t.target.name),t.target.name){case"answer":this.path.push(this.list.home.list.faq.title),this.path_items.push({id:"home"}),this.$api.get("help/faq/answer",t.target.params).then(function(e){var t;"success"==e.result&&(t=e.response,_.each(t.path,function(e){i.path.push(e.title),i.path_items.push(e)}),i.current_item={id:"answer",answer:t.answer}),i.isFetching=!1,i.activeBreadCrumbs(!0)});break;case"video":this.path.push(this.list.home.list.videos.title),this.path_items.push({id:"home"}),this.$api.get("help/guides/guide",t.target.params).then(function(e){var t;"success"==e.result&&(t=e.response,_.each(t.path,function(e){i.path.push(e.title),i.path_items.push(e)}),i.current_item={id:"guide",guide:t.guide},i.videoIndex=0),i.isFetching=!1,i.activeBreadCrumbs(!0)});break;default:this.forward(this.list.home.list[t.target.name]),this.isFetching=!1,this.activeBreadCrumbs(!0)}},clearPath:function(){this.current_item=this.list[this.current_name="home"],this.path=[],this.path_items=[],this.clearQuery()},activeBreadCrumbs:function(e){var t=this;setTimeout(function(){return t.breadCrumbsActive=e},100)},fetch:function(n){var a=this;return new Promise(function(e,t){var i=null,s={type:n};switch(n){case"faq":i="help/faq/groups";break;case"guides":case"videos":i="help/guides/list";break;case"question":i="help/faq/questions",s.group_id=a.current_item.parent_id;break;case"youtube":i="help/youtube/list";break;case"academy":i="help/courses/list";break;case"course":return void e({result:"skip"})}a.$api.get(i,s).then(e)})},forward:function(t){var i=this,e=null!=this.searchResult?"question":this.current_item.id;switch(gtag("event","helpcenter_"+e),e){case"home":this.current_item=t,this.path.push(this.current_item.title),this.path_items.push({id:"home"}),this.breadCrumbsActive=!1,null==this.current_item.list[t.id]?(this.isFetching=!0,this.fetch(t.id).then(function(e){"success"==e.result&&(i.current_item=i.current_item.list[t.id]={list:e.response.list,id:t.id}),i.isFetching=!1,i.activeBreadCrumbs(!0)})):(this.current_item=this.current_item.list[t.id],this.activeBreadCrumbs(!0));break;case"academy":this.path.push(t.title),this.path_items.push(this.current_item),this.breadCrumbsActive=!1,null==t.list?(this.$api.get("help/courses/list").then(function(e){t.list=e.response.list,i.current_item=t,i.current_item.id="course"}),this.isFetching=!1):this.current_item=t,this.activeBreadCrumbs(!0);break;case"guides":case"videos":this.path.push(t.title),this.path_items.push(this.current_item),this.current_item=t,this.current_item.id="guide",this.breadCrumbsActive=!1,null==this.current_item.answer?(this.isFetching=!0,this.$api.get("help/guides/guide",{guide_id:t.guide_id}).then(function(e){"success"==e.result&&(i.videoIndex=0,i.current_item.guide=e.response.guide),i.isFetching=!1,i.activeBreadCrumbs(!0)})):this.activeBreadCrumbs(!0);break;case"faq":this.path.push(t.title),this.path_items.push(this.current_item),this.breadCrumbsActive=!1,null==t.list?(this.isFetching=!0,this.$api.get("help/faq/questions",{group_id:t.group_id}).then(function(e){"success"==e.result&&(t.list=_.map(e.response.list,function(e){return e.answer=null,e}),i.current_item=t,i.current_item.id="question"),i.isFetching=!1,i.activeBreadCrumbs(!0)})):(this.current_item=t,this.activeBreadCrumbs(!0));break;case"question":this.path.push(t.title),this.path_items.push(this.current_item),this.current_item=t,this.current_item.id="answer",this.breadCrumbsActive=!1,null==this.current_item.answer?(this.isFetching=!0,this.$api.get("help/faq/answer",{question_id:t.question_id}).then(function(e){"success"==e.result&&(i.current_item.answer=e.response.answer),i.isFetching=!1,i.activeBreadCrumbs(!0)})):this.activeBreadCrumbs(!0)}},backward:function(e){var t=this;"answer"!=this.current_item.id&&(this.query=""),this.current_item=e?this.path_items[e]:this.list.home,null==this.current_item.list&&(this.isFetching=!0,this.fetch(this.current_item.id).then(function(e){"success"==e.result&&(t.current_item.list=e.response.list),t.isFetching=!1})),this.path.splice(e,this.path.length-e),this.path_items.splice(e,this.path_items.length-e)}},template:'<div class="help-sidebar" :class="{in: active}" :style="{width: fullscreen?\'100%\':null}"> <header> <h2 class="has-mb-3 jas-mt-1">Cправочный центр</h2> <i class="far is-hidden-mobile modal-expand" :class="\'fa-\'+(fullscreen?\'compress\':\'expand\')" @click="fullscreen = !fullscreen"></i> <button class="modal-close is-large" @click="fullscreen = false; $events.fire(\'help:toggle\', false)"></button> </header> <div class="help-bread-crumbs"> <div v-for="(name, i) in path"> <div :data-index="i"></div> <h3 :class="{in: breadCrumbsActive || i +1 < path.length}" @click="backward(i)"><div>{{name}}</div><div>{{name}}</div></h3> </div> </div> <div class="help-container" :class="{\'help-gray-background\': [\'faq\', \'guides\'].indexOf(current_item.id) != -1}"> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> <ul class="help-list" v-if="current_item.id == \'home\'"> <li v-for="(p, i) in current_item.list" @click="forward(p)" class="media"> <div v-html="p.icon" v-if="p.icon" class="has-mr-3"></div> <div> <h4>{{p.title}}</h4> <div class="has-text-grey">{{p.description}}</div> </div> </li> </ul> <div v-if="[\'faq\', \'guides\', \'videos\', \'academy\'].indexOf(current_item.id) != -1 && breadCrumbsActive" class="help-gray-background-inner"> <div class="help-search" v-if="current_item.id == \'faq\'"> <b-input class="input" v-model="query" v-focus icon="search" :placeholder="\'Поиск\'|gettext" :icon-right="(query.length>= 3)?(isFetchingSearch?\'spinner-third fa-spin\':\'close-circle\'):null" icon-right-clickable @icon-right-click="clearQuery"/> </div> <div v-for="p in current_item.list" v-if="query.length < 3"> <h4 class="help-li-head has-text-grey">{{p.title}}</h4> <ul class="help-list"> <li v-for="(g, i) in p.list" @click="forward(g)">{{g.title}}<div v-if="g.subtitle != undefined" class="has-text-grey">{{g.subtitle}}</div></li> </ul> </div> <div v-if="searchResult != null && searchResult.length"> <ul class="help-list"> <li v-for="g in searchResult" @click="forward(g)" v-html="g.title_html"></li> </ul> </div> <div v-if="searchResult != null && searchResult.length == 0 && !isFetchingSearch && (query.length>= 3)" class="has-p-3 has-text-centered"> {{\'По вашему запросу ничего не найдено\'|gettext}} </div> </div> <ul v-if="current_item.id == \'question\' && breadCrumbsActive" class="help-list"> <li v-for="(q, i) in current_item.list" @click="forward(q)">{{q.title}}</li> </ul> <vue-component-document v-if="current_item.id == \'answer\' && current_item.answer" v-model="current_item.answer" class="has-p-3 hero-block blog-post hero-text"/> <div v-if="current_item.id == \'guide\' && current_item.guide && current_item.guide.type == \'video\'"> <div v-if="current_item.guide"> <div v-if="current_item.guide.videos.length"> <vue-component-video :options="{url: current_item.guide.videos[videoIndex].link, is_autoplay: true, is_loop: true, is_playsinline: true, has_controls: false, is_autohide: false, poster: null, type: \'video/mp4\', handler: \'player\'}" style="pointer-events: none"></vue-component-video> </div> </div> </div> <ul v-if="current_item.id == \'guide\' && current_item.guide && current_item.guide.type == \'video\' && current_item.guide.videos.length" class="help-list is-videos"> <li v-for="(v, j) in current_item.guide.videos" :class="{in: videoIndex== j}" @click="videoIndex = j">{{v.title}}</li> </ul> <div v-if="current_item.id == \'youtube\' && current_item.list && current_item.list.length" style="height: 100%;overflow: hidden;display: flex;flex-direction: column;"> <div class="video-container"> <iframe frameborder="0" :src="\'https://www.youtube.com/embed/\'+current_item.list[videoIndex].hash+\'?showinfo=0&rel=0&playsinline=0\'" allowfullscreen="1" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe> </div> <ul class="help-list is-videos" style="overflow-y: scroll"> <li v-for="(v, j) in current_item.list" :class="{in: videoIndex== j}" @click="videoIndex = j">{{v.title}}</li> </ul> </div> <vue-component-document v-if="current_item.id == \'guide\' && current_item.guide && current_item.guide.doc" v-model="current_item.guide.doc" class="has-p-3 hero-guide hero-block blog-post hero-text"/> <div v-if="current_item.id == \'course\'" style="height:100%"> <iframe :src="current_item.iframe" style="height:100%;width:100%"></iframe> </div> </div> </div>'}),window.$app.defineComponent("component","vue-component-htmleditor",{data:function(){return{editor:null,undo:null,lastSavedTime:0}},props:["value"],mounted:function(){var e=this;$mx.lazy(["editorjs.js","https://cdn.jsdelivr.net/combine/npm/@editorjs/editorjs@latest,npm/@editorjs/list@latest,npm/editorjs-header-with-anchor@latest,npm/@editorjs/embed@latest,npm/editorjs-undo@latest,npm/editorjs-table@latest,npm/@editorjs/delimiter@latest,npm/editorjs-alert@latest"],"editorjs.css",function(){e.rebuildEditor()})},destroyed:function(){this.editor&&this.editor.destroy()},watch:{value:function(e){e&&this.lastSavedTime==e.time||this.rebuildEditor()}},methods:{rebuildEditor:function(){var a=this;this.editor&&this.editor.destroy();var e=null,t={holder:"editorjs",logLevel:"ERROR",autofocus:!0,placeholder:"Write here ...",tools:{video:EditorVideo,quote:Blockquote,table:{class:Table,inlineToolbar:!0},delimiter:Delimiter,alert:{class:Alert,inlineToolbar:!0},header:{class:Header,inlineToolbar:!0,config:{placeholder:"Header"}},list:List,code:{class:CodeBox,config:{themeName:"atelier-seaside-light"}},image:{class:ImageTool,config:{buttonContent:this.$gettext("Загрузить картинку"),uploader:{uploadByFile:$mx.proxy(function(i){return new Promise(function(s,e){var n=[],t=Array.isArray(i)?i:[i];_.each(t,function(e,t){var i;/\.(jpe?g|png|gif|svg)$/i.test(e.name)?((i=new FormData).append("file",e),$mx.request({url:"/pictures/upload?_uid="+a.$account.profile_id,method:"post",data:i}).then(function(e){var t=e.data;"success"==t.result?(t.response.link="//"+a.$account.storage_domain+"/p/"+t.response.filename+"?"+t.response.version,s({success:1,file:{url:t.response.link,picture_id:t.response.picture_id,ext:t.response.ext,width:t.response.width,height:t.response.height},tunes:{withBorder:!0,isPhone:1.2*t.response.width<t.response.height,stretched:800<t.response.width}})):"error"==t.result&&a.$alert(t.error,"is-danger")}).catch(function(){a.$alert(a.$gettext("Во время загрузки картинки возникла ошибка"),"is-danger")})):n.push(a.$gettext("Недопустимый формат файла"))}),n.length&&(a.$alert(_.uniq(n).join("<br>"),"is-danger"),s({success:0}))})},this)}}},Marker:{class:Marker,shortcut:"CMD+SHIFT+M"},embed:{class:Embed,inlineToolbar:!0,config:{services:{youtube:!0,coub:!0,twitter:!0,instagram:!0,vimeo:!0}}}},onChange:function(){a.editor&&a.editor.save().then(function(e){console.log(e),a.lastSavedTime=e.time,a.$emit("input",a.value=e)}).catch(function(e){})},onReady:function(){new Undo({editor:e}).initialize(t.data)}};this.value&&(t.data=this.value),$mx("#editorjs").html(""),e=this.editor=new EditorJS(t)}},template:'<div id="editorjs"></div>'}),window.$app.defineComponent("component","vue-component-leads-statuses",{props:{statuses:Object,value:Number,disabled:Boolean,withEmpty:Boolean},watch:{value:function(e){this.$emit("input",e)}},template:'<vue-component-dropdown position="is-bottom-right is-fullwidth" v-model="value" :disabled="disabled" :title="\'Статус\'|gettext" button-class="button is-default is-fullwidth is-focusable"> <span slot="button"><span v-if="value">{{statuses[value].status}}</span><span class="has-text-grey" v-else>-- {{\'Все статусы\'|gettext}} --</span></span> <b-dropdown-item :value="null" class="has-text-grey" v-if="withEmpty">{{\'Все статусы\'|gettext}}</b-dropdown-item> <hr class="dropdown-divider" aria-role="menuitem" v-if="withEmpty"> <b-dropdown-item v-for="(v, i) in statuses" :value.number="v.status_id"><i class="fas fa-circle has-mr-1" :style="{color: v.color}"></i>{{ v.status }}</b-dropdown-item> </vue-component-dropdown>'}),window.$app.defineComponent("component","vue-component-link-editor",{data:function(){return{isFetchingProduct:!1,isFetchingCollection:!1,autocompleteProducts:[],autocompleteCollections:[],vals:{}}},props:{values:Object,variants:Object,info:Object,addon_target_except:String},created:function(){this.recreateVals()},watch:{values:function(){this.recreateVals()},vals:{handler:function(){this.values.value=this.vals[this.vals.type],this.values.type=this.vals.type,"sms"==this.vals.type&&(this.values.value+=":"+this.vals.sms_text),"email"==this.vals.type&&(this.values.value+=":"+this.vals.email_subject),this.$emit("update:addon_target_except",this.addon_target_except="emailsignup"==this.vals.type?null:"form")},deep:!0}},methods:{linkTypes:function(e){var t=this.variants.link_type_values[e];if(t&&null!=t[0].children){var s=[];return function t(e,i){_.each(e,function(e){null==e.children?s.push({id:e.id,title:i+" "+e.title}):(s.push({label:i+"├ "+e.title}),t(e.children,"┊   "+i))})}(t,""),s}return t},recreateVals:function(){var e,t,i=this;this.vals=_.clone(this.values),_.each(this.variants.link_type,function(e,t){null==i.vals[t]&&i.$set(i.vals,t,null)}),this.vals.value?"sms"==this.vals.type?(e=this.vals.value.split(":"),this.$set(this.vals,"sms",e.shift()),this.$set(this.vals,"sms_text",e.join(":"))):"email"==this.vals.type?(t=this.vals.value.split(":"),this.$set(this.vals,"email",t.shift()),this.$set(this.vals,"email_subject",t.join(":"))):this.$set(this.vals,this.vals.type,this.vals.value):this.vals.page=this.vals.link_page_id},asyncAutocompleteProduct:_.debounce(function(){var t=this;this.vals.product&&""!=this.vals.product.trim()?(this.isFetchingProduct=!0,this.$api.get("products/search",{query:this.vals.product}).then(function(e){t.autocompleteProducts=e.response.products.search,t.isFetchingProduct=!1})):this.autocompleteProducts=[]},500),asyncAutocompleteCollection:_.debounce(function(){var t=this;this.vals.collection&&""!=this.vals.collection.trim()?(this.isFetchingCollection=!0,this.$api.get("products/collections/search",{query:this.vals.collection}).then(function(e){t.autocompleteCollections=e.response.collections.search,t.isFetchingCollection=!1})):this.autocompleteCollection=[]},500),onSelectProduct:function(e){this.vals.product=e.title},onSelectCollection:function(e){this.vals.collection=e.collection}},template:'<div> <div class="row row-small"> <div class="col-xs-12 col-sm-4 has-xs-mb-1"> <label class="label">{{\'Действие\'|gettext}}</label> <vue-component-dropdown position="is-bottom-right is-fullwidth" v-model="vals.type" :disabled="info.is_readonly" :title="\'Действие\'|gettext" class="is-hidden-tablet" button-class="button is-focusable is-fullwidth"> <span slot="button">{{variants.link_type[vals.type]}}</span> <b-dropdown-item aria-role="listitem" v-for="(v, k) in variants.link_type" :value="k">{{v}}</b-dropdown-item> </vue-component-dropdown> <b-select v-model="vals.type" :disabled="info.is_readonly" expanded class="is-hidden-mobile"> <option v-for="(v, k) in variants.link_type" :value="k">{{v}}</option> </b-select> </div> <div class="col-xs-12 col-sm link-editor-place"> <label class="label is-hidden-mobile" v-if="vals.type != \'emailsignup\'">&nbsp;</label> <div v-if="vals.type == \'link\'"><input type=\'text\' v-model="vals.link" class=\'input\' placeholder=\'http://\' autocorrect="off" autocapitalize="none" :disabled="info.is_readonly"></div> <mx-phone v-else-if="vals.type == \'phone\'" v-model="vals.phone" :disabled="info.is_readonly"></mx-phone> <div v-else-if="vals.type == \'sms\'"> <mx-phone v-model="vals.sms" :disabled="info.is_readonly" class="has-mb-1"></mx-phone> <input type="text" maxlength="140" :disabled="info.is_readonly" class="input" v-model="vals.sms_text" :placeholder="\'Текст-шаблон сообщения\'|gettext"> </div> <div v-else-if="vals.type == \'email\'"> <input type=\'text\' v-model="vals.email" class=\'input has-mb-1\' placeholder=\'example@email.com\' autocorrect="off" autocapitalize="off" spellcheck="false" :disabled="info.is_readonly"> <input type="text" maxlength="140" :disabled="info.is_readonly" class="input" v-model="vals.email_subject" :placeholder="\'Тема письма\'|gettext"> </div> <div v-else-if="vals.type == \'product\'"><b-autocomplete v-model="vals.product" :data="autocompleteProducts" :placeholder="\'Начните вводить название товара\'|gettext" field="product" :loading="isFetchingProduct" @input="asyncAutocompleteProduct" @select="onSelectProduct" :disabled="info.is_readonly"></b-autocomplete></div> <div v-else-if="vals.type == \'collection\'"><b-autocomplete v-model="vals.collection" :data="autocompleteCollections" :placeholder="\'Начните вводить название коллекции\'|gettext" field="collection" :loading="isFetchingCollection" @input="asyncAutocompleteCollection" @select="onSelectCollection" :disabled="info.is_readonly"></b-autocomplete></div> <div v-else-if="vals.type == \'page\'"> <vue-component-page-chooser v-model="vals.page" :pages="variants.link_page_id" :disabled="info.is_readonly"/> </div> <div v-else-if="vals.type == \'emailsignup\'"> <vue-component-form-options-editor :values="vals[vals.type]" :disabled="info.is_readonly" :variants="variants"/> </div> <div v-else-if="variants.link_type_values[vals.type] != undefined"> <b-select v-model="vals[vals.type]" :disabled="info.is_readonly" expanded> <option :value="null">{{\'-- Не выбрано --\'|gettext}}</option> <component v-for="(v, k) in linkTypes(vals.type)" :value="v.id" :key="k" v-bind:is="(v.label == undefined)?\'option\':\'optgroup\'" :label="v.label" v-html="(v.label == undefined)?v.title:null"></component> </b-select> </div> </div> </div> </div>'}),window.$app.defineComponent("component","vue-component-locale-change",{computed:{currentLocale:function(){return window.locales[window.i18n.locale]}},template:'<div> <a class=\'langs langs-button\' href=\'#\' data-toggle="tooltip" data-placement="top" data-trigger=\'click\' data-html=\'#langsMenu\' data-arrow=\'true\' data-theme=\'light\'><div class="iti__flag iti__flag-box" :class="\'iti__\'+currentLocale.flag"></div> {{currentLocale.title}}</a> <div id=\'langsMenu\' class="is-hidden"> <a v-for="(f, lang) in window.locales" class=\'langs tooltip-menu\' :class="{\'is-active\': i18n.locale == lang}" onclick="changeLocaleApp(event)" :data-multilanguage="f.multilanguage" :data-current-locale="i18n.locale" :data-lang="lang" :data-zone="f.zone"><div class="iti__flag iti__flag-box" :class="\'iti__\'+f.flag"></div> {{f.title}}</a> </div> </div>'}),window.$app.defineComponent("component","vue-component-page-chooser",{props:{value:Number,pages:Object,disabled:Boolean},watch:{value:function(e){this.$emit("input",e)}},template:'<div> <b-select v-model="value" :disabled="disabled" expanded class="is-hidden-mobile"> <option :value="null">{{\'-- Нет страницы --\'|gettext}}</option> <option v-for="(v, k) in pages" :value="k" :key="k">{{v}}</option> </b-select> <vue-component-dropdown position="is-bottom-left is-fullwidth" v-model="value" :disabled="disabled" :title="\'Страница\'|gettext" class="is-hidden-tablet" button-class="button is-default is-focusable is-fullwidth"> <span slot="button"><span v-if="value">{{pages[value]}}</span><span v-else class="has-text-grey">{{\'-- Нет страницы --\'|gettext}}</span></span> <b-dropdown-item :value="null" aria-role="menuitem" class="has-text-grey">{{\'-- Нет страницы --\'|gettext}}</b-dropdown-item> <hr aria-role="menuitem" class="dropdown-divider"> <b-dropdown-item v-for="(v, k) in pages" :value="k" aria-role="menuitem">{{v}}</b-dropdown-item> </vue-component-dropdown> </div>'}),window.$app.defineComponent("component","vue-component-picture-cropper",{data:function(){return{isFetching:!0,cropper:void 0,filename:null,mimeType:null}},props:{file:Object,dataUrl:String,doneHandler:Function,cancelHandler:Function,cropperOptions:{type:Object,default:function(){return{aspectRatio:1,autoCropArea:1,viewMode:1,movable:!0,zoomable:!1}}},outputQuality:{type:Number,default:.9},labels:{type:Object,default:function(){return{submit:this.$gettext("Сохранить"),cancel:this.$gettext("Отмена")}}}},created:function(){var t=this;this.mimeType=this.file.type;var e=new FileReader;e.onload=function(e){t.dataUrl=e.target.result},e.readAsDataURL(this.file)},methods:{submit:function(){var t=this,e=/data:([^;]+);/.exec(this.$refs.img.src),i=e&&null!=e[1]?e[1]:null;this.cropper.getCroppedCanvas(this.outputOptions).toBlob(function(e){t.doneHandler(e)},i,this.outputQuality),this.$parent.close()},close:function(){this.cancelHandler&&this.cancelHandler(),this.$parent.close()},createCropper:function(){var e=this;$mx.lazy("//cdn.jsdelivr.net/npm/cropperjs@1.5.11/dist/cropper.min.js","//cdn.jsdelivr.net/npm/cropperjs@1.5.11/dist/cropper.css",function(){e.isFetching=!1,e.cropperOptions.aspectRatio.toFixed(2)==(e.$refs.img.width/e.$refs.img.height).toFixed(2)||"image/svg+xml"==e.mimeType?(e.doneHandler(e.file),e.$parent.close()):e.cropper=new Cropper(e.$refs.img,e.cropperOptions)})}},template:'<div> <div class="modal-card modal-card-little1"> <header class="modal-card-head"><p class="modal-card-title">{{\'Изображение\'|gettext}}</p> <button type="button" class="modal-close is-large" @click="close"></button></header> <section class="modal-card-body is-paddingless"> <img :src="dataUrl" @load.stop="createCropper" alt ref="img"> </section> <div class="modal-card-foot"> <button @click.stop.prevent="submit" class="button is-primary" v-text="labels.submit"></button> </div> </div> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("component","vue-component-pictures",{data:function(){return{uploading:0,uploadUrl:"/pictures/upload",maxFilesize:this.$account.limits.upload_max_filesize,dropFiles:[]}},computed:{maxSizeBytes:function(){if(this.maxFilesize){var e=this.maxFilesize.match(/([0-9]+)([MK])/);return e[1]*("M"==e[2]?1048576:1024)}return this.maxFilesize}},props:{value:Object,accept:{type:String,default:"image/jpeg,image/png,image/gif,image/svg,image/svg+xml"},disabled:{type:Boolean,default:!1},cropperOptions:Object,updatable:Boolean,multiple:Boolean,sortable:{type:Boolean,default:!0},buttonTitle:{type:String,default:function(){return this.$gettext("Добавить")}},buttonIcon:{type:String,default:"fa fas fa-camera"},alwaysDeleteButton:Boolean,classContainer:{type:String,default:""},styleContainer:String,styleOuterContainer:String,maxSize:{type:Number,defaiult:1080},selected:Number,target:String},watch:{value:function(){this.$emit("input",this.value)}},methods:{prepareStyle:function(e){return null==e.link&&(e.link="//"+this.$account.storage_domain+"/p/"+e.filename+"?"+e.version),"background-image:"+(null==e||null!=e.progress||null==e.link?"none;":"url("+e.link+");")+this.styleContainer},deletePicture:function(e){var t,i=this;this.value?(t=null,this.$confirm(this.$gettext("Вы уверены что хотите удалить эту картинку?"),"is-danger").then(function(){_.isArray(i.value)?(t=i.value[e].picture_id,i.value.splice(e,1)):(t=i.value.picture_id,i.value=null),i.$emit("delete",{index:e,empty:!1,picture_id:t})})):this.$emit("delete",{index:e,empty:!0,picture_id:null})},dropFilesChanged:function(o,r,l){var i,s,c=this;window.File&&window.FormData?(i=[],s=_.isArray(this.dropFiles)?this.dropFiles:[this.dropFiles],_.each(s,function(n,e){var a,t;c.maxSizeBytes&&n.size>c.maxSizeBytes?i.push(c.$gettext("Максимальный размер файла: %s").replace("%s",c.maxFilesize)):(a=c.value,t=function(e){var t=new FormData;t.append("file",e||n),o&&null!=r.picture_id&&t.append("picture_id",r.picture_id);var i={progress:0},s=o&&-1!=l?l:_.isArray(c.value)?c.value.length:0;_.isArray(c.value)?o?c.value[l]=i:c.value.push(i):c.value=i,c.uploading++,c.$emit("startUploading",c.uploading),$mx.request({url:c.uploadUrl+"?_uid="+c.$account.profile_id+(c.maxSize?"&size="+c.maxSize:"")+(c.target?"&target="+c.target:""),method:"post",data:t}).then(function(e){var t=e.data;c.uploading--,c.$emit("stopUploading",c.uploading),"success"==t.result?(t.response.link="//"+c.$account.storage_domain+"/p/"+t.response.filename+"?"+t.response.version,_.isArray(c.value)?c.$set(c.value,s,t.response):c.value=t.response,c.$emit("input",c.value),c.$emit("upload")):"error"==t.result&&c.$alert(t.error,"is-danger")}).catch(function(){c.uploading--,c.$emit("stopUploading",c.uploading),c.value=_.clone(a),c.$alert(c.$gettext("Во время загрузки картинки возникла ошибка"),"is-danger")})},/\.(jpe?g|png|gif|svg)$/i.test(n.name)?!c.multiple&&c.cropperOptions?c.$modal("vue-component-picture-cropper",{file:s[0],cropperOptions:c.cropperOptions,doneHandler:t},c):t(null):i.push(c.$gettext("Недопустимый формат файла")))}),this.dropFiles=[],i.length&&this.$alert(_.uniq(i).join("<br>"),"is-danger")):alert("The File APIs are not fully supported in this browser")}},template:'<div :class="{\'pictures-multiple-list\': _.isArray(value)}"> <sortable-list v-model="value" style="position: relative;line-height: 0" axis="xy" use-drag-handle v-if="multiple && sortable"> <sortable-item v-for="(p, i) in value" class="upload-picture upload-picture-multiple" :class="{in: selected== value.picture_id}" :index="i" :key="i" :item="p" :disabled="disabled || (uploading> 0)"> <div v-sortable-handle :style="prepareStyle(p)"> <b-loading :is-full-page="false" active="true" v-if="p.progress != undefined"></b-loading> </div> <button type="button" class="button is-danger is-small" @click.prevent.stop="deletePicture(i)" v-if="!disabled && ((p.allow_delete == undefined) || p.allow_delete)" :disabled="uploading> 0"><i class="fa fa-trash-alt"></i></button> </sortable-item><b-upload v-model="dropFiles" @input="dropFilesChanged(false)" :accept="accept" class="upload-place" :multiple="multiple" drag-drop><span><i class="fa fas fa-camera"></i>{{\'Добавить\'|gettext}}</span></b-upload> </sortable-list> <div style="line-height: 0" v-else-if="_.isArray(value) && !sortable"> <div v-for="(p, i) in value" class="upload-picture" :data-id="p.picture_id" :class="{in: selected== p.picture_id}" :disabled="disabled || (uploading> 0)" @click="$emit(\'click\', {picture_id: p.picture_id})"> <div v-sortable-handle :style="prepareStyle(p)"> <b-loading :is-full-page="false" active="true" v-if="p.progress != undefined"></b-loading> </div> <button type="button" class="button is-danger is-small" @click.prevent.stop="deletePicture(i)" v-if="!disabled && ((p.allow_delete == undefined) || p.allow_delete)" :disabled="uploading> 0"><i class="fa fa-trash-alt"></i></button> <b-upload v-model="dropFiles" @input="dropFilesChanged(true, p, i)" :accept="accept" class="button is-small is-primary upload-place-update" drag-drop v-if="updatable"> <span v-if="maxSize> 120"><i class="fa fas fa-arrow-up"></i>{{buttonTitle}}</span> <span v-else><i class="fa fas fa-arrow-up is-marginless"></i></span> </b-upload> </div><b-upload v-model="dropFiles" @input="dropFilesChanged(false)" :accept="accept" class="upload-place" :multiple="multiple" drag-drop><span><i class="fa fas fa-camera"></i>{{\'Добавить\'|gettext}}</span></b-upload> </div> <div style="line-height: 0" v-else> <div class="upload-picture" :class="{in: selected== value.picture_id}" v-if="value" @click="$emit(\'click\', {picture_id: value.picture_id})"> <div class="upload-picture-inner" :style="styleOuterContainer"> <div class="picture-container" :class="classContainer" :style="prepareStyle(value)"> <b-loading :is-full-page="false" active="true" v-if="value.progress != undefined"></b-loading> </div> </div> <button type="button" class="button is-danger is-small" @click.prevent.stop="deletePicture" v-if="!disabled && (value || alwaysDeleteButton)"><i class="fa fa-trash-alt"></i></button> <b-upload v-model="dropFiles" @input="dropFilesChanged(true, value, -1)" :accept="accept" class="button is-small is-primary upload-place-update" drag-drop v-if="updatable"> <span v-if="maxSize> 120"><i class="fa fas fa-arrow-up"></i>{{buttonTitle}}</span> <span v-else><i class="fa fas fa-arrow-up is-marginless"></i></span> </b-upload> </div> <div class="upload-picture" v-if="!value"> <b-upload v-model="dropFiles" @input="dropFilesChanged(false)" :accept="accept" class="upload-place" :multiple="multiple" drag-drop> <span><i :class="buttonIcon"></i>{{buttonTitle}}</span> </b-upload> <button type="button" class="button is-danger is-small" @click.prevent.stop="deletePicture" v-if="!disabled && alwaysDeleteButton"><i class="fa fa-trash-alt"></i></button> </div> </div> </div>'}),window.$app.defineComponent("component","vue-component-qrcode",{data:function(){return{isLoading:!0}},props:{value:String,withDownload:Boolean,size:{type:String,default:"250px"}},mounted:function(){$mx.lazy("qrcode.js")},template:'<div> <div class="qrcode-init has-mb-2" :data-link=\'value\' data-target-link="#qrDownloadLink" :style="{width: size, height: size}"> <div class="loading-overlay is-active"><div class="loading-icon"></div></div> </div> <div v-if="withDownload"> <a id=\'qrDownloadLink\' target=\'_blank\' download=\'taplink.png\' class="button is-primary disabled"><i class="fa fa-download"></i> {{\'Скачать файл\'|gettext}}</a> </div> </div>'}),window.$app.defineComponent("component","vue-component-screen-breakpoint",{data:function(){return{hover_value:""}},props:["page_id"],methods:{hover:function(e){this.hover_value=e},click:function(e){this.$page.setOption("max_width",e)},classHover:function(e){var t=["xs","sm","md","lg","xl"];return{in:t.indexOf(this.hover_value)>=t.indexOf(e),hover:this.hover_value==e,active:this.$page.data.options.max_width==e}}},template:'<div id="pagesDevice" @mouseleave.stop="hover_value = \'\'"> <div class="pages-builder-breakpoint active"> <em> <div class="pages-builder-breakpoint-1020" @mouseover.stop="hover(\'xl\')" @click.stop="click(\'xl\')" :class="classHover(\'xl\')"> <em> <div class="pages-builder-breakpoint-820" @mouseover.stop="hover(\'lg\')" @click.stop="click(\'lg\')" :class="classHover(\'lg\')"> <em> <div class="pages-builder-breakpoint-720" @mouseover.stop="hover(\'md\')" @click.stop="click(\'md\')" :class="classHover(\'md\')"> <em> <div class="pages-builder-breakpoint-620" @mouseover.stop="hover(\'sm\')" @click.stop="click(\'sm\')" :class="classHover(\'sm\')"> <em> <div class="pages-builder-breakpoint-480" @mouseover.stop="hover(\'xs\')" @click.stop="click(\'xs\')" :class="classHover(\'xs\')"> <em><span>{{\'Максимальная ширина страницы\'|gettext}}</span></em> </div> </em> </div> </em> </div> </em> </div> </em> </div> </em> </div> </div>'}),window.$app.defineComponent("component","vue-component-select-custom-fields",{props:["values","value"],computed:{placeholderLocalField:function(){return"-- "+this.$gettext("Выберите поле формы")+" --"}},template:'<b-select :placeholder="placeholderLocalField" v-model="value" expanded @input="$emit(\'input\', value)"> <option :value="null">{{placeholderLocalField}}</option> <option v-for="v in values.fields" :value="v.idx">{{v.title}}</option> <optgroup v-if="values.fields_extended != undefined" v-for="e in values.fields_extended" :label="e.title"> <option v-for="v in e.fields" :value="v.idx">{{v.title}}</option> </optgroup> </b-select>'}),window.$app.defineComponent("component","vue-component-sortable-form-fields",{props:{value:{type:Object,default:[]},current:{type:Number,default:0}},methods:{updated:function(e){this.$emit("input",e)},sortStart:function(e){this.$emit("sortStart",e)},sortEnd:function(e){-1!=this.current&&(e.oldIndex>this.current?e.newIndex<=this.current&&this.current++:e.oldIndex<this.current?e.newIndex>=this.current&&this.current--:e.oldIndex==this.current&&(this.current=e.newIndex),this.$emit("update:current",this.current)),this.$emit("sortEnd",e)},openBlock:function(e){this.current=this.current==e?-1:e,this.$emit("update:current",this.current)}},template:'<sortable-list class="form-fields-item-list" lockAxis="y" v-model="value" use-drag-handle @sortEnd="sortEnd" @sortStart="sortStart" @input="updated"> <sortable-item v-for="(item, index) in value" class="form-fields-item" :index="index" :key="index" :item="item"> <div class="form-fields-item" :class="{in: current== index}"> <div class="form-fields-item-title" @click="openBlock(index)"> <div v-sortable-handle class="form-fields-item-handle"></div> <slot name="action" :index="index" :item="item"></slot> <slot name="title" :index="index" :item="item"></slot> </div> <div class="form-fields-item-options"> <slot name="form" :index="index" :item="item"></slot> </div> </div> </sortable-item> </sortable-list>'}),window.$app.defineComponent("component","vue-component-statistics",{data:function(){return{chart:null}},props:{data:Object,lineShow:Boolean,isFetching:Boolean,paddingTop:{type:Number,default:55},valueName:{type:String,default:"hits"},valueType:{type:String,default:"number"},period:String,period_back:Number,disabled:Boolean,title:String,titleSize:{type:Number,default:3},color:{type:String,default:"#94a7ff"}},mounted:function(){var a=this;$mx.lazy("charts.js",function(){var n=a.$getMonthsNames(),e={type:"line",data:{labels:_.map(a.data,function(e){return e.date}),datasets:[{fill:!0,backgroundColor:"rgba(255, 255, 255, .4)",borderColor:"rgba(255, 255, 255, .5)",pointRadius:0,borderWidth:2,data:_.map(a.data,function(e){return e[a.valueName]})}]},options:{line:{show:a.lineShow,value:a.period_back},aspectRatio:2.5,animation:{duration:0},legend:{display:!1},layout:{padding:{top:a.paddingTop}},tooltips:{mode:"index",intersect:!1,callbacks:{title:function(e,t){var i=t.labels[e[0].index];switch(a.period){case"day":return a.$date(i);case"week":return(s=i.split("-"))[1]+", "+s[0];default:var s=i.split("-");return n[s[1]-1]+", "+s[0]}},label:function(){return null},beforeBody:function(e){var t=e[0].yLabel;switch(a.valueType){case"decimal":return a.$decimal(t);case"currency":return a.$currency(t);default:return a.$number(t)}}}},scales:{xAxes:[{display:!1}],yAxes:[{display:!1}]}}},t=a.$refs.chart.getContext("2d");a.chart=new Chart(t,e)})},destroyed:function(){this.chart&&this.chart.destroy()},watch:{period_back:function(){var e=this;this.chart&&this.lineShow&&this.$nextTick(function(){e.chart.options.line.value=e.period_back,e.chart.chart.update()})},data:function(){var t=this;this.chart&&this.$nextTick(function(){t.chart.options.line.value=t.period_back,t.chart.data.labels=_.map(t.data,function(e){return e.date}),t.chart.data.datasets[0].data=_.map(t.data,function(e){return e[t.valueName]}),t.chart.chart.update()})}},template:'<div class="chart vue-statistics-chart" :class="{disabled: disabled}" :style="{background: color}"> <div class="vue-statistics-title"> <h3 class="has-text-white has-text-centered" v-if="title && titleSize== 3">{{title}}</h3> <h4 class="has-text-white has-text-centered" v-if="title && titleSize== 4">{{title}}</h4> </div> <canvas ref=\'chart\' v-show="data && data.length"></canvas> <div class=\'chart-empty\' v-if="data.length == 0 "> <span v-if="isFetching"> <div class="has-mt-2">{{\'Загрузка данных\'|gettext}}</div> </span> <span v-else> <div class="has-mt-2">{{\'Недостаточно данных\'|gettext}}</div> </span> </div> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("component","vue-component-subdomain-field",{props:["value","domain","error","label","disabled","domains"],watch:{value:function(){this.$emit("input",this.value)},domain:function(){this.$emit("update:domain",this.domain)}},template:'<div class="field" :class="{\'has-error\': error}"> <label class="label" v-if="label">{{label}}</label> <div class="field has-addons is-marginless"> <b-input type="input" v-model="value" expanded placeholder="subdomain" :disabled="disabled"></b-input> <b-dropdown v-model="domain" position="is-bottom-left" aria-role="list" :disabled="disabled" v-if="domains"> <button class="button" slot="trigger">.{{domain}}<i class="fal fa-angle-down has-ml-1"></i></button> <b-dropdown-item aria-role="listitem" v-for="d in domains" :value="d">{{d}}</b-dropdown-item> </b-dropdown> <div class="control" v-else><span class="button is-static">.{{domain}}</span></div> </div> <p class="help" v-if="error">{{error}}</p> </div>'}),window.$app.defineComponent("component","vue-component-submenu",{data:function(){return{currentRoute:null}},props:["page_id","menu","force_submenu"],mounted:function(){this.moveSubmenu(this.$router.currentRoute,0)},created:function(){var i=this;this.currentRoute=this.$router.currentRoute,window.$events.on("navigate",function(e,t){i.currentRoute=t,i.moveSubmenu(t)})},computed:{value:function(){return this.menu?"string"==typeof this.menu?this.$auth.prepareMenu(this.$router.getRoute({name:this.menu}).children):this.menu:this.currentSubmenu()}},methods:{isActiveMenu:function(e){for(i=this.currentRoute.matched.length-1;0<=i;i--)if(this.currentRoute.matched[i].name==e.name)return!0;return!1},currentSubmenu:function(){var s=this;if(this.currentRoute.matched.length<3)return null;var e=this.$router.getRoute({name:this.currentRoute.matched[2].name}),t=e&&null!=e.children&&(null==e.meta||null==e.meta.submenu||e.meta.submenu||this.force_submenu)?this.$auth.prepareMenu(e.children):null;if(t){for(var i=!1,n=0;n<t.length;n++)if(function e(t){if(s.currentRoute.name==t.name)return!0;if(t.children&&t.children.length)for(var i=0;i<t.children.length;i++)if(e(t.children[i]))return!0;return!1}(t[n])){i=!0;break}i||this.$router.replace(t[0])}return t},startTouchSubmenu:function(){$mx("html").addClass("is-dragging")},stopTouchSubmenu:function(){$mx("html").removeClass("is-dragging")},moveSubmenu:function(i,e){var s=this,n=1<arguments.length&&void 0!==e?e:300;null!=this.value&&this.$nextTick(function(){var e,t=function e(t,i,s){for(var n,a=0;a<t.length;a++){var o=t[a],r=null!=s?s:a;if(function(e,i){var s=e.name==i.name;return null!=e.params&&_.each(e.params,function(e,t){s&=i.params[t]==e}),s}(o,i))return r;if(null!=o.children&&o.children.length&&null!=(n=e(o.children,i,r)))return n}return null}(s.value,i);null!==t&&null!=s.$refs.submenu&&(e=s.$refs.submenu.children[t],$mx.scrollIt(e.offsetLeft-(s.$refs.submenu.offsetWidth-e.offsetWidth)/2,"x",s.$refs.submenu,n))})}},template:'<div class="top-panel" v-if="value"> <div class="container"> <div class="scrolling-container is-submenu" @touchstart="startTouchSubmenu" @touchend="stopTouchSubmenu"> <div ref="submenu" style="overflow-x: scroll"> <router-link :to="{name: m.name, params: Object.assign({page_id: page_id}, m.params || {})}" v-for="m in value" class="button" :class="{active: isActiveMenu(m)}">{{m.meta.title|gettext}}</router-link> <a class="button" style="pointer-events: none;visibility: hidden;padding-left: 70px"></a> </div> </div> </div> </div>'}),window.$app.defineComponent("component","vue-component-tariff-badge",{props:["value","theme"],template:'<span> <span class="tag is-danger" v-if="value == \'pro\'" style="background:#9d82da">pro</span> <span class="tag is-danger" v-if="value == \'business\'">business</span> <span class="tag" :class="{\'is-dark\': theme== \'dark\', \'is-default\': theme != \'dark\'}" v-if="value == \'basic\'">basic</span> </span>'}),window.$app.defineComponent("component","vue-component-text-transform-chooser",{props:{value:{type:String,default:"n"},fullwidth:Boolean,disabled:Boolean,withArrow:{type:Boolean,default:!0}},computed:{styles:function(){return{n:{t:this.$gettext("Стандартный"),i:"Tt",w:"none"},u:{t:this.$gettext("Верхний регистр"),i:"TT",w:"uppercase"}}}},methods:{onAction:function(e){this.value=e,this.$emit("input",this.value)},activeChange:function(e){$mx("html").toggleClass("is-dropdown-opened",e)}},template:'<vue-component-dropdown v-model.number="value" @input="onAction" @active-change="activeChange" position="is-bottom-left" class="is-dropdown-text-transform" :class="{\'is-fullwidth\': fullwidth}" :disabled="disabled" button-class="button is-default is-fullwidth is-focusable" :title="\'Регистр текста\'|gettext" :with-arrow="false"> <span style="width: 25px" slot="button">{{styles[value].i}}</span> <b-dropdown-item :value="k" v-for="(v, k) in styles"><span style="width: 30px;display: inline-block">{{v.i}}</span> {{v.t}}</b-dropdown-item> </vue-component-dropdown>'}),window.$app.defineComponent("component","vue-component-thumbnail-chooser",{data:function(){return{isFetching:!1,isPictureDeleting:!1,search:null,pictures:null,type:null}},props:["value","disabled"],computed:{disallow:function(){return this.disabled||!this.$auth.isAllowTariff("pro")},icons:function(){var t=this;return this.search?_.filter(window.tablerIcons,function(e){return-1!=e.t.indexOf(t.search.toLowerCase())}):window.tablerIcons}},watch:{type:function(e){var t=this;switch(e){case"p":null==this.pictures?(this.isFetching=!0,this.$api.get("pages/blocks/thumbs/list").then(function(e){"success"==e.result&&(t.pictures=e.response.pictures,t.scrollIt()),t.isFetching=!1})):this.scrollIt();break;case"i":window.tablerIcons?this.scrollIt():(window.tablerIcons=[],this.isFetching=!0,$mx.lazy("icons.js",function(){t.isFetching=!1,t.search="",t.scrollIt()}))}}},mounted:function(){this.type="n"!=this.value.t?this.value.t:"i"},methods:{scrollIt:function(){var i=this;this.$nextTick(function(){var e=null,t=null;"i"==i.value.t&&i.value.i&&(e=(t=$mx(i.$refs.icons)).find('[data-name="'+i.value.i+'"]')),"p"==i.value.t&&i.value.p&&(e=(t=$mx(i.$refs.images).find(".thumbs-pictures")).find('[data-id="'+i.value.p+'"]')),null!=e&&e.length&&e[0].offsetTop&&$mx.scrollIt(Math.max(0,e[0].offsetTop-t.height()/2)+e.height()/2,"y",t[0],0)})},selectNone:function(){this.value.t="n",this.value.i=this.value.p=null},selectIcon:function(e){this.value.t="i",this.value.i=e.n,this.value.p=null},selectPicture:function(e){this.value.t="p",this.value.i=null,this.value.p=e.picture_id},deletePicture:function(e){var t=this;this.isPictureDeleting=!0,this.$api.get("pages/blocks/thumbs/delete",{picture_id:e.picture_id}).then(function(e){t.isPictureDeleting=!1}).catch(function(){t.isPictureDeleting=!1})},uploadedPicture:function(e){1==e.length&&this.selectPicture(e[0])}},template:'<div style="height:100%;display: flex;flex-direction: column;"> <div class="label-pro-container is-flex-fullheight"> <div :class="{disabled: disallow}" class="is-flex-fullheight"> <b-field class="has-tabs-style has-mb-2" :class="{disabled: disallow}"> <b-radio-button v-model="type" type="active" class="is-expanded" native-value="i" style="width:50%">{{\'Иконки\'|gettext}}</b-radio-button> <b-radio-button v-model="type" type="active" class="is-expanded" native-value="p" style="width:50%">{{\'Изображение\'|gettext}}</b-radio-button> </b-field> <div v-show="type == \'i\'" class="is-flex-fullheight"> <b-input icon="search" type="search" v-model="search" :placeholder="\'Поиск\'|gettext" :disabled="disallow" v-focus></b-input> <div class="icons-list thumbs-scroll-list has-mt-3" ref="icons" :class="{disabled: disallow}"> <div> <div class="has-text-grey" :class="{in: value.t == \'n\'}" @click="selectNone" v-if="!search">{{\'Нет\'|gettext}}</div> <div v-for="w in icons" v-html="w.s" :class="{in: value.i == w.n}" @click="selectIcon(w)" :data-name="w.n"></div> </div> </div> </div> <div v-show="type == \'p\'" class="is-flex-fullheight" ref="images"> <vue-component-pictures v-model="pictures" target="thumb" max-size="100" :cropperOptions="{aspectRatio: 1, autoCropArea: 1, viewMode: 1, zoomable: false}" class="thumbs-pictures thumbs-scroll-list has-mt-1" :class="{in: true}" :selected="value.p" :disabled="disallow || isPictureDeleting" @click="selectPicture" @delete="deletePicture" @input="uploadedPicture" :sortable="false" updatable v-if="!isFetching"></vue-component-pictures> </div> </div> </div> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("component","vue-component-vbar",{data:function(){return{dragging:{enable:!1,axis:"",offset:""},bars:{horizontal:{elm:"",parent:"",size:0},vertical:{elm:"",parent:"",size:0}},wrapperObj:{elm:"",scrollHeight:"",scrollWidth:"",scrollLeft:"",scrollTop:""},container:{elm:"",scrollHeight:"",scrollWidth:""}}},mounted:function(){addResizeListener(this.$refs.container,this.resize),addResizeListener(this.$refs.wrapperRef.children[0],this.resize),document.addEventListener("mousemove",this.onDrag),document.addEventListener("touchmove",this.onDrag),document.addEventListener("mouseup",this.stopDrag),document.addEventListener("touchend",this.stopDrag),this.getSizes()},beforeDestroy:function(){removeResizeListener(this.$refs.container,this.resize),removeResizeListener(this.$refs.wrapperRef.children[0],this.resize),document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("touchmove",this.onDrag),document.removeEventListener("mouseup",this.stopDrag),document.removeEventListener("touchend",this.stopDrag)},computed:{propWrapperSize:function(){return this.wrapper?this.wrapper:""},propBarVertical:function(){return this.vBar?this.vBar:""},propBarInternalVertical:function(){return this.vBarInternal?this.vBarInternal:""},propBarHorizontal:function(){return this.hBar?this.hBar:""},propBarInternalHorizontal:function(){return this.hBarInternal?this.hBarInternal:""},barSizeVertical:function(){if(this.bars.horizontal.size&&this.bars.vertical.size)return{height:"calc(100% - 16px)"}},barSizeHorizontal:function(){if(this.bars.horizontal.size&&this.bars.vertical.size)return{width:"calc(100% - 16px)"}},barInternalVertical:function(){var e=this.getBarInternal("Y");return{height:this.bars.vertical.size+"px",top:e+"px"}},barInternalHorizontal:function(){var e=this.getBarInternal("X");return{width:this.bars.horizontal.size+"px",left:e+"px"}},validationScrolls:function(){var e="";return this.bars.horizontal.size&&this.hBarEnabled||(e+="overflowX: hidden;"),this.bars.vertical.size&&this.vBarEnabled||(e+="overflowY: hidden;"),e}},watch:{value:{handler:function(){var e=this;this.$nextTick(function(){e.getSizes()})},deep:!0}},methods:{startScroll:function(){$mx("html").addClass("is-dragging")},stopScroll:function(){$mx("html").removeClass("is-dragging")},shadowStyle:function(e){return"background: linear-gradient(to "+("start"==e?"right":"left")+", "+this.shadowColor+" 0%, "+(this.shadowColorTransparent?this.shadowColorTransparent:this.shadowColor+"00")+" 100%)"},scroll:function(){this.getSizes(0,0)},resize:function(){this.getSizes()},getBarInternal:function(e){var t=void 0,i=void 0,s=void 0,n=void 0,a=void 0,a=this.bars.horizontal.size&&this.bars.vertical.size?40:0;return"X"===e?(t=this.wrapperObj.scrollLeft,i=this.wrapperObj.scrollWidth,s=this.bars.horizontal.size+a,n=this.container.scrollWidth):"Y"===e&&(t=this.wrapperObj.scrollTop,i=this.wrapperObj.scrollHeight,s=this.bars.vertical.size+a,n=this.container.scrollHeight),t/(i-n)*(n-s)},getCoordinates:function(e,t){var i=void 0,s=void 0,n=void 0,a=void 0,o=void 0;return"X"===t?(i=this.wrapperObj.scrollWidth,s=this.bars.horizontal.size,n=this.container.scrollWidth,a=this.container.elm.offsetLeft,o=e.clientX-this.dragging.offset):"Y"===t&&(i=this.wrapperObj.scrollHeight,s=this.bars.vertical.size,n=this.container.scrollHeight,a=this.container.elm.offsetTop-1.4*this.bars.vertical.size,o=e.clientY-this.dragging.offset),(i-n)*(o-a)/(n-s)},startDrag:function(e){$mx("html").addClass("is-dragging"),e.preventDefault(),e.stopPropagation();var t=(e=e.changedTouches?e.changedTouches[0]:e).target.getAttribute("data-axis"),i=e.target.getAttribute("data-drag-source"),s=void 0;"Y"===t?"bar"===i?s=e.explicitOriginalTarget.offsetTop+1.4*this.bars.vertical.size:"internal"===i&&(s=e.clientY-this.bars.vertical.elm.offsetTop):"X"===t&&("bar"===i?s=e.explicitOriginalTarget.offsetLeft+1.4*this.bars.horizontal.size:"internal"===i&&(s=e.clientX-this.bars.horizontal.elm.offsetLeft)),this.dragging={enable:!0,axis:t,offset:s}},scrollTo:function(e,t){var i=this.$refs.wrapperRef;i.scrollLeft=e+"px",i.scrollTop=t+"px",this.getSizes()},onDrag:function(e){var t;this.dragging.enable&&(e.preventDefault(),e.stopPropagation(),e=e.changedTouches?e.changedTouches[0]:e,t=this.$refs.wrapperRef,"X"===this.dragging.axis?t.scrollLeft=this.getCoordinates(e,"X"):"Y"===this.dragging.axis&&(t.scrollTop=this.getCoordinates(e,"Y")),this.getSizes())},stopDrag:function(){this.dragging.enable&&($mx("html").removeClass("is-dragging"),this.dragging={enable:!1,axis:""})},getSizes:function(){var e=this.$refs.wrapperRef,t=this.$refs.container,i=this.$refs.verticalBar,s=this.$refs.verticalInternalBar,n=this.$refs.horizontalBar,a=this.$refs.horizontalInternalBar;this.wrapperObj={elm:e,scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop},this.container={elm:t,scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth},this.bars.horizontal.elm=a,this.bars.horizontal.parent=n,this.bars.horizontal.size=24<this.wrapperObj.scrollWidth-this.container.scrollWidth&&this.wrapperObj.scrollWidth-this.container.scrollWidth!=0?this.container.scrollWidth/this.wrapperObj.scrollWidth*this.container.scrollWidth:0,this.bars.vertical.elm=s,this.bars.vertical.parent=i,this.bars.vertical.size=24<this.wrapperObj.scrollHeight-this.container.scrollHeight&&this.wrapperObj.scrollHeight-this.container.scrollHeight!=0?this.container.scrollHeight/this.wrapperObj.scrollHeight*this.container.scrollHeight:0}},props:{value:Object,wrapper:Object,vBar:String,vBarInternal:String,hBar:String,hBarInternal:String,shadow:String,shadowColor:String,shadowColorTransparent:Boolean,vBarShow:{type:Boolean,default:!0},hBarShow:{type:Boolean,default:!0},vBarEnabled:{type:Boolean,default:!0},hBarEnabled:{type:Boolean,default:!0}},template:'<div id="vbar" :class="propWrapperSize"> <div class="bar--container" ref="container" @wheel="scroll" @touchmove="scroll" @touchstart="startScroll" @touchend="stopScroll"> <div class="bar--shadow bar--shadow-start" :style="shadowStyle(\'start\')" :data-axis="shadow" v-show="wrapperObj.scrollLeft> 0"></div> <div class="bar--shadow bar--shadow-end" :style="shadowStyle(\'end\')" :data-axis="shadow" v-show="wrapperObj.scrollLeft + container.scrollWidth != wrapperObj.scrollWidth"></div> <div class="bar--vertical" ref="verticalBar" v-show="vBarShow && bars.vertical.size" :style="barSizeVertical" :class="propBarVertical" @touchstart="startDrag" @mousedown="startDrag" data-axis="Y" data-drag-source="bar"> <div class="bar--vertical-internal" ref="verticalInternalBar" :style="barInternalVertical" :class="propBarInternalVertical" @touchstart="startDrag" @mousedown="startDrag" data-axis="Y" data-drag-source="internal"></div> </div> <div class="bar--horizontal" ref="horizontalBar" v-show="hBarShow && bars.horizontal.size" :style="barSizeHorizontal" :class="propBarHorizontal" @touchstart="startDrag" @mousedown="startDrag" data-axis="X" data-drag-source="bar"> <div class="bar--horizontal-internal" ref="horizontalInternalBar" :style="barInternalHorizontal" :class="propBarInternalHorizontal" @touchstart="startDrag" @mousedown="startDrag" data-axis="X" data-drag-source="internal"></div> </div> <div class="bar--wrapper" ref="wrapperRef" :style="validationScrolls"> <slot></slot> </div> </div> </div>'}),window.$app.defineComponent("component","vue-component-verifyfield",{data:function(){return{code:["","","","","",""]}},props:{value:String,disabled:Boolean,type:{type:String,default:"text"}},watch:{code:function(){this.value=this.code.join(""),this.$emit("input",this.value)}},created:function(){for(i=0;i<this.value.length;i++)this.code[i]=this.value[i]},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.c0[0].focus()})},methods:{isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent)},textInput:function(e,t){this.isAndroid()&&(null!=e.data&&(e.keyCode=e.data.charCodeAt(0)),this.keydown(e,t,!0))},paste:function(e,t){if(this.disabled)return e.preventDefault();var i=e.clipboardData.getData("text").toLowerCase().replace(/[^a-z0-9]/,"");for(j=0;j<Math.min(this.code.length-t,i.length);j++)this.$set(this.code,t+j,i[j]);this.$refs["c"+(j-1)][0].focus()},keydown:function(e,t,i){if(8==e.keyCode)this.$set(this.code,t,""),t&&this.$refs["c"+(t-1)][0].focus(),e.preventDefault();else{if(this.isAndroid()&&!i)return;if(13==e.keyCode||this.disabled||e.metaKey||e.ctrlKey)return;switch(37==e.keyCode&&t&&this.$refs["c"+(t-1)][0].focus(),39==e.keyCode&&t<this.code.length-1&&this.$refs["c"+(t+1)][0].focus(),this.type){case"text":if(!(97<=e.keyCode&&e.keyCode<=122||65<=e.keyCode&&e.keyCode<=90||48<=e.keyCode&&e.keyCode<=57))return e.preventDefault();break;case"tel":if(!(48<=e.keyCode&&e.keyCode<=57))return e.preventDefault()}this.$set(this.code,t,String.fromCharCode(e.keyCode).toLowerCase()),t<this.code.length-1&&this.$refs["c"+(t+1)][0].focus(),e.preventDefault()}this.$emit("keydown",e)}},template:'<div class="row row-small verifyfield"> <div class="col-xs-2" v-for="(v, i) in code"><input :type="type" v-model="v" class="input is-medium" autocomplete=\'off\' @textInput="textInput($event, i)" @keydown="keydown($event, i)" :ref="\'c\'+i" @paste.prevent="paste($event, i)" :disabled="disabled"></input></div> </div>'}),window.$app.defineComponent("component","vue-component-video",{data:function(){return{player:null,handlerDOM:null}},props:["options"],watch:{handler:function(){this.init()},options:{handler:function(){this.init()},deep:!0}},computed:{handler:function(){return null!=this.options.handler?this.options.handler:"embeded"},link:function(){return new RegExp("[?|&]static=1","i").test(location.search)?this.options.embeded.replace("autoplay=1",""):this.options.embeded},sources:function(){return[{src:this.options.url,type:this.options.type}]}},beforeDestroy:function(){this.player&&this.player.dispose()},mounted:function(){this.init()},methods:{init:function(){var e,s=this,n=VideoHelper.getProvider(this.options,!1);n&&(null!=n.t?this.options.handler="player":(this.options.embeded=n.embeded(n.match),this.options.handler="embeded")),"player"==this.handler?(e=[],n.s&&e.push(n.s),$mx.lazy("//cdn.jsdelivr.net/npm/video.js@7.1.0/dist/video.min.js","videoplayer.css",function(){$mx.lazy(e,[],function(){s.handlerDOM=s.handler;var i=null;s.options.poster&&(i="//"+s.$account.storage_domain+"/p/"+s.options.poster.filename),s.$nextTick(function(){var e,t;s.player?(s.player.src(s.sources),s.player.poster(i)):(e=[{src:s.options.url,type:"function"==typeof n.t?n.t(n.match[1]):n.t}],t={poster:i,controls:null==s.options.has_controls||s.options.has_controls,autoplay:s.options.is_autoplay,loop:null!=s.options.is_loop&&s.options.is_loop,controlBar:{volumePanel:{inline:!1}},sources:e},null!=n.techOrder&&(t.techOrder=n.techOrder),null!=s.options.is_playsinline&&s.options.is_playsinline&&(t.playsinline=!0),s.player=videojs(s.$refs.videoPlayer,t))})})})):this.handlerDOM=this.handler}},template:'<div> <div class="video-container" v-show="handlerDOM == \'embeded\'"> <iframe frameborder="0" :src="link" allowfullscreen="1" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" v-if="handlerDOM == \'embeded\'"></iframe> </div> <div class="video-container" v-show="handlerDOM == \'player\'"> <video ref="videoPlayer" class="video-js vjs-fill" v-if="handlerDOM == \'player\' || player"></video> </div> </div>'}),window.$app.defineComponent("pages","vue-pages-blocks-form-addons",{props:{disabled:{type:Boolean,default:!1},values:Object,variants_block:{type:Object,default:[]},variants_addons:{type:Object,default:[]},block_id:Number,block_type_id:Number,loading:{type:Boolean,default:!1},addons:{type:Object,default:null},addonsLoadingEndpoint:{type:String,default:"pages/blocks/addons"},addons_values:Object,parent:Object,addon_target_except:String},watch:{values:{handler:function(){this.checkFields()},deep:!0}},created:function(){var i=this;this.addonsLoadingEndpoint&&null==this.addons&&(this.loading=!0,this.$api.get(this.addonsLoadingEndpoint,{block_id:this.block_id,block_type_id:this.block_type_id}).then(function(e){var t;"success"==e.result&&(t=e.response.pages.block,i.addons=t.addons,_.each(t.addons_fields,function(e,t){i.values.fields_extended.push({title:t,fields:e})}),i.variants_addons=null!=t.variants.addons?t.variants.addons:{},_.each(t.addons_values,function(e,t){i.$set(i.addons_values,t,e)}),i.checkFields(),t.addons.phrases&&window.i18n.extend(t.addons.phrases)),i.loading=!1}).catch(function(){i.loading=!1}))},methods:{chooseAddon:function(){this.checkFields()},checkFields:function(){var t,s,n=this;null!=this.values.fields&&(t=_.map(this.values.fields,function(e){return e.idx}),_.each(this.values.fields_extended,function(e){_.each(e.fields,function(e){return t.push(e.idx)})}),_.each(this.addons_values,function(e){if(null!=e.options&&null!=e.options.fields)for(i=0;i<e.options.fields.length;i++)-1==t.indexOf(e.options.fields[i].idx)&&(e.options.fields[i].idx=null)})),-1!=[3,6,2,15].indexOf(this.block_type_id)&&(_.each(this.addons_values,function(e,t){e.on&&_.intersection(["link","banner","socialnetworks","messenger"],n.addons.addons[t].target).length&&(null==e.options&&(e.options={}),null==e.options.slots&&(e.options.slots={}))}),3!=this.block_type_id&&6!=this.block_type_id||(_.each(this.addons_values,function(e,t){null==e.options&&n.$set(e,"options",{}),null!=e.options.slots&&_.size(e.options.slots)||n.$set(e.options,"slots",{})}),s={},_.each(this.variants_block.list,function(e){_.each(e.items,function(e,t){return s[t]=e})}),this.$set(this.variants_block,"slots",{}),_.each(this.values.items,function(e){n.$set(n.variants_block.slots,e.n,s[e.n].title)})),2!=this.block_type_id&&15!=this.block_type_id||this.$set(this.variants_block,"slots",{link:""}))},loadEntry:function(e){return e="vue-addons-addon-"+e+"-entry",window.$app.loadComponent(e),e},getVariants:function(e){return null!=this.variants_addons[e]?this.variants_addons[e]:{}}},template:'<section class="modal-card-body-blocks"> <section class="message is-warning" v-if="addons && addons.addons_amount"> <div class="message-body"><slot name="message"></slot></div> </section> <section> <div v-if="addons && addons.addons_amount"> <div class="label-pro-container"> <div v-for="(f, addon_id) in addons.addons" v-if="f.addon_id != undefined && (!addon_target_except || f.target.indexOf(addon_target_except) == -1)" class="form-fields-item" :class="{in: (addons_values[addon_id] != undefined) && addons_values[addon_id].on, disabled: f.is_active == 0 || disabled}"> <div class="form-fields-item-title"> <span style="margin-left: 0"> <b-checkbox v-model="addons_values[addon_id].on" :disabled="f.is_active == 0 || disabled" @input="chooseAddon(addon_id)"><b>{{f.addon_title}}</b></b-checkbox> </span> </div> <div class="form-fields-item-options" v-if="f.is_has_options && (addons_values[addon_id] != undefined) && addons_values[addon_id].on && f.is_active != 0"> <component v-bind:is="loadEntry(f.addon_name)" :values="values" :addons="addons" :addon="f" :variants="getVariants(f.addon_name)" :variants_block="variants_block" :options.sync="addons_values[addon_id].options"></component> </div> </div> </div> </div> <div v-else class="has-pt-4 has-pb-4 has-text-centered" :class="{disabled: disabled}"> <div class="has-mb-2"><i class="fa fal fa-cog fa-5x has-text-grey-light" :class="{\'is-invisible\': loading}"></i></div> <div v-if="loading" class="has-text-grey">{{\'Загрузка данных\'|gettext}}</div> <div v-else><slot name="empty"></slot></div> <router-link v-if="!loading" :to="{name: \'addons\'}" @click.native="parent.close()">{{\'Посмотреть доступные модули\'|gettext}}</router-link> </div> <b-loading :is-full-page="false" :active.sync="loading"></b-loading> </section> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-form-animations",{data:function(){return{has_animation:!1,last_animation:"blink"}},props:["values","info","variants"],created:function(){this.has_animation=""!=this.values.animation,this.has_animation&&(this.last_animation=this.values.animation)},watch:{has_animation:function(e){!this.values.animation&&e&&(this.values.animation=this.last_animation),e||(this.last_animation=this.values.animation,this.values.animation="")}},template:'<div> <div class="has-mb-2"> <mx-toggle v-model="has_animation" :title="\'Анимация\'|gettext" :disabled="info.is_readonly"></mx-toggle> </div> <div class="buttons-chooser-list is-animation has-mb-2 row row-small" v-if="has_animation"> <div v-for="(v, id) in variants.animations" class="col-xs-6 col-sm-4 col-md-4"> <div class="buttons-chooser" :class="[{in: values.animation == id, \'has-animation\': values.animation == id}, (values.animation == id)?(\'has-animation-\'+id):\'\']" @click="values.animation = id">{{v}}</div> </div> </div> </div>'}),window.$app.defineComponent("pages","vue-pages-blocks-form-design-link",{props:["values","info"],created:function(){var e=this.$account.theme;this.values.text||(this.values.text=e.link.color),this.values.subtitle||(this.values.subtitle=e.link.subtitle.color),this.values.bg||(this.values.bg=e.link.bg)},template:'<div class="label-pro-container"> <div class="tag is-pro" v-if="!$auth.isAllowTariff(\'pro\')" v-tippy :content="\'Эта возможность доступна<br>на pro тарифе\'|gettext">pro</div> <div :class="{disabled: !$auth.isAllowTariff(\'pro\')}"> <div class="has-mb-2"><mx-toggle v-model=\'values.on\' :title="\'Свои настройки дизайна\'|gettext" :disabled="info.is_readonly"></mx-toggle></div> <div v-if="values.on"> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.bg" :label="\'Цвет фона ссылки\'|gettext" :disabled="info.is_readonly" :colors="[$account.theme.link.bg]"></vue-component-colorpicker> </div> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.text" :label="\'Цвет заголовка ссылки\'|gettext" :disabled="info.is_readonly" :colors="[$account.theme.link.color]"></vue-component-colorpicker> </div> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.subtitle" :label="\'Цвет подзаголовка ссылки\'|gettext" :disabled="info.is_readonly" :colors="[$account.theme.link.subtitle.color]"></vue-component-colorpicker> </div> <slot></slot> </div> </div> </div>'}),window.$app.defineComponent("pages","vue-pages-blocks-form-design",{props:["values","info"],created:function(){var e=this.$account.theme;this.values.text||(this.values.text=e.link.color),this.values.bg||(this.values.bg=e.link.bg)},template:'<div class="label-pro-container"> <div class="tag is-pro" v-if="!$auth.isAllowTariff(\'pro\')" v-tippy :content="\'Эта возможность доступна<br>на pro тарифе\'|gettext">pro</div> <div :class="{disabled: !$auth.isAllowTariff(\'pro\')}"> <div class="has-mb-2"><mx-toggle v-model=\'values.on\' :title="\'Свои настройки дизайна\'|gettext" :disabled="info.is_readonly"></mx-toggle></div> <div v-if="values.on"> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.bg" :label="\'Цвет фона кнопки\'|gettext" :disabled="info.is_readonly" :colors="[$account.theme.link.bg]"></vue-component-colorpicker> </div> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.text" :label="\'Цвет текста кнопки\'|gettext" :disabled="info.is_readonly" :colors="[$account.theme.link.color]"></vue-component-colorpicker> </div> <slot></slot> </div> </div> </div>'}),window.$app.defineComponent("pages","vue-pages-blocks-form-modal",{data:function(){return{isUpdating:!1,isDeleting:!1,isFetching:!1,isFetchingBlockType:null,canDelete:!1,tabs:[],defaultsTabs:[],currentTab:"common",currentBlock:null,tariff:null,modify:{values:!1,options:!1,section:!1,addons:!1},baseValues:{},baseOptions:{},baseSection:{},baseAddonsValues:{},values:{},options:{},variants:{},section:{on:!1},block:{title:null},permit:{},archives:[],archivesLoaded:!1,info:{},types:[],typesKeys:[],isAnimatedTariff:!1,allowSave:!0,block_type_id:null,block_type_name:null,addon_target_except:null,addons_values:{}}},created:function(){var t=this;this.block_id?this.fetchData(!0):(this.defaultsTabs=this.tabs=[{name:"common",title:this.$gettext("Стандартные блоки")},{name:"archives",title:this.$gettext("Из архива")}],this.types=this.$account.blocks,this.typesKeys=[],_.each(this.types,function(e){t.typesKeys[e.block_type_id]=e}))},watch:{currentTab:function(e){for(var t=this,i=0,i=0;i<this.tabs.length&&this.tabs[i].name!=e;i++);var s=this.$refs.menu.children[i];scrollIt(s.offsetLeft-(this.$refs.menu.offsetWidth-s.offsetWidth)/2,"x",this.$refs.menu,300),"archives"!=e||this.archivesLoaded||(this.isFetching=!0,this.$api.get("pages/blocks/archives").then(function(e){t.archives=e.response.pages.blocks.archives,t.isFetching=!1,t.archivesLoaded=!0}))},values:{handler:function(e){this.modify.values=0<_.size(_.differenceWith(this.baseValues,e))},deep:!0},options:{handler:function(e){this.modify.options=0<_.size(_.differenceWith(this.baseOptions,e))},deep:!0},section:{handler:function(e){this.modify.section=0<_.size(_.differenceWith(this.baseSection,e))},deep:!0},addons_values:{handler:function(e){_.size(e)&&!_.size(this.baseAddonsValues)?this.baseAddonsValues=this.$clone(e):this.modify.addons_values=0<_.size(_.differenceWith(this.baseAddonsValues,e))},deep:!0}},computed:{isChoosingForm:function(){return!this.block_type_id&&!this.block_id&&this.$device.mobile},isModify:function(){return _.sum(_.map(this.modify,function(e){return e?1:0}))},isAllowTariff:function(){return this.$auth.isAllowTariff(this.tariff)}},props:["block_id","page_id","before_block_id","before_section_id"],mixins:[FormModel],methods:{setTabs:function(e){var t={options:{name:"options",title:this.$gettext("Настройки")},addons:{name:"addons",title:this.$gettext("Модули")},section:{name:"section",title:this.$gettext("Секция")},statistics:this.block_id&&this.info.is_allow_statistics?{name:"statistics",title:this.$gettext("Статистика")}:null};this.tabs=_.filter(_.map(e,function(e){return"string"==typeof e?t[e]:e}))},fetchData:function(e){var i=this;this.isFetching=e,this.$api.get("pages/blocks/get",{block_id:this.block_id}).then(function(e){i.isFetching=!1;var t=e.response.pages.block;i.permit=t.permit,i.values=t.values,i.section=t.section,i.options=t.options,i.variants=t.variants,i.tariff=t.tariff,i.info=t.info,i.page_id=t.page_id,i.block_type_id=t.block_type_id,i.block_type_name=t.block_type_name,i.addon_target_except=null,i.$nextTick(function(){i.baseValues=i.$clone(i.values),i.baseOptions=i.$clone(i.options),i.baseSection=i.$clone(i.section)}),i.$auth.isAllowTariff(t.tariff)||(i.info.is_readonly=!0,i.canDelete=!0),i.currentBlock="vue-pages-blocks-"+t.block_type_name})},close:function(){this.isModify?this.$confirm(this.$gettext("У вас есть несохраненные изменения. Вы действительно хотите выйти?"),"is-danger",{yes:this.$gettext("Выйти без сохранения"),no:this.$gettext("Вернуться назад")}).then(this.$parent.close):this.$parent.close()},action:function(e,t){return this.$api.get("pages/blocks/action",{block_id:this.block_id,name:e,params:t},this)},chooseType:function(e){var i=this;this.isFetchingBlockType=e.block_type_id,this.$api.get("pages/blocks/info",{block_type_id:e.block_type_id}).then(function(e){i.isFetchingBlockType=null;var t=e.response.pages.block;i.variants=t.variants,i.values=t.defaults.values,i.section={id:null},i.options=t.defaults.options,i.block_type_id=t.block_type_id,i.block_type_name=t.block_type_name,i.addon_target_except=null,i.info=t.info,i.tariff=t.tariff,i.$nextTick(function(){i.baseValues=i.$clone(i.values),i.baseOptions=i.$clone(i.options),i.baseSection=i.$clone(i.section)}),i.$auth.isAllowTariff(t.tariff)||(i.info.is_readonly=!0),i.currentBlock="vue-pages-blocks-"+t.block_type_name})},back:function(){this.currentBlock=null,this.currentTab="common",this.block_type_id=null,this.tariff=null,this.tabs=this.defaultsTabs,this.info=[],this.values=[],this.addons_values={},this.variants={}},restoreBlock:function(t){var i=this;this.isUpdating=!0,this.$api.get("pages/blocks/restore",{block_id:t,page_id:this.page_id,before_block_id:this.before_block_id,before_section_id:this.before_section_id},this).then(function(e){i.isUpdating=!1,"success"==e.result&&(i.$parent.close(),i.$parent.$parent.scrollToBlock(t))}).catch(function(){i.isUpdating=!1})},onAction:function(e){switch(e){case"delete":this.deleteBlock("delete");break;case"archive":this.deleteBlock("archive");break;case"clone":this.cloneBlock()}},cloneBlock:function(){var t=this;this.isUpdating=!0,this.$api.get("pages/blocks/clone",{block_id:this.block_id},this.$refs.model).then(function(e){t.isUpdating=!1,"success"==e.result&&t.$parent.close()})},deleteBlock:function(e){var t=this;this.$confirm("delete"==e?this.$gettext("Вы уверены что хотите удалить этот блок?"):this.$gettext("Вы уверены что хотите отправить этот блок в архив?"),"delete"==e?"is-danger":"is-warning","delete"==e?{yes:this.$gettext("Удалить")}:{}).then(function(){t.isDeleting=!0,t.$api.get("pages/blocks/"+e,{block_id:t.block_id},t.$refs.model).then(function(e){t.isDeleting=!1,"success"==e.result&&t.$parent.close()}).catch(function(){t.isDeleting=!1})})},save:function(){var t=this;this.isUpdating=!0;var e=this.$refs.model.prepareValues(),i=this.$refs.section.prepareValues();this.$api.post("pages/blocks/set",{block_id:this.block_id,page_id:this.page_id,before_block_id:this.before_block_id,before_section_id:this.before_section_id,block_type_id:this.block_type_id,values:e,options:this.options,addons_values:this.addons_values,section:i},this.$refs.model).then(function(e){t.isUpdating=!1,"success"==e.result?(t.$parent.close(),!t.block_id&&e.response.block_id&&t.$parent.$parent.scrollToBlock(e.response.block_id)):null!=t.$refs.model.showErrors&&t.$refs.model.showErrors(e)}).catch(function(){t.isUpdating=!1})},scrollToTariff:function(){var e,t=this;this.isAllowTariff||(e=this.$refs.tariffMessage,scrollIt(0,"y",$mx(e).closest(".modal")[0],400),this.isAnimatedTariff=!0,setTimeout(function(){t.isAnimatedTariff=!1},1e3))}},template:'<div class="modal-card is-choosing-form" :class="{\'modal-view\': isChoosingForm}"> <header class="modal-card-head"> <p class="modal-card-title" v-if="block.title">{{block.title}}</p> <p class="modal-card-title" v-else-if="isFetching">{{\'Загрузка\'|gettext}}</p> <p class="modal-card-title" v-else>{{\'Новый блок\'|gettext}}</p> <button class="modal-close" :class="{\'is-small\': isChoosingForm, \'is-large\': !isChoosingForm}" @click="close"></button> </header> <ul class="nav nav-tabs nav-tabs-scroll has-text-left" v-if="tabs.length> 1" ref="menu"> <li v-for="(tab, index) in tabs" :class="{active: currentTab== tab.name}"><a @click="currentTab = tab.name">{{tab.title|gettext}}</a></li> </ul> <section class="message is-danger" style="flex-shrink: 0;flex-grow: 0" v-if="!isAllowTariff"> <div class="message-body" :class="{\'shake animated\': isAnimatedTariff}" ref="tariffMessage"><span v-if="tariff == \'pro\' || tariff== \'plus\'">{{\'Доступно на pro-тарифе\'|gettext}}</span><span v-if="tariff == \'business\'">{{\'Доступно на business-тарифе\'|gettext}}</span> <a @click="$form.open(\'vue-index-pricing-form\')" class=\'is-pulled-right\'>{{\'Подробнее\'|gettext}} <i class="fa fa-angle-right" style="margin-left: 5px"></i></a></div> </section> <component v-bind:is="currentBlock" ref=\'model\' :values="values" :options="options" :section.sync="section" :variants="variants" :info="info" :block_id="block_id" :block_type_id="block_type_id" :addon_target_except.sync="addon_target_except" :block="block" :current-tab="currentTab" :tabs="tabs" @update:tabs="setTabs($event)" v-if="currentBlock" :parent="$parent" :allowSave.sync="allowSave"> <template> <vue-pages-blocks-form-section v-model="section" ref="section" :disabled="info.is_readonly" :class="{\'is-hidden\': currentTab != \'section\'}"></vue-pages-blocks-form-section> <keep-alive> <vue-pages-blocks-form-addons v-if="currentTab == \'addons\'" :block_id="block_id" :block_type_id="block_type_id" :addon_target_except="addon_target_except" :values="values" :variants_block="variants" :addons_values.sync="addons_values" :disabled="info.is_readonly" :parent="parent" @click="$parent.scrollToTariff"> <template slot="message">{{\'Вы можете выбрать модули которые будут срабатывать для данного блока\'|gettext}}</template> <template slot="empty">{{\'Модули для данного блока еще не подключены\'|gettext}}</template> </vue-pages-blocks-form-addons> </keep-alive> <keep-alive> <vue-pages-blocks-form-statistics v-if="currentTab == \'statistics\'" :page_id="values.page_id" :block_id="block_id"></vue-pages-blocks-form-statistics> </keep-alive> </template> </component> <section class="modal-card-body" v-if="!currentBlock && currentTab== \'common\'"> <div class="row row-small" style="margin-bottom: -1rem"> <div class="col-sm-4 col-xs-6 has-mb-2" v-for="f in types" v-if="f.page_types == null || f.page_types.indexOf($page.data.page.page_type) != -1"><button @click="chooseType(f)" class="button is-block-button is-default btn-block" :class="{\'is-loading\': isFetchingBlockType && isFetchingBlockType== f.block_type_id}" :disabled="isFetching || isFetchingBlockType"> <div v-if="!$auth.isAllowTariff(f.tariff) && (f.tariff == \'pro\' || f.tariff == \'plus\')" class="tag is-pro" v-tippy :content="\'Этот блок доступен<br>на pro-тарифе\'|gettext">pro</div> <div v-if="!$auth.isAllowTariff(f.tariff) && (f.tariff == \'business\')" class="tag is-danger is-business" v-tippy :content="\'Этот блок доступен<br>на business-тарифе\'|gettext">biz</div> <div v-html="f.icon"></div> <div>{{f.block_type_title|gettext}}</div> </button></div> </div> </section> <section class="modal-card-body" v-if="!currentBlock && currentTab== \'archives\'"> <div v-if="!archives.length" class="has-text-centered has-text-grey"> <i class="fal fa-archive has-text-grey-light has-mt-2 has-mb-2 fa-4x"></i> <div>{{\'Пока ничего нет\'|gettext}}</div> </div> <button class="button btn-block is-fullwidth has-p-2" :class="{\'has-mt-2\': i}" style="justify-content: space-between" v-for="(f, i) in archives" @click="restoreBlock(f.block_id)"> <span class="has-mr-1" style="display: flex;align-items: center;overflow:hidden"> <span v-html="typesKeys[f.block_type_id].icon" class="is-block-button is-archive"></span> {{typesKeys[f.block_type_id].block_type_title|gettext}}<span class="has-ml-1" style="white-space: nowrap;overflow: hidden;text-overflow: ellipsis;opacity:.4" v-if="f.title">— {{f.title}}</span></span> <span class="has-text-grey">{{f.tms_archived|date}}</span> </button> </section> <footer class="modal-card-foot level" v-if="currentBlock"> <div class="level-left"> <vue-component-action-button @action="onAction" :title="\'Действие\'|gettext" v-if="block_id && (!info.is_readonly || canDelete)"> <template slot="actions"> <b-dropdown-item value="clone"><i class="fa fa-clone"></i> {{\'Дублировать\'|gettext}}</b-dropdown-item> <hr class="dropdown-divider" aria-role="menuitem"> <b-dropdown-item value="archive" v-if="info.permit.can_archive"><i class="fa fa-archive"></i> {{\'В архив\'|gettext}}</b-dropdown-item> <hr class="dropdown-divider" aria-role="menuitem" v-if="info.permit.can_archive"> <b-dropdown-item value="delete" class="has-text-danger" :class="{disabled: !info.permit.can_delete}"><i class="fa fa-trash-alt"></i> {{\'Удалить\'|gettext}}</b-dropdown-item> </template> </vue-component-action-button> <button v-else class="button is-dark is-hidden-tablet" type="button" @click="close">{{\'Отмена\'|gettext}}</button> </div> <div class="level-right"> <button class="button is-primary" :class="{\'is-loading\': isUpdating}" @click="save" :disabled="info.is_readonly || !allowSave">{{\'Сохранить\'|gettext}}</button> </div> </footer> <footer class="modal-card-foot" v-if="!currentBlock" :class="{\'is-hidden-mobile\': isChoosingForm}"> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Закрыть\'|gettext}}</button> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("pages","vue-pages-blocks-form-options",{data:function(){return{schedule_days:[],date_from:null,date_until:null,time_from:null,time_until:null,allowPro:!1,first_day_week:this.$getFirstDayWeek(),weekdays:this.$getDaysNames()}},props:["values","info","variants"],computed:{weekdays_schedule:function(){var e=[];this.first_day_week||e.push({index:6,weekday:this.weekdays[0]});for(var t=1;t<7;t++)e.push({index:t-1,weekday:this.weekdays[t]});return this.first_day_week&&e.push({index:6,weekday:this.weekdays[0]}),e},daysSummary:function(){var e=this.schedule_days;return 7==e.length?this.$gettext("Каждый день"):5==e.length&&-1==e.indexOf(5)&&-1==e.indexOf(6)?this.$gettext("Будние дни"):2==e.length&&-1!=e.indexOf(5)&&-1!=e.indexOf(6)?this.$gettext("Выходные дни"):""}},watch:{time_from:function(){this.onInputDates()},time_until:function(){this.onInputDates()}},created:function(){function e(e){return e=e.split("-"),new Date(e[0],e[1]-1,e[2])}var t,i;this.allowPro=this.$auth.isAllowTariff("pro"),this.date_from=this.values.date_from?e(this.values.date_from):null,this.date_until=this.values.date_until?e(this.values.date_until):null,this.values.time_from&&(t=this.values.time_from.split(":"),this.time_from=new Date(0,0,0,t[0],t[1])),this.values.time_until&&(i=this.values.time_until.split(":"),this.time_until=new Date(0,0,0,i[0],i[1]));for(var s=0;s<7;s++)this.values.schedule_days&Math.pow(2,s)&&this.schedule_days.push(s)},methods:{onInputDates:function(){this.values.date_from=this.date_from?date_format("Y-m-d",this.date_from):null,this.values.date_until=this.date_until?date_format("Y-m-d",this.date_until):null,this.values.time_from=this.time_from?date_format("H:i",this.time_from):null,this.values.time_until=this.time_until?date_format("H:i",this.time_until):null,this.values.schedule_days=_.reduce(this.schedule_days,function(e,t){return e+Math.pow(2,t)},0)}},template:'<div> <div class="has-mb-2"> <mx-toggle v-model="values.is_visible" :title="\'Скрыть блок\'|gettext" :disabled="info.is_readonly" :invert="true"></mx-toggle> </div> <div class="label-pro-container"> <div v-if="!allowPro" class="tag is-pro" v-tippy :content="\'Эта возможность доступна<br>на pro тарифе\'|gettext">pro</div> <div :class="{disabled: !values.is_visible}"> <div class="has-mb-2"> <mx-toggle v-model="values.is_schedule" :title="\'Показывать по расписанию\'|gettext" :disabled="info.is_readonly || !allowPro"></mx-toggle> </div> <div class="has-mb-2" v-if="values.is_schedule"> <div class="row row-small has-mb-1"> <label class="label col-xs-2 col-sm-1"><p class="form-control-static">{{\'От\'|gettext}}:</p></label> <div class="col-xs-7 col-sm-8"> <vue-component-datepicker v-model="date_from" icon="calendar-alt" @input="onInputDates" :disabled="!values.is_schedule || info.is_readonly"></vue-component-datepicker> </div> <div class="col-xs-3"> <div class="has-feedback"> <b-clockpicker icon="clock" v-model="time_from" :disabled="!values.is_schedule || info.is_readonly" hour-format="24"></b-clockpicker> <a class="form-control-feedback has-text-grey-light" @click="time_from = null" :class="{disabled: info.is_readonly}" v-if="time_from"><i class="fal fa-times"></i></a> </div> </div> </div> <div class="row row-small"> <label class="label col-xs-2 col-sm-1"><p class="form-control-static">{{\'До\'|gettext}}:</p></label> <div class="col-xs-7 col-sm-8"> <vue-component-datepicker v-model="date_until" @input="onInputDates" :disabled="!values.is_schedule || info.is_readonly"></vue-component-datepicker> </div> <div class="col-xs-3"> <div class="has-feedback"> <b-clockpicker icon="clock" v-model="time_until" :disabled="!values.is_schedule || info.is_readonly" hour-format="24"></b-clockpicker> <a class="form-control-feedback has-text-grey-light" @click="time_until = null" :class="{disabled: info.is_readonly}" v-if="time_until"><i class="fal fa-times"></i></a> </div> </div> </div> </div> <div> <mx-toggle v-model="values.is_schedule_days" :title="\'Показывать по дням недели\'|gettext" :disabled="info.is_readonly || !allowPro"></mx-toggle> </div> <div class="has-mt-2 form-horizontal" v-if="values.is_schedule_days"> <div class="row row-small"> <label class="label col-xs-2 col-sm-1 is-hidden-mobile"><p class="form-control-static">{{\'Дни\'|gettext}}:</p></label> <div class="col-xs-12 col-sm is-flex schedule-days-chooser"> <b-field :class="[\'is-marginless\', {disabled: !values.is_schedule_days}]"> <b-checkbox-button v-for="w in weekdays_schedule" v-model="schedule_days" :native-value="w.index" type="is-dark" @input="onInputDates" class="choose-days">{{w.weekday|gettext}}</b-checkbox-button> </b-field> <p class="form-control-static has-text-grey has-sm-ml-1">{{daysSummary}}</p> </div> </div> </div> </div> </div> </div>'}),window.$app.defineComponent("pages","vue-pages-blocks-form-section",{props:{value:Object,disabled:Boolean},data:function(){return{base:null}},watch:{value:{handler:function(e){this.$emit("input",e)},deep:!0}},created:function(){this.checkValue(this.value)},computed:{disallow:function(){return this.disabled||!this.$auth.isAllowTariff("pro")},disallowElements:function(){return this.disallow||!this.value.id}},methods:{checkValue:function(e){e.id||1!=_.size(e)?e.id&&(null==this.$account.theme.sections||null==this.$account.theme.sections[e.id]?(this.base=this.getDefault(),this.value=_.clone(_.merge(this.base,e,{id:"new"},!0))):(this.base=_.merge(this.getDefault(),this.$account.theme.sections[e.id],!0),null!=this.base.bg.picture&&null!=this.base.bg.picture.picture_id&&this.base.bg.picture.picture_id&&delete this.base.bg.picture.picture_id,this.value=_.clone(_.merge(this.base,e,!0))),this.$emit("input",this.value)):(this.base=this.getDefault(),this.value=Object.assign(this.$clone(e),this.base),this.value.id=null,this.$emit("input",this.value))},sectionPreviewStyles:function(e){var t=this.$account.theme;return{"--data-color1":e&&e.bg&&e.bg.color1?e.bg.color1:t.bg.color1,"--data-color2":e&&e.link&&e.link.bg?e.link.bg:e&&e.screen&&e.screen.color?e.screen.color:t.link.bg}},changeSection:function(e){switch(e){case null:case"new":this.base=this.getDefault(),this.value=_.clone(this.base);break;default:this.base=_.merge(this.getDefault(),this.$account.theme.sections[e],!0),null!=this.base.bg.picture&&null!=this.base.bg.picture.picture_id&&this.base.bg.picture.picture_id&&delete this.base.bg.picture.picture_id,this.value=_.clone(this.base)}this.value.id=e,this.$emit("input",this.value)},getDefault:function(){return StylesFactory.getDefaultSection(this.$account.theme)},prepareValues:function(){var e=this.$clone(this.value);if(null==e.id)return{id:null};var t=e.id;if(delete e.id,_.isEqual(e,this.getDefault()))return{id:null};if("new"==t){var i=_.differenceWith(e,this.getDefault());return i.id=t,i}var s=_.merge(this.getDefault(),this.$account.theme.sections[t],!0);if(_.isEqual(e,s))return{id:t};var n=_.differenceWith(e,s);return n.id=t,n},properyChanged:function(e,t,i,s){var n=3<arguments.length&&void 0!==s&&s;return this.disabled||!this.value.id?null:StylesFactory.properyChanged(e,t,i,n,this)}},template:'<section class="modal-card-body-blocks"> <section class="message is-warning"> <div class="message-body" style="display:flex;justify-content: space-between;padding-right: 22px;"> {{\'Секции позволяют визуально объединять несколько блоков вместе\'|gettext}} <vue-component-help-button icon="simple" :target="{name: \'video\', params: {guide_id: 23}}"/> </div> </section> <section> <div class="label-pro-container"> <div class="tag is-pro" v-if="disallow" v-tippy :content="\'Эта возможность доступна<br>на pro тарифе\'|gettext">pro</div> <div :class="{disabled: disallow}"> <vue-component-dropdown position="is-bottom-right is-fullwidth" v-model="value.id" @input="changeSection" :disabled="disallow" :title="\'Секция\'|gettext" button-class="button is-default is-fullwidth is-focusable"> <span slot="button" style="display: flex"><i class="section-preview" :style="sectionPreviewStyles(value)" v-if="value.id"></i><span v-if="value.id == \'new\'">{{\'Новая секция\'|gettext}}</span><span v-else-if="value.id">{{\'Секция\'|gettext}} {{value.id}}</span><span v-else class="has-text-grey">-- {{\'Секция выключена\'|gettext}} --</span></span> <b-dropdown-item aria-role="listitem" :value="null" class="has-text-grey">-- {{\'Секция выключена\'|gettext}} --</b-dropdown-item> <b-dropdown-item aria-role="listitem" value="new" style="display: flex"><i class="section-preview" :style="sectionPreviewStyles(null)"></i>{{\'Новая секция\'|gettext}}</b-dropdown-item> <b-dropdown-item custom aria-role="menuitem" class="has-text-grey has-text-nowrap" v-if="_.size($account.theme.sections)> 1">{{\'Дизайн\'|gettext}}</b-dropdown-item> <b-dropdown-item aria-role="listitem" v-for="(s, i) in $account.theme.sections" v-if="i != \'_\'" :value="i" style="display: flex"><i class="section-preview" :style="sectionPreviewStyles(s)"></i>{{\'Секция\'|gettext}} {{i}}</b-dropdown-item> </vue-component-dropdown> </div> </div> </section> <section class="design-panel"> <h3 class="has-text-grey has-mb-3 has-text-centered-mobile">{{\'Общие\'|gettext}}</h3> <div class="link-styles-container has-mb-2"> <label class="form-control-static" :class="{disabled: disabled || !value.id}"><span :class="properyChanged(base.padding, value.padding, \'padding.top\')" @click="properyChanged(base.padding, value.padding, \'padding.top\', true)">{{\'Отступ сверху\'|gettext}}</span></label> <div style="width:120px"> <div class="row row-small"> <div class="col-xs col-shrink" style="display: flex;align-items: center"> <b style="width:25px"> <b v-if="value.padding.top">{{value.padding.top}}x</b> <b v-else>{{\'Нет\'|gettext}}</b> </b> </div> <div class="col-xs"> <b-slider :min="0" :max="4" :tooltip="false" v-model="value.padding.top" size="is-line" rounded :disabled="disallowElements"> <template v-for="(s, i) in [0, 1, 2, 3, 4, 5]"> <b-slider-tick :value="i" :key="i"></b-slider-tick> </template> </b-slider> </div> </div> </div> </div> <div class="link-styles-container has-mb-2"> <label class="form-control-static" :class="{disabled: disallowElements}"><span :class="properyChanged(base.padding, value.padding, \'padding.bottom\')" @click="properyChanged(base.padding, value.padding, \'padding.bottom\', true)">{{\'Отступ снизу\'|gettext}}</span></label> <div style="width:120px"> <div class="row row-small"> <div class="col-xs col-shrink" style="display: flex;align-items: center"> <b style="width:25px"> <b v-if="value.padding.bottom">{{value.padding.bottom}}x</b> <b v-else>{{\'Нет\'|gettext}}</b> </b> </div> <div class="col-xs"> <b-slider :min="0" :max="4" :tooltip="false" v-model="value.padding.bottom" size="is-line" rounded :disabled="disallowElements"> <template v-for="(s, i) in [0, 1, 2, 3, 4, 5]"> <b-slider-tick :value="i" :key="i"></b-slider-tick> </template> </b-slider> </div> </div> </div> </div> <div class="link-styles-container"> <label class="form-control-static" :class="{disabled: disallowElements || (value.bg.size == \'adaptive\')}"><span :class="properyChanged(base.indent, value.indent, \'indent\')" @click="properyChanged(base.indent, value.indent, \'indent\', true)">{{\'Отступ от края\'|gettext}}</span></label> <mx-toggle v-model="value.indent.on" :space-between="true" :disabled="disallowElements || (value.bg.size == \'adaptive\')"></mx-toggle> </div> <div class="has-mt-2 link-styles-container" v-if="value.indent.on"> <label class="form-control-static"><span :class="properyChanged(base.indent, value.indent, \'indent.radius\')" @click="properyChanged(base.indent, value.indent, \'indent.radius\', true)">{{\'Скругление секции\'|gettext}}</span></label> <vue-component-design-radius-chooser v-model="value.indent.radius"></vue-component-design-radius-chooser> </div> </section> <section class="design-panel"> <h3 class="has-text-grey has-mb-3 has-text-centered-mobile">{{\'Фон\'|gettext}}</h3> <vue-component-background-editor v-model="value.bg" :base="base.bg" :disabled="disallowElements" :sizes="value.indent.on?[\'width\', \'tile\']:[\'adaptive\', \'width\', \'tile\']" :withOpacityBackground="true"/> </section> <section class="design-panel"> <h3 class="has-text-grey has-mb-3 has-text-centered-mobile">{{\'Текст\'|gettext}}</h3> <div class="has-mb-2 with-label color-picker-container"> <label class="form-control-static" :class="{disabled: disallowElements}"><span :class="properyChanged(base.heading, value.heading, \'heading\')" @click="properyChanged(base.heading, value.heading, \'heading\', true)">{{\'Заголовок\'|gettext}}</span></label> <div class="component-group"> <vue-component-font-weight-chooser v-model="value.heading.weight" :with-arrow="false" :disabled="disallowElements"/> <vue-component-text-transform-chooser v-model="value.heading.transform" :with-arrow="false" :disabled="disallowElements"/> <vue-component-font-chooser v-model="value.heading.font" view="name" :disabled="disallowElements"/> <vue-component-colorpicker v-model="value.heading.color" design="circle" :withArrow="false" :disabled="disallowElements" position-horizontal="left"/> </div> </div> <div class="with-label color-picker-container"> <label class="form-control-static" :class="{disabled: disallowElements}"><span :class="properyChanged(base.text, value.text, \'text\')" @click="properyChanged(base.text, value.text, \'text\', true)">{{\'Текст\'|gettext}}</span></label> <div class="component-group"> <vue-component-font-chooser v-model="value.text.font" view="name" :disabled="disallowElements"/> <vue-component-colorpicker v-model="value.text.color" design="circle" :withArrow="false" :disabled="disallowElements" position-horizontal="left"/> </div> </div> </section> <section class="design-panel"> <h3 class="has-text-grey has-mb-3 has-text-centered-mobile">{{\'Ссылки\'|gettext}}</h3> <div class="link-styles-container has-mb-2"> <label class="form-control-static" :class="{disabled: disallowElements}"><span :class="properyChanged(base.link, value.link, \'link\')" @click="properyChanged(base.link, value.link, \'link\', true)">{{\'Цвет заголовка ссылки\'|gettext}}</span></label> <vue-component-colorpicker v-model="value.link.color" :disabled="disallowElements" position-horizontal="left" position-vertical="top"/> </div> <div class="link-styles-container has-mb-2"> <label class="form-control-static" :class="{disabled: disallowElements}"><span :class="properyChanged(base.link.subtitle, value.link.subtitle, \'link.subtitle\')" @click="properyChanged(base.link.subtitle, value.link.subtitle, \'link.subtitle\', true)">{{\'Цвет подзаголовка ссылки\'|gettext}}</span></label> <vue-component-colorpicker v-model="value.link.subtitle.color" :disabled="disallowElements" position-horizontal="left" position-vertical="top"/> </div> <div class="link-styles-container has-mb-2"> <label class="form-control-static" :class="{disabled: disallowElements}"><span :class="properyChanged(base.link, value.link, \'link.bg\')" @click="properyChanged(base.link, value.link, \'link.bg\', true)">{{\'Цвет фона ссылки\'|gettext}}</span></label> <vue-component-colorpicker v-model="value.link.bg" :disabled="disallowElements" position-horizontal="left" position-vertical="top"/> </div> <div class="link-styles-container has-mb-2"> <label class="form-control-static" :class="{disabled: disallowElements}"><span :class="properyChanged(base.link, value.link, \'link.transparent\')" @click="properyChanged(base.link, value.link, \'link.transparent\', true)">{{\'Прозрачность ссылки\'|gettext}}</span></label> <vue-component-design-transparent-cooser v-model="value.link.transparent" :disabled="disallowElements"/> </div> <transition name="fade"> <div class="has-mb-2 link-styles-container" v-if="value.link.transparent"> <label class="form-control-static" :class="{disabled: disallowElements}"><span :class="properyChanged(base.link.border, value.link.border, \'link.border\')" @click="properyChanged(base.link.border, value.link.border, \'link.border\', true)">{{\'Толщина границы\'|gettext}}</span></label> <input type="number" v-model.number="value.link.border.width" max="10" min="0" class="input" style="width: 100px" :disabled="disallowElements"> </div> </transition> <div class="link-styles-container"> <label class="form-control-static" :class="{disabled: disabled || !value.id}"><span :class="properyChanged(base.link.shadow, value.link.shadow, \'link.shadow\')" @click="properyChanged(base.link.shadow, value.link.shadow, \'link.shadow\', true)">{{\'Тень ссылки\'|gettext}}</span></label> <vue-component-design-shadow-chooser v-model="value.link.shadow" :disabled="disabled || !value.id" position-horizontal="left" position-vertical="top"/> </div> </section> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-form-statistics",{data:function(){return{period_title:"",clicks:[],chart:[],isFetching:!1}},props:{page_id:Number,block_id:Number,period:{type:String,default:"day"},period_back:{type:Number,default:0},disabled:{type:Boolean,default:!1}},watch:{period:function(){this.fetchData(["chart","clicks"]),this.period_back=0},period_back:function(){this.fetchData(["clicks"])}},created:function(){this.fetchData(["chart","clicks"])},methods:{fetchData:function(t){var i=this;this.isFetching=!0,this.$api.get("statistics/get",{page_id:this.page_id,block_id:this.block_id,period:this.period,period_back:this.period_back,scope:t}).then(function(e){-1!=t.indexOf("chart")&&(i.chart=_.map(e.response.statistics.chart,function(e,t){return{date:t,hits:e}})),i.clicks=e.response.statistics.clicks,i.period_title=e.response.statistics.period.title,i.isFetching=!1})}},template:'<section> <b-field class="has-tabs-style" :class="{disabled: disabled}"> <b-radio-button v-model="period" type="active" class="is-expanded" native-value="day">{{\'День\'|gettext}}</b-radio-button> <b-radio-button v-model="period" type="active" class="is-expanded" native-value="week">{{\'Неделя\'|gettext}}</b-radio-button> <b-radio-button v-model="period" type="active" class="is-expanded" native-value="month">{{\'Месяц\'|gettext}}</b-radio-button> </b-field> <vue-component-statistics :data="chart" :period="period" :period_back="period_back" :line-show="true" :padding-top="30" class="has-mb-3 is-small" :disabled="disabled"></vue-component-statistics> <div class="field has-addons" :class="{disabled: disabled}"> <p class="control"><button class="button" @click="period_back++"><i class="fas fa-caret-left"></i></button></p> <p class="control is-expanded"><span class="button is-static has-background-white is-fullwidth">{{ period_title }}</span></p> <p class="control"><button class="button" :disabled="period_back == 0" @click="period_back--"><i class="fas fa-caret-right"></i></button></p> </div> <b-table :data="clicks" :loading="isFetching" :disabled="disabled"> <template slot-scope="props"> <b-table-column field="title" :label="\'Заголовок\'|gettext"> {{ props.row.type }} </b-table-column> <b-table-column field="clics" :label="\'Клики\'|gettext" :class=\'{"has-text-grey-light": props.row.clicks == 0}\' numeric>{{ props.row.clicks | number }}</b-table-column> </template> <template slot="empty"> <section class="has-mb-4 has-mt-4 content has-text-grey has-text-centered" v-if="!isFetching"> <p>{{\'Недостаточно данных\'|gettext}}</p> </section> <section class="has-mb-4 has-mt-4 content has-text-grey has-text-centered" v-if="isFetching"> <p>{{\'Загрузка данных\'|gettext}}</p> </section> </template> </b-table> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-avatar",{data:function(){return{isUpdating:!1,isUploading:!1,instagramUpdated:!1,maxFilesize:this.$account.limits.upload_max_filesize,file:null}},props:["values","variants","block","block_id","info","tabs","currentTab"],mixins:[FormModel],created:function(){this.block.title=this.$gettext("Аватар"),this.$emit("update:tabs",[{name:"common",title:this.block.title},"section"])},computed:{maxSizeBytes:function(){if(this.maxFilesize){var e=this.maxFilesize.match(/([0-9]+)([MK])/);return e[1]*("M"==e[2]?1048576:1024)}return this.maxFilesize}},methods:{dropFilesChanged:function(){var i=this;if(/\.(jpe?g|png|gif|svg)$/i.test(this.file.name)){if(this.maxSizeBytes&&this.file.size>this.maxSizeBytes)return this.$alert(this.$gettext("Максимальный размер файла: %s").replace("%s",this.maxFilesize),"is-danger");this.$modal("vue-component-picture-cropper",{file:this.file,cropperOptions:{aspectRatio:1,autoCropArea:1,viewMode:1,zoomable:!1},doneHandler:function(e){var t=new FormData;t.append("file",e),t.append("picture_id",i.$account.profile_id),i.isUploading=!0,i.$http.request({url:"/pictures/upload?target=avatar",method:"post",data:t}).then(function(e){"success"==e.result||"error"==e.result&&i.$alert(e.error,"is-danger"),i.isUploading=!1,i.file=null}).catch(function(){i.isUploading=!1,i.$alert(i.$gettext("Во время загрузки картинки возникла ошибка"))})},cancelHandler:function(){i.file=null}},this)}else this.isUploading=!1,this.$alert(this.$gettext("Недопустимый формат файла"))},updateAvatar:function(){var t=this;this.isUpdating=!0,this.instagramUpdated=!0,this.$parent.action("update").then(function(e){t.isUpdating=!1})},prepareValues:function(){return this.values}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="currentTab == \'common\'"> <div class="media" style="align-items: center"> <img :src="$account.avatar.url" class="is-pulled-left has-mr-3" :class="$account.avatar.size|sprintf(\'profile-avatar profile-avatar-%s\')"> <div class="media-content"> <div> <b-upload v-model="file" @input="dropFilesChanged()" accept=\'image/jpeg,image/png,image/gif,image/svg,image/svg+xml\'> <a class="button is-fullwidth-mobile is-success" :class="{\'is-loading\': isUploading}"><span><i class="fa fas fa-arrow-from-top fa-rotate-180 has-mr-2" :disabled="info.is_readonly"></i>{{\'Загрузить картинку\'|gettext}}</span></a> </b-upload> <button class="button is-fullwidth-mobile is-light has-xs-mt-1" @click="updateAvatar()" :class="{\'is-loading\': isUpdating}" :disabled="info.is_readonly || instagramUpdated" v-if="info.has_connected_account && block_id">{{\'Импортировать из Instagram\'|gettext}}</button> </div> </div> </div> </section> <section v-if="currentTab == \'common\'" :class="{disabled: info.is_readonly}"> <label class="label">{{\'Размер аватара\'|gettext}}</label> <div class="tabs is-toggle is-fullwidth is-avatar-size-chooser has-mb-1"> <ul> <li :class="{\'is-active\': values.avatar_size == k}" v-for="(v, k) in variants.avatar_size"><a @click="values.avatar_size = parseInt(k)"><em></em></a></li> </ul> </div> <p class="has-text-grey">{{variants.avatar_size[values.avatar_size]}}</p> </section> <section v-if="currentTab == \'common\' && info.has_connected_account"> <mx-toggle v-model="values.is_avatar_hide_text" :title="\'Скрыть имя профиля под аватаром\'|gettext" :disabled="info.is_readonly"></mx-toggle> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-banner",{props:["values","options","info","variants","block","block_id","block_type_id","tabs","currentTab","allowSave"],mixins:[FormModel],data:function(){return{addons_values:null}},created:function(){this.block.title=this.$gettext("Баннер"),this.$emit("update:tabs",[{name:"common",title:this.$gettext("Картинка")},"options","statistics","section","addons"])},computed:{pictureSizeStyle:function(){return"padding-top: "+(this.values.p?this.values.p.height/this.values.p.width*100:50)+"%;"},styleOuterContainer:function(){return this.values.is_scale&&this.values.width?"width: "+this.values.width+"px !important;":""}},methods:{prepareValues:function(){var e=this.$clone(this.values);return e.p&&(e.p=e.p.picture_id),e},startUploading:function(){this.allowSave=!1},stopUploading:function(){this.allowSave=!0}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="info.is_readonly && (currentTab == \'common\')" class="message is-warning"> <div class="message-body">{{\'Добавьте изображение любого размера и укажите действие при клике\'|gettext}}</div> </section> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff" style="padding: 1rem 0"> <div class="device-pictures-form" style="padding-left: 1rem;padding-right: 1rem"> <center> <div class="device has-shadow is-large is-hide-mobile" :class="{disabled: info.is_readonly}"> <div class="notch"></div> <div class="screen page-font"> <div class="has-sm-p-1"> <vue-component-pictures v-model="values.p" class="pictures-form-banner" :class="{\'has-stretch\': values.is_stretch, \'has-marginless\': values.is_stretch && values.is_marginless}" class-container="picture-container picture-container-upload" :button-title="\'Загрузить картинку\'|gettext" :style-container="pictureSizeStyle" :style-outer-container="styleOuterContainer" button-icon="fa fal fa-cloud-upload" @startUploading="startUploading" @stopUploading="stopUploading" updatable></vue-component-pictures> </div> </div> </div> </center> <div class=\'form-shadow form-shadow-bottom is-hidden-mobile\' style="height: 20px"></div> </div> </section> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff"> <mx-toggle v-model="values.is_scale" :title="\'Установить максимальную ширину\'|gettext" :disabled="info.is_readonly || !values.p || values.is_stretch" class="has-mb-2"></mx-toggle> <div class="row row-small has-mb-2" v-if="values.is_scale && values.p"> <div class="col-xs-12 col-sm-4"> <b-field> <p class="control is-expanded"><number v-model="values.width" precision="0" :disabled="info.is_readonly" class="input has-text-right" :placeholder="values.p?values.p.width:\'\'"/></p> <p class="control"> <a class="button is-static">px</a> </p> </b-field> </div> </div> <mx-toggle v-model="values.is_stretch" :title="\'Растянуть на ширину страницы\'|gettext" :disabled="values.is_readonly || values.is_scale"></mx-toggle> <transition name="fade"> <mx-toggle v-model="values.is_marginless" :title="\'Убрать отступы от края страницы\'|gettext" :disabled="info.is_readonly || values.is_scale || !values.is_stretch" v-if="values.is_stretch" class="has-mt-2"></mx-toggle> </transition> </section> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff"> <mx-toggle v-model="values.is_link" :title="\'Сделать баннер ссылкой\'|gettext" :disabled="info.is_readonly"></mx-toggle> <div v-if="values.is_link"> <vue-component-link-editor :values.sync="values.link" :variants="variants" :info="info" class="has-mt-2"></vue-component-link-editor> </div> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-break",{props:["values","options","variants","info","block","block_id","tabs","currentTab"],mixins:[FormModel],data:function(){return{icons:[-1,0,1,2,3,4,5,6,7],sizes:[15,30,45,60,75,90]}},created:function(){this.block.title=this.$gettext("Разделитель");var e=this.$account.theme;this.values.design.color||(this.values.design.color=e.screen.color),this.values.break_size=this.sizes.indexOf(this.values.break_size),this.$emit("update:tabs",[{name:"common",title:this.$gettext("Разделитель")},"options","section"])},methods:{prepareValues:function(){var e=this.$clone(this.values),t=this.$account.theme;return e.break_size=this.sizes[e.break_size],e.design.color==t.screen.color&&(e.design.color=""),e.design.color||(e.design={on:!1}),e}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="currentTab == \'common\'"> <div class="has-mb-4"> <label class="label">{{\'Размер отступа\'|gettext}}</label> <div class="row"> <div class="col-xs"> <b-field> <b-slider :min="0" :max="sizes.length - 1" :tooltip="false" v-model="values.break_size" size="is-line" rounded> <template v-for="(s, i) in sizes"> <b-slider-tick :value="i" :key="i"></b-slider-tick> </template> </b-slider> </b-field> </div> <div class="col-xs col-shrink" style="display: flex;align-items: center"> <h3>{{values.break_size+1}}x</h3> </div> </div> </div> <label class="label">{{\'Тип разделителя\'|gettext}}</label> <div class="buttons-chooser-list has-mb-2 row row-small"> <div v-for="i in icons" class="col-xs-4 col-sm-2 col-md-2"> <div class="buttons-chooser block-break" @click="values.icon = i" :class="{in: values.icon == i}"><div class="block-break-inner" :class="{\'has-icon\': i, \'is-invisible\': i < 0, \'is-fullwidth\': values.fullwidth && i== 0, \'has-fading\': values.fading}"><span><i :class="[\'fa fai\', \'fa-\'+i]" v-if="i> 0"></i></span></div></div> </div> </div> <div :class="{disabled: values.icon < 0}"> <label class="label">{{\'Настройки линии\'|gettext}}</label> <mx-toggle v-model="values.fullwidth" class="has-mb-2" :title="\'Линия на всю ширину\'|gettext" :disabled="info.is_readonly"></mx-toggle> <mx-toggle v-model="values.fading" :title="\'Линия с полупрозрачными краями\'|gettext" :disabled="info.is_readonly"></mx-toggle> </div> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <div class="label-pro-container"> <div class="tag is-pro" v-if="!$auth.isAllowTariff(\'pro\')" v-tippy :content="\'Эта возможность доступна<br>на pro тарифе\'|gettext">pro</div> <div :class="{disabled: !$auth.isAllowTariff(\'pro\')}"> <div class="has-mb-2"><mx-toggle v-model=\'values.design.on\' :title="\'Свои настройки дизайна\'|gettext" :disabled="info.is_readonly"></mx-toggle></div> <div v-if="values.design.on"> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.design.color" :label="\'Цвет\'|gettext" :disabled="info.is_readonly" :colors="[$account.theme.screen.color]"></vue-component-colorpicker> </div> </div> </div> </div> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-collapse",{props:["values","options","variants","info","block","block_id","tabs","currentTab"],mixins:[FormModel],data:function(){return{current:0}},created:function(){this.block.title=this.$gettext("Вопросы и ответы");var e=this.$account.theme;this.values.design.color||(this.values.design.color=e.screen.color),this.values.design.font||(this.values.design.font=e.screen.font),this.$emit("update:tabs",[{name:"common",title:this.block.title},"options","section"])},methods:{prepareValues:function(){var e=this.$clone(this.values),t=this.$account.theme;return e.design.color==t.screen.color&&(e.design.color=""),e.design.font==t.screen.font&&(e.design.font=""),e.design.color||e.design.font||(e.design={on:!1}),e},onRemove:function(e){var t=this;this.$confirm(this.$gettext("Вы уверены что хотите удалить этот вопрос?"),"is-danger").then(function(){t.values.fields.splice(e,1)})},onAdd:function(){var e=this;this.values.fields.push({title:"",text:"",opened:!0}),this.current=this.values.fields.length-1,this.$nextTick(function(){e.$refs.fields.querySelector(".in input").focus()})}},template:'<section class="modal-card-body modal-card-body-blocks" :class="{\'is-rtl\': $account.locale.text_direction == \'rtl\'}"> <section v-if="currentTab == \'common\'"> <div ref="fields"> <vue-component-sortable-form-fields v-model="values.fields" :current.sync="current"> <template v-slot:title="{ item }"> <span><span v-if="item.title">{{ item.title }}</span><span v-else>{{\'Заголовок\'|gettext}}</span></span> </template> <template v-slot:action="{ index }"> <a class="is-pulled-right has-text-danger" @click.stop="onRemove(index)" :class="{disabled: info.is_readonly}"><i class="fa fa-trash-alt"></i></a> </template> <template v-slot:form="{ item, index }"> <div class="field"> <label>{{\'Заголовок\'|gettext}}</label> <b-input type="text" v-model="item.title" :disabled="info.is_readonly" class="has-rtl"></b-input> </div> <div class="field"> <label>{{\'Текст\'|gettext}}</label> <vue-component-emoji-picker v-model="item.text"> <textarea class="input has-rtl" v-model="item.text" :disabled="info.is_readonly" v-emoji rows="6"></textarea> </vue-component-emoji-picker> </div> </template> </vue-component-sortable-form-fields> </div> </section> <section v-if="currentTab == \'common\'"> <button type="button" @click="onAdd" class="button is-success" :class="{disabled: info.is_readonly}"><i class="fas fa-plus has-mr-1"></i>{{\'Добавить новый пункт\'|gettext}}</button> </section> <section v-if="currentTab == \'options\'"> <div class="label-pro-container"> <div class="tag is-pro" v-if="!$auth.isAllowTariff(\'pro\')" v-tippy :content="\'Эта возможность доступна<br>на pro тарифе\'|gettext">pro</div> <div :class="{disabled: !$auth.isAllowTariff(\'pro\')}"> <div class="has-mb-2"><mx-toggle v-model=\'values.design.on\' :title="\'Свои настройки дизайна\'|gettext" :disabled="info.is_readonly"></mx-toggle></div> <div v-if="values.design.on"> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.design.color" :label="\'Цвет текста\'|gettext" :disabled="info.is_readonly" :colors="[$account.theme.screen.color]"></vue-component-colorpicker> </div> <div class="has-mb-2 link-styles-container"> <label class="form-control-static">{{\'Шрифт\'|gettext}}</label> <vue-component-font-chooser v-model="values.design.font" view="name"></vue-component-font-chooser> </div> </div> </div> </div> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-courses-feed",{props:["values","options","variants","info","block","block_id","tabs","currentTab"],mixins:[FormModel],created:function(){this.block.title=this.$gettext("Фид занятий курса"),this.$emit("update:tabs",[{name:"common",title:"Общие"},"options","section"])},methods:{prepareValues:function(){return this.values}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff" class="is-html-section"> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.colors.bg" :label="\'Цвет фона\'|gettext" :disabled="info.is_readonly" :colors="[\'#ffffff\']"></vue-component-colorpicker> </div> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.colors.text" :label="\'Цвет текста\'|gettext" :disabled="info.is_readonly" :colors="[\'#000000\']"></vue-component-colorpicker> </div> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-courses-lesson",{props:["values","options","variants","info","block","block_id","tabs","currentTab"],mixins:[FormModel],created:function(){this.block.title=this.$gettext("Занятие курса"),this.$emit("update:tabs",[{name:"common",title:"Общие"},"options","section"])},methods:{prepareValues:function(){return this.values}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="currentTab == \'common\'"> <b-field label="Текст кнопки"> <input type="text" v-model="values.buttons.done.title" class="input"> </b-field> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.colors.bg" :label="\'Цвет фона\'|gettext" :disabled="info.is_readonly" :colors="[\'#ffffff\']"></vue-component-colorpicker> </div> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.colors.text" :label="\'Цвет текста\'|gettext" :disabled="info.is_readonly" :colors="[\'#000000\']"></vue-component-colorpicker> </div> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.buttons.done.bg" :label="\'Цвет фона кнопки\'|gettext" :disabled="info.is_readonly" :colors="[\'#257942\']"></vue-component-colorpicker> </div> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.buttons.done.color" :label="\'Цвет текста кнопки\'|gettext" :disabled="info.is_readonly" :colors="[\'#ffffff\']"></vue-component-colorpicker> </div> </section> <section v-if="currentTab == \'options\'"> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-courses-navs",{props:["values","options","variants","info","block","block_id","tabs","currentTab"],mixins:[FormModel],created:function(){this.block.title=this.$gettext("Навигация курса"),this.$emit("update:tabs",[{name:"common",title:"Общие"},"options","section"])},methods:{prepareValues:function(){return this.values}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff" class="is-html-section"> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.colors.bg" :label="\'Цвет фона\'|gettext" :disabled="info.is_readonly" :colors="[\'#ffffff\']"></vue-component-colorpicker> </div> <div class="has-mb-2"> <vue-component-colorpicker v-model="values.colors.text" :label="\'Цвет текста\'|gettext" :disabled="info.is_readonly" :colors="[\'#000000\']"></vue-component-colorpicker> </div> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-courses-progress",{props:["values","options","variants","info","block","block_id","tabs","currentTab"],mixins:[FormModel],created:function(){this.block.title=this.$gettext("Навигация курса"),this.$emit("update:tabs",[{name:"common",title:"Общие"},"options","section"])},methods:{prepareValues:function(){return this.values}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff" class="is-html-section"> <vue-component-colorpicker v-model="values.colors.done" :label="\'Цвет выполненных заданий\'|gettext" :disabled="info.is_readonly" :colors="[\'#49c674\']"></vue-component-colorpicker> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-form",{props:["values","options","parent","info","variants","block_type_id","info","block","block_id","tabs","currentTab"],mixins:[FormModel],data:function(){return{addons_values:null,action:null}},created:function(){this.block.title=this.$gettext("Форма");var e=[{name:"common",title:this.$gettext("Поля")},"options",{name:"pays",title:this.$gettext("Оплаты")},"section","addons"];this.values.fields_extended=[{title:this.$gettext("Расширенные поля"),fields:[{idx:"a",title:this.$gettext("Номер заявки"),value_type:"number"},{idx:"i",title:this.$gettext("Номер счёта"),value_type:"number"},{idx:"d",title:this.$gettext("Бюджет"),value_type:"number"},{idx:"g",title:this.$gettext("Ссылка на оплату"),value_type:"string"},{idx:"j",title:this.$gettext("Ссылка на страницу"),value_type:"string"}]}],this.block_id||(this.values.fields=[{type_id:3,title:this.$gettext("Имя"),text:"",required:!1,idx:"1"},{type_id:6,title:"Email",text:"",required:!0,idx:"2"}],this.values.fields_idx=3),this.$emit("update:tabs",e)},computed:{currentPaidStatus:function(){for(var e="",t=0;t<this.variants.paid_status_id.length;t++)if(this.variants.paid_status_id[t].status_id==this.values.paid_status_id){e=this.variants.paid_status_id[t].status;break}return e}},methods:{prepareValues:function(){var e=this.$clone(this.values);e.addons_values=this.addons_values,e.fields=_.map(e.fields,function(e){return _.pick(e,["default","required","text","title","type_id","variants","idx"])}),delete e.fields_extended;var t=this.$account.theme;return e.design.text==t.link.color&&e.design.bg==t.link.bg&&(e.design={on:!1}),e},onAction:function(e){var t=this;e&&(this.values.fields_idx.toString(16),this.values.fields.push({title:this.variants.fields_types[e],text:"",type_id:e,value_type:this.variants.fields_types_value[e],required:!1,default:0,variants:"",opened:!0,idx:this.values.fields_idx.toString(16)}),this.values.fields_idx++,Vue.nextTick(function(){t.action=null}))}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="info.is_readonly && (currentTab == \'common\')" class="message is-warning"> <div class="message-body">{{\'С помощью этого блока, вы сможете создать форму для сбора контактных данных и добавить прием оплаты\'|gettext}}</div> </section> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff"> <b-select :placeholder="\'-- Добавить поле --\'|gettext" v-model="action" @input="onAction" :disabled="info.is_readonly" class="is-hidden-mobile" expanded> <option v-for="(f, i) in variants.fields_types" :value="i">{{ f }}</option> </b-select> <vue-component-dropdown position="is-bottom-left is-fullwidth" @input="onAction" :disabled="info.is_readonly" :title="\'Добавить поле\'|gettext" class="is-hidden-tablet" button-class="button is-default is-focusable is-fullwidth"> <span slot="button"><span v-if="action">{{variants.fields_types[action]}}</span><span v-else class="has-text-grey">{{\'-- Добавить поле --\'|gettext}}</span></span> <b-dropdown-item v-for="(v, k) in variants.fields_types" :value="k" aria-role="menuitem">{{v}}</b-dropdown-item> </vue-component-dropdown> </section> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff"> <vue-component-form-blocks v-model="values.fields" :variants="variants" :disabled="info.is_readonly"></vue-component-form-blocks> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <b-field :label="\'Текст на кнопке\'|gettext"> <input type="text" v-model="values.form_btn" class="input" :disabled="info.is_readonly" :placeholder="\'Отправить\'|gettext"> </b-field> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <b-field :label="\'Тип формы\'|gettext" v-if="_.size(variants.target_id)"> <b-select v-model="values.target_id" :disabled="info.is_readonly" :placeholder="\'-- Простая форма --\'|gettext" expanded> <option :value="null">{{\'-- Простая форма --\'|gettext}}</option> <option v-for="(v, k) in variants.target_id" :value="k">{{v}}</option> </b-select> </b-field> <div v-if="values.target_id"> <b-select v-model="values.target_value" :disabled="info.is_readonly" :placeholder="\'-- Не выбрано --\'|gettext" expanded> <option :value="null">{{\'-- Не выбрано --\'|gettext}}</option> <option v-for="(v, k) in variants.target_values[values.target_id]" :value="k">{{v}}</option> </b-select> </div> <vue-component-form-options-editor v-else :values="values" :disabled="info.is_readonly" :variants="variants" :errors="errors"/> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <vue-pages-blocks-form-design :values.sync="values.design" :info="info"></vue-pages-blocks-form-design> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <section v-if="(currentTab == \'pays\') && $auth.isAllowTariff(\'business\') && !info.amount_payments_providers" class=\'message is-danger\'><div class="message-body">{{\'Чтобы принимать оплату, вам необходимо настроить платежные системы в разделе\'|gettext}} "<a href="/profile/settings/payments/" target="_blank">{{\'Настройки\'|gettext}}</a>".</div></section> <section v-if="currentTab == \'pays\'" @click="$parent.scrollToTariff"> <div class="has-mb-2"><mx-toggle v-model=\'values.is_order\' :title="\'Принимать оплату\'|gettext" :disabled="info.is_readonly"></mx-toggle></div> <div class="row" :class="{disabled: !values.is_order}"> <div class="col-sm-4 col-xs-12 has-mb-2" :class="{\'has-error\': errors.order_budget}"><label class="label">{{\'Цена\'|gettext}}</label> <div class="field has-addons"> <div class="control is-expanded"> <number v-model="values.order_budget" :precision="$account.currency.precision" class="input has-text-right" :disabled="info.is_readonly"> </div> <div class="control"><div class="button is-static">{{$account.currency.title}}</div></div> </div> </div> <div class="col-sm-8 col-xs-12" :class="{\'has-error\': errors.order_purpose}"> <div class="field"> <label class="label">{{\'Назначение платежа\'|gettext}}</label> <div class="row row-small"> <div class="col-xs-12 col-sm-4 has-mb-2"> <b-select v-model="values.payment_object_id" :disabled="info.is_readonly" expanded> <option v-for="(v, k) in variants.payment_object_id" :value="k">{{v}}</option> </b-select> </div> <div class="col-xs-12 col-sm-8 has-mb-2"> <input type=\'text\' v-model=\'values.order_purpose\' class=\'input\' :disabled="info.is_readonly" v-if="values.payment_object_id < 100"> <b-select v-model="values.payment_object_value" :disabled="info.is_readonly" :placeholder="\'-- Не выбрано --\'|gettext" expanded v-else> <option :value="null">{{\'-- Не выбрано --\'|gettext}}</option> <option v-for="(v, k) in variants.payment_objects_values[values.payment_object_id]" :value="k">{{v}}</option> </b-select> </div> </div> </div> </div> </div> <div :class="{disabled: !values.is_order}"> <b-checkbox v-model="values.paid_change_status" :disabled="info.is_readonly">{{\'После успешной оплаты менять статус\'|gettext}}:</b-checkbox> <b-dropdown aria-role="list" position="is-top-right" :disabled="!values.paid_change_status || info.is_readonly"><label :disabled="!values.paid_change_status || info.is_readonly" :class="{\'has-text-primary\': values.paid_change_status}" class="b-checkbox checkbox is-marginless" slot="trigger" aria-role="listitem">{{currentPaidStatus}}</label> <b-dropdown-item @click="values.paid_status_id = s.status_id;" v-for="s in variants.paid_status_id"><i class="fas fa-circle has-mr-1" :style=\'"color:#{1}"|format(s.color)\'></i> {{s.status}}</b-dropdown-item> </b-dropdown> </div> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-html",{props:["values","options","variants","info","block","block_id","tabs","currentTab"],mixins:[FormModel],created:function(){this.block.title=this.$gettext("HTML код"),this.$emit("update:tabs",[{name:"common",title:"HTML"},"options","section"])},methods:{prepareValues:function(){return this.values}},template:'<section class="modal-card-body modal-card-body-block-html modal-card-body-blocks"> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff" class="is-html-section"> <div class="panel panel-default"> <vue-component-codemirror v-model="values.html" :disabled="info.is_readonly" style="min-height: 100px"></vue-component-codemirror> </div> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-link",{props:["values","options","parent","variants","info","block","block_id","block_type_id","tabs","currentTab","section","addon_target_except"],mixins:[FormModel],data:function(){return{addons_values:null}},watch:{addon_target_except:function(){this.$emit("update:addon_target_except",this.addon_target_except)}},created:function(){this.block.title=this.$gettext("Ссылка"),this.$emit("update:tabs",[{name:"common",title:this.$gettext("Ссылка")},{name:"thumbnail",title:this.$gettext("Миниатюра")},"options","section","addons","statistics"])},computed:{defaultColor:function(){return null!=this.section&&null!=this.section.link.color?this.section.link.color:this.$account.theme.link.color},defaultSubtitle:function(){return null!=this.section&&null!=this.section.link.subtitle.color?this.section.link.subtitle.color:this.$account.theme.link.subtitle.color},defaultBg:function(){return null!=this.section&&null!=this.section.link.bg?this.section.link.bg:this.$account.theme.link.bg},error:function(){return null!=this.errors[this.values.type]}},methods:{prepareValues:function(){var e=this.$clone(this.values);this.$account.theme;return e.design.text==this.defaultColor&&e.design.bg==this.defaultBg&&e.design.subtitle==this.defaultSubtitle&&(e.design={on:!1}),e}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="currentTab == \'common\'"> <b-field :label="\'Текст ссылки\'|gettext" :class="{\'has-error\': errors.title}" :message="errors.title"> <div> <input class="input has-mb-1" v-model="values.title" :disabled="info.is_readonly" :placeholder="\'Заголовок\'|gettext"></input> <input class="input" v-model="values.subtitle" :disabled="info.is_readonly" :placeholder="\'Подзаголовок\'|gettext"></input> </div> </b-field> <b-field :class="{\'has-error\': error}" :message="error"> <vue-component-link-editor :values.sync="values" :variants="variants" :info="info" :addon_target_except.sync="addon_target_except"/> </b-field> </section> <section class="message is-danger" v-if="(currentTab == \'thumbnail\') && !$auth.isAllowTariff(\'pro\')" style="flex-shrink: 0;flex-grow: 0"> <div class="message-body"><span>{{\'Доступно на pro-тарифе\'|gettext}}</span> <a @click="$form.open(\'vue-index-pricing-form\')" target="_blank" class=\'is-pulled-right\'>{{\'Подробнее\'|gettext}} <i class="fa fa-angle-right" style="margin-left: 5px"></i></a></div> </section> <section v-if="currentTab == \'thumbnail\'" style="height: 100%"> <vue-component-thumbnail-chooser :pictures="values.thumb_pictures" v-model="values.thumb" :disabled="info.is_readonly"></vue-component-thumbnail-chooser> </section> <section v-if="currentTab == \'options\'"> <vue-pages-blocks-form-design-link :values.sync="values.design" :info="info"></vue-pages-blocks-form-design-link> <vue-pages-blocks-form-animations :values.sync="values" :info="info" :variants="variants"></vue-pages-blocks-form-animations> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-map",{props:["values","options","variants","info","block","block_id","tabs","currentTab"],mixins:[FormModel],data:function(){return{query:"",isGeocoding:!1,current:0,map:null,markers:[]}},created:function(){this.block.title=this.$gettext("Карта");var e=[{name:"common",title:this.$gettext("Карта и метки")},{name:"extended",title:this.$gettext("Опции карты")},"options","statistics","section"],t=this.$account.theme;this.values.link_color||(this.values.link_color=t.link.color),this.values.link_bg||(this.values.link_bg=t.link.bg),this.$emit("update:tabs",e)},mounted:function(){var s=this;$mx.lazy("map.js","map.css",function(){var e=s.$clone(s.values.bounds);0==e.length&&(e={zoom:4,center:{lat:55.5807481,lng:36.8251304}}),s.map=L.map(s.$refs.map,{attributionControl:!1}).setView([e.center.lat,e.center.lng],e.zoom),L.control.attribution({prefix:""}).addTo(s.map),L.tileLayer("/maps/{z}/{x}/{y}.png",{attribution:"",crossOrigin:!0}).addTo(s.map),s.icon=L.icon({iconUrl:"/s/i/marker.png",iconSize:[28,37],popupAnchor:[0,-10],shadowUrl:"/s/i/marker-shadow.png",shadowSize:[40,50],shadowAnchor:[12,31]});function i(){var e=s.map.getBounds();s.values.bounds={center:s.map.getCenter(),zoom:s.map.getZoom(),bounds:[[e.getNorth(),e.getEast()],[e.getSouth(),e.getWest()]]}}0==s.values.bounds.length&&navigator.geolocation.getCurrentPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};s.map.setView(t,10),i()}),s.map.on("moveend",i),s.map.on("zoomend",i),i(),_.each(s.values.markers,s.addMarkerInternal)})},methods:{addMarkerInternal:function(i){var e={lat:parseFloat(i.lat),lng:parseFloat(i.lng)},s=L.marker([e.lat,e.lng],{icon:this.icon,draggable:!0}).addTo(this.map);s.on("dragend",function(e){var t=s.getLatLng();i.lat=t.lat,i.lng=t.lng}),this.markers.push(s)},addMarker:function(){var a=this;""!=this.query.trim()&&(this.isGeocoding=!0,$mx.lazy("//maps.googleapis.com/maps/api/js?key=AIzaSyCsYkpOHG_vddnpHQJ8kamy4RGt81HCfCU&libraries=places",function(){(new google.maps.Geocoder).geocode({address:a.query},function(e,t){var i,s,n;"OK"==t&&e.length&&e[0].geometry&&(s={lng:(i=e[0].geometry.location).lng(),lat:i.lat(),text:"",title:a.query},a.values.markers.push(s),a.current=a.values.markers.length-1,a.addMarkerInternal(s),a.markers.length&&(n=new L.featureGroup(a.markers),a.map.fitBounds(n.getBounds())),a.$nextTick(function(){1==a.markers.length&&a.$refs.markers.querySelector(".in textarea").focus()}),a.query=""),a.isGeocoding=!1})}))},deleteMarker:function(e){this.map.removeLayer(this.markers[e]),this.markers.splice(e,1),this.values.markers.splice(e,1)},prepareValues:function(){var e=this.$clone(this.values);e.markers=_.map(e.markers,function(e){return _.pick(e,["lng","lat","title","text"])});var t=this.$account.theme;return e.design.text==t.link.color&&e.design.bg==t.link.bg&&(e.design={on:!1}),e}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="info.is_readonly && (currentTab == \'common\')" class="message is-warning"> <div class="message-body">{{\'Здесь вы можете добавить карту и отметить ваши адреса\'|gettext}}</div> </section> <section :class="{\'is-hidden\': currentTab != \'common\'}" @click="$parent.scrollToTariff"> <div class="map-container map-view-with-zoom-control" :class="{disabled: info.is_readonly}"> <div class="map-form" ref=\'map\'></div> </div> </section> <section :class="{\'is-hidden\': currentTab != \'common\'}" @click="$parent.scrollToTariff"> <div class="has-mb-2"> <div class="row row-small"> <div class="col-xs"> <b-input v-model="query" autocorrect="off" autocapitalize="off" spellcheck="false" :placeholder="\'Введите адрес метки\'|gettext" @keyup.native.enter="addMarker" :loading="isGeocoding" :disabled="info.is_readonly"></b-input> </div> <div class="col-xs col-shrink"> <button type=\'button\' class="button is-success" @click="addMarker" :class="{\'is-loading\': isGeocoding}" :disabled="info.is_readonly">{{\'Добавить метку\'|gettext}}</button> </div> </div> </div> <div ref=\'markers\'> <vue-component-sortable-form-fields v-model="values.markers" :current.sync="current"> <template v-slot:title="{ item }"> <span v-if="item.title">{{item.title}}</span> <span v-else>{{\'Заголовок\'|gettext}}</span> </template> <template v-slot:action="{ index }"> <a class="has-text-danger is-pulled-right" @click.stop="deleteMarker(index)" :class="{disabled: info.is_readonly}"><i class="fa fa-trash-alt"></i></a> </template> <template v-slot:form="{ item, index }"> <div class="field"> <input type="text" v-model="item.title" class="input" :placeholder="\'Заголовок\'|gettext" :disabled="info.is_readonly"> </div> <div class="field"> <textarea class="input" v-model="item.text" :placeholder="\'Режим работы, этаж и другая полезная информация\'|gettext" :disabled="info.is_readonly"></textarea> </div> </template> </vue-component-sortable-form-fields> </div> </section> <section v-if="currentTab == \'extended\'" @click="$parent.scrollToTariff"> <div class="has-mb-2"><mx-toggle v-model="values.is_fixed" :title="\'Зафиксировать карту\'|gettext" :disabled="info.is_readonly"></mx-toggle></div> <div class="has-mb-2"><mx-toggle v-model="values.show_buttons" :title="\'Добавить отдельные ссылки для каждой метки\'|gettext" :disabled="info.is_readonly"></mx-toggle></div> <div><mx-toggle v-model="values.show_zoom" :title="\'Показывать ползунок масштабирования\'|gettext" :disabled="info.is_readonly"></mx-toggle></div> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <vue-pages-blocks-form-design :values.sync="values.design" :info="info"></vue-pages-blocks-form-design> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-messenger",{props:["values","options","parent","variants","info","block","block_id","block_type_id","tabs","currentTab"],mixins:[FormModel],data:function(){return{current:0,addons_values:null,mode:"edit",selected:[]}},created:function(){this.block.title=this.$gettext("Мессенджеры"),this.$emit("update:tabs",[{name:"common",title:this.$gettext("Ссылки")},"options","statistics","section","addons"]),this.values.items.length||this.setMode("choose")},watch:{values:{handler:function(){this.values.items.length||this.setMode("choose")},deep:!0}},computed:{items:function(){var i={};return _.each(this.variants.list,function(e){_.each(e.items,function(e,t){return i[t]=e})}),i},textLine1:function(){return this.$gettext("Откройте Line@ > Выберите аккаунт > Найти новых друзей > Выберите URL-адрес > Копировать")},textLine2:function(){return this.$gettext("Откройте Line > Пригласить друзей > Пригласить > Поделиться > Выберите любой мессенджер или email > Скопируйте ссылку из сообщения")}},methods:{deleteItem:function(e){var t=this;this.$confirm(this.$format(this.$gettext("Вы уверены что хотите удалить {1}?"),this.items[this.values.items[e].n].title),"is-danger").then(function(){t.values.items.splice(e,1)})},icon:function(e){var t=this.items[e];return"fa fab fa-"+(null!=t.icon?t.icon:e)},prepareValues:function(){return this.$clone(this.values)},setMode:function(e){var s=this;switch(e){case"choose":this.selected=_.map(this.values.items,"n");break;case"edit":var t=_.map(this.values.items,"n");_.each(this.selected,function(e){var i;-1==t.indexOf(e)&&(i={n:e,t:"",v:""},1<_.size(s.items[e].types)&&(i.tp=Object.keys(s.items[e].types)[0],_.each(s.items[e].types,function(e,t){i[t]=""})),null!=s.items[e].inputs&&_.each(s.items[e].inputs,function(e,t){i[t]=""}),s.items[e].text&&(i.text=""),s.values.items.push(i))}),_.each(t,function(e){var t;-1==s.selected.indexOf(e)&&(t=_.map(s.values.items,"n"),s.values.items.splice(t.indexOf(e),1))})}this.mode=e},selectItem:function(e){-1!=this.selected.indexOf(e)||(this.selected.push(e),this.setMode("edit"),this.current=this.selected.length-1)},getError:function(e,t){return this.errors[e]?this.errors[e][t]:null}},template:'<section class="modal-card-body modal-card-body-blocks"> <div slot="trigger"></div> <section v-if="info.is_readonly && (currentTab == \'common\')" class="message is-warning"> <div class="message-body">{{\'Клиенту больше не нужно будет запоминать ваш номер, сохранять, заходить в месенджер, искать вас и писать сообщение, ведь, чем сложнее с вами связаться, тем больше вероятность, что клиент отвлечется и уже забудет о вас или ему будет просто лень писать вам! Вы можете уже заранее ввести нужный текст-шаблон для клиента, чтобы ему не пришлось ничего писать!\'|gettext}}</div> </section> <section v-if="currentTab == \'common\' && values.items.length" @click="$parent.scrollToTariff"> <div class="row row-small"> <div class="col-xs" style="align-self: center"> <span v-if="mode == \'edit\'">{{\'Добавлено всего\'|gettext}}: {{_.size(values.items)}}</span> <span v-else><b>{{\'Выберите мессенджер\'|gettext}}</b></span> </div> <div class="col-xs" style="flex:0"> <button class="button is-success" @click="setMode(\'choose\')" v-if="mode == \'edit\'" :class="{disabled: _.size(values.items)>= _.size(items)}"><i class="fas fa-plus has-mr-1"></i>{{\'Добавить еще\'|gettext}}</button> <button class="button is-dark" @click="mode = \'edit\'" v-if="mode == \'choose\'">{{\'Отмена\'|gettext}}</button> </div> </div> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <b-field :label="\'Внешний вид\'|gettext"> <b-select v-model="values.messenger_style" :disabled="info.is_readonly" expanded> <option v-for="(f, i) in variants.messenger_style" :value="i">{{ f }}</option> </b-select> </section> <section v-if="currentTab == \'common\' && mode== \'edit\'" @click="$parent.scrollToTariff"> <vue-component-sortable-form-fields v-model="values.items" class="has-mb-2" :current.sync="current"> <template v-slot:title="{ item }"> <span>{{items[item.n].title}}</span> </template> <template v-slot:action="{ index }"> <a class="is-pulled-right has-text-danger" @click.stop="deleteItem(index)"><i class="fa fa-trash-alt"></i></a> </template> <template v-slot:form="{ item, index }"> <b-field :label="\'Текст ссылки\'|gettext"> <input v-model="item.t" class="input" :placeholder="items[item.n].placeholder|gettext|format(items[item.n].title)" :disabled="info.is_readonly"> </b-field> <div class="form-messengers-switch has-text-grey" v-if="Object.keys(items[item.n].types).length> 1"> <a v-for="(t, k) in items[item.n].types" :class="{\'has-text-black\': item.tp == k, \'has-text-grey\': item.tp != k}" @click="item.tp = k">{{t.check|gettext}}</a> </div> <b-field v-for="(t, k) in items[item.n].types" v-if="(Object.keys(items[item.n].types).length == 1) || (item.tp == k)" :label="t.label|gettext|format(items[item.n].title)" :message="getError(item.n, k)" :class="{\'has-error\': getError(item.n, k)}"> <input v-model="item[k]" v-if="t.type == \'input\'" class="input" :disabled="info.is_readonly" :placeholder="t.placeholder|gettext"> <mx-phone v-model="item[k]" v-if="t.type == \'phone\'" :disabled="info.is_readonly"></mx-phone> </b-field> <b-field v-for="(ipt, inm) in items[item.n].inputs" :label="ipt.label|gettext|format(items[item.n].title)"> <textarea v-if="ipt.type == \'textarea\'" v-model="item[inm]" :placeholder="ipt.placeholder|gettext" class="input" :disabled="info.is_readonly" style="min-height: 100px"></textarea> </b-field> <div v-if="item.n == \'ln\'" class="has-mt-2"> <div>{{\'Как получить ссылку\'|gettext}}: <b-tooltip :label="textLine1" position="is-top" animated multilined type="is-black"><span class=\'has-text-danger\'>Line@</span></b-tooltip> / <b-tooltip :label="textLine2" position="is-top" animated multilined type="is-black"><span class=\'has-text-danger\'>Line</span></b-tooltip> </div> </div> </template> </vue-component-sortable-form-fields> </section> <section v-if="currentTab == \'common\' && mode== \'choose\'" @click="$parent.scrollToTariff"> <div v-for="(w, i) in variants.list"> <div class="select-list row row-small"> <label v-for="(item, index) in w.items" class="col-xs-6 col-sm-4 has-mb-2" :class="{in: selected.indexOf(index) != -1, disabled: info.is_readonly}"><span :class="[\'btn-socials btn-link-\'+index]" @click="selectItem(index)"><i :class="icon(index)"></i><span>{{item.title}}</span></span></label> </div> </div> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <vue-pages-blocks-form-design :values.sync="values.design" :info="info"></vue-pages-blocks-form-design> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-page",{props:["values","info","variants","block","block_id","tabs","currentTab"],mixins:[FormModel],created:function(){this.block.title=this.$gettext("Новая страница"),this.$emit("update:message",this.$gettext("С помощью этого блока, вы сможете создавать множество внутренних страниц с отдельной ссылкой")),this.$emit("update:tabs",[])},methods:{prepareValues:function(){return this.values}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff"> <b-field :label="\'Открыть страницу\'|gettext"> <b-select v-model="values.link_page_id" :disabled="info.is_readonly" expanded> <option :value="null">{{\'-- Создать новую страницу --\'|gettext}}</option> <option v-for="(v, k) in variants.link_page_id" :value="k">{{v}}</option> </b-select> </b-field> <b-field :label="\'Название страницы\'|gettext" :message="errors.title" :class="{\'has-error\': errors.title}" v-if="!values.link_page_id"> <input v-model="values.title" class="input" :disabled="info.is_readonly"> </b-field> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-pictures",{data:function(){return{index:0,picturesUpdating:0,resortMode:!1,deviceStyle:"margin: 0 auto;display: block;height: auto"}},props:["values","options","variants","info","block","block_id","statistics","tabs","currentTab"],mixins:[FormModel],created:function(){var e=this.$account.theme;this.block_id||(this.values.list=[{p:null,s:"",t:"",link:{title:"",type:"link",url:"",link:"",link_page_id:null,product:"",collection:""}}]),this.values.design=_.merge(e.block.pictures,this.values.design),this.block.title=this.$gettext("Карусель картинок"),this.$emit("update:tabs",[{name:"common",title:this.$gettext("Картинки")},"options","statistics","section"])},mounted:function(){var i=this;$mx(this.$refs.device).on("changeindex",function(e,t){i.index=t})},destoyed:function(){$mx(this.$refs.device).off("changeindex")},computed:{link:function(){return this.values.list[this.index].link},pictureSizeStyle:function(){return"padding-top:"+{100:100,70:"70.6",50:50,138:"141.4516"}[this.values.picture_size]+"%"},brightnessClass:function(){var e=this.$account.theme,t=this.values.design.on?this.values.design.bg:(null==e.block?StylesFactory.getBaseStyles():e).block.pictures.bg;return isLightColor(t)?"is-light":"is-dark"},stylesheetText:function(){var e="";return this.values.design.on&&(e=(this.values.design.text?"color:"+this.values.design.text+" !important;":"")+(this.values.design.bg?"background:"+this.values.design.bg+" !important;":"")),e},stylesheetTitle:function(){var e="";return this.values.design.on&&(e=this.values.design.title?"color:"+this.values.design.title+" !important;":""),e},stylesheetLink:function(){var e="";return this.values.design.on&&(e=(this.values.design.button_text?"color:"+this.values.design.button_text+" !important;":"")+(this.values.design.bg?"background:"+this.values.design.bg+" !important;":"")),e}},methods:{switchReorderMode:function(){var t=this;this.resortMode=!this.resortMode,this.resortMode&&this.$nextTick(function(){var e=t.$refs.toolbar;scrollIt(e,"y",$mx(e).closest(t.$device.mobile?".modal-card-body":".modal")[0],400)})},prepareResortStyle:function(e){return null==e||null!=e.progress||null==e.link?"none":"url("+e.link+")"},onDeletePicture:function(e,t){1!=this.values.list.length?(this.index==e&&e&&this.setIndex(this.index-1),this.values.list.splice(e,1),1==this.values.list.length&&(this.resortMode=!1)):t.empty&&this.$alert(this.$gettext("В карусели должна быть хотя бы одна картинка"),"is-danger")},addSlide:function(){15<=this.values.list.length?this.$alert(this.$gettext("Максимальное количество слайдов")+": 15","is-danger"):(this.values.list.push({p:null,s:"",t:"",link:{title:"",type:this.values.list[this.index].link.type,link:"",link_page_id:null,product:"",collection:""}}),this.setIndex(this.values.list.length-1))},setIndex:function(t){var i=this;this.index=t,this.$nextTick(function(){var e=i.$refs.sliders.querySelectorAll("div");$mx(e[t]).trigger("click")})},prepareValues:function(){var e=this.$clone(this.values);e.list=_.map(e.list,function(e){return e.p=e.p?e.p.picture_id:null,e});var t=this.$account.theme.block.pictures;return e.design=e.design.on&&_.size(_.differenceWith(t,e.design))?e.design:{on:!1},e},startUploading:function(){this.picturesUpdating++},stopUploading:function(){this.picturesUpdating--},showErrors:function(e){var t=this;null!=e.errors["slide:position"]&&(this.$refs.sliders.childNodes[e.errors["slide:position"]].click(),setTimeout(function(){$mx(t.$refs.linkEditor.$el).find(".link-editor-place input, .link-editor-place select")[0].focus()},100))}},template:'<section class="modal-card-body modal-card-body-blocks" :class="{\'is-rtl\': $account.locale.text_direction == \'rtl\'}"> <section v-if="info.is_readonly && (currentTab == \'common\')" class="message is-warning"> <div class="message-body">{{\'Здесь вы можете загрузить изображения или галерею картинок, добавить к ним описание и ссылки\'|gettext}}</div> </section> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff"> <div class="field"> <div class=\'device-pictures-form device-pictures-form-pictures\'> <center> <div class="device has-shadow is-large is-hide-mobile" :class="{disabled: info.is_readonly}" style="margin:0 auto;min-height:auto"> <div class="notch"></div> <div class="screen main-theme page-font block-slider" :class="brightnessClass"> <div ref=\'device\' class="slider slider-pictures has-pb-2" :class="{\'slider-has-text\': values.options.text, \'slider-has-link\': values.options.link, \'slider-has-border\': !values.remove_border}"> <div class="slider-inner"> <div class="slider-slide" v-for="(f, i) in values.list"> <vue-component-pictures v-model="f.p" :button-title="\'Загрузить картинку\'|gettext" button-icon="fa fal fa-cloud-upload" class="picture-container picture-container-upload" :style="pictureSizeStyle" styleContainer="padding-top: initial" @delete="onDeletePicture(i, $event)" always-delete-button updatable :disabled="info.is_readonly" @startUploading="startUploading" @stopUploading="stopUploading"></vue-component-pictures> <div class="slider-slide-text" :style="stylesheetText"> <div class="slider-slide-title" v-if="f.t" :style="stylesheetTitle">{{f.t}}</div> <div class="slider-slide-title" :style="stylesheetTitle" v-else>{{\'Заголовок\'|gettext}}</div> <div class="slider-slide-snippet">{{f.s}}</div> </div> <a class="slider-slide-link" :style="stylesheetLink" v-if="f.link.title">{{f.link.title}}</a> <a class="slider-slide-link" :style="stylesheetLink" v-else>{{\'Открыть\'|gettext}}</a> </div> </div> <div class="slider-nav" :class="{\'is-hidden\': values.list.length == 1}" ref=\'sliders\'> <div v-for="(v, i) in values.list" class="slider-dot" :class="{active: index== i}" @click="index = i"></div> </div> </div> </div> </div> </center> <div class=\'form-shadow form-shadow-bottom is-hidden-mobile\' style="height: 20px"></div> </div> <div class="has-pt-2 row row-small" ref=\'toolbar\'> <div class="col-xs-6 col-sm-5 col-sm-offset-1"> <button type="button" class="button is-success is-fullwidth" :disabled="info.is_readonly || resortMode" @click="addSlide"><i class=\'fas fa-plus has-mr-1\'></i>{{\'Новый слайд\'|gettext}}</button> </div> <div class="col-xs-6 col-sm-5"> <button type="button" :class="[\'button is-dark is-fullwidth\', {\'is-active\': resortMode}]" @click="switchReorderMode" :disabled="info.is_readonly || values.list.length < 2">{{\'Порядок слайдов\'|gettext}}</button> </div> </div> </div> </section> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff"> <div v-if="resortMode"> <sortable-list v-model="values.list" class="pictures-sortable-list pictures-form-resort" axis="xy" use-drag-handle v-if="resortMode"> <sortable-item v-for="(v, i) in values.list" class="upload-picture upload-picture-multiple" :index="i" :key="i" :item="v"> <div v-sortable-handle :class="[\'picture-container pictures-form-resort-item\', {\'picture-container-empty\': !v.p}]" :style="{\'background-image\':prepareResortStyle(v.p)}"></div> </sortable-item> </sortable-list> </div> <div v-else> <mx-toggle v-model="values.options.text" :title="\'Добавить описание\'|gettext" :disabled="info.is_readonly"></mx-toggle> <div style="padding-top: 15px" v-if="values.options.text"> <div class="has-mb-2"> <label class="label">{{\'Заголовок\'|gettext}}</label> <vue-component-emoji-picker v-model="values.list[index].t"> <input type="text" v-model="values.list[index].t" class="input has-rtl" maxlength="50" :disabled="info.is_readonly"> </vue-component-emoji-picker> </div> <div> <label class="label">{{\'Описание\'|gettext}}</label> <vue-component-emoji-picker v-model="values.list[index].s"> <textarea class="input has-rtl" v-model="values.list[index].s" rows="5" id=\'sliderTextSnippet\' maxlength="400" :disabled="info.is_readonly"></textarea> </vue-component-emoji-picker> </div> </div> </div> </section> <section v-if="currentTab == \'common\' && !resortMode" @click="$parent.scrollToTariff"> <mx-toggle v-model="values.options.link" :title="\'Добавить ссылку\'|gettext" :disabled="info.is_readonly"></mx-toggle> <div style="padding-top: 15px" v-if="values.options.link"> <div class="has-mb-2"> <label class="label">{{\'Текст ссылки\'|gettext}}</label> <input type=\'text\' class=\'input\' v-model="link.title" :disabled="info.is_readonly"> </div> <vue-component-link-editor :values.sync="link" :variants="variants" :info="info" ref="linkEditor"></vue-component-link-editor> </section> <section v-if="currentTab == \'common\' && !resortMode" @click="$parent.scrollToTariff"> <div class="row"> <div class="col-sm-12"> <label class=\'label\'>{{\'Размер картинки\'|gettext}}</label> <b-select v-model="values.picture_size" :disabled="info.is_readonly" expanded> <option v-for="(v, k) in variants.picture_size" :value="k">{{v}}</option> </b-select> </div> </div> </section> <section v-if="currentTab == \'common\' && !resortMode" @click="$parent.scrollToTariff"> <div class="row"> <div class="col-sm-12"> <label class=\'label\'>{{\'Автоматическая смена слайдов\'|gettext}}</label> <div class="row"> <div class="col-xs-6 col-sm-4"> <div class="field has-addons"> <div class="control is-expanded"><input type=\'number\' v-model=\'values.carousel_interval\' class=\'input\' :disabled="info.is_readonly || !values.carousel_ride"></div> <div class="control"><span class="button is-static">{{\'сек\'|gettext}}</span></div> </div> </div> <div class="col-xs-6 col-sm-8"> <b-checkbox v-model=\'values.carousel_ride\' :disabled="info.is_readonly">{{\'Включить\'|gettext}}</b-checkbox> </div> </div> </div> </div> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <div class="label-pro-container"> <div class="tag is-pro" v-if="$account.tariff != \'pro\' && $account.tariff != \'business\'" v-tippy :content="\'Эта возможность доступна<br>на pro тарифе\'|gettext">pro</div> <div :class="{disabled: $account.tariff != \'pro\' && $account.tariff != \'business\'}"> <div class="has-mb-2"><mx-toggle v-model=\'values.design.on\' :title="\'Свои настройки дизайна\'|gettext" :disabled="info.is_readonly"></mx-toggle></div> <div class="has-mb-4" v-if="values.design.on"> <vue-component-design-pictures v-model="values.design" :disabled="info.is_readonly"></vue-component-design-pictures> </div> </div> </div> <div class="has-mb-2"><mx-toggle v-model=\'values.remove_border\' :title="\'Убрать бордюр\'|gettext" :disabled="info.is_readonly"></mx-toggle></div> <div class="has-mb-2"><mx-toggle v-model=\'values.is_desktop_fullwidth\' :title="\'Отображать боковые слайды на ПК\'|gettext" :disabled="info.is_readonly"></mx-toggle></div> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-socialnetworks",{props:["values","options","parent","variants","info","block","block_id","block_type_id","tabs","currentTab"],mixins:[FormModel],data:function(){return{current:0,addons_values:null,mode:"edit",selected:[]}},created:function(){this.block.title=this.$gettext("Социальные сети"),this.$emit("update:tabs",[{name:"common",title:this.$gettext("Ссылки")},"options","statistics","section","addons"]),this.values.items.length||this.setMode("choose")},computed:{items:function(){var i={};return _.each(this.variants.list,function(e){_.each(e.items,function(e,t){return i[t]=e})}),i}},watch:{values:{handler:function(){this.values.items.length||this.setMode("choose")},deep:!0}},methods:{deleteItem:function(e){var t=this;this.$confirm(this.$format(this.$gettext("Вы уверены что хотите удалить {1}?"),this.items[this.values.items[e].n].title),"is-danger").then(function(){t.values.items.splice(e,1)})},icon:function(e){var t=this.items[e];return"fa fab fa-"+(null!=t.icon?t.icon:e)},iconPaths:function(e){var t=this.items[e],s="";if(null!=t.icon_paths)for(i=1;i<=t.icon_paths;i++)s+='<em class="p'+i+'"></em>';return s},setMode:function(e){var s=this;switch(e){case"choose":this.selected=_.map(this.values.items,"n");break;case"edit":var t=_.map(this.values.items,"n");_.each(this.selected,function(e){var i;-1==t.indexOf(e)&&(i={n:e,t:"",v:""},null!=s.items[e].checkboxes&&_.each(s.items[e].checkboxes,function(e,t){i[t]=!1}),s.values.items.push(i))}),_.each(t,function(e){var t;-1==s.selected.indexOf(e)&&(t=_.map(s.values.items,"n"),s.values.items.splice(t.indexOf(e),1))})}this.mode=e},selectItem:function(e){-1!=this.selected.indexOf(e)||(this.selected.push(e),this.setMode("edit"),this.current=this.selected.length-1)},prepareValues:function(){return this.$clone(this.values)},getError:function(e,t){return this.errors[e]?this.errors[e][t]:null}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="info.is_readonly && (currentTab == \'common\')" class="message is-warning"> <div class="message-body">{{\'Добавьте кнопки на другие социальные сети\'|gettext}}</div> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <b-field :label="\'Внешний вид\'|gettext"> <b-select v-model="values.socials_style" :disabled="info.is_readonly" expanded> <option v-for="(f, i) in variants.socials_style" :value="i">{{ f }}</option> </b-select> </b-field> </section> <section v-if="currentTab == \'common\' && values.items.length" @click="$parent.scrollToTariff"> <div class="row row-small"> <div class="col-xs" style="align-self: center"> <span v-if="mode == \'edit\'">{{\'Добавлено всего\'|gettext}}: {{_.size(values.items)}}</span> <span v-else><b>{{\'Выберите социальную сеть\'|gettext}}</b></span> </div> <div class="col-xs" style="flex:0"> <button class="button is-success" @click="setMode(\'choose\')" v-if="mode == \'edit\'" :class="{disabled: _.size(values.items)>= _.size(items)}"><i class="fas fa-plus has-mr-1"></i>{{\'Добавить еще\'|gettext}}</button> <button class="button is-dark" @click="mode = \'edit\'" v-if="mode == \'choose\'">{{\'Отмена\'|gettext}}</button> </div> </div> </section> <section v-if="currentTab == \'common\' && mode== \'choose\'" @click="$parent.scrollToTariff"> <div v-for="(w, i) in variants.list"> <h4 class="has-mb-1" :class="{\'has-mt-2\': i}">{{w.group}}</h4> <div class="select-list row row-small"> <label v-for="(item, index) in w.items" class="col-xs-6 col-sm-4 has-mb-2" :class="{in: selected.indexOf(index) != -1, disabled: info.is_readonly}"><span :class="[\'btn-socials btn-socials-\'+index]" @click="selectItem(index)"><i :class="icon(index)" v-html="iconPaths(index)"></i><span>{{item.title}}</span></span></label> </div> </div> </section> <section v-if="currentTab == \'common\' && mode== \'edit\'" @click="$parent.scrollToTariff"> <vue-component-sortable-form-fields v-model="values.items" class="has-mb-2" :current.sync="current"> <template v-slot:title="{ item }"> <span>{{items[item.n].title}}</span> </template> <template v-slot:action="{ index }"> <a class="is-pulled-right has-text-danger" @click.stop="deleteItem(index)"><i class="fa fa-trash-alt"></i></a> </template> <template v-slot:form="{ item, index }"> <b-field :label="\'Текст ссылки\'|gettext"> <input v-model="item.t" class="input" :placeholder="items[item.n].p" :disabled="info.is_readonly" v-focus> </b-field> <b-field :label="items[item.n].v" :message="getError(item.n, \'link\')" :class="{\'has-error\': getError(item.n, \'link\')}"> <input v-model="item.v" class="input" :disabled="info.is_readonly"> </b-field> <div v-if="items[item.n].checkboxes"> <div v-for="(c, ci) in items[item.n].checkboxes"> <b-checkbox v-model="item[ci]" :disabled="info.is_readonly">{{c}}</b-checkbox> </div> </div> </template> </vue-component-sortable-form-fields> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <vue-pages-blocks-form-design :values.sync="values.design" :info="info"></vue-pages-blocks-form-design> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-text",{props:["values","options","info","variants","block","block_id","tabs","currentTab","section"],mixins:[FormModel],data:function(){return{text_aligns:{left:this.$gettext("Слева"),center:this.$gettext("По центру"),right:this.$gettext("Справа"),justify:this.$gettext("По обоим краям")},text_styles:{sm:this.$gettext("Маленький текст"),md:this.$gettext("Средний текст"),lg:this.$gettext("Большой текст"),h3:this.$gettext("Маленький заголовок"),h2:this.$gettext("Средний заголовок"),h1:this.$gettext("Большой заголовок")},text_styles_groups:{t:["sm","md","lg"],h:["h3","h2","h1"]},lastDefaultColor:"",lastDefaultFont:"",lastTextSize:"",cached_text_aligns:["left","center"]}},watch:{section:{handler:function(){this.lastDefaultColor==this.values.color&&(this.values.color=this.defaultColor),this.lastDefaultFont==this.values.font&&(this.values.font=this.defaultFont),this.lastDefaultColor=this.defaultColor,this.lastDefaultFont=this.defaultFont},deep:!0},values:{handler:function(e){var t=this.lastTextSize.substr(0,1)!=e.text_size.substr(0,1)&&("h"==this.lastTextSize.substr(0,1)||"h"==e.text_size.substr(0,1));t&&this.lastDefaultFont==this.values.font&&(this.lastDefaultFont=this.values.font=this.defaultFont),t&&this.lastDefaultColor==this.values.color&&(this.lastDefaultColor=this.values.color=this.defaultColor),this.lastTextSize=e.text_size},deep:!0}},computed:{isHeading:function(){return"h"==this.values.text_size.substr(0,1)},bg:function(){return null!=this.section.bg?this.section.bg.color1:this.$account.theme.bg.color1},color:function(){return this.values.color?this.values.color:this.defaultColor},font:function(){return""!==this.values.font?this.values.font:this.defaultFont},s:function(){return this.isHeading?this.section.heading:this.section.text},t:function(){return this.isHeading?this.$account.theme.heading:this.$account.theme.screen},defaultColor:function(){return null!=this.s&&null!=this.s.color?this.s.color:this.t.color},defaultFont:function(){return null!=this.s&&null!=this.s.font?this.s.font:this.t.font},weight:function(){var e=this.section.heading,t=this.$account.theme.heading;return FontsFactory.getWeight(this.font,null!=e&&null!=e.weight?e.weight:t.weight)},style:function(){return{"font-family":this.values.font?globalFontsFallback[this.font]:null,"text-transform":(this.isHeading?FontsFactory.getTransform((this.section.heading?this.section.heading:this.$account.theme.heading).transform):"none")+" !important","font-weight":(this.isHeading?this.weight:400)+" !important",padding:".5rem 1rem","line-height":FontsFactory.getLineHeight(this.values.text_size)+" !important","text-align":this.values.text_align+" !important","font-size":FontsFactory.getTextSize(this.values.text_size)+" !important",color:this.color,background:this.color!=this.bg?this.bg:null}}},created:function(){this.block.title=this.$gettext("Текст"),this.values.color||(this.values.color=this.defaultColor),""===this.values.font&&(this.values.font=this.defaultFont),null==this.block_id&&"rtl"==this.$account.locale.text_direction&&(this.values.text_align="right"),this.cached_text_aligns[this.isHeading?1:0]=this.values.text_align,this.lastTextSize=this.values.text_size,this.lastDefaultColor=this.defaultColor,this.lastDefaultFont=this.defaultFont,this.$emit("update:tabs",[{name:"common",title:this.$gettext("Текст")},"options","section"])},methods:{changedTextAlign:function(e){this.cached_text_aligns[this.isHeading?1:0]=e},prepareValues:function(){var e=this.$clone(this.values);return e.color==this.defaultColor&&(e.color=""),e.font==this.defaultFont&&(e.font=""),e}},template:'<section class="modal-card-body modal-card-body-block-text modal-card-body-blocks" :class="{\'is-rtl\': $account.locale.text_direction == \'rtl\'}"> <section v-if="currentTab == \'common\'"> <div class="row row-small has-mb-2 row-text-toolbar"> <div class="col-xs col-sm"> <vue-component-dropdown position="is-bottom-right" v-model="values.text_size" :disabled="info.is_readonly" :title="\'Стиль текста\'|gettext" class="is-hidden-tablet font-type-dropdown" button-class="button is-default is-fullwidth is-focusable"> <span slot="button">{{text_styles[values.text_size]}}</span> <b-dropdown-item custom aria-role="menuitem" class="has-text-grey has-text-nowrap">{{\'Текст\'|gettext}}</b-dropdown-item> <b-dropdown-item aria-role="listitem" v-for="v in text_styles_groups.t" :value="v" style="padding-left: 3rem">{{text_styles[v]}}</b-dropdown-item> <b-dropdown-item custom aria-role="menuitem" class="has-text-grey has-text-nowrap">{{\'Заголовок\'|gettext}}</b-dropdown-item> <b-dropdown-item aria-role="listitem" v-for="v in text_styles_groups.h" :value="v" style="padding-left: 3rem">{{text_styles[v]}}</b-dropdown-item> </vue-component-dropdown> <b-field class="is-hidden-mobile"> <b-select v-model="values.text_size" :disabled="info.is_readonly" expanded> <optgroup :label="\'Текст\'|gettext"> <option v-for="v in text_styles_groups.t" :value="v">{{text_styles[v]}}</option> </optgroup> <optgroup :label="\'Заголовок\'|gettext"> <option v-for="v in text_styles_groups.h" :value="v">{{text_styles[v]}}</option> </optgroup> </b-select> </b-field> </div> <div class="col-xs col-sm-shrink component-group"> <vue-component-font-chooser v-model="values.font" :fullwidth="true" :default-font="defaultFont"></vue-component-font-chooser> <b-field class="is-hidden-mobile" style="margin: 0 1rem !important"> <b-radio-button @input="changedTextAlign" v-model="values.text_align" v-for="(t, v) in text_aligns" type="is-dark" class="is-expanded" :native-value="v" :disabled="info.is_readonly"><i :class="\'fa fa-align-{1}\'|format(v)"></b-radio-button> </b-field> <vue-component-dropdown position="is-bottom-right" class="is-hidden-tablet" v-model="values.text_align" :disabled="info.is_readonly" :title="\'Выравнивание текста\'|gettext" button-class="button is-focusable"> <i :class="\'fa fa-align-{1}\'|format(values.text_align)" slot="button"></i> <b-dropdown-item aria-role="listitem" v-for="(t, v) in text_aligns" :value="v"><i class="has-mr-1" :class="\'fa fa-align-{1}\'|format(v)"></i>{{t}}</b-dropdown-item> </vue-component-dropdown> <vue-component-colorpicker v-model="values.color" :disabled="info.is_readonly" :colors="[defaultColor]" design="circle" :with-arrow="true"></vue-component-colorpicker> </div> </div> <vue-component-emoji-picker v-model="values.text"> <textarea class="input has-rtl" :placeholder="\'Текст\'|gettext" :style="style" v-emoji v-model="values.text" :disabled="info.is_readonly"></textarea> </vue-component-emoji-picker> </section> <section v-if="currentTab == \'options\'"> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-timer",{data:function(){return{weekdays:this.$getDaysNames(),months:this.$getMonthsNames(),first_day_week:this.$getFirstDayWeek()}},props:["values","options","variants","info","block","block_id","tabs","currentTab"],mixins:[FormModel],computed:{date:{get:function(){return this.values.timer[1].date?new Date(this.values.timer[1].date):null},set:function(e){this.values.timer[1].date=e?date_format("Y-m-d",e):null}},time:{get:function(){if(this.values.timer[1].time){var e=this.values.timer[1].time.split(":");return new Date(0,0,0,e[0],e[1])}return null},set:function(e){this.values.timer[1].time=e?date_format("H:i",e):null}},timeEveryday:{get:function(){if(this.values.timer[3].time){var e=this.values.timer[3].time.split(":");return new Date(0,0,0,e[0],e[1])}return null},set:function(e){this.values.timer[3].time=e?date_format("H:i",e):null}}},created:function(){this.block.title=this.$gettext("Таймер обратного отсчета"),this.$emit("update:tabs",[{name:"common",title:this.$gettext("Таймер")},"options","section"])},methods:{prepareValues:function(){return this.values}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="info.is_readonly && (currentTab == \'common\')" class="message is-warning"> <div class="message-body">{{\'Добавьте таймер обратного отсчета для временного ограничения — успеть поучаствовать в акции, записаться на курс и т.д.\'|gettext}}</div> </section> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff"> <b-field :label="\'Тип таймера\'|gettext"> <b-select v-model="values.type" :disabled="info.is_readonly" expanded> <option v-for="(v, k) in variants.type" :value="k">{{v}}</option> </b-select> </b-field> <div v-if="values.type == 1"> <div class="message is-info" v-if="!info.is_readonly"> <div class="message-body">{{\'Укажите дату и время окончания отсчета\'|gettext}}</div> </div> <div class="row"> <div class="col-xs-8"> <b-field :label="\'Дата\'|gettext" :message="errors.tms_1" :class="{\'has-error\': errors.tms_1}"> <div class="has-feedback"> <b-datepicker v-model="date" icon="calendar-alt" :disabled="info.is_readonly" :day-names="weekdays" :month-names="months" :first-day-of-week="first_day_week"></b-datepicker> <a class="form-control-feedback has-text-grey-light" @click="date = null" :class="{disabled: info.is_readonly}"><i class="fal fa-times"></i></a> </div> </b-field> </div> <div class="col-xs-4"> <label class="label">{{\'Время\'|gettext}}:</label> <div class="has-feedback"> <b-clockpicker v-model="time" :disabled="info.is_readonly" hour-format="24"></b-clockpicker> <a class="form-control-feedback has-text-grey-light" @click="time = null" :class="{disabled: info.is_readonly}"><i class="fal fa-times"></i></a> </div> </div> </div> </div> <div v-if="values.type == 2"> <div class="message is-info"><div class="message-body">{{\'Таймер будет запущен при первом посещении страницы клиентом. Укажите длительность таймера.\'|gettext}}</div></div> <b-field :message="errors.tms_2" :class="{\'has-error\': errors.tms_2}"> <div class="row has-mb-3"> <div class="col-xs-4 col-sm-3"> <label class="label">{{\'Дни\'|gettext}}:</label> <input type=\'number\' v-model=\'values.timer[2].days\' class=\'input\' placeholder="0" maxlength="3" :disabled="info.is_readonly" min="1" max="99"> </div> <div class="col-xs-4 col-sm-3"> <label class="label">{{\'Часы\'|gettext}}:</label> <input type=\'number\' v-model=\'values.timer[2].hours\' class=\'input\' placeholder="00" maxlength="2" :disabled="info.is_readonly" min="1" max="24"> </div> <div class="col-xs-4 col-sm-3"> <label class="label">{{\'Минуты\'|gettext}}:</label> <input type=\'number\' v-model=\'values.timer[2].minutes\' class=\'input\' placeholder="00" maxlength="2" :disabled="info.is_readonly" min="1" max="60"> </div> </div> </b-field> <b-field :label="\'Через сколько дней сбрасывать таймер\'|gettext" :message="errors.expires_2" :class="{\'has-error\': errors.expires_2}"> <div class="row"> <div class="col-xs-4 col-sm-3"> <input type=\'number\' v-model=\'values.timer[2].expires\' class=\'input\' placeholder="0" maxlength="3" :disabled="info.is_readonly"> </div> </div> </b-field> </div> <div v-if="values.type == 3"> <div class="message is-info"><div class="message-body">{{\'Таймер будет перезапускаться каждый день. Укажите время окончания таймера.\'|gettext}}</div></div> <b-field :label="\'Время\'|gettext" :message="errors.tms_3" :class="{\'has-error\': errors.tms_3}"> <div class="row"> <div class="col-md-3 col-sm-4 col-xs-6"> <div class="has-feedback"> <b-clockpicker v-model="timeEveryday" :disabled="info.is_readonly" hour-format="24"></b-clockpicker> <a class="form-control-feedback has-text-grey-light" @click="timeEveryday = null" :class="{disabled: info.is_readonly}"><i class="fal fa-times"></i></a> </div> </div> </div> </b-field> </div> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-blocks-video",{props:["values","options","info","variants","block","block_id","tabs","currentTab"],mixins:[FormModel],created:function(){this.block.title=this.$gettext("Видео"),this.$emit("update:tabs",[{name:"common",title:this.block.title},"options","section"])},computed:{provider:function(){return VideoHelper.getProviderName(this.values.url)}},methods:{prepareValues:function(){var e=this.$clone(this.values);return e.poster&&(e.poster=e.poster.picture_id),e}},template:'<section class="modal-card-body modal-card-body-blocks"> <section v-if="info.is_readonly && (currentTab == \'common\')" class="message is-warning"> <div class="message-body">{{\'Вставьте видео для быстрого просмотра прямо на вашу страницу, без перехода на другой сайт\'|gettext}}</div> </section> <section v-if="currentTab == \'common\'" @click="$parent.scrollToTariff"> <b-field :label="\'Ссылка на видео\'|gettext" :message="errors.url" :class="{\'has-error\': errors.url}"> <div class="control"> <input type="text" class="input" v-model="values.url" placeholder=\'http://\' autocorrect="off" autocapitalize="none" :disabled="info.is_readonly"></input> <p class="help has-text-grey" v-if="!errors.url">{{\'Поддерживается YouTube, Vimeo и видео формата mp4, m3u8 и webm\'|gettext}}</p> </div> </b-field> <transition name="fade"> <vue-component-pictures v-model="values.poster" v-if="provider == \'file\'" :button-title="\'Загрузить обложку\'|gettext" button-icon="fa fal fa-cloud-upload" updatable class="addon-opengraph-picture has-mb-2"></vue-component-pictures> </transition> <mx-toggle v-model="values.is_autoplay" :title="\'Автовоспроизведение на компьютере\'|gettext" class="has-mb-2" :disabled="info.is_readonly"></mx-toggle> <mx-toggle v-model="values.is_autohide" :title="\'Скрыть элементы управления\'|gettext" :disabled="info.is_readonly"></mx-toggle> </section> <section v-if="currentTab == \'options\'" @click="$parent.scrollToTariff"> <vue-pages-blocks-form-options :values.sync="options" :info="info"></vue-pages-blocks-form-options> </section> <slot></slot> </section>'}),window.$app.defineComponent("pages","vue-pages-choose-form",{data:function(){return{mainPage:null,isFetching:!1,isMainpageChanging:!1,values:{pages:[]}}},props:["is_readonly"],created:function(){this.fetchData(!0)},methods:{onAction:function(e){switch(e){case"change":this.mainPage=this.$account.page_id,this.isMainpageChanging=!0}},saveMainpage:function(){var t=this;this.$account.page_id!=this.mainPage?this.$api.get("pages/changemainpage",{page_id:this.mainPage},this).then(function(e){t.$account.page_id=t.mainPage,t.isFetching=!1,t.isMainpageChanging=!1}):this.isMainpageChanging=!1},fetchData:function(e){var t=this;this.isFetching=e,this.$api.get("pages/list").then(function(e){t.isFetching=!1,t.values.pages=e.response.pages})},openPage:function(e){this.$router.replace({name:"pages",params:{page_id:e}}),this.$parent.close()},newPage:function(){this.$modal("vue-pages-page-form",null,this),this.$parent.close()}},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title" v-if="isMainpageChanging">{{\'Смена главной страницы\'|gettext}}</p> <p class="modal-card-title" v-else>{{\'Страницы\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <section class="modal-card-body modal-card-body-blocks"> <div class="modal-pages-list"> <div v-if="isMainpageChanging"> <label class="item radio" v-for="f in values.pages"> <input type="radio" v-model="mainPage" :value="f.page_id"> <span v-if="f.title">{{f.title}}</span><span v-else class="has-text-grey">{{\'Без имени\'|gettext}}</span> </label> </div> <div v-else> <a class="item" @click="newPage" v-if="!is_readonly"><i class="fa fal fa-plus"></i> {{\'Создать новую страницу\'|gettext}}</a> <div class="modal-pages-list-hr" v-if="values.pages.length"></div> <a class="item" @click="openPage(f.page_id)" v-for="f in values.pages"> <i class="fa fal fa-mobile-android"></i> <span v-if="f.title">{{f.title}}</span><span v-else class="has-text-grey">{{\'Без имени\'|gettext}}</span> <span class="tag is-rounded is-success is-pulled-right" v-if="$account.page_id == f.page_id">{{\'Главная страница\'|gettext}}</span> </a> </div> </div> </section> <footer class="modal-card-foot level"> <div class="level-left"> <vue-component-action-button @action="onAction" v-if="!isMainpageChanging && !is_readonly" :title="\'Действие\'|gettext"> <template slot="actions"> <b-dropdown-item value="change"><i class="fa fa-home"></i> {{\'Сменить главную страницу\'|gettext}}</b-dropdown-item> </template> </vue-component-action-button> </div> <div class="level-right" v-if="isMainpageChanging"> <button class="button is-dark" type="button" @click="isMainpageChanging = false" :disabled="isFetching">{{\'Отмена\'|gettext}}</button> <button class="button is-primary" type="button" @click="saveMainpage" :disabled="isFetching">{{\'Сохранить\'|gettext}}</button> </div> <div class="level-right" v-else> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Закрыть\'|gettext}}</button> </div> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("pages","vue-pages-frontend-courses-feed",{data:function(){return{data:{lessons:[{title:"Урок",subtitle:"Описание",status:"new"},{title:"Урок",subtitle:"Описание",status:"new"},{title:"Урок",subtitle:"Описание",status:"new"},{title:"Урок",subtitle:"Описание",status:"new"}]}}},props:["options"],computed:{stylesheets:function(){var e=this.options.colors;return{background:e.bg,color:e.text}}},template:'<div class="block-course has-rtl" :style="stylesheets"> <div> <div v-for="l in data.lessons" class="course-lesson" :data-status="l.status"> <div><b>{{l.title}}</b><br><span style="font-size: 90%;opacity: .6">{{l.subtitle}}</span></div> </div> </div> </div>'}),window.$app.defineComponent("pages","vue-pages-frontend-courses-lesson",{data:function(){return{}},props:["options"],computed:{stylesheetsBody:function(){var e=this.options.colors;return{background:e.bg,color:e.text}},stylesheetsButton:function(){var e=this.options.buttons.done,t=e.bg,i=e.color;return{background:t,borderColor:t,color:i,"--color-text":i,"padding-right":"6px"}},thumb:function(){var e="//taplink.cc/s/icons/check.svg";return'<div class="is-icon" style="-webkit-mask-image:url('+e+");mask-image:url("+e+')"><img src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="></div>'}},template:'<div> <div class="block-lesson has-rtl has-mb-2 block-text has-p-2" :style="stylesheetsBody"> Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. </div> <div class="block-link"> <div class="button btn-link with-thumb" :style="stylesheetsButton"><figure class="thumb" v-html="thumb" v-if="thumb"></figure><div class="has-text-left"><div class="btn-link-title">{{options.buttons.done.title}}</div></div></div> </div> </div>'}),window.$app.defineComponent("pages","vue-pages-frontend-courses-navs",{data:function(){return{}},props:["options"],computed:{stylesheets:function(){var e=this.options.colors;return{background:e.bg,color:e.text,"--color-text":e.text}}},template:"<div class=\"block-course-navs has-rtl has-mb-1\" :style=\"stylesheets\"> <div><a>{{'Курс'|gettext}}</a></div> <div><span>{{'Урок'|gettext}}</span></div> </div>"}),window.$app.defineComponent("pages","vue-pages-frontend-courses-progress",{data:function(){return{progress:{value:2,total:5}}},props:["options"],computed:{colors:function(){return _.merge({colors:{done:"#49c674"}},this.options,!0).colors},stylesheet:function(){return{done:{width:this.progress.value/this.progress.total*100+"%","background-color":this.colors.done}}}},template:'<div> <div class="block-course-progress has-rtl has-mb-1"> <div class="course-progress-title"> <div>Прогресс</div> <div>{{progress.value}} из {{progress.total}}</div> </div> <div class="course-progress"><div :style="stylesheet.done"></div></div> </div> </div>'}),window.$app.defineComponent("pages","vue-pages-nickname-changed-form",{data:function(){return{isFetching:!1,isUpdating:!1,values:{}}},created:function(){this.fetchData(!0)},methods:{fetchData:function(e){var t=this;this.isFetching=e,this.$api.get("pages/nicknamechanged/get").then(function(e){t.isFetching=!1,t.values=e.response.pages.nicknamechanged})},updateData:function(){var t=this;this.isUpdating=!0,this.$api.post("pages/nicknamechanged/set",{},this).then(function(e){"success"==e.result&&t.$auth.refresh(e.response,function(){t.$parent.close()}),t.isUpdating=!1}).catch(function(e){t.isUpdating=!1})}},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Обновление ссылки\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <section class="modal-card-body"> <div class="message is-danger" v-if="values.is_busy"> <div class="message-body">{{\'Вы не можете поменять ссылку, имя уже занято другим аккаунтом.\'|gettext}}</div> </div> <div class="field"> {{\'Ваш никнейм в Instagram изменился. Вам необходимо обновить ссылку в Instagram, после чего нажмите кнопку "Я обновил ссылку", чтобы зафиксировать изменения.\'|gettext}} </div> <div class="field"> <label class="label">{{\'Старая ссылка\'|gettext}}</label> <input type="text" class="input" readonly="on" :value="values.old|sprintf(\'https://taplink.cc/%s\')"> </div> <div class="field"> <label class="label">{{\'Новая ссылка\'|gettext}}</label> <div class="field has-addons"> <div class="control is-expanded"><input type="text" class="input" readonly="on" :value="values.new|sprintf(\'https://taplink.cc/%s\')" id=\'pageLinkNew\'></div> <div class="control"> <vue-component-clipboard :text="values.new|sprintf(\'https://taplink.cc/%s\')" class="button is-default" :show-icon="false">{{\'Скопировать\'|gettext}}</vue-component-clipboard> </div> </div> </div> </section> <footer class="modal-card-foot"> <button class="button is-primary" :class="{\'is-loading\': isUpdating}" @click="updateData" :disabled="values.is_busy">{{\'Я обновил ссылку\'|gettext}}</button> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Пока не обновил\'|gettext}}</button> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("pages","vue-pages-page-blocks",{props:{page_id:Number,theme:Object,readonly:Boolean,pageData:Object,canNavigate:Boolean,showHidden:{type:Boolean,default:!0},showReorder:{type:Boolean,default:!0},allowWelcome:Boolean,pageOptions:{default:{}}},computed:{showWelcome:function(){return this.allowWelcome&&this.data.blocks_order.length<2&&0==(16&this.$account.tips_bits)},allowSections:function(){return-1!=this.$account.features.indexOf("sections")},scrollContainer:function(){return this.$device.mobile?$mx(".main-block")[0]:document.scrollingElement||document.documentElement},data:function(){return this.pageData?this.pageData:this.$page.data},sections:function(){var e=null,t=[],s={blocks:[]};for(i=0;i<this.data.blocks_order.length;i++){var n=this.data.blocks[this.data.blocks_order[i]];null!=n&&(n.section_id!=e&&(s.blocks.length&&t.push(s),s={section_id:n.section_id,blocks:[]}),s.blocks.push({i:i,block_id:n.block_id}),e=n.section_id)}return s.blocks.length&&t.push(s),t.length&&t[0].section_id&&t.unshift({section_id:null,bg:null,bg_layer:null,blocks:[]}),t},is_readonly:function(){return this.data.page.is_readonly||this.readonly}},methods:{iconPaths:function(e){var t="";if(null!=e.ip)for(i=1;i<=e.ip;i++)t+='<em class="p'+i+'"></em>';return t},helperClass:function(e){e.resolve($mx(e.node).closest(".blocks-section")[0].className.replace("blocks-section",""))},bannerInnerStyle:function(e){return e.p&&!e.is_stretch?"width:"+(e.is_scale&&e.width?e.width:e.p.width)+"px":""},newBlock:function(){this.$modal("vue-pages-blocks-form-modal",{page_id:this.page_id},this)},openForm:function(e){var t=this.data.blocks[e];this.is_readonly&&"link"==t.block_type_name&&"page"==t.options.type&&t.options.link_page_id?this.$router.push({name:"pages",params:{page_id:t.options.link_page_id}}):this.is_readonly||this.$modal("vue-pages-blocks-form-modal",{block_id:e},this)},addLinkPage:function(e,t){this.$modal("vue-pages-page-form",{values:{block_id:e,title:t}},this)},sectionHandleDown:function(e,l){var a=this,o=$mx(".main-block"),c=o[0].scrollTop,d=$mx(e.target).addClass("in"),u=d.position().top,p=e.touches?e.touches[0].pageY+c:e.pageY,r=this.data;var h=function(s){var n={before:[],after:[]};_.each($mx.makeArray(d.closest(".blocks-list").find(".section-main > div > .block-item")),function(e){var t=$mx(e),i={b:r.blocks[parseInt(e.className.match(/b-([0-9]+)/)[1])],y:t.offset().top+.5*t.outerHeight()};n[s<i.y?"after":"before"].push(i)}),n.before=n.before.reverse();for(var e=n.before.length?n.before[0].b.section_id:null,t=n.after.length?n.after[0].b.section_id:null,i=0,i=0;i<n.before.length&&n.before[i].b.section_id==e;i++);for(n.before.splice(e?i-1:i),i=0;i<n.after.length&&n.after[i].b.section_id==t;i++);return n.after.splice(t?i-1:i),n}(p);d.css("top",u);var f=this.sections,m={};function v(e){var t=e.touches?e.touches[0].pageY+c:e.pageY;e.preventDefault();if(p<t){for(var i=0;i<h.after.length;i++){var s=h.after[i].b;h.after[i].y<t?s.section_id=f[l].section_id:s.section_id=m[s.block_id]}var n=h.after.length?h.after[h.after.length-1].y+8:p,t=Math.min(t,n)}else{for(var a=0;a<h.before.length;a++){var o=h.before[a].b;h.before[a].y>t?o.section_id=null!=f[l+1]?f[l+1].section_id:null:o.section_id=m[o.block_id]}var r=h.before.length?h.before[h.before.length-1].y-8:p;t=Math.max(t,r)}d.css("top",u+(t-p))}_.each(r.blocks,function(e,t){return m[t]=e.section_id}),o.on("mousemove touchmove",v),o.one("mouseup touchend",function(e){o.off("mousemove touchmove",v);var i={};_.each(m,function(e,t){e&&(null==i[e]&&(i[e]=[]),i[e].push(parseInt(t)))});var t={};_.each(a.data.blocks,function(e){e.section_id&&(null==t[e.section_id]&&(t[e.section_id]=[]),t[e.section_id].push(parseInt(e.block_id)))});var s={},n=_.difference(Object.keys(i),Object.keys(t));_.each(t,function(e,t){null==i[t]||_.isEqual(e,i[t])||(s[t]=e)}),(_.size(s)||_.size(n))&&(Vue.prototype.$page.isUpdating=!0,a.$api.post("pages/sections",{page_id:a.page_id,modified:s,deleted:n},null,"sections").then(function(e){Vue.prototype.$page.isUpdating=!1,"fail"==e.result&&a.$page.fetchData(a.page_id,!0)})),d.removeClass("in"),d.css("top",null)})},picturesBrightnessClass:function(e){var t=this.data.blocks[e].options,i=this.$account.theme,s=t.design.on?t.design.bg:(null==i.block?StylesFactory.getBaseStyles():i).block.pictures.bg;return isLightColor(s)?"is-light":"is-dark"},prepareTextStyle:function(e){var t={"text-align":e.text_align,"line-height":FontsFactory.getLineHeight(e.text_size),"font-size":FontsFactory.getTextSize(e.text_size),color:e.color+"!important"};return e.font&&Object.assign(t,{"font-family":FontsFactory.getFont(e.font)+" !important","font-weight":"h"==e.text_size[0]?FontsFactory.getWeight(e.font,this.$account.theme.heading.weight):null}),FontsFactory.check(),t},prepareText:function(e){return e.trim()?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\n/g,"<br>"):this.$gettext("Редактировать текст")},sortEnd:function(e){var t,i,s,n,a,o,r,l=this;e.oldIndex!=e.newIndex&&(i=-1!=(t=e.oldIndex<e.newIndex?e.newIndex:e.newIndex?e.newIndex-1:-1)?this.data.blocks_order[t]:null,0<_.size(this.data.sections)&&(s=this.data.blocks[this.data.blocks_order[e.oldIndex]].section_id,n=null!=this.data.blocks[i]?this.data.blocks[i].section_id:null,a=null!=this.data.blocks[this.data.blocks_order[t+1]]?this.data.blocks[this.data.blocks_order[t+1]].section_id:null,s!=n&&s!=a&&(n&&n==a?this.data.blocks[this.data.blocks_order[e.oldIndex]].section_id=n:(o=this.data.blocks[this.data.blocks_order[e.oldIndex]].section_id,r=0,_.each(this.data.blocks,function(e){r+=o==e.section_id?1:0}),1<r&&(this.data.blocks[this.data.blocks_order[e.oldIndex]].section_id=null)))),Vue.prototype.$page.isUpdating=!0,this.$api.post("pages/resort",{page_id:this.page_id,id:this.data.blocks_order[e.oldIndex],after:i},null,"resort").then(function(e){Vue.prototype.$page.isUpdating=!1,"fail"==e.result&&l.$page.fetchData(l.page_id,!0)}))}},template:'<div class="theme-main" :class="StylesFactory.getPageClasses(theme)"> <sortable-list class="blocks-list" :class="[{\'has-hide-reorder\': !showReorder || is_readonly}, \'valign-\'+((pageOptions && pageOptions.valign != undefined)?pageOptions.valign:\'top\')]" :style="{\'flex-grow\':showWelcome?0:1}" lockAxis="y" v-model="data.blocks_order" use-drag-handle :helperClass="(\'page-blocks main-theme is-reording \'+StylesFactory.getPageClasses(theme).join(\' \')).trim()" @helper="helperClass" @sortEnd="sortEnd" :useWindowAsScrollContainer="true" :scrollContainer="scrollContainer" :contentWindow="scrollContainer"> <div v-for="(section, si) in sections" class="blocks-section" :class="[section.section_id?(\'has-s s-\'+section.section_id):null, (sections[si+1] != undefined && sections[si+1].section_id)?\'has-next-s\':null, {\'is-empty\': !section.blocks.length}]"> <div> <div class="page-container"> <div class="section-main" :class="{\'handles-hidden\': !showReorder}" v-if="section.blocks.length"> <div> <sortable-item v-for="b in section.blocks" :class="[\'b-\'+b.block_id, \'block-item\', {\'is-readonly\': is_readonly && !(canNavigate && (data.blocks[b.block_id].block_type_name == \'link\' && data.blocks[b.block_id].options.type == \'page\' && data.blocks[b.block_id].options.link_page_id))}]" :index="b.i" :key="b.i" :item="data.blocks[b.block_id]" v-if="showHidden || data.blocks[b.block_id].is_visible"> <div v-if="data.blocks[b.block_id].block_type_name == \'text\'" class="block-text has-rtl" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)"><div :class="{\'is-heading\': data.blocks[b.block_id].options.text_size[0] == \'h\'}" v-html="prepareText(data.blocks[b.block_id].options.text)" :style="prepareTextStyle(data.blocks[b.block_id].options)"></div></a> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'avatar\'" class="block-avatar" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)"> <div class="has-text-centered"><img :src="$account.avatar.url" :class="data.blocks[b.block_id].avatar.size|sprintf(\'profile-avatar profile-avatar-%s\')"></div> <div class="has-text-centered text-avatar" v-if="!data.blocks[b.block_id].avatar.is_hide_text && $account.nickname">{{$account.nickname}}</div> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'courses-feed\'" class="block-html" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)"> <vue-pages-frontend-courses-feed :options="data.blocks[b.block_id].options"/> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'courses-lesson\'" class="block-break" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)"> <vue-pages-frontend-courses-lesson :options="data.blocks[b.block_id].options"/> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'courses-progress\'" class="block-html" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)"> <vue-pages-frontend-courses-progress :options="data.blocks[b.block_id].options"/> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'courses-navs\'" class="block-html" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)"> <vue-pages-frontend-courses-navs :options="data.blocks[b.block_id].options"/> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'html\'" class="block-html" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)"> <vue-component-blocks-html v-model="data.blocks[b.block_id].options.html"></vue-component-blocks-html> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'link\'" :class="!is_readonly?$format(\'block-link block-link-{1}\', data.blocks[b.block_id].options.type):null" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-if="!is_readonly && showReorder"></div> <router-link v-if="(data.blocks[b.block_id].options.type == \'page\') && data.blocks[b.block_id].options.link_page_id && !is_readonly && showReorder" class="block-handle-link" :to="{name: \'pages\', params: {page_id: data.blocks[b.block_id].options.link_page_id}}"></router-link> <a v-if="(data.blocks[b.block_id].options.type == \'page\') && !data.blocks[b.block_id].options.link_page_id && !is_readonly && showReorder" class="block-handle-link block-handle-link-plus" @click="addLinkPage(b.block_id, data.blocks[b.block_id].options.title)"></a> <a @click="openForm(b.block_id)" class="button btn-link btn-link-styled" :class="data.blocks[b.block_id].classname" :style="data.blocks[b.block_id].stylesheet"><figure class="thumb" v-html="data.blocks[b.block_id].thumb" v-if="data.blocks[b.block_id].thumb"></figure><div><div class="btn-link-title" :style="data.blocks[b.block_id].stylesheetTitle">{{data.blocks[b.block_id].options.title}}</div><div v-if="data.blocks[b.block_id].options.subtitle" class="btn-link-subtitle" :style="data.blocks[b.block_id].stylesheetSubtitle">{{data.blocks[b.block_id].options.subtitle}}</div></div></a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'timer\'" class="block-timer" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)" style="overflow: hidden"> <center> <vue-component-blocks-flipclock v-model="data.blocks[b.block_id].options" :page_id="data.page.page_id"></vue-component-blocks-flipclock> </center> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'break\'" class=\'block-break\' :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)"> <div class=\'block-break-inner\' :class="{\'has-icon\': data.blocks[b.block_id].options.icon, \'is-invisible\': data.blocks[b.block_id].options.icon < 0, \'is-fullwidth\': data.blocks[b.block_id].options.fullwidth, \'has-fading\': data.blocks[b.block_id].options.fading}" :style="{\'height\': data.blocks[b.block_id].options.break_size + \'px\'}"><span><i :class="[\'fa fai\', \'fa-\'+data.blocks[b.block_id].options.icon]" v-if="data.blocks[b.block_id].options.icon"></i></span></div> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'video\'" class="block-video" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)"> <vue-component-video :options="data.blocks[b.block_id].options" style="pointer-events: none"></vue-component-video> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'collapse\'" class="block-collapse has-rtl" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)" class="btn-link-block"> <div class="collapse-list"> <div class="collapse-item" v-for="v in data.blocks[b.block_id].options.fields"> <div class="a"> <span class="collapse-icon"></span> <span class="collapse-title" v-if="v.title">{{v.title}}</span> <span class="collapse-title" v-else>{{\'Заголовок\'|gettext}}</span> </div> </div> </div> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'pictures\'" class="block-slider" :class="[picturesBrightnessClass(b.block_id), {\'is-allow-fullwidth\': data.blocks[b.block_id].options.is_desktop_fullwidth}]" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)"> <div class="block-slider-inner" style="pointer-events: none"> <div :class="{\'slider-has-text\': data.blocks[b.block_id].options.options.text, \'slider-has-link\': data.blocks[b.block_id].options.options.link, \'slider-has-border\': !data.blocks[b.block_id].options.remove_border}" class="slider slider-pictures"> <div class="slider-inner"> <div v-for="(item, i) in data.blocks[b.block_id].options.list" v-if="i < 2" class="slider-slide"><div class="picture-container" :class="{\'picture-container-empty\': !item.p}" :style="item.stylesheet_picture"><div></div></div> <div v-if="data.blocks[b.block_id].options.options.text" class="slider-slide-text has-rtl" :style="item.stylesheet_text"><div class="slider-slide-title" v-if="item.t">{{item.t}}</div><div class="slider-slide-title" v-else>{{\'Заголовок\'|gettext}}</div><div class="slider-slide-snippet">{{item.s}}</div></div> <div v-if="data.blocks[b.block_id].options.options.link && item.link.title" class="slider-slide-link btn-link-title">{{item.link.title}}</div> <div v-if="data.blocks[b.block_id].options.options.link && !item.link.title" class="slider-slide-link btn-link-title">{{\'Открыть\'|gettext}}</div> </div> </div> <div class="slider-nav" v-if="data.blocks[b.block_id].options.list.length> 1"> <div v-for="(item, i) in data.blocks[b.block_id].options.list" class="slider-dot" :class="{\'active\': !i}"></div> </div> </div> </div> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'form\'" class="block-form has-rtl" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)"> <div v-for="field in data.blocks[b.block_id].options.fields"> <div v-if="field.typename == \'button\'" class="form-field"><div class="button btn-link btn-link-title" :style="field.stylesheet">{{field.title}}</div></div> <div v-else-if="field.typename == \'paragraph\'" class="form-field" style="font-size:1.9em !important" v-html="field.text"></div> <div v-else class="form-field"> <div v-if="field.typename == \'checkbox\'" class="checkbox-list"> <label class="checkbox"> <input type="checkbox" :checked="field.default"> {{field.title}}<sup class="required" v-if="field.required">*</sup> </label> <div class="form-field-desc" v-if="field.text">{{field.text}}</div> </div> <label v-else class="label">{{field.title}}<sup class="required" v-if="field.required">*</sup></label> <div v-if="(field.typename != \'checkbox\') && field.text" class="form-field-desc">{{field.text}}</div> <input v-if="[\'name\', \'text\', \'email\', \'number\'].indexOf(field.typename) != -1" :type="field.input_type" value=\'\'> <div v-if="field.typename == \'phone\'"><input type="tel" value=\'\' :data-country="$account.client.country"></div> <textarea v-if="field.typename == \'textarea\'" rows="4"></textarea> <input v-if="[\'date\', \'time\'].indexOf(field.typename) != -1" :type="field.input_type"> <div class="select" v-if="field.typename == \'select\' || field.typename == \'country\'"><select> <option value="" v-if="field.nulltitle">{{field.nulltitle}}</option> <option v-for="variant in field.variants" :value="variant">{{variant}}</option> </select></div> <div class="radio-list" v-if="field.typename == \'radio\'"> <label v-for="variant in field.variants" class="radio is-block"> <input type="radio" :value="variant"> {{variant}} </label> </div> </div> </div> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'socialnetworks\'" class="block-socialnetworks" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle block-handle-socials" v-show="!is_readonly && showReorder"></div> <div class="socials"> <div class="row row-small"> <div :class="{\'col-xs\': (data.blocks[b.block_id].options.socials_style != \'default\' && data.blocks[b.block_id].options.socials_style != \'block\'), \'col-xs-12\': (data.blocks[b.block_id].options.socials_style == \'default\' || data.blocks[b.block_id].options.socials_style == \'block\')}" v-for="l in data.blocks[b.block_id].options.items"> <a @click="openForm(b.block_id)" class="button btn-link btn-link-title" :class="l.classname" :style="data.blocks[b.block_id].stylesheet"><i v-if="data.blocks[b.block_id].options.socials_style != \'default\'" :class="l.i" v-html="iconPaths(l)"></i><span v-if="data.blocks[b.block_id].options.socials_style != \'compact\'">{{l.t}}</span></a> </div> </div> </div> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'messenger\'" class="block-link" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle block-handle-socials" v-show="!is_readonly && showReorder"></div> <div class="socials"> <div class="row row-small"> <div :class="{\'col-xs\': (data.blocks[b.block_id].options.messenger_style != \'default\' && data.blocks[b.block_id].options.messenger_style != \'block\'), \'col-xs-12\': (data.blocks[b.block_id].options.messenger_style == \'default\' || data.blocks[b.block_id].options.messenger_style == \'block\')}" v-for="l in data.blocks[b.block_id].options.items"> <a @click="openForm(b.block_id)" class="button btn-link btn-link-title" :class="l.classname" :style="data.blocks[b.block_id].stylesheet"> <img :src="\'/s/i/messengers/icons/{1}.svg\'|format(l.n)" v-if="data.blocks[b.block_id].options.messenger_style == \'icon\'"> <i :class="l.i" v-else v-if="data.blocks[b.block_id].options.messenger_style != \'default\' && data.blocks[b.block_id].options.messenger_style != \'icon\'" v-html="iconPaths(l)"></i> <span v-if="[\'default\', \'block\'].indexOf(data.blocks[b.block_id].options.messenger_style) != -1">{{l.t}}</span> </a> </div> </div> </div> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'map\'" class="block-form" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)" class="btn-link-block"> <vue-component-blocks-map v-model="data.blocks[b.block_id].options"></vue-component-blocks-map> </a> <a v-if="data.blocks[b.block_id].options.show_buttons" v-for="m in data.blocks[b.block_id].options.markers" @click="openForm(b.block_id)" class="button btn-link btn-link-block btn-map btn-link-styled btn-link-title" :style="m.stylesheet"> <i class="fa fa-map-marker-alt"></i><span>{{ m.title }}</span> </a> </div> </div> <div v-if="data.blocks[b.block_id].block_type_name == \'banner\'" class="block-banner" :class="{\'is-marginless\': data.blocks[b.block_id].options.is_marginless && data.blocks[b.block_id].options.is_stretch}" :style="{opacity: data.blocks[b.block_id].is_visible?1:0.4}"> <div> <div v-sortable-handle class="block-handle" v-show="!is_readonly && showReorder"></div> <a @click="openForm(b.block_id)" class="btn-link-block"> <div class="block-banner-inner" :style="bannerInnerStyle(data.blocks[b.block_id].options)"><div class="picture-container" :class="{\'picture-container-empty\': !data.blocks[b.block_id].options.p}" :style="data.blocks[b.block_id].stylesheet_picture"></div></div> </a> </div> </div> </sortable-item> </div> </div> </div> </div> <div class="section-handle" v-if="allowSections && (section.section_id || si < sections.length-1) && !is_readonly && showReorder" @mousedown="sectionHandleDown($event, si)" @touchstart="sectionHandleDown($event, si)"></div> </div> </sortable-list> <div v-if="showWelcome" style="flex:1;flex-direction: column;display: flex;"> <div style="flex:1"></div> <div style="overflow:hidden"> <div class="row"> <div class="col-xs-8 col-xs-offset-2 has-text-centered has-mt-4" style="font-size: 1.2rem;line-height: 1.5;color: #7a7a7a"> {{\'Начните создание страницы с добавления нового блока\'|gettext}}<br><i class="fal fa-long-arrow-down fa-2x has-mt-2 has-mb-2 has-text-grey-light" style="animation: fa-down 1s infinite"></i> </div> </div> </div> </div> </div>'}),window.$app.defineComponent("pages","vue-pages-page-form",{data:function(){return{activeTab:"common",isFetching:!1,isUpdating:!1,page_options:[]}},props:{page_id:Number,values:{default:{}}},mixins:[FormModel],created:function(){this.page_id&&this.fetchData(!0)},computed:{path:function(){return this.$account.page_id!=this.page_id?"/p/"+parseInt(this.page_id).toString(16)+"/":""},pageLink:function(){return this.$account.link+this.path},pageSafeLink:function(){return this.$account.link_safe+this.path}},methods:{fetchData:function(e){var t=this;this.isFetching=e,this.$api.get("pages/props/get",{page_id:this.page_id}).then(function(e){t.isFetching=!1,t.values=e.response.pages.props.values,t.page_options=e.response.pages.props.page_options})},updateData:function(){var t=this;this.isUpdating=!0,this.$api.post("pages/props/set",this.values,this).then(function(e){"success"==e.result&&(t.$parent.close(),t.page_id||(t.values.title="",t.$router.replace({name:"pages",params:{page_id:e.response.values.page_id}})),t.values={}),t.isUpdating=!1}).catch(function(e){t.isUpdating=!1})},onAction:function(e){var t=this;switch(e){case"delete":this.$confirm(this.$gettext("Вы уверены что хотите удалить эту страницу? Вы не сможете её вернуть!"),"is-danger").then(function(){t.$api.get("pages/delete",{page_id:t.page_id},t).then(function(e){"success"==e.result&&(t.$parent.close(),t.$router.replace({name:"pages",params:{page_id:t.$account.page_id}}))})})}}},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title" v-if="page_id">{{\'Страница\'|gettext}}</p> <p class="modal-card-title" v-else>{{\'Новая страница\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <ul class="nav nav-tabs" v-if="page_id"> <li :class="{active: activeTab== \'common\'}"><a href="#" @click="activeTab = \'common\'">{{\'Ссылка\'|gettext}}</a></li> <li :class="{active: activeTab== \'qr\'}"><a href="#" @click="activeTab = \'qr\'">{{\'QR-код\'|gettext}}</a></li> <li :class="{active: activeTab== \'seo\'}"><a href="#" @click="activeTab = \'seo\'">{{\'Настройки SEO\'|gettext}}</a></li> </ul> <section class="modal-card-body" v-show="activeTab == \'common\'"> <b-field :label="\'Название страницы\'|gettext" :message="errors.title" :class="{\'has-error\': errors.title}"> <input type="text" class="input" v-model="values.title"> </b-field> <div class="field" v-if="values.page_id"> <label class="label">{{\'Ссылка на страницу\'|gettext}}</label> <div class="field has-addons"> <div class="control is-expanded"><input type=\'text\' class=\'input\' readonly=\'on\' id=\'pageLink\' :value="pageLink"></div> <div class="control"> <vue-component-clipboard :text="pageLink" class="button is-default" :show-icon="false">{{\'Скопировать\'|gettext}}</vue-component-clipboard> </div> </div> </div> </section> <section class="message is-info" v-if="activeTab == \'qr\'"><div class="message-body">{{\'Вы можете скачать и использовать ваш QR-код на визитках или флайерах\'|gettext}}</div></section> <section class="modal-card-body" v-if="activeTab == \'qr\'"> <vue-component-qrcode :value="pageSafeLink" :with-download="true" class="has-text-centered"></vue-component-qrcode> </section> <section class="modal-card-body" v-if="activeTab == \'seo\'"> <b-field :label="\'Заголовок страницы\'|gettext"> <div class="control"> <input type="text" class="input" maxlength="180" :disabled="isUpdating" v-model="values.seo_title" :placeholder="page_options.seo.title"> <p class="has-mt-1 has-text-grey">{{\'Отображается в названии вкладки браузера и в результатах поисковых систем\'|gettext}}</p> </div> </b-field> <b-field :label="\'SEO описание\'|gettext"> <div class="control"> <textarea class="input" maxlength="512" rows="4" :disabled="isUpdating" v-model="values.seo_description" :placeholder="page_options.seo.description"></textarea> <p class="has-mt-1 has-text-grey">{{\'Отображается в результатах поисковых систем под ссылкой\'|gettext}}</p> </div> </b-field> </section> <footer class="modal-card-foot level"> <div class="level-left"> <vue-component-action-button @action="onAction" :title="\'Действие\'|gettext" v-if="values.page_id"> <template slot="actions"> <b-dropdown-item value="delete" class="has-text-danger"><i class="fa fa-trash-alt has-mr-1"></i>{{\'Удалить\'|gettext}}</b-dropdown-item> </template> </vue-component-action-button> <button v-else class="button is-dark is-hidden-tablet" type="button" @click="$parent.close()">{{\'Отмена\'|gettext}}</button> </div> <div class="level-right"> <button class="button is-primary" :class="{\'is-loading\': isUpdating}" @click="updateData">{{\'Сохранить\'|gettext}}</button> </div> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("pages","vue-pages-page",{data:function(){return{isFetching:!1,tipsInited:!1,tipsChoose:!1,showHidden:!1,viewModeTooltipTimeout:0,wait_scroll_block_id:null,viewModeTooltipVisible:!1,vertical_aligns:{top:this.$gettext("Сверху"),middle:this.$gettext("По центру"),bottom:this.$gettext("Снизу")},view_modes:{xs:{title:this.$gettext("Телефон"),icon:"mobile"},md:{title:this.$gettext("Компьютер"),icon:"desktop",mobile_title:this.$gettext("Недоступно в телефоне")}},view_mode:"xs",showHidden:!!Storage.get("float-panel-hidden",!0)}},props:["page_id","back_page_id"],created:function(){var e=document.location.search;e.match(/[\?|\&]wizard/)&&(e=e.replace(/[\?|\&]wizard/,""),this.$modal("vue-pages-wizard-form",{page_id:this.page_id},this),this.$router.replace(document.location.pathname.substr(window.base_path.length-1)+e))},watch:{page_id:function(){scrollIt(0,"y",this.$device.mobile?$mx(".main-block")[0]:null),this.fetchData(!0)},showHidden:function(e){Storage.set("float-panel-hidden",e)}},mounted:function(){this.fetchData(!0),this.$events.on("page.styles:updated",this.eventStylesUpdated),this.$events.on("page:updated",this.pageUpdated)},computed:{tipsChoosePage:function(){return!this.isFetching&&this.page_id!=this.$account.page_id&&this.tipsChoose?this.$gettext("Вы создали новую страницу, для навигации между вашими страницами нажмите тут"):""},inited:function(){return!this.isFetching&&this.tipsInited},linkDomain:function(){var e=this.$account;return e.custom_domain_verified?(e.custom_domain_secured?"https":"http")+"://"+e.custom_domain:"https://taplink.cc"},linkPath:function(){return this.linkDomain+this.$account.link_path+this.$page.data.page.link.path},tippyFloatPanelContent:function(){var e=this.$page.isViewMode;return this.$device.mobile?e?this.$gettext("Включен режим просмотра"):this.$gettext("Включен режим редактирования"):e?this.$gettext("Режим редактирования"):this.$gettext("Режим просмотра")}},beforeDestroy:function(){this.viewModeTooltipTimeout&&clearTimeout(this.viewModeTooltipTimeout),this.$events.off("page:updated",this.pageUpdated),this.$events.off("page.styles:updated",this.eventStylesUpdated)},beforeRouteLeave:function(e,t,i){this.$page.setViewMode(!1),i()},methods:{tippyFloatPanelMouseEnter:function(){this.viewModeTooltipVisible=!0},tippyFloatPanelMouseLeave:function(){this.viewModeTooltipVisible=!1},toggleViewMode:function(){var e=this;this.$page.setViewMode(!this.$page.isViewMode),this.$device.mobile&&(this.viewModeTooltipVisible=!0,this.viewModeTooltipTimeout&&clearTimeout(this.viewModeTooltipTimeout),this.viewModeTooltipTimeout=setTimeout(function(){e.viewModeTooltipVisible=!1,e.viewModeTooltipTimeout=0},2e3))},floatDropdownActiveChange:function(e){$mx("html").toggleClass("is-clipped",e)},addTemplate:function(){this.$modal("vue-templates-form",{page_id:this.page_id},this)},newBlock:function(){this.$page.setViewMode(!1),this.$page.pageChanged(),this.$modal("vue-pages-blocks-form-modal",_.merge({page_id:this.page_id},this.getBeforeBlockId()),this)},scrollToBlock:function(s){var n=this;this.$nextTick(function(){var e,t,i=$mx(".b-"+s);i.length&&($mx(".float-panel").viewportOffset(),e=i.offset().top+i.height()+15-$mx(".float-panel").viewportOffset().top,t=n.$device.mobile?$mx(".main-block").scrollTop():window.pageYOffset,e&&t<e&&scrollIt(e,"y",n.$device.mobile?$mx(".main-block")[0]:null)),n.wait_scroll_block_id=i.length?null:s})},pageUpdated:function(){this.wait_scroll_block_id&&this.scrollToBlock(this.wait_scroll_block_id)},getBeforeBlockId:function(){var e=$mx(".theme-main").offset().top,t=$mx(".float-panel").viewportOffset().top,s=$mx(".theme-main .section-main > div > .block-item"),n=null,a=t-e+(this.$device.mobile?$mx(".main-block").scrollTop():window.pageYOffset);for(i=0;i<s.length;i++)if(s[i].offsetTop+s[i].clientHeight>a){n=s[i];break}if(n){var o=n.closest(".blocks-section").className.match(/s\-([0-9]+)/);return{before_block_id:n.className.match(/b\-([0-9]+)/)[1],before_section_id:o?o[1]:null}}return{before_block_id:null,before_section_id:null}},tippyFloatPanelClick:function(e){switch(e){case"showHidden":this.showHidden=!this.showHidden}},updatetipsbits:function(){$mx.get("/api/account/updatetipsbits.json?bit=1")},eventStylesUpdated:function(){StylesFactory.updateCSSBlock(this.$page.styles,this.$refs.styles)},fetchData:function(e){var i=this;this.tipsChoose=this.tipsInited=!1,this.isFetching=e,this.$page.fetchData(this.page_id,!1).then(function(e){var t;i.isFetching=!1,"fail"==e.result||1!=(t=i.$page.data.page).page_type_id&&(i.$form.open(null,{},function(){null!=t.event_close&&null!=t.event_close.link&&i.$router.replace(t.event_close.link.replace(":back_page_id",i.back_page_id))}),i.$form.top.title=t.title),"success"==e.result?(0==(2&i.$account.tips_bits)&&(i.checkWelcomePartnerAccess(),eventStack.push("google","startup"),eventStack.push("metrika","startup")),0==(1&i.$account.tips_bits)&&i.$auth.isAllowTariff("business")&&i.page_id!=i.$account.page_id&&(i.tipsChoose=!0,i.$account.tips_bits|=1),(m=document.location.hash.match("publish:?([a-z_]+)?"))&&(i.installPage(1<m.length?m[1]:null),document.location.hash="")):404==e.code&&i.$router.replace({name:"pages",params:{page_id:$account.page_id}}),i.eventStylesUpdated()}).catch(function(){i.isFetching=!1})},showStartupTips:function(e){window.initStartup({langNewblock:this.$gettext("Чтобы добавить новый блок,<br>нажмите сюда"),langSort:this.$gettext("Вы можете менять блоки местами,<br>для этого перетащите нужный вам блок"),langEditblock:this.$gettext("Чтобы отредактировать блок,<br>просто нажмите на него")},e)},checkWelcomeWizard:function(){var e=this;0==(2&this.$account.tips_bits)&&this.$nextTick(function(){e.showStartupTips(function(){e.$account.tips_bits=2|e.$account.tips_bits})})},checkWelcomePartnerAccess:function(){null!=this.$account.partner&&null!=this.$account.partner.with_message&&this.$account.partner.with_message?this.$modal("vue-pages-partner-access-form",{},this):this.checkWelcomeWizard()},installPage:function(e){this.$modal("vue-pages-publish-form",{is_readonly:this.$page.data.page.is_readonly,target:e},this)},configurePage:function(){this.$modal("vue-pages-page-form",{page_id:this.$page.data.page.page_id},this)},choosePage:function(){this.$modal("vue-pages-choose-form",{is_readonly:this.$page.data.page.is_readonly},this)},changeNickname:function(){this.$modal("vue-pages-nickname-changed-form",{},this)}},template:'<div style="flex: 1;display: flex;flex-direction: column"> <div ref=\'styles\'></div> <div class="top-panel is-top-level hero-block hero-link has-text-grey" v-if="!$form.isOpenedHeader"> <div class="container"> <div class="row"> <div class="col-xs-12"> <div class="form-control-link is-size-5"> <div class="form-control-link-text has-text-danger" v-if="$account.ban"><i class="fa fa-exclamation-circle has-mr-1"></i>{{\'Ваш аккаунт заблокирован\'|gettext}}</div> <div class="form-control-link-text" v-else> <a style="margin-right: 5px" v-if="$account.nickname_changed" @click="changeNickname" :content="\'Никнейм вашего Instagram профиля изменился, нажмите тут чтобы обновить ссылку\'|gettext" v-tippy="{placement: \'bottom\', trigger: \'manual\', showOnCreate: true}"><i class="fas fa-exclamation-circle has-text-danger"></i></a> <span v-if="$account.nickname || $account.custom_domain_verified"> <span class=\'is-hidden-mobile\'>{{\'Моя ссылка\'|gettext}}: </span><a :href="linkPath" target="_blank" v-if="!isFetching"><span :class="{\'is-hidden-mobile\':!$account.custom_domain || $page.data.page.link.path}">{{linkDomain}}</span>{{$account.link_path}}{{$page.data.page.link.path}}</a> </span> <span v-else> <span class="is-hidden-mobile">{{\'Для получения ссылки нажмите кнопку "Установить"\'|gettext}}</span> <span class="is-hidden-tablet">{{\'Получить ссылку\'|gettext}}</span> <i class="fa fa-long-arrow-right has-ml-1"></i> </span> </div> <router-link v-if="$account.tariff == \'business\' && ($account.page_id != page_id) && (page_id != 0)" :to="{name: \'pages\', params: {page_id: $account.page_id}}" class="button is-light link-pages is-hidden-mobile"><i class="fa fa-undo has-text-grey-light has-mr-1"></i>{{\'На главную\'|gettext}}</router-link> <button v-if="$auth.isAllowTariff(\'business\') && !tipsChoose" class="button link-pages" :class="$device.mobile?\'is-light\':\'is-dark\'" @click="choosePage"><i class="fas fa-chevron-down"></i></button> <a v-if="$auth.isAllowTariff(\'business\') && tipsChoose" class="button link-pages" :class="$device.mobile?\'is-light\':\'is-dark\'" @click="choosePage" :content="tipsChoosePage" v-tippy="{placement: \'bottom\', showOnCreate: true, trigger: \'manual\', onCreate: updatetipsbits}"><i class="fas fa-chevron-down"></i></a> <button type="button" class="button is-primary" @click="installPage()" style="min-width:100px" :disabled="$account.ban" :class="{\'is-loading\': $page.isUpdating}">{{\'Установить\'|gettext}}</button> </div> </div> </div> </div> </div> <vue-component-screen-breakpoint v-if="view_mode == \'md\' && !$page.isViewMode && !this.$page.data.page.is_readonly" v-model="$page.data.options.max_width" :page_id="page_id "/> <div class=\'main-block1 main-block-xs-clear is-xs-marginless\' style="display: flex;flex-direction: column;flex:1" :class="[{\'is-rtl\': $account.locale.text_direction == \'rtl\', \'has-mt-5 has-mb-5\': view_mode== \'xs\'}, ($page.data && $page.data.options)?(\'max-page-container-\'+$page.data.options.max_width):null]"> <div class="main-theme is-large has-padding-top has-padding-bottom has-shadow is-hide-mobile page-blocks" :class="{device: view_mode== \'xs\'}" style="display: flex;flex-direction:column;flex-grow: 1"> <div class="screen page" style="display: flex;flex-grow: 1"> <div v-for="a in $account.theme.extended.items" v-html="a.html"></div> <vue-pages-page-blocks :page_id="page_id" :page-options="$page.data.options" :theme="$account.theme" :show-hidden="showHidden && !$page.isViewMode" :show-reorder="!$page.isViewMode" class="has-floatpanel" :allow-welcome="true" :readonly="$page.isViewMode" :can-navigate="true"></vue-pages-page-blocks> </div></div> <tippy to="viewModeButton" :visible="viewModeTooltipVisible" trigger="manual" theme="light">{{tippyFloatPanelContent}}</tippy> <div class="float-panel is-light-mobile is-page-edit"> <div class="container"> <div style="margin: 0 auto"> <button name="viewModeButton" class="button is-black is-large" :class="{in: $page.isViewMode}" @click="toggleViewMode" @mouseenter="tippyFloatPanelMouseEnter" @mouseleave="tippyFloatPanelMouseLeave" style="flex:0;min-width:60px"> <transition mode="in-out"> <i class="fa fa-pencil" v-if="$page.isViewMode" style="font-size:1.4rem"></i> </transition> <transition mode="out-in"> <i class="fa fa-eye" v-if="!$page.isViewMode" style="font-size:1.5rem"></i> </transition> </button> <button class="button is-primary is-large is-new-block" @click="newBlock" :disabled="$page.data.page.is_readonly">{{\'Добавить блок\'|gettext}}</button> <vue-component-dropdown position="is-top-right" @active-change="floatDropdownActiveChange" :title="\'Редактор страницы\'|gettext" button-class="button is-black is-large in" :with-arrow="false"> <i class="fas fa-sliders-h" slot="button"></i> <b-dropdown-item aria-role="listitem" @click="configurePage" :disabled="$page.data.page.is_readonly"><i class="fa fa-cog has-mr-1"></i>{{\'Настройки страницы\'|gettext}}</b-dropdown-item> <b-dropdown-item aria-role="listitem" @click="addTemplate" v-if="$auth.hasFeature(\'templates\')"><i class="fa fa-plus has-mr-1"></i>{{\'Добавить в шаблоны\'|gettext}}</b-dropdown-item> <b-dropdown-item aria-role="listitem" @click="tippyFloatPanelClick(\'showHidden\')"><i class="fa fa-check has-mr-1" :class="{\'is-invisible\': !showHidden}"></i>{{\'Показывать скрытые блоки\'|gettext}}</b-dropdown-item> <hr class="dropdown-divider" aria-role="menuitem"> <b-dropdown-item custom aria-role="menuitem" class="has-text-grey has-text-nowrap">{{\'Вертикальное выравнивание блоков\'|gettext}}</b-dropdown-item> <b-dropdown-item aria-role="listitem" v-for="(v, k) in vertical_aligns" @click="$page.setOption(\'valign\', k)" :disabled="$page.data.page.is_readonly"><i class="fa fa-check has-mr-1" :class="{\'is-invisible\': $page.data && $page.data.options && ($page.data.options.valign !== k)}"></i>{{v}}</b-dropdown-item> <hr class="dropdown-divider" aria-role="menuitem"> <b-dropdown-item custom aria-role="menuitem" class="has-text-grey">{{\'Режим отображения\'|gettext}}</b-dropdown-item> <b-dropdown-item aria-role="listitem" v-for="(v, k) in view_modes" @click="view_mode = k" :class="{\'disabled-mobile\': k== \'md\'}"><i class="fa fa-check has-mr-1" :class="{\'is-invisible\': view_mode != k}"></i>{{v.title}}<span v-if="v.mobile_title" class="is-hidden-desktop"> ( {{v.mobile_title}} )</span></b-dropdown-item> </vue-component-dropdown> </div> </div> </div> </div> </div>'}),window.$app.defineComponent("pages","vue-pages-partner-access-form",{data:function(){return{isUpdating:!1,isAllow:!0}},created:function(){},mixins:[FormModel],methods:{update:function(){var t=this;this.isAllow&&this.$account.partner.with_access?this.$api.post("access/set",{account_id:this.$account.partner.account_id,part:"main"}).then(function(e){t.close(),t.isUpdating=!1}).catch(function(e){e.data;t.isUpdating=!1}):this.close()},close:function(){var e=this;this.$parent.close(),setTimeout(function(){e.$parent.$parent.checkWelcomeWizard()},300)}},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Добро пожаловать\'|gettext}}</p> <button class="modal-close is-large" @click="update"></button> </header> <section class="modal-card-body"> <h4 class="has-mb-2">{{$account.partner.welcome_message}}</h4> <mx-toggle v-model=\'isAllow\' v-if="$account.partner.with_access" :title="\'Предоставить полный доступ\'|gettext"></mx-toggle> </section> <footer class="modal-card-foot"> <button class="button is-primary" :class="{\'is-loading\': isUpdating}" @click="update" v-if="$account.partner.with_access">{{\'Сохранить\'|gettext}}</button> <button class="button is-dark" type="button" @click="close()" v-else>{{\'Закрыть\'|gettext}}</button> </footer> </div>'}),window.$app.defineComponent("pages","vue-pages-publish-form",{data:function(){return{isUnattaching:!1,isFetching:!1,isUpdating:!1,isUpdatingSubdomain:!1,isButtonLoading:"",current:null,profiles:{},widget:{},variants:{},is_installed:!1,activeTab:"instagram",instagram_basic:!0,instagram_business:!1,prepare:null,domain:null,subdomain:null,username:""}},props:{is_readonly:Boolean,target:String},mixins:[FormModel],computed:{widgetCode:function(){return'<script src="//taplink.cc/'+(this.$account.nickname?this.$account.nickname:"id:"+this.$account.profile_id)+'/widget/" async><\/script>'},instagramLink:function(){return"https://taplink.cc/"+this.$account.nickname}},created:function(){this.$account.custom_domain&&(this.activeTab="domain"),-1!=["instagram_business","instagram_basic"].indexOf(this.target)&&(this.activeTab="instagram"),this.fetchData(!0)},methods:{onChangeSubdomain:function(){},instagramBusinessCancel:function(){this.profiles={},this.target=""},connectUsername:function(){var i=this;this.$prompt(this.$gettext("Укажите имя профиля или ссылку на Instagram"),{}).then(function(e){i.isButtonLoading="instagram",$mx.request({url:"/instagram/resolve",method:"get",json:{username:e}}).then(function(e){var t=e.data;i.isFetching=!1,i.isButtonLoading="","fail"==t.result?i.$alert(t.message||i.$gettext("Профиль не найден"),"is-danger"):(i.prepare=t.response,i.username="")})})},toggleTab:function(e){this.activeTab=this.activeTab==e&&window.matchMedia("(max-width: 767px)").matches?null:e},check:function(){var t=this;this.isUpdating=!0,this.$api.get("pages/publish/check",{target:this.target}).then(function(e){t.$parent.close()})},confirmAttach:function(){this.target="instagram_basic_confirm",this.fetchData(!0)},fetchData:function(e){var i=this;this.isFetching=e,this.$api.get("pages/publish/info",{target:this.target,prepare:this.prepare}).then(function(e){i.isFetching=!1;var t=e.response;switch(i.widget=t.widget,i.profiles=t.profiles,i.variants=t.variants,i.domain=t.domain,i.subdomain=t.subdomain,i.is_installed=t.is_installed,i.instagram_basic=t.instagram_basic,i.instagram_business=t.instagram_business,i.profiles.length||"instagram_business"!=i.target||(i.$alert(i.$gettext("У вас нет подключенных Instagram Business профилей"),"is-danger"),i.target=""),i.target){case"instagram_basic":i.prepare=e.response.prepare;break;case"instagram_basic_confirm":i.prepare=null}t.account&&i.$auth.refresh(t.account),t.message&&i.$alert(t.message,"is-danger")})},updateSubdomain:function(){var t=this;this.isUpdatingSubdomain=!0,this.$api.post("pages/publish/setsubdomain",{subdomain:this.subdomain.subdomain,domain_id:this.subdomain.domain_id},this).then(function(e){t.isUpdatingSubdomain=!1})},choose:function(e){var t=this;this.isFetching=!0,this.$api.get("pages/publish/set",{id:e.id,uniq:e.uniq}).then(function(e){t.isFetching=!1,t.$auth.refresh(e.response,function(){t.$parent.$parent.installPage(),t.$parent.close()})})},unattach:function(){var t=this;this.$confirm(this.$gettext("Вы уверены что хотите отключить профиль от вашей страницы?"),"is-danger").then(function(){t.isUnattaching=!0,t.$api.get("pages/publish/unattach",{id:t.current}).then(function(e){t.$auth.refresh(e.response),t.isUnattaching=!1})})},onWidgetChanged:_.debounce(function(){this.is_readonly||this.$api.get("pages/install/set",{widget:this.widget})},500)},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Установка ссылки\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <section class="modal-card-body modal-card-body-blocks" style="display:flex"> <div class="publish-form-collapse"> <div class="is-title" @click="toggleTab(\'instagram\')" :class="{in: activeTab== \'instagram\'}"> <span><i class="fal fa-chevron-right has-mr-2"></i>Instagram</span> </div> <div> <div> <section v-if="$account.nickname"> <label class="label" v-if="is_installed">{{\'Ваша ссылка\'|gettext}}</label> <div class="media has-mb-2" v-else> <div class="media-left"><span class="tag is-warning">1</span></div> <div class="media-content"> <label class="label">{{\'Скопируйте ссылку на страницу\'|gettext}}</label> </div> </div> <div class="field has-addons is-marginless"> <div class="control is-expanded"><input type="text" class="input is-mouse-locked has-text-black" readonly="on" disabled="on" :value="instagramLink"></div> <div class="control is-hidden-mobile"> <vue-component-clipboard :text="instagramLink" class="button is-default" :show-icon="false"><i class="fal fa-copy has-mr-1"></i>{{\'Скопировать ссылку\'|gettext}}</vue-component-clipboard> </div> <div class="control is-hidden-mobile"> <button class="button has-text-danger" @click="unattach" :class="{\'is-loading\': isUnattaching}" v-tippy :content="\'Отключить профиль\'|gettext"><i class="fal fa-trash-alt"></i></button> </div> </div> <div class="is-hidden-tablet has-mt-2"> <div class="row row-small"> <div class="col-xs-10"> <vue-component-clipboard :text="instagramLink" class="button is-default is-fullwidth" :show-icon="false" :with-share="true"><i class="fal fa-copy has-mr-1"></i>{{\'Скопировать ссылку\'|gettext}}</vue-component-clipboard> </div> <div class="col-xs-2"> <button class="button has-text-danger is-fullwidth" @click="unattach" :class="{\'is-loading\': isUnattaching}"><i class="fal fa-trash-alt"></i></button> </div> </div> </div> </section> <section v-if="is_installed && $account.nickname"> <div class="field"> <span class=\'has-text-success\'><i class="fa fas fa-check-square"></i> {{\'Ссылка установлена в Instagram.\'|gettext}}</span> {{\'Если вы поменяли никнейм в Instagram, нажмите кнопку "Обновить информацию" для того чтобы получить новую ссылку.\'|gettext}} </div> <a @click="check" class="button is-instagram" :class="{disabled: is_readonly, \'is-loading\': isUpdating}"><i class="fab fa-ig" style="margin-right: 10px"></i> {{\'Обновить информацию\'|gettext}}</a> </section> <section v-else> <div v-if="!$account.nickname"> <div v-if="target == \'instagram_business\'"> <label class="label">{{\'Выберите профиль\'|gettext}}</label> <b-table :data="profiles" hoverable bordered class="table-header-hide" @click="choose" v-if="_.size(profiles)" disabled="isUpdating"> <template slot-scope="props"> <b-table-column field="name" style="vertical-align:middle"> <div class="media" style="align-items: center"> <img :src="props.row.picture" class="profile-avatar profile-avatar-48 media-left"> <div class="media-content"><b>{{props.row.name}}</b><div class="has-text-grey">@{{props.row.username}}</div></div> </div> </b-table-column> </template> </b-table> <button @click="instagramBusinessCancel" class="button is-dark has-mt-2">{{\'Отмена\'|gettext}}</button> </div> <div v-else> <div v-if="instagram_business && !prepare && (i18n.locale == \'ru\')" class="has-mb-4"> <label class="label">{{\'Подключить Instagram Business профиль\'|gettext}}</label> <div class="has-mb-2"> {{\'Для подключения Instagram Business профиля вам необходимо авторизоваться через Facebook\'|gettext}} </div> <a class="button is-facebook" :class="{disabled: is_readonly, \'is-loading\': isButtonLoading== \'facebook\'}" @click="isButtonLoading = \'facebook\'" href="/login/facebook/?method=attach&scope=email,pages_show_list,instagram_basic"><i class="fab fa-fb-o has-mr-2"></i> {{\'Подключить через Facebook\'|gettext}}</a> </div> <div v-if="prepare"> <div class="has-text-centered has-mb-3"> <img :src="prepare.picture" class="profile-avatar profile-avatar-65"> <h4>{{prepare.username}}</h4> </div> <div class="row row-small"> <div class="col-xs-12 col-sm-5 col-sm-offset-1"> <button @click="confirmAttach" class="button is-primary has-xs-mb-2 is-fullwidth">{{\'Подключить этот профиль\'|gettext}}</button> </div> <div class="col-xs-12 col-sm-5"> <a href="/login/instagrambasic/?method=attach&logout=1" class="button is-danger is-fullwidth" v-if="instagram_basic">{{\'Войти под другим профилем\'|gettext}}</a> <button @click="prepare = null" class="button is-danger is-fullwidth" v-else>{{\'Войти под другим профилем\'|gettext}}</button> </div> </div> </div> <div v-else> <label class="label">{{\'Подключить Instagram профиль\'|gettext}}</label> <div class="has-mb-2"> {{\'Для подключения Instagram профиля вам необходимо авторизоваться через Instagram\'|gettext}} </div> <div v-if="instagram_basic"> <div class="has-mb-4"> <a class="button is-instagram" :class="{disabled: is_readonly, \'is-loading\': isButtonLoading== \'instagram\'}" @click="isButtonLoading = \'instagram\'" href="/login/instagrambasic/?method=attach"><i class="fab fa-ig has-mr-2"></i>{{\'Подключить через Instagram\'|gettext}}</a> </div> </div> <div v-else> <button class="button is-instagram" :class="{disabled: is_readonly, \'is-loading\': isButtonLoading== \'instagram\'}" @click="connectUsername"><i class="fab fa-ig has-mr-2"></i>{{\'Подключить через Instagram\'|gettext}}</button> </div> </div> </div> </div> <div v-else> <div v-if="!is_installed"> <div class="media"> <div class="media-left"><span class="tag is-warning">2</span></div> <div class="media-content"> <label class="label has-mb-2">{{\'Вставьте её в раздел "Веб-Сайт" в настройках профиля Instagram\'|gettext}}</label> </div> </div> <div class=\'has-sm-mb-4 has-sm-pt-4 device-pictures-form marvel-device-install\'> <center style="line-height:0"> <div class="device has-shadow is-large is-hide-mobile" style="margin: 0 auto"> <div class="screen page-font" style="overflow: hidden"> <img style="max-width:100%;margin:0 auto;display: block" :src="\'/s/i/taplink-install.{1}.png\'|format(window.i18n.locale)"> </div> </div> <div class=\'form-shadow form-shadow-bottom is-hidden-mobile\' style="height: 20px"></div> </center> </div> <div><a href=\'https://www.instagram.com/accounts/edit/\' target="_blank" style="display: block;padding-top: 10px;text-align: center">{{\'Открыть настройки Instagram\'|gettext}}</a></div> </div> </div> </section> <section class="message is-info" v-if="$account.nickname && !is_installed"> <div class="message-body"> <label class="label">{{\'Если вы поменяли имя пользователя в Instagram\'|gettext}}</label> <div>{{\'Нажмите на ссылку\'|gettext}} "<a @click="check" :class="{disabled: isUpdating}">{{\'Обновить информацию\'|gettext}}</a>" {{\'для того чтобы обновить информацию из Instagram. Система увидит новое имя пользователя и предложит обновить ссылку.\'|gettext}}</div> </div> </section> </div> </div> <div class="is-title" @click="toggleTab(\'subdomain\')" :class="{in: activeTab== \'subdomain\'}" v-if="$auth.hasFeature(\'subdomains\')"> <span><i class="fal fa-chevron-right has-mr-2"></i>{{\'Свои имена\'|gettext}}</span> </div> <div v-if="$auth.hasFeature(\'subdomains\')"> <div> <section> <b-field v-if="subdomain" grouped> <b-field expanded> <p class="control is-expanded"><input v-model="subdomain.subdomain" class="input has-text-right" :disabled="isUpdatingSubdomain" :placeholder="\'Поддомен\'|gettext"></p> <p class="control"> <b-dropdown v-model="subdomain.domain_id" @input="onChangeSubdomain" position="is-bottom-left" :disabled="isUpdatingSubdomain"> <button slot="trigger" class="button is-clear" type="button">.{{variants.subdomains.domains[subdomain.domain_id]}}<i class="fal fa-angle-down has-ml-1"></i></button> <b-dropdown-item :value="id" v-for="(d, id) in variants.subdomains.domains" v-if="id">{{d}}</b-dropdown-item> </b-dropdown> </p> </b-field> <p class="control"><button type="button" class="button is-primary" :class="{\'is-loading\': isUpdatingSubdomain}" @click="updateSubdomain">{{\'Сохранить\'|gettext}}</button></p> </b-field> </section> </div> </div> <div class="is-title" @click="toggleTab(\'domain\')" :class="{in: activeTab== \'domain\'}"> <span><i class="fal fa-chevron-right has-mr-2"></i>{{\'Доменное имя\'|gettext}}</span> </div> <div> <div> <section> <transition name="fade"> <div class="label-pro-container"> <div v-if="!$auth.isAllowTariff(\'business\')" class="tag is-business" v-tippy :content="\'Эта возможность доступна на Business тарифе\'|gettext">biz</div> <label class="label has-mb-2">{{\'Вы можете подключить свой домен к странице\'|gettext}}</label> <vue-component-domain-attach v-model="domain" :disabled="is_readonly" v-if="domain"></vue-component-domain-attach> </div> </transition> </section> </div> </div> <div class="is-title" @click="toggleTab(\'qr\')" :class="{in: activeTab== \'qr\'}"> <span><i class="fal fa-chevron-right has-mr-2"></i>{{\'QR-код\'|gettext}}</span> </div> <div> <div> <section class="message is-info"><div class="message-body">{{\'Вы можете скачать и использовать ваш QR-код на визитках или флайерах\'|gettext}}</div></section> <section> <transition name="fade"> <vue-component-qrcode :value="$account.link_safe" :with-download="true" class="has-text-centered"></vue-component-qrcode> </transition> </section> </div> </div> <div class="is-title" @click="toggleTab(\'widget\')" :class="{in: activeTab== \'widget\', \'is-last-tab\': activeTab != null}"> <span><i class="fal fa-chevron-right has-mr-2"></i>{{\'Виджет на сайт\'|gettext}}</span> </div> <div> <div> <section> <label class=\'label\'>{{\'Скопируйте код и разместите его в HTML-разметке вашего сайта\'|gettext}}</label> <div class="field has-addons"> <div class="control is-expanded"><input class="input" onfocus="this.select()" readonly="on" :value="widgetCode"></div> <div class="control"> <vue-component-clipboard :text="widgetCode" class="button is-default" :show-icon="false"><i class="fal fa-copy has-mr-1"></i>{{\'Скопировать\'|gettext}}</vue-component-clipboard> </div> </div> <div class="field has-mb-4"> <label class=\'label\'>{{\'Цвет кнопки\'|gettext}}</label> <vue-component-colorpicker colors=\'#F7464A,#e600a3,#1fb6ff,#1EB363,#4f5a67\' v-model="widget.color" @input="onWidgetChanged" position="is-bottom-right" :disabled="is_readonly"></vue-component-colorpicker> </div> <div class="row"> <div class="col-xs-12 col-sm-6"> <div class="field"> <label class=\'label\'>{{\'Расположение кнопки\'|gettext}}</label> <label class="radio is-block has-mb-1" v-for="(v, k) in variants.widget_button_placement"><input type="radio" name=\'widget_button_placement\' :value="k" v-model="widget.placement" @change="onWidgetChanged" :disabled="is_readonly"> {{v}}</label> </div> </div> <div class="col-xs-12 col-sm-6"> <div class="field"> <label class=\'label\'>{{\'Вид окна\'|gettext}}</label> <label class="radio is-block has-mb-1" v-for="(v, k) in variants.widget_button_view"><input type="radio" name=\'widget_button_view\' :value="k" v-model="widget.view" @change="onWidgetChanged" :disabled="is_readonly"> {{v}}</label> </div> </div> </div> </section> </div> </div> </div> </section> <footer class="modal-card-foot is-hidden-mobile"> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Закрыть\'|gettext}}</button> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("index","vue-index-affiliate-form",{data:function(){return{values:{name:"",email:"",message:""},isUpdating:!1,isSent:!1}},mixins:[FormModel],methods:{submit:function(){var t=this;this.isUpdating=!0,this.$api.post("system/affiliate/push",this.values,this).then(function(e){t.isUpdating=!1,"success"==e.result&&(t.isSent=!0)})}},template:'<div v-if="isSent"> <div class="sa-icon sa-success animate" style="display: block;"><span class="sa-line sa-tip animateSuccessTip"></span> <span class="sa-line sa-long animateSuccessLong"></span> <div class="sa-placeholder"></div> <div class="sa-fix"></div></div> <h3 class="has-text-centered">{{\'Спасибо\'|gettext}}</h3> </div> <div v-else> <form @submit.prevent="submit"> <b-field :label="\'Ваше имя\'|gettext" :class="{\'has-error\': errors.name}" :message="errors.name"> <input type="text" class="input is-large" v-model.trim="values.name" :disabled="isUpdating" maxlength="128"> </b-field> <b-field :label="\'Ваш email\'|gettext" :class="{\'has-error\': errors.email}" :message="errors.email"> <input type="email" class="input is-large" v-model.trim="values.email" :disabled="isUpdating" maxlength="128"> </b-field> <b-field :label="\'Сообщение\'|gettext"> <textarea type="text" class="input is-large" v-model.trim="values.message" :disabled="isUpdating" rows="6" maxlength="64000"></textarea> </b-field> <button type="submit" class="button is-primary is-medium" :class="{\'is-loading\': isUpdating}">{{\'Отправить\'|gettext}}</button> </form> </div>'}),window.$app.defineComponent("index","vue-index-appsumo-invite",{data:function(){return{isFetching:!1,email:""}},mixins:[FormModel],props:["c"],methods:{send:function(){var t=this;this.isFetching=!0,this.$api.post("system/appsumo/send",{email:this.email,code:this.c.code},this).then(function(e){t.isFetching=!1,"success"==e.result&&(t.c.sent=!0,t.c.email=t.email,t.$parent.close())})}},template:'<div class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title">Send invite</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <section class="modal-card-body"> <b-field :class="{\'has-error\': errors.email}" :message="errors.email" :label="\'Электронная почта\'|gettext"> <input type="email" minlength="6" maxlength="128" v-model="email" class="input" :disabled="isFetching" v-focus required autocapitalize="off"></input> </b-field> </section> <footer class="modal-card-foot"> <div class="level-item"> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Закрыть\'|gettext}}</button> <button class="button is-primary" type="button" @click="send">{{\'Отправить\'|gettext}}</button> </div> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("index","vue-index-appsumo",{data:function(){return{values:{name:"",email:null!=this.$account.user?this.$account.user.email:"",code:""},codes:[],message:"",isUpdating:!1,isSent:!1}},props:["hash"],mixins:[FormModel],created:function(){var t=this;this.hash&&this.$api.get("system/appsumo/hash",{hash:this.hash}).then(function(e){"success"==e.result?t.codes=e.response.codes:document.location="../"})},methods:{submit:function(){var t=this;this.isUpdating=!0,this.$api.post("system/appsumo/check",this.values,this).then(function(e){"success"==e.result?!t.hash&&e.response.link?document.location=e.response.link:(t.codes=e.response.codes,t.values.code="",t.isUpdating=!1,e.response.message&&(t.message=e.response.message)):t.isUpdating=!1})},invite:function(e){console.log(e),this.$modal("vue-index-appsumo-invite",{c:e})}},template:'<div> <div class="message is-success has-mb-6 has-mt-2" v-if="message"> <div class="message-body" v-html="message"></div> </div> <div class="has-mb-6" v-if="codes.length && (codes.length> 1 || !codes[0].profile_id)"> <h5 class="has-text-centered">You are provided with codes to activate lifelong BUSINESS plan on other accounts:</h5> <div style="background:#f8f9f9" class="has-p-4 has-mb-6"> <div v-for="(c, i) in codes"> <div class="row" :class="{\'has-mt-2\': i}"> <div class="col-xs-6"><vue-component-clipboard :text="c.code" class="has-mr-1"></vue-component-clipboard> <span :style="{\'text-decoration\': c.profile_id?\'line-through\':\'\'}" :class="{\'has-text-grey\': c.profile_id}">{{c.code}}</span></div> <div class="col-xs-6 has-text-right" style="display: flex;align-items: center;justify-content: flex-end;"> <i class="fas fa-info-circle has-mr-2" v-if="c.email" v-tippy="{ placement : \'top\', content: \'The invite with this code was sent to \'+c.email}"></i> <button class="button is-success" :disabled="c.profile_id != null || c.sent != 0" @click="invite(c)"><span class="is-hidden-mobile">Invite by email</span><span class="is-hidden-tablet">Invite</span></button> </div> </div> </div> </div> <hr> <h4>To activate these code:</h4> 1. Sign in or sign up with the account for which the code will be activated<br> 2. Go to the <a href="/tariffs/">Pricing page</a><br> 3. Click on «Activate promo code» (Right under the plans)<br> 4. Enter the code and click «Check»<br> 5. Click «Activate» to get your Longlife BUSINESS<br><br> A permanent link to this page and instructions for activation codes has been sent to your mail! Have a nice day! <hr> </div> <h5 v-else class="has-text-centered">Welcome Sumo-lings! It\'s so lovely to see you here!</h5> <div style="background:#f8f9f9" class="has-p-4"> <form @submit.prevent="submit"> <b-field :label="\'Ваш email\'|gettext" :class="{\'has-error\': errors.email}" :message="errors.email"> <input type="email" class="input is-large" v-model.trim="values.email" :disabled="isUpdating" maxlength="128"> </b-field> <b-field label="AppSumo code" :class="{\'has-error\': errors.code}" :message="errors.code"> <input type="text" class="input is-large" v-model.trim="values.code" :disabled="isUpdating" maxlength="128"> </b-field> <button type="submit" class="button is-primary is-medium" :class="{\'is-loading\': isUpdating}">Activate</button> </form> </div> </div>'}),window.$app.defineComponent("index","vue-index-challenge-form",{data:function(){return{isFetching:!1,isUpdating:!1,isSendingCode:!1,codeSent:!1,code:"",values:[],activeTab:"email",methods:["email"]}},mixins:[FormModel],props:["account_token"],created:function(){var t=this;this.isFetching=!0,this.$api.get("system/challenge/prepare",{account_token:this.account_token}).then(function(e){"success"==e.result&&(t.values=e.response.values,t.methods=e.response.methods,t.activeTab=t.methods[0]),t.isFetching=!1})},computed:{allowCheckCode:function(){return"email"==this.activeTab&&this.codeSent||"authenticator"==this.activeTab}},methods:{toggleTab:function(e){this.activeTab=e},sendCode:function(){var t=this;this.isSendingCode=!0,this.$api.get("system/challenge/send",{account_token:this.account_token},this).then(function(e){"sent"==e.result&&(t.codeSent=!0),t.isSendingCode=!1})},checkCode:function(){var t=this;this.isUpdating=!0,this.$api.get("system/challenge/check",{code:this.code,method:this.activeTab,account_token:this.account_token},this).then(function(e){"success"==e.result&&(t.$parent.$emit("result",e.response.code),t.$parent.close()),t.isUpdating=!1})}},template:'<form @submit.prevent="checkCode" class="modal-card"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Подтверждение действия\'|gettext}}</p> <button type="button" class="modal-close is-large" @click="$parent.close()"></button> </header> <section class="modal-card-body modal-card-body-blocks" style="display: flex"> <div class="publish-form-collapse"> <div class="is-title" @click="toggleTab(\'authenticator\')" :class="{in: activeTab== \'authenticator\'}" v-if="methods.indexOf(\'authenticator\') != -1"> <span><i class="fal fa-chevron-right has-mr-2"></i>{{\'Приложение для генерации кодов\'|gettext}}</span> </div> <div v-if="methods.indexOf(\'authenticator\') != -1"> <div> <section> <div class="has-mb-2">{{\'Введите код двухэтапной верификации, сгенерированный вашим приложением-аутентификатором\'|gettext}}</div> <b-field :class="{\'has-error\': errors.code}" :message="errors.code"> <vue-component-verifyfield v-model="code" :disabled="isUpdating" @keydown="errors.code = null" type="tel" style="max-width: 460px"></vue-component-verifyfield> </b-field> </section> </div> </div> <div class="is-title is-last-tab" @click="toggleTab(\'email\')" :class="{in: activeTab== \'email\'}" v-if="methods.indexOf(\'email\') != -1 && methods.length> 1"> <span><i class="fal fa-chevron-right has-mr-2"></i>{{\'Электронная почта\'|gettext}}</span> </div> <div v-if="methods.indexOf(\'email\') != -1"> <div> <section> <div class="message is-success" v-if="values.type == \'email\' && codeSent"> <div class="message-body"> {{\'Мы отправили проверочный код на вашу электронную почту. Введите его и нажмите кнопку "Продолжить"\'|gettext}} </div> </div> <b-field :class="{\'has-error\': errors.email}" :message="errors.email" :label="\'Электронная почта\'|gettext" v-if="values.type == \'email\'"> <input type="email" minlength="6" maxlength="40" v-model="values.email" class="input" required autocapitalize="off" disabled="on"> <p class="control"> <button type="button" class="button is-success" @click="sendCode" :disabled="codeSent" :class="{\'is-loading\': isSendingCode}">{{\'Отправить код\'|gettext}}</button> </p> </b-field> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" :label="\'Проверочный код\'|gettext" v-if="codeSent"> <vue-component-verifyfield v-model="code" :disabled="isUpdating" @keydown="errors.code = null" type="tel" style="max-width: 460px"></vue-component-verifyfield> </b-field> </section> </div> </div> </div> </section> <footer class="modal-card-foot"> <button class="button is-dark" type="button" @click="$parent.close()">{{\'Закрыть\'|gettext}}</button> <button class="button is-primary" type="submit" :class="{\'is-loading\': isUpdating}" :disabled="!allowCheckCode || isSendingCode">{{\'Проверить\'|gettext}}</button> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </form>'}),window.$app.defineComponent("index","vue-index-downgrade-form",{data:function(){return{plan:"business",isFetching:!0,isUpdating:!1,values:null}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.$api.get("pricing/downgrade/prepare").then(function(e){"success"==e.result&&(t.values=e.response.values),t.isFetching=!1})},confirm:function(){var t=this;this.isUpdating=!0,this.$api.post("pricing/downgrade/confirm",{plan:this.plan}).then(function(e){"success"==e.result&&(t.$auth.refresh(),t.$parent.close()),t.isUpdating=!1})}},template:'<div class="modal-card modal-card-little"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Смена тарифа\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()"></button> </header> <section class="modal-card-body"> {{\'Вы можете понизить свой тариф с пересчетом срока действия тарифа. Отменить это действие будет невозможно. Выберите тариф и нажмите кнопку "Подтвердить"\'|gettext}} <ul class="downgrade-choose has-mt-1" v-if="values"> <li :class="{in: plan== p.plan_name}" @click="plan = p.plan_name" v-for="p in values"><b>{{p.plan_name.toUpperCase()}}</b><br>{{\'До {1}\'|gettext|format($date(p.tms_until))}} <span class="has-text-success has-ml-1" v-if="p.days">(+{{\'день\'|plural(p.days)}})</span></li> </ul> </section> <footer class="modal-card-foot"> <button class="button is-dark" type="button" @click="$parent.close()" :disabled="isUpdating">{{\'Закрыть\'|gettext}}</button> <button class="button is-primary" type="button" :class="{\'is-loading\': isUpdating}" :disabled="plan == $account.tariff" @click="confirm">{{\'Подтвердить\'|gettext}}</button> </footer> <b-loading :is-full-page="false" :active.sync="isFetching"></b-loading> </div>'}),window.$app.defineComponent("index","vue-index-footer",{methods:{checkUrlPrefix:function(e){return window.base_path_prefix+e}},template:"<footer class=\"is-hidden-mobile\"> <div class=\"container\"> <div class=\"level\"> <div class=\"level-left\"> <a v-if=\"i18n.locale == 'ru'\" @click=\"$events.fire('help:toggle', {active: true, target: {name: 'guides'}})\">{{'Подробные инструкции'|gettext}}</a> <a v-else :href=\"checkUrlPrefix('/guide/')\">{{'Подробные инструкции'|gettext}}</a> <a v-if=\"i18n.locale == 'ru'\" @click=\"$events.fire('help:toggle', {active: true, target: {name: 'faq'}})\">{{'Вопросы и ответы'|gettext}}</a> <a v-else :href=\"checkUrlPrefix('/faq/')\">{{'Вопросы и ответы'|gettext}}</a> <a @click=\"Intercom('show')\">{{'Задать вопрос'|gettext}}</a> <a :href=\"checkUrlPrefix('/about/affiliate.html')\" v-if=\"i18n.locale != 'ru'\">{{'Партнерская программа'|gettext}}</a> <a @click=\"$events.fire('help:toggle', {active: true, target: {name: 'academy'}})\" v-if=\"i18n.locale == 'ru'\">Академия Taplink</a> <a @click=\"$form.open('vue-index-pricing-form')\">{{'Цены и тарифы'|gettext}}</a> </div> <div class=\"level-right\"> <vue-component-locale-change></vue-component-locale-change> </div> </div> </div> </footer>"}),window.$app.defineComponent("index","vue-index-index",{data:function(){return{isAuth:!1,current:null}},computed:{isShow:function(){return this.current&&("main"==this.current.name&&this.isAuth||"main"!=this.current.name)}},created:function(){var e=this;$mx("html").addClass("is-app"),window.$events.on("navigate",this.navigate),this.navigate(null,this.$router.currentRoute),null==this.$account.profile_id?("index"==this.$router.currentRoute.name&&window.$events.one("account:refresh",function(){e.$router.replace({name:"pages",params:{page_id:e.$account.page_id}})}),this.$auth.refresh(null,null,function(){var e=document.location.href;-1==e.indexOf("/auth/")?Cookies.set("auth-redirect",e):Cookies.remove("auth-redirect")})):this.isAuth=!0,window.$events.on("account:refresh",function(){return e.$account.user.email?void(e.isAuth=!0):e.$router.replace({name:"email"})}),this.$io.on("events:account:logout",this.logout),window.$events.on("account:logout",this.logout),this.$io.on("events:avatar:updated",this.avatarUpdated);var t=$mx(".main-block");t.on("scroll",function(e){$mx(document.body).toggleClass("is-scrolled",20<t[0].scrollTop)})},mounted:function(){window.scrollTo(0,1)},destroyed:function(){window.$events.off("navigate",this.navigate),this.$io.off("events:account:logout",this.logout),this.$io.off("events:avatar:updated",this.avatarUpdated)},methods:{avatarUpdated:function(e){this.$account.avatar.url="//"+this.$account.storage_domain+e.pathname},navigate:function(e,t){this.current=t?1<t.matched.length?t.matched[1]:t:null},logout:function(){this.isAuth=!1,this.$account.profile_id=null,-1!=["main","index"].indexOf(this.current.name)&&this.$router.replace({name:"signin"})}},template:'<router-view v-if="isShow" :class="{\'has-auth\':isAuth}"></router-view>'}),window.$app.defineComponent("index","vue-index-main",{data:function(){return{connection:1,connectionTimer:null,online:!0,isMounted:!1}},props:["page_id"],created:function(){$mx(window).on("online offline",this.updateIndicator),this.$events.on("theme:refresh",this.themeRefresh)},mounted:function(){this.isMounted=!0,this.themeRefresh()},destroyed:function(){$mx(window).off("online offline",this.updateIndicator),this.$events.off("theme:refresh",this.themeRefresh),this.isMounted=!1},methods:{themeRefresh:function(){this.isMounted&&StylesFactory.updateCSSBlock(this.$account.styles,this.$refs.styles)},updateIndicator:function(){var e=this;this.online=navigator.onLine,this.online&&this.$events.fire("online"),this.online?(this.connectionTimer&&(clearInterval(this.connectionTimer),this.connectionTimer=null),$mx("html").removeClass("is-clipped")):(this.connectionTimer=setInterval(function(){e.connection++,5==e.connection&&(e.connection=1)},1e3),$mx("html").addClass("is-clipped"))},navigate:function(e,t){this.current=t?1<t.matched.length?t.matched[1]:t:null}},template:'<div style="display: flex;flex-direction: column;flex-shrink:0;flex-grow: 1"> <div ref=\'styles\'></div> <vue-index-menu :page_id="page_id"></vue-index-menu> <div v-if="$form.isOpened" style="flex-grow: 1;display: flex;flex-direction: column;"> <component v-for="(s, i) in $form.stack" style="flex-grow: 1" v-bind="s.props" ref="form" v-show="i == $form.stack.length - 1"></component> </div> <router-view style="flex-grow: 1" v-show="!$form.isOpened"></router-view> <vue-index-footer v-show="!$page.isViewMode"></vue-index-footer> <div class="network-status" v-if="!online"> <div class="network-status-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"> <g class="fa-group" v-if="connection == 1"><path class="fa-secondary" fill="currentColor" d="M634.9 154.9C457.7-9 182.2-8.9 5.1 154.9c-6.4 6-6.8 16-.9 22.5.2.2.3.4.5.5l34.2 34c6.2 6.1 16 6.2 22.4.4 145.9-133.7 371.3-133.7 517.2 0 6.4 5.9 16.2 5.7 22.4-.4l34.2-34c6.3-6.2 6.3-16.2.2-22.5 0-.2-.2-.4-.4-.5zM522.7 268.4c-115.3-101.9-290.2-101.8-405.3 0-6.5 5.8-7.1 15.8-1.4 22.3.3.3.5.6.8.8l34.4 34c6 5.9 15.6 6.3 22.1.8 83.9-72.6 209.7-72.4 293.5 0 6.4 5.5 16 5.2 22-.8l34.4-34c6.2-6.1 6.4-16.1.3-22.4-.3-.2-.5-.4-.8-.7z"></path><path class="fa-primary" fill="currentColor" d="M320 352c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64z"></path></g> <g class="fa-group" v-if="connection != 1"><path :class="{\'fa-secondary\': connection== 2 || connection== 4, \'fa-primary\': connection== 3}" fill="currentColor" d="M635.3 177.9l-34.2 34c-6.2 6.1-16 6.2-22.4.4-146-133.7-371.3-133.7-517.2 0-6.4 5.9-16.2 5.7-22.4-.4l-34.2-34-.5-.5c-6-6.4-5.6-16.5.9-22.5C182.2-8.9 457.7-9 634.9 154.9c.2.2.4.3.5.5 6.2 6.3 6.1 16.3-.1 22.5z"></path><path class="fa-primary" fill="currentColor" d="M320 352c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64zm203.5-82.8l-.8-.8c-115.3-101.9-290.2-101.8-405.3 0-6.5 5.8-7.1 15.8-1.4 22.3.3.3.5.6.8.8l34.4 34c6 5.9 15.6 6.3 22 .8 84-72.6 209.7-72.4 293.5 0 6.4 5.5 16 5.2 22-.8l34.4-34c6.4-6 6.5-16 .4-22.3z"></path></g> </svg> </div> <h2 class="has-mb-2 has-text-centered">{{\'Отсутствует соединение\'|gettext}}</h2> <h3 class="has-text-centered">{{\'Убедитесь, что ваше устройство подключено к интернету\'|gettext}}</h3> </div> </div>'}),window.$app.defineComponent("index","vue-index-menu",{data:function(){return{favourites:[],standalone:window.standalone,title:"",currentRoute:null,menuOpened:!1,isShowBanner:!0}},props:{page_id:Number},created:function(){var i=this;this.fillTitle(this.currentRoute=this.$router.currentRoute),window.$events.on("navigate",function(e,t){i.fillTitle(i.currentRoute=t)}),$mx(document.body).on("touchstart",this.onTouchStart)},computed:{tariffEndsMessage:function(){return this.$format(this.$gettext('Через {1} истекает срок действия вашего тарифа, вам необходимо <a href="{2}">продлить ваш тариф</a>'),this.$plural("день",this.$account.tariff_ends_days),this.ratePlanLink)},menu:function(){return _.filter(this.$auth.prepareMenu(this.$router.getRoute({name:"main"}).children),function(e){return e.meta&&(e.meta.icon||e.meta.icon_svg)})}},mounted:function(){var e=this;this.$io.on("events:menu.hits:changed",this.changedHits),this.$io.on("events:menu.hits:increment",this.incrementHits),this.$io.on("events:system:updated",this.updatedSystem),this.$io.on("events:profiles.favourites:refresh",this.refreshFavourites),NativeApplication.setBadge(this.calcHits()),window.$events.on("account:refresh",this.accountRefresh),window.$events.on("account:logout",this.accountLogout),window.$events.on("menu:close",function(){$mx(".projects-menu").css("pointer-events","none"),e.menuOpened=!1,setTimeout(function(){$mx(".projects-menu").css("pointer-events","all")},50)})},destroyed:function(){this.$io.off("events:menu.hits:changed",this.changedHits),this.$io.off("events:menu.hits:increment",this.incrementHits),this.$io.off("events:system:updated",this.updatedSystem),this.$io.off("events:profiles.favourites:refresh",this.refreshFavourites),window.$events.off("account:refresh",this.accountRefresh),window.$events.off("account:logout",this.accountLogout),$mx(document.body).off("touchstart",this.onTouchStart)},methods:{clickTariffEnds:function(e){e.target&&"A"==e.target.tagName.toUpperCase()&&this.showPricing()},showPricing:function(){this.$form.open("vue-index-pricing-form")},isActiveMenu:function(e){for(i=this.currentRoute.matched.length-1;0<=i;i--)if(this.currentRoute.matched[i].name==e.name)return!0;return!1},accountRefresh:function(){NativeApplication.setBadge(this.calcHits())},accountLogout:function(){NativeApplication.setBadge(null)},onTouchStart:function(e){var t,i,n,s,a,o,r,l,c,d,u,p,h,f=this,m=$mx(e.target);$mx("html").is(".is-dragging")||$mx("html").is(".is-clipped")||m.closest(".b-slider").length||this.$form.isOpened||this.$form.isOpenedHeader||this.$page.isViewMode||this.$device.mobile&&(t=m.closest(".main"),l=t.length,i=screen.width/100*85,n=e.touches[0].pageX,s=e.touches[0].pageY,a=$mx("html").is(".open-menu")?i:0,r=o=0,l=l&&t.data("scroll-x")<-50,c=$mx(".main"),u=d=!1,p=0,l||(h=function(e){$mx("html").is(".is-dragging")||(p=e.touches[0].pageX,y=e.touches[0].pageY,!u&&(d||45<Math.abs(p-n))&&(o=p-n+a,l&&0<o&&(l=!1),o<0&&t.length&&(l=!0),l||(d||(c.addClass("stop-transition"),d=!0,r=e.timeStamp),c.css("transform","translate3d("+Math.min(Math.max(0,o),i)+"px,0,0)"))),!d&&45<Math.abs(y-s)&&(u=!0))},m.on("touchmove",h).one("touchend",function(e){var t,i,s;m.off("touchmove",h),d&&(c.removeClass("stop-transition"),$mx(".main-block").removeClass("disable-pointer-events"),t=e.timeStamp-r,i=Math.abs(p-n)/t,s=0,s=.4<i?0<p-n:o>screen.width/2,setTimeout(function(){c.css("transform",""),f.menuOpen(null,s)},0),d=!1),u=!1})))},fillTitle:function(e){for(var t=null,i=e.matched.length-1;0<i;i--)null!=e.matched[i].meta&&null!=e.matched[i].meta.title&&(t=e.matched[i].meta.title);this.title=t},changedHits:function(e){this.$account.hits=_.merge(this.$account.hits,e),NativeApplication.setBadge(this.calcHits())},incrementHits:function(e){console.log(e),function i(s,e){_.each(e,function(e,t){_.isObject(e)?(null==s[t]&&(s[t]=[]),i(s[t],e)):null==s[t]?s[t]=e:s[t]+=e})}(this.$account.hits,e),NativeApplication.setBadge(this.calcHits())},updatedSystem:function(){this.$confirm(this.$gettext("Произошло обновление системы, необходимо перезагрузить страницу"),"is-danger").then(function(){document.location.reload()})},menuOpen:function(e,t){null==t&&(t=!$mx("html").is(".open-menu")),$mx("html").toggleClass("open-menu",t),t&&$mx(".main").one("click",function(){$mx("html").removeClass("open-menu")})},refreshFavourites:function(){var t=this;this.$api.get("account/favourites").then(function(e){t.$account.favourites=e.response.favourites})},checkViewBox:function(e){return null==e.icon_viewbox?"0 0 512 512":e.icon_viewbox},prepareHits:function(e){return this.calcHits(e)?" menu-hits":""},calcHits:function(e){function s(e){var t=0;for(var i in e)"object"==_typeof2(e[i])?t+=s(e[i]):t+=e[i];return t}var t=0;return null!=e?this.$account.hits[e.name]&&(t=s(this.$account.hits[e.name])):_.each(this.$account.hits,function(e){t+=s(e)}),t},prepareIcon:function(e){return e.meta.icon+this.prepareHits(e)},click:function(e){window.standalone&&go($mx(e.target).closest("a").attr("href")),this.$auth.closeMenu()},logout:function(){var t=this;this.$api.get("auth/logout").then(function(e){"success"==e.result&&(t.$auth.closeMenu(),null!=e.response?t.$auth.refresh(e.response,function(){t.$router.replace({name:"pages",params:{page_id:t.$account.page_id}})}):(t.$account.profile_id=null,window.$events.fire("account:logout")))})}},template:'<div :class="{\'is-form-opened\': $form.isOpened || $form.isOpenedHeader}"> <transition name="fade"> <article class="message is-top-banner" v-if="$account.banner && isShowBanner && !$page.isViewMode" :class="$account.banner.classname"> <header class="message-header" :style="{background: $account.banner.bg}"> <div class="container"> <a target="_blank" :href="$account.banner.link" @click="if ($account.banner.close == \'link\') isShowBanner=false" v-html="$account.banner.title" style="font-weight: 400"></a> <button type="button" class="delete" @click="isShowBanner = false" v-if="$account.banner.close == \'button\'"></button> <a :href="$account.banner.link" class="button" target="_blank" @click="isShowBanner = false" v-if="$account.banner.button" :class="$account.banner.button.classname" style="font-weight: 400">{{$account.banner.button.text}}</a> </div> </header> </article> </transition> <header class="is-top is-auth"> <div class="container"> <div> <a @click.stop="menuOpen" class="menu-btn"><i class="fal fa-bars"></i><i :class="prepareHits()"></i></a> <span @click.stop="menuOpen" class="menu-title">{{title|gettext}}</span> <div class="scrolling-container"> <div> <div class="menu"> <router-link v-for="(m, index) in menu" :key="index" :to="{name: m.name, params: { page_id: page_id }}" :class="{active: isActiveMenu(m)}" v-if="m.meta && (m.meta.icon || m.meta.icon_svg)" @click.native="click"><svg :viewBox="checkViewBox(m.meta)" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" v-if="m.meta.icon_svg != undefined" v-html="m.meta.icon_svg"></svg><i :class="prepareHits(m)"></i><em :class="prepareIcon(m)" v-else></em><span>{{m.meta.title|gettext}}</span><dd :data-value="calcHits(m)" v-if="calcHits(m)"></dd></router-link> </div> </div> </div> <div class="menu-right"> <vue-component-help-button/> <div class="header-choose-profile"> <div class="a projects-menu" :class="{in: menuOpened}"> <div @click.prevent.stop="menuOpened = false" class="background"></div> <div class="d" @click="if ($device.mobile) menuOpened=true"><img :src=\'$account.avatar.url\' class="avatar"><i class="fa fa-angle-down is-hidden-mobile has-ml-1"></i></div> <div class="ul"> <div class="li is-first"><router-link :to="{name: \'profiles\', params: {page_id: page_id}}" @click.native="click">{{\'Мои профили\'|gettext}}</router-link></div> <div class="li divider" v-if="$account.favourites.length"></div> <div class="menu-favourites"> <div v-for="f in $account.favourites" class="li"><a class=\'profile\' @click="$auth.changeProfile(f.profile_id)"><i class="fa fa-share-alt" v-if="f.is_share"></i><dd>{{f.nickname}}</dd></a></div> </div> <div class="li divider"></div> <div class="li"><router-link :to="{name: \'access\', params: {page_id: page_id}}" @click.native="click">{{\'Совместный доступ\'|gettext}}</router-link></div> <div class="li divider"></div> <div class="li"><router-link :to="{name: \'account-settings\', params: {page_id: page_id}}" @click.native="click">{{\'Настройки аккаунта\'|gettext}}</router-link></div> <div v-if="$account.manager_id"> <div class="li divider"></div> <div class="li"><router-link :to="{name: \'manager\', params: {page_id: page_id}}" @click.native="click">{{\'Администрирование\'|gettext}}</router-link></div> </div> <div v-if="$account.partner_id && $account.partner_id"> <div class="li divider"></div> <div class="li"><router-link :to="{name: \'partner\', params: {page_id: page_id}}" @click.native="click">{{\'Партнерская программа\'|gettext}}</router-link></div> </div> <div v-if="$account.appsumo_user_id"> <div class="li divider"></div> <div class="li"><a href="/appsumo/">AppSumo</a></div> </div> <div class="li divider"></div> <div><a @click="showPricing">{{\'Цены и тарифы\'|gettext}}</a></div> <div class="li divider"></div> <div class="li is-last"><a @click="logout">{{\'Выход\'|gettext}}</a></div> </div> </div> </div> </div> </div> <div class="is-form-header"> <div><h4 v-for="s in $form.stack">{{s.title}}</h4></div> <div class="buttons" v-if="$form.top"><button class="button is-light" @click="$form.close">{{\'Закрыть\'|gettext}}</button><button v-for="b in $form.top.buttons" class="button is-light" :class="b.classname" :disabled="b.disabled" @click="b.click">{{b.title}}</button></div> </div> </div> </header> <em></em> <div class="message is-warning alert-header" v-if="!($account.banner && isShowBanner) && !$auth.isAllowTariff(\'pro\') && !$form.isOpened && !$page.isViewMode"><i class=\'fa fa-star-o\'></i> {{\'У вас базовый тариф\'|gettext}}, <a @click="showPricing" class="text-black">{{\'обновить тариф\'|gettext}}</a></div> <div v-else> <div class="message is-warning alert-header" v-if="$account.tariff_ends && $account.tariff_ends_days> 0 && $account.tariff_ends_days < 14 && !$form.isOpened && !$page.isViewMode"><i class=\'fal fa-exclamation-triangle has-mr-1\'></i> <span v-html="tariffEndsMessage" @click.prevent="clickTariffEnds"></span></div> </div> <vue-component-submenu :page_id="page_id" class="is-top-level"/> <vue-component-help-sidebar/> </div>'}),window.$app.defineComponent("index","vue-index-pricing-form",{created:function(){this.$form.top.title=this.$gettext("Цены и тарифы")},template:'<div class="container has-mt-1"> <div class="has-text-centered has-mb-8 has-xs-mb-2 has-pt-4 is-hidden-mobile"><div class="row"><div class="col-xs-10 col-xs-offset-1"><h1>{{\'Выберите тариф, подходящий для вас\'|gettext}}</h1></div></div></div> <vue-index-pricing :hasDarkmode="true" :isApp="true"/> </div>'}),window.$app.defineComponent("index","vue-index-pricing",{data:function(){return{currency:{title:"$",format:"%c%p",precision:1,decimal:".",thousands:",",round:1},prepaid:null,purpose:"",features:[],isOpenInvoiceForm:!1,isScrollingPlans:!1,isVatExclude:!1,details:{basic:Array.from("aaaaa"),pro:Array.from("aaaaaaaaa"),business:Array.from("aaaaaaaaaaaa")},plans:{basic:{price:0},pro:{price:0},business:{price:0}},currentPeriod:12,currentPlan:"pro",isFetching:!0,isFinished:!1,isTrialActivating:!1,isChoosing:null,isWaitingPayment:!1,isWaitingLoading:!1,counter:{from:{},to:{}},intervalHeight:0,promotion:null}},props:{hasDarkmode:Boolean,isApp:Boolean},created:function(){var i=this;this.$api.get("system/prices/get").then(function(e){var t;"success"==e.result&&(t=e.response,i.features=t.features,i.currency=t.currency,i.plans=t.plans,i.prepaid=t.prepaid,i.isVatExclude=t.is_vat_exclude,i.details=t.details,i.promotion=t.promotion,i.isFetching=!1,i.storeCounter(),i.counter.current=i.counter.to,i.$nextTick(function(){i.isFinished=!0,i.recheckSizes(),i.clickPlan(i.currentPlan="pro")}))}),$mx(document).trigger("taplink_pricing"),this.$io.on("events:account:refresh",this.planUpdated),$mx(window).on("resize orientationchange",this.recheckSizes)},destroyed:function(){$mx(window).off("resize orientationchange",this.recheckSizes),this.$io.off("events:account:refresh",this.planUpdated)},computed:{periods:function(){return{3:{discount:0,months:3,text:"квартал",title:"3 месяца",period:3},6:{discount:30,months:3,text:"полгода",title:"6 месяцев",period:6},12:{discount:50,months:3,text:"год",title:"12 месяцев",period:12}}},current:function(){return this.periods[this.currentPeriod]},isLonglife:function(){return this.$account.trial_activated&&!this.$account.tariff_until}},watch:{currentPeriod:function(){var o=this;this.storeCounter(),_.each(this.plans,function(e,t){var i=o.counter.from[t],s=(o.counter.to[t]-i)/20,n=0,a=setInterval(function(){o.counter.current[t]=i+s*n,o.$forceUpdate(),10==++n&&(o.counter.current[t]=o.counter.to[t],o.$forceUpdate(),clearInterval(a))},20)})}},methods:{scrollPlans:function(t){var i,e;this.isScrollingPlans||(i="",e=$mx(".price-list .pricing-items-container"),_.each($mx.makeArray(e).reverse(),function(e){t.target.scrollLeft<e.offsetLeft&&(i=$mx(e).closest(".price-column").data("plan"))}),i&&(this.currentPlan=i))},scrollPlansStart:function(){this.isScrollingPlans=!1},clickPlan:function(e){this.isScrollingPlans=!0;var t=parseInt(getComputedStyle(document.documentElement).fontSize);scrollIt($mx('.price-column[data-plan="'+e+'"]')[0].offsetLeft-t,"x",$mx(".pricing-plans-container")[0],150)},recheckSizes:function(){var t=0,e=$mx(".price-list .pricing-items-container");e.each(function(e){t=Math.max(t,$mx(e).height())}),e.each(function(e){$mx(e).css("height",t)})},planUpdated:function(){this.isWaitingPayment=!1},storeCounter:function(){var i=this;this.counter.from=this.counter.to,this.counter.to={},_.each(this.plans,function(e,t){i.counter.to[t]=i.newPricePerMonth(e)*i.currentPeriod})},trialActivate:function(){var t=this;this.isTrialActivating=!0,this.$api.get("system/prices/trial").then(function(e){"success"==e.result&&t.$auth.refresh(e.response),t.isTrialActivating=!1}).catch(function(){t.isTrialActivating=!1})},choose:function(e){var i=this;if("pro"==e&&"business"==this.$account.plan_paid)return this.$modal("vue-index-downgrade-form");var t=_.isObject(e)?e:{period:this.currentPeriod,tariff:e};this.isChoosing=t.tariff,this.$api.get("system/prices/order",t).then(function(e){if("success"==e.result){var t=e.response;switch(i.purpose=t.purpose,t.payment_provider){case"paddle":t.info.error?alert(t.info.error):(i.isOpenInvoiceForm=!0,i.isWaitingLoading=!0,i.$nextTick(function(){$mx.lazy("//cdn.paddle.com/paddle/paddle.js",function(){Paddle.Setup({vendor:parseInt(t.info.vendor_id),eventCallback:function(){}}),Paddle.Checkout.open({method:"inline",product:554200,email:i.$account.user.email,frameTarget:"checkout-container",frameInitialHeight:300,frameStyle:"width:100%; background-color: transparent; border: none;",override:t.info.url,closeCallback:function(){i.isChoosing=null,i.closePaddle()},successCallback:function(){i.$auth.refresh(),i.isWaitingPayment=!0,i.isChoosing=null,$mx(document).trigger("taplink_paid"),i.closePaddle()},loadCallback:function(){i.isWaitingLoading=!1,i.intervalHeight=setInterval(function(){var e=$mx(".checkout-container iframe");e.length&&e.css("height",e.attr("height"))},250)}})})}));break;default:document.location=t.redirect}}else i.isChoosing=null})},closePaddle:function(){this.isOpenInvoiceForm=!1,this.isChoosing=null,this.intervalHeight&&(clearInterval(this.intervalHeight),this.intervalHeight=0)},openPromoForm:function(e){this.$modal("vue-index-promocode-form",{period:this.currentPeriod,tariff:e},this)},currencyFormat:function(e,t){if(this.isFetching)return 999;var i=this.counter.current[e];return this.$currency(i-("business"==e?this.prepaid:0),t.price?this.currency:Object.assign({},this.currency,{precision:0}),this.currency.format.replace("%p","<span>%p</span>"))},prepaidTitle:function(e){return"business"==e&&this.prepaid?"-"+this.$currency(this.prepaid,this.currency):""},tippy:function(e,t,i){return!!_.isArray(e)&&{placement:"top-start",content:e[1],triggerTarget:this.$refs["id"+t+i][0]}},payButtonTitle:function(e){switch(e){case"pro":return"business"==this.$account.plan_paid?this.$gettext("Перейти на PRO"):"pro"==this.$account.plan_paid?this.$gettext("Продлить PRO"):this.$gettext("Оплатить PRO");case"business":return"business"==this.$account.plan_paid?this.$gettext("Продлить BUSINESS"):this.$gettext("Оплатить BUSINESS")}},priceRound:function(e){var t,i=this.currency.round;return"floor"==i&&(e=Math.floor(e)),"ceil"==i&&(e=Math.ceil(e)),isNaN(this.currency.round)||(t=Math.pow(10,this.currency.round),e=Math.round(e*t)/t),e},newPricePerMonth:function(e){var t=e.price-e.price/100*this.current.discount;return this.promotion?t-=(old_price=t)/100*this.promotion.discount:old_price="",t=this.priceRound(t)}},template:'<div :class="{\'has-darkmode\': hasDarkmode}"> <div class="row"> <div class="col-lg-8 col-md-8 col-sm-7 col-xs-12 has-mb-2" style="align-items:center;display:flex"> <div v-if="$account.profile_id && $auth.isAllowTariff(\'pro\') && !isWaitingPayment" class="has-mb-1 has-mt-1" :class="{\'is-message\': isApp}"> <h4 class="has-text-centered-mobile has-text-success" style="flex: 1"><i class="fas fa-star has-text-yellow has-mr-1 is-hidden-mobile"></i> <span v-if="isLonglife">{{\'У вас пожизненный {1} тариф\'|gettext|format($account.tariff.toUpperCase())}}</span> <span v-else>{{\'Ваш {1} тариф активен до {2}\'|gettext|format($account.tariff.toUpperCase(), $date($account.tariff_until))}}</span> </h4> </div> <div v-else> <div class="has-mb-1 has-mt-1" :class="{\'is-message\': isApp}" v-if="isWaitingPayment"> <h4 class="has-text-centered-mobile has-text-warning"><i class="fas fa-spinner fa-pulse has-text-yellow has-mr-1"></i>{{\'Ожидание оплаты\'|gettext}}</h4> </div> <div class="has-mb-1 has-mt-1" :class="{\'is-message\': isApp}" v-if="$auth.hasFeature(\'trial\') && !isWaitingPayment"> <span style="align-items:center;display:flex"><button @click="trialActivate" class="button is-success index-shadow is-fullwidth-mobile" :class="{\'is-loading\': isTrialActivating}" :disabled="$account.trial_activated">Start a 7-Day Free Trial</button> <span class="has-ml-1 has-text-grey is-hidden-mobile">No credit card required</span></span> </div> </div> </div> <div class="col-lg-4 col-md-4 col-sm-5 col-xs-12 has-mb-2"> <div class="field has-tabs-style is-marginless has-addons"> <b-radio-button v-for="(p, i) in periods" v-model="currentPeriod" type="active" class="is-expanded" :native-value="p.period" :disabled="isFetching"><span>{{p.title|gettext}}</span><div class="hint" v-if="p.discount">-{{p.discount}}%</div></b-radio-button> </div> <div class="field has-tabs-style is-tabs-plans is-hidden-tablet has-mt-2 has-addons"> <b-radio-button v-for="(p, n) in plans" v-model="currentPlan" type="active" class="is-expanded" :class="\'is-\'+n" :native-value="n" :disabled="isFetching" @click.native="clickPlan(n)"><span>{{n.toUpperCase()}}</span></b-radio-button> </div> </div> </div> <div class="message has-text-centered has-mb-3" v-if="promotion" style="background: #000;color: #fff;font-size: 110%;margin: 0;border-radius: 0;text-decoration:none;padding: .7rem 0;z-index:1" v-html="promotion.promotion_description"></div> <div class="pricing-plans-container" @scroll="scrollPlans" @touchstart="scrollPlansStart"> <div class="row row-small price-list"> <div class="col-md-4 col-xs-12 col-sm-12 has-mb-2" v-for="(p, name) in plans"> <div class="price-column" :data-plan="name"> <div> <div class="pricing-items-container"> <div class="price-block has-pt-4 has-xs-pt-3 price-level" style="margin: 0;padding-bottom: 0 !important;border:0;line-height: 1"> <h1>{{name.toUpperCase()}}</h1> <span class="priceTotal"><span class="new-price" :class="{skeleton: isFetching}" v-html="currencyFormat(name, p)" :data-prepaid-title="prepaidTitle(name)"></span></span> </div> <div class="price-block has-pb-2 price-level" style="padding-top: 0 !important"> <p></p> <span class="has-text-grey price-total-period" :class="{skeleton: isFetching}">{{p.price?$gettext(current.text):\'∞\'}}<span v-if="p.price && isVatExclude">,&nbsp;vat excl.</span></span> </div> <p class="price-block has-text-centered" v-if="p.price"> <span class=\'has-text-centered priceMonthly\'> <span class="old-price" v-if="p.price != newPricePerMonth(p)">{{p.price|currency(currency)}}/{{\'мес\'|gettext}}</span> <span class="new-price">{{newPricePerMonth(p)|currency(currency)}}/{{\'мес\'|gettext}}</span> </span> </p> <p class="price-block has-text-centered" v-else> <span> <div class="skeleton is-centered is-40" v-if="isFetching"></div> <span v-else>{{\'Бесплатно навсегда\'|gettext}}</span> </span> </p> <div v-if="!isFetching" style="padding-top: 1rem"> <div class="price-item" v-for="(s, i) in details[name]" :ref="\'id\'+name+i"> <em v-tippy="tippy(s, name, i)" v-if="isFinished && _.isArray(s)"></em><em v-else></em> <span v-if="_.isArray(s)">{{s[0]}}</span><span v-else>{{s}}</span> </div> </div> <div style="padding-top: 1rem" v-else> <div v-for="(s, i) in details[name]"><span class="skeleton" style="margin: 1rem" :style="{width: (30 + (Math.random() * 50))+\'%\'}"></span></div> </div> </div> <div class="price-block" :class="{\'is-hidden-mobile\': isApp}" style="border:0" v-if="$account.profile_id"> <button class="button is-medium is-dark is-fullwidth index-shadow" style="padding-top: .75rem;padding-bottom:.75rem;height:auto" v-if="name == \'basic\'" disabled="on"><span v-if="$account.tariff == name">{{\'Ваш текущий тариф\'|gettext}}</span><span v-else>{{\'Бесплатно\'|gettext}}</span></button> <button class="button is-medium is-fullwidth index-shadow" :class="{\'is-loading\': isChoosing== name, \'is-black\': p.is_allow, \'is-dark\': !p.is_allow}" style="padding-top: .75rem;padding-bottom:.75rem;height:auto" data-track-event=\'payment\' @click="choose(name)" :disabled="!p.is_allow" v-else>{{payButtonTitle(name)}}<i class="fal fa-long-arrow-right index-button-arrow"></i></button> </div> </div> <div v-if="$account.profile_id" class="promocode-footer" :class="{\'is-hidden-mobile\': isApp}" :data-plan="name"> <a @click="openPromoForm(name)" class="linkPromo has-text-grey" :class="{\'is-invisible\': name== \'basic\'}" :style="{visibility: p.is_allow?\'visible\':\'hidden\'}">{{\'Активировать промокод\'|gettext}}</a> </div> </div> </div> </div> </div> <div class="pricing-floatpanel" v-if="isApp" :data-plan="currentPlan"> <button class="button is-medium is-dark is-fullwidth index-shadow" style="padding-top: .75rem;padding-bottom:.75rem;height:auto" v-if="currentPlan == \'basic\'" disabled="on"><span v-if="$account.tariff == currentPlan">{{\'Ваш текущий тариф\'|gettext}}</span><span v-else>{{\'Бесплатно\'|gettext}}</span></button> <button class="button is-medium is-fullwidth index-shadow" :class="{\'is-loading\': isChoosing== currentPlan, \'is-black\': plans[currentPlan].is_allow, \'is-dark\': !plans[currentPlan].is_allow}" style="padding-top: .75rem;padding-bottom:.75rem;height:auto" data-track-event=\'payment\' @click="choose(currentPlan)" :disabled="!plans[currentPlan].is_allow" v-else>{{payButtonTitle(currentPlan)}}<i class="fal fa-long-arrow-right index-button-arrow"></i></button> <div class="has-text-centered has-pt-2"><a @click="openPromoForm(currentPlan)" class="linkPromo has-text-grey" :class="{\'is-invisible\': currentPlan== \'basic\'}" :style="{visibility: plans[currentPlan].is_allow?\'visible\':\'hidden\'}">{{\'Активировать промокод\'|gettext}}</a></div> </div> <b-loading :active.sync="isWaitingPayment"></b-loading> <b-modal :active.sync="isOpenInvoiceForm" has-modal-card trap-focus :can-cancel="[]"> <template #default="props"> <div class="modal-card modal-card-little"> <header class="modal-card-head"><p class="modal-card-title">{{\'Оплата\'|gettext}}</p><button type="button" class="modal-close is-large" @click="closePaddle"></button></header> <section class="modal-card-body has-text-black" style="padding: .5rem;position: relative;"> <h4 v-if="!isWaitingLoading" style="padding: 1rem 1rem 0 1rem">{{purpose}}</h4> <div class="checkout-container"></div> <b-loading :active.sync="isWaitingLoading" :is-full-page="false"></b-loading> </section> <div class="modal-card-foot"> <button class="button is-dark" type="button" @click="closePaddle">{{\'Закрыть\'|gettext}}</button> </div> </div> </template> </b-modal> </div>'}),window.$app.defineComponent("index","vue-index-promocode-form",{data:function(){return{isUpdating:!1,response:{},values:{code:""}}},mixins:[FormModel],props:["period","tariff"],methods:{check:function(){var t=this;this.isUpdating=!0,this.$api.get("system/prices/promo",Object.assign({},this.values,{period:this.period,tariff:this.tariff,action:this.response.promo_id?"submit":"check"}),this).then(function(e){switch(e.result){case"success":t.response=e.response;break;case"redirect":document.location=e.response.redirect,t.$parent.close();break;case"choose":t.$parent.$parent.choose(e.response),t.$parent.close();break;case"close":t.$parent.close();break;case"refresh":t.$auth.refresh(),t.$parent.close()}t.isUpdating=!1})},close:function(){this.response.promo_id?this.response={}:this.$parent.close()}},template:'<form class="modal-card modal-card-little" @submit.prevent="check"> <header class="modal-card-head"> <p class="modal-card-title">{{\'Промокод\'|gettext}}</p> <button class="modal-close is-large" @click="$parent.close()" type="button"></button> </header> <section class="modal-card-body"> <b-field :label="\'Укажите промокод\'|gettext" :class="{\'has-error\': errors.code}" :message="errors.code"> <input type="text" class="input" v-model.trim="values.code" :disabled="isUpdating" maxlength="16" :disabled="response.promo_id" v-focus> </b-field> <div v-if="response.promo_title" class="message" :class="{\'is-success\': response.is_allow, \'is-danger\': !response.is_allow}" style="margin: 0"><div class="message-body" v-html="response.promo_title"></div></div> </section> <footer class="modal-card-foot"> <button class="button is-dark" type="button" @click="close"><span v-if="response.promo_id">{{\'Отмена\'|gettext}}</span><span v-else>{{\'Закрыть\'|gettext}}</span></button> <button class="button is-primary" type="submit" :class="{\'is-loading\': isUpdating}"><span v-if="response.promo_id">{{\'Активировать\'|gettext}}</span><span v-else>{{\'Проверить\'|gettext}}</span></button> </footer> </div>'}),window.$app.defineModule("index",[{path:"/",component:"vue-index-index",name:"index",children:[{path:"/auth/",redirect:"auth/signin/",name:"auth",children:[{path:"signin/",component:"vue-auth-signin",name:"signin",props:{tab:"signin"}},{path:"signup/",component:"vue-auth-signin",name:"signup",props:{tab:"signup"}},{path:"email/",component:"vue-auth-email",name:"email"},{path:"restore/",component:"vue-auth-restore",name:"restore"},{path:"attach/",component:"vue-auth-attach",name:"attach"},{path:"change/:username/",component:"vue-auth-change",name:"change",props:!0}]},{path:"/:page_id/",props:!0,component:"vue-index-main",name:"main",children:[{path:"account/",redirect:"account/settings/",name:"account",meta:{title:"Аккаунт"},children:[{path:"profiles/",component:"vue-account-profiles-list",props:!0,name:"profiles",meta:{title:"Мои профили"}},{path:"access/",props:!0,redirect:"access/main/",name:"access",meta:{title:"Совместный доступ"},children:[{path:"main/",component:"vue-account-access-list",props:{part:"main"},name:"access-main"},{path:"shared/",component:"vue-account-access-list",props:{part:"shared"},name:"access-shared"}]},{path:"settings/",component:"vue-account-settings-form",props:!0,name:"account-settings",meta:{title:"Настройки аккаунта"}}]},{path:"pages/",component:"vue-pages-page",props:!0,name:"pages",meta:{title:"Страница",icon_svg:'<path d="M76 160h40a12 12 0 0 0 12-12v-40a12 12 0 0 0-12-12H76a12 12 0 0 0-12 12v40a12 12 0 0 0 12 12zM0 224v208a48 48 0 0 0 48 48h416a48 48 0 0 0 48-48V224z" opacity="0.4"/><path d="M464 32H48A48 48 0 0 0 0 80v144h512V80a48 48 0 0 0-48-48zM128 148a12 12 0 0 1-12 12H76a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm320 0a12 12 0 0 1-12 12H188a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h248a12 12 0 0 1 12 12z"/>',tariff:"basic",feature:"taplink"}},{path:"pages/:back_page_id/",props:!0,component:"vue-pages-page",name:"pages-back"},{path:"statistics/",component:"vue-statistics-list",props:!0,name:"statistics",meta:{title:"Статистика",icon_svg:'<path d="M512 400v32a16 16 0 0 1-16 16H32a32 32 0 0 1-32-32V80a16 16 0 0 1 16-16h32a16 16 0 0 1 16 16v304h432a16 16 0 0 1 16 16z" opacity="0.4"/><path d="M275.2 96h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8zm-96 128h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8zm288-160h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8zm-96 96h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8z"/>',icon_viewbox:"0 0 562 512",tariff:"basic",access:64,feature:"taplink"}},{path:"billing/",component:"vue-billing-index",props:!0,name:"billing"},{path:"inbox/",component:"vue-inbox-index",props:!0,name:"typebot-inbox",meta:{title:"Диалоги",icon_svg:'<g><path opacity="0.4" d="M448 0H64A64.06 64.06 0 0 0 0 64v288a64.06 64.06 0 0 0 64 64h96v84a12 12 0 0 0 19.1 9.7L304 416h144a64.06 64.06 0 0 0 64-64V64a64.06 64.06 0 0 0-64-64zM128 240a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm128 0a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm128 0a32 32 0 1 1 32-32 32 32 0 0 1-32 32z"></path><path d="M384 176a32 32 0 1 0 32 32 32 32 0 0 0-32-32zm-128 0a32 32 0 1 0 32 32 32 32 0 0 0-32-32zm-128 0a32 32 0 1 0 32 32 32 32 0 0 0-32-32z"></path></g>',icon_viewbox:"0 0 512 512",feature:"typebot",submenu:!1,access:256}},{path:"chatbots/",component:"vue-chatbots-index",props:!0,name:"chatbots",meta:{title:"Автоматизация",icon_svg:'<path opacity="0.4" d="M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"></path>',icon_viewbox:"0 0 512 512",feature:"typebot",submenu:!1,access:1024}},{path:"subscribers/",component:"vue-subscribers-index",props:!0,name:"typebot-subscribers",meta:{title:"Аудитория",icon_svg:'<path d="M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"></path>',icon_viewbox:"0 0 640 512",feature:"typebot1",submenu:!1}},{path:"sales/",redirect:"sales/leads/",props:!0,name:"sales",meta:{title:"Заявки",icon_svg:'<path d="M0 432a48 48 0 0 0 48 48h480a48 48 0 0 0 48-48V256H0zm192-68a12 12 0 0 1 12-12h136a12 12 0 0 1 12 12v40a12 12 0 0 1-12 12H204a12 12 0 0 1-12-12zm-128 0a12 12 0 0 1 12-12h72a12 12 0 0 1 12 12v40a12 12 0 0 1-12 12H76a12 12 0 0 1-12-12zM528 32H48A48 48 0 0 0 0 80v48h576V80a48 48 0 0 0-48-48z" opacity="0.4"/><path d="M576 256H0V128h576z"/>',icon_viewbox:"0 0 576 512",tariff:"business",feature:"crm",access:4}},{path:"products/",redirect:"products/active/",props:!0,name:"products",meta:{title:"Товары",icon_svg:'<path d="M551.64 286.8a102.1 102.1 0 0 0 16.4-3.6V480a32 32 0 0 1-32 32H88a32 32 0 0 1-32-32V283.2a125.76 125.76 0 0 0 16.4 3.6 134.93 134.93 0 0 0 18 1.2 132.48 132.48 0 0 0 29.5-3.8V384h384v-99.8a126.88 126.88 0 0 0 29.5 3.8 139.07 139.07 0 0 0 18.24-1.2z" opacity="0.4"/><path d="M605.94 118.6c33.6 53.6 3.8 128-59 136.4a102.81 102.81 0 0 1-13.7.9 99.07 99.07 0 0 1-73.8-33.1 98.82 98.82 0 0 1-147.6 0 98.82 98.82 0 0 1-147.6 0 98.74 98.74 0 0 1-73.8 33.1 103.92 103.92 0 0 1-13.7-.9c-62.6-8.5-92.3-82.9-58.8-136.4L82.84 15a32 32 0 0 1 27.1-15h404A32 32 0 0 1 541 15z"/>',icon_viewbox:"0 0 618 512",tariff:"business",feature:"taplink,products",access:16}},{path:"courses/",redirect:"courses/list/",props:!0,name:"courses-index",meta:{title:"Обучение",icon_svg:'<g><path d="M608 217a95.26 95.26 0 0 0-64-25V64H96v128a95.28 95.28 0 0 0-64 25V49.59C32 22.25 53.53 0 80 0h480c26.47 0 48 22.25 48 49.59z" opacity="0.4"></path><path d="M576 384h-64a64 64 0 0 0-64 64v32a32 32 0 0 0 32 32h128a32 32 0 0 0 32-32v-32a64 64 0 0 0-64-64zm-32-32a64 64 0 1 0-64-64 64 64 0 0 0 64 64zm-192 32h-64a64 64 0 0 0-64 64v32a32 32 0 0 0 32 32h128a32 32 0 0 0 32-32v-32a64 64 0 0 0-64-64zm-224 0H64a64 64 0 0 0-64 64v32a32 32 0 0 0 32 32h128a32 32 0 0 0 32-32v-32a64 64 0 0 0-64-64zm192-32a64 64 0 1 0-64-64 64 64 0 0 0 64 64zm-224 0a64 64 0 1 0-64-64 64 64 0 0 0 64 64z"></path></g>',icon_viewbox:"0 0 640 512",feature:"courses",submenu:!1},children:[{path:"list/",component:"vue-courses-index",props:!0,name:"courses-list"},{path:"list/:course_id/",component:"vue-courses-course",props:!0,name:"courses-course"}]},{path:"templates/",component:"vue-templates-index",props:!0,name:"templates-inbox",meta:{title:"Шаблоны",icon_svg:'<g><path d="M64,256h64V192H64Zm370.66-88.29h0L344.5,77.36a31.83,31.83,0,0,0-45-.07h0l-.07.07L224,152.88V424L434.66,212.9A32,32,0,0,0,434.66,167.71ZM64,128h64V64H64ZM480,320H373.09L186.68,506.51c-2.06,2.07-4.5,3.58-6.68,5.49H480a32,32,0,0,0,32-32V352A32,32,0,0,0,480,320Z" opacity="0.4"></path><path d="M160,0H32A32,32,0,0,0,0,32V416a96,96,0,0,0,192,0V32A32,32,0,0,0,160,0ZM96,440a24,24,0,1,1,24-24A24,24,0,0,1,96,440Zm32-184H64V192h64Zm0-128H64V64h64Z"></path></g>',icon_viewbox:"0 0 512 512",feature:"templates",submenu:!1}},{path:"design/",redirect:"design/-1/",props:!0,name:"design1",meta:{title:"Дизайн",icon_svg:'<path d="M204.29 5c-99.4 19.4-179.5 99.29-199.1 198.4-37 187 131.7 326.39 258.8 306.69 41.2-6.4 61.4-54.59 42.5-91.69-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.31C511.49 97.13 368.09-26.87 204.29 5zM96 320a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm32-128a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm128-64a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm128 64a32 32 0 1 1 32-32 32 32 0 0 1-32 32z" opacity="0.4"></path><path d="M96 256a32 32 0 1 0 32 32 32 32 0 0 0-32-32zm32-128a32 32 0 1 0 32 32 32 32 0 0 0-32-32zm128-64a32 32 0 1 0 32 32 32 32 0 0 0-32-32zm128 64a32 32 0 1 0 32 32 32 32 0 0 0-32-32z"></path>',icon_viewbox:"0 0 512 512",feature:"design",submenu:!1,access:128},children:[{path:":group_id/",component:"vue-design-index",props:!0,name:"design",meta:{title:"Дизайн",icon_viewbox:"0 0 512 512",feature:"design",submenu:!1}}]},{path:"addons/",redirect:"addons/all/",props:!0,name:"addons",meta:{title:"Модули",icon_svg:'<path d="M12.41 236.31L70.51 210l161.63 73.27a57.64 57.64 0 0 0 47.72 0L441.5 210l58.09 26.33c16.55 7.5 16.55 32.5 0 40L266.64 381.9a25.68 25.68 0 0 1-21.29 0L12.41 276.31c-16.55-7.5-16.55-32.5 0-40z" opacity="0.4"/><path d="M12.41 148l232.94 105.7a25.61 25.61 0 0 0 21.29 0L499.58 148c16.55-7.51 16.55-32.52 0-40L266.65 2.32a25.61 25.61 0 0 0-21.29 0L12.41 108c-16.55 7.5-16.55 32.52 0 40zm487.18 216.11l-57.87-26.23-161.86 73.37a57.64 57.64 0 0 1-47.72 0L70.29 337.88l-57.88 26.23c-16.55 7.5-16.55 32.5 0 40L245.35 509.7a25.68 25.68 0 0 0 21.29 0l233-105.59c16.5-7.5 16.5-32.5-.05-40z"/>',icon_viewbox:"0 0 582 512",feature:"addons",submenu:!1,access:128}},{path:"settings/",redirect:"settings/common/",props:!0,name:"settings",meta:{title:"Настройки",icon_svg:'<path d="M487.75 315.6l-42.6-24.6a192.62 192.62 0 0 0 0-70.2l42.6-24.6a12.11 12.11 0 0 0 5.5-14 249.2 249.2 0 0 0-54.7-94.6 12 12 0 0 0-14.8-2.3l-42.6 24.6a188.83 188.83 0 0 0-60.8-35.1V25.7A12 12 0 0 0 311 14a251.43 251.43 0 0 0-109.2 0 12 12 0 0 0-9.4 11.7v49.2a194.59 194.59 0 0 0-60.8 35.1L89.05 85.4a11.88 11.88 0 0 0-14.8 2.3 247.66 247.66 0 0 0-54.7 94.6 12 12 0 0 0 5.5 14l42.6 24.6a192.62 192.62 0 0 0 0 70.2l-42.6 24.6a12.08 12.08 0 0 0-5.5 14 249 249 0 0 0 54.7 94.6 12 12 0 0 0 14.8 2.3l42.6-24.6a188.54 188.54 0 0 0 60.8 35.1v49.2a12 12 0 0 0 9.4 11.7 251.43 251.43 0 0 0 109.2 0 12 12 0 0 0 9.4-11.7v-49.2a194.7 194.7 0 0 0 60.8-35.1l42.6 24.6a11.89 11.89 0 0 0 14.8-2.3 247.52 247.52 0 0 0 54.7-94.6 12.36 12.36 0 0 0-5.6-14.1zm-231.4 36.2a95.9 95.9 0 1 1 95.9-95.9 95.89 95.89 0 0 1-95.9 95.9z" opacity="0.4"/><path d="M256.35 319.8a63.9 63.9 0 1 1 63.9-63.9 63.9 63.9 0 0 1-63.9 63.9z"/>',tariff:"basic",access:128}},{path:"partner/",redirect:"partner/statistics/",component:"vue-partner-index",props:!0,name:"partner",meta:{title:"Партнерская программа",submenu:!1}},{path:"manager/",redirect:"manager/profiles/",props:!0,name:"manager"}]}]}]),window.$app.defineComponent("blocks","vue-blocks-flipclock-countdown",{props:{countdown:Number,withDays:{type:Boolean,default:!0}},data:function(){return{timer:0,time:null,i:0,trackers:["hours","minutes","seconds"],titles:{},numbers:[0,1],frame:null}},beforeDestroy:function(){window.cancelAnimationFrame&&cancelAnimationFrame(this.frame),this.timer&&clearInterval(this.timer)},created:function(){var e=this;this.titles={days:this.$gettext("Дни"),hours:this.$gettext("Часы"),minutes:this.$gettext("Минуты"),seconds:this.$gettext("Секунды")},this.withDays&&this.trackers.unshift("days"),this.timer=setInterval(function(){e.countdown&&e.countdown--},1e3),window.requestAnimationFrame&&this.update()},methods:{split:function(e){return[e/10|0,e%10]},update:function(){var e,t,i,s;this.frame=requestAnimationFrame(this.update.bind(this)),this.i++%10||(e=this.countdown,e-=86400*(t=Math.floor(e/86400)),e-=3600*(i=Math.floor(e/3600)),e-=60*(s=Math.floor(e/60)),this.time={days:this.split(t),hours:this.split(i),minutes:this.split(s),seconds:this.split(e)})}},template:'<div class="flipclock"> <div v-for="tracker in trackers"> <span class="flipclock__slot">{{titles[tracker]}}</span> <div v-if="time"> <vue-blocks-flipclock-tracker :time="time[tracker][i]" v-ref:trackers v-for="i in numbers"></vue-blocks-flipclock-tracker> <div class="flipclock-dots"><em></em><em></em></div> </div> </div> </div>'}),window.$app.defineComponent("blocks","vue-blocks-flipclock-tracker",{props:["time"],data:function(){return{current:null,previous:null}},created:function(){this.update(this.time)},watch:{time:function(e){void 0!==e&&this.update(e)}},methods:{update:function(e){var t=e;(t=t<0?0:t)===this.current&&null!==this.current||(this.previous=null===this.previous?t:this.current,this.current=t,this.$el&&(this.$el.classList.remove("flip"),this.$el.offsetWidth,this.$el.classList.add("flip")))}},template:'<span class="flipclock__piece"> <span class="flipclock__card flip-card"> <b class="flip-card__top">{{current}}</b> <b class="flip-card__bottom" :data-value="current"></b> <b class="flip-card__back" :data-value="previous"></b> <b class="flip-card__back-bottom" :data-value="previous"></b> </span> </span>'}),window.$app.defineComponent("auth","vue-auth-attach",{data:function(){return{state:""}},template:'<section class="hero is-fullheight is-fullscreen is-auth-hero has-background-white"> <div class="signin-header"> <a :href="\'{1}/\'|format(window.base_path_prefix)" class="signin-header-logo"></a> <router-link class="button" :to="{name: \'signin\'}">{{\'Авторизация\'|gettext}}</router-link> </div> <div class="hero-body has-p-1"> <div style="width: 480px;margin: 0 auto" class="has-p-3"> <div> <h1 class="has-mb-6 has-xs-mb-4 has-text-centered" style="font-size: 2.5rem;font-weight: bold;letter-spacing:-.06rem;">{{\'Подключить Instagram профиль\'|gettext}}</h1> <div class="message is-success"> <div class="message-body"> {{\'Для подключения Instagram профиля вам необходимо авторизоваться через Instagram\'|gettext}} </div> </div> <a type="button"class="button is-medium is-fullwidth is-light" :class="{\'disabled\': state== \'logging\', \'is-loading\': state== \'instagram\'}" :href="\'{1}/login/instagrambasic/\'|format(window.base_path_prefix)" @click="state = \'instagram\'"><i class="fab fa-ig"></i><span class="is-hidden-mobile has-ml-1">{{\'Подключить через Instagram\'|gettext}}</span></a> </div> <div class="row has-mt-3"> <div class="col-xs-12 col-sm"><div class="has-text-left has-text-grey has-text-centered-mobile has-xs-mb-2">{{\'Вернуться на\'|gettext}} <router-link :to="{name: \'signin\'}">{{\'страницу входа\'|gettext}}</router-link></div></div> <div class="col-xs col-sm-shrink has-text-right has-text-centered-mobile"> <vue-component-locale-change></vue-component-locale-change> </div> </div> </div> </div> </section>'}),window.$app.defineComponent("auth","vue-auth-change",{data:function(){return{avatar:"",isFetching:!0,isLoading:!1,allow:!1,values:{email:"",code:"",state:"",password1:"",password2:""}}},props:["username"],mixins:[FormModel],computed:{avatarBg:function(){return this.isFetching?null:"background-image: url("+this.avatar+");background-size:100%"}},created:function(){var t=this,i=getSearchParams();this.$api.get("auth/avatar",{username:this.username}).then(function(e){"success"==e.result?(t.avatar=e.response.avatar,t.allow=e.response.allow,t.isFetching=!1,null!=i.email&&(t.values.email=i.email,t.values.code=i.code,t.values.state="sent",t.submit())):t.$router.replace({name:"restore"})})},methods:{submit:function(){var t=this;this.isLoading=!0,this.$api.post("auth/emailchange",Object.assign({username:this.username},this.values),this).then(function(e){if(t.isLoading=!1,"success"==e.result){if(null!=e.response.account)return t.$auth.refresh(e.response.account,function(){t.$router.replace({name:"pages",params:{page_id:t.$account.page_id}})});t.values.state=e.response.values.state}})}},template:'<section class="hero is-fullheight is-fullscreen is-auth-hero has-background-white"> <div class="signin-header"> <a :href="\'{1}/\'|format(window.base_path_prefix)" class="signin-header-logo"></a> <router-link class="button" :to="{name: \'signin\'}">{{\'Авторизация\'|gettext}}</router-link> </div> <div class="hero-body has-p-1"> <div style="max-width: 450px;width: 450px;margin: 0 auto" class="has-p-3"> <div> <div class="has-text-centered"> <div class="profile-avatar profile-avatar-65 has-mb-2" :class="{skeleton: isFetching}" :style="avatarBg"></div> </div> <h2 class="has-mb-4 has-text-centered" style="font-weight: bold"><div :class="{skeleton: isFetching, \'has-mb-1\': isFetching}">{{\'Смена электронной почты для {1}\'|gettext|format(username)}}</span></h2> <div v-if="allow"> <h4 class="has-text-grey has-text-centered has-mb-3" v-if="values.state == \'\'">{{\'Какой у вас email?\'|gettext}}</h4> <h4 class="has-text-grey has-text-centered has-mb-3" v-if="values.state == \'sent\'">{{\'Мы отправили его на {1}\'|gettext|format(values.email)}}</h4> <h4 class="has-text-grey has-text-centered has-mb-3" v-if="values.state == \'pass\'">{{\'Придумайте пароль\'|gettext}}</h4> <form @submit.prevent="submit"> <b-field :class="{\'has-error\': errors.email}" :message="errors.email" v-if="values.state == \'\'"> <input type="email" v-model="values.email" class="input is-medium" :placeholder="\'Электронная почта\'|gettext" v-focus :disabled="values.state == \'sent\' || values.state == \'pass\' || isLoading" required></input> </b-field> <div :class="{\'has-error\': errors.code}" class="has-mb-3" v-if="values.state == \'sent\'"> <div class="row has-mb-1" v-if="values.state == \'sent\' || values.state == \'pass\'"> <div class="col-xs"><label class="label">{{\'Проверочный код\'|gettext}}</label></div> <div class="col-xs has-text-right"><a @click="values.state = \'\'" v-if="values.state != \'pass\'">{{\'Другая почта\'|gettext}}</a></div> </div> <b-field v-if="values.state == \'sent\' || values.state == \'pass\'" :message="errors.code"> <vue-component-verifyfield v-model="values.code" type="tel"></vue-component-verifyfield> </b-field> </div> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="values.state == \'pass\'"> <b-input :placeholder="\'Новый пароль\'|gettext" type="password" minlength="6" maxlength="40" v-model="values.password1" size="is-medium" :disabled="isLoading" ref="password" v-focus password-reveal icon-pack="fa" :has-counter="false"></b-input> </b-field> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="values.state == \'pass\'"> <b-input :placeholder="\'Повторите новый пароль\'|gettext" type="password" minlength="6" maxlength="40" v-model="values.password2" size="is-medium" :disabled="isLoading" password-reveal icon-pack="fa" :has-counter="false"></b-input> </b-field> <button class="button is-medium is-fullwidth is-primary has-mb-3" :class="{\'is-loading\': isLoading, disabled: isFetching}" :disabled="isFetching">{{\'Продолжить\'|gettext}}</button> </form> </div> <div v-else> <div style="height: 4em;position: relative" v-if="isFetching"> <div class="loading-overlay is-active"><div class="loading-icon"></div></div> </div> <div v-else> <div class="message is-success"> <div class="message-body"> {{\'Для смены электронной почты вам необходимо подтвердить ваш аккуант. Вы можете сделать это через Instagram профиль.\'|gettext|format(username)}} </div> </div> <a class="button is-medium is-fullwidth is-light has-mb-3" :class="{\'is-loading\': isLoading, disabled: isFetching}" :disabled="isFetching" :href="\'{1}/login/instagrambasic/?method=attach&emailchange=1\'|format(window.base_path_prefix, username)" @click="isLoading = true"><i class="fab fa-ig"></i><span class="has-ml-1">{{\'Подтвердить через Instagram\'|gettext}}</span></a> </div> </div> </div> <div class="row has-mt-3"> <div class="col-xs-12 col-sm"><div class="has-text-left has-text-grey has-text-centered-mobile has-xs-mb-2">{{\'Вернуться на\'|gettext}} <router-link :to="{name: \'signin\'}">{{\'страницу входа\'|gettext}}</router-link></div></div> <div class="col-xs col-sm-shrink has-text-right has-text-centered-mobile"> <vue-component-locale-change></vue-component-locale-change> </div> </div> </div> </div> </section>'}),window.$app.defineComponent("auth","vue-auth-email",{data:function(){return{isLoading:!1,state:"",email:"",code:""}},mixins:[FormModel],computed:{terms:function(){return this.$gettext("Я подтверждаю что ознакомлен и согласен с условиями <a %s>договора-оферты</a>").replace("%s",'href="'+window.base_path_prefix+'/about/terms.html" target="_blank"')}},created:function(){this.toPage(),null==this.profile_id&&window.$events.one("account:refresh",this.toPage)},methods:{submit:function(){var t=this;switch(this.isLoading=!0,this.state){case"":this.$api.post("auth/email/set",{email:this.email},this).then(function(e){switch(e.result){case"found":t.state="found";break;case"success":return t.updateProfile(e.response.account)}t.isLoading=!1});break;case"found":this.$api.post("auth/email/send",{email:this.email},this).then(function(e){"success"==e.result&&(t.state="sent",t.$nextTick(function(){t.$refs.verify_input.focus()})),t.isLoading=!1});break;case"sent":this.$api.post("auth/email/check",{email:this.email,code:this.code},this).then(function(e){"success"==e.result?t.updateProfile(e.response.account):t.isLoading=!1})}},toPage:function(){this.$account.profile_id&&this.$account.user.email&&this.$router.replace({name:"pages",params:{page_id:this.$account.page_id}})},updateProfile:function(e){var t=this;this.$auth.refresh(e,function(){t.toPage()})}},template:'<section class="hero is-fullheight is-fullscreen is-auth-hero"> <div class="hero-body has-p-1"> <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-lg-4 col-lg-offset-4 has-text-centered"> <a :href="\'{1}/\'|format(window.base_path_prefix)"><img src="/s/i/logo/title-logo-grey.png?2" style="width:150px;height:36px;margin-bottom: 2rem" alt="Taplink"></a> <div style="background:#fff;background: var(--background-white-color);border-radius: 4px;border-top: 1px solid #0383de;border-color: var(--link-color);"> <div class="has-p-3"> <h4 class="has-mb-3">{{\'Пожалуйста укажите вашу электронную почту\'|gettext}}</h4> <div class="message is-warning" v-if="state == \'found\'"> <div class="message-body"> {{\'Ранее вы уже создали аккаунт с данной электронной почтой. Подтвердите владение аккаунтом введя проверочный код, отправленный на вашу почту\'|gettext}} </div> </div> <div class="message is-success" v-if="state == \'sent\'"> <div class="message-body"> {{\'Мы отправили проверочный код на вашу электронную почту. Введите его и нажмите кнопку "Продолжить"\'|gettext}} </div> </div> <form @submit.prevent="submit"> <b-field :class="{\'has-error\': errors.email}" :message="errors.email"> <input :placeholder="\'Электронная почта\'|gettext" type="email" v-model="email" class="input is-medium" :class="{\'disabled\': isLoading || state != \'\'}" autofocus="on"></input> </b-field> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="state == \'sent\'"> <input :placeholder="\'Проверочный код\'|gettext" type="text" maxlength="6" v-model="code" class="input is-medium" :class="{\'disabled\': isLoading}" autofocus="on" ref="verify_input"></input> </b-field> <div class="row row-small" v-if="state == \'found\' || state== \'sent\'"> <div class="col-xs-12 col-sm-5 last-xs"> <button type="button" class="button is-medium is-fullwidth is-text has-text-no-underline" :class="{\'disabled\': isLoading}" @click="state = \'\'">{{\'Другая почта\'|gettext}}</button> </div> <div class="col-xs-12 col-sm-7 last-sm has-xs-mb-2"> <button type="submit" class="button is-medium is-primary is-fullwidth" :class="{\'is-loading\': isLoading}"><span v-if="state == \'found\'">{{\'Отправить проверочный код\'|gettext}}</span><span v-else>{{\'Продолжить\'|gettext}}</span></button> </div> </div> <button v-else type="submit" class="button is-primary is-medium is-fullwidth" :class="{\'is-loading\': isLoading}">{{\'Продолжить\'|gettext}}</button> </form> <div class="has-text-grey-light has-mt-3" v-if="state == \'\'"> <span v-html="terms"></span> </div> </div> </div> <div class="level has-mt-2"> <div class="level-left"></div> <div class="level-right"> <vue-component-locale-change></vue-component-locale-change> </div> </div> </div> </div> </section>'}),window.$app.defineComponent("auth","vue-auth-restore",{data:function(){return{isLoading:!1,withCaptcha:!1,sitekey:null,username:"",email:"",code:"",password1:"",password2:"",state:0,message:""}},mixins:[FormModel],components:{VueRecaptcha:VueRecaptcha},created:function(){var e=getSearchParams();null!=e.email&&(this.email=e.email,this.code=e.code,this.state=3,this.submit())},methods:{doRecaptcha:function(){var e=this;this.withCaptcha=!0,this.isFetching=!0,$mx.lazy("https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit",function(){setTimeout(function(){e.$refs.recaptcha.reset(),e.$refs.recaptcha.execute()},250)})},submit:function(){this.internalSubmit(void 0)},internalSubmit:function(e){var t=this;this.isLoading=!0,this.$api.post("auth/email/restore",{username:this.username,email:this.email,code:this.code,password1:this.password1,password2:this.password2,state:this.state,token:e},this).then(function(e){if("success"==e.result)switch(null!=e.response.values&&(t.state=e.response.values.state,t.email=e.response.values.email,t.message=e.response.values.message),t.state){case 1:t.message||t.$router.replace({name:"change",params:{username:t.username.trim().toLowerCase()}});break;case 2:t.state=3;break;case 3:t.state=4;break;case 4:return t.$auth.refresh(e.response.account,function(){t.$router.replace({name:"pages",params:{page_id:t.$account.page_id}})})}else"challenge"==e.result&&(t.sitekey=e.response.sitekey,t.doRecaptcha());t.isLoading=!1})}},template:'<section class="hero is-fullheight is-fullscreen is-auth-hero has-background-white"> <vue-recaptcha ref="recaptcha" size="invisible" :sitekey="sitekey" badge="bottomleft" @verify="internalSubmit" @error="" v-if="withCaptcha"/> <div class="signin-header"> <a :href="\'{1}/\'|format(window.base_path_prefix)" class="signin-header-logo"></a> <router-link class="button" :to="{name: \'signin\'}">{{\'Авторизация\'|gettext}}</router-link> </div> <div class="hero-body has-p-1"> <div style="width: 480px;margin: 0 auto" class="has-p-3"> <div> <h2 class="has-mb-3 has-text-centered" style="font-weight: bold" v-if="state == 0">{{\'Восстановление доступа\'|gettext}}</h2> <h2 class="has-mb-3 has-text-centered" style="font-weight: bold" v-if="state == 3">{{\'Введите проверочный код\'|gettext}}</h2> <h2 class="has-mb-3 has-text-centered" style="font-weight: bold" v-if="state == 1">{{\'Какой у вас email?\'|gettext}}</h2> <h2 class="has-mb-3 has-text-centered" style="font-weight: bold" v-if="state == 4">{{\'Придумайте пароль\'|gettext}}</h2> <div class="message is-success" v-if="state == 1"> <div class="message-body" v-html="message"></div> </div> <h4 class="has-text-grey has-text-centered has-mb-4" v-if="state == 0">{{\'Укажите email или имя профиля Instagram\'|gettext}}</h4> <h4 class="has-text-grey has-text-centered has-mb-4" v-if="state == 3">{{\'Мы отправили его на {1}\'|gettext|format(email)}}</h4> <form @submit.prevent="submit" class="has-mb-2"> <b-field :class="{\'has-error\': errors.username}" :message="errors.username" v-if="state == 0"> <input type="text" v-model="username" class="input is-medium" :disabled="isLoading" v-focus autocapitalize="off"></input> </b-field> <div class="field" :class="{\'has-error\': errors.email}" v-if="state == 1"> <div class="row has-mb-1"> <div class="col-xs"><label class="label">{{\'Электронная почта\'|gettext}}</label></div> <div class="col-xs has-text-right" v-if="state == 1"><router-link :to="{name: \'change\', params: {username: username.trim().toLowerCase()}}">{{\'Сменить почту\'|gettext}}</router-link></div> </div> <input type="text" v-model="email" class="input is-medium" :disabled="isLoading || state> 1" v-focus autocapitalize="off"></input> <p class="help" v-if="errors.email">{{errors.email}}</p> </div> <div :class="{\'has-error\': errors.code}" class="has-mb-3" v-if="state == 3"> <div class="row has-mb-1"> <div class="col-xs"><label class="label">{{\'Проверочный код\'|gettext}}</label></div> <div class="col-xs has-text-right"><a @click="state = 0">{{\'Другая почта\'|gettext}}</a></div> </div> <b-field :message="errors.code"> <vue-component-verifyfield v-model="code" :disabled="isLoading || state> 3"></vue-component-verifyfield> </b-field> </div> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="state> 3"> <b-input :placeholder="\'Новый пароль\'|gettext" type="password" minlength="6" maxlength="40" v-model="password1" size="is-medium" :disabled="isLoading" ref="password" v-focus password-reveal icon-pack="fa" :has-counter="false"></b-input> </b-field> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="state> 3"> <b-input :placeholder="\'Повторите новый пароль\'|gettext" type="password" minlength="6" maxlength="40" v-model="password2" size="is-medium" :disabled="isLoading" password-reveal icon-pack="fa" :has-counter="false"></b-input> </b-field> <button type="submit" class="button is-primary is-medium is-fullwidth" :class="{\'is-loading\': isLoading}">{{\'Продолжить\'|gettext}}</button> </form> </div> <div class="row has-mt-3"> <div class="col-xs-12 col-sm"><div class="has-text-left has-text-grey has-text-centered-mobile has-xs-mb-2">{{\'Вернуться на\'|gettext}} <router-link :to="{name: \'signin\'}">{{\'страницу входа\'|gettext}}</router-link></div></div> <div class="col-xs col-sm-shrink has-text-right has-text-centered-mobile"> <vue-component-locale-change></vue-component-locale-change> </div> </div> </div> </div> </section>'}),window.$app.defineComponent("auth","vue-auth-signin",{data:function(){return{email:"",password:"",password1:"",password2:"",state:"",confirm:!0,code:"",alert:!1,isFetching:!1,sitekey:null,fingerprint:null,withCaptcha:!1,captchaToken:"",confirmText:"",twofactor:"",params:{}}},components:{VueRecaptcha:VueRecaptcha},mixins:[FormModel],props:["tab"],created:function(){this.toPage(),null==this.$account.profile_id&&window.$events.one("account:refresh",this.toPage),"signup"==this.tab&&this.withCaptcha&&this.initReCaptcha()},mounted:function(){this.params=getSearchParams(),null!=this.params.code&&(this.email=this.params.email,this.code=this.params.code,this.state="sent")},watch:{tab:function(e){this.state="","signup"==e&&this.withCaptcha&&this.initReCaptcha()}},computed:{terms:function(){return this.$gettext("Я подтверждаю что ознакомлен и согласен с условиями <a %s>договора-оферты</a>").replace("%s",'href="'+window.base_path_prefix+'/about/terms.html" target="_blank"')},localeRu:function(){return"ru"==window.i18n.locale}},methods:{initReCaptcha:function(){$mx.lazy("https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit")},changeTab:function(e){this.tab=e,this.state="",this.code="",this.alert=!1},chooseState:function(e){var t=this;this.state=e,setTimeout(function(){t.state=""},1250)},toPage:function(){this.$account.profile_id&&(this.$account.user.email?null!=this.params.comeback&&this.params.comeback?document.location=this.params.comeback:this.$router.replace({name:"pages",params:{page_id:this.$account.page_id}}):this.$router.replace({name:"email"}))},signup:function(){var e=this;this.withCaptcha?$mx.lazy("https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit",function(){e.isFetching=!0,e.$nextTick(function(){e.$refs.recaptcha.reset(),e.$refs.recaptcha.execute()})}):this.internalSignup(null)},doRecaptcha:function(){var e=this;this.withCaptcha=!0,this.isFetching=!0,$mx.lazy("https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit",function(){setTimeout(function(){e.$refs.recaptcha.reset(),e.$refs.recaptcha.execute()},250)})},verifyRecaptcha:function(e){"signin"==this.state?this.internalSignin(e):this.internalSignup(e)},internalSignup:function(e){var i=this;this.isFetching=!0,this.$api.post("auth/signup",{email:this.email,password1:this.password1,password2:this.password2,code:this.code,state:this.state,token:e,hash:this.fingerprint},this).then(function(e){var t;i.isFetching=!1,"success"==e.result&&(null!=(t=e.response).account?(i.$auth.session=t.session,i.$auth.refresh(t.account),i.toPage()):"confirm"==t.values.state?(i.state=t.values.state,i.confirmText=t.confirm):"captcha"==t.values.state?(i.sitekey=t.values.sitekey,i.doRecaptcha()):i.state=t.values.state)}).catch(function(e){i.isFetching=!1})},login:function(){this.internalSignin(null)},internalSignin:function(t){var i=this;this.state="signin",this.$api.post("auth/login",{email:this.email,password:this.password,token:t,twofactor:this.twofactor},this).then(function(e){"success"==e.result?(i.$auth.session=e.response.session,i.$auth.refresh(e.response.account),i.toPage()):"challenge"==e.result?(i.sitekey=e.response.sitekey,i.doRecaptcha()):"twofactor"==e.result?(i.state="",i.$challenge({account_token:e.response.account_token}).then(function(e){i.twofactor=e,i.internalSignin(t)})):i.state=""}).catch(function(){i.state=""})}},template:'<section class="hero is-fullheight is-fullscreen is-auth-hero has-background-white"> <vue-recaptcha ref="recaptcha" size="invisible" :sitekey="sitekey" badge="bottomleft" @verify="verifyRecaptcha" @error="" v-if="withCaptcha"/> <div class="signin-header"> <a :href="\'{1}/\'|format(window.base_path_prefix)" class="signin-header-logo"></a> <router-link class="button" :to="{name: \'signup\'}" v-if="tab == \'signin\'">{{\'Регистрация\'|gettext}}</router-link> <router-link class="button" :to="{name: \'signin\'}" v-if="tab == \'signup\'">{{\'Авторизация\'|gettext}}</router-link> </div> <div class="hero-body has-p-1"> <div style="width: 480px;margin: 0 auto" class="has-p-3"> <div v-if="tab == \'signin\'"> <h1 class="has-mb-6 has-xs-mb-4 has-text-centered" style="font-size: 2.5rem;font-weight: bold;letter-spacing:-.06rem;">{{\'Авторизация\'|gettext}}</h1> </div> <div v-if="tab == \'signup\'"> <h1 class="has-mb-6 has-xs-mb-4 has-text-centered" style="font-size: 2.5rem;font-weight: bold;letter-spacing:-.06rem;" v-if="state == \'\' || state== \'confirm\'">{{\'Регистрация\'|gettext}}</h1> <h2 class="has-mb-4 has-text-centered" v-if="state ==\'sent\'" style="font-weight: bold">{{\'Введите проверочный код\'|gettext}}</h2> <h2 class="has-mb-4 has-text-centered" style="font-weight: bold" v-if="state == \'pass\'">{{\'Придумайте пароль\'|gettext}}</h2> </div> <div v-if="!alert"> <div class="row row-small"> <div class="col-xs"> <a type="button" class="button is-medium is-fullwidth is-light" :class="{\'disabled\': state && state != \'facebook\', \'is-loading\': state== \'facebook\'}" :href="\'{1}/login/facebook/\'|format(window.base_path_prefix)" @click="chooseState(\'facebook\')"><i class="fab fa-fb-o"></i></a> </div> <div class="col-xs"> <a type="button" class="button is-medium is-fullwidth is-light" :class="{\'disabled\': state && state != \'google\', \'is-loading\': state== \'google\'}" :href="\'{1}/login/google/\'|format(window.base_path_prefix)" @click="chooseState(\'google\')"><i class="fab fa-g"></i></a> </div> <div class="col-xs" v-if="localeRu"> <a type="button" class="button is-medium is-fullwidth is-light" :class="{\'disabled\': state && state != \'vkontakte\', \'is-loading\': state== \'vkontakte\'}" :href="\'{1}/login/vkontakte/\'|format(window.base_path_prefix)" @click="chooseState(\'vkontakte\')"><i class="fab fa-vk" style="font-size: 1.9rem"></i></a> </div> </div> <div class="hr has-mb-5 has-mt-6 has-xs-mt-4 has-xs-mb-3 has-text-centered" :data-title="\'Или\'|gettext"></div> <form @submit.prevent="login" v-if="tab == \'signin\'"> <b-field :label="\'Электронная почта\'|gettext"> <b-input type="email" v-model="email" size="is-medium" :class="{\'disabled\': state != \'\'}" autofocus="on" tabindex="1"></b-input> </b-field> <div class="has-mb-4"> <div class="row has-mb-1"> <div class="col-xs"><label class="label">{{\'Пароль\'|gettext}}</label></div> <div class="col-xs has-text-right"><router-link :to="{name: \'restore\'}" :class="{\'disabled\': state != \'\'}">{{\'Восстановить доступ\'|gettext}}</router-link></div> </div> <b-input type="password" v-model="password" size="is-medium" :class="{\'disabled\': state != \'\'}" tabindex="2" password-reveal icon-pack="fa" :has-counter="false"></b-input> </div> <button type="submit" class="button is-primary is-medium is-fullwidth" :class="{\'is-loading\': state== \'signin\', \'disabled\': state== \'instagram\'}">{{\'Войти\'|gettext}}</button> </form> <div v-if="tab == \'signup\'"> <form @submit.prevent="signup"> <h4 class="has-text-grey has-text-centered has-mb-4" v-if="state == \'sent\' || state== \'check\'">{{\'Мы отправили его на {1}\'|gettext|format(email)}}</h4> <b-field :label="\'Какой у вас email?\'|gettext" :class="{\'has-error\': errors.email}" :message="errors.email" v-if="state == \'\' || state== \'confirm\'"> <input type="email" v-model="email" :placeholder="\'Электронная почта\'|gettext" class="input is-medium" :disabled="isFetching || state== \'confirm\'" autofocus="on"></input> </b-field> <div v-if="state == \'confirm\'"> <div class="message is-danger has-mb-3"> <div class="message-body has-text-danger"> {{confirmText}}. {{\'Вероятно, вы допустили ошибку при вводе email.\'|gettext}} </div> </div> </div> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="state == \'sent\' || state== \'check\'"> <vue-component-verifyfield v-model="code" :disabled="state == \'check\' || isFetching" @keydown="errors.code = null" type="tel"></vue-component-verifyfield> </b-field> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="state == \'pass\'"> <b-input :placeholder="\'Пароль\'|gettext" type="password" minlength="6" maxlength="40" v-model="password1" size="is-medium" :disabled="isFetching" v-focus password-reveal icon-pack="fa" :has-counter="false" v-focus></b-input> </b-field> <b-field :class="{\'has-error\': errors.code}" :message="errors.code" v-if="state == \'pass\'"> <b-input :placeholder="\'Повторите пароль\'|gettext" type="password" minlength="6" maxlength="40" v-model="password2" size="is-medium" :disabled="isFetching" password-reveal icon-pack="fa" :has-counter="false"></b-input> </b-field> <div class="field" v-if="state != \'sent\' && state== \'pass\'"> <label class="checkbox"><input type="checkbox" v-model="confirm" :disabled="isFetching"><span v-html="terms"></span></label> </div> <button type="submit" class="button is-primary is-medium is-fullwidth" :class="{\'is-loading\': isFetching, \'disabled\': state== \'instagram\'}" :disabled="!confirm" v-if="state != \'confirm\'">{{\'Продолжить\'|gettext}}</button> <div v-else class="row row-small"> <div class="col-xs-12 col-sm-6"> <button type="submit" class="button is-primary is-medium is-fullwidth" :class="{\'is-loading\': isFetching}">{{\'Все верно\'|gettext}}</button> </div> <div class="col-xs-12 col-sm-6"> <button type="button" @click="state = \'\'" class="button is-dark is-medium is-fullwidth" :disabled="isFetching">{{\'Изменить email\'|gettext}}</button> </div> </div> </form> </div> <div class="row has-mt-3"> <div class="col-xs is-hidden-mobile" v-if="tab == \'signin\'">{{\'Нет аккаунта?\'|gettext}} <router-link :to="{name: \'signup\'}">{{\'Регистрация\'|gettext}}</router-link></div> <div class="col-xs is-hidden-mobile" v-if="tab == \'signup\'">{{\'Есть аккаунт?\'|gettext}} <router-link :to="{name: \'signin\'}">{{\'Авторизация\'|gettext}}</router-link></div> <div class="col-xs col-sm-shrink has-text-centered"> <vue-component-locale-change></vue-component-locale-change> </div> </div> </div> </div> </div> </section>'}),window.$app.defineModule("auth",[]);
