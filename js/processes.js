var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function GuidedDraggingTool(){go.DraggingTool.call(this);var t=go.GraphObject.make,i={layerName:"Tool",isInDocumentBounds:!1},e={stroke:"gray",isGeometryPositioned:!0};this.guidelineHtop=t(go.Part,i,t(go.Shape,e,{geometryString:"M0 0 100 0"})),this.guidelineHbottom=t(go.Part,i,t(go.Shape,e,{geometryString:"M0 0 100 0"})),this.guidelineHcenter=t(go.Part,i,t(go.Shape,e,{geometryString:"M0 0 100 0"})),this.guidelineVleft=t(go.Part,i,t(go.Shape,e,{geometryString:"M0 0 0 100"})),this.guidelineVright=t(go.Part,i,t(go.Shape,e,{geometryString:"M0 0 0 100"})),this.guidelineVcenter=t(go.Part,i,t(go.Shape,e,{geometryString:"M0 0 0 100"})),this._guidelineSnapDistance=6,this._isGuidelineEnabled=!0,this._horizontalGuidelineColor="gray",this._verticalGuidelineColor="gray",this._centerGuidelineColor="gray",this._guidelineWidth=1,this._searchDistance=1e3,this._isGuidelineSnapEnabled=!0}!function(h){var t,s={};if(!h.document||void 0===h.document.createElement("canvas").getContext)throw h.console&&h.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Function.prototype.bind||(Function.prototype.bind=function(t){function i(){return r.apply(t,o.concat(n.call(arguments)))}function e(){}var n=Array.prototype.slice,o=n.call(arguments,1),r=this;return e.prototype=this.prototype,i.prototype=new e,i}),function(){for(var o=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!h.requestAnimationFrame;++i)h.requestAnimationFrame=h[t[i]+"RequestAnimationFrame"],h.cancelAnimationFrame=h[t[i]+"CancelAnimationFrame"]||h[t[i]+"CancelRequestAnimationFrame"];h.requestAnimationFrame||(h.requestAnimationFrame=function(t){var i=(new Date).getTime(),e=Math.max(8,16-(i-o)),n=h.setTimeout(function(){t(i+e)},e);return o=i+e,n}),h.cancelAnimationFrame||(h.cancelAnimationFrame=function(t){h.clearTimeout(t)})}(),s.Debug=null;var a,Nn={ed:1,Nc:2,Xc:4,Wc:8,Sm:void 0!==h.navigator&&0<h.navigator.userAgent.indexOf("534.30")&&0<h.navigator.userAgent.indexOf("Android"),qH:void 0!==h.navigator&&0<h.navigator.userAgent.indexOf("MSIE 10.0"),rH:void 0!==h.navigator&&0<h.navigator.userAgent.indexOf("Trident/7"),TJ:void 0!==h.navigator&&0<h.navigator.userAgent.indexOf("Edge/"),ak:void 0!==h.navigator&&void 0!==h.navigator.platform&&0<=h.navigator.platform.toUpperCase().indexOf("MAC"),fE:void 0!==h.navigator&&void 0!==h.navigator.platform&&null!==h.navigator.platform.match(/(iPhone|iPod|iPad)/i),yD:function(e,n,o){var r=-1;return function(){var t=this,i=arguments;-1!==r&&Nn.clearTimeout(r),r=Nn.setTimeout(function(){r=-1,o||e.apply(t,i)},n),o&&!r&&e.apply(t,i)}},setTimeout:function(t,i){return h.setTimeout(t,i)},clearTimeout:function(t){h.clearTimeout(t)},createElement:function(t){return h.document.createElement(t)},k:function(t){throw Error(t)},ka:function(t,i){var e="The object is frozen, so its properties cannot be set: "+t.toString();void 0!==i&&(e+="  to value: "+i),Nn.k(e)},A:function(t,i,e,n){t instanceof i||(e=Nn.getTypeName(e),void 0!==n&&(e+="."+n),Nn.Ed(t,i,e))},j:function(t,i,e,n){(void 0===t?"undefined":_typeof(t))!==i&&(e=Nn.getTypeName(e),void 0!==n&&(e+="."+n),Nn.Ed(t,i,e))},Ue:function(t,i,e){"number"==typeof t&&isFinite(t)||(i=Nn.getTypeName(i),void 0!==e&&(i+="."+e),Nn.k(i+" must be a real number type, and not NaN or Infinity: "+t))},pb:function(t,i,e,n){t instanceof l&&t.pe===i||(e=Nn.getTypeName(e),void 0!==n&&(e+="."+n),Nn.Ed(t,"a constant of class "+Nn.$e(i),e))},vJ:function(t,i){"string"==typeof t?cs(t)||Nn.k('Color "'+t+'" is not a valid color string for '+i):t instanceof fs||Nn.k("Value for "+i+" must be a color string or a Brush, not "+t)},Ed:function(t,i,e,n){i=Nn.getTypeName(i),e=Nn.getTypeName(e),void 0!==n&&(e+="."+n),"string"==typeof t?Nn.k(e+" value is not an instance of "+i+': "'+t+'"'):Nn.k(e+" value is not an instance of "+i+": "+t)},va:function(t,i,e,n){e=Nn.getTypeName(e),void 0!==n&&(e+="."+n),Nn.k(e+" is not in the range "+i+": "+t)},dd:function(t){Nn.k(Nn.$e(t)+" constructor cannot take any arguments.")},La:function(t){Nn.k("Collection was modified during iteration: "+t.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")},trace:function(t){h.console&&h.console.log(t)},Ta:function(t){return"object"===(void 0===t?"undefined":_typeof(t))&&null!==t},isArray:function(t){return Array.isArray(t)||t instanceof NodeList||t instanceof HTMLCollection},sH:function(t){return Array.isArray(t)},bz:function(t,i,e){Nn.isArray(t)||Nn.Ed(t,"Array or NodeList or HTMLCollection",i,e)},Va:function(t){return t.length},dl:function(t){return Array.prototype.slice.call(t)},Pa:function(t,i){return Array.isArray(t),t[i]},kD:function(t,i,e){Array.isArray(t)?t[i]=e:Nn.k("Cannot replace an object in an HTMLCollection or NodeList at "+i)},az:function(t,i){if(Array.isArray(t))return t.indexOf(i);for(var e=t.length,n=0;n<e;n++)if(t[n]===i)return n;return-1},Mi:function(t,i,e){Array.isArray(t)?i>=t.length?t.push(e):t.splice(i,0,e):Nn.k("Cannot insert an object into an HTMLCollection or NodeList: "+e+" at "+i)},Th:function(t,i){Array.isArray(t)?i>=t.length?t.pop():t.splice(i,1):Nn.k("Cannot remove an object from an HTMLCollection or NodeList at "+i)},Ax:[],L:function(){var t=Nn.Ax.pop();return void 0===t?new Se:t},Mb:function(t,i){var e=Nn.Ax.pop();return void 0===e?new Se(t,i):(e.x=t,e.y=i,e)},v:function(t){Nn.Ax.push(t)},LA:[],El:function(){var t=Nn.LA.pop();return void 0===t?new st:t},Zj:function(t){Nn.LA.push(t)},Bx:[],ag:function(){var t=Nn.Bx.pop();return void 0===t?new Ln:t},gk:function(t,i,e,n){var o=Nn.Bx.pop();return void 0===o?new Ln(t,i,e,n):(o.x=t,o.y=i,o.width=e,o.height=n,o)},Vb:function(t){Nn.Bx.push(t)},MA:[],ph:function(){var t=Nn.MA.pop();return void 0===t?new ft:t},Ze:function(t){Nn.MA.push(t)},Cx:null,s:function(){var t=Nn.Cx;return null!==t?(Nn.Cx=null,t):new yh},q:function(t){t.reset(),Nn.Cx=t},KA:[],jb:function(){var t=Nn.KA.pop();return void 0===t?[]:t},sa:function(t){t.length=0,Nn.KA.push(t)},fj:Object.freeze([]),Il:1,ec:function(t){t.__gohashid=Nn.Il++},ot:function(t){var i=t.__gohashid;return void 0===i&&(i=Nn.Il++,t.__gohashid=i),i},ld:function(t){return t.__gohashid},ea:function(t,i){i.Lx=t,s[t]=i},Ja:function(t,i){function e(){}e.prototype=i.prototype,t.prototype=new e,t.prototype.constructor=t},Uh:function(t){t.PF=!0},defineProperty:function(t,i,e,n,o){for(var r in Nn.j(t,"function","Util.defineProperty:classfunc"),Nn.j(i,"object","Util.defineProperty:propobj"),Nn.j(e,"function","Util.defineProperty:getter"),Nn.j(n,"function","Util.defineProperty:setter"),i){if(i=i[r],e={get:e,set:n,enumerable:!0},void 0!==o)for(var s in o)e[s]=o[s];Object.defineProperty(t.prototype,r,e),o=Object.getOwnPropertyDescriptor(t.prototype,r),i&&o&&Object.defineProperty(t.prototype,i,o);break}},XI:!1,u:function(t,i,e,n){for(var o in Nn.j(t,"function","Util.defineReadOnlyProperty:classfunc"),Nn.j(i,"object","Util.defineReadOnlyProperty:propobj"),Nn.j(e,"function","Util.defineReadOnlyProperty:getter"),i){var r=i[o];if(i={get:e,set:function(t){Nn.k('The property "'+r+'" is read-only and cannot be set to '+t)},enumerable:!0},void 0!==n)for(var s in n)i[s]=n[s];Object.defineProperty(t.prototype,o,i),n=Object.getOwnPropertyDescriptor(t.prototype,o),r&&n&&Object.defineProperty(t.prototype,r,n);break}},Nd:function(t,i){for(var e in i)i[e]=!0;t.prototype.LF=i},getTypeName:function(t){return void 0===t?"":"string"==typeof t?t:"function"==typeof t?Nn.$e(t):null===t?"*":""},$e:function(t){if("function"==typeof t){if(t.Lx)return t.Lx;if(t.name)return t.name;var i=t.toString(),e=i.indexOf("(");if(""!==(i=i.substring(9,e).trim()))return t.Lx=i}else if("object"===(void 0===t?"undefined":_typeof(t))&&t.constructor)return Nn.$e(t.constructor);return void 0===t?"undefined":_typeof(t)},p:function(t,i,e){Nn.j(t,"function","Util.defineEnumValue:classfunc"),Nn.j(i,"string","Util.defineEnumValue:name"),Nn.j(e,"number","Util.defineEnumValue:num"),e=new l(t,i,e),Object.freeze(e),t[i]=e;var n=t.ku;return n instanceof nt||(n=new nt("string",l),t.ku=n),n.add(i,e),e},qb:function(t,i){if(!t||!i)return null;var e=void 0;try{"function"==typeof i?e=i(t):"function"==typeof t.getAttribute?null===(e=t.getAttribute(i))&&(e=void 0):e=t[i]}catch(t){}return e},Ka:function(t,i,e){if(t&&i)try{"function"==typeof i?i(t,e):"function"==typeof t.setAttribute?t.setAttribute(i,e):t[i]=e}catch(t){}},Xt:function(t,i){Nn.j(t,"object","Setting properties requires Objects as arguments"),Nn.j(i,"object","Setting properties requires Objects as arguments");var e,n=t instanceof sa,o=t instanceof Oo;for(e in i){""===e&&Nn.k("Setting properties requires non-empty property names");var r,s,a=t,h=e;if(!n&&!o||0<(r=e.indexOf("."))&&(s=e.substring(0,r),n?a=t.be(s):null==(a=t[s])&&(a=t.Za[s]),Nn.Ta(a)?h=e.substr(r+1):Nn.k("Unable to find object named: "+s+" in "+t.toString()+" when trying to set property: "+e)),"_"!==h[0]&&!Nn.XD(a,h)){if(o&&"ModelChanged"===h){t.cG(i[h]);continue}if(o&&"Changed"===h){t.ym(i[h]);continue}if(o&&Nn.XD(t.Za,h))a=t.Za;else{if(o&&Kr(t,h)){t.Wy(h,i[h]);continue}if(t instanceof Ui&&"Changed"===h){t.ym(i[h]);continue}Nn.k('Trying to set undefined property "'+h+'" on object: '+a.toString())}}a[h]=i[e],"_"===h[0]&&a instanceof ks&&a.$F(h)}},XD:function(t,i){if(t.hasOwnProperty(i))return!0;for(var e=Object.getPrototypeOf(t);e&&e!==Function;){if(e.hasOwnProperty(i))return!0;var n=e.LF;if(n&&n[i])return!0;e=Object.getPrototypeOf(e)}return!1},fI:function(t){for(var i=[],e=0;e<256;e++)i[e]=e;for(var n=0,o=0,e=0;e<256;e++)n=(n+i[e]+119)%256,o=i[e],i[e]=i[n],i[n]=o;for(var n=e=0,r="",s=0;s<t.length;s++)n=(n+i[e=(e+1)%256])%256,o=i[e],i[e]=i[n],i[n]=o,r+=String.fromCharCode(t.charCodeAt(s)^i[(i[e]+i[n])%256]);return r},eH:function(t){for(var i=[],e=0;e<256;e++)i["0123456789abcdef".charAt(e>>4)+"0123456789abcdef".charAt(15&e)]=String.fromCharCode(e);t.length%2&&(t="0"+t);for(var n=[],o=0,e=0;e<t.length;e+=2)n[o++]=i[t.substr(e,2)];return""===(t=n.join(""))?"0":t},tg:function(t){return Nn.fI(Nn.eH(t))},Gl:null,adym:"7da71ca0ad381e90",vfo:"2be640fdb260",oG:"@COLOR1",pG:"@COLOR2"};function l(t,i,e){Nn.ec(this),this.ZA=t,this.Ob=i,this.UF=e}function u(){this.XA=[]}function y(){}function g(t){void 0===t&&(t=42),this.seed=t,this.wx=48271,this.ju=2147483647,this.JA=this.ju/this.wx,this.xF=this.ju%this.wx,this.wF=1/this.ju,this.random()}function i(){}Nn.Gl=function(){var t=h.document.createElement("canvas"),i=t.getContext("2d");i[Nn.tg("7ca11abfd022028846")]=Nn.tg("398c3597c01238");for(var e=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22422913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],n=1;n<5;n++)i[Nn.tg("7ca11abfd7330390")](Nn.tg(e[0]),0,0);for(i[Nn.tg("7ca11abfd022028846")]=Nn.tg("39f046ebb36e4b"),n=1;n<5;n++)i[Nn.tg("7ca11abfd7330390")](Nn.tg(e[0]),10,0);return 4===e.length&&"5"===e[0][0]&&"7"===e[3][0]||(Nn.p=function(t,i){var e=new l(t,i,2);Object.freeze(e),t[i]=e;var n=t.ku;return n instanceof nt||(n=new nt("string",l),t.ku=n),n.add(i,e),e}),t}(),Nn.ea("EnumValue",l),l.prototype.toString=function(){return Nn.$e(this.ZA)+"."+this.Ob},Nn.u(l,{pe:"classType"},function(){return this.ZA}),Nn.u(l,{name:"name"},function(){return this.Ob}),Nn.u(l,{value:"value"},function(){return this.UF}),l.findName=a=function(t,i){if(null==i||""===i)return null;Nn.j(t,"function","findName:classfunc"),Nn.j(i,"string","EnumValue.findName:name");var e=t.ku;return e instanceof nt?e.ja(i):null},u.prototype.toString=function(){return this.XA.join("")},u.prototype.add=function(t){""!==t&&this.XA.push(t)},g.prototype.random=function(){var t=this.seed%this.JA*this.wx-this.seed/this.JA*this.xF;return this.seed=0<t?t:t+this.ju,this.seed*this.wF},Nn.u(i,{i:"iterator"},function(){return this}),i.prototype.reset=i.prototype.reset=function(){},i.prototype.next=i.prototype.hasNext=i.prototype.next=function(){return!1},i.prototype.first=i.prototype.first=function(){return null},i.prototype.any=function(){return!1},i.prototype.all=function(){return!0},i.prototype.each=function(){return this},i.prototype.map=function(){return this},i.prototype.filter=function(){return this},i.prototype.concat=function(t){return t.i},Nn.u(i,{count:"count"},function(){return 0}),i.prototype.Cf=function(){},i.prototype.toString=function(){return"EmptyIterator"};var v,m,f,Pe,c,Te,d,P,p,T,b,jn,x,S,w,C,k,M,N,j,e,n,o,r,D,L,A,F,z,B,O,E,q,I,G,R,V,H,K,U=new i;function J(t){this.key=-1,this.value=t}function Y(t,i){this.Gk=t,this.Hk=i,this.lu=!1}function W(t){this.tc=t,this.Gh=null,this.reset()}function X(t){this.tc=t,this.reset()}function Dn(t){Nn.ec(this),this.D=!1,this.n=[],this.F=0,(this.uj=this.Xb=null)==t?this.ia=null:"string"==typeof t?"object"===t||"string"===t||"number"===t||"boolean"===t||"function"===t?this.ia=t:Nn.va(t,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"==typeof t?this.ia=t===Object?"object":t===String?"string":t===Number?"number":t===Boolean?"boolean":t===Function?"function":t:Nn.va(t,"null, a primitive type name, or a class type","List constructor: type")}function Z(t){this.Ih=t,this.reset()}function Q(t){Nn.ec(this),this.D=!1,null==t?this.ia=null:"string"==typeof t?"object"===t||"string"===t||"number"===t?this.ia=t:Nn.va(t,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"==typeof t?this.ia=t===Object?"object":t===String?"string":t===Number?"number":t:Nn.va(t,"null, a primitive type name, or a class type","Set constructor: type"),this.hd={},this.gd=0,this.Xb=null,this.F=0,this.Dh=this.Da=null}function $(t){this.Ga=t,this.reset()}function _(t){Nn.ec(this),this.D=!0,this.Ga=t}function tt(t){this.Ga=t,this.reset()}function it(t,i){this.key=t,this.value=i,this.oo=this.Ua=null}function et(t){this.Ga=t,this.reset()}function nt(t,i){Nn.ec(this),this.D=!1,null==t?this.ui=null:"string"==typeof t?"object"===t||"string"===t||"number"===t?this.ui=t:Nn.va(t,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"==typeof t?this.ui=t===Object?"object":t===String?"string":t===Number?"number":t:Nn.va(t,"null, a primitive type name, or a class type","Map constructor: keytype"),null==i?this.Hs=null:"string"==typeof i?"object"===i||"string"===i||"boolean"===i||"number"===i||"function"===i?this.Hs=i:Nn.va(i,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"==typeof i?this.Hs=i===Object?"object":i===String?"string":i===Number?"number":i===Boolean?"boolean":i===Function?"function":i:Nn.va(i,"null, a primitive type name, or a class type","Map constructor: valtype"),this.hd={},this.gd=0,this.vj=this.Xb=null,this.F=0,this.Dh=this.Da=null}function Se(t,i){void 0===t?this.y=this.x=0:(this.x=t,this.y=i),this.D=!1}function ot(t,i){if(0===t)return 0<i?90:i<0?270:0;if(0===i)return 0<t?0:180;if(isNaN(t)||isNaN(i))return 0;var e=180*Math.atan(Math.abs(i/t))/Math.PI;return t<0?e=i<0?e+180:180-e:i<0&&(e=360-e),e}function rt(t,i){return i.Wh(t),t}function st(t,i){void 0===t?this.height=this.width=0:(this.width=t,this.height=i),this.D=!1}function Ln(t,i,e,n){void 0===t?this.height=this.width=this.y=this.x=0:t instanceof Se?i instanceof Se?(this.x=Math.min(t.x,i.x),this.y=Math.min(t.y,i.y),this.width=Math.abs(t.x-i.x),this.height=Math.abs(t.y-i.y)):i instanceof st?(this.x=t.x,this.y=t.y,this.width=i.width,this.height=i.height):Nn.k("Incorrect arguments supplied to Rect constructor"):(this.x=t,this.y=i,this.width=e,this.height=n),this.D=!1}function An(t,i,e){t.width=i,t.height=e}function at(t,i,e,n,o){t.Cb();var r=t.width;return e+o<=-r?(t.x+=r/2,t.width=0):(t.x-=o,t.width+=e+o),i+n<=-(e=t.height)?(t.y+=e/2,t.height=0):(t.y-=i,t.height+=i+n),t}function ht(t,i,e,n,o){t.Cb();var r=Math.max(t.x,i),s=Math.max(t.y,e);return i=Math.min(t.x+t.width,i+n),e=Math.min(t.y+t.height,e+o),t.x=r,t.y=s,t.width=Math.max(0,i-r),t.height=Math.max(0,e-s),t}function lt(t,i){var e=t.width,n=i.width+10+10,o=t.x,r=i.x-10;return!(n+r<o||e+o<r)&&(e=t.height,n=i.height+10+10,o=t.y,!(n+(r=i.y-10)<o||e+o<r))}function Fn(t,i,e,n,o){var r=Math.min(t.x,i),s=Math.min(t.y,e);return i=Math.max(t.x+t.width,i+n),e=Math.max(t.y+t.height,e+o),t.x=r,t.y=s,t.width=i-r,t.height=e-s,t}function ut(t,i,e,n){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===i?this.left=this.bottom=this.right=this.top=t:void 0===e?(n=i,this.top=t,this.right=i,this.bottom=t,this.left=n):void 0!==n?(this.top=t,this.right=i,this.bottom=e,this.left=n):Nn.k("Invalid arguments to Margin constructor"),this.D=!1}function ft(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}function ct(t,i,e,n){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=i,this.offsetX=e,this.offsetY=n),this.D=!1}function dt(t,i){return t.x=NaN,t.y=NaN,t.offsetX=i,t}function pt(){this.ef=[1,0,0,1,0,0]}function yt(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.pD=[],this.pattern=null}function gt(t,i,e){this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.Vm=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.pw=!1,this.og=this.os=this.ns=0,this.document=i||document,this.GD=e,this.Mw=null,this.path=[],this.Pi=new pt,this.stack=[],this.tf=[],this.vw=t,this.ZH="http://www.w3.org/2000/svg",this.width=this.vw.width,this.height=this.vw.height,this.Cl=vt(this,"svg",{width:this.width+"px",height:this.height+"px",QK:"0 0 "+this.vw.width+" "+this.vw.height}),this.Cl.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Cl.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),kt(this,1,0,0,1,0,0),(i=vt(this,"clipPath",{id:"mainClip"+(t=Nn.Il++)})).appendChild(vt(this,"rect",{x:0,y:0,width:this.width,height:this.height})),this.Cl.appendChild(i),this.tf[0].setAttributeNS(null,"clip-path","url(#mainClip"+t+")")}function vt(t,i,e,n){if(t=t.document.createElementNS(t.ZH,i),Nn.Ta(e))for(var o in e)t.setAttributeNS("href"===o?"http://www.w3.org/1999/xlink":"",o,e[o]);return void 0!==n&&(t.textContent=n),t}function mt(t,i,e,n,o){1!==t.globalAlpha&&(e.opacity=t.globalAlpha),"fill"===i?(/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),e.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",e["fill-opacity"]=t[4]):e.fill=t.fillStyle instanceof yt?bt(t,t.fillStyle):t.fillStyle,e.stroke="none"):"stroke"===i&&(e.fill="none",/^rgba\(/.test(t.strokeStyle)?(i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),e.stroke="rgb("+i[1]+","+i[2]+","+i[3]+")",e["stroke-opacity"]=i[4]):e.stroke=t.strokeStyle instanceof yt?bt(t,t.strokeStyle):t.strokeStyle,e["stroke-width"]=t.lineWidth,e["stroke-linecap"]=t.lineCap,e["stroke-linejoin"]=t.lineJoin,e["stroke-miterlimit"]=t.miterLimit),n="matrix("+(n=n.ef)[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")",void 0!==o&&(n+=o),e.transform=n}function bt(t,i){var e="GRAD"+Nn.Il++;if("linear"===i.type)n=vt(t,"linearGradient",n={x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2,id:e,gradientUnits:"userSpaceOnUse"});else if("radial"===i.type)n=vt(t,"radialGradient",n={x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2,r1:i.r1,r2:i.r2,id:e});else{if("pattern"!==i.type)throw Error("invalid gradient");var n={width:(r=i.pattern).width,height:r.height,id:e,patternUnits:"userSpaceOnUse"},o="";r instanceof HTMLCanvasElement&&(o=r.toDataURL()),r instanceof HTMLImageElement&&(o=r.src),r={x:0,y:0,width:r.width,height:r.height,href:o},(n=vt(t,"pattern",n)).appendChild(vt(t,"image",r))}for(var r,o=(r=i.pD).length,s=[],a=0;a<o;a++){var h=(l=r[a]).color,l={offset:l.offset,"stop-color":h};/^rgba\(/.test(h)&&(h=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(h),l["stop-color"]="rgb("+h[1]+","+h[2]+","+h[3]+")",l["stop-opacity"]=h[4]),s.push(l)}for(s.sort(function(t,i){return t.offset>i.offset?1:-1}),a=0;a<o;a++)n.appendChild(vt(t,"stop",s[a]));return t.Cl.appendChild(n),"url(#"+e+")"}function xt(t,i,e,n){mt(t,i,e={x:e[0],y:e[1],width:e[2],height:e[3]},n),t.addElement("rect",e)}function wt(t,i,e,n){for(var o=[],r=0;r<e.length;r++){var s=Nn.dl(e[r]),a=[s.shift()];if("A"===a[0])a.push(s.shift()+","+s.shift(),s.shift(),s.shift()+","+s.shift(),s.shift()+","+s.shift());else for(;s.length;)a.push(s.shift()+","+s.shift());o.push(a.join(" "))}mt(t,i,e={d:o.join(" ")},n),"clipPath"===i?((n=vt(t,"clipPath",{id:i="CLIP"+Nn.Il++})).appendChild(vt(t,"path",e)),t.Cl.appendChild(n),0<t.tf.length&&t.tf[t.tf.length-1].setAttributeNS(null,"clip-path","url(#"+i+")")):t.addElement("path",e)}function kt(t,i,e,n,o,r,s){var a=new pt;a.ef=[i,e,n,o,r,s],mt(t,"g",i={},a),a=t.addElement("g",i),t.tf.push(a)}function Mt(t,i){this.ownerDocument=void 0===i?document:i;var e=this.ownerDocument.createElement("canvas");e.tabIndex=0,this.xd=e,this.cl=new Pt(e),e.W=t,Object.seal(this)}function Pt(t){t.getContext&&t.getContext("2d")||Nn.k("Browser does not support HTML Canvas Element"),this.wa=t.getContext("2d"),this.Ix=this.Kx=this.Jx="",this.rn=!1,this.og=this.os=this.ns=0,Object.seal(this)}function Tt(t,i){i&&(t.Jx=""),t.Kx="",t.Ix=""}Nn.Nd(J,{key:!0,value:!0}),Nn.u(J,{i:"iterator"},function(){return this}),J.prototype.reset=J.prototype.reset=function(){this.key=-1},J.prototype.next=J.prototype.hasNext=J.prototype.next=function(){return-1===this.key&&!(this.key=0)},J.prototype.first=J.prototype.first=function(){return this.key=0,this.value},J.prototype.any=function(t){return this.key=-1,t(this.value)},J.prototype.all=function(t){return this.key=-1,t(this.value)},J.prototype.each=function(t){return this.key=-1,t(this.value),this},J.prototype.map=function(t){return new J(t(this.value))},J.prototype.filter=function(t){return t(this.value)?new J(this.value):U},J.prototype.concat=function(t){return new Y(this,t.i)},Nn.u(J,{count:"count"},function(){return 1}),J.prototype.Cf=function(){this.value=null},J.prototype.toString=function(){return"SingletonIterator("+this.value+")"},Nn.Nd(Y,{key:!0,value:!0}),Nn.u(Y,{i:"iterator"},function(){return this}),Y.prototype.reset=Y.prototype.reset=function(){this.Gk.reset(),this.Hk.reset(),this.lu=!1},Y.prototype.next=Y.prototype.hasNext=Y.prototype.next=function(){if(!this.lu){var t=this.Gk;if(t.next())return this.key=t.key,this.value=t.value,!0;this.lu=!0}return!(!this.lu||!(t=this.Hk).next())&&(this.key=t.key,this.value=t.value,!0)},Y.prototype.first=Y.prototype.first=function(){return this.reset(),this.next()?this.value:null},Y.prototype.any=function(t){return!(!this.Gk.any(t)&&!this.Hk.any(t))},Y.prototype.all=function(t){return!(!this.Gk.all(t)||!this.Hk.all(t))},Y.prototype.each=function(t){return this.Gk.each(t),this.Hk.each(t),this},Y.prototype.map=function(t){return new Y(this.Gk.map(t),this.Hk.map(t))},Y.prototype.filter=function(t){return new Y(this.Gk.filter(t),this.Hk.filter(t))},Y.prototype.concat=function(t){return new Y(this,t.i)},Nn.u(Y,{count:"count"},function(){return this.Gk.count+this.Hk.count}),Y.prototype.Cf=function(){this.value=this.key=null},Y.prototype.toString=function(){return"ConcatIterator()"},Nn.Nd(W,{key:!0,value:!0}),Nn.u(W,{i:"iterator"},function(){return this}),Nn.defineProperty(W,{Zm:"predicate"},function(){return this.Gh},function(t){this.Gh=t}),W.prototype.reset=W.prototype.reset=function(){var t=this.tc;t.Xb=null,this.eb=t.F,this.Oc=-1},W.prototype.next=W.prototype.hasNext=W.prototype.next=function(){var t=this.tc;if(t.F!==this.eb){if(this.key<0)return!1;Nn.La(t)}var i=(t=t.n).length,e=++this.Oc,n=this.Gh;if(null!==n)for(;e<i;){var o=t[e];if(n(o))return this.key=this.Oc=e,this.value=o,!0;e++}else{if(e<i)return this.key=e,this.value=t[e],!0;this.Cf()}return!1},W.prototype.first=W.prototype.first=function(){var t=this.tc;this.eb=t.F,this.Oc=0;var i=(t=t.n).length,e=this.Gh;if(null===e)return 0<i?(o=t[0],this.key=0,this.value=o):null;for(var n=0;n<i;){var o=t[n];if(e(o))return this.key=this.Oc=n,this.value=o;n++}return null},W.prototype.any=function(t){var i=this.tc;i.Xb=null;var e=i.F;this.Oc=-1;for(var n=i.n,o=n.length,r=this.Gh,s=0;s<o;s++){var a=n[s];if(null===r||r(a)){if(t(a))return!0;i.F!==e&&Nn.La(i)}}return!1},W.prototype.all=function(t){var i=this.tc;i.Xb=null;var e=i.F;this.Oc=-1;for(var n=i.n,o=n.length,r=this.Gh,s=0;s<o;s++){var a=n[s];if(null===r||r(a)){if(!t(a))return!1;i.F!==e&&Nn.La(i)}}return!0},W.prototype.each=function(t){var i=this.tc;i.Xb=null;var e=i.F;this.Oc=-1;for(var n=i.n,o=n.length,r=this.Gh,s=0;s<o;s++){var a=n[s];null!==r&&!r(a)||(t(a),i.F!==e&&Nn.La(i))}return this},W.prototype.map=function(t){var i=this.tc;i.Xb=null;var e=i.F;this.Oc=-1;for(var n=[],o=i.n,r=o.length,s=this.Gh,a=0;a<r;a++){var h=o[a];null!==s&&!s(h)||(n.push(t(h)),i.F!==e&&Nn.La(i))}return(t=new Dn).n=n,t.Bc(),t.i},W.prototype.filter=function(t){var i=this.tc;i.Xb=null;var e=i.F;this.Oc=-1;for(var n=[],o=i.n,r=o.length,s=this.Gh,a=0;a<r;a++){var h=o[a];null!==s&&!s(h)||(t(h)&&n.push(h),i.F!==e&&Nn.La(i))}return(t=new Dn(i.ia)).n=n,t.Bc(),t.i},W.prototype.concat=function(t){return this.tc.Xb=null,new Y(this,t.i)},Nn.u(W,{count:"count"},function(){var t=this.Gh;if(null===t)return this.tc.n.length;for(var i=0,e=this.tc.n,n=e.length,o=0;o<n;o++)t(e[o])&&i++;return i}),W.prototype.Cf=function(){this.key=-1,this.value=null,this.eb=-1,this.Gh=null,this.tc.Xb=this},W.prototype.toString=function(){return"ListIterator@"+this.Oc+"/"+this.tc.count},Nn.Nd(X,{key:!0,value:!0}),Nn.u(X,{i:"iterator"},function(){return this}),X.prototype.reset=X.prototype.reset=function(){var t=this.tc;t.uj=null,this.eb=t.F,this.Oc=t.n.length},X.prototype.next=X.prototype.hasNext=X.prototype.next=function(){var t=this.tc;if(t.F!==this.eb){if(this.key<0)return!1;Nn.La(t)}var i=--this.Oc;return 0<=i?(this.key=i,this.value=t.n[i],!0):(this.Cf(),!1)},X.prototype.first=X.prototype.first=function(){var t=this.tc;this.eb=t.F;var i=t.n;return this.Oc=t=i.length-1,0<=t?(i=i[t],this.key=t,this.value=i):null},X.prototype.any=function(t){var i=this.tc;i.uj=null;var e=i.F,n=i.n,o=n.length;for(this.Oc=o,--o;0<=o;o--){if(t(n[o]))return!0;i.F!==e&&Nn.La(i)}return!1},X.prototype.all=function(t){var i=this.tc;i.uj=null;var e=i.F,n=i.n,o=n.length;for(this.Oc=o,--o;0<=o;o--){if(!t(n[o]))return!1;i.F!==e&&Nn.La(i)}return!0},X.prototype.each=function(t){var i=this.tc;i.uj=null;var e=i.F,n=i.n,o=n.length;for(this.Oc=o,--o;0<=o;o--)t(n[o]),i.F!==e&&Nn.La(i);return this},X.prototype.map=function(t){var i=this.tc;i.uj=null;var e=i.F,n=[],o=i.n,r=o.length;for(this.Oc=r,--r;0<=r;r--)n.push(t(o[r])),i.F!==e&&Nn.La(i);return(t=new Dn).n=n,t.Bc(),t.i},X.prototype.filter=function(t){var i=this.tc;i.uj=null;var e=i.F,n=[],o=i.n,r=o.length;for(this.Oc=r,--r;0<=r;r--){var s=o[r];t(s)&&n.push(s),i.F!==e&&Nn.La(i)}return(t=new Dn(i.ia)).n=n,t.Bc(),t.i},X.prototype.concat=function(t){return this.tc.uj=null,new Y(this,t.i)},Nn.u(X,{count:"count"},function(){return this.tc.n.length}),X.prototype.Cf=function(){this.key=-1,this.value=null,this.eb=-1,this.tc.uj=this},X.prototype.toString=function(){return"ListIteratorBackwards("+this.Oc+"/"+this.tc.count+")"},Nn.ea("List",Dn),Dn.prototype.Bc=function(){var t=this.F;999999999<++t&&(t=0),this.F=t},Dn.prototype.freeze=Dn.prototype.freeze=function(){return this.D=!0,this},Dn.prototype.thaw=Dn.prototype.Oa=function(){return this.D=!1,this},Dn.prototype.toString=function(){return"List("+Nn.getTypeName(this.ia)+")#"+Nn.ld(this)},Dn.prototype.add=Dn.prototype.push=Dn.prototype.add=function(t){null!==t&&(this.D&&Nn.ka(this,t),this.n.push(t),this.Bc())},Dn.prototype.addAll=Dn.prototype.Tc=function(t){if(null===t)return this;this.D&&Nn.ka(this);var i=this.n;if(Nn.isArray(t))for(var e=Nn.Va(t),n=0;n<e;n++){var o=Nn.Pa(t,n);i.push(o)}else for(t=t.i;t.next();)o=t.value,i.push(o);return this.Bc(),this},Dn.prototype.clear=Dn.prototype.clear=function(){this.D&&Nn.ka(this),this.n.length=0,this.Bc()},Dn.prototype.contains=Dn.prototype.has=Dn.prototype.contains=function(t){return null!==t&&-1!==this.n.indexOf(t)},Dn.prototype.indexOf=Dn.prototype.indexOf=function(t){return null===t?-1:this.n.indexOf(t)},Dn.prototype.elt=Dn.prototype.get=Dn.prototype.da=function(t){var i=this.n;return(t<0||t>=i.length)&&Nn.va(t,"0 <= i < length",Dn,"elt:i"),i[t]},Dn.prototype.setElt=Dn.prototype.set=Dn.prototype.Hg=function(t,i){var e=this.n;(t<0||t>=e.length)&&Nn.va(t,"0 <= i < length",Dn,"setElt:i"),this.D&&Nn.ka(this,t),e[t]=i},Dn.prototype.first=Dn.prototype.first=function(){var t=this.n;return 0===t.length?null:t[0]},Dn.prototype.last=Dn.prototype.Rd=function(){var t=this.n,i=t.length;return 0<i?t[i-1]:null},Dn.prototype.pop=Dn.prototype.pop=function(){this.D&&Nn.ka(this);var t=this.n;return 0<t.length?t.pop():null},Dn.prototype.any=function(t){for(var i=this.n,e=this.F,n=i.length,o=0;o<n;o++){if(t(i[o]))return!0;this.F!==e&&Nn.La(this)}return!1},Dn.prototype.all=function(t){for(var i=this.n,e=this.F,n=i.length,o=0;o<n;o++){if(!t(i[o]))return!1;this.F!==e&&Nn.La(this)}return!0},Dn.prototype.each=function(t){for(var i=this.n,e=this.F,n=i.length,o=0;o<n;o++)t(i[o]),this.F!==e&&Nn.La(this);return this},Dn.prototype.map=function(t){for(var i=new Dn,e=[],n=this.n,o=this.F,r=n.length,s=0;s<r;s++)e.push(t(n[s])),this.F!==o&&Nn.La(this);return i.n=e,i.Bc(),i},Dn.prototype.filter=function(t){for(var i=new Dn(this.ia),e=[],n=this.n,o=this.F,r=n.length,s=0;s<r;s++){var a=n[s];t(a)&&e.push(a),this.F!==o&&Nn.La(this)}return i.n=e,i.Bc(),i},Dn.prototype.concat=function(t){return this.copy().Tc(t)},Dn.prototype.insertAt=Dn.prototype.Ad=function(t,i){t<0&&Nn.va(t,">= 0",Dn,"insertAt:i"),this.D&&Nn.ka(this,t);var e=this.n;return t>=e.length?e.push(i):e.splice(t,0,i),this.Bc(),!0},Dn.prototype.remove=Dn.prototype.delete=Dn.prototype.remove=function(t){if(null===t)return!1;this.D&&Nn.ka(this,t);var i=this.n;return-1!==(t=i.indexOf(t))&&(t===i.length-1?i.pop():i.splice(t,1),this.Bc(),!0)},Dn.prototype.removeAt=Dn.prototype.Vc=function(t){var i=this.n;(t<0||t>=i.length)&&Nn.va(t,"0 <= i < length",Dn,"removeAt:i"),this.D&&Nn.ka(this,t),t===i.length-1?i.pop():i.splice(t,1),this.Bc()},Dn.prototype.removeRange=Dn.prototype.removeRange=function(t,i){var e=this.n;(t<0||t>=e.length)&&Nn.va(t,"0 <= from < length",Dn,"elt:from"),(i<0||i>=e.length)&&Nn.va(i,"0 <= to < length",Dn,"elt:to"),this.D&&Nn.ka(this,t);var n=e.slice((i||t)+1||e.length);e.length=t<0?e.length+t:t,e.push.apply(e,n),this.Bc()},Dn.prototype.copy=function(){var t=new Dn(this.ia),i=this.n;return 0<i.length&&(t.n=Array.prototype.slice.call(i)),t},Dn.prototype.toArray=Dn.prototype.dc=function(){for(var t=this.n,i=this.count,e=Array(i),n=0;n<i;n++)e[n]=t[n];return e},Dn.prototype.toSet=Dn.prototype.gF=function(){for(var t=new Q(this.ia),i=this.n,e=this.count,n=0;n<e;n++)t.add(i[n]);return t},Dn.prototype.sort=Dn.prototype.sort=function(t){return this.D&&Nn.ka(this),this.n.sort(t),this.Bc(),this},Dn.prototype.sortRange=Dn.prototype.Jp=function(t,i,e){var n=this.n,o=n.length;void 0===i&&(i=0),void 0===e&&(e=o),this.D&&Nn.ka(this);var r=e-i;if(r<=1)return this;if((i<0||o-1<=i)&&Nn.va(i,"0 <= from < length",Dn,"sortRange:from"),2===r)return 0<t(e=n[i],o=n[i+1])&&(n[i]=o,n[i+1]=e,this.Bc()),this;if(0===i)if(o<=e)n.sort(t);else for((r=n.slice(0,e)).sort(t),t=0;t<e;t++)n[t]=r[t];else if(o<=e)for((r=n.slice(i)).sort(t),t=i;t<o;t++)n[t]=r[t-i];else for((r=n.slice(i,e)).sort(t),t=i;t<e;t++)n[t]=r[t-i];return this.Bc(),this},Dn.prototype.reverse=Dn.prototype.reverse=function(){return this.D&&Nn.ka(this),this.n.reverse(),this.Bc(),this},Nn.u(Dn,{count:"count"},function(){return this.n.length}),Nn.u(Dn,{size:"size"},function(){return this.n.length}),Nn.u(Dn,{length:"length"},function(){return this.n.length}),Nn.u(Dn,{i:"iterator"},function(){if(this.n.length<=0)return U;var t=this.Xb;return null!==t?(t.reset(),t):new W(this)}),Nn.u(Dn,{Um:"iteratorBackwards"},function(){if(this.n.length<=0)return U;var t=this.uj;return null!==t?(t.reset(),t):new X(this)}),Nn.Nd(Z,{key:!0,value:!0}),Nn.u(Z,{i:"iterator"},function(){return this}),Z.prototype.reset=Z.prototype.reset=function(){var t=this.Ih;t.Xb=null,this.eb=t.F,this.cb=null},Z.prototype.next=Z.prototype.hasNext=Z.prototype.next=function(){var t=this.Ih;if(t.F!==this.eb){if(null===this.key)return!1;Nn.La(t)}var i=this.cb;return null!==(i=null===i?t.Da:i.Ua)?(this.cb=i,this.value=i.value,this.key=i.key,!0):(this.Cf(),!1)},Z.prototype.first=Z.prototype.first=function(){var t=this.Ih;if(this.eb=t.F,null===(t=t.Da))return null;var i=(this.cb=t).value;return this.key=t.key,this.value=i},Z.prototype.any=function(t){var i=this.Ih;i.Xb=null;var e=i.F;this.cb=null;for(var n=i.Da;null!==n;){if(t(n.value))return!0;i.F!==e&&Nn.La(i),n=n.Ua}return!1},Z.prototype.all=function(t){var i=this.Ih;i.Xb=null;var e=i.F;this.cb=null;for(var n=i.Da;null!==n;){if(!t(n.value))return!1;i.F!==e&&Nn.La(i),n=n.Ua}return!0},Z.prototype.each=function(t){var i=this.Ih;i.Xb=null;var e=i.F;this.cb=null;for(var n=i.Da;null!==n;)t(n.value),i.F!==e&&Nn.La(i),n=n.Ua;return this},Z.prototype.map=function(t){var i=this.Ih;i.Xb=null;for(var e=new Dn,n=i.F,o=i.Da;null!==o;)e.add(t(o.value)),i.F!==n&&Nn.La(i),o=o.Ua;return e.i},Z.prototype.filter=function(t){var i=this.Ih;i.Xb=null;for(var e=new Dn(i.ia),n=i.F,o=i.Da;null!==o;){var r=o.value;t(r)&&e.add(r),i.F!==n&&Nn.La(i),o=o.Ua}return e.i},Z.prototype.concat=function(t){return this.Ih.Xb=null,new Y(this,t.i)},Nn.u(Z,{count:"count"},function(){return this.Ih.gd}),Z.prototype.Cf=function(){this.value=this.key=null,this.eb=-1,this.Ih.Xb=this},Z.prototype.toString=function(){return null!==this.cb?"SetIterator@"+this.cb.value:"SetIterator"},Nn.ea("Set",Q),Q.prototype.Bc=function(){var t=this.F;999999999<++t&&(t=0),this.F=t},Q.prototype.freeze=Q.prototype.freeze=function(){return this.D=!0,this},Q.prototype.thaw=Q.prototype.Oa=function(){return this.D=!1,this},Q.prototype.toString=function(){return"Set("+Nn.getTypeName(this.ia)+")#"+Nn.ld(this)},Q.prototype.add=Q.prototype.add=function(t){if(null===t)return!1;this.D&&Nn.ka(this,t);var i=t;return Nn.Ta(t)&&(i=Nn.ot(t)),void 0===this.hd[i]&&(this.gd++,t=new it(t,t),this.hd[i]=t,null===(i=this.Dh)?this.Da=t:(t.oo=i).Ua=t,this.Dh=t,this.Bc(),!0)},Q.prototype.addAll=Q.prototype.Tc=function(t){if(null===t)return this;if(this.D&&Nn.ka(this),Nn.isArray(t))for(var i=Nn.Va(t),e=0;e<i;e++)this.add(Nn.Pa(t,e));else for(t=t.i;t.next();)this.add(t.value);return this},Q.prototype.contains=Q.prototype.has=Q.prototype.contains=function(t){if(null===t)return!1;var i=t;return(!Nn.Ta(t)||void 0!==(i=Nn.ld(t)))&&void 0!==this.hd[i]},Q.prototype.containsAll=function(t){if(null===t)return!0;for(t=t.i;t.next();)if(!this.contains(t.value))return!1;return!0},Q.prototype.containsAny=function(t){if(null===t)return!0;for(t=t.i;t.next();)if(this.contains(t.value))return!0;return!1},Q.prototype.first=Q.prototype.first=function(){var t=this.Da;return null===t?null:t.value},Q.prototype.any=function(t){for(var i=this.F,e=this.Da;null!==e;){if(t(e.value))return!0;this.F!==i&&Nn.La(this),e=e.Ua}return!1},Q.prototype.all=function(t){for(var i=this.F,e=this.Da;null!==e;){if(!t(e.value))return!1;this.F!==i&&Nn.La(this),e=e.Ua}return!0},Q.prototype.each=function(t){for(var i=this.F,e=this.Da;null!==e;)t(e.value),this.F!==i&&Nn.La(this),e=e.Ua;return this},Q.prototype.map=function(t){for(var i=new Q,e=this.F,n=this.Da;null!==n;)i.add(t(n.value)),this.F!==e&&Nn.La(this),n=n.Ua;return i},Q.prototype.filter=function(t){for(var i=new Q(this.ia),e=this.F,n=this.Da;null!==n;){var o=n.value;t(o)&&i.add(o),this.F!==e&&Nn.La(this),n=n.Ua}return i},Q.prototype.concat=function(t){return this.copy().Tc(t)},Q.prototype.remove=Q.prototype.delete=Q.prototype.remove=function(t){if(null===t)return!1;this.D&&Nn.ka(this,t);var i=t;if(Nn.Ta(t)&&void 0===(i=Nn.ld(t)))return!1;if(void 0===(t=this.hd[i]))return!1;var e=t.Ua,n=t.oo;return null!==e&&(e.oo=n),null!==n&&(n.Ua=e),this.Da===t&&(this.Da=e),this.Dh===t&&(this.Dh=n),delete this.hd[i],this.gd--,this.Bc(),!0},Q.prototype.removeAll=Q.prototype.fA=function(t){if(null===t)return this;if(this.D&&Nn.ka(this),Nn.isArray(t))for(var i=Nn.Va(t),e=0;e<i;e++)this.remove(Nn.Pa(t,e));else for(t=t.i;t.next();)this.remove(t.value);return this},Q.prototype.retainAll=function(t){if(null===t||0===this.count)return this;this.D&&Nn.ka(this);var i=new Q(this.ia);i.Tc(t),t=[];for(var e=this.i;e.next();){var n=e.value;i.contains(n)||t.push(n)}return this.fA(t),this},Q.prototype.clear=Q.prototype.clear=function(){this.D&&Nn.ka(this),this.hd={},this.gd=0,this.Dh=this.Da=null,this.Bc()},Q.prototype.copy=function(){var t,i=new Q(this.ia),e=this.hd;for(t in e)i.add(e[t].value);return i},Q.prototype.toArray=Q.prototype.dc=function(){var t,i=Array(this.gd),e=this.hd,n=0;for(t in e)i[n]=e[t].value,n++;return i},Q.prototype.toList=function(){var t,i=new Dn(this.ia),e=this.hd;for(t in e)i.add(e[t].value);return i},Nn.u(Q,{count:"count"},function(){return this.gd}),Nn.u(Q,{size:"size"},function(){return this.gd}),Nn.u(Q,{i:"iterator"},function(){if(this.gd<=0)return U;var t=this.Xb;return null!==t?(t.reset(),t):new Z(this)}),Nn.Nd($,{key:!0,value:!0}),Nn.u($,{i:"iterator"},function(){return this}),$.prototype.reset=$.prototype.reset=function(){this.eb=this.Ga.F,this.cb=null},$.prototype.next=$.prototype.hasNext=$.prototype.next=function(){var t=this.Ga;if(t.F!==this.eb){if(null===this.key)return!1;Nn.La(t)}var i=this.cb;return null!==(i=null===i?t.Da:i.Ua)?(this.cb=i,this.value=this.key=t=i.key,!0):(this.Cf(),!1)},$.prototype.first=$.prototype.first=function(){var t=this.Ga;return this.eb=t.F,null!==(t=t.Da)?(this.cb=t,this.value=this.key=t.key):null},$.prototype.any=function(t){var i=this.Ga,e=i.F;this.cb=null;for(var n=i.Da;null!==n;){if(t(n.key))return!0;i.F!==e&&Nn.La(i),n=n.Ua}return!1},$.prototype.all=function(t){var i=this.Ga,e=i.F;this.cb=null;for(var n=i.Da;null!==n;){if(!t(n.key))return!1;i.F!==e&&Nn.La(i),n=n.Ua}return!0},$.prototype.each=function(t){var i=this.Ga,e=i.F;this.cb=null;for(var n=i.Da;null!==n;)t(n.key),i.F!==e&&Nn.La(i),n=n.Ua;return this},$.prototype.map=function(t){var i=this.Ga,e=i.F;this.cb=null;for(var n=new Dn,o=i.Da;null!==o;)n.add(t(o.key)),i.F!==e&&Nn.La(i),o=o.Ua;return n.i},$.prototype.filter=function(t){var i=this.Ga,e=i.F;this.cb=null;for(var n=new Dn(i.ui),o=i.Da;null!==o;){var r=o.key;t(r)&&n.add(r),i.F!==e&&Nn.La(i),o=o.Ua}return n.i},$.prototype.concat=function(t){return new Y(this,t.i)},Nn.u($,{count:"count"},function(){return this.Ga.gd}),$.prototype.Cf=function(){this.value=this.key=null,this.eb=-1},$.prototype.toString=function(){return null!==this.cb?"MapKeySetIterator@"+this.cb.value:"MapKeySetIterator"},Nn.Ja(_,Q),_.prototype.freeze=function(){return this},_.prototype.Oa=function(){return this},_.prototype.toString=function(){return"MapKeySet("+this.Ga.toString()+")"},_.prototype.add=_.prototype.set=_.prototype.add=function(){return Nn.k("This Set is read-only: "+this.toString()),!1},_.prototype.contains=_.prototype.has=_.prototype.contains=function(t){return this.Ga.contains(t)},_.prototype.remove=_.prototype.delete=_.prototype.remove=function(){return Nn.k("This Set is read-only: "+this.toString()),!1},_.prototype.clear=_.prototype.clear=function(){Nn.k("This Set is read-only: "+this.toString())},_.prototype.first=_.prototype.first=function(){var t=this.Ga.Da;return null!==t?t.key:null},_.prototype.any=function(t){for(var i=this.Ga.Da;null!==i;){if(t(i.key))return!0;i=i.Ua}return!1},_.prototype.all=function(t){for(var i=this.Ga.Da;null!==i;){if(!t(i.key))return!1;i=i.Ua}return!0},_.prototype.each=function(t){for(var i=this.Ga.Da;null!==i;)t(i.key),i=i.Ua;return this},_.prototype.map=function(t){for(var i=new Q,e=this.Ga.Da;null!==e;)i.add(t(e.key)),e=e.Ua;return i},_.prototype.filter=function(t){for(var i=new Q(this.Ga.ui),e=this.Ga.Da;null!==e;){var n=e.key;t(n)&&i.add(n),e=e.Ua}return i},_.prototype.concat=function(t){return this.gF().Tc(t)},_.prototype.copy=function(){return new _(this.Ga)},_.prototype.toSet=_.prototype.gF=function(){var t,i=new Q(this.Ga.ui),e=this.Ga.hd;for(t in e)i.add(e[t].key);return i},_.prototype.toArray=_.prototype.dc=function(){var t,i=this.Ga.hd,e=Array(this.Ga.gd),n=0;for(t in i)e[n]=i[t].key,n++;return e},_.prototype.toList=function(){var t,i=new Dn(this.ia),e=this.Ga.hd;for(t in e)i.add(e[t].key);return i},Nn.u(_,{count:"count"},function(){return this.Ga.gd}),Nn.u(_,{size:"size"},function(){return this.Ga.gd}),Nn.u(_,{i:"iterator"},function(){return this.Ga.gd<=0?U:new $(this.Ga)}),Nn.Nd(tt,{key:!0,value:!0}),Nn.u(tt,{i:"iterator"},function(){return this}),tt.prototype.reset=tt.prototype.reset=function(){var t=this.Ga;t.vj=null,this.eb=t.F,this.cb=null},tt.prototype.next=tt.prototype.hasNext=tt.prototype.next=function(){var t=this.Ga;if(t.F!==this.eb){if(null===this.key)return!1;Nn.La(t)}var i=this.cb;return null!==(i=null===i?t.Da:i.Ua)?(this.cb=i,this.value=i.value,this.key=i.key,!0):(this.Cf(),!1)},tt.prototype.first=tt.prototype.first=function(){var t=this.Ga;if(this.eb=t.F,null===(t=t.Da))return null;var i=(this.cb=t).value;return this.key=t.key,this.value=i},tt.prototype.any=function(t){var i=this.Ga;i.vj=null;var e=i.F;this.cb=null;for(var n=i.Da;null!==n;){if(t(n.value))return!0;i.F!==e&&Nn.La(i),n=n.Ua}return!1},tt.prototype.all=function(t){var i=this.Ga;i.vj=null;var e=i.F;this.cb=null;for(var n=i.Da;null!==n;){if(!t(n.value))return!1;i.F!==e&&Nn.La(i),n=n.Ua}return!0},tt.prototype.each=function(t){var i=this.Ga;i.vj=null;var e=i.F;this.cb=null;for(var n=i.Da;null!==n;)t(n.value),i.F!==e&&Nn.La(i),n=n.Ua;return this},tt.prototype.map=function(t){var i=this.Ga;i.vj=null;var e=i.F;this.cb=null;for(var n=new Dn,o=i.Da;null!==o;)n.add(t(o.value)),i.F!==e&&Nn.La(i),o=o.Ua;return n.i},tt.prototype.filter=function(t){var i=this.Ga;i.vj=null;var e=i.F;this.cb=null;for(var n=new Dn(i.ui),o=i.Da;null!==o;){var r=o.value;t(r)&&n.add(r),i.F!==e&&Nn.La(i),o=o.Ua}return n.i},tt.prototype.concat=function(t){return this.Ga.vj=null,new Y(this,t.i)},Nn.u(tt,{count:"count"},function(){return this.Ga.gd}),tt.prototype.Cf=function(){this.value=this.key=null,this.eb=-1,this.Ga.vj=this},tt.prototype.toString=function(){return null!==this.cb?"MapValueSetIterator@"+this.cb.value:"MapValueSetIterator"},Nn.Nd(it,{key:!0,value:!0}),it.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},Nn.Nd(et,{key:!0,value:!0}),Nn.u(et,{i:"iterator"},function(){return this}),et.prototype.reset=et.prototype.reset=function(){var t=this.Ga;t.Xb=null,this.eb=t.F,this.cb=null},et.prototype.next=et.prototype.hasNext=et.prototype.next=function(){var t=this.Ga;if(t.F!==this.eb){if(null===this.key)return!1;Nn.La(t)}var i=this.cb;return null!==(i=null===i?t.Da:i.Ua)?(this.cb=i,this.key=i.key,this.value=i.value,!0):(this.Cf(),!1)},et.prototype.first=et.prototype.first=function(){var t=this.Ga;return this.eb=t.F,null!==(t=t.Da)?(this.cb=t,this.key=t.key,this.value=t.value,t):null},et.prototype.any=function(t){var i=this.Ga;i.Xb=null;var e=i.F;this.cb=null;for(var n=i.Da;null!==n;){if(t(n))return!0;i.F!==e&&Nn.La(i),n=n.Ua}return!1},et.prototype.all=function(t){var i=this.Ga;i.Xb=null;var e=i.F;this.cb=null;for(var n=i.Da;null!==n;){if(!t(n))return!1;i.F!==e&&Nn.La(i),n=n.Ua}return!0},et.prototype.each=function(t){var i=this.Ga;i.Xb=null;var e=i.F;this.cb=null;for(var n=i.Da;null!==n;)t(n),i.F!==e&&Nn.La(i),n=n.Ua;return this},et.prototype.map=function(t){var i=this.Ga;i.Xb=null;var e=i.F;this.cb=null;for(var n=new Dn,o=i.Da;null!==o;)n.add(t(o)),i.F!==e&&Nn.La(i),o=o.Ua;return n.i},et.prototype.filter=function(t){var i=this.Ga;i.Xb=null;var e=i.F;this.cb=null;for(var n=new Dn,o=i.Da;null!==o;)t(o)&&n.add(o),i.F!==e&&Nn.La(i),o=o.Ua;return n.i},et.prototype.concat=function(t){return this.Ga.Xb=null,new Y(this,t.i)},Nn.u(et,{count:"count"},function(){return this.Ga.gd}),et.prototype.Cf=function(){this.value=this.key=null,this.eb=-1,this.Ga.Xb=this},et.prototype.toString=function(){return null!==this.cb?"MapIterator@"+this.cb:"MapIterator"},Nn.ea("Map",nt),nt.prototype.Bc=function(){var t=this.F;999999999<++t&&(t=0),this.F=t},nt.prototype.freeze=nt.prototype.freeze=function(){return this.D=!0,this},nt.prototype.thaw=nt.prototype.Oa=function(){return this.D=!1,this},nt.prototype.toString=function(){return"Map("+Nn.getTypeName(this.ui)+","+Nn.getTypeName(this.Hs)+")#"+Nn.ld(this)},nt.prototype.add=nt.prototype.set=nt.prototype.add=function(t,i){this.D&&Nn.ka(this,t);var e=t;Nn.Ta(t)&&(e=Nn.ot(t));var n=this.hd[e];return void 0===n?(this.gd++,n=new it(t,i),this.hd[e]=n,null===(e=this.Dh)?this.Da=n:(n.oo=e).Ua=n,this.Dh=n,this.Bc(),!0):(n.value=i,!1)},nt.prototype.addAll=nt.prototype.Tc=function(t){if(null===t)return this;if(Nn.isArray(t))for(var i=Nn.Va(t),e=0;e<i;e++){var n=Nn.Pa(t,e);this.add(n.key,n.value)}else for(t=t.i;t.next();)this.add(t.key,t.value);return this},nt.prototype.first=nt.prototype.first=function(){return this.Da},nt.prototype.any=function(t){for(var i=this.F,e=this.Da;null!==e;){if(t(e))return!0;this.F!==i&&Nn.La(this),e=e.Ua}return!1},nt.prototype.all=function(t){for(var i=this.F,e=this.Da;null!==e;){if(!t(e))return!1;this.F!==i&&Nn.La(this),e=e.Ua}return!0},nt.prototype.each=function(t){for(var i=this.F,e=this.Da;null!==e;)t(e),this.F!==i&&Nn.La(this),e=e.Ua;return this},nt.prototype.map=function(t){for(var i=new nt(this.ui),e=this.F,n=this.Da;null!==n;)i.add(n.key,t(n)),this.F!==e&&Nn.La(this),n=n.Ua;return i},nt.prototype.filter=function(t){for(var i=new nt(this.ui,this.Hs),e=this.F,n=this.Da;null!==n;)t(n)&&i.add(n.key,n.value),this.F!==e&&Nn.La(this),n=n.Ua;return i},nt.prototype.concat=function(t){return this.copy().Tc(t)},nt.prototype.contains=nt.prototype.has=nt.prototype.contains=function(t){var i=t;return(!Nn.Ta(t)||void 0!==(i=Nn.ld(t)))&&void 0!==this.hd[i]},nt.prototype.getValue=nt.prototype.get=nt.prototype.ja=function(t){var i=t;return Nn.Ta(t)&&void 0===(i=Nn.ld(t))||void 0===(t=this.hd[i])?null:t.value},nt.prototype.remove=nt.prototype.delete=nt.prototype.remove=function(t){if(null===t)return!1;this.D&&Nn.ka(this,t);var i=t;if(Nn.Ta(t)&&void 0===(i=Nn.ld(t)))return!1;if(void 0===(t=this.hd[i]))return!1;var e=t.Ua,n=t.oo;return null!==e&&(e.oo=n),null!==n&&(n.Ua=e),this.Da===t&&(this.Da=e),this.Dh===t&&(this.Dh=n),delete this.hd[i],this.gd--,this.Bc(),!0},nt.prototype.clear=nt.prototype.clear=function(){this.D&&Nn.ka(this),this.hd={},this.gd=0,this.Dh=this.Da=null,this.Bc()},nt.prototype.copy=function(){var t,i=new nt(this.ui,this.Hs),e=this.hd;for(t in e){var n=e[t];i.add(n.key,n.value)}return i},nt.prototype.toArray=nt.prototype.dc=function(){var t,i=this.hd,e=Array(this.gd),n=0;for(t in i){var o=i[t];e[n]=new it(o.key,o.value),n++}return e},nt.prototype.toKeySet=nt.prototype.cj=function(){return new _(this)},Nn.u(nt,{count:"count"},function(){return this.gd}),Nn.u(nt,{size:"size"},function(){return this.gd}),Nn.u(nt,{i:"iterator"},function(){if(this.count<=0)return U;var t=this.Xb;return null!==t?(t.reset(),t):new et(this)}),Nn.u(nt,{mE:"iteratorKeys"},function(){return this.count<=0?U:new $(this)}),Nn.u(nt,{nE:"iteratorValues"},function(){if(this.count<=0)return U;var t=this.vj;return null!==t?(t.reset(),t):new tt(this)}),Nn.ea("Point",Se),Nn.Uh(Se),Nn.Nd(Se,{x:!0,y:!0}),Se.prototype.assign=function(t){this.x=t.x,this.y=t.y},Se.prototype.setTo=Se.prototype.m=function(t,i){return this.x=t,this.y=i,this},Se.prototype.set=Se.prototype.set=function(t){return this.Cb(),this.x=t.x,this.y=t.y,this},Se.prototype.copy=function(){var t=new Se;return t.x=this.x,t.y=this.y,t},(t=Se.prototype).Ea=function(){return this.D=!0,Object.freeze(this),this},t.R=function(){return Object.isFrozen(this)?this:this.copy().freeze()},t.freeze=function(){return this.D=!0,this},t.Oa=function(){return Object.isFrozen(this)&&Nn.k("cannot thaw constant: "+this),this.D=!1,this},t.Cb=function(t){var i;this.D&&(i="The Point is frozen, so its properties cannot be set: "+this.toString(),void 0!==t&&(i+="  to value: "+t),Nn.k(i))},Se.parse=function(t){if("string"!=typeof t)return new Se;t=t.split(" ");for(var i=0,e=0;""===t[i];)i++;var n=t[i++];n&&(e=parseFloat(n));for(var o=0;""===t[i];)i++;return(n=t[i++])&&(o=parseFloat(n)),new Se(e,o)},Se.stringify=function(t){return t instanceof Se?t.x.toString()+" "+t.y.toString():t.toString()},Se.prototype.toString=function(){return"Point("+this.x+","+this.y+")"},Se.prototype.equals=Se.prototype.K=function(t){return t instanceof Se&&(this.x===t.x&&this.y===t.y)},Se.prototype.equalTo=Se.prototype.xw=function(t,i){return this.x===t&&this.y===i},Se.prototype.equalsApprox=Se.prototype.Fc=function(t){return fi(this.x,t.x)&&fi(this.y,t.y)},Se.prototype.add=Se.prototype.add=function(t){return this.Cb(),this.x+=t.x,this.y+=t.y,this},Se.prototype.subtract=Se.prototype.du=function(t){return this.Cb(),this.x-=t.x,this.y-=t.y,this},Se.prototype.offset=Se.prototype.offset=function(t,i){return this.Cb(),this.x+=t,this.y+=i,this},Se.prototype.rotate=Se.prototype.rotate=function(t){if(this.Cb(),0===t)return this;var i=this.x,e=this.y;if(0===i&&0===e)return this;var n=0,o=0;return 360<=t?t-=360:t<0&&(t+=360),o=90===t?(n=0,1):180===t?(n=-1,0):270===t?(n=0,-1):(t=t*Math.PI/180,n=Math.cos(t),Math.sin(t)),this.x=n*i-o*e,this.y=o*i+n*e,this},Se.prototype.scale=Se.prototype.scale=function(t,i){return this.x*=t,this.y*=i,this},Se.prototype.distanceSquaredPoint=Se.prototype.rf=function(t){var i=t.x-this.x;return i*i+(t=t.y-this.y)*t},Se.prototype.distanceSquared=Se.prototype.Uo=function(t,i){var e=t-this.x,n=i-this.y;return e*e+n*n},Se.prototype.normalize=Se.prototype.normalize=function(){this.Cb();var t=this.x,i=this.y,e=Math.sqrt(t*t+i*i);return 0<e&&(this.x=t/e,this.y=i/e),this},Se.prototype.directionPoint=Se.prototype.xc=function(t){return ot(t.x-this.x,t.y-this.y)},Se.prototype.direction=Se.prototype.direction=function(t,i){return ot(t-this.x,i-this.y)},Se.prototype.projectOntoLineSegment=function(t,i,e,n){return wi(t,i,e,n,this.x,this.y,this),this},Se.prototype.projectOntoLineSegmentPoint=function(t,i){return wi(t.x,t.y,i.x,i.y,this.x,this.y,this),this},Se.prototype.snapToGrid=function(t,i,e,n){return Di(this.x,this.y,t,i,e,n,this),this},Se.prototype.snapToGridPoint=function(t,i){return Di(this.x,this.y,t.x,t.y,i.width,i.height,this),this},Se.prototype.setRectSpot=Se.prototype.Yt=function(t,i){return this.Cb(),this.x=t.x+i.x*t.width+i.offsetX,this.y=t.y+i.y*t.height+i.offsetY,this},Se.prototype.setSpot=Se.prototype.$t=function(t,i,e,n,o){return this.Cb(),this.x=t+o.x*e+o.offsetX,this.y=i+o.y*n+o.offsetY,this},Se.prototype.transform=function(t){return t.ub(this),this},Se.distanceLineSegmentSquared=v=function(t,i,e,n,o,r){var s=o-e,a=r-n,h=s*s+a*a,l=-(e-=t)*s-(n-=i)*a;return l<=0||h<=l?(s=o-t,a=r-i,Math.min(e*e+n*n,s*s+a*a)):(t=s*n-a*e)*t/h},Se.distanceSquared=m=function(t,i,e,n){return(t=e-t)*t+(i=n-i)*i},Se.direction=f=function(t,i,e,n){return i=n-i,0===(t=e-t)?0<i?90:i<0?270:0:0===i?0<t?0:180:isNaN(t)||isNaN(i)?0:(n=180*Math.atan(Math.abs(i/t))/Math.PI,t<0?n=i<0?n+180:180-n:i<0&&(n=360-n),n)},Se.prototype.isReal=Se.prototype.G=function(){return isFinite(this.x)&&isFinite(this.y)},Nn.ea("Size",st),Nn.Uh(st),Nn.Nd(st,{width:!0,height:!0}),st.prototype.assign=function(t){this.width=t.width,this.height=t.height},st.prototype.setTo=st.prototype.m=function(t,i){return this.width=t,this.height=i,this},st.prototype.set=st.prototype.set=function(t){return this.Cb(),this.width=t.width,this.height=t.height,this},st.prototype.copy=function(){var t=new st;return t.width=this.width,t.height=this.height,t},(t=st.prototype).Ea=function(){return this.D=!0,Object.freeze(this),this},t.R=function(){return Object.isFrozen(this)?this:this.copy().freeze()},t.freeze=function(){return this.D=!0,this},t.Oa=function(){return Object.isFrozen(this)&&Nn.k("cannot thaw constant: "+this),this.D=!1,this},t.Cb=function(t){var i;this.D&&(i="The Size is frozen, so its properties cannot be set: "+this.toString(),void 0!==t&&(i+="  to value: "+t),Nn.k(i))},st.parse=function(t){if("string"!=typeof t)return new st;t=t.split(" ");for(var i=0,e=0;""===t[i];)i++;var n=t[i++];n&&(e=parseFloat(n));for(var o=0;""===t[i];)i++;return(n=t[i++])&&(o=parseFloat(n)),new st(e,o)},st.stringify=function(t){return t instanceof st?t.width.toString()+" "+t.height.toString():t.toString()},st.prototype.toString=function(){return"Size("+this.width+","+this.height+")"},st.prototype.equals=st.prototype.K=function(t){return t instanceof st&&(this.width===t.width&&this.height===t.height)},st.prototype.equalTo=st.prototype.xw=function(t,i){return this.width===t&&this.height===i},st.prototype.equalsApprox=st.prototype.Fc=function(t){return fi(this.width,t.width)&&fi(this.height,t.height)},st.prototype.isReal=st.prototype.G=function(){return isFinite(this.width)&&isFinite(this.height)},Nn.ea("Rect",Ln),Nn.Uh(Ln),Nn.Nd(Ln,{x:!0,y:!0,width:!0,height:!0}),Ln.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},Ln.prototype.setTo=Ln.prototype.m=function(t,i,e,n){return this.x=t,this.y=i,this.width=e,this.height=n,this},Ln.prototype.set=Ln.prototype.set=function(t){return this.Cb(),this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},Ln.prototype.setPoint=Ln.prototype.zf=function(t){return this.Cb(),this.x=t.x,this.y=t.y,this},Ln.prototype.setSize=function(t){return this.Cb(),this.width=t.width,this.height=t.height,this},Ln.prototype.copy=function(){var t=new Ln;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},(t=Ln.prototype).Ea=function(){return this.D=!0,Object.freeze(this),this},t.R=function(){return Object.isFrozen(this)?this:this.copy().freeze()},t.freeze=function(){return this.D=!0,this},t.Oa=function(){return Object.isFrozen(this)&&Nn.k("cannot thaw constant: "+this),this.D=!1,this},t.Cb=function(t){var i;this.D&&(i="The Rect is frozen, so its properties cannot be set: "+this.toString(),void 0!==t&&(i+="  to value: "+t),Nn.k(i))},Ln.parse=function(t){if("string"!=typeof t)return new Ln;t=t.split(" ");for(var i=0,e=0;""===t[i];)i++;var n=t[i++];n&&(e=parseFloat(n));for(var o=0;""===t[i];)i++;(n=t[i++])&&(o=parseFloat(n));for(var r=0;""===t[i];)i++;(n=t[i++])&&(r=parseFloat(n));for(var s=0;""===t[i];)i++;return(n=t[i++])&&(s=parseFloat(n)),new Ln(e,o,r,s)},Ln.stringify=function(t){return t instanceof Ln?t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString():t.toString()},Ln.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},Ln.prototype.equals=Ln.prototype.K=function(t){return t instanceof Ln&&(this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height)},Ln.prototype.equalTo=Ln.prototype.xw=function(t,i,e,n){return this.x===t&&this.y===i&&this.width===e&&this.height===n},Ln.prototype.equalsApprox=Ln.prototype.Fc=function(t){return fi(this.x,t.x)&&fi(this.y,t.y)&&fi(this.width,t.width)&&fi(this.height,t.height)},Ln.prototype.containsPoint=Ln.prototype.Fa=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},Ln.prototype.containsRect=Ln.prototype.Wj=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},Ln.prototype.contains=Ln.prototype.contains=function(t,i,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.x<=t&&t+e<=this.x+this.width&&this.y<=i&&i+n<=this.y+this.height},Ln.prototype.reset=function(){this.Cb(),this.height=this.width=this.y=this.x=0},Ln.prototype.offset=Ln.prototype.offset=function(t,i){return this.Cb(),this.x+=t,this.y+=i,this},Ln.prototype.inflate=Ln.prototype.Qf=function(t,i){return at(this,i,t,i,t)},Ln.prototype.addMargin=Ln.prototype.fw=function(t){return at(this,t.top,t.right,t.bottom,t.left)},Ln.prototype.subtractMargin=Ln.prototype.GI=function(t){return at(this,-t.top,-t.right,-t.bottom,-t.left)},Ln.prototype.grow=function(t,i,e,n){return at(this,t,i,e,n)},Ln.prototype.intersectRect=function(t){return ht(this,t.x,t.y,t.width,t.height)},Ln.prototype.intersect=function(t,i,e,n){return ht(this,t,i,e,n)},Ln.prototype.intersectsRect=Ln.prototype.xg=function(t){return this.ZD(t.x,t.y,t.width,t.height)},Ln.prototype.intersects=Ln.prototype.ZD=function(t,i,e,n){var o=this.width,r=this.x;return!(1/0!==o&&1/0!==e&&(o+=r,e+=t,isNaN(e)||isNaN(o)||e<r||o<t))&&(t=this.height,e=this.y,!(1/0!==t&&1/0!==n&&(t+=e,n+=i,isNaN(n)||isNaN(t)||n<e||t<i)))},Ln.prototype.unionPoint=Ln.prototype.dj=function(t){return Fn(this,t.x,t.y,0,0)},Ln.prototype.unionRect=Ln.prototype.ai=function(t){return Fn(this,t.x,t.y,t.width,t.height)},Ln.prototype.union=Ln.prototype.pF=function(t,i,e,n){return this.Cb(),void 0===e&&(e=0),void 0===n&&(n=0),Fn(this,t,i,e,n)},Ln.prototype.setSpot=Ln.prototype.$t=function(t,i,e){return this.Cb(),this.x=t-e.offsetX-e.x*this.width,this.y=i-e.offsetY-e.y*this.height,this},Ln.contains=Pe=function(t,i,e,n,o,r,s,a){return void 0===s&&(s=0),void 0===a&&(a=0),t<=o&&o+s<=t+e&&i<=r&&r+a<=i+n},Ln.intersects=function(t,i,e,n,o,r,s,a){return e+=t,!((s+=o)<t||e<o)&&(t=n+i,!((a+=r)<i||t<r))},Nn.defineProperty(Ln,{left:"left"},function(){return this.x},function(t){this.Cb(t),this.x=t}),Nn.defineProperty(Ln,{top:"top"},function(){return this.y},function(t){this.Cb(t),this.y=t}),Nn.defineProperty(Ln,{right:"right"},function(){return this.x+this.width},function(t){this.Cb(t),this.x+=t-(this.x+this.width)}),Nn.defineProperty(Ln,{bottom:"bottom"},function(){return this.y+this.height},function(t){this.Cb(t),this.y+=t-(this.y+this.height)}),Nn.defineProperty(Ln,{position:"position"},function(){return new Se(this.x,this.y)},function(t){this.Cb(t),this.x=t.x,this.y=t.y}),Nn.defineProperty(Ln,{size:"size"},function(){return new st(this.width,this.height)},function(t){this.Cb(t),this.width=t.width,this.height=t.height}),Nn.defineProperty(Ln,{bl:"center"},function(){return new Se(this.x+this.width/2,this.y+this.height/2)},function(t){this.Cb(t),this.x=t.x-this.width/2,this.y=t.y-this.height/2}),Nn.defineProperty(Ln,{na:"centerX"},function(){return this.x+this.width/2},function(t){this.Cb(t),this.x=t-this.width/2}),Nn.defineProperty(Ln,{ua:"centerY"},function(){return this.y+this.height/2},function(t){this.Cb(t),this.y=t-this.height/2}),Ln.prototype.isReal=Ln.prototype.G=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},Ln.prototype.isEmpty=function(){return 0===this.width&&0===this.height},Nn.ea("Margin",ut),Nn.Uh(ut),Nn.Nd(ut,{top:!0,right:!0,bottom:!0,left:!0}),ut.prototype.assign=function(t){this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left},ut.prototype.setTo=ut.prototype.m=function(t,i,e,n){return this.Cb(),this.top=t,this.right=i,this.bottom=e,this.left=n,this},ut.prototype.set=ut.prototype.set=function(t){return this.Cb(),this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},ut.prototype.copy=function(){var t=new ut;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},(t=ut.prototype).Ea=function(){return this.D=!0,Object.freeze(this),this},t.R=function(){return Object.isFrozen(this)?this:this.copy().freeze()},t.freeze=function(){return this.D=!0,this},t.Oa=function(){return Object.isFrozen(this)&&Nn.k("cannot thaw constant: "+this),this.D=!1,this},t.Cb=function(t){var i;this.D&&(i="The Margin is frozen, so its properties cannot be set: "+this.toString(),void 0!==t&&(i+="  to value: "+t),Nn.k(i))},ut.parse=function(t){if("string"!=typeof t)return new ut;t=t.split(" ");for(var i=0,e=NaN;""===t[i];)i++;var n=t[i++];if(n&&(e=parseFloat(n)),isNaN(e))return new ut;for(var o=NaN;""===t[i];)i++;if((n=t[i++])&&(o=parseFloat(n)),isNaN(o))return new ut(e);for(var r=NaN;""===t[i];)i++;if((n=t[i++])&&(r=parseFloat(n)),isNaN(r))return new ut(e,o);for(var s=NaN;""===t[i];)i++;return(n=t[i++])&&(s=parseFloat(n)),isNaN(s)?new ut(e,o):new ut(e,o,r,s)},ut.stringify=function(t){return t instanceof ut?t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString():t.toString()},ut.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},ut.prototype.equals=ut.prototype.K=function(t){return t instanceof ut&&(this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left)},ut.prototype.equalTo=ut.prototype.xw=function(t,i,e,n){return this.top===t&&this.right===i&&this.bottom===e&&this.left===n},ut.prototype.equalsApprox=ut.prototype.Fc=function(t){return fi(this.top,t.top)&&fi(this.right,t.right)&&fi(this.bottom,t.bottom)&&fi(this.left,t.left)},ut.prototype.isReal=ut.prototype.G=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Nn.Uh(ft),Nn.Nd(ft,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0}),ft.prototype.set=ft.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},ft.prototype.copy=function(){var t=new ft;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},ft.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},ft.prototype.equals=ft.prototype.K=function(t){return t instanceof ft&&(this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy)},ft.prototype.isIdentity=ft.prototype.vt=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy},ft.prototype.reset=ft.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},ft.prototype.multiply=ft.prototype.multiply=function(t){var i=this.m12*t.m11+this.m22*t.m12,e=this.m11*t.m21+this.m21*t.m22,n=this.m12*t.m21+this.m22*t.m22,o=this.m11*t.dx+this.m21*t.dy+this.dx,r=this.m12*t.dx+this.m22*t.dy+this.dy;return this.m11=this.m11*t.m11+this.m21*t.m12,this.m12=i,this.m21=e,this.m22=n,this.dx=o,this.dy=r,this},ft.prototype.multiplyInverted=ft.prototype.vE=function(t){var i=1/(t.m11*t.m22-t.m12*t.m21),e=t.m22*i,n=-t.m12*i,o=-t.m21*i,r=t.m11*i,s=i*(t.m21*t.dy-t.m22*t.dx),a=i*(t.m12*t.dx-t.m11*t.dy);return t=this.m12*e+this.m22*n,i=this.m11*o+this.m21*r,o=this.m12*o+this.m22*r,r=this.m11*s+this.m21*a+this.dx,s=this.m12*s+this.m22*a+this.dy,this.m11=this.m11*e+this.m21*n,this.m12=t,this.m21=i,this.m22=o,this.dx=r,this.dy=s,this},ft.prototype.invert=ft.prototype.Dz=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),i=-this.m12*t,e=-this.m21*t,n=this.m11*t,o=t*(this.m21*this.dy-this.m22*this.dx),r=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=i,this.m21=e,this.m22=n,this.dx=o,this.dy=r,this},ft.prototype.rotate=ft.prototype.rotate=function(t,i,e){if(360<=t?t-=360:t<0&&(t+=360),0===t)return this;this.translate(i,e);var n=0,o=0,o=90===t?(n=0,1):180===t?(n=-1,0):270===t?(n=0,-1):(o=t*Math.PI/180,n=Math.cos(o),Math.sin(o));t=this.m12*n+this.m22*o;var r=this.m11*-o+this.m21*n,s=this.m12*-o+this.m22*n;return this.m11=this.m11*n+this.m21*o,this.m12=t,this.m21=r,this.m22=s,this.translate(-i,-e),this},ft.prototype.translate=ft.prototype.translate=function(t,i){return this.dx+=this.m11*t+this.m21*i,this.dy+=this.m12*t+this.m22*i,this},ft.prototype.scale=ft.prototype.scale=function(t,i){return void 0===i&&(i=t),this.m11*=t,this.m12*=t,this.m21*=i,this.m22*=i,this},ft.prototype.transformPoint=ft.prototype.ub=function(t){var i=t.x,e=t.y;return t.x=i*this.m11+e*this.m21+this.dx,t.y=i*this.m12+e*this.m22+this.dy,t},ft.prototype.invertedTransformPoint=ft.prototype.Wh=function(t){var i=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*i,n=this.m11*i,o=i*(this.m12*this.dx-this.m11*this.dy),r=t.x,s=t.y;return t.x=r*this.m22*i+s*-this.m21*i+i*(this.m21*this.dy-this.m22*this.dx),t.y=r*e+s*n+o,t},ft.prototype.transformRect=ft.prototype.nF=function(t){var i=t.x,e=t.y,n=i+t.width,o=e+t.height,r=this.m11,s=this.m12,a=this.m21,h=this.m22,l=this.dx,u=this.dy,f=i*r+e*a+l,c=i*s+e*h+u,d=n*r+e*a+l,e=n*s+e*h+u,p=i*r+o*a+l,i=i*s+o*h+u,r=n*r+o*a+l,n=n*s+o*h+u,o=f,s=c,f=Math.min(f,d),o=Math.max(o,d),s=Math.min(s,e),c=Math.max(c,e),f=Math.min(f,p),o=Math.max(o,p),s=Math.min(s,i),c=Math.max(c,i),f=Math.min(f,r),o=Math.max(o,r),s=Math.min(s,n),c=Math.max(c,n);return t.x=f,t.y=s,t.width=o-f,t.height=c-s,t},Nn.ea("Spot",ct),Nn.Uh(ct),Nn.Nd(ct,{x:!0,y:!0,offsetX:!0,offsetY:!0}),ct.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY},ct.prototype.setTo=ct.prototype.m=function(t,i,e,n){return this.Cb(),this.x=t,this.y=i,this.offsetX=e,this.offsetY=n,this},ct.prototype.set=ct.prototype.set=function(t){return this.Cb(),this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ct.prototype.copy=function(){var t=new ct;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},(t=ct.prototype).Ea=function(){return this.D=!0,Object.freeze(this),this},t.R=function(){return Object.isFrozen(this)?this:this.copy().freeze()},t.freeze=function(){return this.D=!0,this},t.Oa=function(){return Object.isFrozen(this)&&Nn.k("cannot thaw constant: "+this),this.D=!1,this},t.Cb=function(t){var i;this.D&&(i="The Spot is frozen, so its properties cannot be set: "+this.toString(),void 0!==t&&(i+="  to value: "+t),Nn.k(i))},ct.parse=c=function(t){if("string"!=typeof t)return new ct;if("None"===(t=t.trim()))return Te;if("TopLeft"===t)return P;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return p;if("TopRight"===t)return T;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return b;if("Center"===t)return jn;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return x;if("BottomLeft"===t)return S;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return w;if("BottomRight"===t)return C;if("TopSide"===t)return D;if("LeftSide"===t)return L;if("RightSide"===t)return A;if("BottomSide"===t)return F;if("TopBottomSides"===t)return z;if("LeftRightSides"===t)return B;if("TopLeftSides"===t)return O;if("TopRightSides"===t)return E;if("BottomLeftSides"===t)return q;if("BottomRightSides"===t)return I;if("NotTopSide"===t)return G;if("NotLeftSide"===t)return R;if("NotRightSide"===t)return V;if("NotBottomSide"===t)return H;if("AllSides"===t)return K;if("Default"===t)return d;t=t.split(" ");for(var i=0,e=0;""===t[i];)i++;var n=t[i++];void 0!==n&&0<n.length&&(e=parseFloat(n));for(var o=0;""===t[i];)i++;void 0!==(n=t[i++])&&0<n.length&&(o=parseFloat(n));for(var r=0;""===t[i];)i++;void 0!==(n=t[i++])&&0<n.length&&(r=parseFloat(n));for(var s=0;""===t[i];)i++;return void 0!==(n=t[i++])&&0<n.length&&(s=parseFloat(n)),new ct(e,o,r,s)},ct.stringify=function(t){return t instanceof ct&&t.cd()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()},ct.prototype.toString=function(){return this.cd()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.K(Te)?"None":this.K(P)?"TopLeft":this.K(p)?"Top":this.K(T)?"TopRight":this.K(b)?"Left":this.K(jn)?"Center":this.K(x)?"Right":this.K(S)?"BottomLeft":this.K(w)?"Bottom":this.K(C)?"BottomRight":this.K(D)?"TopSide":this.K(L)?"LeftSide":this.K(A)?"RightSide":this.K(F)?"BottomSide":this.K(z)?"TopBottomSides":this.K(B)?"LeftRightSides":this.K(O)?"TopLeftSides":this.K(E)?"TopRightSides":this.K(q)?"BottomLeftSides":this.K(I)?"BottomRightSides":this.K(G)?"NotTopSide":this.K(R)?"NotLeftSide":this.K(V)?"NotRightSide":this.K(H)?"NotBottomSide":this.K(K)?"AllSides":this.K(d)?"Default":"None"},ct.prototype.equals=ct.prototype.K=function(t){return t instanceof ct&&((this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY)},ct.prototype.opposite=function(){return new ct(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},ct.prototype.includesSide=ct.prototype.cp=function(t){if(!this.Ui())return!1;if(!t.Ui())if(t.K(n))t=L;else if(t.K(o))t=A;else if(t.K(e))t=D;else{if(!t.K(r))return!1;t=F}return t=t.offsetY,(this.offsetY&t)===t},ct.prototype.isSpot=ct.prototype.cd=function(){return!isNaN(this.x)&&!isNaN(this.y)},ct.prototype.isNoSpot=ct.prototype.se=function(){return isNaN(this.x)||isNaN(this.y)},ct.prototype.isSide=ct.prototype.Ui=function(){return this.se()&&1===this.offsetX&&0!==this.offsetY},ct.prototype.isDefault=ct.prototype.Uc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},ct.None=Te=dt(new ct(0,0,0,0),0).Ea(),ct.Default=d=dt(new ct(0,0,-1,0),-1).Ea(),ct.TopLeft=P=new ct(0,0,0,0).Ea(),ct.TopCenter=p=new ct(.5,0,0,0).Ea(),ct.TopRight=T=new ct(1,0,0,0).Ea(),ct.LeftCenter=b=new ct(0,.5,0,0).Ea(),ct.Center=jn=new ct(.5,.5,0,0).Ea(),ct.RightCenter=x=new ct(1,.5,0,0).Ea(),ct.BottomLeft=S=new ct(0,1,0,0).Ea(),ct.BottomCenter=w=new ct(.5,1,0,0).Ea(),ct.BottomRight=C=new ct(1,1,0,0).Ea(),ct.MiddleTop=k=p,ct.MiddleLeft=M=b,ct.MiddleRight=N=x,ct.MiddleBottom=j=w,ct.Top=e=p,ct.Left=n=b,ct.Right=o=x,ct.Bottom=r=w,ct.TopSide=D=dt(new ct(0,0,1,Nn.ed),1).Ea(),ct.LeftSide=L=dt(new ct(0,0,1,Nn.Nc),1).Ea(),ct.RightSide=A=dt(new ct(0,0,1,Nn.Xc),1).Ea(),ct.BottomSide=F=dt(new ct(0,0,1,Nn.Wc),1).Ea(),ct.TopBottomSides=z=dt(new ct(0,0,1,Nn.ed|Nn.Wc),1).Ea(),ct.LeftRightSides=B=dt(new ct(0,0,1,Nn.Nc|Nn.Xc),1).Ea(),ct.TopLeftSides=O=dt(new ct(0,0,1,Nn.ed|Nn.Nc),1).Ea(),ct.TopRightSides=E=dt(new ct(0,0,1,Nn.ed|Nn.Xc),1).Ea(),ct.BottomLeftSides=q=dt(new ct(0,0,1,Nn.Wc|Nn.Nc),1).Ea(),ct.BottomRightSides=I=dt(new ct(0,0,1,Nn.Wc|Nn.Xc),1).Ea(),ct.NotTopSide=G=dt(new ct(0,0,1,Nn.Nc|Nn.Xc|Nn.Wc),1).Ea(),ct.NotLeftSide=R=dt(new ct(0,0,1,Nn.ed|Nn.Xc|Nn.Wc),1).Ea(),ct.NotRightSide=V=dt(new ct(0,0,1,Nn.ed|Nn.Nc|Nn.Wc),1).Ea(),ct.NotBottomSide=H=dt(new ct(0,0,1,Nn.ed|Nn.Nc|Nn.Xc),1).Ea(),ct.AllSides=K=dt(new ct(0,0,1,Nn.ed|Nn.Nc|Nn.Xc|Nn.Wc),1).Ea(),pt.prototype.copy=function(){var t=new pt;return t.ef[0]=this.ef[0],t.ef[1]=this.ef[1],t.ef[2]=this.ef[2],t.ef[3]=this.ef[3],t.ef[4]=this.ef[4],t.ef[5]=this.ef[5],t},yt.prototype.addColorStop=function(t,i){this.pD.push({offset:t,color:i})},(t=gt.prototype).arc=function(t,i,e,n,o,r){!function t(i,e,n,o,r,s,a){var h=Math.abs(r-s);{var l;r!==s&&(l=e+o*Math.cos(s),s=n+o*Math.sin(s),h>=2*Math.PI?(t(i,e,n,o,r,r+Math.PI,a),t(i,e,n,o,r+Math.PI,r+2*Math.PI,a),i.path.push(["M",l,s])):(e+=o*Math.cos(r),n+=o*Math.sin(r),h=180*h/Math.PI,r=a?0:1,a=180<=h==!!a?0:1,0!==i.path.length?i.path.push(["L",e,n]):i.path.push(["M",e,n]),i.path.push(["A",o,o,h,a,r,l,s])))}}(this,t,i,e,n,o,r)},t.beginPath=function(){this.path=[]},t.bezierCurveTo=function(t,i,e,n,o,r){this.path.push(["C",t,i,e,n,o,r])},t.clearRect=function(){},t.clip=function(){wt(this,"clipPath",this.path,new pt)},t.closePath=function(){this.path.push(["z"])},t.createLinearGradient=function(t,i,e,n){var o=new yt("linear");return o.x1=t,o.y1=i,o.x2=e,o.y2=n,o},t.createPattern=function(t){var i=new yt("pattern");return i.pattern=t,i},t.createRadialGradient=function(t,i,e,n,o,r){var s=new yt("radial");return s.x1=t,s.y1=i,s.r1=e,s.x2=n,s.y2=o,s.r2=r,s},t.drawImage=function(t,i,e,n,o,r,s,a,h){var l="";t instanceof HTMLCanvasElement&&(l=t.toDataURL()),t instanceof HTMLImageElement&&(l=t.src),(l={x:0,y:0,width:t.naturalWidth,height:t.naturalHeight,href:l}).preserveAspectRatio=ci(n,a)&&ci(o,h)?"xMidYMid slice":"none";var u="";h/=o,0===r&&0===s||(u+=" translate("+r+", "+s+")"),1===(a/=n)&&1===h||(u+=" scale("+a+", "+h+")"),0===i&&0===e||(u+=" translate("+-i+", "+-e+")"),0===i&&0===e&&n===t.naturalWidth&&o===t.naturalHeight||((r=vt(this,"clipPath",{id:t="CLIP"+Nn.Il++})).appendChild(vt(this,"rect",{x:i,y:e,width:n,height:o})),this.Cl.appendChild(r),l["clip-path"]="url(#"+t+")"),mt(this,"image",l,this.Pi,u),this.addElement("image",l)},t.fill=function(){wt(this,"fill",this.path,this.Pi)},t.ug=function(){this.pw?this.clip():this.fill()},t.fillRect=function(t,i,e,n){xt(this,"fill",[t,i,e,n],this.Pi)},t.fillText=function(t,i,e){t=[t,i,e],"left"===(i=this.textAlign)?i="start":"right"===i?i="end":"center"===i&&(i="middle"),mt(this,"fill",i={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":i},this.Pi),this.addElement("text",i,t[0])},t.lineTo=function(t,i){this.path.push(["L",t,i])},t.moveTo=function(t,i){this.path.push(["M",t,i])},t.quadraticCurveTo=function(t,i,e,n){this.path.push(["Q",t,i,e,n])},t.rect=function(t,i,e,n){this.path.push(["M",t,i],["L",t+e,i],["L",t+e,i+n],["L",t,i+n],["z"])},t.restore=function(){this.Pi=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.Vm=t.Vm,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},t.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,Vm:this.Vm,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],i=0;i<this.path.length;i++)t.push(this.path[i]);this.stack.push(t),this.stack.push(this.Pi.copy())},t.setTransform=function(t,i,e,n,o,r){1===t&&0===i&&0===e&&1===n&&0===o&&0===r||kt(this,t,i,e,n,o,r)},t.scale=function(){},t.stroke=function(){wt(this,"stroke",this.path,this.Pi)},t.bj=function(){this.rn||this.stroke()},t.strokeRect=function(t,i,e,n){xt(this,"stroke",[t,i,e,n],this.Pi)},t.addElement=function(t,i,e){return t=vt(this,t,i,e),0<this.tf.length?this.tf[this.tf.length-1].appendChild(t):this.Cl.appendChild(t),this.Mw=t},t.Ya=function(){var t,i,e,n,o,r,s;0===this.shadowOffsetX&&0===this.shadowOffsetY&&0===this.shadowBlur||(t="SHADOW"+Nn.Il++,i=this.addElement("filter",{id:t,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),e=vt(this,"feGaussianBlur",{in:"SourceAlpha",result:"blur",GK:this.shadowBlur/2}),n=vt(this,"feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),o=vt(this,"feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"}),r=vt(this,"feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),(s=vt(this,"feMerge",{})).appendChild(vt(this,"feMergeNode",{in:"offsetBlur"})),s.appendChild(vt(this,"feMergeNode",{in:"SourceGraphic"})),i.appendChild(e),i.appendChild(n),i.appendChild(o),i.appendChild(r),i.appendChild(s),0<this.tf.length&&this.tf[this.tf.length-1].setAttributeNS(null,"filter","url(#"+t+")"))},t.rA=function(t,i,e){this.ns=t,this.os=i,this.og=e},t.cn=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0},t.dn=function(){this.shadowOffsetX=this.ns,this.shadowOffsetY=this.os,this.shadowBlur=this.og},t.pz=function(){return!1},t.nz=function(){},(t=Mt.prototype).toDataURL=function(t,i){return this.xd.toDataURL(t,i)},t.getBoundingClientRect=function(){return this.xd.getBoundingClientRect()},t.focus=function(){return this.xd.focus()},t.addEventListener=function(t,i,e){this.xd.addEventListener(t,i,e)},t.removeEventListener=function(t,i,e){this.xd.removeEventListener(t,i,e)},Nn.defineProperty(Mt,{width:"width"},function(){return this.xd.width},function(t){this.xd.width=t}),Nn.defineProperty(Mt,{height:"height"},function(){return this.xd.height},function(t){this.xd.height=t}),Nn.defineProperty(Mt,{style:"style"},function(){return this.xd.style},function(t){this.xd.style=t}),Nn.defineProperty(Pt,{fillStyle:"fillStyle"},function(){return this.wa.fillStyle},function(t){this.Ix!==t&&(this.Ix=this.wa.fillStyle=t)}),Nn.defineProperty(Pt,{font:"font"},function(){return this.wa.font},function(t){this.Jx!==t&&(this.Jx=this.wa.font=t)}),Nn.defineProperty(Pt,{globalAlpha:"globalAlpha"},function(){return this.wa.globalAlpha},function(t){this.wa.globalAlpha=t}),Nn.defineProperty(Pt,{lineCap:"lineCap"},function(){return this.wa.lineCap},function(t){this.wa.lineCap=t}),Nn.defineProperty(Pt,{Vm:"lineDashOffset"},function(){return this.wa.Vm},function(t){this.wa.Vm=t}),Nn.defineProperty(Pt,{lineJoin:"lineJoin"},function(){return this.wa.lineJoin},function(t){this.wa.lineJoin=t}),Nn.defineProperty(Pt,{lineWidth:"lineWidth"},function(){return this.wa.lineWidth},function(t){this.wa.lineWidth=t}),Nn.defineProperty(Pt,{miterLimit:"miterLimit"},function(){return this.wa.miterLimit},function(t){this.wa.miterLimit=t}),Nn.defineProperty(Pt,{shadowBlur:"shadowBlur"},function(){return this.wa.shadowBlur},function(t){this.wa.shadowBlur=t}),Nn.defineProperty(Pt,{shadowColor:"shadowColor"},function(){return this.wa.shadowColor},function(t){this.wa.shadowColor=t}),Nn.defineProperty(Pt,{shadowOffsetX:"shadowOffsetX"},function(){return this.wa.shadowOffsetX},function(t){this.wa.shadowOffsetX=t}),Nn.defineProperty(Pt,{shadowOffsetY:"shadowOffsetY"},function(){return this.wa.shadowOffsetY},function(t){this.wa.shadowOffsetY=t}),Nn.defineProperty(Pt,{strokeStyle:"strokeStyle"},function(){return this.wa.strokeStyle},function(t){this.Kx!==t&&(this.Kx=this.wa.strokeStyle=t)}),Nn.defineProperty(Pt,{textAlign:"textAlign"},function(){return this.wa.textAlign},function(t){this.wa.textAlign=t}),Nn.defineProperty(Pt,{pt:"imageSmoothingEnabled"},function(){return this.wa.pt},function(t){this.wa.pt=t}),(t=Pt.prototype).arc=function(t,i,e,n,o,r){this.wa.arc(t,i,e,n,o,r)},t.beginPath=function(){this.wa.beginPath()},t.bezierCurveTo=function(t,i,e,n,o,r){this.wa.bezierCurveTo(t,i,e,n,o,r)},t.clearRect=function(t,i,e,n){this.wa.clearRect(t,i,e,n)},t.clip=function(){this.wa.clip()},t.closePath=function(){this.wa.closePath()},t.createLinearGradient=function(t,i,e,n){return this.wa.createLinearGradient(t,i,e,n)},t.createPattern=function(t,i){return this.wa.createPattern(t,i)},t.createRadialGradient=function(t,i,e,n,o,r){return this.wa.createRadialGradient(t,i,e,n,o,r)},t.drawImage=function(t,i,e,n,o,r,s,a,h){void 0===n?this.wa.drawImage(t,i,e):this.wa.drawImage(t,i,e,n,o,r,s,a,h)},t.fill=function(){this.wa.fill()},t.fillRect=function(t,i,e,n){this.wa.fillRect(t,i,e,n)},t.fillText=function(t,i,e){this.wa.fillText(t,i,e)},t.getImageData=function(t,i,e,n){return this.wa.getImageData(t,i,e,n)},t.lineTo=function(t,i){this.wa.lineTo(t,i)},t.measureText=function(t){return this.wa.measureText(t)},t.moveTo=function(t,i){this.wa.moveTo(t,i)},t.quadraticCurveTo=function(t,i,e,n){this.wa.quadraticCurveTo(t,i,e,n)},t.rect=function(t,i,e,n){this.wa.rect(t,i,e,n)},t.restore=function(){this.wa.restore()},Pt.prototype.rotate=function(t){this.wa.rotate(t)},(t=Pt.prototype).save=function(){this.wa.save()},t.setTransform=function(t,i,e,n,o,r){this.wa.setTransform(t,i,e,n,o,r)},t.scale=function(t,i){this.wa.scale(t,i)},t.stroke=function(){this.wa.stroke()},t.transform=function(t,i,e,n,o,r){1===t&&0===i&&0===e&&1===n&&0===o&&0===r||this.wa.transform(t,i,e,n,o,r)},t.translate=function(t,i){this.wa.translate(t,i)},t.ug=function(t){var i;t instanceof fs&&t.type===ts?((i=t.vn)<(t=t.Ox)?(this.scale(i/t,1),this.translate((t-i)/2,0)):t<i&&(this.scale(1,t/i),this.translate(0,(i-t)/2)),this.rn?this.clip():this.fill(),i<t?(this.translate(-(t-i)/2,0),this.scale(1/(i/t),1)):t<i&&(this.translate(0,-(i-t)/2),this.scale(1,1/(t/i)))):this.rn?this.clip():this.fill()},t.bj=function(){this.rn||this.stroke()},Nn.defineProperty(Pt,{pw:"clipInsteadOfFill"},function(){return this.rn},function(t){this.rn=t}),(t=Pt.prototype).rA=function(t,i,e){this.ns=t,this.os=i,this.og=e},t.cn=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0},t.dn=function(){this.shadowOffsetX=this.ns,this.shadowOffsetY=this.os,this.shadowBlur=this.og},t.pz=function(t,i){var e=this.wa;if(void 0!==e.setLineDash)e.setLineDash(t),e.lineDashOffset=i;else if(void 0!==e.webkitLineDash)e.webkitLineDash=t,e.webkitLineDashOffset=i;else{if(void 0===e.mozDash)return!1;e.mozDash=t,e.mozDashOffset=i}return!0},t.nz=function(){var t=this.wa;void 0!==t.setLineDash?(t.setLineDash(Nn.fj),t.lineDashOffset=0):void 0!==t.webkitLineDash?(t.webkitLineDash=Nn.fj,t.webkitLineDashOffset=0):void 0!==t.mozDash&&(t.mozDash=null,t.mozDashOffset=0)};var St,Ct,Nt,jt,Dt,Lt,At,Ft,zt,Bt,Ot,Et,qt,It,Gt,Rt,Vt=(Math.sqrt(2)-1)/3*4,Ht=new Se(0,0).Ea(),Kt=new Ln(0,0,0,0).Ea(),Ut=new ut(0,0,0,0).Ea(),Jt=new ut(2,2,2,2).Ea(),Yt=new Se(6,6).Ea(),Wt=new Se(-1/0,-1/0).Ea(),Xt=new Se(1/0,1/0).Ea(),Zt=new st(0,0).Ea(),Qt=new st(1,1).Ea(),$t=new st(6,6).Ea(),_t=new st(8,8).Ea(),ti=new st(10,10).Ea(),ii=new st(1/0,1/0).Ea(),ei=new Se(NaN,NaN).Ea(),ni=new st(NaN,NaN).Ea(),oi=new Ln(NaN,NaN,NaN,NaN).Ea(),ri=new ct(.156,.156).Ea(),si=new ct(.844,.844).Ea(),ai=new y,hi=new y,li=null;function ui(t){if(t<=0)return 0;if(null===(i=li)){for(var i=[],e=0;e<=2e3;e++)i[e]=Math.sqrt(e);li=i}return t<1?(e=1/t)<=2e3?1/i[0|e]:Math.sqrt(t):t<=2e3?i[0|t]:Math.sqrt(t)}function fi(t,i){var e=t-i;return e<.5&&-.5<e}function ci(t,i){var e=t-i;return e<5e-8&&-5e-8<e}function di(t,i,e,n,o,r,s){o<=0&&(o=1e-6);var a=0,h=0,l=0,u=0,a=t<e?(h=t,e):(h=e,t),l=i<n?(u=i,n):(u=n,i);if(t===e)return u<=s&&s<=l&&t-o<=r&&r<=t+o;if(i===n)return h<=r&&r<=a&&i-o<=s&&s<=i+o;if(a+=o,(h-=o)<=r&&r<=a&&(l+=o,(u-=o)<=s&&s<=l))if(l-u<a-h){if(!(o<t-e||o<e-t))return!0;if((r=(n-i)/(e-t)*(r-t)+i)-o<=s&&s<=r+o)return!0}else{if(!(o<i-n||o<n-i))return!0;if((s=(e-t)/(n-i)*(s-i)+t)-o<=r&&r<=s+o)return!0}return!1}function pi(t,i,e,n,o,r,s,a,h,l,u,f){if(di(t,i,s,a,f,e,n)&&di(t,i,s,a,f,o,r))return di(t,i,s,a,f,l,u);var c=(t+e)/2,d=(i+n)/2,p=(e+o)/2,y=(n+r)/2,g=((n=(c+p)/2)+(p=(p+(o=(o+s)/2))/2))/2,v=((e=(d+y)/2)+(y=(y+(r=(r+a)/2))/2))/2;return pi(t,i,c,d,n,e,g,v,h,l,u,f)||pi(g,v,p,y,o,r,s,a,h,l,u,f)}function yi(t,i,e,n,o,r,s,a,h,l){var u,f,c,d,p,y;di(t,i,s,a,h,e,n)&&di(t,i,s,a,h,o,r)?(Fn(l,t,i,0,0),Fn(l,s,a,0,0)):(f=(i+n)/2,d=(n+r)/2,p=((n=((u=(t+e)/2)+(c=(e+o)/2))/2)+(c=(c+(o=(o+s)/2))/2))/2,y=((e=(f+d)/2)+(d=(d+(r=(r+a)/2))/2))/2,yi(t,i,u,f,n,e,p,y,h,l),yi(p,y,c,d,o,r,s,a,h,l))}function gi(t,i,e,n,o,r,s,a,h,l){var u,f,c,d,p,y;di(t,i,s,a,h,e,n)&&di(t,i,s,a,h,o,r)?(0===l.length&&(l.push(t),l.push(i)),l.push(s),l.push(a)):(f=(i+n)/2,d=(n+r)/2,p=((n=((u=(t+e)/2)+(c=(e+o)/2))/2)+(c=(c+(o=(o+s)/2))/2))/2,y=((e=(f+d)/2)+(d=(d+(r=(r+a)/2))/2))/2,gi(t,i,u,f,n,e,p,y,h,l),gi(p,y,c,d,o,r,s,a,h,l))}function vi(t,i,e,n,o,r,s,a,h,l,u,f,c,d){var p=1-h;t=t*p+e*h,i=i*p+n*h,e=e*p+o*h,n=n*p+r*h,o=o*p+s*h,r=r*p+a*h,a=t*p+e*h,s=i*p+n*h,e=e*p+o*h,n=n*p+r*h,l.x=t,l.y=i,u.x=a,u.y=s,f.x=a*p+e*h,f.y=s*p+n*h,c.x=e,c.y=n,d.x=o,d.y=r}function mi(t,i,e,n,o,r,s,a){var h,l,u,f;di(t,i,o,r,s,e,n)?(0===a.length&&(a.push(t),a.push(i)),a.push(o),a.push(r)):(mi(t,i,h=(t+e)/2,l=(i+n)/2,u=(h+(e=(e+o)/2))/2,f=(l+(n=(n+r)/2))/2,s,a),mi(u,f,e,n,o,r,s,a))}function bi(t,i,e,n,o,r,s,a,h,l,u,f,c,d){if(c<=0&&(c=1e-6),di(t,i,s,a,c,e,n)&&di(t,i,s,a,c,o,r)){if(0===(p=(t-s)*(l-f)-(i-a)*(h-u)))return!1;if(c=((t*a-i*s)*(h-u)-(t-s)*(h*f-l*u))/p,p=((t*a-i*s)*(l-f)-(i-a)*(h*f-l*u))/p,(u<h?h-u:u-h)<(f<l?l-f:f-l)){if(s=h=0,s=i<a?(h=i,a):(h=a,i),p<h||s<p)return!1}else if(t<s?h=t:(h=s,s=t),c<h||s<c)return!1;return d.x=c,d.y=p,!0}var p,y=(i+n)/2,g=((p=(t+e)/2)+(e=(e+o)/2))/2,v=(y+(n=(n+r)/2))/2,m=(g+(e=(e+(o=(o+s)/2))/2))/2,b=(v+(n=(n+(r=(r+a)/2))/2))/2,x=(u-h)*(u-h)+(f-l)*(f-l),w=!1;return bi(t,i,p,y,g,v,m,b,h,l,u,f,c,d)&&((i=(d.x-h)*(d.x-h)+(d.y-l)*(d.y-l))<x&&(x=i,w=!0)),t=d.x,p=d.y,bi(m,b,e,n,o,r,s,a,h,l,u,f,c,d)&&((i=(d.x-h)*(d.x-h)+(d.y-l)*(d.y-l))<x?w=!0:(d.x=t,d.y=p)),w}function xi(t,i,e,n,o,r,s,a,h,l,u,f,c){var d=0;if(c<=0&&(c=1e-6),di(t,i,s,a,c,e,n)&&di(t,i,s,a,c,o,r)){if(0===(c=(t-s)*(l-f)-(i-a)*(h-u)))return d;var p=((t*a-i*s)*(l-f)-(i-a)*(h*f-l*u))/c;if(u<=(y=((t*a-i*s)*(h-u)-(t-s)*(h*f-l*u))/c))return d;if((u<h?h-u:u-h)<(f<l?l-f:f-l)){if(t=h=0,t=i<a?(h=i,a):(h=a,i),p<h||t<p)return d}else if(t<s?(h=t,t=s):h=s,y<h||t<y)return d;0<c?d++:c<0&&d--}else var y,p=(i+n)/2,g=(e+o)/2,v=(n+r)/2,m=((n=((y=(t+e)/2)+g)/2)+(g=(g+(o=(o+s)/2))/2))/2,b=((e=(p+v)/2)+(v=(v+(r=(r+a)/2))/2))/2,d=(d=d+xi(t,i,y,p,n,e,m,b,h,l,u,f,c))+xi(m,b,g,v,o,r,s,a,h,l,u,f,c);return d}function wi(t,i,e,n,o,r,s){if(ci(t,e)){var a=0;return(e=0,e=i<n?(a=i,n):(a=n,i),(n=r)<a)?(s.x=t,s.y=a,!1):e<n?(s.x=t,s.y=e,!1):(s.x=t,s.y=n,!0)}return ci(i,n)?(t<e?a=t:(a=e,e=t),(n=o)<a?(s.x=a,s.y=i,!1):e<n?(s.x=e,s.y=i,!1):(s.x=n,s.y=i,!0)):(a=((t-o)*(t-e)+(i-r)*(i-n))/((e-t)*(e-t)+(n-i)*(n-i)))<-5e-6?(s.x=t,s.y=i,!1):1.000005<a?(s.x=e,s.y=n,!1):(s.x=t+a*(e-t),s.y=i+a*(n-i),!0)}function ki(t,i,e,n,o,r,s,a,h){return fi(t,e)&&fi(i,n)?(h.x=t,h.y=i,!1):ci(o,s)?ci(t,e)?(wi(t,i,e,n,o,r,h),!1):wi(t,i,e,n,o,r=(n-i)/(e-t)*(o-t)+i,h):(a=(a-r)/(s-o),ci(t,e)?(e=s=0,e=i<n?(s=i,n):(s=n,i),(r=a*(t-o)+r)<s?(h.x=t,h.y=s,!1):e<r?(h.x=t,h.y=e,!1):(h.x=t,h.y=r,!0)):ci(a,s=(n-i)/(e-t))?(wi(t,i,e,n,o,r,h),!1):(o=(s*t-a*o+r-i)/(s-a),ci(s,0)?(t<e?s=t:(s=e,e=t),o<s?(h.x=s,h.y=i,!1):e<o?(h.x=e,h.y=i,!1):(h.x=o,h.y=i,!0)):wi(t,i,e,n,o,r=s*(o-t)+i,h)))}function Mi(t,i,e,n,o,r,s,a,h){var l,u=1e21,f=t,c=i;return!ki(t,i,t,n,o,r,s,a,h)||(l=(h.x-o)*(h.x-o)+(h.y-r)*(h.y-r))<u&&(u=l,f=h.x,c=h.y),ki(e,i,e,n,o,r,s,a,h)&&((l=(h.x-o)*(h.x-o)+(h.y-r)*(h.y-r))<u&&(u=l,f=h.x,c=h.y)),ki(t,i,e,i,o,r,s,a,h)&&((l=(h.x-o)*(h.x-o)+(h.y-r)*(h.y-r))<u&&(u=l,f=h.x,c=h.y)),ki(t,n,e,n,o,r,s,a,h)&&((l=(h.x-o)*(h.x-o)+(h.y-r)*(h.y-r))<u&&(u=l,f=h.x,c=h.y)),h.x=f,h.y=c,u<1e21}function Pi(t,i,e,n,o,r,s,a,h){var l=o-s,u=s=0,u=0===(e=t-e)||0==l?0===e?(a=(r-a)/l)*(s=t)+(r-a*o):(n=(i-n)/e)*(s=o)+(i-n*t):(n=(i-n)/e)*(s=(r-(a=(r-a)/l)*o-(t=i-n*t))/(n-a))+t;return h.m(s,u),h}function Ti(t,i,e){var n=i.x,o=i.y,r=e.x,s=e.y,a=t.left,h=t.right,l=t.top,u=t.bottom;return n===r?(r=t=0,r=o<s?(t=o,s):(t=s,o),a<=n&&n<=h&&t<=u&&l<=r):o===s?(n<r?t=n:(t=r,r=n),l<=o&&o<=u&&t<=h&&a<=r):!!(t.Fa(i)||t.Fa(e)||Si(a,l,h,l,n,o,r,s)||Si(h,l,h,u,n,o,r,s)||Si(h,u,a,u,n,o,r,s)||Si(a,u,a,l,n,o,r,s))}function Si(t,i,e,n,o,r,s,a){return Ci(t,i,e,n,o,r)*Ci(t,i,e,n,s,a)<=0&&Ci(o,r,s,a,t,i)*Ci(o,r,s,a,e,n)<=0}function Ci(t,i,e,n,o,r){return e-=t,0===(r=(t=o-t)*(n-=i)-(i=r-i)*e)&&(0<(r=t*e+i*n)&&((r=(t-e)*e+(i-n)*n)<0&&(r=0))),r<0?-1:0<r?1:0}function Ni(t){return t<0&&(t+=360),360<=t&&(t-=360),t}function ji(t,i,e,n){var o=Math.PI;n||(i*=o/180,e*=o/180),n=i<e?1:-1;var r=[],s=o/2,a=i;for(i=Math.min(2*o,Math.abs(e-i));1e-5<i;){var o=((e=a+n*Math.min(i,s))-a)/2,h=t*Math.cos(o),l=(c=h*h+(f=-(u=t*Math.sin(o)))*f)+h*h+f*u,u=h-(c=4/3*(Math.sqrt(2*c*l)-l)/(h*u-f*h))*f,f=-(h=f+c*h),c=o+a,o=Math.cos(c),c=Math.sin(c);r.push([0+t*Math.cos(a),0+t*Math.sin(a),0+u*o-h*c,0+u*c+h*o,0+u*o-f*c,0+u*c+f*o,0+t*Math.cos(e),0+t*Math.sin(e)]),i-=Math.abs(e-a),a=e}return r}function Di(t,i,e,n,o,r,s){var a=(e=Math.floor((t-e)/o)*o+e)+o-t<o/2?e+o:e;(t=n=Math.floor((i-n)/r)*r+n)+r-i<r/2&&(t=n+r),s.m(a,t)}function Li(t,i){for(var e,n=Math.max(t,i),o=Math.min(t,i),r=1;e=n%o,n=r=o,0<(o=e););return r}function Ai(t){1<arguments.length&&Nn.k("Geometry constructor can take at most one optional argument, the Geometry type."),Nn.ec(this),this.D=!1,void 0===t&&(t=jt),this.ia=t,this.Bb=this.vb=this.Cc=this.vc=0,this.kj=new Dn(qi),this.Su=this.kj.F,this.Cu=(new Ln).freeze(),this.$a=!0,this.Nh=P,this.Oh=C,this.Tn=this.Vn=NaN,this.mi=vs}function Fi(t,i){if(t.type!==St||i.type!==jt)return!1;if(1===i.Ub.count){var e=i.Ub.da(0);if(1===e.sb.count&&fi(t.Aa,e.Aa)&&fi(t.ya,e.ya)&&((e=e.sb.da(0)).type===Ft&&fi(t.I,e.I)&&fi(t.J,e.J)))return!0}return!1}function zi(t,i){for(var e=t.length,n=Nn.L(),o=0;o<e;o++){var r=t[o];n.x=r[0],n.y=r[1],i.ub(n),r[0]=n.x,r[1]=n.y,n.x=r[2],n.y=r[3],i.ub(n),r[2]=n.x,r[3]=n.y,n.x=r[4],n.y=r[5],i.ub(n),r[4]=n.x,r[5]=n.y,n.x=r[6],n.y=r[7],i.ub(n),r[6]=n.x,r[7]=n.y}Nn.v(n)}function Bi(t,i,e){switch(t.type){case St:case Ct:case Nt:e?i.m(t.vc,t.Cc,0,0):Fn(i,t.vc,t.Cc,0,0),Fn(i,t.vb,t.Bb,0,0);break;case jt:t=(n=t.Ub).n;for(var n=n.length,o=0;o<n;o++){var r=t[o];e&&0===o?i.m(r.Aa,r.ya,0,0):Fn(i,r.Aa,r.ya,0,0);for(var s=r.sb.n,a=s.length,h=r.Aa,l=r.ya,u=0;u<a;u++){switch((d=s[u]).type){case Ft:case At:Fn(i,h=d.I,l=d.J,0,0);break;case zt:yi(h,l,d.rc,d.Kc,d.kh,d.lh,d.I,d.J,.5,i),h=d.I,l=d.J;break;case Bt:!function t(i,e,n,o,r,s,a,h){var l,u,f,c;di(i,e,r,s,a,n,o)?(Fn(h,i,e,0,0),Fn(h,r,s,0,0)):(t(i,e,l=(i+n)/2,u=(e+o)/2,f=(l+(n=(n+r)/2))/2,c=(u+(o=(o+s)/2))/2,a,h),t(f,c,n,o,r,s,a,h))}(h,l,d.rc,d.Kc,d.I,d.J,.5,i),h=d.I,l=d.J;break;case Ot:case Et:var f=d.type===Ot?Gi(d,r):Ri(d,r,h,l),c=f.length;if(0===c){Fn(i,h=d.na,l=d.ua,0,0);break}for(var d=null,p=0;p<c;p++)yi((d=f[p])[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,i);null!==d&&(h=d[6],l=d[7]);break;default:Nn.k("Unknown Segment type: "+d.type)}}}break;default:Nn.k("Unknown Geometry type: "+t.type)}}function Oi(t,i,e,n,o,r,s,a){if(di(o,r,s,a,.05,t,i))return NaN;var h=(t-e)*(r-a);if(0==h)return 0;var l=((t*n-i*e)*(o-s)-(t-e)*(o*a-r*s))/h;if(i=(t*n-i*e)*(r-a)/h,t<=l)return 0;if((s<o?o-s:s-o)<(a<r?r-a:a-r)){if(o=t=0,o=r<a?(t=r,a):(t=a,r),i<t||o<i)return 0}else if(o<s?(t=o,o=s):t=s,l<t||o<l)return 0;return 0<h?1:-1}function Ei(t,i,e,n){for(var o=(t=t.Ub.n).length,r=0;r<o;r++)if(t[r].Fa(i,e,n))return!0;return!1}function qi(t,i,e,n){Nn.ec(this),this.D=!1,void 0===e&&(e=!0),this.Sl=e,void 0===n&&(n=!0),this.Wn=n,this.vc=void 0!==t?t:0,this.Cc=void 0!==i?i:0,this.so=new Dn(Ii),this.Rv=this.so.F,this.$a=!0}function Ii(t,i,e,n,o,r,s,a){Nn.ec(this),this.D=!1,void 0===t&&(t=Ft),this.ia=t,this.vb=void 0!==i?i:0,this.Bb=void 0!==e?e:0,void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=0),t===Et?((t=r%360)<0&&(t+=360),this.sd=t,this.Fe=0,this.Xg=Math.max(n,0),this.ng=Math.max(o,0),this.ao="boolean"==typeof s&&!!s,this.sn=!!a):(this.sd=n,this.Fe=o,t===Ot&&(r=Math.max(r,0)),this.Xg=r,"number"==typeof s?(t===Ot&&(s=Math.max(s,0)),this.ng=s):this.ng=0,this.sn=this.ao=!1),this.Ch=!1,this.$a=!0,this.cg=null}function Gi(t,i){if(null!==t.cg&&!1===i.$a)return t.cg;var e=t.radiusX,n=t.radiusY;if(void 0===n&&(n=e),0===e||0===n)return t.cg=[],t.cg;var o,r=t.sd,s=t.Fe,a=ji(e<n?e:n,t.xe,t.xe+t.Af,!1);for(e!==n&&((o=Nn.ph()).reset(),e<n?o.scale(1,n/e):o.scale(e/n,1),zi(a,o),Nn.Ze(o)),e=a.length,n=0;n<e;n++)(o=a[n])[0]+=r,o[1]+=s,o[2]+=r,o[3]+=s,o[4]+=r,o[5]+=s,o[6]+=r,o[7]+=s;return t.cg=a,t.cg}function Ri(t,i,e,n){function o(t,i,e,n){return(t*n<i*e?-1:1)*Math.acos((t*e+i*n)/(Math.sqrt(t*t+i*i)*Math.sqrt(e*e+n*n)))}if(null!==t.cg&&!1===i.$a)return t.cg;i=t.Xg;var r=t.ng;if(0===i||0===r)return t.cg=[],t.cg;var s=Math.PI/180*t.sd,a=t.ao,h=t.sn,l=t.vb,u=t.Bb,f=Math.cos(s),c=Math.sin(s),d=f*(e-l)/2+c*(n-u)/2,p=d*d/(i*i)+(s=-c*(e-l)/2+f*(n-u)/2)*s/(r*r);return 1<p&&(i*=Math.sqrt(p),r*=Math.sqrt(p)),p=(a===h?-1:1)*Math.sqrt((i*i*r*r-i*i*s*s-r*r*d*d)/(i*i*s*s+r*r*d*d)),isNaN(p)&&(p=0),a=p*i*s/r,p=p*-r*d/i,isNaN(a)&&(a=0),isNaN(p)&&(p=0),e=(e+l)/2+f*a-c*p,n=(n+u)/2+c*a+f*p,u=o(1,0,(d-a)/i,(s-p)/r),s=o(f=(d-a)/i,l=(s-p)/r,d=(-d-a)/i,a=(-s-p)/r),(d=(f*d+l*a)/(Math.sqrt(f*f+l*l)*Math.sqrt(d*d+a*a)))<=-1?s=Math.PI:1<=d&&(s=0),!h&&0<s&&(s-=2*Math.PI),h&&s<0&&(s+=2*Math.PI),h=r<i?1:i/r,d=r<i?r/i:1,i=ji(r<i?i:r,u,u+s,!0),(r=Nn.ph()).reset(),r.translate(e,n),r.rotate(t.sd,0,0),r.scale(h,d),zi(i,r),Nn.Ze(r),t.cg=i,t.cg}function Vi(){this.W=null,this.Sy=new Se(0,0).freeze(),this.Wx=new Se(0,0).freeze(),this.yu=this.uv=0,this.zu=1,this.jv="",this.aw=this.Pu=!1,this.Lu=this.Bu=0,this.gj=this.Xu=this.gv=!1,this.Eq=null,this.Zv=0,this.pg=this.Yv=null}function Hi(){this.W=null,this.Ob="",this.Dv=this.Wv=null,this.Au=!1}function Ki(){this.bq=It,this.lm=this.tv="",this.Cr=this.Dr=this.Gr=this.Hr=this.Fr=this.W=this.Vd=null}function Ui(t){1<arguments.length&&Nn.k("Model constructor can only take one optional argument, the Array of node data."),Nn.ec(this),this.qq=this.Ob="",this.si=!1,this.zy={},this.If=[],this.uc=new nt(null,Object),this.Dj="key",this.yn=this.fo=null,this.iq=this.Eu=!1,this.Tp=null,this.fm="category",this.ni=new nt(null,Q),this.xj=null,this.Gi=!1,this.Ry=null,this.la=new ke,void 0!==t&&(this.Yf=t)}function Ji(t){return',\n  "modelData": '+_i(t,t.bk)}function Yi(t,i){var e=i.modelData;Nn.Ta(e)&&(t.Qt(e),t.bk=e)}function Wi(t,i,e,n){if(i===e)return 1;if((void 0===i?"undefined":_typeof(i))===(void 0===e?"undefined":_typeof(e))&&"function"!=typeof i&&"function"!=typeof e){if(Array.isArray(i)&&Array.isArray(e)){if(n.ja(i)===e)return 1;if(n.add(i,e),i.length!==e.length)return;for(var o=0;o<i.length;o++)if(!Wi(t,i[o],e[o],n))return;return 1}if(Nn.Ta(i)&&Nn.Ta(e)){if(n.ja(i)===e)return 1;for(o in n.add(i,e),i){var r=i[o];if(!Qi(o,r)){var s=e[o];if(void 0===s||!Wi(t,r,s,n))return}}for(var a in e)if(!Qi(a,s=e[a])&&(void 0===(r=i[a])||!Wi(t,r,s,n)))return;return 1}}}function Xi(t,i,e){t[e]!==i[e]&&Nn.k("Model.computeJsonDifference: Model."+e+' is not the same in both models: "'+t[e]+'" and "'+i[e]+'"')}function Zi(t,i,e){void 0===e&&(e=!1);var n=Nn.Va(i);if(n<=0)return"[]";var o=new u;o.add("[ "),e&&1<n&&o.add("\n");for(var r=0;r<n;r++){var s=Nn.Pa(i,r);void 0!==s&&(0<r&&(o.add(","),e&&o.add("\n")),o.add(t.iu(s)))}return e&&1<n&&o.add("\n"),o.add(" ]"),o.toString()}function Qi(t,i){return void 0===i||"__gohashid"===t||"_"===t[0]||"function"==typeof i}function $i(t){return isNaN(t)?"NaN":1/0===t?"9e9999":-1/0===t?"-9e9999":t}function _i(t,i){var e=i;if(e instanceof Se){var n=e;i={class:"go.Point",x:$i(n.x),y:$i(n.y)}}else if(e instanceof st){var o=e;i={class:"go.Size",width:$i(o.width),height:$i(o.height)}}else if(e instanceof Ln)i={class:"go.Rect",x:$i(e.x),y:$i(e.y),width:$i(e.width),height:$i(e.height)};else if(e instanceof ut)i={class:"go.Margin",top:$i(e.top),right:$i(e.right),bottom:$i(e.bottom),left:$i(e.left)};else if(e instanceof ct)i=(o=e).cd()?{class:"go.Spot",x:$i(o.x),y:$i(o.y),offsetX:$i(o.offsetX),offsetY:$i(o.offsetY)}:{class:"go.Spot",enum:o.toString()};else if(e instanceof fs){if(i={class:"go.Brush",type:e.type.name},e.type===$r?i.color=e.color:e.type!==_r&&e.type!==ts||(i.start=e.start,i.end=e.end,e.type===ts&&(0!==e.cu&&(i.startRadius=$i(e.cu)),isNaN(e.bt)||(i.endRadius=$i(e.bt)))),null!==e.Ys){for(var r={},s=e.Ys.i;s.next();)r[s.key]=s.value;i.colorStops=r}}else if(e instanceof Ai)i={class:"go.Geometry",type:e.type.name},0!==e.Aa&&(i.startX=$i(e.Aa)),0!==e.ya&&(i.startY=$i(e.ya)),0!==e.I&&(i.endX=$i(e.I)),0!==e.J&&(i.endY=$i(e.J)),e.B.K(P)||(i.spot1=e.B),e.C.K(C)||(i.spot2=e.C),e.type===jt&&(i.path=Dt(e));else if(e instanceof l)i={class:"go.EnumValue",classType:Nn.$e(e.pe),name:e.name};else if(e instanceof ks||e instanceof Oo||e instanceof zo||e instanceof Ui||e instanceof Ae||e instanceof Ce||e instanceof Sf||e instanceof Nf||e instanceof ke||e instanceof we)return Nn.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+e.toString()),"{}";for(n in r="{",e=!0,i)if(!Qi(n,o=Nn.qb(i,n)))if(e?e=!1:r+=", ",r+='"'+n+'":',"points"===n&&o instanceof Dn&&o.ia===Se){for(s=o,o="[",s=s.i;s.next();){var a=s.value;1<o.length&&(o+=","),o+=t.iu(a.x),o+=",",o+=t.iu(a.y)}r+=o+="]"}else r+=t.iu(o);return r+"}"}function te(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function ie(t,i,e,n,o,r,s,a,h){void 0===a&&(a=null),void 0===h&&(h=null);var l=new Ki;l.ba=t,l.wc=e,l.gf=i,l.propertyName=n,l.object=o,l.oldValue=r,l.Bg=a,l.newValue=s,l.zg=h,t.nw(l)}function ee(t,i,e){"string"!=typeof t&&"function"!=typeof t&&Nn.Ed(t,"string or function",i,e)}function ne(t){return"number"==typeof t||"string"==typeof t}function oe(t,i,e){var n,o=t.gb(i);void 0!==o&&t.uc.ja(o)===i||(t.Nz(i),void 0===(o=t.gb(i))?Nn.k("Model.makeNodeDataKeyUnique failed on "+i+".  Data not added to Model."):(t.uc.add(o,i),e&&(n=Nn.Va(t.If),Nn.Mi(t.If,n,i)),ie(t,"nodeDataArray",Gt,"nodeDataArray",t,null,i,null,n),t.zp(i),t.yp(i)))}function re(t,i,e){var n=t.gb(i);if(void 0!==n&&t.uc.contains(n)){if(t.uc.remove(n),e){var o=Nn.az(t.If,i);if(o<0)return;Nn.Th(t.If,o)}ie(t,"nodeDataArray",Rt,"nodeDataArray",t,i,null,o,null),t.gu(i)}}function se(t,i,e){var n;void 0!==i&&(null===(n=t.ni.ja(i))&&(n=new Q(Object),t.ni.add(i,n)),n.add(e))}function ae(t,i,e){var n;void 0===i||(n=t.ni.ja(i))instanceof Q&&(null==e?t.ni.remove(i):(n.remove(e),0===n.count&&t.ni.remove(i)))}function he(t,i){if(void 0===i)return null;var e=t.ni.ja(i);return e instanceof Q?e:null}function le(t,i,e){if(t.hz&&Array.isArray(i)){var n=[];for(e=0;e<i.length;e++){var o=le(t,i[e],t.gz);n.push(o)}return Nn.ec(n),n}if(e&&Nn.Ta(i)){for(n in e=(e=i.constructor)?new e:{},i){var r;"__gohashid"!==n&&((r=(r=o=Nn.qb(i,n))instanceof ks||r instanceof Oo||r instanceof zo||r instanceof Ca||r instanceof so||r instanceof Ae||r instanceof Ce||r instanceof Sf||r instanceof Vi||r instanceof Hi?("_"!==n[0]&&Nn.trace('Warning: found GraphObject or Diagram reference when copying model data on property "'+n+'" of data object: '+i.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+r.toString()),!0):r instanceof Ui||r instanceof ke||r instanceof we||r instanceof Ki)||(o=le(t,o,!1)),Nn.Ka(e,n,o))}return Nn.ec(e),e}return i instanceof Se||i instanceof st||i instanceof Ln||i instanceof ct||i instanceof ut?i.copy():i}Nn.ea("Geometry",Ai),Nn.Uh(Ai),Ai.prototype.copy=function(){var t=new Ai;t.ia=this.ia,t.vc=this.vc,t.Cc=this.Cc,t.vb=this.vb,t.Bb=this.Bb;for(var i=this.kj.n,e=i.length,n=t.kj,o=0;o<e;o++){var r=i[o].copy();n.add(r)}return t.Su=this.Su,t.Cu.assign(this.Cu),t.$a=this.$a,t.Nh=this.Nh.R(),t.Oh=this.Oh.R(),t.Vn=this.Vn,t.Tn=this.Tn,t.mi=this.mi,t},Ai.Line=St=Nn.p(Ai,"Line",0),Ai.Rectangle=Ct=Nn.p(Ai,"Rectangle",1),Ai.Ellipse=Nt=Nn.p(Ai,"Ellipse",2),Ai.Path=jt=Nn.p(Ai,"Path",3),Ai.prototype.Ea=function(){return this.freeze(),Object.freeze(this),this},Ai.prototype.freeze=function(){this.D=!0;var t=this.Ub;t.freeze();for(var i=(t=t.n).length,e=0;e<i;e++)t[e].freeze();return this},Ai.prototype.Oa=function(){Object.isFrozen(this)&&Nn.k("cannot thaw constant: "+this),this.D=!1;var t=this.Ub;t.Oa();for(var i=(t=t.n).length,e=0;e<i;e++)t[e].Oa();return this},Ai.prototype.equalsApprox=Ai.prototype.Fc=function(t){if(!(t instanceof Ai))return!1;if(this.type!==t.type)return this.type===St&&t.type===jt?Fi(this,t):t.type===St&&this.type===jt&&Fi(t,this);if(this.type!==jt)return fi(this.Aa,t.Aa)&&fi(this.ya,t.ya)&&fi(this.I,t.I)&&fi(this.J,t.J);var i=this.Ub.n;t=t.Ub.n;var e=i.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(!i[n].Fc(t[n]))return!1;return!0},Ai.stringify=Dt=function(t){return t.toString()},Ai.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case St:return t<0?"M"+this.Aa.toString()+" "+this.ya.toString()+"L"+this.I.toString()+" "+this.J.toString():"M"+this.Aa.toFixed(t)+" "+this.ya.toFixed(t)+"L"+this.I.toFixed(t)+" "+this.J.toFixed(t);case Ct:return(n=new Ln(this.Aa,this.ya,0,0)).pF(this.I,this.J,0,0),t<0?"M"+n.x.toString()+" "+n.y.toString()+"H"+n.right.toString()+"V"+n.bottom.toString()+"H"+n.left.toString()+"z":"M"+n.x.toFixed(t)+" "+n.y.toFixed(t)+"H"+n.right.toFixed(t)+"V"+n.bottom.toFixed(t)+"H"+n.left.toFixed(t)+"z";case Nt:if((n=new Ln(this.Aa,this.ya,0,0)).pF(this.I,this.J,0,0),t<0){var i=n.left.toString()+" "+(n.y+n.height/2).toString(),e=n.right.toString()+" "+(n.y+n.height/2).toString();return"M"+i+"A"+(n.width/2).toString()+" "+(n.height/2).toString()+" 0 0 1 "+e+"A"+(n.width/2).toString()+" "+(n.height/2).toString()+" 0 0 1 "+i}return i=n.left.toFixed(t)+" "+(n.y+n.height/2).toFixed(t),e=n.right.toFixed(t)+" "+(n.y+n.height/2).toFixed(t),"M"+i+"A"+(n.width/2).toFixed(t)+" "+(n.height/2).toFixed(t)+" 0 0 1 "+e+"A"+(n.width/2).toFixed(t)+" "+(n.height/2).toFixed(t)+" 0 0 1 "+i;case jt:for(var n="",e=(i=this.Ub.n).length,o=0;o<e;o++){var r=i[o];0<o&&(n+=" x "),r.ut&&(n+="F "),n+=r.toString(t)}return n;default:return this.type.toString()}},Ai.fillPath=function(t){"string"!=typeof t&&Nn.Ed(t,"string",Ai,"fillPath:str");for(var i=(t=t.split(/[Xx]/)).length,e="",n=0;n<i;n++)var o=t[n],e=null!==o.match(/[Ff]/)?0===n?e+o:e+("X"+(" "===o[0]?"":" "))+o:e+((0===n?"":"X ")+"F"+(" "===o[0]?"":" "))+o;return e},Ai.parse=Lt=function(t,i){function e(){return T-1<=b||null!==m[b+1].match(/[A-Za-z]/)}function n(){return m[++b]}function o(){var t=new Se(parseFloat(n()),parseFloat(n()));return x===x.toLowerCase()&&(t.x=P.x+t.x,t.y=P.y+t.y),t}function r(){return P=o()}function s(){return M=o()}function a(){return"c"!==w.toLowerCase()&&"s"!==w.toLowerCase()?P:new Se(2*P.x-M.x,2*P.y-M.y)}void 0===i&&(i=!1),"string"!=typeof t&&Nn.Ed(t,"string",Ai,"parse:str");for(var h,l,u,f,c,d,p,y,g,v,m=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2")).replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/(\.[0-9]*)(\.)/gm,"$1 $2")).replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" "),b=-1,x="",w="",k=new Se(0,0),M=new Se(0,0),P=new Se(0,0),T=m.length,S=Nn.s(),C=!1,N=!1,j=!0;!(T-1<=b);)if(w=x,""!==(x=n()))switch(x.toUpperCase()){case"X":N=C=!(j=!0);break;case"M":var D=r();for(null===S.Rb||!0===j?(gh(S,D.x,D.y,C,!1,!N),j=!1):S.moveTo(D.x,D.y),k=P;!e();)D=r(),S.lineTo(D.x,D.y);break;case"L":for(;!e();)D=r(),S.lineTo(D.x,D.y);break;case"H":for(;!e();)P=D=new Se((x===x.toLowerCase()?P.x:0)+parseFloat(n()),P.y),S.lineTo(P.x,P.y);break;case"V":for(;!e();)P=D=new Se(P.x,(x===x.toLowerCase()?P.y:0)+parseFloat(n())),S.lineTo(P.x,P.y);break;case"C":for(;!e();){var L=o(),A=s(),D=r();mh(S,L.x,L.y,A.x,A.y,D.x,D.y)}break;case"S":for(;!e();)L=a(),A=s(),D=r(),mh(S,L.x,L.y,A.x,A.y,D.x,D.y);break;case"Q":for(;!e();)A=s(),D=r(),bh(S,A.x,A.y,D.x,D.y);break;case"T":for(;!e();)M=A=a(),D=r(),bh(S,A.x,A.y,D.x,D.y);break;case"B":for(;!e();){var D=parseFloat(n()),L=parseFloat(n()),A=parseFloat(n()),F=parseFloat(n()),z=parseFloat(n()),B=z,O=!1;e()||(B=parseFloat(n()),e()||(O=0!==parseFloat(n()))),x===x.toLowerCase()&&(A+=P.x,F+=P.y),S.arcTo(D,L,A,F,z,B,O)}break;case"A":for(;!e();)L=Math.abs(parseFloat(n())),A=Math.abs(parseFloat(n())),F=parseFloat(n()),z=!!parseFloat(n()),B=!!parseFloat(n()),D=r(),l=S,u=L,f=A,c=F,d=z,p=B,y=D.x,g=D.y,(v=void 0)===v&&(v=!1),null===l.o&&Nn.k("StreamGeometryContext has been closed"),null===l.Rb&&Nn.k("Need to call beginFigure first"),u=new Ii(Et,y,g,u,f,c,d,p),v&&u.close(),l.Rb.sb.add(u);break;case"Z":D=S.o.Ub.n[S.o.Ub.length-1],vh(S),P=k;break;case"F":for(D="",L=1;m[b+L];)if(null!==m[b+L].match(/[Uu]/))L++;else{if(null!==m[b+L].match(/[A-Za-z]/)){D=m[b+L];break}L++}D.match(/[Mm]/)?C=!0:(null===(h=S).o&&Nn.k("StreamGeometryContext has been closed"),null===h.Rb&&Nn.k("Need to call beginFigure first"),0<h.Rb.sb.length&&(h.Rb.ut=!0));break;case"U":for(D="",L=1;m[b+L];)if(null!==m[b+L].match(/[Ff]/))L++;else{if(null!==m[b+L].match(/[A-Za-z]/)){D=m[b+L];break}L++}D.match(/[Mm]/)?N=!0:S.Ya(!1)}if(k=S.o,Nn.q(S),i)for(S=k.Ub.i;S.next();)(D=S.value).ut=!0;return k},Ai.prototype.Hz=function(){if(this.$a||this.Su!==this.Ub.F)return!0;for(var t=this.Ub.n,i=t.length,e=0;e<i;e++)if(t[e].Hz())return!0;return!1},Ai.prototype.CA=function(){this.$a=!1,this.Su=this.Ub.F;for(var t=this.Ub.n,i=t.length,e=0;e<i;e++)t[e].CA()},Ai.prototype.$g=function(){var t=this.Cu;t.Oa(),isNaN(this.Vn)||isNaN(this.Tn)?t.m(0,0,0,0):t.m(0,0,this.Vn,this.Tn),Bi(this,t,!1),Fn(t,0,0,0,0),t.freeze()},Ai.prototype.computeBoundsWithoutOrigin=Ai.prototype.sG=function(){var t=new Ln;return Bi(this,t,!0),t},Ai.prototype.normalize=Ai.prototype.normalize=function(){this.D&&Nn.ka(this);var t=this.sG();return this.offset(-t.x,-t.y),new Se(-t.x,-t.y)},Ai.prototype.offset=Ai.prototype.offset=function(t,i){return this.D&&Nn.ka(this),this.transform(1,0,0,1,t,i),this},Ai.prototype.scale=Ai.prototype.scale=function(t,i){return this.D&&Nn.ka(this),this.transform(t,0,0,i,0,0),this},Ai.prototype.rotate=Ai.prototype.rotate=function(t,i,e){this.D&&Nn.ka(this),void 0===i&&(i=0),void 0===e&&(e=0);var n=Nn.ph();return n.reset(),n.rotate(t,i,e),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Nn.Ze(n),this},Ai.prototype.transform=Ai.prototype.transform=function(t,i,e,n,o,r){var s=0,a=0;switch(this.type){case St:case Ct:case Nt:s=this.vc,a=this.Cc,this.vc=s*t+a*e+o,this.Cc=s*i+a*n+r,s=this.vb,a=this.Bb,this.vb=s*t+a*e+o,this.Bb=s*i+a*n+r;break;case jt:for(var h=this.Ub.n,l=h.length,u=0;u<l;u++){var f=h[u],s=f.Aa,a=f.ya;f.Aa=s*t+a*e+o,f.ya=s*i+a*n+r;for(var c=(f=f.sb.n).length,d=0;d<c;d++){var p=f[d];switch(p.type){case Ft:case At:s=p.I,a=p.J,p.I=s*t+a*e+o,p.J=s*i+a*n+r;break;case zt:s=p.rc,a=p.Kc,p.rc=s*t+a*e+o,p.Kc=s*i+a*n+r,s=p.kh,a=p.lh,p.kh=s*t+a*e+o,p.lh=s*i+a*n+r,s=p.I,a=p.J,p.I=s*t+a*e+o,p.J=s*i+a*n+r;break;case Bt:s=p.rc,a=p.Kc,p.rc=s*t+a*e+o,p.Kc=s*i+a*n+r,s=p.I,a=p.J,p.I=s*t+a*e+o,p.J=s*i+a*n+r;break;case Ot:s=p.na,a=p.ua,p.na=s*t+a*e+o,p.ua=s*i+a*n+r,0!==i&&((s=180*Math.atan2(i,t)/Math.PI)<0&&(s+=360),p.xe+=s),t<0&&(p.xe=180-p.xe,p.Af=-p.Af),n<0&&(p.xe=-p.xe,p.Af=-p.Af),p.radiusX*=Math.sqrt(t*t+e*e),void 0!==p.radiusY&&(p.radiusY*=Math.sqrt(i*i+n*n));break;case Et:s=p.I,a=p.J,p.I=s*t+a*e+o,p.J=s*i+a*n+r,0!==i&&((s=180*Math.atan2(i,t)/Math.PI)<0&&(s+=360),p.ej+=s),t<0&&(p.ej=180-p.ej,p.sl=!p.sl),n<0&&(p.ej=-p.ej,p.sl=!p.sl),p.radiusX*=Math.sqrt(t*t+e*e),p.radiusY*=Math.sqrt(i*i+n*n);break;default:Nn.k("Unknown Segment type: "+p.type)}}}}return this.$a=!0,this},Ai.prototype.Fa=function(t,i,e,n){var o=t.x,r=t.y,s=this.mb.x-20;t=t.y;for(var a=0,h=0,l=0,u=0,f=0,c=0,d=this.Ub.n,p=d.length,y=0;y<p;y++){var g=d[y];if(g.ut){if(e&&g.Fa(o,r,i))return!0;for(var v=g.sb,m=h=g.Aa,b=l=g.ya,x=v.n,w=0;w<=v.length;w++){var k,M,c=w!==v.length?(M=(k=x[w]).type,f=k.I,k.J):(M=Ft,f=m,b);switch(M){case At:if(u=Oi(o,r,s,t,h,l,m,b),isNaN(u))return!0;a+=u,m=f,b=c;break;case Ft:if(u=Oi(o,r,s,t,h,l,f,c),isNaN(u))return!0;a+=u;break;case zt:a+=u=xi(h,l,k.rc,k.Kc,k.kh,k.lh,f,c,s,t,o,r,.5);break;case Bt:a+=u=xi(h,l,(h+2*k.rc)/3,(l+2*k.Kc)/3,(2*k.rc+f)/3,(2*k.Kc+c)/3,f,c,s,t,o,r,.5);break;case Ot:case Et:var P=(M=k.type===Ot?Gi(k,g):Ri(k,g,h,l)).length;if(0===P){if(u=Oi(o,r,s,t,h,l,k.na,k.ua),isNaN(u))return!0;a+=u;break}for(var T=null,S=0;S<P;S++){if(T=M[S],0===S){if(u=Oi(o,r,s,t,h,l,T[0],T[1]),isNaN(u))return!0;a+=u}a+=u=xi(T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],s,t,o,r,.5)}null!==T&&(f=T[6],c=T[7]);break;default:Nn.k("Unknown Segment type: "+k.type)}h=f,l=c}if(0!==a)return!0;a=0}else if(g.Fa(o,r,n?i:i+2))return!0}return 0!==a},Ai.prototype.getPointAlongPath=function(t){(t<0||1<t)&&Nn.va(t,"0 <= fraction <= 1",Ai,"getPointAlongPath:fraction");var i=this.Ub.first(),e=Nn.jb(),n=[];n.push(i.Aa),n.push(i.ya);for(var o=i.Aa,r=i.ya,s=o,a=r,h=i.sb.n,l=h.length,u=0;u<l;u++){var f=h[u];switch(f.ia){case At:e.push(n),(n=[]).push(f.I),n.push(f.J),s=o=f.I,a=r=f.J;break;case Ft:n.push(f.I),n.push(f.J),o=f.I,r=f.J;break;case zt:gi(o,r,f.sd,f.Fe,f.Xg,f.ng,f.vb,f.Bb,.5,n),o=f.I,r=f.J;break;case Bt:mi(o,r,f.sd,f.Fe,f.vb,f.Bb,.5,n),o=f.I,r=f.J;break;case Ot:var c=Gi(f,i),d=c.length;if(0===d){n.push(f.na),n.push(f.ua),o=f.na,r=f.ua;break}for(var p=0;p<d;p++){var y=c[p];gi(o,r,y[2],y[3],y[4],y[5],y[6],y[7],.5,n),o=y[6],r=y[7]}break;case Et:for(d=(c=Ri(f,i,o,r)).length,p=0;p<d;p++)gi(o,r,(y=c[p])[2],y[3],y[4],y[5],y[6],y[7],.5,n),o=y[6],r=y[7];break;default:Nn.k("Segment not of valid type")}f.Ch&&(n.push(s),n.push(a))}for(e.push(n),c=0,s=e.length,a=n=i=0;a<s;a++)for(l=(h=e[a]).length,u=0;u<l;u+=2)o=h[u],r=h[u+1],0!==u&&(c+=f=Math.sqrt(m(i,n,o,r))),i=o,n=r;for(t*=c,a=c=0;a<s;a++)for(l=(h=e[a]).length,u=0;u<l;u++){if(o=h[u],r=h[u+1],0!==u){if(t<c+(f=Math.sqrt(m(i,n,o,r))))return u=(t-c)/f,Nn.sa(e),new Se(i+(o-i)*u,n+(r-n)*u);c+=f}i=o,n=r}return Nn.sa(e),null},Nn.defineProperty(Ai,{type:"type"},function(){return this.ia},function(t){this.ia!==t&&(this.D&&Nn.ka(this,t),this.ia=t,this.$a=!0)}),Nn.defineProperty(Ai,{Aa:"startX"},function(){return this.vc},function(t){this.vc!==t&&(this.D&&Nn.ka(this,t),this.vc=t,this.$a=!0)}),Nn.defineProperty(Ai,{ya:"startY"},function(){return this.Cc},function(t){this.Cc!==t&&(this.D&&Nn.ka(this,t),this.Cc=t,this.$a=!0)}),Nn.defineProperty(Ai,{I:"endX"},function(){return this.vb},function(t){this.vb!==t&&(this.D&&Nn.ka(this,t),this.vb=t,this.$a=!0)}),Nn.defineProperty(Ai,{J:"endY"},function(){return this.Bb},function(t){this.Bb!==t&&(this.D&&Nn.ka(this,t),this.Bb=t,this.$a=!0)}),Nn.defineProperty(Ai,{Ub:"figures"},function(){return this.kj},function(t){this.kj!==t&&(this.D&&Nn.ka(this,t),this.kj=t,this.$a=!0)}),Ai.prototype.add=Ai.prototype.add=function(t){return this.kj.add(t),this},Ai.prototype.setSpots=function(t,i,e,n,o,r,s,a){return this.D&&Nn.ka(this),this.Nh=new ct(t,i,o,r).freeze(),this.Oh=new ct(e,n,s,a).freeze(),this},Nn.defineProperty(Ai,{B:"spot1"},function(){return this.Nh},function(t){this.D&&Nn.ka(this,t),this.Nh=t.R()}),Nn.defineProperty(Ai,{C:"spot2"},function(){return this.Oh},function(t){this.D&&Nn.ka(this,t),this.Oh=t.R()}),Nn.defineProperty(Ai,{Md:"defaultStretch"},function(){return this.mi},function(t){this.D&&Nn.ka(this,t),this.mi=t}),Nn.u(Ai,{mb:"bounds"},function(){return this.Hz()&&(this.CA(),this.$g()),this.Cu}),Nn.ea("PathFigure",qi),Nn.Uh(qi),qi.prototype.copy=function(){var t=new qi;t.Sl=this.Sl,t.Wn=this.Wn,t.vc=this.vc,t.Cc=this.Cc;for(var i=this.so.n,e=i.length,n=t.so,o=0;o<e;o++){var r=i[o].copy();n.add(r)}return t.Rv=this.Rv,t.$a=this.$a,t},qi.prototype.equalsApprox=qi.prototype.Fc=function(t){if(!(t instanceof qi&&fi(this.Aa,t.Aa)&&fi(this.ya,t.ya)))return!1;var i=this.sb.n;t=t.sb.n;var e=i.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(!i[n].Fc(t[n]))return!1;return!0},(t=qi.prototype).toString=function(t){void 0===t&&(t=-1);for(var i=t<0?"M"+this.Aa.toString()+" "+this.ya.toString():"M"+this.Aa.toFixed(t)+" "+this.ya.toFixed(t),e=this.sb.n,n=e.length,o=0;o<n;o++)i+=" "+e[o].toString(t);return i},t.freeze=function(){this.D=!0,(i=this.sb).freeze();for(var t=i.n,i=i.length,e=0;e<i;e++)t[e].freeze();return this},t.Oa=function(){this.D=!1;var t=this.sb;t.Oa();for(var i=(t=t.n).length,e=0;e<i;e++)t[e].Oa();return this},t.Hz=function(){if(this.$a)return!0;var t=this.sb;if(this.Rv!==t.F)return!0;for(var i=(t=t.n).length,e=0;e<i;e++)if(t[e].$a)return!0;return!1},t.CA=function(){this.$a=!1;var t=this.sb;this.Rv=t.F;for(var i=(t=t.n).length,e=0;e<i;e++){var n=t[e];n.$a=!1,n.cg=null}},Nn.defineProperty(qi,{ut:"isFilled"},function(){return this.Sl},function(t){this.D&&Nn.ka(this,t),this.Sl=t}),Nn.defineProperty(qi,{vl:"isShadowed"},function(){return this.Wn},function(t){this.D&&Nn.ka(this,t),this.Wn=t}),Nn.defineProperty(qi,{Aa:"startX"},function(){return this.vc},function(t){this.D&&Nn.ka(this,t),this.vc=t,this.$a=!0}),Nn.defineProperty(qi,{ya:"startY"},function(){return this.Cc},function(t){this.D&&Nn.ka(this,t),this.Cc=t,this.$a=!0}),Nn.defineProperty(qi,{sb:"segments"},function(){return this.so},function(t){this.D&&Nn.ka(this,t),this.so=t,this.$a=!0}),qi.prototype.add=qi.prototype.add=function(t){return this.so.add(t),this},qi.prototype.Fa=function(t,i,e){for(var n=this.Aa,o=this.ya,r=n,s=o,a=this.sb.n,h=a.length,l=0;l<h;l++){var u=a[l];switch(u.type){case At:r=u.I,s=u.J,n=u.I,o=u.J;break;case Ft:if(di(n,o,u.I,u.J,e,t,i))return!0;n=u.I,o=u.J;break;case zt:if(pi(n,o,u.rc,u.Kc,u.kh,u.lh,u.I,u.J,.5,t,i,e))return!0;n=u.I,o=u.J;break;case Bt:if(function t(i,e,n,o,r,s,a,h,l,u){if(di(i,e,r,s,u,n,o))return di(i,e,r,s,u,h,l);var f=(i+n)/2,c=(e+o)/2,d=(f+(n=(n+r)/2))/2,p=(c+(o=(o+s)/2))/2;return t(i,e,f,c,d,p,a,h,l,u)||t(d,p,n,o,r,s,a,h,l,u)}(n,o,u.rc,u.Kc,u.I,u.J,.5,t,i,e))return!0;n=u.I,o=u.J;break;case Ot:case Et:var f=u.type===Ot?Gi(u,this):Ri(u,this,n,o),c=f.length;if(0===c){if(di(n,o,u.na,u.ua,e,t,i))return!0;n=u.na,o=u.ua;break}for(var d=null,p=0;p<c;p++)if(d=f[p],0===p&&di(n,o,d[0],d[1],e,t,i)||pi(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,t,i,e))return!0;null!==d&&(n=d[6],o=d[7]);break;default:Nn.k("Unknown Segment type: "+u.type)}if(u.Gw&&(n!==r||o!==s)&&di(n,o,r,s,e,t,i))return!0}return!1},Nn.ea("PathSegment",Ii),Nn.Uh(Ii),Ii.prototype.copy=function(){var t=new Ii;return t.ia=this.ia,t.vb=this.vb,t.Bb=this.Bb,t.sd=this.sd,t.Fe=this.Fe,t.Xg=this.Xg,t.ng=this.ng,t.ao=this.ao,t.sn=this.sn,t.Ch=this.Ch,t.$a=this.$a,t},Ii.prototype.equalsApprox=Ii.prototype.Fc=function(t){if(!(t instanceof Ii)||this.type!==t.type||this.Gw!==t.Gw)return!1;switch(this.type){case At:case Ft:return fi(this.I,t.I)&&fi(this.J,t.J);case zt:return fi(this.I,t.I)&&fi(this.J,t.J)&&fi(this.rc,t.rc)&&fi(this.Kc,t.Kc)&&fi(this.kh,t.kh)&&fi(this.lh,t.lh);case Bt:return fi(this.I,t.I)&&fi(this.J,t.J)&&fi(this.rc,t.rc)&&fi(this.Kc,t.Kc);case Ot:return fi(this.xe,t.xe)&&fi(this.Af,t.Af)&&fi(this.na,t.na)&&fi(this.ua,t.ua)&&fi(this.radiusX,t.radiusX)&&fi(this.radiusY,t.radiusY);case Et:return this.sl===t.sl&&this.Jw===t.Jw&&fi(this.ej,t.ej)&&fi(this.I,t.I)&&fi(this.J,t.J)&&fi(this.radiusX,t.radiusX)&&fi(this.radiusY,t.radiusY);default:return!1}},Ii.prototype.toString=function(t){void 0===t&&(t=-1);var i="";switch(this.type){case At:i=t<0?"M"+this.I.toString()+" "+this.J.toString():"M"+this.I.toFixed(t)+" "+this.J.toFixed(t);break;case Ft:i=t<0?"L"+this.I.toString()+" "+this.J.toString():"L"+this.I.toFixed(t)+" "+this.J.toFixed(t);break;case zt:i=t<0?"C"+this.rc.toString()+" "+this.Kc.toString()+" "+this.kh.toString()+" "+this.lh.toString()+" "+this.I.toString()+" "+this.J.toString():"C"+this.rc.toFixed(t)+" "+this.Kc.toFixed(t)+" "+this.kh.toFixed(t)+" "+this.lh.toFixed(t)+" "+this.I.toFixed(t)+" "+this.J.toFixed(t);break;case Bt:i=t<0?"Q"+this.rc.toString()+" "+this.Kc.toString()+" "+this.I.toString()+" "+this.J.toString():"Q"+this.rc.toFixed(t)+" "+this.Kc.toFixed(t)+" "+this.I.toFixed(t)+" "+this.J.toFixed(t);break;case Ot:i=t<0?"B"+this.xe.toString()+" "+this.Af.toString()+" "+this.na.toString()+" "+this.ua.toString()+" "+this.radiusX:"B"+this.xe.toFixed(t)+" "+this.Af.toFixed(t)+" "+this.na.toFixed(t)+" "+this.ua.toFixed(t)+" "+this.radiusX;break;case Et:i=t<0?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.ej.toString()+" "+(this.Jw?1:0)+" "+(this.sl?1:0)+" "+this.I.toString()+" "+this.J.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.ej.toFixed(t)+" "+(this.Jw?1:0)+" "+(this.sl?1:0)+" "+this.I.toFixed(t)+" "+this.J.toFixed(t);break;default:i=this.type.toString()}return i+(this.Ch?"z":"")},Ii.Move=At=Nn.p(Ii,"Move",0),Ii.Line=Ft=Nn.p(Ii,"Line",1),Ii.Bezier=zt=Nn.p(Ii,"Bezier",2),Ii.QuadraticBezier=Bt=Nn.p(Ii,"QuadraticBezier",3),Ii.Arc=Ot=Nn.p(Ii,"Arc",4),Ii.SvgArc=Et=Nn.p(Ii,"SvgArc",4),Ii.prototype.freeze=function(){return this.D=!0,this},Ii.prototype.Oa=function(){return this.D=!1,this},Ii.prototype.close=Ii.prototype.close=function(){return this.Ch=!0,this},Nn.defineProperty(Ii,{Gw:"isClosed"},function(){return this.Ch},function(t){this.Ch!==t&&(this.Ch=t,this.$a=!0)}),Nn.defineProperty(Ii,{type:"type"},function(){return this.ia},function(t){this.D&&Nn.ka(this,t),this.ia=t,this.$a=!0}),Nn.defineProperty(Ii,{I:"endX"},function(){return this.vb},function(t){this.D&&Nn.ka(this,t),this.vb=t,this.$a=!0}),Nn.defineProperty(Ii,{J:"endY"},function(){return this.Bb},function(t){this.D&&Nn.ka(this,t),this.Bb=t,this.$a=!0}),Nn.defineProperty(Ii,{rc:"point1X"},function(){return this.sd},function(t){this.D&&Nn.ka(this,t),this.sd=t,this.$a=!0}),Nn.defineProperty(Ii,{Kc:"point1Y"},function(){return this.Fe},function(t){this.D&&Nn.ka(this,t),this.Fe=t,this.$a=!0}),Nn.defineProperty(Ii,{kh:"point2X"},function(){return this.Xg},function(t){this.D&&Nn.ka(this,t),this.Xg=t,this.$a=!0}),Nn.defineProperty(Ii,{lh:"point2Y"},function(){return this.ng},function(t){this.D&&Nn.ka(this,t),this.ng=t,this.$a=!0}),Nn.defineProperty(Ii,{na:"centerX"},function(){return this.sd},function(t){this.D&&Nn.ka(this,t),this.sd=t,this.$a=!0}),Nn.defineProperty(Ii,{ua:"centerY"},function(){return this.Fe},function(t){this.D&&Nn.ka(this,t),this.Fe=t,this.$a=!0}),Nn.defineProperty(Ii,{radiusX:"radiusX"},function(){return this.Xg},function(t){t<0&&Nn.va(t,">= zero",Ii,"radiusX"),this.D&&Nn.ka(this,t),this.Xg=t,this.$a=!0}),Nn.defineProperty(Ii,{radiusY:"radiusY"},function(){return this.ng},function(t){t<0&&Nn.va(t,">= zero",Ii,"radiusY"),this.D&&Nn.ka(this,t),this.ng=t,this.$a=!0}),Nn.defineProperty(Ii,{xe:"startAngle"},function(){return this.vb},function(t){this.vb!==t&&(this.D&&Nn.ka(this,t),(t%=360)<0&&(t+=360),this.vb=t,this.$a=!0)}),Nn.defineProperty(Ii,{Af:"sweepAngle"},function(){return this.Bb},function(t){this.D&&Nn.ka(this,t),360<t&&(t=360),t<-360&&(t=-360),this.Bb=t,this.$a=!0}),Nn.defineProperty(Ii,{sl:"isClockwiseArc"},function(){return this.sn},function(t){this.D&&Nn.ka(this,t),this.sn=t,this.$a=!0}),Nn.defineProperty(Ii,{Jw:"isLargeArc"},function(){return this.ao},function(t){this.D&&Nn.ka(this,t),this.ao=t,this.$a=!0}),Nn.defineProperty(Ii,{ej:"xAxisRotation"},function(){return this.sd},function(t){(t%=360)<0&&(t+=360),this.D&&Nn.ka(this,t),this.sd=t,this.$a=!0}),Nn.ea("InputEvent",Vi),Vi.prototype.copy=function(){var t=new Vi;return t.W=this.W,t.Sy.assign(this.hf),t.Wx.assign(this.ca),t.uv=this.uv,t.yu=this.yu,t.zu=this.zu,t.jv=this.jv,t.Pu=this.Pu,t.aw=this.aw,t.Bu=this.Bu,t.Lu=this.Lu,t.gv=this.gv,t.Xu=this.Xu,t.gj=this.gj,t.Eq=this.Eq,t.Zv=this.Zv,t.Yv=this.Yv,t.pg=this.pg,t},Vi.prototype.toString=function(){var t="^";return 0!==this.od&&(t+="M:"+this.od),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.Ve&&(t+="C:"+this.Ve),0!==this.gl&&(t+="D:"+this.gl),this.zc&&(t+="h"),this.bubbles&&(t+="b"),null!==this.ca&&(t+="@"+this.ca.toString()),t},Nn.defineProperty(Vi,{g:"diagram"},function(){return this.W},function(t){this.W=t}),Nn.defineProperty(Vi,{hf:"viewPoint"},function(){return this.Sy},function(t){Nn.A(t,Se,Vi,"viewPoint"),this.Sy.assign(t)}),Nn.defineProperty(Vi,{ca:"documentPoint"},function(){return this.Wx},function(t){Nn.A(t,Se,Vi,"documentPoint"),this.Wx.assign(t)}),Nn.defineProperty(Vi,{od:"modifiers"},function(){return this.uv},function(t){this.uv=t}),Nn.defineProperty(Vi,{button:"button"},function(){return this.yu},function(t){if(this.yu=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}),Nn.defineProperty(Vi,{buttons:"buttons"},function(){return this.zu},function(t){this.zu=t}),Nn.defineProperty(Vi,{key:"key"},function(){return this.jv},function(t){this.jv=t}),Nn.defineProperty(Vi,{il:"down"},function(){return this.Pu},function(t){this.Pu=t}),Nn.defineProperty(Vi,{up:"up"},function(){return this.aw},function(t){this.aw=t}),Nn.defineProperty(Vi,{Ve:"clickCount"},function(){return this.Bu},function(t){this.Bu=t}),Nn.defineProperty(Vi,{gl:"delta"},function(){return this.Lu},function(t){this.Lu=t}),Nn.defineProperty(Vi,{wt:"isMultiTouch"},function(){return this.gv},function(t){this.gv=t}),Nn.defineProperty(Vi,{zc:"handled"},function(){return this.Xu},function(t){this.Xu=t}),Nn.defineProperty(Vi,{bubbles:"bubbles"},function(){return this.gj},function(t){this.gj=t}),Nn.defineProperty(Vi,{event:"event"},function(){return this.Eq},function(t){this.Eq=t}),Nn.u(Vi,{Vi:"isTouchEvent"},function(){var t=h.TouchEvent;return!!(t&&this.event instanceof t)||(t=h.PointerEvent)&&this.event instanceof t&&"touch"===this.event.pointerType}),Nn.u(Vi,{ak:"isMac"},function(){return Nn.ak}),Nn.defineProperty(Vi,{timestamp:"timestamp"},function(){return this.Zv},function(t){this.Zv=t}),Nn.defineProperty(Vi,{Ig:"targetDiagram"},function(){return this.Yv},function(t){this.Yv=t}),Nn.defineProperty(Vi,{ye:"targetObject"},function(){return this.pg},function(t){this.pg=t}),Nn.defineProperty(Vi,{control:"control"},function(){return 0!=(1&this.od)},function(t){this.od=t?1|this.od:-2&this.od}),Nn.defineProperty(Vi,{shift:"shift"},function(){return 0!=(4&this.od)},function(t){this.od=t?4|this.od:-5&this.od}),Nn.defineProperty(Vi,{alt:"alt"},function(){return 0!=(2&this.od)},function(t){this.od=t?2|this.od:-3&this.od}),Nn.defineProperty(Vi,{Ft:"meta"},function(){return 0!=(8&this.od)},function(t){this.od=t?8|this.od:-9&this.od}),Nn.defineProperty(Vi,{left:"left"},function(){var t=this.event;return null!==t&&t instanceof MouseEvent&&("mousedown"===t.type||"mouseup"===t.type)?0===this.button:0!=(1&this.buttons)},function(t){this.buttons=t?1|this.buttons:-2&this.buttons}),Nn.defineProperty(Vi,{right:"right"},function(){var t=this.event;return null!==t&&t instanceof MouseEvent&&("mousedown"===t.type||"mouseup"===t.type)?2===this.button:0!=(2&this.buttons)},function(t){this.buttons=t?2|this.buttons:-3&this.buttons}),Nn.defineProperty(Vi,{iK:"middle"},function(){var t=this.event;return null!==t&&t instanceof MouseEvent&&("mousedown"===t.type||"mouseup"===t.type)?1===this.button:0!=(4&this.buttons)},function(t){this.buttons=t?4|this.buttons:-5&this.buttons}),Nn.ea("DiagramEvent",Hi),Hi.prototype.copy=function(){var t=new Hi;return t.W=this.W,t.Ob=this.Ob,t.Wv=this.Wv,t.Dv=this.Dv,t.Au=this.Au,t},Hi.prototype.toString=function(){var t="*"+this.name;return this.cancel&&(t+="x"),null!==this.uA&&(t+=":"+this.uA.toString()),null!==this.$z&&(t+="("+this.$z.toString()+")"),t},Nn.defineProperty(Hi,{g:"diagram"},function(){return this.W},function(t){this.W=t}),Nn.defineProperty(Hi,{name:"name"},function(){return this.Ob},function(t){this.Ob=t}),Nn.defineProperty(Hi,{uA:"subject"},function(){return this.Wv},function(t){this.Wv=t}),Nn.defineProperty(Hi,{$z:"parameter"},function(){return this.Dv},function(t){this.Dv=t}),Nn.defineProperty(Hi,{cancel:"cancel"},function(){return this.Au},function(t){this.Au=t}),Nn.ea("ChangedEvent",Ki),Ki.Transaction=qt=Nn.p(Ki,"Transaction",-1),Ki.Property=It=Nn.p(Ki,"Property",0),Ki.Insert=Gt=Nn.p(Ki,"Insert",1),Ki.Remove=Rt=Nn.p(Ki,"Remove",2),Ki.prototype.clear=Ki.prototype.clear=function(){this.Cr=this.Dr=this.Gr=this.Hr=this.Fr=this.W=this.Vd=null},Ki.prototype.copy=function(){var t=new Ki;t.bq=this.bq,t.tv=this.tv,t.lm=this.lm,t.Vd=this.Vd,t.W=this.W,t.Fr=this.Fr;var i=this.Hr;return t.Hr=Nn.Ta(i)&&"function"==typeof i.R?i.R():i,i=this.Gr,t.Gr=Nn.Ta(i)&&"function"==typeof i.R?i.R():i,i=this.Dr,t.Dr=Nn.Ta(i)&&"function"==typeof i.R?i.R():i,i=this.Cr,t.Cr=Nn.Ta(i)&&"function"==typeof i.R?i.R():i,t},Ki.prototype.toString=function(){var t="",t=this.wc===qt?t+"* ":this.wc===It?t+(null!==this.ba?"!m":"!d"):t+((null!==this.ba?"!m":"!d")+this.wc);return this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.gf&&this.gf!==this.propertyName&&(t+=" "+this.gf),t+=": ",this.wc===qt?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=ce(this.object)),null!==this.oldValue&&(t+="  old: "+ce(this.oldValue)),null!==this.Bg&&(t+=" "+this.Bg),null!==this.newValue&&(t+="  new: "+ce(this.newValue)),null!==this.zg&&(t+=" "+this.zg)),t},Ki.prototype.getValue=Ki.prototype.ja=function(t){return t?this.oldValue:this.newValue},Ki.prototype.getParam=function(t){return t?this.Bg:this.zg},Ki.prototype.canUndo=Ki.prototype.canUndo=function(){return null!==this.ba||null!==this.g},Ki.prototype.undo=Ki.prototype.undo=function(){this.canUndo()&&(null!==this.ba?this.ba.Dm(this,!0):null!==this.g&&this.g.Dm(this,!0))},Ki.prototype.canRedo=Ki.prototype.canRedo=function(){return null!==this.ba||null!==this.g},Ki.prototype.redo=Ki.prototype.redo=function(){this.canRedo()&&(null!==this.ba?this.ba.Dm(this,!1):null!==this.g&&this.g.Dm(this,!1))},Nn.defineProperty(Ki,{ba:"model"},function(){return this.Vd},function(t){this.Vd=t}),Nn.defineProperty(Ki,{g:"diagram"},function(){return this.W},function(t){this.W=t}),Nn.defineProperty(Ki,{wc:"change"},function(){return this.bq},function(t){this.bq=t}),Nn.defineProperty(Ki,{gf:"modelChange"},function(){return this.tv},function(t){this.tv=t}),Nn.defineProperty(Ki,{propertyName:"propertyName"},function(){return this.lm},function(t){this.lm=t}),Nn.u(Ki,{kE:"isTransactionFinished"},function(){return this.bq===qt&&("CommittedTransaction"===this.lm||"FinishedUndo"===this.lm||"FinishedRedo"===this.lm)}),Nn.defineProperty(Ki,{object:"object"},function(){return this.Fr},function(t){this.Fr=t}),Nn.defineProperty(Ki,{oldValue:"oldValue"},function(){return this.Hr},function(t){this.Hr=t}),Nn.defineProperty(Ki,{Bg:"oldParam"},function(){return this.Gr},function(t){this.Gr=t}),Nn.defineProperty(Ki,{newValue:"newValue"},function(){return this.Dr},function(t){this.Dr=t}),Nn.defineProperty(Ki,{zg:"newParam"},function(){return this.Cr},function(t){this.Cr=t}),Nn.ea("Model",Ui),Ui.prototype.cloneProtected=function(t){t.Ob=this.Ob,t.qq=this.qq,t.si=this.si,t.Dj=this.Dj,t.fo=this.fo,t.yn=this.yn,t.WI=this.Eu,t.iq=this.iq,t.Tp=this.Tp,t.fm=this.fm},Ui.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Ui.prototype.clear=Ui.prototype.clear=function(){this.If=[],this.uc.clear(),this.ni.clear(),this.la.clear()},(t=Ui.prototype).toString=function(t){if(void 0===t&&(t=0),1<t)return this.xA();var i=(""!==this.name?this.name:"")+" Model";if(0<t){i+="\n node data:",t=this.Yf;for(var e=Nn.Va(t),n=0;n<e;n++)var o=Nn.Pa(t,n),i=i+(" "+this.gb(o)+":"+ce(o))}return i},t.jn=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.el&&(t+=',\n  "dataFormat": '+this.quote(this.el)),this.ab&&(t+=',\n  "isReadOnly": '+this.ab),"key"!==this.xl&&"string"==typeof this.xl&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.xl)),this.hz&&(t+=',\n  "copiesArrays": true'),this.gz&&(t+=',\n  "copiesArrayObjects": true'),"category"!==this.Ym&&"string"==typeof this.Ym&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.Ym)),t},t.Nt=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.el=t.dataFormat),t.isReadOnly&&(this.ab=t.isReadOnly),t.nodeKeyProperty&&(this.xl=t.nodeKeyProperty),t.copiesArrays&&(this.hz=t.copiesArrays),t.copiesArrayObjects&&(this.gz=t.copiesArrayObjects),t.nodeCategoryProperty&&(this.Ym=t.nodeCategoryProperty)},t.FA=function(){var t,i=this.bk,e=!1;for(t in i)if(!Qi(t,i[t])){e=!0;break}return i="",e&&(i=Ji(this)),i+',\n  "nodeDataArray": '+Zi(this,this.Yf,!0)},t.cA=function(t){Yi(this,t),t=t.nodeDataArray,Nn.isArray(t)&&(this.Qt(t),this.Yf=t)},t.GA=function(t){Xi(this,t,"nodeKeyProperty"),this instanceof me&&Xi(this,t,"nodeParentKeyProperty");for(var i=new Q,e=new Q,n=(new Q).Tc(this.uc.mE),o=new nt,r=t.Yf,s=0;s<r.length;s++){var a,h=r[s],l=t.gb(h);void 0!==l?(n.remove(l),null===(a=this.ae(l))?(i.add(l),e.add(h)):Wi(this,a,h,o)||e.add(h)):(this.Nz(h),l=this.gb(h),i.add(l),e.add(h))}return r="",Wi(this,this.bk,t.bk,o)||(r+=Ji(this)),0<i.count&&(r+=this.Ex+Zi(this,i.dc(),!0)),0<e.count&&(r+=this.OA+Zi(this,e.dc(),!0)),0<n.count&&(r+=this.Gx+Zi(this,n.dc(),!0)),r},Ui.prototype.computeJsonDifference=Ui.prototype.computeJSONDifference=function(t,i){return Nn.A(t,Ui,Ui,"computeJsonDifference:newmodel"),void 0===i&&(i=this.constructor===Ui?"go.Model":this.constructor===pe?"go.GraphLinksModel":this.constructor===me?"go.TreeModel":Nn.$e(this)),'{ "class": '+this.quote(i)+', "incremental": 1'+this.jn()+this.GA(t)+"}"},(t=Ui.prototype).Ex=',\n  "insertedNodeKeys": ',t.OA=',\n  "modifiedNodeData": ',t.Gx=',\n  "removedNodeKeys": ',t.EA=function(t,i){var e=this,n=!1,o=new Q,r=new Q,s=new Q;t.Of.each(function(t){t.ba===e&&("nodeDataArray"===t.gf?t.wc===Gt?o.add(t.newValue):t.wc===Rt&&s.add(t.oldValue):e.He(t.object)?r.add(t.object):e.bk===t.object&&t.wc===It&&(n=!0))});var a=new Q;o.each(function(t){a.add(e.gb(t)),i||r.add(t)});var h=new Q;s.each(function(t){h.add(e.gb(t)),i&&r.add(t)});var l="";return n&&(l+=Ji(this)),0<a.count&&(l+=(i?this.Gx:this.Ex)+Zi(this,a.dc(),!0)),0<r.count&&(l+=this.OA+Zi(this,r.dc(),!0)),0<h.count&&(l+=(i?this.Ex:this.Gx)+Zi(this,h.dc(),!0)),l},t.bA=function(t){Yi(this,t);var i=t.insertedNodeKeys;if(Nn.isArray(i))for(var e=Nn.Va(i),n=0;n<e;n++){var o=Nn.Pa(i,n);null===(r=this.ae(o))&&(r=this.copyNodeData({}),this.mx(r,o),this.Xk(r))}if(i=t.modifiedNodeData,Nn.isArray(i))for(e=Nn.Va(i),n=0;n<e;n++){var r,s=Nn.Pa(i,n),o=this.gb(s);if(null!==(r=this.ae(o)))for(var a in s)"__gohashid"!==a&&a!==this.xl&&this.setDataProperty(r,a,s[a])}if(t=t.removedNodeKeys,Nn.isArray(t))for(e=Nn.Va(t),n=0;n<e;n++)o=Nn.Pa(t,n),null!==(r=this.ae(o))&&this.ex(r)},Ui.prototype.toIncrementalJson=Ui.prototype.toIncrementalJSON=function(t,i){Nn.A(t,Ki,Ui,"toIncrementalJson:e"),t.wc!==qt&&Nn.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.kE&&e instanceof we?(void 0===i&&(i=this.constructor===Ui?"go.Model":this.constructor===pe?"go.GraphLinksModel":this.constructor===me?"go.TreeModel":Nn.$e(this)),'{ "class": '+this.quote(i)+', "incremental": 1'+this.jn()+this.EA(e,"FinishedUndo"===t.propertyName)+"}"):'{ "incremental": 0 }'},Ui.prototype.toJson=Ui.prototype.toJSON=Ui.prototype.xA=function(t){return void 0===t&&(t=this.constructor===Ui?"go.Model":this.constructor===pe?"go.GraphLinksModel":this.constructor===me?"go.TreeModel":Nn.$e(this)),'{ "class": '+this.quote(t)+this.jn()+this.FA()+"}"},Ui.prototype.applyIncrementalJson=Ui.prototype.applyIncrementalJSON=function(t){var i=null;if("string"==typeof t)if(h.JSON&&h.JSON.parse)try{i=h.JSON.parse(t)}catch(t){}else Nn.trace("WARNING: no JSON.parse available");else"object"===(void 0===t?"undefined":_typeof(t))?i=t:Nn.k("Unable to modify a Model from: "+t);var e=i.incremental;"number"!=typeof e&&Nn.k("Unable to apply non-incremental changes to Model: "+t),0!==e&&(this.Qb("applyIncrementalJson"),this.bA(i),this.wd("applyIncrementalJson"))},Ui.fromJson=Ui.fromJSON=function(t,i){void 0===i&&(i=null),null!==i&&Nn.A(i,Ui,Ui,"fromJson:model");var e=null;if("string"==typeof t)if(h.JSON&&h.JSON.parse)try{e=h.JSON.parse(t)}catch(t){}else Nn.trace("WARNING: no JSON.parse available");else"object"===(void 0===t?"undefined":_typeof(t))?e=t:Nn.k("Unable to construct a Model from: "+t);if(null===i){var n=null,o=e.class;if("string"==typeof o)try{var r=null;0===o.indexOf("go.")?(o=o.substr(3),r=s[o]):void 0===(r=s[o])&&(r=h[o]),"function"==typeof r&&(n=new r)}catch(t){}null===n||n instanceof Ui?i=n:Nn.k("Unable to construct a Model of declared class: "+e.class)}return null===i&&(i=new pe),i.Nt(e),i.cA(e),i},Ui.prototype.replaceJsonObjects=Ui.prototype.Qt=function(t){if(Nn.isArray(t))for(var i=Nn.Va(t),e=0;e<i;e++){var n=Nn.Pa(t,e);Nn.Ta(n)&&Nn.kD(t,e,this.Qt(n))}else if(Nn.Ta(t)){for(e in t)if(n=t[e],Nn.Ta(n)&&(n=this.Qt(n),t[e]=n,"points"===e&&Array.isArray(n))){for(var o=0==n.length%2,r=0;r<n.length;r++)if("number"!=typeof n[r]){o=!1;break}if(o){for(o=new Dn(Se),r=0;r<n.length/2;r++)o.add(new Se(n[2*r],n[2*r+1]));o.freeze(),t[e]=o}}if("object"===(void 0===t?"undefined":_typeof(t))){if("NaN"===(n=(e=t).class))e=NaN;else if("Date"===n)e=new Date(t.value);else if("go.Point"===n)e=new Se(te(t.x),te(t.y));else if("go.Size"===n)e=new st(te(t.width),te(t.height));else if("go.Rect"===n)e=new Ln(te(t.x),te(t.y),te(t.width),te(t.height));else if("go.Margin"===n)e=new ut(te(t.top),te(t.right),te(t.bottom),te(t.left));else if("go.Spot"===n)e="string"==typeof t.enum?c(t.enum):new ct(te(t.x),te(t.y),te(t.offsetX),te(t.offsetY));else if("go.Brush"===n){if((e=new fs).type=a(fs,t.type),"string"==typeof t.color&&(e.color=t.color),t.start instanceof ct&&(e.start=t.start),t.end instanceof ct&&(e.end=t.end),"number"==typeof t.startRadius&&(e.cu=te(t.startRadius)),"number"==typeof t.endRadius&&(e.bt=te(t.endRadius)),t=t.colorStops,Nn.Ta(t))for(i in t)e.addColorStop(parseFloat(i),t[i])}else"go.Geometry"===n?(i=null,(i="string"==typeof t.path?Lt(t.path):new Ai).type=a(Ai,t.type),"number"==typeof t.startX&&(i.Aa=te(t.startX)),"number"==typeof t.startY&&(i.ya=te(t.startY)),"number"==typeof t.endX&&(i.I=te(t.endX)),"number"==typeof t.endY&&(i.J=te(t.endY)),t.spot1 instanceof ct&&(i.B=t.spot1),t.spot2 instanceof ct&&(i.C=t.spot2),e=i):"go.EnumValue"===n&&(0===(i=t.classType).indexOf("go.")&&(i=i.substr(3)),e=a(s[i],t.name));t=e}}return t},Ui.prototype.quote=function(t){for(var i="",e=t.length,n=0;n<e;n++){var o,r=t[n];'"'===r||"\\"===r?i+="\\"+r:"\b"===r?i+="\\b":"\f"===r?i+="\\f":"\n"===r?i+="\\n":"\r"===r?i+="\\r":"\t"===r?i+="\\t":i=(o=t.charCodeAt(n))<16?i+("\\u000"+t.charCodeAt(n).toString(16)):o<32?i+("\\u00"+t.charCodeAt(n).toString(16)):8232===o?i+"\\u2028":8233===o?i+"\\u2029":i+r}return'"'+i+'"'},Ui.prototype.writeJsonValue=Ui.prototype.iu=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?1/0===t?"9e9999":-1/0===t?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.iu(t.valueOf()):Nn.isArray(t)?Zi(this,t):Nn.Ta(t)?_i(this,t):"function"==typeof t?"null":t.toString()},Nn.defineProperty(Ui,{name:"name"},function(){return this.Ob},function(t){var i=this.Ob;i!==t&&(Nn.j(t,"string",Ui,"name"),this.Ob=t,this.h("name",i,t))}),Nn.defineProperty(Ui,{el:"dataFormat"},function(){return this.qq},function(t){var i=this.qq;i!==t&&(Nn.j(t,"string",Ui,"dataFormat"),this.qq=t,this.h("dataFormat",i,t))}),Nn.defineProperty(Ui,{ab:"isReadOnly"},function(){return this.si},function(t){var i=this.si;i!==t&&(Nn.j(t,"boolean",Ui,"isReadOnly"),this.si=t,this.h("isReadOnly",i,t))}),Nn.defineProperty(Ui,{bk:"modelData"},function(){return this.zy},function(t){var i=this.zy;i!==t&&(Nn.j(t,"object",Ui,"modelData"),this.zy=t,this.h("modelData",i,t),this.Hb(t))}),Ui.prototype.addChangedListener=Ui.prototype.ym=function(t){Nn.j(t,"function",Ui,"addChangedListener:listener"),null===this.xj&&(this.xj=new Dn("function")),this.xj.add(t)},Ui.prototype.removeChangedListener=Ui.prototype.Ot=function(t){Nn.j(t,"function",Ui,"removeChangedListener:listener"),null!==this.xj&&(this.xj.remove(t),0===this.xj.count&&(this.xj=null))},Ui.prototype.nw=function(t){if(this.tb||this.la.WD(t),null!==this.xj){var i=this.xj,e=i.length;if(1===e)(i=i.da(0))(t);else if(0!==e)for(var n=i.dc(),o=0;o<e;o++)(i=n[o])(t)}},Ui.prototype.raiseChangedEvent=Ui.prototype.Lc=function(t,i,e,n,o,r,s){ie(this,"",t,i,e,n,o,r,s)},Ui.prototype.raiseChanged=Ui.prototype.h=function(t,i,e,n,o){ie(this,"",It,t,this,i,e,n,o)},Ui.prototype.raiseDataChanged=Ui.prototype.aA=function(t,i,e,n,o,r){ie(this,"",It,i,t,e,n,o,r)},Nn.defineProperty(Ui,{la:"undoManager"},function(){return this.Ry},function(t){var i=this.Ry;i!==t&&(Nn.A(t,ke,Ui,"undoManager"),null!==i&&i.iI(this),null!==(this.Ry=t)&&t.bG(this))}),Nn.defineProperty(Ui,{tb:"skipsUndoManager"},function(){return this.Gi},function(t){Nn.j(t,"boolean",Ui,"skipsUndoManager"),this.Gi=t}),Ui.prototype.Dm=function(t,i){var e,n,o;null!==t&&t.ba===this&&(t.wc===It?(e=t.object,n=t.propertyName,o=t.ja(i),Nn.Ka(e,n,o)):t.wc===Gt?"nodeDataArray"===t.gf?(e=t.newValue,!Nn.Ta(e)||void 0!==(n=this.gb(e))&&(i?(Nn.Th(this.If,t.zg),this.uc.remove(n)):(Nn.Mi(this.If,t.zg,e),this.uc.add(n,e)))):""===t.gf?(e=t.object,!Nn.isArray(e)&&t.propertyName&&(e=Nn.qb(t.object,t.propertyName)),Nn.isArray(e)&&(n=t.newValue,o=t.zg,i?Nn.Th(e,o):Nn.Mi(e,o,n))):Nn.k("unknown ChangedEvent.Insert object: "+t.toString()):t.wc===Rt?"nodeDataArray"===t.gf?(e=t.oldValue,!Nn.Ta(e)||void 0!==(n=this.gb(e))&&(i?(Nn.Mi(this.If,t.Bg,e),this.uc.add(n,e)):(Nn.Th(this.If,t.Bg),this.uc.remove(n)))):""===t.gf?(e=t.object,!Nn.isArray(e)&&t.propertyName&&(e=Nn.qb(t.object,t.propertyName)),Nn.isArray(e)&&(n=t.oldValue,o=t.Bg,i?Nn.Mi(e,o,n):Nn.Th(e,o))):Nn.k("unknown ChangedEvent.Remove object: "+t.toString()):t.wc!==qt&&Nn.k("unknown ChangedEvent: "+t.toString()))},Ui.prototype.startTransaction=Ui.prototype.Qb=function(t){return this.la.Qb(t)},Ui.prototype.commitTransaction=Ui.prototype.wd=function(t){return this.la.wd(t)},Ui.prototype.rollbackTransaction=Ui.prototype.Ap=function(){return this.la.Ap()},Ui.prototype.updateTargetBindings=Ui.prototype.Hb=function(t,i){void 0===i&&(i=""),ie(this,"SourceChanged",qt,i,t,null,null)},Nn.defineProperty(Ui,{xl:"nodeKeyProperty"},function(){return this.Dj},function(t){var i=this.Dj;i!==t&&(ee(t,Ui,"nodeKeyProperty"),""===t&&Nn.k("Model.nodeKeyProperty may not be the empty string"),0<this.uc.count&&Nn.k("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Dj=t,this.h("nodeKeyProperty",i,t))}),Ui.prototype.getKeyForNodeData=Ui.prototype.gb=function(t){if(null!==t){var i=this.Dj;if(""!==i&&void 0!==(i=Nn.qb(t,i))){if(ne(i))return i;Nn.k("Key value for node data "+t+" is not a number or a string: "+i)}}},Ui.prototype.setKeyForNodeData=Ui.prototype.mx=function(t,i){var e,n;null!=i&&ne(i)||Nn.Ed(i,"number or string",Ui,"setKeyForNodeData:key"),null===t||""!==(e=this.Dj)&&(this.He(t)?(n=Nn.qb(t,e))!==i&&null===this.ae(i)&&(Nn.Ka(t,e,i),this.uc.remove(n),this.uc.add(i,t),ie(this,"nodeKey",It,e,t,n,i),"string"==typeof e&&this.Hb(t,e),this.Pt(n,i)):Nn.Ka(t,e,i))},Nn.defineProperty(Ui,{bK:"makeUniqueKeyFunction"},function(){return this.fo},function(t){var i=this.fo;i!==t&&(null!==t&&Nn.j(t,"function",Ui,"makeUniqueKeyFunction"),this.fo=t,this.h("makeUniqueKeyFunction",i,t))}),Ui.prototype.containsNodeData=Ui.prototype.He=function(t){var i=this.gb(t);return void 0!==i&&this.uc.ja(i)===t},Ui.prototype.findNodeDataForKey=Ui.prototype.ae=function(t){return null===t&&Nn.k("Model.findNodeDataForKey:key must not be null"),void 0!==t&&ne(t)?this.uc.ja(t):null},Nn.defineProperty(Ui,{Yf:"nodeDataArray"},function(){return this.If},function(t){var i=this.If;if(i!==t){Nn.bz(t,Ui,"nodeDataArray"),this.uc.clear(),this.AA();for(var e=Nn.Va(t),n=0;n<e;n++){var o=Nn.Pa(t,n);if(!Nn.Ta(o))return void Nn.k("Model.nodeDataArray must only contain Objects, not: "+o);Nn.ot(o)}this.If=t;for(var r=new Dn(Object),n=0;n<e;n++){var o=Nn.Pa(t,n),s=this.gb(o);void 0===s||null!==this.uc.ja(s)?r.add(o):this.uc.add(s,o)}for(n=r.i;n.next();)o=n.value,this.Nz(o),void 0!==(r=this.gb(o))&&this.uc.add(r,o);for(ie(this,"nodeDataArray",It,"nodeDataArray",this,i,t),n=0;n<e;n++)o=Nn.Pa(t,n),this.zp(o),this.yp(o);this.oD(),Nn.sH(t)||(this.ab=!0)}}),Ui.prototype.makeNodeDataKeyUnique=Ui.prototype.Nz=function(t){if(null!==t){var i=this.Dj;if(""!==i){var e=this.gb(t);if(void 0===e||this.uc.contains(e)){var n=this.fo;if(null!==n&&(null!=(e=n(this,t))&&!this.uc.contains(e)))return void Nn.Ka(t,i,e);if("string"==typeof e){for(n=2;this.uc.contains(e+n);)n++;Nn.Ka(t,i,e+n)}else if(void 0===e||"number"==typeof e){for(n=-this.uc.count-1;this.uc.contains(n);)n--;Nn.Ka(t,i,n)}else Nn.k("Model.getKeyForNodeData returned something other than a string or a number: "+e)}}}},Ui.prototype.addNodeData=Ui.prototype.Xk=function(t){null!==t&&(Nn.ot(t),oe(this,t,!0))},Ui.prototype.addNodeDataCollection=function(t){if(Nn.isArray(t))for(var i=Nn.Va(t),e=0;e<i;e++)this.Xk(Nn.Pa(t,e));else for(t=t.i;t.next();)this.Xk(t.value)},Ui.prototype.removeNodeData=Ui.prototype.ex=function(t){null!==t&&re(this,t,!0)},Ui.prototype.removeNodeDataCollection=function(t){if(Nn.isArray(t))for(var i=Nn.Va(t),e=0;e<i;e++)this.ex(Nn.Pa(t,e));else for(t=t.i;t.next();)this.ex(t.value)},(t=Ui.prototype).Pt=function(t,i){var e=he(this,t);e instanceof Q&&this.ni.add(i,e)},t.AA=function(){},t.zp=function(){},t.yp=function(){},t.gu=function(){},Ui.prototype.clearUnresolvedReferences=Ui.prototype.oD=function(t){void 0===t?this.ni.clear():this.ni.remove(t)},Nn.defineProperty(Ui,{xJ:"copyNodeDataFunction"},function(){return this.yn},function(t){var i=this.yn;i!==t&&(null!==t&&Nn.j(t,"function",Ui,"copyNodeDataFunction"),this.yn=t,this.h("copyNodeDataFunction",i,t))}),Nn.defineProperty(Ui,{hz:"copiesArrays"},function(){return this.Eu},function(t){var i=this.Eu;i!==t&&(null!==t&&Nn.j(t,"boolean",Ui,"copiesArrays"),this.Eu=t,this.h("copiesArrays",i,t))}),Nn.defineProperty(Ui,{gz:"copiesArrayObjects"},function(){return this.iq},function(t){var i=this.iq;i!==t&&(null!==t&&Nn.j(t,"boolean",Ui,"copiesArrayObjects"),this.iq=t,this.h("copiesArrayObjects",i,t))}),Ui.prototype.copyNodeData=function(t){if(null===t)return null;var i=null,i=null!==(i=this.yn)?i(t,this):le(this,t,!0);return Nn.Ta(i)&&Nn.ec(i),i},Nn.defineProperty(Ui,{dG:"afterCopyFunction"},function(){return this.Tp},function(t){var i=this.Tp;i!==t&&(null!==t&&Nn.j(t,"function",Ui,"afterCopyFunction"),this.Tp=t,this.h("afterCopyFunction",i,t))});var ue,fe,ce,de=!1;function pe(t,i){2<arguments.length&&Nn.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data."),Ui.call(this),this.Gf=[],this.co=new Q(Object),this.Yc=new nt(null,Object),this.Kk="",this.Ll=this.xn=this.ho=null,this.Eh="from",this.Fh="to",this.cm=this.bm="",this.am="category",this.jg="",this.lo="isGroup",this.Ug="group",this.jq=!1,void 0!==t&&(this.Yf=t),void 0!==i&&(this.yg=i)}function ye(t,i,e){if(""!==t.Yi){var n=t.af(i);if(void 0!==n&&t.Yc.ja(n)===i)return;if(t.Mz(i),void 0===(n=t.af(i)))return void Nn.k("GraphLinksModel.makeLinkDataKeyUnique failed on "+i+". Data not added to model.");t.Yc.add(n,i)}var o;t.co.add(i),e&&(o=Nn.Va(t.Gf),Nn.Mi(t.Gf,o,i)),ie(t,"linkDataArray",Gt,"linkDataArray",t,null,i,null,o),ve(t,i)}function ge(t,i,e){t.co.remove(i);var n=t.af(i);if(void 0!==n&&t.Yc.remove(n),e){if((o=t.Gf.indexOf(i))<0)return;Nn.Th(t.Gf,o)}if(ie(t,"linkDataArray",Rt,"linkDataArray",t,i,null,o,null),e=t.ol(i),ae(t,e,i),e=t.pl(i),ae(t,e,i),n=t.$j(i),Nn.isArray(n))for(var o=Nn.Va(n),r=0;r<o;r++)ae(t,e=Nn.Pa(n,r),i)}function ve(t,i){var e=t.ol(i),e=t.Xm(e);null===t.ae(e)&&se(t,e,i),e=t.pl(i),e=t.Xm(e),null===t.ae(e)&&se(t,e,i);var n=t.$j(i);if(Nn.isArray(n))for(var o=Nn.Va(n),r=0;r<o;r++)e=Nn.Pa(n,r),null===t.ae(e)&&se(t,e,i)}function me(t){1<arguments.length&&Nn.k("TreeModel constructor can only take one optional argument, the Array of node data."),Ui.call(this),this.Vg="parent",this.kq=!1,this.im="parentLinkCategory",void 0!==t&&(this.Yf=t)}function be(t,i,e){Nn.ec(this),this.D=!1,void 0===t?t="":Nn.j(t,"string",be,"constructor:targetprop"),void 0===i?i=t:Nn.j(i,"string",be,"constructor:sourceprop"),void 0===e?e=null:null!==e&&Nn.j(e,"function",be,"constructor:conv"),this.GC=-1,this.pg=null,this.Eo=t,this.Do=this.zs=0,this.Tv=null,this.Yq=!1,this.uo=i,this.hq=e,this.ur=ue,this.aq=null}function xe(t,i,e){return null===(t=t.en)||""===t?i:"."===t?e:".."===t?e.S:i.be(t)}function we(){this.yF=new Dn(Ki).freeze(),this.Ob="",this.NB=!1}function ke(){this.Ay=new Q(Ui),this.Qe=!1,this.CF=new Dn(we).freeze(),this.Og=-1,this.bC=999,this.ti=!1,this.Ku=null,this.Vk=0,this.YA=!1,this.Tg=new Dn("string").freeze(),this.ko=new Dn("number"),this.hy=!0,this.uy=!1}function Me(t,i,e){if(t.ib)return!1;t.cz&&t.rh<1&&Nn.trace("Ending transaction without having started a transaction: "+e);var n=1===t.rh;n&&i&&t.isEnabled&&t.$c("CommittingTransaction",e,t.Oi);var o,r=0;if(0<t.rh&&(t.Vk--,t.isEnabled)&&(0<(o=t.Tg.count)&&(""===e&&(e=t.Tg.da(0)),t.Tg.Oa(),t.Tg.Vc(o-1),t.Tg.freeze()),0<(o=t.ko.count)&&(r=t.ko.da(o-1),t.ko.Vc(o-1))),o=t.Oi,n){if(i){if(t.uy=!1,t.isEnabled&&null!==o){for((i=o).tt=!0,i.name=e,(n=t.history).Oa(),r=n.count-1;r>t.Ti;r--)null!==(o=n.da(r))&&o.clear(),n.Vc(r),t.uy=!0;0===(r=t.rE)&&(r=1),0<r&&n.count>=r&&(null!==(o=n.da(0))&&o.clear(),n.Vc(0),t.Og--),n.add(i),t.Og++,n.freeze(),o=i}t.$c("CommittedTransaction",e,o)}else{t.ti=!0;try{t.isEnabled&&null!==o&&(o.tt=!0,o.undo())}finally{t.$c("RolledBackTransaction",e,o),t.ti=!1}null!==o&&o.clear()}return!(t.Ku=null)}if(t.isEnabled&&!i&&null!==o){for(t=r,i=(e=o.Of).count-1;t<=i;i--)null!==(n=e.da(i))&&n.undo(),e.Oa(),e.Vc(i);e.freeze()}return!1}function Ce(){0<arguments.length&&Nn.dd(Ce),Nn.ec(this),this.W=null,this.aB=!1,this.uB=this.bB=!0,this.dB=this.eB=this.vB=this.fB=!1,this.Ok=this.RA=null,this.ZC=1.05,this.sB=1,this.vy=NaN,this.ZB=null,this.Vy=NaN,this.Uy=Kt,this.Gj=null}Ui.prototype.setDataProperty=function(t,i,e){if(this.He(t)){if(i===this.xl)this.mx(t,e);else if(i===this.Ym)return void this.jx(t,e)}else!de&&t instanceof ks&&(de=!0,Nn.trace('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Nn.trace("  Is that really your intent?"));var n=Nn.qb(t,i);n!==e&&(Nn.Ka(t,i,e),this.aA(t,i,n,e))},Ui.prototype.addArrayItem=function(t,i){this.mH(t,-1,i)},Ui.prototype.insertArrayItem=Ui.prototype.mH=function(t,i,e){t===this.If&&Nn.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray"),i<0&&(i=Nn.Va(t)),Nn.Mi(t,i,e),ie(this,"",Gt,"",t,null,e,null,i)},Ui.prototype.removeArrayItem=function(t,i){void 0===i&&(i=-1),t===this.If&&Nn.k("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===i&&(i=Nn.Va(t)-1);var e=Nn.Pa(t,i);Nn.Th(t,i),ie(this,"",Rt,"",t,e,null,i,null)},Nn.defineProperty(Ui,{Ym:"nodeCategoryProperty"},function(){return this.fm},function(t){var i=this.fm;i!==t&&(ee(t,Ui,"nodeCategoryProperty"),this.fm=t,this.h("nodeCategoryProperty",i,t))}),Ui.prototype.getCategoryForNodeData=Ui.prototype.xz=function(t){if(null===t)return"";var i=this.fm;return""===i||void 0===(i=Nn.qb(t,i))?"":"string"==typeof i?i:(Nn.k("getCategoryForNodeData found a non-string category for "+t+": "+i),"")},Ui.prototype.setCategoryForNodeData=Ui.prototype.jx=function(t,i){var e,n;Nn.j(i,"string",Ui,"setCategoryForNodeData:cat"),null===t||""!==(e=this.fm)&&(this.He(t)?(void 0===(n=Nn.qb(t,e))&&(n=""),n!==i&&(Nn.Ka(t,e,i),ie(this,"nodeCategory",It,e,t,n,i))):Nn.Ka(t,e,i))},Nn.Ja(pe,Ui),Nn.ea("GraphLinksModel",pe),pe.prototype.cloneProtected=function(t){Ui.prototype.cloneProtected.call(this,t),t.Kk=this.Kk,t.ho=this.ho,t.xn=this.xn,t.Eh=this.Eh,t.Fh=this.Fh,t.bm=this.bm,t.cm=this.cm,t.am=this.am,t.jg=this.jg,t.lo=this.lo,t.Ug=this.Ug,t.jq=this.jq},pe.prototype.clear=pe.prototype.clear=function(){Ui.prototype.clear.call(this),this.Gf=[],this.Yc.clear(),this.co.clear()},(t=pe.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.xA();var i=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){i+="\n node data:",t=this.Yf;for(var e=Nn.Va(t),n=0,n=0;n<e;n++)var o=Nn.Pa(t,n),i=i+(" "+this.gb(o)+":"+ce(o));for(i+="\n link data:",t=this.yg,e=Nn.Va(t),n=0;n<e;n++)o=Nn.Pa(t,n),i+=" "+this.ol(o)+"--\x3e"+this.pl(o)}return i},t.jn=function(){var t=Ui.prototype.jn.call(this),i="";return"category"!==this.Bt&&"string"==typeof this.Bt&&(i+=',\n  "linkCategoryProperty": '+this.quote(this.Bt)),""!==this.Yi&&"string"==typeof this.Yi&&(i+=',\n  "linkKeyProperty": '+this.quote(this.Yi)),"from"!==this.jp&&"string"==typeof this.jp&&(i+=',\n  "linkFromKeyProperty": '+this.quote(this.jp)),"to"!==this.lp&&"string"==typeof this.lp&&(i+=',\n  "linkToKeyProperty": '+this.quote(this.lp)),""!==this.Ct&&"string"==typeof this.Ct&&(i+=',\n  "linkFromPortIdProperty": '+this.quote(this.Ct)),""!==this.Et&&"string"==typeof this.Et&&(i+=',\n  "linkToPortIdProperty": '+this.quote(this.Et)),""!==this.Dt&&"string"==typeof this.Dt&&(i+=',\n  "linkLabelKeysProperty": '+this.quote(this.Dt)),"isGroup"!==this.Kt&&"string"==typeof this.Kt&&(i+=',\n  "nodeIsGroupProperty": '+this.quote(this.Kt)),"group"!==this.vp&&"string"==typeof this.vp&&(i+=',\n  "nodeGroupKeyProperty": '+this.quote(this.vp)),t+i},t.Nt=function(t){Ui.prototype.Nt.call(this,t),t.linkKeyProperty&&(this.Yi=t.linkKeyProperty),t.linkFromKeyProperty&&(this.jp=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.lp=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.Ct=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.Et=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.Bt=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.Dt=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.Kt=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.vp=t.nodeGroupKeyProperty)},t.FA=function(){return Ui.prototype.FA.call(this)+(',\n  "linkDataArray": '+Zi(this,this.yg,!0))},t.cA=function(t){Ui.prototype.cA.call(this,t),t=t.linkDataArray,Nn.isArray(t)&&(this.Qt(t),this.yg=t)},t.GA=function(t){t instanceof pe||Nn.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),""===this.Yi&&Nn.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var i=Ui.prototype.GA.call(this,t);Xi(this,t,"linkKeyProperty"),Xi(this,t,"linkFromKeyProperty"),Xi(this,t,"linkToKeyProperty"),Xi(this,t,"linkLabelKeysProperty"),Xi(this,t,"nodeIsGroupProperty"),Xi(this,t,"nodeGroupKeyProperty");for(var e=new Q,n=new Q,o=(new Q).Tc(this.Yc.mE),r=new nt,s=t.yg,a=0;a<s.length;a++){var h,l=s[a],u=t.af(l);void 0!==u?(o.remove(u),null===(h=this.et(u))?(e.add(u),n.add(l)):Wi(this,h,l,r)||n.add(l)):(this.Mz(l),u=this.af(l),e.add(u),n.add(l))}return t=i,0<e.count&&(t+=this.Dx+Zi(this,e.dc(),!0)),0<n.count&&(t+=this.NA+Zi(this,n.dc(),!0)),0<o.count&&(t+=this.Fx+Zi(this,o.dc(),!0)),t},t.Dx=',\n  "insertedLinkKeys": ',t.NA=',\n  "modifiedLinkData": ',t.Fx=',\n  "removedLinkKeys": ',t.EA=function(t,i){""===this.Yi&&Nn.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var e=Ui.prototype.EA.call(this,t,i),n=this,o=new Q,r=new Q,s=new Q;t.Of.each(function(t){t.ba===n&&("linkDataArray"===t.gf?t.wc===Gt?o.add(t.newValue):t.wc===Rt&&s.add(t.oldValue):n.ah(t.object)&&r.add(t.object))});var a=new Q;o.each(function(t){a.add(n.af(t)),i||r.add(t)});var h=new Q;return s.each(function(t){h.add(n.af(t)),i&&r.add(t)}),0<a.count&&(e+=(i?this.Fx:this.Dx)+Zi(this,a.dc(),!0)),0<r.count&&(e+=this.NA+Zi(this,r.dc(),!0)),0<h.count&&(e+=(i?this.Dx:this.Fx)+Zi(this,h.dc(),!0)),e},t.bA=function(t){Ui.prototype.bA.call(this,t);var i=t.insertedLinkKeys;if(Nn.isArray(i))for(var e=Nn.Va(i),n=0;n<e;n++){var o=Nn.Pa(i,n);null===(r=this.et(o))&&(r=this.rw({}),this.WE(r,o),this.Os(r))}if(i=t.modifiedLinkData,Nn.isArray(i))for(e=Nn.Va(i),n=0;n<e;n++){var r,s=Nn.Pa(i,n),o=this.af(s);if(null!==(r=this.et(o)))for(var a in s)"__gohashid"!==a&&a!==this.Yi&&this.setDataProperty(r,a,s[a])}if(t=t.removedLinkKeys,Nn.isArray(t))for(e=Nn.Va(t),n=0;n<e;n++)o=Nn.Pa(t,n),null!==(r=this.et(o))&&this.bx(r)},t.Dm=function(t,i){var e,n=null;if(t.wc===Gt){if("linkDataArray"===t.gf?n=this.Gf:"linkLabelKeys"===t.gf&&(n=this.$j(t.object)),Nn.isArray(n))return void(i?(Nn.Th(n,t.zg),n!==this.Gf||void 0!==(n=this.af(t.newValue))&&this.Yc.remove(n)):(Nn.Mi(n,t.zg,t.newValue),n===this.Gf&&(e=t.newValue,void 0!==(n=this.af(e))&&this.Yc.add(n,e))))}else if(t.wc===Rt&&("linkDataArray"===t.gf?n=this.Gf:"linkLabelKeys"===t.gf&&(n=this.$j(t.object)),Nn.isArray(n)))return void(i?(Nn.Mi(n,t.Bg,t.oldValue),n===this.Gf&&(e=t.newValue,void 0!==(n=this.af(e))&&this.Yc.add(n,e))):(Nn.Th(n,t.Bg),n===this.Gf&&(void 0!==(n=this.af(t.newValue))&&this.Yc.remove(n))));Ui.prototype.Dm.call(this,t,i)},Nn.defineProperty(pe,{$y:"archetypeNodeData"},function(){return this.Ll},function(t){var i=this.Ll;i!==t&&(null!==t&&Nn.A(t,Object,pe,"archetypeNodeData"),this.Ll=t,this.h("archetypeNodeData",i,t))}),pe.prototype.Xm=function(t){if(void 0!==t){var i,e=this.Ll;return null===e||null===(i=this.ae(t))&&(i=this.copyNodeData(e),Nn.Ka(i,this.Dj,t),this.Xk(i)),t}},Nn.defineProperty(pe,{jp:"linkFromKeyProperty"},function(){return this.Eh},function(t){var i=this.Eh;i!==t&&(ee(t,pe,"linkFromKeyProperty"),this.Eh=t,this.h("linkFromKeyProperty",i,t))}),pe.prototype.getFromKeyForLinkData=pe.prototype.ol=function(t){if(null!==t){var i=this.Eh;if(""!==i&&void 0!==(i=Nn.qb(t,i))){if(ne(i))return i;Nn.k("FromKey value for link data "+t+" is not a number or a string: "+i)}}},pe.prototype.setFromKeyForLinkData=pe.prototype.kx=function(t,i){var e,n;null===i&&(i=void 0),void 0===i||ne(i)||Nn.Ed(i,"number or string",pe,"setFromKeyForLinkData:key"),null===t||""!==(e=this.Eh)&&(i=this.Xm(i),this.ah(t)?(n=Nn.qb(t,e))!==i&&(ae(this,n,t),Nn.Ka(t,e,i),null===this.ae(i)&&se(this,i,t),ie(this,"linkFromKey",It,e,t,n,i),"string"==typeof e&&this.Hb(t,e)):Nn.Ka(t,e,i))},Nn.defineProperty(pe,{lp:"linkToKeyProperty"},function(){return this.Fh},function(t){var i=this.Fh;i!==t&&(ee(t,pe,"linkToKeyProperty"),this.Fh=t,this.h("linkToKeyProperty",i,t))}),pe.prototype.getToKeyForLinkData=pe.prototype.pl=function(t){if(null!==t){var i=this.Fh;if(""!==i&&void 0!==(i=Nn.qb(t,i))){if(ne(i))return i;Nn.k("ToKey value for link data "+t+" is not a number or a string: "+i)}}},pe.prototype.setToKeyForLinkData=pe.prototype.ox=function(t,i){var e,n;null===i&&(i=void 0),void 0===i||ne(i)||Nn.Ed(i,"number or string",pe,"setToKeyForLinkData:key"),null===t||""!==(e=this.Fh)&&(i=this.Xm(i),this.ah(t)?(n=Nn.qb(t,e))!==i&&(ae(this,n,t),Nn.Ka(t,e,i),null===this.ae(i)&&se(this,i,t),ie(this,"linkToKey",It,e,t,n,i),"string"==typeof e&&this.Hb(t,e)):Nn.Ka(t,e,i))},Nn.defineProperty(pe,{Ct:"linkFromPortIdProperty"},function(){return this.bm},function(t){var i=this.bm;i!==t&&(ee(t,pe,"linkFromPortIdProperty"),this.bm=t,this.h("linkFromPortIdProperty",i,t))}),pe.prototype.getFromPortIdForLinkData=pe.prototype.VG=function(t){if(null===t)return"";var i=this.bm;return""===i||void 0===(t=Nn.qb(t,i))?"":t},pe.prototype.setFromPortIdForLinkData=pe.prototype.nA=function(t,i){var e,n;Nn.j(i,"string",pe,"setFromPortIdForLinkData:portname"),null===t||""!==(e=this.bm)&&(this.ah(t)?(void 0===(n=Nn.qb(t,e))&&(n=""),n!==i&&(Nn.Ka(t,e,i),ie(this,"linkFromPortId",It,e,t,n,i),"string"==typeof e&&this.Hb(t,e))):Nn.Ka(t,e,i))},Nn.defineProperty(pe,{Et:"linkToPortIdProperty"},function(){return this.cm},function(t){var i=this.cm;i!==t&&(ee(t,pe,"linkToPortIdProperty"),this.cm=t,this.h("linkToPortIdProperty",i,t))}),pe.prototype.getToPortIdForLinkData=pe.prototype.YG=function(t){if(null===t)return"";var i=this.cm;return""===i||void 0===(t=Nn.qb(t,i))?"":t},pe.prototype.setToPortIdForLinkData=pe.prototype.qA=function(t,i){var e,n;Nn.j(i,"string",pe,"setToPortIdForLinkData:portname"),null===t||""!==(e=this.cm)&&(this.ah(t)?(void 0===(n=Nn.qb(t,e))&&(n=""),n!==i&&(Nn.Ka(t,e,i),ie(this,"linkToPortId",It,e,t,n,i),"string"==typeof e&&this.Hb(t,e))):Nn.Ka(t,e,i))},Nn.defineProperty(pe,{Dt:"linkLabelKeysProperty"},function(){return this.jg},function(t){var i=this.jg;i!==t&&(ee(t,pe,"linkLabelKeysProperty"),this.jg=t,this.h("linkLabelKeysProperty",i,t))}),pe.prototype.getLabelKeysForLinkData=pe.prototype.$j=function(t){if(null===t)return Nn.fj;var i=this.jg;return""===i||void 0===(t=Nn.qb(t,i))?Nn.fj:t},pe.prototype.setLabelKeysForLinkData=pe.prototype.XE=function(t,i){if(Nn.bz(i,pe,"setLabelKeysForLinkData:arr"),null!==t){var e=this.jg;if(""!==e)if(this.ah(t)){var n=Nn.qb(t,e);if(void 0===n&&(n=Nn.fj),n!==i){for(var o=Nn.Va(n),r=0;r<o;r++){var s=Nn.Pa(n,r);ae(this,s,t)}for(Nn.Ka(t,e,i),o=Nn.Va(i),r=0;r<o;r++)s=Nn.Pa(i,r),null===this.ae(s)&&se(this,s,t);ie(this,"linkLabelKeys",It,e,t,n,i),"string"==typeof e&&this.Hb(t,e)}}else Nn.Ka(t,e,i)}},pe.prototype.addLabelKeyForLinkData=pe.prototype.Xy=function(t,i){var e,n;null==i||(ne(i)||Nn.Ed(i,"number or string",pe,"addLabelKeyForLinkData:key"),null===t)||""!==(e=this.jg)&&(void 0===(n=Nn.qb(t,e))?((e=[]).push(i),this.XE(t,e)):Nn.isArray(n)?0<=Nn.az(n,i)||(Nn.Mi(n,1/0,i),this.ah(t)&&(null===this.ae(i)&&se(this,i,t),ie(this,"linkLabelKeys",Gt,e,t,null,i))):Nn.k(e+" property is not an Array; cannot addLabelKeyForLinkData: "+t))},pe.prototype.removeLabelKeyForLinkData=pe.prototype.EE=function(t,i){var e,n,o;null==i||(ne(i)||Nn.Ed(i,"number or string",pe,"removeLabelKeyForLinkData:key"),null===t)||""!==(e=this.jg)&&(n=Nn.qb(t,e),Nn.isArray(n)?(o=Nn.az(n,i))<0||(Nn.Th(n,o),this.ah(t)&&(ae(this,i,t),ie(this,"linkLabelKeys",Rt,e,t,i,null))):void 0!==n&&Nn.k(e+" property is not an Array; cannot removeLabelKeyforLinkData: "+t))},Nn.defineProperty(pe,{yg:"linkDataArray"},function(){return this.Gf},function(t){var i=this.Gf;if(i!==t){Nn.bz(t,pe,"linkDataArray"),this.Yc.clear();for(var e=Nn.Va(t),n=0;n<e;n++){var o=Nn.Pa(t,n);if(!Nn.Ta(o))return void Nn.k("GraphLinksModel.linkDataArray must only contain Objects, not: "+o);Nn.ot(o)}if(this.Gf=t,""!==this.Yi){for(var r=new Dn(Object),n=0;n<e;n++){var o=Nn.Pa(t,n),s=this.af(o);void 0===s||null!==this.Yc.ja(s)?r.add(o):this.Yc.add(s,o)}for(n=r.i;n.next();)o=n.value,this.Mz(o),void 0!==(r=this.af(o))&&this.Yc.add(r,o)}for(r=new Q(Object),n=0;n<e;n++)o=Nn.Pa(t,n),r.add(o);for(this.co=r,ie(this,"linkDataArray",It,"linkDataArray",this,i,t),n=0;n<e;n++)ve(this,o=Nn.Pa(t,n))}}),Nn.defineProperty(pe,{Yi:"linkKeyProperty"},function(){return this.Kk},function(t){var i=this.Kk;if(i!==t){ee(t,pe,"linkKeyProperty"),this.Kk=t,this.Yc.clear();for(var e=Nn.Va(this.yg),n=0;n<e;n++){var o=Nn.Pa(this.yg,n),r=this.af(o);void 0!==r&&this.Yc.add(r,o)}this.h("linkKeyProperty",i,t)}}),pe.prototype.getKeyForLinkData=pe.prototype.af=function(t){if(null!==t){var i=this.Kk;if(""!==i&&void 0!==(i=Nn.qb(t,i))){if(ne(i))return i;Nn.k("Key value for link data "+t+" is not a number or a string: "+i)}}},pe.prototype.setKeyForLinkData=pe.prototype.WE=function(t,i){var e,n;null!=i&&ne(i)||Nn.Ed(i,"number or string",pe,"setKeyForLinkData:key"),null===t||""!==(e=this.Kk)&&(this.ah(t)?(n=Nn.qb(t,e))!==i&&null===this.et(i)&&(Nn.Ka(t,e,i),this.Yc.remove(n),this.Yc.add(i,t),ie(this,"linkKey",It,e,t,n,i),"string"==typeof e&&this.Hb(t,e)):Nn.Ka(t,e,i))},Nn.defineProperty(pe,{cK:"makeUniqueLinkKeyFunction"},function(){return this.ho},function(t){var i=this.ho;i!==t&&(null!==t&&Nn.j(t,"function",pe,"makeUniqueLinkKeyFunction"),this.ho=t,this.h("makeUniqueLinkKeyFunction",i,t))}),pe.prototype.findLinkDataForKey=pe.prototype.et=function(t){return null===t&&Nn.k("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&ne(t)?this.Yc.ja(t):null},pe.prototype.makeLinkDataKeyUnique=pe.prototype.Mz=function(t){if(null!==t){var i=this.Kk;if(""!==i){var e=this.af(t);if(void 0===e||this.Yc.contains(e)){var n=this.ho;if(null!==n&&(null!=(e=n(this,t))&&!this.Yc.contains(e)))return void Nn.Ka(t,i,e);if("string"==typeof e){for(n=2;this.Yc.contains(e+n);)n++;Nn.Ka(t,i,e+n)}else if(void 0===e||"number"==typeof e){for(n=-this.Yc.count-1;this.Yc.contains(n);)n--;Nn.Ka(t,i,n)}else Nn.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: "+e)}}}},pe.prototype.containsLinkData=pe.prototype.ah=function(t){return null!==t&&this.co.contains(t)},pe.prototype.addLinkData=pe.prototype.Os=function(t){if(null!==t){if(void 0===Nn.ld(t))Nn.ec(t);else if(this.ah(t))return;ye(this,t,!0)}},pe.prototype.addLinkDataCollection=function(t){if(Nn.isArray(t))for(var i=Nn.Va(t),e=0;e<i;e++)this.Os(Nn.Pa(t,e));else for(t=t.i;t.next();)this.Os(t.value)},pe.prototype.removeLinkData=pe.prototype.bx=function(t){null!==t&&ge(this,t,!0)},pe.prototype.removeLinkDataCollection=function(t){if(Nn.isArray(t))for(var i=Nn.Va(t),e=0;e<i;e++)this.bx(Nn.Pa(t,e));else for(t=t.i;t.next();)this.bx(t.value)},Nn.defineProperty(pe,{wJ:"copyLinkDataFunction"},function(){return this.xn},function(t){var i=this.xn;i!==t&&(null!==t&&Nn.j(t,"function",pe,"copyLinkDataFunction"),this.xn=t,this.h("copyLinkDataFunction",i,t))}),pe.prototype.copyLinkData=pe.prototype.rw=function(t){if(null===t)return null;var i=null,i=null!==(i=this.xn)?i(t,this):le(this,t,!0);return Nn.Ta(i)&&(Nn.ec(i),""!==this.Eh&&Nn.Ka(i,this.Eh,void 0),""!==this.Fh&&Nn.Ka(i,this.Fh,void 0),""!==this.jg&&Nn.Ka(i,this.jg,[])),i},Nn.defineProperty(pe,{Kt:"nodeIsGroupProperty"},function(){return this.lo},function(t){var i=this.lo;i!==t&&(ee(t,pe,"nodeIsGroupProperty"),this.lo=t,this.h("nodeIsGroupProperty",i,t))}),pe.prototype.isGroupForNodeData=pe.prototype.Fz=function(t){if(null===t)return!1;var i=this.lo;return""!==i&&!!Nn.qb(t,i)},Nn.defineProperty(pe,{vp:"nodeGroupKeyProperty"},function(){return this.Ug},function(t){var i=this.Ug;i!==t&&(ee(t,pe,"nodeGroupKeyProperty"),this.Ug=t,this.h("nodeGroupKeyProperty",i,t))}),Nn.defineProperty(pe,{Hm:"copiesGroupKeyOfNodeData"},function(){return this.jq},function(t){this.jq!==t&&(Nn.j(t,"boolean",pe,"copiesGroupKeyOfNodeData"),this.jq=t)}),pe.prototype.getGroupKeyForNodeData=pe.prototype.Om=function(t){if(null!==t){var i=this.Ug;if(""!==i&&void 0!==(i=Nn.qb(t,i))){if(ne(i))return i;Nn.k("GroupKey value for node data "+t+" is not a number or a string: "+i)}}},pe.prototype.setGroupKeyForNodeData=pe.prototype.lx=function(t,i){var e,n;null===i&&(i=void 0),void 0===i||ne(i)||Nn.Ed(i,"number or string",pe,"setGroupKeyForNodeData:key"),null===t||""!==(e=this.Ug)&&(this.He(t)?(n=Nn.qb(t,e))!==i&&(ae(this,n,t),Nn.Ka(t,e,i),null===this.ae(i)&&se(this,i,t),ie(this,"nodeGroupKey",It,e,t,n,i),"string"==typeof e&&this.Hb(t,e)):Nn.Ka(t,e,i))},pe.prototype.copyNodeData=function(t){return null===t?null:(t=Ui.prototype.copyNodeData.call(this,t),this.Hm||""===this.Ug||void 0===Nn.qb(t,this.Ug)||Nn.Ka(t,this.Ug,void 0),t)},pe.prototype.setDataProperty=function(t,i,e){if(this.He(t))if(i===this.xl)this.mx(t,e);else{if(i===this.Ym)return void this.jx(t,e);if(i===this.vp)return void this.lx(t,e);i===this.Kt&&Nn.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+i)}else if(this.ah(t)){if(i===this.jp)return void this.kx(t,e);if(i===this.lp)return void this.ox(t,e);if(i===this.Ct)return void this.nA(t,e);if(i===this.Et)return void this.qA(t,e);if(i===this.Yi)return void this.WE(t,e);if(i===this.Bt)return void this.VE(t,e);if(i===this.Dt)return void this.XE(t,e)}else!de&&t instanceof ks&&(de=!0,Nn.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Nn.trace("  Is that really your intent?"));var n=Nn.qb(t,i);n!==e&&(Nn.Ka(t,i,e),this.aA(t,i,n,e))},(t=pe.prototype).Pt=function(t,i){Ui.prototype.Pt.call(this,t,i);for(var e=this.uc.i;e.next();)this.hA(e.value,t,i);for(e=this.co.i;e.next();){var n=e.value,o=t,r=i;this.ol(n)===o&&(h=this.Eh,Nn.Ka(n,h,r),ie(this,"linkFromKey",It,h,n,o,r),"string"==typeof h&&this.Hb(n,h)),this.pl(n)===o&&(h=this.Fh,Nn.Ka(n,h,r),ie(this,"linkToKey",It,h,n,o,r),"string"==typeof h&&this.Hb(n,h));var s=this.$j(n);if(Nn.isArray(s))for(var a=Nn.Va(s),h=this.jg,l=0;l<a;l++)Nn.Pa(s,l)===o&&(Nn.kD(s,l,r),ie(this,"linkLabelKeys",Gt,h,n,o,r))}},t.hA=function(t,i,e){var n;this.Om(t)===i&&(n=this.Ug,Nn.Ka(t,n,e),ie(this,"nodeGroupKey",It,n,t,i,e),"string"==typeof n&&this.Hb(t,n))},t.AA=function(){Ui.prototype.AA.call(this);for(var t=this.yg,i=Nn.Va(t),e=0;e<i;e++){ve(this,Nn.Pa(t,e))}},t.zp=function(t){if(Ui.prototype.zp.call(this,t),t=this.gb(t),null!==(e=he(this,t))){for(var i=new Dn(Object),e=e.i;e.next();){var n=e.value;if(this.He(n)){this.Om(n)===t&&(s=this.Ug,ie(this,"nodeGroupKey",It,s,n,t,t),"string"==typeof s&&this.Hb(n,s),i.add(n))}else{this.ol(n)===t&&(s=this.Eh,ie(this,"linkFromKey",It,s,n,t,t),"string"==typeof s&&this.Hb(n,s),i.add(n)),this.pl(n)===t&&(s=this.Fh,ie(this,"linkToKey",It,s,n,t,t),"string"==typeof s&&this.Hb(n,s),i.add(n));var o=this.$j(n);if(Nn.isArray(o))for(var r=Nn.Va(o),s=this.jg,a=0;a<r;a++)Nn.Pa(o,a)===t&&(ie(this,"linkLabelKeys",Gt,s,n,t,t),i.add(n))}}for(i=i.i;i.next();)ae(this,t,i.value)}},t.yp=function(t){Ui.prototype.yp.call(this,t);var i=this.Om(t);null===this.ae(i)&&se(this,i,t)},t.gu=function(t){Ui.prototype.gu.call(this,t);var i=this.Om(t);ae(this,i,t)},Nn.defineProperty(pe,{Bt:"linkCategoryProperty"},function(){return this.am},function(t){var i=this.am;i!==t&&(ee(t,pe,"linkCategoryProperty"),this.am=t,this.h("linkCategoryProperty",i,t))}),pe.prototype.getCategoryForLinkData=pe.prototype.Dw=function(t){if(null===t)return"";var i=this.am;return""===i||void 0===(i=Nn.qb(t,i))?"":"string"==typeof i?i:(Nn.k("getCategoryForLinkData found a non-string category for "+t+": "+i),"")},pe.prototype.setCategoryForLinkData=pe.prototype.VE=function(t,i){var e,n;Nn.j(i,"string",pe,"setCategoryForLinkData:cat"),null===t||""!==(e=this.am)&&(this.ah(t)?(void 0===(n=Nn.qb(t,e))&&(n=""),n!==i&&(Nn.Ka(t,e,i),ie(this,"linkCategory",It,e,t,n,i),"string"==typeof e&&this.Hb(t,e))):Nn.Ka(t,e,i))},Nn.Ja(me,Ui),Nn.ea("TreeModel",me),me.prototype.cloneProtected=function(t){Ui.prototype.cloneProtected.call(this,t),t.Vg=this.Vg,t.kq=this.kq,t.im=this.im},me.prototype.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.xA();var i=(""!==this.name?this.name:"")+" TreeModel";if(0<t){i+="\n node data:",t=this.Yf;for(var e=Nn.Va(t),n=0;n<e;n++)var o=Nn.Pa(t,n),i=i+(" "+this.gb(o)+":"+ce(o))}return i},me.prototype.jn=function(){var t=Ui.prototype.jn.call(this),i="";return"parent"!==this.wp&&"string"==typeof this.wp&&(i+=',\n  "nodeParentKeyProperty": '+this.quote(this.wp)),t+i},me.prototype.Nt=function(t){Ui.prototype.Nt.call(this,t),t.nodeParentKeyProperty&&(this.wp=t.nodeParentKeyProperty)},me.prototype.Xm=function(t){return t},Nn.defineProperty(me,{wp:"nodeParentKeyProperty"},function(){return this.Vg},function(t){var i=this.Vg;i!==t&&(ee(t,me,"nodeParentKeyProperty"),this.Vg=t,this.h("nodeParentKeyProperty",i,t))}),Nn.defineProperty(me,{Im:"copiesParentKeyOfNodeData"},function(){return this.kq},function(t){this.kq!==t&&(Nn.j(t,"boolean",me,"copiesParentKeyOfNodeData"),this.kq=t)}),me.prototype.getParentKeyForNodeData=me.prototype.Pm=function(t){if(null!==t){var i=this.Vg;if(""!==i&&void 0!==(i=Nn.qb(t,i))){if(ne(i))return i;Nn.k("ParentKey value for node data "+t+" is not a number or a string: "+i)}}},me.prototype.setParentKeyForNodeData=me.prototype.oh=function(t,i){var e,n;null===i&&(i=void 0),void 0===i||ne(i)||Nn.Ed(i,"number or string",me,"setParentKeyForNodeData:key"),null===t||""!==(e=this.Vg)&&(i=this.Xm(i),this.He(t)?(n=Nn.qb(t,e))!==i&&(ae(this,n,t),Nn.Ka(t,e,i),null===this.ae(i)&&se(this,i,t),ie(this,"nodeParentKey",It,e,t,n,i),"string"==typeof e&&this.Hb(t,e)):Nn.Ka(t,e,i))},Nn.defineProperty(me,{wK:"parentLinkCategoryProperty"},function(){return this.im},function(t){var i=this.im;i!==t&&(ee(t,me,"parentLinkCategoryProperty"),this.im=t,this.h("parentLinkCategoryProperty",i,t))}),me.prototype.getParentLinkCategoryForNodeData=me.prototype.XG=function(t){if(null===t)return"";var i=this.im;return""===i||void 0===(i=Nn.qb(t,i))?"":"string"==typeof i?i:(Nn.k("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+i),"")},me.prototype.setParentLinkCategoryForNodeData=me.prototype.yI=function(t,i){var e,n;Nn.j(i,"string",me,"setParentLinkCategoryForNodeData:cat"),null===t||""!==(e=this.im)&&(this.He(t)?(void 0===(n=Nn.qb(t,e))&&(n=""),n!==i&&(Nn.Ka(t,e,i),ie(this,"parentLinkCategory",It,e,t,n,i),"string"==typeof e&&this.Hb(t,e))):Nn.Ka(t,e,i))},me.prototype.copyNodeData=function(t){return null===t?null:(t=Ui.prototype.copyNodeData.call(this,t),this.Im||""===this.Vg||void 0===Nn.qb(t,this.Vg)||Nn.Ka(t,this.Vg,void 0),t)},me.prototype.setDataProperty=function(t,i,e){if(this.He(t))if(i===this.xl)this.mx(t,e);else{if(i===this.Ym)return void this.jx(t,e);if(i===this.wp)return void this.oh(t,e)}else!de&&t instanceof ks&&(de=!0,Nn.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Nn.trace("  Is that really your intent?"));var n=Nn.qb(t,i);n!==e&&(Nn.Ka(t,i,e),this.aA(t,i,n,e))},(t=me.prototype).Pt=function(t,i){Ui.prototype.Pt.call(this,t,i);for(var e=this.uc.i;e.next();)this.hA(e.value,t,i)},t.hA=function(t,i,e){var n;this.Pm(t)===i&&(n=this.Vg,Nn.Ka(t,n,e),ie(this,"nodeParentKey",It,n,t,i,e),"string"==typeof n&&this.Hb(t,n))},t.zp=function(t){if(Ui.prototype.zp.call(this,t),t=this.gb(t),null!==(e=he(this,t))){for(var i=new Dn(Object),e=e.i;e.next();){var n,o=e.value;this.He(o)&&this.Pm(o)===t&&(n=this.Vg,ie(this,"nodeParentKey",It,n,o,t,t),"string"==typeof n&&this.Hb(o,n),i.add(o))}for(i=i.i;i.next();)ae(this,t,i.value)}},t.yp=function(t){Ui.prototype.yp.call(this,t);var i=this.Pm(t),i=this.Xm(i);null===this.ae(i)&&se(this,i,t)},t.gu=function(t){Ui.prototype.gu.call(this,t);var i=this.Pm(t);ae(this,i,t)},Nn.ea("Binding",be),be.prototype.copy=function(){var t=new be;return t.Eo=this.Eo,t.zs=this.zs,t.Do=this.Do,t.Tv=this.Tv,t.Yq=this.Yq,t.uo=this.uo,t.hq=this.hq,t.ur=this.ur,t.aq=this.aq,t},be.OneWay=ue=Nn.p(be,"OneWay",1),be.TwoWay=fe=Nn.p(be,"TwoWay",2),be.parseEnum=function(i,e){return Nn.j(i,"function",be,"parseEnum:ctor"),Nn.pb(e,i,be,"parseEnum:defval"),function(t){return null===(t=a(i,t))?e:t}},be.toString=ce=function(t){var i=t;return Nn.Ta(t)&&(t.text?i=t.text:t.name?i=t.name:void 0!==t.key?i=t.key:void 0!==t.id?i=t.id:t.constructor===Object&&(t.Text?i=t.Text:t.Name?i=t.Name:void 0!==t.Key?i=t.Key:void 0!==t.Id?i=t.Id:void 0!==t.ID&&(i=t.ID))),void 0===i?"undefined":null===i?"null":i.toString()},be.prototype.toString=function(){return"Binding("+this.sx+":"+this.aF+(-1!==this.Dl?" "+this.Dl:"")+" "+this.mode.name+")"},be.prototype.freeze=function(){return this.D=!0,this},be.prototype.Oa=function(){return this.D=!1,this},Nn.defineProperty(be,{Dl:null},function(){return this.GC},function(t){this.D&&Nn.ka(this),Nn.j(t,"number",be,"targetId"),this.GC=t}),Nn.defineProperty(be,{sx:"targetProperty"},function(){return this.Eo},function(t){this.D&&Nn.ka(this),Nn.j(t,"string",be,"targetProperty"),this.Eo=t}),Nn.defineProperty(be,{en:"sourceName"},function(){return this.Tv},function(t){this.D&&Nn.ka(this),null!==t&&Nn.j(t,"string",be,"sourceName"),null!==(this.Tv=t)&&(this.Yq=!1)}),Nn.defineProperty(be,{yt:"isToModel"},function(){return this.Yq},function(t){this.D&&Nn.ka(this),Nn.j(t,"boolean",be,"isToModel"),this.Yq=t}),Nn.defineProperty(be,{aF:"sourceProperty"},function(){return this.uo},function(t){this.D&&Nn.ka(this),Nn.j(t,"string",be,"sourceProperty"),this.uo=t}),Nn.defineProperty(be,{uG:"converter"},function(){return this.hq},function(t){this.D&&Nn.ka(this),null!==t&&Nn.j(t,"function",be,"converter"),this.hq=t}),Nn.defineProperty(be,{jG:"backConverter"},function(){return this.aq},function(t){this.D&&Nn.ka(this),null!==t&&Nn.j(t,"function",be,"backConverter"),this.aq=t}),Nn.defineProperty(be,{mode:"mode"},function(){return this.ur},function(t){this.D&&Nn.ka(this),Nn.pb(t,be,be,"mode"),this.ur=t}),be.prototype.makeTwoWay=be.prototype.JH=function(t){return void 0===t&&(t=null),null!==t&&Nn.j(t,"function",be,"makeTwoWay"),this.mode=fe,this.jG=t,this},be.prototype.ofObject=be.prototype.Sw=function(t){return void 0===t&&(t=""),this.en=t,this.yt=!1,this},be.prototype.ofModel=function(){return this.en=null,this.yt=!0,this},be.prototype.ofData=function(){return this.en=null,this.yt=!1,this},be.prototype.updateTarget=be.prototype.rF=function(t,i,e){var n=this.uo;if(void 0===e||""===n||n===e){e=this.Eo;var o=this.hq;if(null===o&&""===e)Nn.trace("Binding error: target property is the empty string: "+this.toString());else{var r,s=i;if(""!==n&&(s=Nn.qb(i,n)),void 0!==s)if(null===o)""!==e&&Nn.Ka(t,e,s);else try{""!==e?(r=o(s,t),Nn.Ka(t,e,r)):o(s,t)}catch(t){}}}},be.prototype.updateSource=be.prototype.tx=function(t,i,e,n){if(void 0===n&&(n=null),this.ur===fe){var o=this.Eo;if(void 0===e||o===e){e=this.uo;var r=this.aq;if(null!==r||""!==e){var s,a=t;if(""!==o&&(a=Nn.qb(t,o)),void 0!==a)if(t=null!==n?n.ba:null,null===r)null!==t?t.setDataProperty(i,e,a):Nn.Ka(i,e,a);else try{""!==e?(s=r(a,i,t),null!==t?t.setDataProperty(i,e,s):Nn.Ka(i,e,s)):r(a,i,t)}catch(t){}}}}},Nn.ea("Transaction",we),we.prototype.toString=function(t){var i="Transaction: "+this.name+" "+this.Of.count.toString()+(this.tt?"":", incomplete");if(void 0!==t&&0<t){t=this.Of.count;for(var e=0;e<t;e++){var n=this.Of.da(e);null!==n&&(i+="\n  "+n.toString())}}return i},we.prototype.clear=we.prototype.clear=function(){var t=this.Of;t.Oa();for(var i=t.count-1;0<=i;i--){var e=t.da(i);null!==e&&e.clear()}t.clear(),t.freeze()},we.prototype.canUndo=we.prototype.canUndo=function(){return this.tt},we.prototype.undo=we.prototype.undo=function(){if(this.canUndo())for(var t=this.Of.count-1;0<=t;t--){var i=this.Of.da(t);null!==i&&i.undo()}},we.prototype.canRedo=we.prototype.canRedo=function(){return this.tt},we.prototype.redo=we.prototype.redo=function(){if(this.canRedo())for(var t=this.Of.count,i=0;i<t;i++){var e=this.Of.da(i);null!==e&&e.redo()}},Nn.u(we,{Of:"changes"},function(){return this.yF}),Nn.defineProperty(we,{name:"name"},function(){return this.Ob},function(t){this.Ob=t}),Nn.defineProperty(we,{tt:"isComplete"},function(){return this.NB},function(t){this.NB=t}),Nn.ea("UndoManager",ke),ke.prototype.toString=function(t){for(var i=(i="UndoManager "+this.Ti+"<"+this.history.count+"<="+this.rE)+"[",e=this.wE.count,n=0;n<e;n++)0<n&&(i+=" "),i+=this.wE.da(n);if(i+="]",void 0!==t&&0<t)for(e=this.history.count,n=0;n<e;n++)i+="\n "+this.history.da(n).toString(t-1);return i},ke.prototype.clear=ke.prototype.clear=function(){var t=this.history;t.Oa();for(var i=t.count-1;0<=i;i--){var e=t.da(i);null!==e&&e.clear()}t.clear(),this.Og=-1,t.freeze(),this.ti=!1,this.Ku=null,this.Vk=0,this.Tg.Oa(),this.Tg.clear(),this.Tg.freeze(),this.ko.clear()},ke.prototype.addModel=ke.prototype.bG=function(t){this.Ay.add(t)},ke.prototype.removeModel=ke.prototype.iI=function(t){this.Ay.remove(t)},ke.prototype.startTransaction=ke.prototype.Qb=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.ib)return!1;!0===this.hy&&(this.hy=!1,this.Vk++,this.$c("StartingFirstTransaction",t,this.Oi),0<this.Vk&&this.Vk--),this.isEnabled&&(this.Tg.Oa(),this.Tg.add(t),this.Tg.freeze(),null===this.Oi?this.ko.add(0):this.ko.add(this.Oi.Of.count)),this.Vk++;var i=1===this.rh;return i&&this.$c("StartedTransaction",t,this.Oi),i},ke.prototype.commitTransaction=ke.prototype.wd=function(t){return void 0===t&&(t=""),Me(this,!0,t)},ke.prototype.rollbackTransaction=ke.prototype.Ap=function(){return Me(this,!1,"")},ke.prototype.canUndo=ke.prototype.canUndo=function(){if(!this.isEnabled||0<this.rh||this.ib)return!1;var t=this.lF;return!(null===t||!t.canUndo())},ke.prototype.undo=ke.prototype.undo=function(){if(this.canUndo()){var t=this.lF;try{this.$c("StartingUndo","Undo",t),this.ti=!0,this.Og--,t.undo()}catch(t){Nn.trace("undo error: "+t.toString())}finally{this.ti=!1,this.$c("FinishedUndo","Undo",t)}}},ke.prototype.canRedo=ke.prototype.canRedo=function(){if(!this.isEnabled||0<this.rh||this.ib)return!1;var t=this.kF;return!(null===t||!t.canRedo())},ke.prototype.redo=ke.prototype.redo=function(){if(this.canRedo()){var t=this.kF;try{this.$c("StartingRedo","Redo",t),this.ti=!0,this.Og++,t.redo()}catch(t){Nn.trace("redo error: "+t.toString())}finally{this.ti=!1,this.$c("FinishedRedo","Redo",t)}}},ke.prototype.$c=function(t,i,e){void 0===e&&(e=null);var n=new Ki;for(n.wc=qt,n.propertyName=t,n.object=e,n.oldValue=i,t=this.SH;t.next();)i=t.value,(n.ba=i).nw(n)},ke.prototype.handleChanged=ke.prototype.WD=function(t){var i,e;!this.isEnabled||this.ib||this.skipsEvent(t)||(null===(e=this.Oi)&&(this.Ku=e=new we),i=t.copy(),(e=e.Of).Oa(),e.add(i),e.freeze(),this.cz&&this.rh<=0&&!this.hy&&(null!==(t=t.g)&&!1===t.Tm||Nn.trace("Change not within a transaction: "+i.toString())))},ke.prototype.skipsEvent=function(t){if(null===t||t.wc.value<0)return!0;if((t=t.object)instanceof ks){if(null!==(t=t.layer)&&t.Gc)return!0}else if(t instanceof zo&&t.Gc)return!0;return!1},Nn.u(ke,{SH:"models"},function(){return this.Ay.i}),Nn.defineProperty(ke,{isEnabled:"isEnabled"},function(){return this.Qe},function(t){this.Qe=t}),Nn.u(ke,{lF:"transactionToUndo"},function(){return 0<=this.Ti&&this.Ti<=this.history.count-1?this.history.da(this.Ti):null}),Nn.u(ke,{kF:"transactionToRedo"},function(){return this.Ti<this.history.count-1?this.history.da(this.Ti+1):null}),Nn.u(ke,{ib:"isUndoingRedoing"},function(){return this.ti}),Nn.u(ke,{history:"history"},function(){return this.CF}),Nn.defineProperty(ke,{rE:"maxHistoryLength"},function(){return this.bC},function(t){this.bC=t}),Nn.u(ke,{Ti:"historyIndex"},function(){return this.Og}),Nn.u(ke,{Oi:"currentTransaction"},function(){return this.Ku}),Nn.u(ke,{rh:"transactionLevel"},function(){return this.Vk}),Nn.u(ke,{gE:"isInTransaction"},function(){return 0<this.Vk}),Nn.defineProperty(ke,{cz:"checksTransactionLevel"},function(){return this.YA},function(t){this.YA=t}),Nn.u(ke,{wE:"nestedTransactionNames"},function(){return this.Tg}),Nn.ea("CommandHandler",Ce);var Ne=null,je="";function De(t,i,e,n,o,r){if(void 0===r&&(r=null),!(t.contains(i)||null!==r&&!r(i)||i instanceof Du))if(t.add(i),i instanceof Lu){if(e&&i instanceof kf)for(var s=i.Ic;s.next();)De(t,s.value,e,n,o,r);if(o)for(s=i.te;s.next();){var a,h,l=s.value;t.contains(l)||(a=l.T,h=l.Z,(null!==a&&t.contains(a)&&null!==h&&t.contains(h)||null===a||null===h)&&De(t,l,e,n,o,r))}if(1<n)for(i=i.ND();i.next();)De(t,i.value,e,n-1,o,r)}else if(i instanceof Ru)for(s=i.Sf;s.next();)De(t,s.value,e,n,o,r)}function Le(t){var i=Nn.jb();for(t=t.i;t.next();){(e=t.value)instanceof Ru||i.push(e)}t=new Q(Lh);for(var e=i.length,n=0;n<e;n++){for(var o=i[n],r=!0,s=0;s<e;s++)if(o.Xh(i[s])){r=!1;break}r&&t.add(o)}return Nn.sa(i),t}function Ae(){0<arguments.length&&Nn.dd(Ae),Nn.ec(this),this.W=null,this.Ob="",this.Qe=!0,this.LB=!1,this.VC=null,this.dw=-1}function Fe(t,i,e){i.zc=!1;var n=0;i.left?n=1!==i.Ve&&2===i.Ve?2:1:i.right&&1===i.Ve&&(n=3);var o="";if(null!==t){switch(n){case 1:o="ObjectSingleClicked";break;case 2:o="ObjectDoubleClicked";break;case 3:o="ObjectContextClicked"}0!==n&&e.Ba(o,t)}else{switch(n){case 1:o="BackgroundSingleClicked";break;case 2:o="BackgroundDoubleClicked";break;case 3:o="BackgroundContextClicked"}0!==n&&e.Ba(o)}if(null!==t)for(;null!==t;){switch(e=null,n){case 1:e=t.click;break;case 2:e=t.at?t.at:t.click;break;case 3:e=t.ez}if(null!==e&&(e(i,t),i.zc))break;t=t.S}else{switch(t=null,n){case 1:t=e.click;break;case 2:t=e.at?e.at:e.click;break;case 3:t=e.ez}null!==t&&t(i)}}function ze(){0<arguments.length&&Nn.dd(ze),Ae.call(this),this.name="Dragging",this.cB=this.PB=!0,this.Rq=this.BB=!1,this.UB=!0,this.jy=new st(NaN,NaN).freeze(),this.ky=P,this.ly=new Se(NaN,NaN).freeze(),this.AB=!1,this.yB=this.$A=this.zB=this.kB=this.Ei=null,this.Aq=this.SB=!1,this.xo=new Se(NaN,NaN),this.Uv=new Se,this.Xv=!1,this.OB=!0,this.In=100,this.jj=[],this.BF=new Q(Lh).freeze()}function Be(t,i){var e;!t.Qi||null!==(e=t.g)&&e.Am&&(e.ba instanceof pe&&1===i.count&&i.first()instanceof Ru?(t.ad=i.first(),t.ad.canRelinkFrom()&&t.ad.canRelinkTo()&&t.ad.Vs(),t.Ei=e.Za.BE,null===t.Ei&&(t.Ei=new Mn,t.Ei.Mc(e))):(t.ad=null,t.Ei=null))}function Oe(t){return new mn(void 0===t?Ht:t.copy())}function Ee(t,i,e,n){if(!i.contains(e)&&(!n||e.canMove()||e.canCopy()))if(e instanceof Lu){if(i.add(e,Oe(e.location)),e instanceof kf)for(var o=e.Ic;o.next();)Ee(t,i,o.value,n);for(o=e.te;o.next();){var r,s,a=o.value;i.contains(a)||(r=a.T,s=a.Z,null!==r&&i.contains(r)&&null!==s&&i.contains(s)&&Ee(t,i,a,n))}if(t.KG)for(e=e.ND();e.next();)Ee(t,i,e.value,n)}else if(e instanceof Ru)for(a=e,i.add(a,Oe()),o=a.Sf;o.next();)Ee(t,i,o.value,n);else e instanceof Du||i.add(e,Oe(e.location))}function qe(t){var i,e=t.g;null!==e&&(i=e.tb,e.tb=!0,Ze(t,e.N,null),e.tb=i),t.jj.length=0}function Ie(){var t=yn;Ke(t),Ye(t);var i=t.g;null!==i&&t.xo.G()&&(i.position=t.xo),null!==i&&Zr(i)}function Ge(t,i){if(null!==i){t.Xv=!0;for(var e=i.i;e.next();){var n=e.key;n instanceof Ru&&(n.Kp=!0)}}}function Re(t,i){if(null!==i){for(var e=i.i;e.next();){var n=e.key;n instanceof Ru&&(n.Kp=!1,n.rl&&function(t){if(null===t.g||!t.rl)return!1;var i=t.points.n,e=i.length;if(e<4)return!1;t=Jr(t.g,!0,t.Sa,null);for(var n=1;n<e-2;n++){var o=i[n],r=i[n+1];if(!t.ip(Math.min(o.x,r.x),Math.min(o.y,r.y),Math.abs(o.x-r.x),Math.abs(o.y-r.y)))return!0}return!1}(n)&&n.ic())}t.Xv=!1}}function Ve(t,i){for(var e=1/0,n=1/0,o=-1/0,r=-1/0,s=t.i;s.next();){var a,h=s.value;h.Pd()&&h.isVisible()&&(h=(a=h.location).x,a=a.y,isNaN(h)||isNaN(a)||(h<e&&(e=h),a<n&&(n=a),o<h&&(o=h),r<a&&(r=a)))}1/0===e?i.m(0,0,0,0):i.m(e,n,o-e,r-n)}function He(t,i){if(null===t.hc&&(!(null===(n=t.g)||i&&(n.ab||n.vf))&&null!==t.bc)){var e=n.la;for(e.isEnabled&&e.gE?null!==e.Oi&&0<e.Oi.Of.count&&(n.la.Ap(),n.Qb("Drag")):Ye(t),n.tb=!i,n.Rp=!i,t.ek=n.yc.ca,e=t.xG?t.bc.cj():n.selection,n=(e=n.Ro(e,n,!0)).i;n.next();)n.value.location=n.key.location;Ve(e,n=Nn.ag()),Nn.Vb(n);for(var n=new nt(Lh),o=t.bc.i;o.next();){var r=o.key;r.Pd()&&r.canCopy()&&(null!==(r=e.ja(r))&&(r.sf(),n.add(r,Oe(r.location))))}for(e=e.i;e.next();)(o=e.value)instanceof Ru&&o.canCopy()&&n.add(o,Oe());t.hc=n,Be(t,n.cj()),null!==t.ad&&(e=(n=t.ad).bn,n.wl(t.ek.x-(e.x+e.width/2),t.ek.y-(e.y+e.height/2)))}}function Ke(t){var i=t.g;if(null!==i){if(null!==t.hc&&(i.gA(t.hc.cj(),!1),(t.hc=null)!==t.bc))for(var e=t.bc.i;e.next();)e.key instanceof Ru&&(e.value.point=new Se(0,0));i.tb=!1,i.Rp=!1,t.ek=i.yc.ca}}function Ue(t){var i;null!==t.ad&&(t.Qi&&null!==t.Ei&&((i=t.Ei).g.remove(i.Cd),i.g.remove(i.Dd)),t.ad=null,t.Ei=null)}function Je(t,i,e){var n,o,r=t.g;null!==r&&(n=t.ek,(o=Nn.L()).assign(r.N.ca),t.moveParts(i,o.du(n),e),Nn.v(o))}function Ye(t){if(null!==t.bc){for(var i,e=t.g,n=t.bc.i;n.next();){var o=n.key;o.Pd()&&(o.location=n.value.point)}for(n=t.bc.i;n.next();){(o=n.key)instanceof Ru&&o.Kp&&(i=n.value.point,t.bc.add(o,Oe()),o.wl(-i.x,-i.y))}e.Uf()}}function We(t,i){if(null===i)return 1;var e=i.Y;return!!(null===e||e instanceof Du||e.layer.Gc||t.bc&&t.bc.contains(e)||t.hc&&t.hc.contains(e))}function Xe(i,t,e,n){var o=i.g;if(null!==o){i.Qi&&(null!==i.ad&&(i.ad.T=null,i.ad.Z=null),_e(i,!1));var r=Jo(o,t,null,function(t){return!We(i,t)}),s=o.N;s.ye=r;var a,h=o.tb,l=!1;try{if(o.tb=!0,l=Ze(i,s,r),!i.qa&&null===yn)return;if(null!==r||null!==(a=o.VH)&&(a(s),l=!0),!i.qa&&null===yn)return;if(i.doDragOver(t,r),!i.qa&&null===yn)return}finally{o.tb=h,l&&o.Uf()}(o.ne||o.oe)&&(e||n)&&Xr(o,s.hf)}}function Ze(t,i,e){var n=!1,o=t.jj.length,r=0<o?t.jj[0]:null;if(e===r)return!1;i.zc=!1;for(var s=0;s<o;s++){var a=t.jj[s],h=a.UH;if(null!==h&&(h(i,a,e),n=!0,i.zc))break}if(t.jj.length=0,!t.qa&&null===yn||null===e)return n;for(i.zc=!1;null!==e;)t.jj.push(e),e=Qe(e);for(o=t.jj.length,s=0;s<o&&(null===(h=(a=t.jj[s]).TH)||(h(i,a,r),n=!0,!i.zc));s++);return n}function Qe(t){var i=t.S;return null!==i?i:t instanceof Lh&&!(t instanceof kf)&&(null!==(t=t.Sa)&&t.dH)?t:null}function $e(t,i,e){var n=t.Ei;if(null===n)return null;var o=t.g.Mm(i,n.zE,function(t){return n.findValidLinkablePort(t,e)});t=Nn.L();for(var r=1/0,s=null,o=o.i;o.next();){var a,h=o.value;null!==h.Y&&(a=h.Xa(jn,t),(a=i.rf(a))<r&&(s=h,r=a))}return Nn.v(t),s}function _e(t,i){var e,n,o,r,s,a=t.ad;null===a||a.oa<2||(null===(e=t.g)||e.ab||null===(e=t.Ei)||((o=n=null)!==a.T||null!==(n=$e(t,a.l(0),!1))&&(o=n.Y),(s=r=null)!==a.Z||null!==(r=$e(t,a.l(a.oa-1),!0))&&(s=r.Y),e.isValidLink(o,n,s,r)?i?(a.Cn=a.l(0).copy(),a.Gn=a.l(a.oa-1).copy(),a.Kp=!1,a.T=o,null!==n&&(a.wg=n.Sd),a.Z=s,null!==r&&(a.qh=r.Sd)):Pn(e,o,n,s,r):Pn(e,null,null,null,null)))}function tn(i,t){var e=i.g;if(null!==e){i.Qi&&_e(i,!0),qe(i);var n=Jo(e,t,null,function(t){return!We(i,t)}),o=e.N;if(null!==(o.ye=n)){o.zc=!1;for(var r=n;null!==r;){var s=r.Qz;if(null!==s&&(s(o,r),o.zc))break;r=Qe(r)}}else null!==(s=e.Qz)&&s(o);if((i.qa||null!==yn)&&(i.doDropOnto(t,n),i.qa||null!==yn))for(n=e.selection.i;n.next();)(o=n.value)instanceof Lu&&function(t,i){var e=!1;if(t.rb.Wj(i)&&(e=!0),0!==(e=t.sz(i,function(t){return t.Y},function(t){return t instanceof Ru},!0,function(t){return t instanceof Ru},e)).count)for(e=e.i;e.next();){var n=e.value;n.rl&&n.ic()}}(e,o.U)}}Ce.prototype.toString=function(){return"CommandHandler"},Nn.u(Ce,{g:"diagram"},function(){return this.W}),Ce.prototype.Mc=function(t){this.W=t},Ce.prototype.doKeyDown=function(){var t,i,e,n,o,r=this.g;null!==r&&(t=r.N,i=Nn.ak?t.Ft:t.control,e=t.shift,n=t.alt,o=t.key,!i||"C"!==o&&"Insert"!==o?i&&"X"===o||e&&"Del"===o?this.canCutSelection()&&this.cutSelection():i&&"V"===o||e&&"Insert"===o?this.canPasteSelection()&&this.pasteSelection():i&&"Y"===o||n&&e&&"Backspace"===o?this.canRedo()&&this.redo():i&&"Z"===o||n&&"Backspace"===o?this.canUndo()&&this.undo():"Del"===o||"Backspace"===o?this.canDeleteSelection()&&this.deleteSelection():i&&"A"===o?this.canSelectAll()&&this.selectAll():"Esc"===o?this.canStopCommand()&&this.stopCommand():"Up"===o?r.oe&&(i?r.scroll("pixel","up"):r.scroll("line","up")):"Down"===o?r.oe&&(i?r.scroll("pixel","down"):r.scroll("line","down")):"Left"===o?r.ne&&(i?r.scroll("pixel","left"):r.scroll("line","left")):"Right"===o?r.ne&&(i?r.scroll("pixel","right"):r.scroll("line","right")):"PageUp"===o?e&&r.ne?r.scroll("page","left"):r.oe&&r.scroll("page","up"):"PageDown"===o?e&&r.ne?r.scroll("page","right"):r.oe&&r.scroll("page","down"):"Home"===o?i&&r.oe?r.scroll("document","up"):!i&&r.ne&&r.scroll("document","left"):"End"===o?i&&r.oe?r.scroll("document","down"):!i&&r.ne&&r.scroll("document","right"):" "===o?this.canScrollToPart()&&this.scrollToPart():"Subtract"===o?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===o?this.canIncreaseZoom()&&this.increaseZoom():i&&"0"===o?this.canResetZoom()&&this.resetZoom():e&&"Z"===o?this.canZoomToFit()&&this.zoomToFit():i&&!e&&"G"===o?this.canGroupSelection()&&this.groupSelection():i&&e&&"G"===o?this.canUngroupSelection()&&this.ungroupSelection():t.event&&113===t.event.which?this.canEditTextBlock()&&this.editTextBlock():t.event&&93===t.event.which?this.canShowContextMenu()&&this.showContextMenu():t.bubbles=!0:this.canCopySelection()&&this.copySelection())},Ce.prototype.doKeyUp=function(){var t=this.g;null!==t&&(t.N.bubbles=!0)},Ce.prototype.stopCommand=function(){var t,i=this.g;null!==i&&((t=i.Wa)instanceof no&&i.nf&&i.ow(),null!==t&&t.doCancel())},Ce.prototype.canStopCommand=function(){return!0},Ce.prototype.selectAll=function(){var t=this.g;if(null!==t){t.pa();try{t.$b="wait",t.Ba("ChangingSelection");for(var i=t.dk;i.next();)i.value.hb=!0;for(var e=t.Ag;e.next();)e.value.hb=!0;for(var n=t.links;n.next();)n.value.hb=!0}finally{t.Ba("ChangedSelection"),t.$b=""}}},Ce.prototype.canSelectAll=function(){var t=this.g;return null!==t&&t.nf},Ce.prototype.deleteSelection=function(){var t=this.g;if(null!==t&&!t.Ba("SelectionDeleting",t.selection))try{t.$b="wait",t.Qb("Delete"),t.Ba("ChangingSelection");for(var i=new Q(Lh),e=t.selection.i;e.next();)De(i,e.value,!0,this.FG?1/0:0,this.ED,function(t){return t.canDelete()});t.gA(i,!0),t.Ba("SelectionDeleted",i)}finally{t.Ba("ChangedSelection"),t.wd("Delete"),t.$b=""}},Ce.prototype.canDeleteSelection=function(){var t=this.g;return!(null===t||t.ab||t.vf||!t.zm||0===t.selection.count)},Ce.prototype.Ro=function(t,i,e){var n,o=new nt(Lh,Lh);for(t=t.i;t.next();)!function t(i,e,n,o,r){if(null===e||r&&!e.canCopy())return null;if(o.contains(e))return o.ja(e);var s=null,a=e.data;{var h;null!==a&&null!==n?(h=n.ba,e instanceof Ru?h instanceof pe&&(a=h.rw(a),Nn.Ta(a)&&(h.Os(a),s=n.Pf(a))):(a=h.copyNodeData(a),Nn.Ta(a)&&(h.Xk(a),s=n.dh(a)))):(ma(e),null!==(s=e.copy())&&(null!==n?n.add(s):null!==a&&i.vG&&(h=i.g.ba,a=s instanceof Ru&&h instanceof pe?h.rw(a):h.copyNodeData(a),Nn.Ta(a)&&(s.data=a))))}if(!(s instanceof Lh))return null;s.hb=!1;s.fh=!1;o.add(e,s);if(e instanceof Lu){for(a=e.te;a.next();){var l;(h=a.value).T!==e||null!==(l=o.ja(h))&&(l.T=s),h.Z===e&&(null!==(l=o.ja(h))&&(l.Z=s))}if(e instanceof kf&&s instanceof kf)for(a=s,e=e.Ic;e.next();)(h=t(i,e.value,n,o,r))instanceof Ru||null===h||(h.Sa=a)}else if(e instanceof Ru)for(a=e.T,null!==a&&(a=o.ja(a),null!==a&&(s.T=a)),a=e.Z,null!==a&&(a=o.ja(a),null!==a&&(s.Z=a)),e=e.Sf;e.next();)null!==(a=t(i,e.value,n,o,r))&&(a.ee=s);return s}(this,t.value,i,o,e);if(null!==i){e=i.ba,t=!1,null!==i.Za.$d&&(t=i.Za.$d.Qi);for(var r=new Q(Ru),s=new nt(Ru,Ru),a=o.i;a.next();){var h,l,u,f=a.value;f instanceof Ru?(h=f,t||null!==h.T&&null!==h.Z||r.add(h)):e instanceof me&&f instanceof Lu&&null!==f.data&&(h=e,l=f,null!==(u=(f=a.key).kl())&&(null!==(u=o.ja(u))?(h.oh(l.data,h.gb(u.data)),h=i.Pf(l.data),null!==(f=f.Yo())&&null!==h&&s.add(f,h)):h.oh(l.data,void 0)))}if(0<r.count&&i.gA(r,!1),0<s.count)for(e=s.i;e.next();)o.add(e.key,e.value)}for(null!==i&&null!==(e=(i=i.ba).dG)&&(n=new nt,o.each(function(t){null!==t.key.data&&n.add(t.key.data,t.value.data)}),e(n,i,this.g.ba)),i=o.i;i.next();)i.value.Hb();return o},Ce.prototype.copySelection=function(){if(null!==(i=this.g)){for(var t=new Q(Lh),i=i.selection.i;i.next();)De(t,i.value,!0,this.yG?1/0:0,this.wG,function(t){return t.canCopy()});this.copyToClipboard(t)}},Ce.prototype.canCopySelection=function(){var t=this.g;return!(null===t||!t.Uj||!t.Yy||0===t.selection.count)},Ce.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Ce.prototype.canCutSelection=function(){var t=this.g;return!(null===t||t.ab||t.vf||!t.Uj||!t.zm||!t.Yy||0===t.selection.count)},Ce.prototype.copyToClipboard=function(t){var i=this.g;if(null!==i){var e=null;if(null===t)Ne=null,je="";else{var n,e=i.ba,o=!1,r=!1,s=null;try{e instanceof me&&(o=(n=e).Im,n.Im=this.xD),e instanceof pe&&(r=(n=e).Hm,n.Hm=this.wD),s=i.Ro(t,null,!0)}finally{e instanceof me&&(e.Im=o),e instanceof pe&&(e.Hm=r),(e=new Dn(Lh)).Tc(s),Ne=e,je=i.ba.el}}i.Ba("ClipboardChanged",e)}},Ce.prototype.pasteFromClipboard=function(){var t=new Q(Lh),i=Ne;if(null===i)return t;var e=this.g;if(null===e||je!==e.ba.el)return t;var n,o=e.ba,r=!1,s=!1,a=null;try{o instanceof me&&(r=(n=o).Im,n.Im=this.xD),o instanceof pe&&(s=(n=o).Hm,n.Hm=this.wD),a=e.Ro(i,e,!1)}finally{for(o instanceof me&&(o.Im=r),o instanceof pe&&(o.Hm=s),i=a.i;i.next();)e=i.value,o=i.key,e.location.G()||(o.location.G()?e.location=o.location:!e.position.G()&&o.position.G()&&(e.position=o.position)),t.add(e)}return t},Ce.prototype.pasteSelection=function(t){void 0===t&&(t=null);var i=this.g;if(null!==i)try{i.$b="wait",i.Qb("Paste"),i.Ba("ChangingSelection");var e=this.pasteFromClipboard();0<e.count&&gr(i);for(var n,o,r,s=e.i;s.next();)s.value.hb=!0;i.Ba("ChangedSelection"),null===t||(n=i.computePartsBounds(i.selection))&&(null===(o=i.Za.$d)&&(o=new ze).Mc(i),r=o.computeEffectiveCollection(i.selection),o.moveParts(r,new Se(t.x-n.na,t.y-n.ua),!1)),i.Ba("ClipboardPasted",e)}finally{i.wd("Paste"),i.$b=""}},Ce.prototype.canPasteSelection=function(){var t=this.g;return!(null===t||t.ab||t.vf||!t.Ko||!t.Yy||null===Ne||je!==t.ba.el)},Ce.prototype.undo=function(){var t=this.g;null!==t&&t.la.undo()},Ce.prototype.canUndo=function(){var t=this.g;return null!==t&&!t.ab&&!t.vf&&(t.gD&&t.la.canUndo())},Ce.prototype.redo=function(){var t=this.g;null!==t&&t.la.redo()},Ce.prototype.canRedo=function(){var t=this.g;return null!==t&&!t.ab&&!t.vf&&(t.gD&&t.la.canRedo())},Ce.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.vx),Nn.Ue(t,Ce,"decreaseZoom:factor");var i=this.g;null!==i&&i.al===fo&&((t*=i.scale)<i.hh||t>i.gh||(i.scale=t))},Ce.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.vx),Nn.Ue(t,Ce,"canDecreaseZoom:factor");var i=this.g;return null!==i&&i.al===fo&&(!((t*=i.scale)<i.hh||t>i.gh)&&i.mw)},Ce.prototype.increaseZoom=function(t){void 0===t&&(t=this.vx),Nn.Ue(t,Ce,"increaseZoom:factor");var i=this.g;null!==i&&i.al===fo&&((t*=i.scale)<i.hh||t>i.gh||(i.scale=t))},Ce.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.vx),Nn.Ue(t,Ce,"canIncreaseZoom:factor");var i=this.g;return null!==i&&i.al===fo&&(!((t*=i.scale)<i.hh||t>i.gh)&&i.mw)},Ce.prototype.resetZoom=function(t){void 0===t&&(t=this.tw),Nn.Ue(t,Ce,"resetZoom:newscale");var i=this.g;null===i||t<i.hh||t>i.gh||(i.scale=t)},Ce.prototype.canResetZoom=function(t){void 0===t&&(t=this.tw),Nn.Ue(t,Ce,"canResetZoom:newscale");var i=this.g;return!(null===i||t<i.hh||t>i.gh)&&i.mw},Ce.prototype.zoomToFit=function(){var t,i,e=this.g;null!==e&&(t=e.scale,i=e.position,t===this.Vy&&!isNaN(this.vy)&&e.Zd.K(this.Uy)?(e.scale=this.vy,e.position=this.ZB,this.Vy=NaN,this.Uy=Kt):(this.vy=t,this.ZB=i.copy(),e.zoomToFit(),this.Vy=e.scale,this.Uy=e.Zd.copy()))},Ce.prototype.canZoomToFit=function(){var t=this.g;return null!==t&&t.mw},Ce.prototype.scrollToPart=function(t){void 0===t&&(t=null),null!==t&&Nn.A(t,Lh,Ce,"part");var i,e,n=this.g;if(null!==n){if(null===t){try{null!==this.Gj&&(this.Gj.next()?t=this.Gj.value:this.Gj=null)}catch(t){}null===t&&(0<n.Qm.count?this.Gj=n.Qm.i:0<n.selection.count&&(this.Gj=n.selection.i),null!==this.Gj&&this.Gj.next()&&(t=this.Gj.value))}null!==t&&((i=n.Na).$m("Scroll To Part"),e=n.position.copy(),n.kG(t.U),e.Fc(n.position)&&i.Zh())}},Ce.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),null!==t&&Nn.A(t,Lh,Ce,"part"),null!==(t=this.g)&&(0!==t.selection.count||0!==t.Qm.count)&&(t.ne&&t.oe)},Ce.prototype.collapseTree=function(t){void 0===t&&(t=null);var i=this.g;if(null!==i)try{i.Qb("Collapse Tree"),i.Na.$m("Collapse Tree");var e=new Dn(Lu);if(null!==t&&t.md)t.collapseTree(),e.add(t);else for(var n=i.selection.i;n.next();){var o=n.value;o instanceof Lu&&((t=o).md&&(t.collapseTree(),e.add(t)))}i.Ba("TreeCollapsed",e)}finally{i.wd("Collapse Tree")}},Ce.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.ab)return!1;if(null!==t){if(!t.md)return!1;if(0<t.Cw().count)return!0}else for(t=i.selection.i;t.next();)if((i=t.value)instanceof Lu&&i.md&&0<i.Cw().count)return!0;return!1},Ce.prototype.expandTree=function(t){void 0===t&&(t=null);var i=this.g;if(null!==i)try{i.Qb("Expand Tree"),i.Na.$m("Expand Tree");var e=new Dn(Lu);if(null===t||t.md)for(var n=i.selection.i;n.next();){var o=n.value;o instanceof Lu&&((t=o).md||(t.expandTree(),e.add(t)))}else t.expandTree(),e.add(t);i.Ba("TreeExpanded",e)}finally{i.wd("Expand Tree")}},Ce.prototype.canExpandTree=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.ab)return!1;if(null!==t){if(t.md)return!1;if(0<t.Cw().count)return!0}else for(t=i.selection.i;t.next();)if((i=t.value)instanceof Lu&&!i.md&&0<i.Cw().count)return!0;return!1},Ce.prototype.groupSelection=function(){var t=this.g;if(null!==t){var i=t.ba;if(i instanceof pe){var e=this.hD;if(null!==e){var n=null;try{t.$b="wait",t.Qb("Group"),t.Ba("ChangingSelection");for(var o=new Dn(Lh),r=t.selection.i;r.next();){var s=r.value;s.Pd()&&s.canGroup()&&o.add(s)}for(var a=new Dn(Lh),h=o.i;h.next();){for(var l=h.value,r=!1,u=o.i;u.next();)if(l.Xh(u.value)){r=!0;break}r||a.add(l)}if(0<a.count){var f,c=a.first().Sa;if(null!==c)for(;null!==c;){for(var o=!1,d=a.i;d.next();)if(!d.value.Xh(c)){o=!0;break}if(!o)break;c=c.Sa}if(e instanceof kf?(ma(e),null!==(n=e.copy())&&t.add(n)):i.Fz(e)&&(f=i.copyNodeData(e),Nn.Ta(f)&&(i.Xk(f),n=t.Bw(f))),null!==n){null!==c&&this.isValidMember(c,n)&&(n.Sa=c);for(var p=a.i;p.next();){var y=p.value;this.isValidMember(n,y)&&(y.Sa=n)}t.select(n)}}t.Ba("ChangedSelection"),t.Ba("SelectionGrouped",n)}finally{t.wd("Group"),t.$b=""}}}}},Ce.prototype.canGroupSelection=function(){var t=this.g;if(null===t||t.ab||t.vf||!t.Ko||!t.hw||!(t.ba instanceof pe)||null===this.hD)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.Pd()&&i.canGroup())return!0}return!1},Ce.prototype.isValidMember=function(t,i){if(null===i||t===i||i instanceof Ru)return!1;if(null!==t){if(t===i||t.Xh(i))return!1;var e=t.Pz;if(null!==e&&!e(t,i)||null===t.data&&null!==i.data||null!==t.data&&null===i.data)return!1}return null===(e=this.Pz)||e(t,i)},Ce.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var i=this.g;if(null!==i){var e=i.ba;if(e instanceof pe)try{i.$b="wait",i.Qb("Ungroup"),i.Ba("ChangingSelection");var n=new Dn(kf);if(null!==t)n.add(t);else for(var o=i.selection.i;o.next();){var r=o.value;r instanceof kf&&((t=r).canUngroup()&&n.add(t))}if(0<n.count){i.ow();for(var s=n.i;s.next();){var a=s.value;a.expandSubGraph();var h=a.Sa,l=null!==h&&null!==h.data?e.gb(h.data):void 0,u=new Dn(Lh);u.Tc(a.Ic);for(var f=u.i;f.next();){var c,d=f.value;d.hb=!0,d instanceof Ru||(null!==(c=d.data)?e.lx(c,l):d.Sa=h)}i.remove(a)}}i.Ba("ChangedSelection"),i.Ba("SelectionUngrouped",n,u)}finally{i.wd("Ungroup"),i.$b=""}}},Ce.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.ab||i.vf||!i.zm||!i.lw||!(i.ba instanceof pe))return!1;if(null!==t){if(t.canUngroup())return!0}else for(t=i.selection.i;t.next();)if((i=t.value)instanceof kf&&i.canUngroup())return!0;return!1},Ce.prototype.addTopLevelParts=function(t,i){for(var e=!0,n=Le(t).i;n.next();){var o=n.value;null!==o.Sa&&(!i||this.isValidMember(null,o)?o.Sa=null:e=!1)}return e},Ce.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var i=this.g;if(null!==i)try{i.Qb("Collapse SubGraph"),i.Na.$m("Collapse SubGraph");var e=new Dn(kf);if(null!==t&&t.de)t.collapseSubGraph(),e.add(t);else for(var n=i.selection.i;n.next();){var o=n.value;o instanceof kf&&((t=o).de&&(t.collapseSubGraph(),e.add(t)))}i.Ba("SubGraphCollapsed",e)}finally{i.wd("Collapse SubGraph")}},Ce.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.ab)return!1;if(null!==t)return!!t.de;for(t=i.selection.i;t.next();)if((i=t.value)instanceof kf&&i.de)return!0;return!1},Ce.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var i=this.g;if(null!==i)try{i.Qb("Expand SubGraph"),i.Na.$m("Expand SubGraph");var e=new Dn(kf);if(null===t||t.de)for(var n=i.selection.i;n.next();){var o=n.value;o instanceof kf&&((t=o).de||(t.expandSubGraph(),e.add(t)))}else t.expandSubGraph(),e.add(t);i.Ba("SubGraphExpanded",e)}finally{i.wd("Expand SubGraph")}},Ce.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.ab)return!1;if(null!==t)return!t.de;for(t=i.selection.i;t.next();)if((i=t.value)instanceof kf&&!i.de)return!0;return!1},Ce.prototype.editTextBlock=function(t){void 0===t&&(t=null),null!==t&&Nn.A(t,qa,Ce,"editTextBlock");var i=this.g;if(null!==i){var e=i.Za.vA;if(null!==e){if(null===t){t=null;for(var n=i.selection.i;n.next();){var o=n.value;if(o.canEdit()){t=o;break}}if(null===t)return;t=t.ct(function(t){return t instanceof qa&&t.oz})}null!==t&&(i.Wa=null,e.ze=t,i.Wa=e)}}},Ce.prototype.canEditTextBlock=function(t){void 0===t&&(t=null),null!==t&&Nn.A(t,qa,Ce,"canEditTextBlock");var i=this.g;if(null===i||i.ab||i.vf||!i.kw||null===i.Za.vA)return!1;if(null!==t){if(null!==(t=t.Y)&&t.canEdit())return!0}else for(i=i.selection.i;i.next();)if((t=i.value).canEdit()&&null!==(t=t.ct(function(t){return t instanceof qa&&t.oz})))return!0;return!1},Ce.prototype.showContextMenu=function(t){var i,e,n,o=this.g;null===o||null!==(i=o.Za.fz)&&(void 0===t&&(t=0<o.selection.count?o.selection.first():o),null!==(t=i.findObjectWithContextMenu(t)))&&(e=new Vi,n=null,t instanceof ks?n=t.Xa(jn):o.tH||(n=new Se((n=o.rb).x+n.width/2,n.y+n.height/2)),null!==n&&(e.g=o,e.hf=o.mF(n),e.ca=n,e.left=!1,e.right=!0,e.up=!0,o.N=e),Rn(o.Wa=i,!1,t))},Ce.prototype.canShowContextMenu=function(t){var i=this.g;if(null===i)return!1;var e=i.Za.fz;return null!==e&&(void 0===t&&(t=0<i.selection.count?i.selection.first():i),null!==e.findObjectWithContextMenu(t))},Nn.defineProperty(Ce,{vG:"copiesClipboardData"},function(){return this.aB},function(t){Nn.j(t,"boolean",Ce,"copiesClipboardData"),this.aB=t}),Nn.defineProperty(Ce,{wG:"copiesConnectedLinks"},function(){return this.bB},function(t){Nn.j(t,"boolean",Ce,"copiesConnectedLinks"),this.bB=t}),Nn.defineProperty(Ce,{ED:"deletesConnectedLinks"},function(){return this.uB},function(t){Nn.j(t,"boolean",Ce,"deletesConnectedLinks"),this.uB=t}),Nn.defineProperty(Ce,{yG:"copiesTree"},function(){return this.fB},function(t){Nn.j(t,"boolean",Ce,"copiesTree"),this.fB=t}),Nn.defineProperty(Ce,{FG:"deletesTree"},function(){return this.vB},function(t){Nn.j(t,"boolean",Ce,"deletesTree"),this.vB=t}),Nn.defineProperty(Ce,{xD:"copiesParentKey"},function(){return this.eB},function(t){Nn.j(t,"boolean",Ce,"copiesParentKey"),this.eB=t}),Nn.defineProperty(Ce,{wD:"copiesGroupKey"},function(){return this.dB},function(t){Nn.j(t,"boolean",Ce,"copiesGroupKey"),this.dB=t}),Nn.defineProperty(Ce,{hD:"archetypeGroupData"},function(){return this.RA},function(t){null!==t&&Nn.A(t,Object,Ce,"archetypeGroupData");var i=this.g;null===i||(i=i.ba)instanceof pe&&(t instanceof kf||i.Fz(t)||Nn.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+t)),this.RA=t}),Nn.defineProperty(Ce,{Pz:"memberValidation"},function(){return this.Ok},function(t){null!==t&&Nn.j(t,"function",Ce,"memberValidation"),this.Ok=t}),Nn.defineProperty(Ce,{tw:"defaultScale"},function(){return this.sB},function(t){Nn.Ue(t,Ce,"defaultScale"),0<t||Nn.k("defaultScale must be larger than zero, not: "+t),this.sB=t}),Nn.defineProperty(Ce,{vx:"zoomFactor"},function(){return this.ZC},function(t){Nn.Ue(t,Ce,"zoomFactor"),1<t||Nn.k("zoomFactor must be larger than 1.0, not: "+t),this.ZC=t}),Nn.ea("Tool",Ae),Ae.prototype.Mc=function(t){this.W=t},Ae.prototype.toString=function(){return""!==this.name?this.name+" Tool":Nn.$e(Object.getPrototypeOf(this))},Ae.prototype.updateAdornments=function(){},Ae.prototype.canStart=function(){return this.isEnabled},Ae.prototype.doStart=function(){},Ae.prototype.doActivate=function(){this.qa=!0},Ae.prototype.doDeactivate=function(){this.qa=!1},Ae.prototype.doStop=function(){},Ae.prototype.doCancel=function(){this.stopTool()},Ae.prototype.stopTool=function(){var t=this.g;null!==t&&t.Wa===this&&(t.Wa=null,t.$b="")},Ae.prototype.doMouseDown=function(){!this.qa&&this.canStart()&&this.doActivate()},Ae.prototype.doMouseMove=function(){},Ae.prototype.doMouseUp=function(){this.stopTool()},Ae.prototype.doMouseWheel=function(){},Ae.prototype.canStartMultiTouch=function(){return!0},Ae.prototype.standardPinchZoomStart=function(){var t=this.g;if(null!==t){var i,e,n,o=t.N.event,r=null,s=null;if(void 0!==o.targetTouches){if(o.targetTouches.length<2)return;r=o.targetTouches[0],s=o.targetTouches[1]}else{if(null===t.Jf[0])return;r=t.Jf[0],s=t.Jf[1]}this.doCancel(),t.ap("hasGestureZoom")&&(t.iy=!0,t.kC=t.scale,i=fr(t),e=(n=r).clientX-i.x,r=n.clientY-i.y,s=(n=s).clientX-i.x,n=n.clientY-i.y,Nn.v(i),i=s-e,r=n-r,t.DC=Math.sqrt(i*i+r*r),o.preventDefault(),o.cancelBubble=!0)}},Ae.prototype.standardPinchZoomMove=function(){var t=this.g;if(null!==t){var i=t.N.event;this.doCancel();var e,n,o,r,s=null,a=null;if(void 0!==i.targetTouches){if(i.targetTouches.length<2)return;s=i.targetTouches[0],a=i.targetTouches[1]}else{if(null===t.Jf[0])return;s=t.Jf[0],a=t.Jf[1]}t.ap("hasGestureZoom")&&t.iy&&(o=fr(t),s=(e=s).clientX-o.x,r=e.clientY-o.y,a=(e=a).clientX-o.x,e=e.clientY-o.y,Nn.v(o),o=a-s,n=e-r,o=Math.sqrt(o*o+n*n)/t.DC,s=new Se((Math.min(a,s)+Math.max(a,s))/2,(Math.min(e,r)+Math.max(e,r))/2),r=t.kC*o,a=t.nb,r!==t.scale&&a.canResetZoom(r)&&(o=t.Hl,t.Hl=s,a.resetZoom(r),t.Hl=o),i.preventDefault(),i.cancelBubble=!0)}},Ae.prototype.doKeyDown=function(){var t=this.g;null!==t&&"Esc"===t.N.key&&this.doCancel()},Ae.prototype.doKeyUp=function(){},Ae.prototype.startTransaction=Ae.prototype.Qb=function(t){void 0===t&&(t=this.name),this.Bf=null;var i=this.g;return null!==i&&i.Qb(t)},Ae.prototype.stopTransaction=Ae.prototype.fk=function(){var t=this.g;return null!==t&&(null===this.Bf?t.Ap():t.wd(this.Bf))},Ae.prototype.standardMouseSelect=function(){var t=this.g;if(null!==t&&t.nf){var i=t.N,e=t.gt(i.ca,!1);if(null!==e){if(Nn.ak?i.Ft:i.control){for(t.Ba("ChangingSelection"),i=e;null!==i&&!i.canSelect();)i=i.Sa;null!==i&&(i.hb=!i.hb),t.Ba("ChangedSelection")}else if(i.shift){if(!e.hb){for(t.Ba("ChangingSelection"),i=e;null!==i&&!i.canSelect();)i=i.Sa;null!==i&&(i.hb=!0),t.Ba("ChangedSelection")}}else if(!e.hb){for(i=e;null!==i&&!i.canSelect();)i=i.Sa;null!==i&&t.select(i)}}else!i.left||(Nn.ak?i.Ft:i.control)||i.shift||t.ow()}},Ae.prototype.standardMouseClick=function(t,i){void 0===t&&(t=null),void 0===i&&(i=function(t){return!t.layer.Gc});var e=this.g;if(null===e)return!1;var n=e.N,o=e.qe(n.ca,t,i);return Fe(n.ye=o,n,e),n.zc},Ae.prototype.standardMouseOver=function(){var t=this.g;if(null!==t){var i=t.N;if(null!==i.g&&!0!==t.Na.pc){var e=t.tb;t.tb=!0;var n=t.qe(i.ca,null,null),o=!1;if((i.ye=n)!==t.zn){var r=t.zn,s=r;for(t.zn=n,this.doCurrentObjectChanged(r,n),i.zc=!1;null!==r;){var a=r.Ht;if(null!==a){if(n===r)break;if(null!==n&&n.tl(r))break;if(a(i,r,n),o=!0,i.zc)break}r=r.S}for(r=s,i.zc=!1;null!==n;){if(null!==(a=n.Gt)){if(r===n)break;if(null!==r&&r.tl(n))break;if(a(i,n,r),o=!0,i.zc)break}n=n.S}n=t.zn}if(null!==n){for(r=n,a="";null!==r&&""===(a=r.cursor);)r=r.S;for(t.$b=a,i.zc=!1,r=n;null!==r&&(null===(a=r.Tz)||(a(i,r),o=!0,!i.zc));)r=r.S}else t.$b="",null!==(a=t.Tz)&&(a(i),o=!0);o&&t.ue(),t.tb=e}}},Ae.prototype.doCurrentObjectChanged=function(){},Ae.prototype.standardMouseWheel=function(){var t,i,e,n,o,r,s=this.g;null===s||0!==(i=(t=s.N).gl)&&s.Zd.G()&&(e=s.nb,((n=s.Za.It)===Jn&&!t.shift||n===Un&&t.control)&&(0<i?e.canIncreaseZoom():e.canDecreaseZoom())?(n=s.Hl,s.Hl=t.hf,0<i?e.increaseZoom():e.decreaseZoom(),s.Hl=n,t.bubbles=!1):(n===Jn&&t.shift||n===Un&&!t.control)&&(e=s.position.copy(),n=0<i?i:-i,o=t.event.deltaX,r=t.event.deltaY,void 0===o||void 0===r||0===o&&0===r?!t.shift&&s.oe?(n=n/40*(o=s.Ut),0<i?s.scroll("pixel","up",n):s.scroll("pixel","down",n)):t.shift&&s.ne&&(n=n/40*(o=s.Tt),0<i?s.scroll("pixel","left",n):s.scroll("pixel","right",n)):(0!==o&&s.ne&&(0<o?s.scroll("pixel","left",-o):s.scroll("pixel","right",o)),0!==r&&s.oe&&(0<r?s.scroll("pixel","up",-r):s.scroll("pixel","down",r))),s.position.K(e)||(t.bubbles=!1)))},Ae.prototype.standardWaitAfter=function(t,i){Nn.j(t,"number",Ae,"standardWaitAfter:delay"),this.cancelWaitAfter();var e=this,n=i.copy();this.dw=Nn.setTimeout(function(){e.doWaitAfter(n)},t)},Ae.prototype.cancelWaitAfter=function(){-1!==this.dw&&Nn.clearTimeout(this.dw),this.dw=-1},Ae.prototype.doWaitAfter=function(){},Ae.prototype.findToolHandleAt=function(t,i){var e=this.g;return null!==e&&null!==(e=e.qe(t,function(t){for(;null!==t&&!(t.S instanceof Du);)t=t.S;return t}))&&e.S.gc===i?e:null},Ae.prototype.isBeyondDragSize=function(t,i){var e=this.g;if(null===e)return!1;void 0===t&&(t=e.yc.hf),void 0===i&&(i=e.N.hf);var n=(o=e.Za.JG).width,o=o.height;return e.yc.Vi&&(n+=6,o+=6),Math.abs(i.x-t.x)>n||Math.abs(i.y-t.y)>o},Nn.u(Ae,{g:"diagram"},function(){return this.W}),Nn.defineProperty(Ae,{name:"name"},function(){return this.Ob},function(t){Nn.j(t,"string",Ae,"name"),this.Ob=t}),Nn.defineProperty(Ae,{isEnabled:"isEnabled"},function(){return this.Qe},function(t){Nn.j(t,"boolean",Ae,"isEnabled"),this.Qe=t}),Nn.defineProperty(Ae,{qa:"isActive"},function(){return this.LB},function(t){Nn.j(t,"boolean",Ae,"isActive"),this.LB=t}),Nn.defineProperty(Ae,{Bf:"transactionResult"},function(){return this.VC},function(t){null!==t&&Nn.j(t,"string",Ae,"transactionResult"),this.VC=t}),Nn.Ja(ze,Ae),Nn.ea("DraggingTool",ze),Nn.defineProperty(ze,{dE:"isCopyEnabled"},function(){return this.PB},function(t){Nn.j(t,"boolean",ze,"isCopyEnabled"),this.PB=t}),Nn.defineProperty(ze,{xG:"copiesEffectiveCollection"},function(){return this.cB},function(t){Nn.j(t,"boolean",ze,"copiesEffectiveCollection"),this.cB=t}),Nn.defineProperty(ze,{KG:"dragsTree"},function(){return this.BB},function(t){Nn.j(t,"boolean",ze,"dragsTree"),this.BB=t}),Nn.defineProperty(ze,{Iw:"isGridSnapEnabled"},function(){return this.Rq},function(t){Nn.j(t,"boolean",ze,"isGridSnapEnabled"),this.Rq=t}),Nn.defineProperty(ze,{nH:"isComplexRoutingRealtime"},function(){return this.OB},function(t){Nn.j(t,"boolean",ze,"isComplexRoutingRealtime"),this.OB=t}),Nn.defineProperty(ze,{pH:"isGridSnapRealtime"},function(){return this.UB},function(t){Nn.j(t,"boolean",ze,"isGridSnapRealtime"),this.UB=t}),Nn.defineProperty(ze,{VD:"gridSnapCellSize"},function(){return this.jy},function(t){Nn.A(t,st,ze,"gridSnapCellSize"),this.jy.K(t)||(this.jy=t=t.R())}),Nn.defineProperty(ze,{ZG:"gridSnapCellSpot"},function(){return this.ky},function(t){Nn.A(t,ct,ze,"gridSnapCellSpot"),this.ky.K(t)||(this.ky=t=t.R())}),Nn.defineProperty(ze,{$G:"gridSnapOrigin"},function(){return this.ly},function(t){Nn.A(t,Se,ze,"gridSnapOrigin"),this.ly.K(t)||(this.ly=t=t.R())}),Nn.defineProperty(ze,{Qi:"dragsLink"},function(){return this.AB},function(t){Nn.j(t,"boolean",ze,"dragsLink"),this.AB=t}),Nn.defineProperty(ze,{Km:"currentPart"},function(){return this.kB},function(t){null!==t&&Nn.A(t,Lh,ze,"currentPart"),this.kB=t}),Nn.defineProperty(ze,{hc:"copiedParts"},function(){return this.$A},function(t){this.$A=t}),Nn.defineProperty(ze,{bc:"draggedParts"},function(){return this.zB},function(t){this.zB=t}),Nn.u(ze,{LJ:"draggingParts"},function(){return null!==this.hc?this.hc.cj():null!==this.bc?this.bc.cj():this.BF}),Nn.defineProperty(ze,{ad:"draggedLink"},function(){return this.yB},function(t){null!==t&&Nn.A(t,Ru,ze,"draggedLink"),this.yB=t}),Nn.defineProperty(ze,{Hw:"isDragOutStarted"},function(){return this.SB},function(t){this.SB=t}),Nn.defineProperty(ze,{ek:"startPoint"},function(){return this.Uv},function(t){Nn.A(t,Se,ze,"startPoint"),this.Uv.K(t)||(this.Uv=t=t.R())}),Nn.defineProperty(ze,{AD:"delay"},function(){return this.In},function(t){Nn.j(t,"number",ze,"delay"),this.In=t}),ze.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.ab&&!t.Ss||!t.$k&&!t.Uj&&!t.Ss||!t.nf)return!1;var i=t.N;return!(!i.left||t.Wa!==this&&(!this.isBeyondDragSize()||i.Vi&&i.timestamp-t.yc.timestamp<this.In))&&null!==this.findDraggablePart()},ze.prototype.findDraggablePart=function(){var t=this.g;if(null===t)return null;if(null===(t=t.gt(t.yc.ca,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.Sa;return null!==t&&(t.canMove()||t.canCopy())?t:null},ze.prototype.standardMouseSelect=function(){var t=this.g;if(null!==t&&t.nf){var i=t.gt(t.yc.ca,!1);if(null!==i){for(;null!==i&&!i.canSelect();)i=i.Sa;this.Km=i,this.Km.hb||(t.Ba("ChangingSelection"),i=t.N,(Nn.ak?i.Ft:i.control)||i.shift||gr(t),this.Km.hb=!0,t.Ba("ChangedSelection"))}}},ze.prototype.doActivate=function(){var t,i=this.g;null!==i&&(null===this.Km&&this.standardMouseSelect(),null!==(t=this.Km)&&(t.canMove()||t.canCopy())&&(this.qa=!0,this.xo.set(i.position),Be(this,i.selection),this.jj.length=0,this.bc=this.computeEffectiveCollection(i.selection),i.bu=!0,Ge(this,this.bc),this.Qb("Drag"),this.ek=i.yc.ca,i.Me=!0,i.Ss&&(this.Hw=!0,this.Aq=!1,gn=(yn=this).g,this.doSimulatedDragOut())))},ze.prototype.computeEffectiveCollection=function(t){var i=null!==this.g&&this.g.Wa===this,e=new nt(Lh);if(null===t)return e;for(var n=t.i;n.next();)Ee(this,e,n.value,i);if(null!==this.ad&&this.Qi)return e;for(n=t.i;n.next();)(t=n.value)instanceof Ru&&(null===(i=t.T)||e.contains(i)?null===(i=t.Z)||e.contains(i)||e.remove(t):e.remove(t));return e},ze.prototype.doDeactivate=function(){this.qa=!1;var t=this.g;if(null!==t&&Zr(t),qe(this),Re(this,this.bc),this.bc=this.Km=null,this.Aq=this.Hw=!1,0<pn.count){for(var i=pn.length,e=0;e<i;e++){var n=pn.da(e);Ue(n),Ke(n),qe(n),null!==n.g&&Zr(n.g)}pn.clear()}Ue(this),this.xo.m(NaN,NaN),yn=gn=null,Ke(this),t.Me=!1,t.$b="",t.bu=!1,this.fk()},ze.prototype.doCancel=function(){Ke(this),Ye(this);var t=this.g;null!==t&&this.xo.G()&&(t.position=this.xo),this.stopTool()},ze.prototype.doKeyDown=function(){var t=this.g;null===t||null!==(t=t.N)&&this.qa&&("Esc"===t.key?this.doCancel():this.doMouseMove())},ze.prototype.doKeyUp=function(){var t=this.g;null!==t&&null!==t.N&&this.qa&&this.doMouseMove()},ze.prototype.moveParts=function(t,i,e){if(null!==t&&(Nn.A(t,nt,ze,"moveParts:parts"),0!==t.count)){var n=Nn.L(),o=Nn.L();o.assign(i),isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0),(i=this.Xv)||Ge(this,t);for(var r=new Dn(bn),s=new Dn(it),a=t.i;a.next();){var h,l,u,f=a.key;f.Pd()?null!==(h=function t(i,e,n){e=e.Sa;if(null!==e){if(null!==(i=t(i,e,n)))return i;if(null!==(i=n.ja(e)))return i}return null}(this,f,t))?r.add(new bn(f,a.value,h)):e&&!f.canMove()||(h=a.value.point,n.assign(h),l=Nn.L(),u=this.computeMove(f,n.add(o),t,l),f.location=u,a.value.YE=l.du(h),Nn.v(l)):a.key instanceof Ru&&s.add(a.cb)}for(e=r.i;e.next();)h=(r=e.value).info.point,n.assign(h),r.Jc.location=n.add(r.aH.YE);for(e=Nn.L(),h=Nn.L(),s=s.i;s.next();)(r=(a=s.value).key)instanceof Ru&&(r.Kp?(f=r.T,l=r.Z,null!==this.ad&&this.Qi?(a=a.value.point,t.add(r,Oe(o)),f=o.x-a.x,a=o.y-a.y,r.wl(f,a)):(null!==f&&(e.assign(f.location),null!==(u=t.ja(f))&&e.du(u.point)),null!==l&&(h.assign(l.location),null!==(u=t.ja(l))&&h.du(u.point)),null!==f&&null!==l?e.Fc(h)?(a=a.value.point,(f=n).assign(e),f.du(a),t.add(r,Oe(e)),r.wl(f.x,f.y)):(r.Kp=!1,r.ic()):(a=a.value.point,l=null!==f?e:null!==l?h:o,t.add(r,Oe(l)),f=l.x-a.x,a=l.y-a.y,r.wl(f,a)))):null!==r.T&&null!==r.Z||(a=a.value.point,t.add(r,Oe(o)),f=o.x-a.x,a=o.y-a.y,r.wl(f,a)));Nn.v(n),Nn.v(o),Nn.v(e),Nn.v(h),i||Re(this,t)}},ze.prototype.computeMove=function(t,i,e,n){if(void 0===n&&(n=new Se),n.assign(i),null===t)return n;void 0===e&&(e=null);var o,r,s,a,h,l,u,f=i;return!this.Iw||!this.pH&&null!==e&&!this.g.N.up||((e=f=Nn.L()).assign(i),null===t)||null!==(r=this.g)&&(o=r.mt,r=(s=this.VD).width,s=s.height,a=(h=this.$G).x,h=h.y,l=this.ZG,null!==o&&(u=o.Ew,isNaN(r)&&(r=u.width),isNaN(s)&&(s=u.height),o=o.UD,isNaN(a)&&(a=o.x),isNaN(h)&&(h=o.y)),(o=Nn.Mb(0,0)).$t(0,0,r,s,l),Di(i.x,i.y,a+o.x,h+o.y,r,s,e),Nn.v(o)),e=null!==t.FD?t.FD(t,i,f):f,r=(s=t.RH).x,isNaN(r)&&(r=t.location.x),s=s.y,isNaN(s)&&(s=t.location.y),a=(o=t.MH).x,isNaN(a)&&(a=t.location.x),o=o.y,isNaN(o)&&(o=t.location.y),n.m(Math.max(r,Math.min(e.x,a)),Math.max(s,Math.min(e.y,o))),f!==i&&Nn.v(f),n},ze.prototype.doDragOver=function(){},ze.prototype.doDropOnto=function(){},ze.prototype.doMouseMove=function(){var t,i,e;!this.qa||null!==(t=this.g)&&null!==this.Km&&null!==this.bc&&(e=i=!1,this.mayCopy()?(i=!0,He(this,!(t.$b="copy")),Ge(this,this.hc),Je(this,this.hc,!1),Re(this,this.hc)):this.mayMove()?(e=!0,t.$b="default",Ke(this),Je(this,this.bc,!0)):this.mayDragOut()?(He(this,!(t.$b="no-drop")),Je(this,this.hc,!1)):Ke(this),Xe(this,t.N.ca,e,i))},ze.prototype.doMouseUp=function(){if(this.qa){var t=this.g;if(null!==t){var i=!1,e=this.mayCopy();if(e&&null!==this.hc?(Ke(this),He(this,!0),Ge(this,this.hc),Je(this,this.hc,!1),Re(this,this.hc),null!==this.hc&&t.TE(this.hc.cj())):(i=!0,Ke(this),this.mayMove()&&(Je(this,this.bc,!0),Xe(this,t.N.ca,!0,!1))),this.Aq=!0,tn(this,t.N.ca),this.qa){if(this.hc=null,i&&null!==this.bc)for(i=this.bc.i;i.next();){var n=i.key;n instanceof Lu&&(null===(n=n.Sa)||null===n.placeholder||this.bc.contains(n)||n.tD&&n.P())}t.qc(),Re(this,this.bc),this.Bf=e?"Copy":"Move",t.Ba(e?"SelectionCopied":"SelectionMoved",t.selection)}this.stopTool()}}},ze.prototype.mayCopy=function(){if(!this.dE)return!1;var t=this.g;if(null===t||t.ab||t.vf||!t.Ko||!t.Uj||(Nn.ak?!t.N.alt:!t.N.control))return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.Pd()&&i.canCopy())return!0}return!(null===this.ad||!this.Qi||!this.ad.canCopy())},ze.prototype.mayDragOut=function(){if(!this.dE)return!1;var t=this.g;if(null===t||!t.Ss||!t.Uj||t.$k)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.Pd()&&i.canCopy())return!0}return!(null===this.ad||!this.Qi||!this.ad.canCopy())},ze.prototype.mayMove=function(){var t=this.g;if(null===t||t.ab||!t.$k)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.Pd()&&i.canMove())return!0}return!(null===this.ad||!this.Qi||!this.ad.canMove())};var en,nn,on,rn,sn,an,hn,ln,un,fn,cn,dn,pn=new Dn(ze),yn=null,gn=null;function vn(t,i,e){if(null===t.hc){var n=t.g;if(null!==n&&!n.ab&&!n.vf){n.tb=!e,n.Rp=!e,t.ek=n.N.ca,n=n.Ro(i,n,!0),Ve(i,e=Nn.ag());var o=e.x+e.width/2,r=e.y+e.height/2;Nn.Vb(e);var s=t.Uv;e=new nt(Lh);var a=Nn.L();for(i=i.i;i.next();){var h,l=i.value;l.Pd()&&l.canCopy()&&(h=l.location,l=n.ja(l),a.m(s.x-(o-h.x),s.y-(r-h.y)),l.location=a,l.sf(),e.add(l,Oe(a)))}for(Nn.v(a),n=n.i;n.next();)(o=n.value)instanceof Ru&&o.canCopy()&&e.add(o,Oe());t.hc=e,Be(t,e.cj()),null!==t.ad&&(n=(e=t.ad).bn,e.wl(t.ek.x-(n.x+n.width/2),t.ek.y-(n.y+n.height/2)))}}}function mn(t){this.point=t,this.YE=Ht}function bn(t,i,e){this.Jc=t,this.info=i,this.aH=e}function xn(){0<arguments.length&&Nn.dd(xn),Ae.call(this),this.uC=100,this.XB=!1;var t=new Ru,i=new ja;i.Rf=!0,i.stroke="blue",t.add(i),(i=new ja).Lp="Standard",i.fill="blue",i.stroke="blue",t.add(i),t.Tf="Tool",this.NC=t,t=new Lu,(i=new ja).Sd="",i.Ab="Rectangle",i.fill=null,i.stroke="magenta",i.lb=2,i.xa=Qt,t.add(i),t.zl=!1,t.Tf="Tool",this.LC=t,this.MC=i,t=new Lu,(i=new ja).Sd="",i.Ab="Rectangle",i.fill=null,i.stroke="magenta",i.lb=2,i.xa=Qt,t.add(i),t.zl=!1,t.Tf="Tool",this.OC=t,this.PC=i,this.rC=this.qC=this.mC=this.lC=this.nC=null,this.TB=!0,this.TF=new nt(ks,"boolean"),this.vC=this.Lk=this.HC=null}function wn(t,i,e,n,o){if(i===e)return 1;if(null!==i&&null!==e)for(var r=i.te;r.next();){var s=r.value;if(s!==n&&(!o||s.Hc)&&s.Z===i&&((s=s.T)!==i&&wn(t,s,e,n,o)))return 1}}function kn(){0<arguments.length&&Nn.dd(kn),xn.call(this),this.name="Linking",this.TA={},this.SA=null,this.aa=en,this.EC=null}function Mn(){0<arguments.length&&Nn.dd(Mn),xn.call(this),this.name="Relinking";var t=new ja;t.Ab="Diamond",t.xa=_t,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.ve=0,this.FB=t,(t=new ja).Ab="Diamond",t.xa=_t,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.ve=-1,this.QC=t,this.Sb=null,this.oC=new Ln}function Pn(t,i,e,n,o){null!==i?(t.copyPortProperties(i,e,t.Cd,t.fn,!1),t.g.add(t.Cd)):t.g.remove(t.Cd),null!==n?(t.copyPortProperties(n,o,t.Dd,t.gn,!0),t.g.add(t.Dd)):t.g.remove(t.Dd)}function Tn(){0<arguments.length&&Nn.dd(Tn),Ae.call(this),this.name="LinkReshaping";var t=new ja;t.Ab="Rectangle",t.xa=$t,t.fill="lightblue",t.stroke="dodgerblue",this.Ak=t,(t=new ja).Ab="Diamond",t.xa=$t,t.fill="lightblue",t.stroke="dodgerblue",this.cC=t,this.wC=3,this.Hx=this.Sb=null,this.pC=new Se,this.Av=null}function Sn(t,i,e,n,o,r){return r?Math.abs(i.y-e.y)<t.mh&&Math.abs(e.y-n.y)<t.mh&&Math.abs(n.y-o.y)<t.mh:Math.abs(i.x-e.x)<t.mh&&Math.abs(e.x-n.x)<t.mh&&Math.abs(n.x-o.x)<t.mh}function Cn(){0<arguments.length&&Nn.dd(Cn),Ae.call(this),this.name="Resizing",this.Bj=new st(1,1).freeze(),this.zj=new st(9999,9999).freeze(),this.hj=new st(NaN,NaN).freeze(),this.Rq=!1,this.Db=null;var t=new ja;t.Tj=jn,t.Ab="Rectangle",t.xa=$t,t.fill="lightblue",t.stroke="dodgerblue",t.lb=1,t.cursor="pointer",this.Ak=t,this.Sb=null,this.zv=new st,this.Ey=new Se,this.gy=new st(0,0),this.ey=new st(1/0,1/0),this.by=new st(1,1),this.iC=!0}function zn(){0<arguments.length&&Nn.dd(zn),Ae.call(this),this.name="Rotating",this.CC=45,this.BC=2,this.Db=null;var t=new ja;t.Ab="Ellipse",t.xa=_t,t.fill="lightblue",t.stroke="dodgerblue",t.lb=1,t.cursor="pointer",this.Ak=t,this.Sb=null,this.yv=0,this.yC=new Se}function Bn(){0<arguments.length&&Nn.dd(Bn),Ae.call(this),this.name="ClickSelecting"}function On(){0<arguments.length&&Nn.dd(On),Ae.call(this),this.name="Action",this.mn=null}function En(){0<arguments.length&&Nn.dd(En),Ae.call(this),this.name="ClickCreating",this.Ll=null,this.RB=!0,this.EB=new Se(0,0)}function qn(t,i,e){this.text=t,this.rD=i,this.visible=e}function In(){0<arguments.length&&Nn.dd(In),Ae.call(this),this.name="ContextMenu",this.jB=this.Px=this.gB=null,this.gC=new Se,this.Rx=this.Hn=null,function(t){{var i,e,n;t.Hn=new Du,!(t.RC=function(){t.stopTool()})===Nn.zD&&(i=Nn.createElement("div"),e=Nn.createElement("div"),i.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",e.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);",n=Nn.createElement("style"),h.document.getElementsByTagName("head")[0].appendChild(n),n.sheet.insertRule(".defaultCXul { list-style: none; }",0),n.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),n.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),i.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),i.addEventListener("selectstart",function(t){return t.preventDefault(),!1},!1),e.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),h.document.body&&(h.document.body.appendChild(i),h.document.body.appendChild(e)),Nn.Xs=i,Nn.Ws=e,Nn.zD=!0)}}(this)}function Gn(t){var i,e=t.g;null!==e&&(t.qa?null!==t.pf&&(null!==(i=e.qe(e.N.ca,null,null))&&i.tl(t.pf)&&t.standardMouseClick(null,null),t.stopTool(),t.canStart()&&(e.Wa=t).doMouseUp()):t.canStart()&&(Rn(t,!0),t.qa||t.stopTool()))}function Rn(t,i,e){void 0===e&&(e=null),i&&t.standardMouseSelect(),t.standardMouseClick()||(t.qa=!0,null===e&&(e=t.findObjectWithContextMenu()),null!==e?null!==(i=e.contextMenu)?(t.lz=e instanceof ks?e:null,t.showContextMenu(i,t.lz)):t.showDefaultContextMenu():t.showDefaultContextMenu())}function Vn(){0<arguments.length&&Nn.dd(Vn),Ae.call(this),this.name="DragSelecting",this.In=175,this.WB=!1;var t=new Lh;t.Tf="Tool",t.zl=!1;var i=new ja;i.name="SHAPE",i.Ab="Rectangle",i.fill=null,i.stroke="magenta",t.add(i),this.Nl=t}function Hn(){0<arguments.length&&Nn.dd(Hn),Ae.call(this),this.name="Panning",this.Fy=new Se,this.gj=!1;var t=this;this.FC=function(){h.document.removeEventListener("scroll",t.FC,!1),t.stopTool()}}function Kn(){0<arguments.length&&Nn.dd(Kn),Ae.call(this),this.name="TextEditing",this.mB=this.Py=this.JC=null,this.yo=dn,this.Tk=null,this.eb=Zn,this.Qk=null,this.dC=1,this.zC=!0;var t=Nn.createElement("textarea");t.QB=!0,(this.tB=t).addEventListener("input",function(){var t,i,e=this.textEditingTool;null!=e&&null!==e.ze&&((t=e.JC).text=this.value,i=this.II,Ns(t,e.ze.kv,1/0),this.style.width=20+t.Ca.width*i+"px",this.style.height=10+t.Ca.height*i+"px",this.rows=t.DH)},!1),t.addEventListener("keydown",function(t){var i=t.which,e=this.textEditingTool;null!=e&&null!==e.ze&&(13===i?(!1===e.ze.Kw&&t.preventDefault(),e.acceptText(cn)):9===i?(e.acceptText(fn),t.preventDefault()):27===i&&(e.doCancel(),null!==e.g&&e.g.focus()))},!1),t.addEventListener("focus",function(t){var i=this.textEditingTool;null!=i&&i.doFocus(t)},!1),t.addEventListener("blur",function(t){var i=this.textEditingTool;null!=i&&i.doBlur(t)},!1)}ze.prototype.mayDragIn=function(){var t=this.g;if(null===t||!t.fD||t.ab||t.vf||!t.Ko)return!1;return null!==yn&&yn.g.ba.el===t.ba.el},ze.prototype.doSimulatedDragEnter=function(){var t;this.mayDragIn()&&((t=this.g).Na.Zh(),tr(t),null!==(t=yn)&&(t.g.$b="copy"))},ze.prototype.doSimulatedDragLeave=function(){null!==yn&&yn.doSimulatedDragOut(),this.doCancel()},ze.prototype.doSimulatedDragOver=function(){var t,i=this.g;null===i||null!==(t=yn)&&null!==t.bc&&this.mayDragIn()&&(i.$b="copy",vn(this,t.bc.cj(),!1),Je(this,this.hc,!1),Xe(this,i.N.ca,!1,!0))},ze.prototype.doSimulatedDrop=function(){var t,i,e=this.g;null===e||null!==(t=yn)&&(i=t.g,t.Aq=!0,Ke(this),this.mayDragIn()&&(this.Qb("Drop"),vn(this,t.bc.cj(),!0),Je(this,this.hc,!1),null!==this.hc&&e.TE(this.hc.cj()),tn(this,e.N.ca),e.qc(),t=e.selection,null!==this.hc?this.Bf="ExternalCopy":t=new Q(Lh),this.hc=null,e.focus(),e.Ba("ExternalObjectsDropped",t,i),this.fk()))},ze.prototype.doSimulatedDragOut=function(){var t=this.g;null!==t&&(this.mayCopy()||this.mayMove()?t.$b="":t.$b="no-drop")},Nn.ea("DraggingInfo",mn),Nn.Ja(xn,Ae),Nn.ea("LinkingBaseTool",xn),xn.prototype.doStop=function(){var t=this.g;null!==t&&Zr(t),this.Fg=this.Eg=this.Dg=this.Cg=this.kc=null,this.ux.clear(),this.$f=null},Nn.defineProperty(xn,{zE:"portGravity"},function(){return this.uC},function(t){Nn.j(t,"number",xn,"portGravity"),0<=t&&(this.uC=t)}),Nn.defineProperty(xn,{hp:"isUnconnectedLinkValid"},function(){return this.XB},function(t){Nn.j(t,"boolean",xn,"isUnconnectedLinkValid"),this.XB=t}),Nn.defineProperty(xn,{Jg:"temporaryLink"},function(){return this.NC},function(t){Nn.A(t,Ru,xn,"temporaryLink"),this.NC=t}),Nn.defineProperty(xn,{Cd:"temporaryFromNode"},function(){return this.LC},function(t){Nn.A(t,Lu,xn,"temporaryFromNode"),this.LC=t}),Nn.defineProperty(xn,{fn:"temporaryFromPort"},function(){return this.MC},function(t){Nn.A(t,ks,xn,"temporaryFromPort"),this.MC=t}),Nn.defineProperty(xn,{Dd:"temporaryToNode"},function(){return this.OC},function(t){Nn.A(t,Lu,xn,"temporaryToNode"),this.OC=t}),Nn.defineProperty(xn,{gn:"temporaryToPort"},function(){return this.PC},function(t){Nn.A(t,ks,xn,"temporaryToPort"),this.PC=t}),Nn.defineProperty(xn,{kc:"originalLink"},function(){return this.nC},function(t){null!==t&&Nn.A(t,Ru,xn,"originalLink"),this.nC=t}),Nn.defineProperty(xn,{Cg:"originalFromNode"},function(){return this.lC},function(t){null!==t&&Nn.A(t,Lu,xn,"originalFromNode"),this.lC=t}),Nn.defineProperty(xn,{Dg:"originalFromPort"},function(){return this.mC},function(t){null!==t&&Nn.A(t,ks,xn,"originalFromPort"),this.mC=t}),Nn.defineProperty(xn,{Eg:"originalToNode"},function(){return this.qC},function(t){null!==t&&Nn.A(t,Lu,xn,"originalToNode"),this.qC=t}),Nn.defineProperty(xn,{Fg:"originalToPort"},function(){return this.rC},function(t){null!==t&&Nn.A(t,ks,xn,"originalToPort"),this.rC=t}),Nn.defineProperty(xn,{Bd:"isForwards"},function(){return this.TB},function(t){Nn.j(t,"boolean",xn,"isForwards"),this.TB=t}),Nn.u(xn,{ux:"validPortsCache"},function(){return this.TF}),Nn.defineProperty(xn,{$f:"targetPort"},function(){return this.HC},function(t){null!==t&&Nn.A(t,ks,xn,"targetPort"),this.HC=t}),xn.prototype.copyPortProperties=function(t,i,e,n,o){var r;null!==t&&null!==i&&null!==e&&null!==n&&(n.xa=i.U.size,o?(n.yb=i.yb,n.Fl=i.Fl):(n.xb=i.xb,n.ll=i.ll),e.df=jn,r=Nn.L(),e.location=i.Xa(jn,r),Nn.v(r),n.angle=i.nl(),null!==this.Yw&&this.Yw(t,i,e,n,o))},xn.prototype.setNoTargetPortProperties=function(t,i,e){null!==i&&(i.xa=Qt,i.xb=Te,i.yb=Te),null!==t&&(t.location=this.g.N.ca),null!==this.Yw&&this.Yw(null,null,t,i,e)},xn.prototype.doMouseDown=function(){this.qa&&this.doMouseMove()},xn.prototype.doMouseMove=function(){if(this.qa){var t=this.g;if(null!==t){if(this.$f=this.findTargetPort(this.Bd),null!==this.$f){var i=this.$f.Y;if(i instanceof Lu)return void(this.Bd?this.copyPortProperties(i,this.$f,this.Dd,this.gn,!0):this.copyPortProperties(i,this.$f,this.Cd,this.fn,!1))}this.Bd?this.setNoTargetPortProperties(this.Dd,this.gn,!0):this.setNoTargetPortProperties(this.Cd,this.fn,!1),(t.ne||t.oe)&&Xr(t,t.N.hf)}}},xn.prototype.findValidLinkablePort=function(t,i){if(null===t)return null;var e=t.Y;if(!(e instanceof Lu))return null;for(;null!==t;){var n=i?t.eF:t.PD;if(!0===n&&(null!==t.Sd||t instanceof Lu)&&(i?this.isValidTo(e,t):this.isValidFrom(e,t)))return t;if(!1===n)break;t=t.S}return null},xn.prototype.findTargetPort=function(i){var t=(r=this.g).N.ca;(o=this.zE)<=0&&(o=.1);for(var e=this,n=r.Mm(t,o,function(t){return e.findValidLinkablePort(t,i)},null,!0),o=1/0,r=null,n=n.i;n.next();){var s,a,h,l=n.value,u=l.Y;u instanceof Lu&&(s=l.Xa(jn,Nn.L()),a=t.x-s.x,h=t.y-s.y,Nn.v(s),(s=a*a+h*h)<o&&(null!==(a=this.ux.ja(l))?a&&(r=l,o=s):i&&this.isValidLink(this.Cg,this.Dg,u,l)||!i&&this.isValidLink(u,l,this.Eg,this.Fg)?(this.ux.add(l,!0),r=l,o=s):this.ux.add(l,!1)))}return null!==r&&((t=r.Y)instanceof Lu&&(null===t.layer||t.layer.Ts))?r:null},xn.prototype.isValidFrom=function(t,i){if(null===t||null===i)return this.hp;if(this.g.Wa===this&&(null!==t.layer&&!t.layer.Ts||!0!==i.PD))return!1;var e=i.vz;if(e<1/0){if(null!==this.kc&&t===this.Cg&&i===this.Dg)return!0;var n=i.Sd;if(null===n&&(n=""),t.Aw(n).count>=e)return!1}return!0},xn.prototype.isValidTo=function(t,i){if(null===t||null===i)return this.hp;if(this.g.Wa===this&&(null!==t.layer&&!t.layer.Ts||!0!==i.eF))return!1;var e=i.MI;if(e<1/0){if(null!==this.kc&&t===this.Eg&&i===this.Fg)return!0;var n=i.Sd;if(null===n&&(n=""),t.vg(n).count>=e)return!1}return!0},xn.prototype.isInSameNode=function(t,i){if(null===t||null===i)return!1;if(t===i)return!0;var e=t.Y,n=i.Y;return null!==e&&e===n},xn.prototype.isLinked=function(t,i){if(null===t||null===i)return!1;var e=t.Y;if(!(e instanceof Lu))return!1;var n=t.Sd;null===n&&(n="");var o=i.Y;if(!(o instanceof Lu))return!1;var r=i.Sd;for(null===r&&(r=""),o=o.vg(r);o.next();)if((r=o.value).T===e&&r.wg===n)return!0;return!1},xn.prototype.isValidLink=function(t,i,e,n){if(!this.isValidFrom(t,i)||!this.isValidTo(e,n)||!(null===i||null===n||(i.TG&&n.LI||!this.isInSameNode(i,n))&&(i.SG&&n.KI||!this.isLinked(i,n)))||null!==this.kc&&(null!==t&&this.isLabelDependentOnLink(t,this.kc)||null!==e&&this.isLabelDependentOnLink(e,this.kc))||null!==t&&null!==e&&(null===t.data&&null!==e.data||null!==t.data&&null===e.data)||!this.isValidCycle(t,e,this.kc))return!1;if(null!==t){var o=t.Pw;if(null!==o&&!o(t,i,e,n,this.kc))return!1}return!(null!==e&&null!==(o=e.Pw)&&!o(t,i,e,n,this.kc))&&(null===(o=this.Pw)||o(t,i,e,n,this.kc))},xn.prototype.isLabelDependentOnLink=function(t,i){if(null===t)return!1;var e=t.ee;if(null===e)return!1;if(e===i)return!0;var n=new Q(Lu);return n.add(t),function t(i,e,n,o){if(e===n)return!0;var r=e.T;if(null!==r&&r.uf&&(o.add(r),t(i,r.ee,n,o)))return!0;e=e.Z;return!(null===e||!e.uf||(o.add(e),!t(i,e.ee,n,o)))}(this,e,i,n)},xn.prototype.isValidCycle=function(t,i,e){if(void 0===e&&(e=null),null===t||null===i)return this.hp;var n=this.g.TI;if(n!==yo){if(n===bo){if(null!==e&&!e.Hc)return!0;for(n=i.te;n.next();){var o=n.value;if(o!==e&&o.Hc&&o.Z===i)return!1}return!wn(this,t,i,e,!0)}if(n===xo){if(null!==e&&!e.Hc)return!0;for(n=t.te;n.next();)if((o=n.value)!==e&&o.Hc&&o.T===t)return!1;return!wn(this,t,i,e,!0)}if(n===go)return!(t=t===i||((n=new Q(Lu)).add(i),function t(i,e,n,o,r){if(n===o)return!0;if(null===n||null===o||e.contains(n))return!1;e.add(n);for(var s=n.te;s.next();){var a=s.value;if(a!==r&&a.Z===n&&((a=a.T)!==n&&t(i,e,a,o,r)))return!0}return!1}(this,n,t,i,e)));if(n===vo)return!wn(this,t,i,e,!1);if(n===mo)return!(t=t===i||((n=new Q(Lu)).add(i),function t(i,e,n,o,r){if(n===o)return!0;if(null===n||null===o||e.contains(n))return!1;e.add(n);for(var s=n.te;s.next();){var a=s.value;if(a!==r){var h=a.T,a=a.Z,h=h===n?a:h;if(h!==n&&t(i,e,h,o,r))return!0}}return!1}(this,n,t,i,e)))}return!0},Nn.defineProperty(xn,{Pw:"linkValidation"},function(){return this.Lk},function(t){null!==t&&Nn.j(t,"function",xn,"linkValidation"),this.Lk=t}),Nn.defineProperty(xn,{Yw:"portTargeted"},function(){return this.vC},function(t){null!==t&&Nn.j(t,"function",xn,"portTargeted"),this.vC=t}),Nn.Ja(kn,xn),Nn.ea("LinkingTool",kn),kn.Either=en=Nn.p(kn,"Either",0),kn.ForwardsOnly=nn=Nn.p(kn,"ForwardsOnly",0),kn.BackwardsOnly=on=Nn.p(kn,"BackwardsOnly",0),Nn.defineProperty(kn,{fG:"archetypeLinkData"},function(){return this.TA},function(t){null!==t&&Nn.A(t,Object,kn,"archetypeLinkData"),t instanceof ks&&Nn.A(t,Ru,kn,"archetypeLinkData"),this.TA=t}),Nn.defineProperty(kn,{iD:"archetypeLabelNodeData"},function(){return this.SA},function(t){null!==t&&Nn.A(t,Object,kn,"archetypeLabelNodeData"),t instanceof ks&&Nn.A(t,Lu,kn,"archetypeLabelNodeData"),this.SA=t}),Nn.defineProperty(kn,{direction:"direction"},function(){return this.aa},function(t){Nn.pb(t,kn,kn,"direction"),this.aa=t}),Nn.defineProperty(kn,{bF:"startObject"},function(){return this.EC},function(t){null!==t&&Nn.A(t,ks,kn,"startObject"),this.EC=t}),kn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.ab||t.vf||!t.Ts)return!1;var i=t.ba;return!(!(i instanceof pe||i instanceof me)||!t.N.left||t.Wa!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},kn.prototype.findLinkablePort=function(){var t=this.g;if(null===t)return null;var i=this.bF;if(null===i&&(i=t.qe(t.yc.ca,null,null)),null===i||!(i.Y instanceof Lu))return null;if((t=this.direction)===en||t===nn){var e=this.findValidLinkablePort(i,!1);if(null!==e)return this.Bd=!0,e}return t!==en&&t!==on||null===(e=this.findValidLinkablePort(i,!0))?null:(this.Bd=!1,e)},kn.prototype.doActivate=function(){var t,i=this.g;null===i||null!==(t=this.findLinkablePort())&&(this.Qb(this.name),i.Me=!0,i.$b="pointer",this.Bd?(null===this.Dd||this.Dd.location.G()||(this.Dd.location=i.N.ca),this.Dg=t,(t=this.Dg.Y)instanceof Lu&&(this.Cg=t),this.copyPortProperties(this.Cg,this.Dg,this.Cd,this.fn,!1)):(null===this.Cd||this.Cd.location.G()||(this.Cd.location=i.N.ca),this.Fg=t,(t=this.Fg.Y)instanceof Lu&&(this.Eg=t),this.copyPortProperties(this.Eg,this.Fg,this.Dd,this.gn,!0)),i.add(this.Cd),i.add(this.Dd),null!==this.Jg&&(null!==this.Cd&&(this.Jg.T=this.Cd),null!==this.Dd&&(this.Jg.Z=this.Dd),this.Jg.ic(),i.add(this.Jg)),this.qa=!0)},kn.prototype.doDeactivate=function(){this.qa=!1;var t=this.g;null!==t&&(t.remove(this.Jg),t.remove(this.Cd),t.remove(this.Dd),t.Me=!1,t.$b="",this.fk())},kn.prototype.doStop=function(){xn.prototype.doStop.call(this),this.bF=null},kn.prototype.doMouseUp=function(){if(this.qa){var t=this.g;if(null===t)return;var i,e=this.Bf=null,n=null,o=null,r=null,s=this.$f=this.findTargetPort(this.Bd);null!==s?(i=s.Y)instanceof Lu&&(this.Bd?(null!==this.Cg&&(e=this.Cg,n=this.Dg),o=i,r=s):(e=i,n=s,null!==this.Eg&&(o=this.Eg,r=this.Fg))):this.Bd?null!==this.Cg&&this.hp&&(e=this.Cg,n=this.Dg):null!==this.Eg&&this.hp&&(o=this.Eg,r=this.Fg),null!==e||null!==o?null!==(i=this.insertLink(e,n,o,r))?(null===s&&(this.Bd?i.Gn=t.N.ca.copy():i.Cn=t.N.ca.copy()),t.nf&&t.select(i),this.Bf=this.name,t.Ba("LinkDrawn",i)):(t.ba.oD(),this.doNoLink(e,n,o,r)):this.Bd?this.doNoLink(this.Cg,this.Dg,null,null):this.doNoLink(null,null,this.Eg,this.Fg)}this.stopTool()},kn.prototype.insertLink=function(t,i,e,n){var o=this.g;if(null===o)return null;var r=o.ba;if(r instanceof me){var s=t;if(i=e,o.Qd||(s=e,i=t),null!==s&&null!==i)return r.oh(i.data,r.gb(s.data)),i.Yo()}else if(r instanceof pe)if(s="",null!==t&&(null===i&&(i=t),null===(s=i.Sd)&&(s="")),i="",null!==e&&(null===n&&(n=e),null===(i=n.Sd)&&(i="")),(n=this.fG)instanceof Ru){if(ma(n),null!==(r=n.copy()))return r.T=t,r.wg=s,r.Z=e,r.qh=i,o.add(r),(t=this.iD)instanceof Lu&&(ma(t),null!==(t=t.copy())&&(t.ee=r,o.add(t))),r}else if(null!==n&&(n=r.rw(n),Nn.Ta(n)))return null!==t&&r.kx(n,r.gb(t.data)),r.nA(n,s),null!==e&&r.ox(n,r.gb(e.data)),r.qA(n,i),r.Os(n),null===(t=this.iD)||t instanceof Lu||(t=r.copyNodeData(t),Nn.Ta(t)&&(r.Xk(t),void 0!==(t=r.gb(t))&&r.Xy(n,t))),o.Pf(n);return null},kn.prototype.doNoLink=function(){},Nn.Ja(Mn,xn),Nn.ea("RelinkingTool",Mn),Mn.prototype.updateAdornments=function(t){var i,e,n;null!==t&&t instanceof Ru&&(i="RelinkFrom",e=null,!t.hb||this.g.ab||null!==(n=t.Wt)&&t.canRelinkFrom()&&t.U.G()&&t.isVisible()&&n.U.G()&&n.Xi()&&(null===(e=t.Vo(i))&&(null!==(e=this.makeAdornment(n,!1))&&(e.gc=i),t.Wk(i,e))),null===e&&t.$i(i),i="RelinkTo",e=null,!t.hb||this.g.ab||null!==(n=t.Wt)&&t.canRelinkTo()&&t.U.G()&&t.isVisible()&&n.U.G()&&n.Xi()&&(null===(e=t.Vo(i))&&(null!==(e=this.makeAdornment(n,!0))&&(e.gc=i),t.Wk(i,e))),null===e&&t.$i(i))},Mn.prototype.makeAdornment=function(t,i){var e=new Du;e.type=ea;var n=i?this.JI:this.RG;return null!==n&&e.add(n.copy()),e.Zb=t,e},Nn.defineProperty(Mn,{RG:"fromHandleArchetype"},function(){return this.FB},function(t){null!==t&&Nn.A(t,ks,Mn,"fromHandleArchetype"),this.FB=t}),Nn.defineProperty(Mn,{JI:"toHandleArchetype"},function(){return this.QC},function(t){null!==t&&Nn.A(t,ks,Mn,"toHandleArchetype"),this.QC=t}),Nn.u(Mn,{handle:"handle"},function(){return this.Sb}),Mn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.ab||t.vf||!t.Am)return!1;var i=t.ba;return!(!(i instanceof pe||i instanceof me)||!t.N.left)&&(null===(i=this.findToolHandleAt(t.yc.ca,"RelinkFrom"))&&(i=this.findToolHandleAt(t.yc.ca,"RelinkTo")),null!==i)},Mn.prototype.doActivate=function(){var t=this.g;if(null!==t){if(null===this.kc){var i=this.findToolHandleAt(t.yc.ca,"RelinkFrom");if(null===i&&(i=this.findToolHandleAt(t.yc.ca,"RelinkTo")),null===i)return;var e=i.Y;if(!(e instanceof Du&&e.Mf instanceof Ru))return;this.Sb=i,this.Bd=null===e||"RelinkTo"===e.gc,this.kc=e.Mf}this.Qb(this.name),t.Me=!0,t.$b="pointer",this.Dg=this.kc.bd,this.Cg=this.kc.T,this.Fg=this.kc.Fd,this.Eg=this.kc.Z,this.oC.set(this.kc.U),null!==this.kc&&0<this.kc.oa&&(null===this.kc.T&&(null!==this.fn&&(this.fn.xa=Zt),null!==this.Cd&&(this.Cd.location=this.kc.l(0))),null===this.kc.Z&&(null!==this.gn&&(this.gn.xa=Zt),null!==this.Dd&&(this.Dd.location=this.kc.l(this.kc.oa-1)))),this.copyPortProperties(this.Cg,this.Dg,this.Cd,this.fn,!1),this.copyPortProperties(this.Eg,this.Fg,this.Dd,this.gn,!0),t.add(this.Cd),t.add(this.Dd),null!==this.Jg&&(null!==this.Cd&&(this.Jg.T=this.Cd),null!==this.Dd&&(this.Jg.Z=this.Dd),this.copyLinkProperties(this.kc,this.Jg),this.Jg.ic(),t.add(this.Jg)),this.qa=!0}},Mn.prototype.copyLinkProperties=function(t,i){var e;null!==t&&null!==i&&(i.Qs=t.Qs,i.iz=t.iz,(e=t.Ie)!==Qh&&e!==Zh||(e=Wh),i.Ie=e,i.sw=t.sw,i.hx=t.hx,i.Ip=t.Ip,i.xb=t.xb,i.ll=t.ll,i.kt=t.kt,i.lt=t.lt,i.yb=t.yb,i.Fl=t.Fl,i.eu=t.eu,i.fu=t.fu)},Mn.prototype.doDeactivate=function(){this.qa=!1;var t=this.g;null!==t&&(t.remove(this.Jg),t.remove(this.Cd),t.remove(this.Dd),t.Me=!1,t.$b="",this.fk())},Mn.prototype.doStop=function(){xn.prototype.doStop.call(this),this.Sb=null},Mn.prototype.doMouseUp=function(){if(this.qa){var t=this.g;if(null===t)return;this.Bf=null;var i,e=this.Cg,n=this.Dg,o=this.Eg,r=this.Fg,s=this.kc;this.$f=this.findTargetPort(this.Bd),null!==this.$f?(i=this.$f.Y)instanceof Lu&&(this.Bd?(o=i,r=this.$f):(e=i,n=this.$f)):this.hp?this.Bd?r=o=null:n=e=null:s=null,null!==s?(this.reconnectLink(s,this.Bd?o:e,this.Bd?r:n,this.Bd),null===this.$f&&(this.Bd?s.Gn=t.N.ca.copy():s.Cn=t.N.ca.copy(),s.ic()),t.nf&&(s.hb=!0),this.Bf=this.name,t.Ba("LinkRelinked",s,this.Bd?this.Fg:this.Dg)):this.doNoRelink(this.kc,this.Bd),rf(this.kc,this.oC)}this.stopTool()},Mn.prototype.reconnectLink=function(t,i,e,n){return null!==this.g&&(e=null!==e&&null!==e.Sd?e.Sd:"",n?(t.Z=i,t.qh=e):(t.T=i,t.wg=e),!0)},Mn.prototype.doNoRelink=function(){},Nn.Ja(Tn,Ae),Nn.ea("LinkReshapingTool",Tn),Tn.None=rn=Nn.p(Tn,"None",0),Tn.Horizontal=sn=Nn.p(Tn,"Horizontal",1),Tn.Vertical=an=Nn.p(Tn,"Vertical",2),Tn.All=hn=Nn.p(Tn,"All",3),Tn.prototype.getReshapingBehavior=Tn.prototype.TD=function(t){return t&&t.xC?t.xC:rn},Tn.prototype.setReshapingBehavior=Tn.prototype.Zt=function(t,i){Nn.A(t,ks,Tn,"setReshapingBehavior:obj"),Nn.pb(i,Tn,Tn,"setReshapingBehavior:behavior"),t.xC=i},Tn.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Ru){if(t.hb&&!this.g.ab){var i=t.path;if(null!==i&&t.canReshape()&&t.U.G()&&t.isVisible()&&i.U.G()&&i.Xi()){var e=t.Vo(this.name);if(null!==e&&e.IF===t.oa&&e.VF===t.Rt||null!==(e=this.makeAdornment(i))&&(e.IF=t.oa,e.VF=t.Rt,t.Wk(this.name,e)),null!==e)return void(e.location=t.position)}}t.$i(this.name)}},Tn.prototype.makeAdornment=function(t){var i=t.Y,e=i.oa,n=i.jc,o=null;if(null!==i.points&&1<e){(o=new Du).type=ea;var r,e=i.ht,s=i.Nw,a=n?1:0;if(i.Rt&&i.Ie!==Xh)for(var h=e+a;h<s-a;h++){var l=this.makeResegmentHandle(t,h);null!==l&&(l.ve=h,l.kA=.5,l.vz=999,o.add(l))}for(h=e+1;h<s;h++){null!==(l=this.makeHandle(t,h))&&((l.ve=h)!==e&&(h===e+1&&n?(a=i.l(e),r=i.l(e+1),fi(a.x,r.x)&&fi(a.y,r.y)&&(r=i.l(e-1)),fi(a.x,r.x)?(this.Zt(l,an),l.cursor="n-resize"):fi(a.y,r.y)&&(this.Zt(l,sn),l.cursor="w-resize")):h===s-1&&n?(a=i.l(s-1),r=i.l(s),fi(a.x,r.x)&&fi(a.y,r.y)&&(a=i.l(s+1)),fi(a.x,r.x)?(this.Zt(l,an),l.cursor="n-resize"):fi(a.y,r.y)&&(this.Zt(l,sn),l.cursor="w-resize")):h!==s&&(this.Zt(l,hn),l.cursor="move")),o.add(l))}o.gc=this.name,o.Zb=t}return o},Tn.prototype.makeHandle=function(){var t=this.nt;return null===t?null:t.copy()},Nn.defineProperty(Tn,{nt:"handleArchetype"},function(){return this.Ak},function(t){null!==t&&Nn.A(t,ks,Tn,"handleArchetype"),this.Ak=t}),Tn.prototype.makeResegmentHandle=function(){var t=this.QH;return null===t?null:t.copy()},Nn.defineProperty(Tn,{QH:"midHandleArchetype"},function(){return this.cC},function(t){null!==t&&Nn.A(t,ks,Tn,"midHandleArchetype"),this.cC=t}),Nn.u(Tn,{handle:"handle"},function(){return this.Sb}),Nn.u(Tn,{Rs:"adornedLink"},function(){return this.Hx}),Tn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.ab||!t.iw||!t.N.left)&&null!==this.findToolHandleAt(t.yc.ca,this.name)},Tn.prototype.doActivate=function(){var t=this.g;if(null!==t&&(this.Sb=this.findToolHandleAt(t.yc.ca,this.name),null!==this.Sb)){var i=this.Sb.Y.Mf;if(i instanceof Ru){if(this.Hx=i,t.Me=!0,this.Qb(this.name),i.Rt&&999===this.Sb.vz){var e=i.points.copy(),n=this.Sb.Xa(jn);if(e.Ad(this.Sb.ve+1,n),i.jc&&e.Ad(this.Sb.ve+1,n),i.points=e,i.Od(),this.Sb=this.findToolHandleAt(t.yc.ca,this.name),null===this.Sb)return void this.doDeactivate()}this.pC=i.l(this.Sb.ve),this.Av=i.points.copy(),this.qa=!0}}},Tn.prototype.doDeactivate=function(){this.fk(),this.Hx=this.Sb=null;var t=this.g;null!==t&&(t.Me=!1),this.qa=!1},Tn.prototype.doCancel=function(){var t=this.Rs;null!==t&&(t.points=this.Av),this.stopTool()},Tn.prototype.doMouseMove=function(){var t=this.g;this.qa&&null!==t&&(t=this.computeReshape(t.N.ca),this.reshape(t))},Tn.prototype.doMouseUp=function(){var t,i,e,n,o,r,s,a=this.g;this.qa&&null!==a&&(t=this.computeReshape(a.N.ca),this.reshape(t),null!==(t=this.Rs)&&t.Rt&&(i=this.handle.ve,e=t.l(i-1),n=t.l(i),o=t.l(i+1),t.jc?i>t.ht+1&&i<t.Nw-1&&(r=t.l(i-2),Math.abs(e.x-n.x)<this.mh&&Math.abs(e.y-n.y)<this.mh&&(Sn(this,r,e,n,o,!0)||Sn(this,r,e,n,o,!1))?(s=t.points.copy(),Sn(this,r,e,n,o,!0)?(s.Hg(i-2,new Se(r.x,(o.y+r.y)/2)),s.Hg(i+1,new Se(o.x,(o.y+r.y)/2))):(s.Hg(i-2,new Se((o.x+r.x)/2,r.y)),s.Hg(i+1,new Se((o.x+r.x)/2,o.y))),s.Vc(i),s.Vc(i-1),t.points=s,t.Od()):(r=t.l(i+2),Math.abs(n.x-o.x)<this.mh&&Math.abs(n.y-o.y)<this.mh&&(Sn(this,e,n,o,r,!0)||Sn(this,e,n,o,r,!1))&&(s=t.points.copy(),Sn(this,e,n,o,r,!0)?(s.Hg(i-1,new Se(e.x,(e.y+r.y)/2)),s.Hg(i+2,new Se(r.x,(e.y+r.y)/2))):(s.Hg(i-1,new Se((e.x+r.x)/2,e.y)),s.Hg(i+2,new Se((e.x+r.x)/2,r.y))),s.Vc(i+1),s.Vc(i),t.points=s,t.Od()))):(r=Nn.L(),wi(e.x,e.y,o.x,o.y,n.x,n.y,r)&&r.rf(n)<this.mh*this.mh&&((s=t.points.copy()).Vc(i),t.points=s,t.Od()),Nn.v(r))),a.qc(),this.Bf=this.name,a.Ba("LinkReshaped",this.Rs,this.Av)),this.stopTool()},Nn.defineProperty(Tn,{mh:"resegmentingDistance"},function(){return this.wC},function(t){Nn.j(t,"number",Tn,"resegmentingDistance"),this.wC=t}),Tn.prototype.reshape=function(t){var i=this.Rs;i.Bl();var e,n,o,r=this.handle.ve,s=this.TD(this.handle);i.jc?r===i.ht+1?(r=i.ht+1,s===an?(i.V(r,i.l(r-1).x,t.y),i.V(r+1,i.l(r+2).x,t.y)):s===sn&&(i.V(r,t.x,i.l(r-1).y),i.V(r+1,t.x,i.l(r+2).y))):r===i.Nw-1?(r=i.Nw-1,s===an?(i.V(r-1,i.l(r-2).x,t.y),i.V(r,i.l(r+1).x,t.y)):s===sn&&(i.V(r-1,t.x,i.l(r-2).y),i.V(r,t.x,i.l(r+1).y))):(s=r,e=i.l(s),n=i.l(s-1),o=i.l(s+1),fi(n.x,e.x)&&fi(e.y,o.y)?(fi(n.x,i.l(s-2).x)&&!fi(n.y,i.l(s-2).y)?(i.w(s,t.x,n.y),r++,s++):i.V(s-1,t.x,n.y),fi(o.y,i.l(s+2).y)&&!fi(o.x,i.l(s+2).x)?i.w(s+1,o.x,t.y):i.V(s+1,o.x,t.y)):fi(n.y,e.y)&&fi(e.x,o.x)?(fi(n.y,i.l(s-2).y)&&!fi(n.x,i.l(s-2).x)?(i.w(s,n.x,t.y),r++,s++):i.V(s-1,n.x,t.y),fi(o.x,i.l(s+2).x)&&!fi(o.y,i.l(s+2).y)?i.w(s+1,t.x,o.y):i.V(s+1,t.x,o.y)):fi(n.x,e.x)&&fi(e.x,o.x)?(fi(n.x,i.l(s-2).x)&&!fi(n.y,i.l(s-2).y)?(i.w(s,t.x,n.y),r++,s++):i.V(s-1,t.x,n.y),fi(o.x,i.l(s+2).x)&&!fi(o.y,i.l(s+2).y)?i.w(s+1,t.x,o.y):i.V(s+1,t.x,o.y)):fi(n.y,e.y)&&fi(e.y,o.y)&&(fi(n.y,i.l(s-2).y)&&!fi(n.x,i.l(s-2).x)?(i.w(s,n.x,t.y),r++,s++):i.V(s-1,n.x,t.y),fi(o.y,i.l(s+2).y)&&!fi(o.x,i.l(s+2).x)?i.w(s+1,o.x,t.y):i.V(s+1,o.x,t.y)),i.V(r,t.x,t.y)):(i.V(r,t.x,t.y),1===r&&i.computeSpot(!0).se()&&(e=i.T,n=i.bd,null===e||e.isVisible()||(e=e.findVisibleNode())!==i.T&&(n=e.jl("")),s=n.Xa(jn,Nn.L()),e=i.getLinkPointFromPoint(e,n,s,t,!0,Nn.L()),i.V(0,e.x,e.y),Nn.v(s),Nn.v(e)),r===i.oa-2&&i.computeSpot(!1).se()&&(r=i.Z,e=i.Fd,null===r||r.isVisible()||(r=r.findVisibleNode())!==i.Z&&(e=r.jl("")),s=e.Xa(jn,Nn.L()),e=i.getLinkPointFromPoint(r,e,s,t,!1,Nn.L()),i.V(i.oa-1,e.x,e.y),Nn.v(s),Nn.v(e))),i.Ni()},Tn.prototype.computeReshape=function(t){var i=this.Rs,e=this.handle.ve;switch(this.TD(this.handle)){case hn:return t;case an:return new Se((i=i.l(e)).x,t.y);case sn:return i=i.l(e),new Se(t.x,i.y);default:return i.l(e)}},Nn.u(Tn,{sK:"originalPoint"},function(){return this.pC}),Nn.u(Tn,{tK:"originalPoints"},function(){return this.Av}),Nn.Ja(Cn,Ae),Nn.ea("ResizingTool",Cn),Cn.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Ru)){if(t.hb&&!this.g.ab)if(null!==(n=t.KE)&&t.canResize()&&t.U.G()&&t.isVisible()&&n.U.G()&&n.Xi()){var i=t.Vo(this.name);if(null!==i&&i.Zb===n||(i=this.makeAdornment(n)),null!==i){var e=n.nl();i.angle=e;var n,o,r=n.Xa(i.df,Nn.L()),s=n.Ri();return i.location=r,Nn.v(r),null!==(r=i.placeholder)&&(n=n.Ha,(o=Nn.El()).m(n.width*s,n.height*s),r.xa=o,Nn.Zj(o)),function t(i,e,n){if(null!==e)if(e.alignment.Uc()||""===e.cursor){if(e instanceof sa)for(e=e.elements;e.next();)t(i,e.value,n)}else t:{if((i=e.alignment).se()&&(i=jn),i.x<=0)n=i.y<=0?n+225:1<=i.y?n+135:n+180;else if(1<=i.x)i.y<=0?n+=315:1<=i.y&&(n+=45);else if(i.y<=0)n+=270;else{if(!(1<=i.y))break t;n+=90}n<0?n+=360:360<=n&&(n-=360),e.cursor=n<22.5?"e-resize":n<67.5?"se-resize":n<112.5?"s-resize":n<157.5?"sw-resize":n<202.5?"w-resize":n<247.5?"nw-resize":n<292.5?"n-resize":n<337.5?"ne-resize":"e-resize"}}(this,i,e),void t.Wk(this.name,i)}}t.$i(this.name)}},Cn.prototype.makeAdornment=function(t){var i=null;if(null===(i=t.Y.JE)){(i=new Du).type=Qs,i.df=jn;var e=new Tf;e.Rf=!0,i.add(e),i.add(this.makeHandle(t,P)),i.add(this.makeHandle(t,T)),i.add(this.makeHandle(t,C)),i.add(this.makeHandle(t,S)),i.add(this.makeHandle(t,k)),i.add(this.makeHandle(t,N)),i.add(this.makeHandle(t,j)),i.add(this.makeHandle(t,M))}else if(ma(i),null===(i=i.copy()))return null;return i.gc=this.name,i.Zb=t,i},Cn.prototype.makeHandle=function(t,i){var e=this.nt;return null===e?null:((e=e.copy()).alignment=i,e)},Nn.defineProperty(Cn,{nt:"handleArchetype"},function(){return this.Ak},function(t){null!==t&&Nn.A(t,ks,Cn,"handleArchetype"),this.Ak=t}),Nn.u(Cn,{handle:"handle"},function(){return this.Sb}),Nn.defineProperty(Cn,{Zb:"adornedObject"},function(){return this.Db},function(t){null!==t&&Nn.A(t,ks,Cn,"adornedObject"),this.Db=t}),Cn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.ab||!t.Us||!t.N.left)&&null!==this.findToolHandleAt(t.yc.ca,this.name)},Cn.prototype.doActivate=function(){var t=this.g;null!==t&&(this.Sb=this.findToolHandleAt(t.yc.ca,this.name),null!==this.Sb&&(this.Db=this.Sb.Y.Zb,this.Ey.set(this.Db.Y.location),this.zv.set(this.Db.xa),this.by=this.computeCellSize(),this.gy=this.computeMinSize(),this.ey=this.computeMaxSize(),t.Me=!0,this.iC=t.Na.isEnabled,t.Na.isEnabled=!1,this.Qb(this.name),this.qa=!0))},Cn.prototype.doDeactivate=function(){var t=this.g;null!==t&&(this.fk(),this.Db=this.Sb=null,this.qa=t.Me=!1,t.Na.isEnabled=this.iC)},Cn.prototype.doCancel=function(){this.Db.xa=this.zv,this.Db.Y.location=this.Ey,this.stopTool()},Cn.prototype.doMouseMove=function(){var t,i,e,n,o,r=this.g;this.qa&&null!==r&&(t=this.gy,i=this.ey,e=this.by,n=this.Db.RD(r.N.ca,Nn.L()),o=ds,this.Db instanceof ja&&(o=Fa(this.Db)),t=this.computeResize(n,this.Sb.alignment,t,i,e,!(o===ms||o===bs||r.N.shift)),this.resize(t),r.Uf(),Nn.v(n))},Cn.prototype.doMouseUp=function(){var t,i,e,n,o,r=this.g;this.qa&&null!==r&&(t=this.gy,i=this.ey,e=this.by,n=this.Db.RD(r.N.ca,Nn.L()),o=ds,this.Db instanceof ja&&(o=Fa(this.Db)),t=this.computeResize(n,this.Sb.alignment,t,i,e,!(o===ms||o===bs||r.N.shift)),this.resize(t),Nn.v(n),r.qc(),this.Bf=this.name,r.Ba("PartResized",this.Db,this.zv)),this.stopTool()},Cn.prototype.resize=function(t){var i,e,n,o,r,s,a,h,l,u,f;null!==this.g&&(e=(i=this.Zb).Y,h=i.nl(),n=i.Ri(),r=Math.PI*h/180,o=Math.cos(r),r=Math.sin(r),s=0<h&&h<180?1:0,a=90<h&&h<270?1:0,h=180<h&&h<360?1:0,l=i.Ha.width,u=i.Ha.height,i.xa=t.size,f=e.position.copy(),e.sf(),l=i.Ha.width-l,u=i.Ha.height-u,0==l&&0==u||(0!=l&&(f.x+=n*((t.x+l*a)*o-(t.y+u*s)*r)),0!=u&&(f.y+=n*((t.x+l*h)*r+(t.y+u*a)*o)),e.move(f),e instanceof Lu&&e.bf()))},Cn.prototype.computeResize=function(t,i,e,n,o,r){i.se()&&(i=jn);var s,a=this.Zb.Ha,h=a.x,l=a.y,u=a.x+a.width,f=a.y+a.height,c=1;return r||((c=a.width)<=0&&(c=1),(s=a.height)<=0&&(s=1),c=s/c),s=Nn.L(),Di(t.x,t.y,h,l,o.width,o.height,s),t=a.copy(),i.x<=0?i.y<=0?(t.x=Math.max(s.x,u-n.width),t.x=Math.min(t.x,u-e.width),t.width=Math.max(u-t.x,e.width),t.y=Math.max(s.y,f-n.height),t.y=Math.min(t.y,f-e.height),t.height=Math.max(f-t.y,e.height),r||(c<(i=t.height/t.width)?(t.height=c*t.width,t.y=f-t.height):(t.width=t.height/c,t.x=u-t.width))):1<=i.y?(t.x=Math.max(s.x,u-n.width),t.x=Math.min(t.x,u-e.width),t.width=Math.max(u-t.x,e.width),t.height=Math.max(Math.min(s.y-l,n.height),e.height),r||(c<(i=t.height/t.width)?t.height=c*t.width:(t.width=t.height/c,t.x=u-t.width))):(t.x=Math.max(s.x,u-n.width),t.x=Math.min(t.x,u-e.width),t.width=u-t.x,r||(t.height=c*t.width,t.y=l+.5*(f-l-t.height))):1<=i.x?i.y<=0?(t.width=Math.max(Math.min(s.x-h,n.width),e.width),t.y=Math.max(s.y,f-n.height),t.y=Math.min(t.y,f-e.height),t.height=Math.max(f-t.y,e.height),r||(c<(i=t.height/t.width)?(t.height=c*t.width,t.y=f-t.height):t.width=t.height/c)):1<=i.y?(t.width=Math.max(Math.min(s.x-h,n.width),e.width),t.height=Math.max(Math.min(s.y-l,n.height),e.height),r||(c<(i=t.height/t.width)?t.height=c*t.width:t.width=t.height/c)):(t.width=Math.max(Math.min(s.x-h,n.width),e.width),r||(t.height=c*t.width,t.y=l+.5*(f-l-t.height))):i.y<=0?(t.y=Math.max(s.y,f-n.height),t.y=Math.min(t.y,f-e.height),t.height=f-t.y,r||(t.width=t.height/c,t.x=h+.5*(u-h-t.width))):1<=i.y&&(t.height=Math.max(Math.min(s.y-l,n.height),e.height),r||(t.width=t.height/c,t.x=h+.5*(u-h-t.width))),Nn.v(s),t},Cn.prototype.computeMinSize=function(){var t=this.Zb.ih.copy(),i=this.ih;return!isNaN(i.width)&&i.width>t.width&&(t.width=i.width),!isNaN(i.height)&&i.height>t.height&&(t.height=i.height),t},Cn.prototype.computeMaxSize=function(){var t=this.Zb.xf.copy(),i=this.xf;return!isNaN(i.width)&&i.width<t.width&&(t.width=i.width),!isNaN(i.height)&&i.height<t.height&&(t.height=i.height),t},Cn.prototype.computeCellSize=function(){var t,i=new st(NaN,NaN),e=this.Zb.Y;return null!==e&&(t=e.lI,!isNaN(t.width)&&0<t.width&&(i.width=t.width),!isNaN(t.height)&&0<t.height&&(i.height=t.height)),t=this.No,isNaN(i.width)&&!isNaN(t.width)&&0<t.width&&(i.width=t.width),isNaN(i.height)&&!isNaN(t.height)&&0<t.height&&(i.height=t.height),e=this.g,(isNaN(i.width)||isNaN(i.height))&&e&&(null!==(t=e.Za.$d)&&t.Iw&&(t=t.VD,isNaN(i.width)&&!isNaN(t.width)&&0<t.width&&(i.width=t.width),isNaN(i.height)&&!isNaN(t.height)&&0<t.height&&(i.height=t.height)),null!==(e=e.mt)&&e.visible&&this.Iw&&(t=e.Ew,isNaN(i.width)&&!isNaN(t.width)&&0<t.width&&(i.width=t.width),isNaN(i.height)&&!isNaN(t.height)&&0<t.height&&(i.height=t.height))),!isNaN(i.width)&&0!==i.width&&1/0!==i.width||(i.width=1),!isNaN(i.height)&&0!==i.height&&1/0!==i.height||(i.height=1),i},Nn.defineProperty(Cn,{ih:"minSize"},function(){return this.Bj},function(t){var i;Nn.A(t,st,Cn,"minSize"),this.Bj.K(t)||(i=t.width,isNaN(i)&&(i=0),t=t.height,isNaN(t)&&(t=0),this.Bj.m(i,t))}),Nn.defineProperty(Cn,{xf:"maxSize"},function(){return this.zj},function(t){var i;Nn.A(t,st,Cn,"maxSize"),this.zj.K(t)||(i=t.width,isNaN(i)&&(i=1/0),t=t.height,isNaN(t)&&(t=1/0),this.zj.m(i,t))}),Nn.defineProperty(Cn,{No:"cellSize"},function(){return this.hj},function(t){Nn.A(t,st,Cn,"cellSize"),this.hj.K(t)||this.hj.assign(t)}),Nn.defineProperty(Cn,{Iw:"isGridSnapEnabled"},function(){return this.Rq},function(t){Nn.j(t,"boolean",Cn,"isGridSnapEnabled"),this.Rq=t}),Nn.u(Cn,{qK:"originalDesiredSize"},function(){return this.zv}),Nn.u(Cn,{rK:"originalLocation"},function(){return this.Ey}),Nn.Ja(zn,Ae),Nn.ea("RotatingTool",zn),zn.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Ru)){if(t.hb&&!this.g.ab){var i=t.NE;if(null!==i&&t.canRotate()&&t.U.G()&&t.isVisible()&&i.U.G()&&i.Xi()){var e=t.Vo(this.name);if(null!==e&&e.Zb===i||(e=this.makeAdornment(i)),null!==e){e.angle=i.nl();var n=null,o=null;o=i===t||i===t.cc?(n=t.cc,t.df):(n=i,jn);for(var r=n.Ha,o=Nn.Mb(r.width*o.x+o.offsetX,r.height*o.y+o.offsetY);null!==n&&n!==i;)n.transform.ub(o),n=n.S;var n=o.y,r=Math.max(o.x-i.Ha.width,0),s=Nn.L();return e.location=i.Xa(new ct(1,0,50+r,n),s),Nn.v(s),Nn.v(o),void t.Wk(this.name,e)}}}t.$i(this.name)}},zn.prototype.makeAdornment=function(t){var i=null;if(null===(i=t.Y.oI)){(i=new Du).type=Xs,i.df=jn;var e=this.nt;null!==e&&i.add(e.copy())}else if(ma(i),null===(i=i.copy()))return null;return i.gc=this.name,i.Zb=t,i},Nn.defineProperty(zn,{nt:"handleArchetype"},function(){return this.Ak},function(t){null!==t&&Nn.A(t,ks,zn,"handleArchetype"),this.Ak=t}),Nn.u(zn,{handle:"handle"},function(){return this.Sb}),Nn.defineProperty(zn,{Zb:"adornedObject"},function(){return this.Db},function(t){null!==t&&Nn.A(t,ks,zn,"adornedObject"),this.Db=t}),zn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.ab||!t.jw||!t.N.left)&&null!==this.findToolHandleAt(t.yc.ca,this.name)},zn.prototype.doActivate=function(){var t,i,e=this.g;null!==e&&(this.Sb=this.findToolHandleAt(e.yc.ca,this.name),null!==this.Sb)&&(this.Db=this.Sb.Y.Zb,i=(t=this.Db.Y).cc,this.yC=this.Db===t||this.Db===i?i.Xa(t.df):this.Db.Xa(jn),this.yv=this.Db.angle,e.Me=!0,e.mz=!0,this.Qb(this.name),this.qa=!0)},zn.prototype.doDeactivate=function(){var t=this.g;null!==t&&(this.fk(),this.Db=this.Sb=null,this.qa=t.Me=!1)},zn.prototype.doCancel=function(){var t=this.g;null!==t&&(t.mz=!1),this.rotate(this.yv),this.stopTool()},zn.prototype.doMouseMove=function(){var t=this.g;this.qa&&null!==t&&(t=this.computeRotate(t.N.ca),this.rotate(t))},zn.prototype.doMouseUp=function(){var t,i=this.g;this.qa&&null!==i&&(i.mz=!1,t=this.computeRotate(i.N.ca),this.rotate(t),i.qc(),this.Bf=this.name,i.Ba("PartRotated",this.Db,this.yv)),this.stopTool()},zn.prototype.rotate=function(t){null!==this.Db&&(this.Db.angle=t)},zn.prototype.computeRotate=function(t){t=this.yC.xc(t),null!==(i=this.Db.S)&&(360<=(t-=i.nl())?t-=360:t<0&&(t+=360));var i=Math.min(Math.abs(this.CI),180),e=Math.min(Math.abs(this.BI),i/2);return!this.g.N.shift&&0<i&&0<e&&(t%i<e?t=Math.floor(t/i)*i:i-e<t%i&&(t=(Math.floor(t/i)+1)*i)),360<=t?t-=360:t<0&&(t+=360),t},Nn.defineProperty(zn,{CI:"snapAngleMultiple"},function(){return this.CC},function(t){Nn.j(t,"number",zn,"snapAngleMultiple"),this.CC=t}),Nn.defineProperty(zn,{BI:"snapAngleEpsilon"},function(){return this.BC},function(t){Nn.j(t,"number",zn,"snapAngleEpsilon"),this.BC=t}),Nn.u(zn,{pK:"originalAngle"},function(){return this.yv}),Nn.Ja(Bn,Ae),Nn.ea("ClickSelectingTool",Bn),Bn.prototype.canStart=function(){return!(!this.isEnabled||null===this.g||this.isBeyondDragSize())},Bn.prototype.doMouseUp=function(){this.qa&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.g.N.Vi&&this.g.Za.doToolTip()),this.stopTool()},Nn.Ja(On,Ae),Nn.ea("ActionTool",On),On.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t)return!1;var i=t.N,e=t.qe(i.ca,function(t){for(;null!==t.S&&!t.Fw;)t=t.S;return t});return null!==e&&(!!e.Fw&&(this.mn=e,t.zn=t.qe(i.ca,null,null),!0))},On.prototype.doMouseDown=function(){var t,i;this.qa?(t=this.g.N,null===(i=this.mn)||null!==(t.ye=i).aD&&i.aD(t,i)):this.canStart()&&this.doActivate()},On.prototype.doMouseMove=function(){var t,i;this.qa&&(t=this.g.N,null===(i=this.mn)||null!==(t.ye=i).bD&&i.bD(t,i))},On.prototype.doMouseUp=function(){if(this.qa){var t=this.g,i=t.N,e=this.mn;if(null===e)return;null!==(i.ye=e).cD&&e.cD(i,e),this.isBeyondDragSize()||Fe(e,i,t)}this.stopTool()},On.prototype.doCancel=function(){if(null!==(t=this.g)){var t=t.N,i=this.mn;if(null===i)return;null!==(t.ye=i).$C&&i.$C(t,i)}this.stopTool()},On.prototype.doStop=function(){this.mn=null},Nn.Ja(En,Ae),Nn.ea("ClickCreatingTool",En),En.prototype.canStart=function(){if(!this.isEnabled||null===this.$y)return!1;var t=this.g;if(null===t||t.ab||t.vf||!t.Ko||!t.N.left||this.isBeyondDragSize())return!1;if(this.oH){if(1===t.N.Ve&&(this.EB=t.N.hf.copy()),2!==t.N.Ve||this.isBeyondDragSize(this.EB))return!1}else if(1!==t.N.Ve)return!1;return t.Wa===this||null===t.gt(t.N.ca,!0)},En.prototype.doMouseUp=function(){var t=this.g;this.qa&&null!==t&&this.insertPart(t.N.ca),this.stopTool()},En.prototype.insertPart=function(t){var i=this.g;if(null===i)return null;var e=this.$y;if(null===e)return null;this.Qb(this.name);var n=null;return e instanceof Lh?e.Pd()&&(ma(e),null!==(n=e.copy())&&i.add(n)):null!==e&&(e=i.ba.copyNodeData(e),Nn.Ta(e)&&(i.ba.Xk(e),n=i.dh(e))),null!==n&&(n.location=t,i.nf&&i.select(n)),i.qc(),this.Bf=this.name,i.Ba("PartCreated",n),this.fk(),n},Nn.defineProperty(En,{$y:"archetypeNodeData"},function(){return this.Ll},function(t){null!==t&&Nn.A(t,Object,En,"archetypeNodeData"),this.Ll=t}),Nn.defineProperty(En,{oH:"isDoubleClick"},function(){return this.RB},function(t){Nn.j(t,"boolean",En,"isDoubleClick"),this.RB=t}),Nn.Ja(In,Ae),Nn.ea("ContextMenuTool",In),Nn.zD=!1,Nn.Ws=null,Nn.Xs=null,In.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||this.isBeyondDragSize()||!t.N.right)&&!!(null!==this.Hn&&t.N.Vi||null!==this.findObjectWithContextMenu())},In.prototype.doStart=function(){var t=this.g;null!==t&&this.gC.set(t.yc.ca)},In.prototype.doStop=function(){this.hideDefaultContextMenu(),this.hideContextMenu(),this.lz=null},In.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var i=this.g;if(null===i)return null;var e=i.N,n=null;if(t instanceof Oo||(n=t instanceof ks?t:i.qe(e.ca,null,function(t){return!t.layer.Gc})),null!==n){for(t=n;null!==t;){if(null!==t.contextMenu)return t;t=t.S}if(null!==this.Hn&&i.N.Vi)return n.Y}else if(null!==i.contextMenu)return i;return null},In.prototype.doActivate=function(){},In.prototype.doMouseDown=function(){Ae.prototype.doMouseDown.call(this),null!==this.g&&this.g.Za.Ne.contains(this)&&Gn(this)},In.prototype.doMouseUp=function(){Gn(this)},In.prototype.doMouseMove=function(){this.qa&&this.g.Za.doMouseMove()},In.prototype.showContextMenu=function(t,i){Nn.A(t,Du,In,"showContextMenu:contextmenu"),null!==i&&Nn.A(i,ks,In,"showContextMenu:obj");var e,n=this.g;null!==n&&(t!==this.pf&&this.hideContextMenu(),t.Tf="Tool",t.zl=!1,t.scale=1/n.scale,t.gc=this.name,null!==t.placeholder&&(t.placeholder.scale=n.scale),n.add(t),null!==i?((n=null)!==(e=i.Xo())&&(n=e.data),t.Zb=i,t.data=n):t.data=n.ba,t.sf(),this.positionContextMenu(t,i),this.pf=t)},In.prototype.positionContextMenu=function(t){var i,e,n,o;null!==t.placeholder||null!==(i=this.g)&&(e=i.N.ca.copy(),n=t.Ca,o=i.rb,i.N.Vi&&(e.x-=n.width),e.x+n.width>o.right&&(e.x-=n.width+5),e.x<o.x&&(e.x=o.x),e.y+n.height>o.bottom&&(e.y-=n.height+5),e.y<o.y&&(e.y=o.y),t.position=e)},In.prototype.hideContextMenu=function(){var t=this.g;null!==t&&null!==this.pf&&(t.remove(this.pf),null!==this.Px&&this.Px.$i(this.pf.gc),this.pf.data=null,this.pf=this.pf.Zb=null,this.standardMouseOver())},In.prototype.showDefaultContextMenu=function(){var t,i=this.g;if(null!==i){null===this.Rx&&(this.Rx=null===(t=this).g?null:((t=new Dn(qn)).add(new qn("Copy",function(t){t.nb.copySelection()},function(t){return t.nb.canCopySelection()})),t.add(new qn("Cut",function(t){t.nb.cutSelection()},function(t){return t.nb.canCutSelection()})),t.add(new qn("Delete",function(t){t.nb.deleteSelection()},function(t){return t.nb.canDeleteSelection()})),t.add(new qn("Paste",function(t){t.nb.pasteSelection(t.N.ca)},function(t){return t.nb.canPasteSelection()})),t.add(new qn("Select All",function(t){t.nb.selectAll()},function(t){return t.nb.canSelectAll()})),t.add(new qn("Undo",function(t){t.nb.undo()},function(t){return t.nb.canUndo()})),t.add(new qn("Redo",function(t){t.nb.redo()},function(t){return t.nb.canRedo()})),t.add(new qn("Scroll To Part",function(t){t.nb.scrollToPart()},function(t){return t.nb.canScrollToPart()})),t.add(new qn("Zoom To Fit",function(t){t.nb.zoomToFit()},function(t){return t.nb.canZoomToFit()})),t.add(new qn("Reset Zoom",function(t){t.nb.resetZoom()},function(t){return t.nb.canResetZoom()})),t.add(new qn("Group Selection",function(t){t.nb.groupSelection()},function(t){return t.nb.canGroupSelection()})),t.add(new qn("Ungroup Selection",function(t){t.nb.ungroupSelection()},function(t){return t.nb.canUngroupSelection()})),t.add(new qn("Edit Text",function(t){t.nb.editTextBlock()},function(t){return t.nb.canEditTextBlock()})),t)),this.Hn!==this.pf&&this.hideContextMenu(),Nn.Xs.innerHTML="",Nn.Ws.addEventListener("click",this.RC,!1);var e=this,n=Nn.createElement("ul");n.className="defaultCXul",Nn.Xs.appendChild(n),n.innerHTML="";for(var o=this.Rx.i;o.next();){var r,s=o.value,a=s.text,h=s.visible;"function"!=typeof s.rD||"function"==typeof h&&!h(i)||((h=Nn.createElement("li")).className="defaultCXli",(r=Nn.createElement("a")).className="defaultCXa",r.href="#",r.zF=s.rD,r.addEventListener("click",function(t){return this.zF(i),e.stopTool(),t.preventDefault(),!1},!1),r.textContent=a,h.appendChild(r),n.appendChild(h))}Nn.Xs.style.display="block",Nn.Ws.style.display="block",this.pf=this.Hn}},In.prototype.hideDefaultContextMenu=function(){null!==this.pf&&this.pf===this.Hn&&(Nn.Xs.style.display="none",Nn.Ws.style.display="none",Nn.Ws.removeEventListener("click",this.RC,!1),this.pf=null)},Nn.defineProperty(In,{pf:"currentContextMenu"},function(){return this.gB},function(t){null!==t&&Nn.A(t,Du,In,"currentContextMenu"),this.gB=t,this.Px=null!==t?t.Mf:null}),Nn.defineProperty(In,{lz:"currentObject"},function(){return this.jB},function(t){null!==t&&Nn.A(t,ks,In,"currentObject"),this.jB=t}),Nn.u(In,{kK:"mouseDownPoint"},function(){return this.gC}),Nn.Ja(Vn,Ae),Nn.ea("DragSelectingTool",Vn),Vn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.nf)return!1;var i=t.N;return!(!i.left||t.Wa!==this&&(!this.isBeyondDragSize()||i.timestamp-t.yc.timestamp<this.AD||null!==t.gt(i.ca,!0)))},Vn.prototype.doActivate=function(){var t=this.g;null!==t&&(this.qa=!0,t.Me=!0,t.tb=!0,t.add(this.Zg),this.doMouseMove())},Vn.prototype.doDeactivate=function(){var t=this.g;null!==t&&(t.remove(this.Zg),t.tb=!1,this.qa=t.Me=!1)},Vn.prototype.doMouseMove=function(){var t,i;null!==this.g&&this.qa&&null!==this.Zg&&(t=this.computeBoxBounds(),null===(i=this.Zg.be("SHAPE"))&&(i=this.Zg.Xe()),i.xa=t.size,this.Zg.position=t.position)},Vn.prototype.doMouseUp=function(){if(this.qa){var t=this.g;t.remove(this.Zg);try{t.$b="wait",this.selectInRect(this.computeBoxBounds())}finally{t.$b=""}}this.stopTool()},Vn.prototype.computeBoxBounds=function(){var t=this.g;return null===t?new Ln(0,0,0,0):new Ln(t.yc.ca,t.N.ca)},Vn.prototype.selectInRect=function(t){var i=this.g;if(null!==i){var e=i.N;if(i.Ba("ChangingSelection"),t=i.Yj(t,null,function(t){return t instanceof Lh&&t.canSelect()},this.vH),Nn.ak?e.Ft:e.control)if(e.shift)for(t=t.i;t.next();)(e=t.value).hb&&(e.hb=!1);else for(t=t.i;t.next();)(e=t.value).hb=!e.hb;else{if(!e.shift){for(var e=new Dn(Lh),n=i.selection.i;n.next();){var o=n.value;t.contains(o)||e.add(o)}for(e=e.i;e.next();)e.value.hb=!1}for(t=t.i;t.next();)(e=t.value).hb||(e.hb=!0)}i.Ba("ChangedSelection")}},Nn.defineProperty(Vn,{AD:"delay"},function(){return this.In},function(t){Nn.j(t,"number",Vn,"delay"),this.In=t}),Nn.defineProperty(Vn,{vH:"isPartialInclusion"},function(){return this.WB},function(t){Nn.j(t,"boolean",Vn,"isPartialInclusion"),this.WB=t}),Nn.defineProperty(Vn,{Zg:"box"},function(){return this.Nl},function(t){null!==t&&Nn.A(t,Lh,Vn,"box"),this.Nl=t}),Nn.Ja(Hn,Ae),Nn.ea("PanningTool",Hn),Hn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||!t.ne&&!t.oe||!t.N.left||t.Wa!==this&&!this.isBeyondDragSize())},Hn.prototype.doActivate=function(){var t=this.g;null!==t&&(this.gj?(t.N.bubbles=!0,h.document.addEventListener("scroll",this.FC,!1)):(t.$b="move",t.Me=!0,this.Fy=t.position.copy()),this.qa=!0)},Hn.prototype.doDeactivate=function(){var t=this.g;null!==t&&(t.$b="",this.qa=t.Me=!1)},Hn.prototype.doCancel=function(){var t=this.g;null!==t&&(t.position=this.Fy,t.Me=!1),this.stopTool()},Hn.prototype.doMouseMove=function(){this.move()},Hn.prototype.doMouseUp=function(){this.move(),this.stopTool()},Hn.prototype.move=function(){var t,i,e,n,o=this.g;this.qa&&o&&(this.gj?o.N.bubbles=!0:(t=o.position,n=o.yc.ca,i=o.N.ca,e=t.x+n.x-i.x,n=t.y+n.y-i.y,o.ne||(e=t.x),o.oe||(n=t.y),o.position=new Se(e,n)))},Nn.defineProperty(Hn,{bubbles:"bubbles"},function(){return this.gj},function(t){Nn.j(t,"boolean",Hn,"bubbles"),this.gj=t}),Nn.u(Hn,{uK:"originalPosition"},function(){return this.Fy}),Nn.ea("TextEditingTool",Kn),Nn.Ja(Kn,Ae),Kn.LostFocus=ln=Nn.p(Kn,"LostFocus",0),Kn.MouseDown=un=Nn.p(Kn,"MouseDown",1),Kn.Tab=fn=Nn.p(Kn,"Tab",2),Kn.Enter=cn=Nn.p(Kn,"Enter",3),Kn.SingleClick=Nn.p(Kn,"SingleClick",0),Kn.SingleClickSelected=dn=Nn.p(Kn,"SingleClickSelected",1);var Un,Jn,Yn,Wn,Xn,Zn=Nn.p(Kn,"StateNone",0),Qn=Nn.p(Kn,"StateActive",1),$n=Nn.p(Kn,"StateEditing",2),_n=Nn.p(Kn,"StateEditing2",3),to=Nn.p(Kn,"StateValidating",4),io=Nn.p(Kn,"StateValidated",5);function eo(t){if(null!==t.ze&&null!==t.qf){var i=t.ze,e=t.ze.text,n=t.qf.value,o="function"==typeof n?n():n;if(!t.isValidText(t.ze,e,o))return t.eb=$n,null!==i.qz&&i.qz(t,e,o),null===t.Qk&&(t.Qk=t.qf.style.border,t.qf.style.border="3px solid red"),void("function"==typeof t.qf.focus&&t.qf.focus());t.Qb(t.name),t.eb=io,e!==o&&(t.ze.text=o),t.Bf=t.name,null!==(i=t.g)&&i.Ba("TextEdited",t.ze,e),t.fk(),t.stopTool(),null!==i&&i.focus()}null!==t.Qk&&(t.qf.style.border=t.Qk,t.Qk=null)}function no(){Ae.call(this),this.name="ToolManager",this.EF=new Dn(Ae),this.FF=new Dn(Ae),this.GF=new Dn(Ae),this.IB=this.JB=850,this.xB=new st(2,2).Ea(),this.SC=5e3,this.hC=Un,this.GB=Yn,this.Ju=this.nB=null,this.wm=-1}function oo(t,i){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.qa?t.YD:t.fH,i.N)}function ro(t,i,e,n){Nn.j(i,"string",no,"replaceStandardTool:name"),Nn.A(n,Dn,no,"replaceStandardTool:list"),null!==e&&(Nn.A(e,Ae,no,"replaceStandardTool:newtool"),e.g&&e.g!==t.g&&Nn.k("Cannot share tools between Diagrams: "+e.toString()),e.name=i,e.Mc(t.g)),t.findTool(i)?t.replaceTool(i,e):null!==e&&n.add(e)}function so(){this.oB=ao,this.vq=this.wq=this.W=null,this.on=this.xq=this.yq=0,this.Kl=this.pc=this.Xn=this.rj=!1,this.sj=this.Qe=!0,this.Iu=this.Hu=this.iB=null,this.hB=0,this.yo=null,this.uu=new Q("string"),this.Zx=600,this.KF=new Se(0,0),this.WA=this.VA=this.WC=!1,this.gm=new nt(ks,Fo)}function ao(t,i,e,n){return(t/=n/2)<1?e/2*t*t+i:-e/2*(--t*(t-2)-1)+i}function ho(i){var e;i.Qe&&(i.uu.clear(),i.pc)&&(i.Kl?0===i.on&&(e=+new Date,i.on=e,requestAnimationFrame(function(){var t;!1===i.pc||i.rj||i.on!==e||((t=i.W).Si("temporaryPixelRatio")&&(t.Mj=1),Io(t),i.pc=!1,t.Ba("AnimationStarting"),function(t,e){var i;function n(){var t,i;!1!==r.rj&&r.on===e&&(t=+new Date,i=p<t?l:t-d,To(r),Co(r,o,c,s,i,l),r.Hu&&r.Hu(),tr(o),So(r),p<t?No(r):requestAnimationFrame(n))}void 0===i&&(i=new y);var o=t.W;if(null!==o){t.rj=!0;var r=t,s=i.NJ||t.oB,a=i.nK||null,h=i.oK||null,l=i.duration||t.Zx,u=t.KF;for(i=t.gm.i;i.next();){var f=i.value.start.position;f instanceof Se&&(f.G()||f.assign(u))}t.iB=s,t.Hu=a,t.Iu=h,t.hB=l,t.lB=t.gm;var c=t.lB;for(i=c.i;i.next();)(a=i.value.end)["position:placeholder"]&&(h=a["position:placeholder"],(u=h.Xa(P)).x+=h.padding.left,u.y+=h.padding.top,a["position:placeholder"]=u);To(t),Co(t,o,c,s,0,l),tr(t.W),So(t);var d=+new Date,p=d+l;r.on===e&&requestAnimationFrame(function(){n()})}}(i,e))})):i.pc=!1)}function lo(t,i,e,n,o,r){var s,a,h;!t.pc||"position"===e&&n.K(o)||i instanceof Lh&&!i.aE||((s=t.gm).contains(i)?(a=(i=s.ja(i)).start,h=i.end,void 0===a[e]&&(a[e]=uo(n)),i.jz&&void 0!==h[e]?i.rz[e]=uo(o):(r||(i.rz[e]=uo(o)),h[e]=uo(o))):(a=new y,h=new y,a[e]=uo(n),h[e]=uo(o),e=h,(n=a.position)instanceof Se&&!n.G()&&t.uu.contains("Expand SubGraph")&&n.assign(e.position),s.add(i,new Fo(a,h,r))),t.Kl=!0)}function uo(t){return t instanceof Se||t instanceof st?t.copy():t}Nn.defineProperty(Kn,{ze:"textBlock"},function(){return this.Py},function(t){null!==t&&Nn.A(t,qa,Kn,"textBlock"),this.Py=t}),Nn.defineProperty(Kn,{qf:"currentTextEditor"},function(){return this.mB},function(t){this.mB=t}),Nn.defineProperty(Kn,{DG:"defaultTextEditor"},function(){return this.tB},function(t){Nn.A(t,Element,Kn,"defaultTextEditor"),this.tB=t}),Nn.defineProperty(Kn,{tA:"starting"},function(){return this.yo},function(t){Nn.pb(t,Kn,Kn,"starting"),this.yo=t}),Kn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.ab||!t.N.left||this.isBeyondDragSize())&&(!(null===(t=t.qe(t.N.ca,null,function(t){return t instanceof qa}))||!t.oz||!t.Y.canEdit())&&!(null===(t=t.Y)||this.tA===dn&&!t.hb))},Kn.prototype.doStart=function(){this.qa||null===this.ze||this.doActivate()},Kn.prototype.doActivate=function(){var t,i,e,n,o,r,s,a,h,l,u;this.qa||null!==(t=this.g)&&(null===(i=this.ze)&&(i=t.qe(t.N.ca,function(t){return t instanceof qa?t:null})),null!==i&&null!==(this.ze=i).Y&&(this.qa=!0,this.eb=Qn,e=this.DG,n=!1,null!==i.dF&&(e=i.dF),null===e||e.QB||(n=!0),this.JC=this.ze.copy(),a=new Ln(this.ze.Xa(P),this.ze.Xa(C)),t.tI(a),e.QB&&(u=i.Xa(jn),o=t.position,r=t.scale,(s=i.Ri()*r)<this.uE&&(s=this.uE),a=i.Ha.width*s,h=i.Ha.height*s,l=(u.x-o.x)*r,u=(u.y-o.y)*r,e.value=i.text,t.hl.style.font=i.font,e.style.font="inherit",e.style.fontSize=100*s+"%",e.style.lineHeight="normal",e.style.width=6+a+"px",e.style.height=2+h+"px",e.style.left=(l-a/2|0)-1+"px",e.style.top=(u-h/2|0)-1+"px",e.style.textAlign=i.textAlign,e.style.margin="0",e.style.padding="1px",e.style.border="0",e.style.outline="none",e.style["white-space"]="pre-wrap",e.style.overflow="hidden"),t.hl.appendChild(e),e.style.position="absolute",e.style.zIndex=100,e.className="start",e.textEditingTool=this,e.II=s,n&&"function"==typeof e.onActivate&&e.onActivate(),"function"==typeof(this.qf=e).focus&&e.focus(),"function"==typeof e.select&&this.mA&&(e.select(),e.setSelectionRange(0,9999))))},Kn.prototype.doCancel=function(){null!==this.Qk&&(this.qf.style.border=this.Qk,this.Qk=null),this.stopTool()},Kn.prototype.doMouseUp=function(){!this.qa&&this.canStart()&&this.doActivate()},Kn.prototype.doMouseDown=function(){this.qa&&this.acceptText(un)},Kn.prototype.acceptText=function(t){switch(t){case un:this.eb===io||this.eb===_n?"function"==typeof this.qf.focus&&this.qf.focus():this.eb!==Qn&&this.eb!==$n||(this.eb=to,eo(this));break;case ln:case cn:case fn:if(cn===t&&!0===this.Py.Kw)break;this.eb!==Qn&&this.eb!==$n||(this.eb=to,eo(this))}},Kn.prototype.doDeactivate=function(){var t,i=this.g;null!==i&&(this.eb=Zn,(this.ze=null)!==this.qf&&("function"==typeof(t=this.qf).onDeactivate&&t.onDeactivate(),null!==t&&i.hl.removeChild(t)),this.qa=!1)},Kn.prototype.doFocus=function(){var t=this.qf;null!==t&&(this.eb===Qn?this.eb=$n:this.eb===io?this.eb=_n:this.eb===_n&&(this.eb=$n),"function"==typeof t.select&&this.mA&&(t.select(),t.setSelectionRange(0,9999)))},Kn.prototype.doBlur=function(){var t=this.qf;null!==t&&("function"==typeof t.focus&&t.focus(),"function"==typeof t.select&&this.mA&&(t.select(),t.setSelectionRange(0,9999)))},Kn.prototype.isValidText=function(t,i,e){Nn.A(t,qa,Kn,"isValidText:textblock");var n=this.wA;return!(null!==n&&!n(t,i,e))&&!(null!==(n=t.wA)&&!n(t,i,e))},Nn.defineProperty(Kn,{wA:"textValidation"},function(){return this.Tk},function(t){null!==t&&Nn.j(t,"function",Kn,"textValidation"),this.Tk=t}),Nn.defineProperty(Kn,{uE:"minimumEditorScale"},function(){return this.dC},function(t){null!==t&&Nn.j(t,"number",Kn,"minimumEditorScale"),this.dC=t}),Nn.defineProperty(Kn,{mA:"selectsTextOnActivate"},function(){return this.zC},function(t){null!==t&&Nn.j(t,"boolean",Kn,"selectsTextOnActivate"),this.zC=t}),Nn.Ja(no,Ae),Nn.ea("ToolManager",no),no.WheelScroll=Un=Nn.p(no,"WheelScroll",0),no.WheelZoom=Jn=Nn.p(no,"WheelZoom",1),no.WheelNone=Nn.p(no,"WheelNone",2),no.GestureZoom=Yn=Nn.p(no,"GestureZoom",3),no.GestureCancel=Wn=Nn.p(no,"GestureCancel",4),no.GestureNone=Xn=Nn.p(no,"GestureNone",5),Nn.defineProperty(no,{It:"mouseWheelBehavior"},function(){return this.hC},function(t){Nn.pb(t,no,no,"mouseWheelBehavior"),this.hC=t}),Nn.defineProperty(no,{$o:"gestureBehavior"},function(){return this.GB},function(t){Nn.pb(t,no,no,"gestureBehavior"),this.GB=t}),no.prototype.initializeStandardTools=function(){this.WF=new On,this.BE=new Mn,this.GH=new Tn,this.ME=new Cn,this.qI=new zn,this.qE=new kn,this.$d=new ze,this.IG=new Vn,this.$H=new Hn,this.fz=new In,this.vA=new Kn,this.lG=new En,this.mG=new Bn},no.prototype.updateAdornments=function(t){var i,e=this.bh;null!==e&&this.Ju===t&&(i=e.Zb,(null!==t?i.Y===t:null===i)?this.showToolTip(e,i):this.hideToolTip())},no.prototype.doMouseDown=function(){var t=this.g;if(null!==t){var i=t.N;if(i.Vi&&this.$o===Wn&&(i.bubbles=!1),i.wt){if(this.$o===Xn)return void(i.bubbles=!0);if(this.$o===Wn)return;if(t.Wa.canStartMultiTouch())return void t.Wa.standardPinchZoomStart()}(e=t.la).cz&&0!==e.rh&&Nn.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var e=this.Ne.length,n=0;n<e;n++){var o=this.Ne.da(n);if(null===o.g&&o.Mc(this.g),o.canStart())return t.doFocus(),t.Wa=o,void(t.Wa===o&&(o.qa||o.doActivate(),o.doMouseDown()))}1===t.N.button&&(this.It===Un?this.It=Jn:this.It===Jn&&(this.It=Un)),this.doActivate(),this.standardWaitAfter(this.YD,i)}},no.prototype.doMouseMove=function(){var t=this.g;if(null!==t){var i=t.N;if(i.wt){if(this.$o===Xn)return void(i.bubbles=!0);if(this.$o===Wn)return;if(t.Wa.canStartMultiTouch())return void t.Wa.standardPinchZoomMove()}if(this.qa)for(var e=this.Vf.length,n=0;n<e;n++){var o=this.Vf.da(n);if(null===o.g&&o.Mc(this.g),o.canStart())return t.doFocus(),t.Wa=o,void(t.Wa===o&&(o.qa||o.doActivate(),o.doMouseMove()))}oo(this,t),null===i.event||"mousemove"!==i.event.type&&i.event.cancelable||(i.bubbles=!0)}},no.prototype.doCurrentObjectChanged=function(t,i){var e=this.bh;null===e||null!==i&&(i===e||i.tl(e))||this.hideToolTip()},no.prototype.doWaitAfter=function(t){var i=this.g;null!==i&&i.zb&&(this.doMouseHover(),this.qa||this.doToolTip(),t.Vi&&!i.N.zc&&((t=t.copy()).button=2,t.buttons=2,i.N=t,i.ys=!0,i.doMouseUp()))},no.prototype.doMouseHover=function(){var t=this.g;if(null!==t){var i=t.N;null===i.ye&&(i.ye=t.qe(i.ca,null,null));var e=i.ye;if(null!==e)for(i.zc=!1;null!==e&&(null===(t=this.qa?e.Rz:e.Sz)||(t(i,e),!i.zc));)e=e.S;else null!==(t=this.qa?t.Rz:t.Sz)&&t(i)}},no.prototype.doToolTip=function(){var t=this.g;if(null!==t){var i=t.N;if(null===i.ye&&(i.ye=t.qe(i.ca,null,null)),null!==(i=i.ye)){if(i!==this.bh&&!i.tl(this.bh)){for(;null!==i;){if(null!==(t=i.yA))return void this.showToolTip(t,i);i=i.S}this.hideToolTip()}}else null!==(t=t.yA)?this.showToolTip(t,null):this.hideToolTip()}},no.prototype.showToolTip=function(t,i){Nn.A(t,Du,no,"showToolTip:tooltip"),null!==i&&Nn.A(i,ks,no,"showToolTip:obj");var e,n,o=this.g;null!==o&&(t!==this.bh&&this.hideToolTip(),t.Tf="Tool",t.zl=!1,t.scale=1/o.scale,t.gc="ToolTip",null!==t.placeholder&&(t.placeholder.scale=o.scale),o.add(t),null!==i?((o=null)!==(e=i.Xo())&&(o=e.data),t.Zb=i,t.data=o):t.data=o.ba,t.sf(),this.positionToolTip(t,i),this.bh=t,-1!==this.wm&&(Nn.clearTimeout(this.wm),this.wm=-1),0<(o=this.NI)&&1/0!==o&&((n=this).wm=Nn.setTimeout(function(){n.hideToolTip()},o)))},no.prototype.positionToolTip=function(t){var i,e,n,o;null!==t.placeholder||null!==(i=this.g)&&(e=i.N.ca.copy(),n=t.Ca,o=i.rb,i.N.Vi&&(e.x-=n.width),e.x+n.width>o.right&&(e.x-=n.width+5),e.x<o.x&&(e.x=o.x),e.y=e.y+20+n.height>o.bottom?e.y-(n.height+5):e.y+20,e.y<o.y&&(e.y=o.y),t.position=e)},no.prototype.hideToolTip=function(){-1!==this.wm&&(Nn.clearTimeout(this.wm),this.wm=-1);var t=this.g;null!==t&&null!==this.bh&&(t.remove(this.bh),null!==this.Ju&&this.Ju.$i(this.bh.gc),this.bh.data=null,this.bh=this.bh.Zb=null)},Nn.defineProperty(no,{bh:"currentToolTip"},function(){return this.nB},function(t){null!==t&&Nn.A(t,Du,no,"currentToolTip"),this.nB=t,this.Ju=null!==t?t.Mf:null}),no.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.g;if(null!==t){if(this.qa)for(var i=this.Wf.length,e=0;e<i;e++){var n=this.Wf.da(e);if(null===n.g&&n.Mc(this.g),n.canStart())return t.doFocus(),t.Wa=n,void(t.Wa===n&&(n.qa||n.doActivate(),n.doMouseUp()))}t.doFocus(),this.doDeactivate()}},no.prototype.doMouseWheel=function(){this.standardMouseWheel()},no.prototype.doKeyDown=function(){var t=this.g;null!==t&&t.nb.doKeyDown()},no.prototype.doKeyUp=function(){var t=this.g;null!==t&&t.nb.doKeyUp()},no.prototype.doCancel=function(){null!==yn&&yn.doCancel(),Ae.prototype.doCancel.call(this)},no.prototype.findTool=function(t){Nn.j(t,"string",no,"findTool:name");for(var i=this.Ne.length,e=0;e<i;e++){var n=this.Ne.da(e);if(n.name===t)return n}for(i=this.Vf.length,e=0;e<i;e++)if((n=this.Vf.da(e)).name===t)return n;for(i=this.Wf.length,e=0;e<i;e++)if((n=this.Wf.da(e)).name===t)return n;return null},no.prototype.replaceTool=function(t,i){Nn.j(t,"string",no,"replaceTool:name"),null!==i&&(Nn.A(i,Ae,no,"replaceTool:newtool"),i.g&&i.g!==this.g&&Nn.k("Cannot share tools between Diagrams: "+i.toString()),i.Mc(this.g));for(var e=this.Ne.length,n=0;n<e;n++){var o=this.Ne.da(n);if(o.name===t)return null!==i?this.Ne.Hg(n,i):this.Ne.Vc(n),o}for(e=this.Vf.length,n=0;n<e;n++)if((o=this.Vf.da(n)).name===t)return null!==i?this.Vf.Hg(n,i):this.Vf.Vc(n),o;for(e=this.Wf.length,n=0;n<e;n++)if((o=this.Wf.da(n)).name===t)return null!==i?this.Wf.Hg(n,i):this.Wf.Vc(n),o;return null},Nn.u(no,{Ne:"mouseDownTools"},function(){return this.EF}),Nn.u(no,{Vf:"mouseMoveTools"},function(){return this.FF}),Nn.u(no,{Wf:"mouseUpTools"},function(){return this.GF}),Nn.defineProperty(no,{fH:"hoverDelay"},function(){return this.JB},function(t){Nn.j(t,"number",no,"hoverDelay"),this.JB=t}),Nn.defineProperty(no,{YD:"holdDelay"},function(){return this.IB},function(t){Nn.j(t,"number",no,"holdDelay"),this.IB=t}),Nn.defineProperty(no,{JG:"dragSize"},function(){return this.xB},function(t){Nn.A(t,st,no,"dragSize"),this.xB=t.R()}),Nn.defineProperty(no,{NI:"toolTipDuration"},function(){return this.SC},function(t){Nn.j(t,"number",no,"toolTipDuration"),this.SC=t}),Nn.defineProperty(no,{WF:"actionTool"},function(){return this.findTool("Action")},function(t){ro(this,"Action",t,this.Ne)}),Nn.defineProperty(no,{BE:"relinkingTool"},function(){return this.findTool("Relinking")},function(t){ro(this,"Relinking",t,this.Ne)}),Nn.defineProperty(no,{GH:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(t){ro(this,"LinkReshaping",t,this.Ne)}),Nn.defineProperty(no,{ME:"resizingTool"},function(){return this.findTool("Resizing")},function(t){ro(this,"Resizing",t,this.Ne)}),Nn.defineProperty(no,{qI:"rotatingTool"},function(){return this.findTool("Rotating")},function(t){ro(this,"Rotating",t,this.Ne)}),Nn.defineProperty(no,{qE:"linkingTool"},function(){return this.findTool("Linking")},function(t){ro(this,"Linking",t,this.Vf)}),Nn.defineProperty(no,{$d:"draggingTool"},function(){return this.findTool("Dragging")},function(t){ro(this,"Dragging",t,this.Vf)}),Nn.defineProperty(no,{IG:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(t){ro(this,"DragSelecting",t,this.Vf)}),Nn.defineProperty(no,{$H:"panningTool"},function(){return this.findTool("Panning")},function(t){ro(this,"Panning",t,this.Vf)}),Nn.defineProperty(no,{fz:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(t){ro(this,"ContextMenu",t,this.Wf)}),Nn.defineProperty(no,{vA:"textEditingTool"},function(){return this.findTool("TextEditing")},function(t){ro(this,"TextEditing",t,this.Wf)}),Nn.defineProperty(no,{lG:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(t){ro(this,"ClickCreating",t,this.Wf)}),Nn.defineProperty(no,{mG:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(t){ro(this,"ClickSelecting",t,this.Wf)}),Nn.ea("AnimationManager",so),so.prototype.Mc=function(t){this.W=t},Nn.defineProperty(so,{tA:"starting"},function(){return this.yo},function(t){this.yo!==t&&(null!==t&&Nn.j(t,"function",so,"starting"),this.yo=t)}),Nn.u(so,{sJ:"animationReasons"},function(){return this.uu}),so.prototype.prepareAutomaticAnimation=so.prototype.$m=function(t){var i;this.Qe&&(this.sj||this.W.Tm)&&(this.uu.add(t),null!==(i=this.tA)&&!i(this,t)||(this.rj&&this.Zh(),this.pc=!0,this.Kl=!1))};var fo,co,po,yo,go,vo,mo,bo,xo,wo,ko,Mo,Po={opacity:function(t,i,e,n,o,r){t.opacity=n(o,i,e-i,r)},position:function(t,i,e,n,o,r){o!==r?t.nx(n(o,i.x,e.x-i.x,r),n(o,i.y,e.y-i.y,r)):t.position=new Se(n(o,i.x,e.x-i.x,r),n(o,i.y,e.y-i.y,r))},"position:node":function(t,i,e,n,o,r){var s=t.U,a=e.U;e=a.x+a.width/2-s.width/2,s=a.y+a.height/2-s.height/2,o!==r?t.nx(n(o,i.x,e-i.x,r),n(o,i.y,s-i.y,r)):t.position=new Se(n(o,i.x,e-i.x,r),n(o,i.y,s-i.y,r))},"position:placeholder":function(t,i,e,n,o,r){o!==r?t.nx(n(o,i.x,e.x-i.x,r),n(o,i.y,e.y-i.y,r)):t.position=new Se(n(o,i.x,e.x-i.x,r),n(o,i.y,e.y-i.y,r))},scale:function(t,i,e,n,o,r){t.scale=n(o,i,e-i,r)},visible:function(t,i,e,n,o,r){t.visible=o!==r?i:e}};function To(t){var i;t.Xn||(i=t.W,t.WC=i.tb,t.VA=i.we,t.WA=i.bu,i.tb=!0,i.we=!0,i.bu=!0,t.Xn=!0)}function So(t){var i=t.W;i.tb=t.WC,i.we=t.VA,i.bu=t.WA,t.Xn=!1}function Co(t,i,e,n,o,r){for(e=e.i;e.next();){var s,a=e.key,h=(l=e.value).start,l=l.end;for(s in l)"position"===s&&(l["position:placeholder"]||l["position:node"])||void 0===Po[s]||Po[s](a,h[s],l[s],n,o,r)}n=i.Ez,i.Ez=!0,s=t.oB,0!==t.yq&&0!==t.xq&&(e=t.yq,i.Tb=s(o,e,t.xq-e,r)),null!==t.wq&&null!==t.vq&&(e=t.wq,t=t.vq,i.kb=new Se(s(o,e.x,t.x-e.x,r),s(o,e.y,t.y-e.y,r))),i.Ez=n}function No(t){t.rj=!1,t.on=0,t.Kl=!1,t.wq=null,t.vq=null,t.yq=0,t.xq=0,To(t);for(var i=t.W,e=t.iB,n=t.hB,o=t.lB.i;o.next();){var r,s,a=o.key,h=o.value,l=h.start,u=h.end,f=h.rz;for(r in u){void 0!==Po[r]&&(s=r,!h.jz||"position:node"!==s&&"position:placeholder"!==s||(s="position"),Po[s](a,l[r],void 0!==f[r]?f[r]:h.jz?l[r]:u[r],e,n,n))}h.ax&&a.nd(!1)}for(e=t.W.links;e.next();)null!==(n=e.value).ro&&(n.points=n.ro,n.ro=null);i.Qw.clear(),i.Mj=null,i.qc(),i.Uf(),$o(i),So(t),t.gm=new nt(ks,Fo),t.Iu&&t.Iu(),t.Iu=null,t.Hu=null,i.Ba("AnimationFinished"),i.ue()}function jo(t,i,e){var n=i.U,o=e.U,r=null;if(e instanceof kf&&(r=e.placeholder),null!==r?((n=r.Xa(P)).x+=r.padding.left,n.y+=r.padding.top,lo(t,i,"position",n,i.position,!1)):lo(t,i,"position",new Se(o.x+o.width/2-n.width/2,o.y+o.height/2-n.height/2),i.position,!1),lo(t,i,"scale",.01,i.scale,!1),i instanceof kf)for(i=i.Ic;i.next();)(r=i.value)instanceof Lu&&jo(t,r,e)}function Do(t,i,e){if(i.isVisible()){var n=null;if(e instanceof kf&&(n=e.placeholder),null!==n?lo(t,i,"position:placeholder",i.position,n,!0):lo(t,i,"position:node",i.position,e,!0),lo(t,i,"scale",i.scale,.01,!0),t.pc&&((n=t.gm).contains(i)&&(n.ja(i).ax=!0)),i instanceof kf)for(i=i.Ic;i.next();)(n=i.value)instanceof Lu&&Do(t,n,e)}}function Lo(t,i,e){t.pc&&(null===t.wq&&i.G()&&null===t.vq&&(t.wq=i.copy()),t.vq=e.copy(),t.Kl=!0)}function Ao(t,i,e){t.pc&&t.W.Tm&&(0===t.yq&&0===t.xq&&(t.yq=i),t.xq=e,t.Kl=!0)}function Fo(t,i,e){this.start=t,this.end=i,this.rz=new y,this.jz=e,this.ax=!1}function zo(){0<arguments.length&&Nn.dd(zo),Nn.ec(this),this.W=null,this.wb=new Dn(Lh),this.Ob="",this.Rc=1,this.ty=!1,this.Sk=this.Ty=this.qk=this.pk=this.ok=this.nk=this.lk=this.mk=this.kk=this.sk=this.jk=this.rk=this.ik=this.hk=!0,this.ny=!1,this.Bv=[]}function Bo(t,i,e){if(i=function(t,i,e){var n=e.ln;if(isNaN(n))return i;var o=(t=t.wb).count;if(o<=1)return i;if(i<0&&(i=t.indexOf(e)),i<0)return-1;for(var r=i-1,s=NaN;0<=r&&(s=t.da(r).ln,isNaN(s));)r--;for(var a=i+1,h=NaN;a<o&&(h=t.da(a).ln,isNaN(h));)a++;if(!isNaN(s)&&n<s)for(;;){if(-1===r||s<=n){if(++r===i)break;return t.Vc(i),t.Ad(r,e),r}for(s=NaN;0<=--r&&(s=t.da(r).ln,isNaN(s)););}else if(!isNaN(h)&&h<n)for(;;){if(a===o||n<=h){if(--a===i)break;return t.Vc(i),t.Ad(a,e),a}for(h=NaN;++a<o&&(h=t.da(a).ln,isNaN(h)););}return i}(t,i,e),e instanceof kf&&null!==e&&isNaN(e.ln)){if(0!==e.Ic.count){for(var n=-1,o=t.wb.n,r=o.length,s=0;s<r;s++){var a=o[s];if(a===e&&(i=s,0<=n))break;if(n<0&&a.Sa===e&&(n=s,0<=i))break}!(n<0)&&n<i&&((o=t.wb).Vc(i),o.Ad(n,e))}null!==(e=e.Sa)&&Bo(t,-1,e)}}function Oo(t){1<arguments.length&&Nn.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),Nn.ec(this),hh=[],this.Pc=!0,this.QA=new so,this.QA.Mc(this),this.vd=17,this.Uq=!1,this.Gy="default";var i=this;null!==h.document.body?qo(this):h.document.addEventListener("DOMContentLoaded",function t(){h.document.removeEventListener("DOMContentLoaded",t,!1),qo(i)},!1),this.Yb=new Dn(zo),this.Jb=this.Eb=0,this.Fj=this.Kb=this.kf=this.zb=null,this.IE(),this.Un=null,this.HE(),this.kb=new Se(NaN,NaN).freeze(),this.Tb=1,this.cv=new Se(NaN,NaN).freeze(),this.dv=NaN,this.sv=1e-4,this.qv=100,this.me=new ft,this.ew=new Se(NaN,NaN).freeze(),this.Uu=new Ln(NaN,NaN,NaN,NaN).freeze(),this.Nv=new ut(0,0,0,0).freeze(),this.Ov=wo,this.Kv=this.Gv=null,this.Ml=fo,this.wn=d,this.Dk=fo,this.Rn=d,this.ev=this.bv=P,this.je=!0,this.Oq=!1,this.fg=new Q(ks),this.xk=new nt(Ru,Ln),this.Jn=!0,this.UA=250,this.pn=-1,this.xu=new ut(16,16,16,16).freeze(),this.Mu=this.Kf=!1,this.Nn=!0,this.qi=new Vi,this.Sc=new Vi,this.Nb=new Vi,this.Rg=this.ei=null,this.ys=!1,this.Ux=this.Vx=null,Hr(this),this.mo=new Q(Lu),this.Uk=new Q(kf),this.eo=new Q(Ru),this.wb=new Q(Lh),this.iv=!0,this.$v=Mo,this.MB=!1,this.bw=yo,this.Qx=this.Sx=this.Qy=null,this.Gu="",this.uq="auto",this.ji=this.Hi=this.yi=this.vv=this.zi=this.Ai=this.Bi=this.ii=this.oi=this.fi=null,this.By=!1,this.tC={},this.Fv=0,this.Jf=[null,null],this.Mx=null,this.Rp=this.Tx=this.Ky=this.AC=this.Gi=!1,this.YB=!0,this.py=this.Kd=!1,this.Vd=null;var e=this;this.eC=function(t){if(t.ba===e.ba&&e.Qa){e.Qa=!1;try{var i=t.wc;""===t.gf&&i===It&&mr(e,t.object,t.propertyName)}finally{e.Qa=!0}}},this.fC=function(t){!function(i,t){if(t.ba===i.ba){var e,n=t.wc,o=t.propertyName;if(n===qt&&"S"===o[0])"StartingFirstTransaction"===o?((n=i.Za).Ne.each(function(t){t.Mc(i)}),n.Vf.each(function(t){t.Mc(i)}),n.Wf.each(function(t){t.Mc(i)}),i.Kd||i.Qg||(i.Mu=!0,i.Nn&&(i.Kf=!0))):"StartingUndo"===o||"StartingRedo"===o?((e=i.Na).cf&&!i.tb&&e.Zh(),i.Ba("ChangingSelection")):"StartedTransaction"!==o||(e=i.Na).cf&&!i.tb&&e.Zh();else if(i.Qa){i.Qa=!1;try{var r,s,a,h,l,u,f,c,d,p,y,g,v=t.gf;if(""!==v)if(n===It){if("linkFromKey"===v){var m,b=t.object,x=i.Pf(b);null!==x&&(m=t.newValue,N=i.Ye(m),x.T=N)}else if("linkToKey"===v)b=t.object,null!==(x=i.Pf(b))&&(m=t.newValue,N=i.Ye(m),x.Z=N);else if("linkFromPortId"===v){b=t.object,null!==(x=i.Pf(b))&&"string"==typeof(a=t.newValue)&&(x.wg=a)}else if("linkToPortId"===v)b=t.object,null!==(x=i.Pf(b))&&("string"==typeof(a=t.newValue)&&(x.qh=a));else if("nodeGroupKey"===v){var w,k,b=t.object,M=i.dh(b);null!==M&&(void 0!==(w=t.newValue)?(k=i.Ye(w),M.Sa=k instanceof kf?k:null):M.Sa=null)}else if("linkLabelKeys"===v){if(b=t.object,null!==(x=i.Pf(b))){var P=t.oldValue,T=t.newValue;if(Nn.isArray(P))for(var S=Nn.Va(P),C=0;C<S;C++){var N,j=Nn.Pa(P,C);null!==(N=i.Ye(j))&&(N.ee=null)}if(Nn.isArray(T))for(S=Nn.Va(T),C=0;C<S;C++)j=Nn.Pa(T,C),null!==(N=i.Ye(j))&&(N.ee=x)}}else{"nodeParentKey"===v?(u=t.object,h=i.Ye(t.newValue),null!==(f=i.Bw(u))&&(null!==(l=f.Yo())?null===h?i.remove(l):i.Qd?l.T=h:l.Z=h:Lr(i,h,f))):"parentLinkCategory"===v?(u=t.object,f=i.Bw(u),p=t.newValue,null===f||"string"!=typeof p||null!==(l=f.Yo())&&(l.gc=p)):"nodeCategory"===v?(b=t.object,c=i.dh(b),p=t.newValue,null!==c&&"string"==typeof p&&(c.gc=p)):"linkCategory"===v?(b=t.object,d=i.Pf(b),p=t.newValue,null!==d&&"string"==typeof p&&(d.gc=p)):"nodeDataArray"===v?(y=t.oldValue,Or(i,y),g=t.newValue,Tr(i,g)):"linkDataArray"===v&&(y=t.oldValue,Or(i,y),g=t.newValue,Ar(i,g))}i.Yh=!0}else n===Gt?(g=t.newValue,"nodeDataArray"===v&&Nn.Ta(g)?Sr(i,g):"linkDataArray"===v&&Nn.Ta(g)?Fr(i,g):"linkLabelKeys"===v&&ne(g)&&(x=i.Pf(t.object),N=i.Ye(g),null!==x&&null!==N&&(N.ee=x)),i.Yh=!0):n===Rt?(y=t.oldValue,"nodeDataArray"===v&&Nn.Ta(y)||"linkDataArray"===v&&Nn.Ta(y)?Er(i,y):"linkLabelKeys"===v&&ne(y)&&(null!==(N=i.Ye(y))&&(N.ee=null)),i.Yh=!0):n===qt&&("SourceChanged"===v?null!==t.object?mr(i,t.object,t.propertyName):(i.SI(),i.qF()):"ModelDisplaced"===v&&i.yl());else n===It?(r=t.propertyName,(b=t.object)===i.ba?"nodeKeyProperty"!==r&&"nodeCategoryProperty"!==r&&"linkFromKeyProperty"!==r&&"linkToKeyProperty"!==r&&"linkFromPortIdProperty"!==r&&"linkToPortIdProperty"!==r&&"linkLabelKeysProperty"!==r&&"nodeIsGroupProperty"!==r&&"nodeGroupKeyProperty"!==r&&"nodeParentKeyProperty"!==r&&"linkCategoryProperty"!==r||i.la.ib||i.yl():mr(i,b,r),i.Yh=!0):n===Gt||n===Rt?(function(t,i){var e=i.wc===Gt,n=e?i.zg:i.Bg,o=e?i.newValue:i.oldValue,r=t.Wl.ja(i.object);if(Array.isArray(r))for(var s=0;s<r.length;s++){var a,h,l=r[s];e?xa(l,o,n):(a=n)<0||(h=a,ba(l)&&h++,l.Le(h),wa(l,h,a))}}(i,t),i.Yh=!0):n===qt&&("FinishedUndo"!==o&&"FinishedRedo"!==o||(i.la.ti=!0,i.Ba("ChangedSelection"),ir(i),i.la.ti=!1),e=i.Na,"RolledBackTransaction"===o&&e.Zh(),i.Mu=!0,i.Uf(),0===i.la.rh&&ho(e),"CommittedTransaction"===o&&i.la.uy&&(i.Og=Math.min(i.Og,i.la.Ti-1)),(s=t.kE)&&(vr(i),i.Qw.clear()),!i.By&&s&&(i.By=!0,Nn.setTimeout(function(){i.Wa.standardMouseOver(),i.By=!1},10)))}finally{i.Qa=!0}}}}(e,t)},this.YC=!0,this.Og=-2,this.ki=new nt(Object,Lh),this.wk=new nt(Object,Ru),this.Wl=new nt(Object,Array),this.no=new nt("string",Array),this.sC=new Dn(oh),this.si=!1,this.ik=this.hk=this.mu=this.Qe=!0,this.ou=this.nu=!1,this.tu=this.ru=this.qk=this.pk=this.ok=this.nk=this.lk=this.mk=this.kk=this.qu=this.sk=this.jk=this.rk=!0,this.Tl=this.VB=!1,this.su=this.pu=this.$u=this.Zu=!0,this.Qv=this.Mv=16,this.Hy=this.Lv=!1,this.cs=this.Pv=null,this.Iy=this.Jy=0,this.Se=new ut(5).freeze(),this.Sv=new Q(Lh).freeze(),this.rv=999999999,this.av=new Q(Lh).freeze(),this.Ek=this.Rl=this.qj=!0,this.Bk=this.pj=!1,this.Ud=null,this.vu=!0,this.Qg=!1,this.DF=new Q(Ru),this.KB=new Q(lf),this.td=null,this.kC=1,this.iy=!1,this.DC=0,this.XC=new Ln(NaN,NaN,NaN,NaN).freeze(),this.Nu=new Ln(NaN,NaN,NaN,NaN).freeze(),this.Cv=new Q(as),Go(this),this.nv=this.Wu=this.wv=this.qB=this.pB=this.rB=this.wj=this.zk=this.Ci=null,Eo(this),this.jd=null,this.Vu=!1,this.zn=null,this.Za=new no,this.Za.initializeStandardTools(),this.Wa=this.$s=this.Za,this.nb=new Ce,this.ba=new pe,this.Gi=!0,this.Pb=new Sf,this.Gi=!1,this.CB=this.Xx=null,this.rd=1,this.Mj=null,this.Ck=new os,void 0!==t&&rs(this,t),this.Yl=1,this.Zl=0,this.$B=new Se,this.UC=500,this.wu=new Se,this.qs=null,this.Pc=this.Fk=!1}function Eo(t){t.Ci=new nt("string",Lh);var i=new Lu,e=new qa;e.bind(new be("text","",ce)),i.add(e),t.rB=i,t.Ci.add("",i),i=new Lu,(e=new qa).stroke="brown",e.bind(new be("text","",ce)),i.add(e),t.Ci.add("Comment",i),(i=new Lu).zl=!1,i.mD=!1,(e=new ja).Ab="Ellipse",e.fill="black",e.stroke=null,e.xa=new st(3,3).Ea(),i.add(e),t.Ci.add("LinkLabel",i),t.zk=new nt("string",kf),(i=new kf).lA="GROUPPANEL",i.type=Zs,(e=new qa).font="bold 12pt sans-serif",e.bind(new be("text","",ce)),i.add(e),(e=new sa($s)).name="GROUPPANEL";var n=new ja;n.Ab="Rectangle",n.fill="rgba(128,128,128,0.2)",n.stroke="black",e.add(n),(n=new Tf).padding=new ut(5,5,5,5).Ea(),e.add(n),i.add(e),t.pB=i,t.zk.add("",i),t.wj=new nt("string",Ru),i=new Ru,(e=new ja).Rf=!0,i.add(e),(e=new ja).Lp="Standard",e.fill="black",e.stroke=null,e.lb=0,i.add(e),t.qB=i,t.wj.add("",i),i=new Ru,(e=new ja).Rf=!0,e.stroke="brown",i.add(e),t.wj.add("Comment",i),(i=new Du).type=$s,(e=new ja).fill=null,e.stroke="dodgerblue",e.lb=3,i.add(e),(e=new Tf).margin=new ut(1.5,1.5,1.5,1.5).Ea(),i.add(e),t.wv=i,t.Wu=i,(i=new Du).type=ea,(e=new ja).Rf=!0,e.fill=null,e.stroke="dodgerblue",e.lb=3,i.add(e),t.nv=i}function qo(t){var i=Nn.createElement("p");i.style.width="100%",i.style.height="200px",i.style.boxSizing="content-box";var e=Nn.createElement("div");e.style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.style.boxSizing="content-box",e.appendChild(i),h.document.body.appendChild(e);var n=i.offsetWidth;e.style.overflow="scroll",n===(i=i.offsetWidth)&&(i=e.clientWidth),h.document.body.removeChild(e),0!==(e=n-i)||Nn.fE||(e=11),t.vd=e,(e=Nn.createElement("div")).dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",h.document.body.appendChild(e),n="reverse",0<e.scrollLeft?n="default":(e.scrollLeft=1,0===e.scrollLeft&&(n="negative")),h.document.body.removeChild(e),t.Gy=n}function Io(t){var i,e,n,o;null===t.zb||0!==(i=t.Kb).clientWidth&&0!==i.clientHeight&&(e=t.Bk?t.vd:0,n=t.pj?t.vd:0,o=t.rd,t.rd=t.computePixelRatio(),t.rd!==o&&(t.Oq=!0,t.ue()),i.clientWidth===t.Eb+e&&i.clientHeight===t.Jb+n||(t.Rl=!0,t.je=!0,null!==(i=t.Pb)&&i.Lw&&t.al===fo&&i.H(),t.Kd||t.ue()))}function Go(t){var i=new zo;i.name="Background",t.Ns(i),(i=new zo).name="",t.Ns(i),(i=new zo).name="Foreground",t.Ns(i),(i=new zo).name="Adornment",i.Gc=!0,t.Ns(i),(i=new zo).name="Tool",i.Gc=!0,i.bE=!0,t.Ns(i),(i=new zo).name="Grid",i.nf=!1,i.Gg=!1,i.Gc=!0,t.aG(i,t.dt("Background"))}function Ro(t){t.jd=new sa(na),t.jd.name="GRID";var i=new ja;i.Ab="LineH",i.stroke="lightgray",i.lb=.5,i.interval=1,t.jd.add(i),(i=new ja).Ab="LineH",i.stroke="gray",i.lb=.5,i.interval=5,t.jd.add(i),(i=new ja).Ab="LineH",i.stroke="gray",i.lb=1,i.interval=10,t.jd.add(i),(i=new ja).Ab="LineV",i.stroke="lightgray",i.lb=.5,i.interval=1,t.jd.add(i),(i=new ja).Ab="LineV",i.stroke="gray",i.lb=.5,i.interval=5,t.jd.add(i),(i=new ja).Ab="LineV",i.stroke="gray",i.lb=1,i.interval=10,t.jd.add(i),(i=new Lh).add(t.jd),i.Tf="Grid",i.ln=0,i.Gz=!1,i.aE=!1,i.Gg=!1,i.Lz="GRID",t.add(i),t.wb.remove(i),t.jd.visible=!1}function Vo(t){if(t.OD.G()){var i=t.OD.copy();return i.fw(t.padding),i}for(var e=!0,n=t.Yb.n,o=n.length,r=0;r<o;r++){var s=n[r];if(s.visible&&(!s.Gc||s.bE))for(var a=(s=s.wb.n).length,h=0;h<a;h++){var l=s[h];l.Gz&&l.isVisible()&&((l=l.U).G()&&(e?(e=!1,i=l.copy()):i.ai(l)))}}return e&&(i=new Ln(0,0,0,0)),i.fw(t.padding),i}function Ho(t,i){var e,n,o,r,s,a,h;!i&&!t.Qg||t.Pc||null===t.zb||t.Na.cf||!t.Zd.G()||(t.Pc=!0,n=t.Ml,i&&t.Dk!==fo&&(n=t.Dk),e=n!==fo?Ko(t,n):t.scale,n=t.rb.copy(),o=t.Eb/e,r=t.Jb/e,s=null,(a=t.Na).pc&&(s=t.kb.copy()),t.position.Oa(),h=t.wn,i&&!h.cd()&&t.Rn.cd()&&(h=t.Rn),Uo(t,t.kb,t.Zd,o,r,h,i),t.position.freeze(),null!==s&&Lo(a,s,t.kb),t.scale=e,t.Pc=!1,(e=t.rb).Fc(n)||t.Lt(n,e))}function Ko(t,i){var e=t.nb.tw;if(null===t.zb)return e;if(t.qj&&Gr(t,t.$g()),!(o=t.Zd).G())return e;var n=o.width,o=o.height,r=t.Eb,s=t.Jb,a=r/n,h=s/o;return i===co?(e<(n=Math.min(h,a))&&(n=e),n<t.hh&&(n=t.hh),n>t.gh&&(n=t.gh),n):i===po?(e<(n=a<h?(s-t.vd)/o:(r-t.vd)/n)&&(n=e),n<t.hh&&(n=t.hh),n>t.gh&&(n=t.gh),n):t.scale}function Uo(t,i,e,n,o,r,s){var a=i.x,h=i.y;!s&&t.jA!==wo||(r.cd()&&(n>e.width&&(a=e.x+(r.x*e.width+r.offsetX)-(r.x*n-r.offsetX)),o>e.height&&(h=e.y+(r.y*e.height+r.offsetY)-(r.y*o-r.offsetY))),r=t.PE,s=n-e.width,n<e.width+r.left+r.right?(a=Math.min(a+n/2,e.right+Math.max(s,r.right)-n/2),a=Math.max(a,e.left-Math.max(s,r.left)+n/2),a-=n/2):a>e.left?a=e.left:a<e.right-n&&(a=e.right-n),n=o-e.height,o<e.height+r.top+r.bottom?(h=Math.min(h+o/2,e.bottom+Math.max(n,r.bottom)-o/2),h=Math.max(h,e.top-Math.max(n,r.top)+o/2),h-=o/2):h>e.top?h=e.top:h<e.bottom-o&&(h=e.bottom-o)),i.x=isFinite(a)?a:-t.padding.left,i.y=isFinite(h)?h:-t.padding.top,null!==t.AE&&(t=t.AE(t,i),i.x=t.x,i.y=t.y)}function Jo(t,i,e,n){for(void 0===e&&(e=null),void 0===n&&(n=null),ir(t),t=t.Yb.Um;t.next();){var o=t.value;if(o.visible&&!o.Gc&&null!==(o=o.qe(i,e,n)))return o}return null}function Yo(t,i,e,n,o){n.g=i,n.event=e,o?Qo(t,e,n):(n.hf=i.Nb.hf,n.ca=i.Nb.ca),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),n.od=t,n.button=e.button,e.buttons&&(n.buttons=e.buttons),Nn.ak&&0===e.button&&e.ctrlKey&&(n.button=2),n.il=!1,n.up=!1,n.Ve=1,n.gl=0,n.zc=!1,n.bubbles=!1,n.timestamp=Date.now(),n.wt=!1,n.Ig=e.target.W?e.target.W:null,n.ye=null}function Wo(t,i,e,n,o){Qo(n.g=t,e,n),n.od=0,n.button=0,n.buttons=1,n.il=!0,n.up=!1,n.Ve=1,n.gl=0,n.zc=!1,n.bubbles=!0,n.event=i,n.timestamp=Date.now(),n.wt=o,n.Ig=i.target.W?i.target.W:null,n.ye=null,t.qi=n.copy(),yn=null}function Xo(t,i,e,n,o){var r=null;n.g=t,null!==e?(r=(r=h.document.elementFromPoint(e.clientX,e.clientY))&&r.W?r.W:(e=i.changedTouches[0],t),n.Ig=r,Qo(t,e,n)):null!==t.Sc?(n.ca=t.Sc.ca,n.hf=t.Sc.hf,n.Ig=t.Sc.Ig):null!==t.qi&&(n.ca=t.qi.ca,n.hf=t.qi.hf,n.Ig=t.qi.Ig),n.od=0,n.button=0,n.buttons=1,n.il=!1,n.up=!1,n.Ve=1,n.gl=0,n.zc=!1,n.bubbles=!1,n.event=i,n.timestamp=Date.now(),n.wt=o,n.ye=null}function Zo(t,i){return!!t.bubbles||(void 0!==i.stopPropagation&&i.stopPropagation(),(void 0===i.touches||i.touches.length<2)&&i.preventDefault(),!(i.cancelBubble=!0))}function Qo(t,i,e){var n=t.zb,o=t.Eb,r=t.Jb,s=0,a=0;null!==n&&(n=n.getBoundingClientRect(),s=i.clientX-o/n.width*n.left,a=i.clientY-r/n.height*n.top),e.hf.m(s,a),null!==t.me?(i=Nn.Mb(s,a),t.me.Wh(i),e.ca.assign(i),Nn.v(i)):e.ca.m(s,a)}function $o(t){t.Kd||ir(t),t.qj&&Gr(t,t.$g())}function _o(t,i){t.Na.cf||t.Pc||!t.Rl||cr(t)||(i&&ir(t),Ho(t,!1))}function tr(t){if(!t.Kd&&(t.Kf=!1,null!==t.Kb)){t.Kd=!0;var i=t.Na,e=t.sC;if(!i.Xn&&0!==e.length){for(var n=e.n,o=n.length,r=0;r<o;r++){var s=n[r];Hs(s,!1),s.P()}e.clear()}0<(e=t.KB).count&&(e.each(function(t){t.BA()}),e.clear()),n=e=!1,i.cf&&(n=!0,e=t.tb,t.tb=!0),i.pc||Io(t),_o(t,!1),null!==t.jd&&(t.jd.visible&&!t.Vu&&(yr(t),t.Vu=!0),!t.jd.visible&&t.Vu&&(t.Vu=!1)),ir(t),o=!1,t.Qg&&!t.vu||(t.Qg?Vr(t,!t.Mu):(t.Qb("Initial Layout"),!1===i.isEnabled&&i.Zh(),Vr(t,!1)),o=!0),t.Mu=!1,ir(t),t.Ky||i.cf||$o(t),_o(t,!0),o&&(t.Qg||function(t){var i=t.Yb.n;{var e,n;t.yf(i,i.length,t),t.Dk!==fo?t.scale=Ko(t,t.Dk):t.Ml!==fo?t.scale=Ko(t,t.Ml):(i=t.jH,isFinite(i)&&0<i&&(t.scale=i)),(i=t.iH).G()?t.position=i:((i=Nn.L()).Yt(t.Zd,t.hH),e=t.rb,e=Nn.gk(0,0,e.width,e.height),(n=Nn.L()).Yt(e,t.kH),n.m(i.x-n.x,i.y-n.y),t.position=n,Nn.Vb(e),Nn.v(n),Nn.v(i),_o(t,!0),Ho(t,!0))}t.Ba("InitialLayoutCompleted"),yr(t)}(t),t.Ba("LayoutCompleted")),ir(t),o&&!t.Qg&&(t.Qg=!0,t.wd("Initial Layout"),t.tb||t.la.clear(),Nn.setTimeout(function(){t.Yh=!1},1)),sr(t),ho(i),t.We(),n&&(t.tb=e),t.Kd=!1}}function ir(t){if((t.Kd||!t.Na.cf)&&0!==t.fg.count)for(var i=0;i<23;i++){var e=t.fg.i;if(null===e||0===t.fg.count)break;t.fg=new Q(ks),t.BA(e,t.fg)}}function er(t,i){for(var e=Nn.jb(),n=Nn.jb(),o=i.Ic;o.next();){var r=o.value;r.isVisible()&&(r instanceof kf?(Vs(r)||Ks(r)||Pu(r))&&er(t,r):r instanceof Ru?r.T===i||r.Z===i?n.push(r):e.push(r):(Ns(r,1/0,1/0),r.Ec()))}for(var o=e.length,s=0;s<o;s++)Ns(r=e[s],1/0,1/0),r.Ec();for(Nn.sa(e),Ns(i,1/0,1/0),i.Ec(),o=n.length,s=0;s<o;s++)Ns(r=n[s],1/0,1/0),r.Ec();Nn.sa(n)}function nr(t,i,e,n,o){if(null===t.Kb&&Nn.k("No div specified"),null===(a=t.zb)&&Nn.k("No canvas specified"),!t.Na.pc){var r=t.kf;if(t.je){lr(t);var s=t.rd;Nn.Sm?(a.width=a.width,Tt(r,!0)):(r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.Eb*s,t.Jb*s)),r.pt=!1,r.drawImage(t.Xx.xd,0<n?0:Math.round(-n),0<o?0:Math.round(-o)),o=t.kb;var a=t.Tb,h=Math.round(o.x*a)/a,l=Math.round(o.y*a)/a;for((n=t.me).reset(),1!==a&&n.scale(a),0===o.x&&0===o.y||n.translate(-h,-l),r.save(),r.beginPath(),o=e.length,a=0;a<o;a++)0!==(h=e[a]).width&&0!==h.height&&r.rect(Math.floor(h.x),Math.floor(h.y),Math.ceil(h.width),Math.ceil(h.height));for(r.clip(),r.setTransform(1,0,0,1,0,0),r.scale(s,s),r.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),o=(e=t.Yb.n).length,t.yf(e,o,t),rr(t,r),a=0;a<o;a++)!function(t,i,e,n){if(t.visible&&0!==t.Rc){1!==t.Rc&&(i.globalAlpha=t.Rc);var o=t.Bv;o.length=0;for(var r=e.scale,s=(t=t.wb.n).length,a=n.length,h=0;h<s;h++){var l,u,f=t[h];if(Cu(f)){if(f instanceof Ru)if((l=f).jc&&o.push(l),!1===l.Lf)continue;t:{u=l=Oh(f,f.U);for(var c=n,d=a,p=2/r,y=4/r,g=0;g<d;g++){var v=c[g];if(0!==v.width&&0!==v.height&&u.ZD(v.x-p,v.y-p,v.width+y,v.height+y)){u=!0;break t}}u=!1}u&&(1<l.width*r||1<l.height*r?f.We(i,e):Gh(f,i))}}i.globalAlpha=1}}(e[a],r,t,i);r.restore(),Tt(r,!0),t.Ck?t.Ck.Gl(t)&&t.Yx():t.Jq=function(){return new Se(0,0)},t.Ek=!1,t.je=!1,t.eA()}}}function or(a,h,t,i,e,n,o,r,l,s){null===a.Kb&&Nn.k("No div specified"),null===a.zb&&Nn.k("No canvas specified"),void 0===o&&(o=null),void 0===r&&(r=null),void 0===l&&(l=!1),void 0===s&&(s=!1),lr(a),Tt(a.kf,!0),hr(a),a.py=!0;var u=new Ln(n.x,n.y,i.width/e,i.height/e),f=u.copy();f.fw(t),yr(a,f),ir(a);var c,d,p=(f=a.Yb.n).length;if(a.yf(f,p,a,u),u=a.rd,h.setTransform(1,0,0,1,0,0),h.scale(u,u),h.clearRect(0,0,i.width,i.height),null!==r&&""!==r&&(h.fillStyle=r,h.fillRect(0,0,i.width,i.height)),(i=Nn.ph()).reset(),i.translate(t.left,t.top),i.scale(e),0===n.x&&0===n.y||i.translate(-n.x,-n.y),h.setTransform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),Nn.Ze(i),rr(a,h),null!==o){var y=new Q(ks);for((t=o.i).reset();t.next();)e=t.value,!1===s&&"Grid"===e.layer.name||null===e||y.add(e);t=function(t){var i=l;if(t.visible&&0!==t.Rc&&(void 0===i&&(i=!0),i||!t.Gc)){var e=(i=t.wb.n).length;if(0!==e){1!==t.Rc&&(h.globalAlpha=t.Rc),(t=t.Bv).length=0;for(var n=a.scale,o=0;o<e;o++){var r=i[o];if(Cu(r)&&y.contains(r)){if(r instanceof Ru){var s=r;if(s.jc&&t.push(s),!1===s.Lf)continue}1<(s=r.U).width*n||1<s.height*n?r.We(h,a):Gh(r,h)}}h.globalAlpha=1}}}}else{t=!l&&s?(c=a.mt.Y,d=c.layer,function(t){t===d?c.We(h,a):t.We(h,a,l,s)}):function(t){t.We(h,a,l,s)}}for(e=0;e<p;e++)t(f[e]);a.py=!1,a.Ck?a.Ck.Gl(a)&&a.Yx():a.Jq=function(){return new Se(0,0)},Tt(a.kf,!0),hr(a),a.yf(f,p,a),yr(a)}function rr(t,i){var e,n=t.Fj;null!==n&&(void 0!==n.imageSmoothingEnabled&&(e=!!n.imageSmoothingEnabled,i.pt=e,i.lK=e),null!=(n=n.defaultFont)&&(i.font=n))}function sr(t){if(0===t.la.rh&&0!==t.xk.count){for(;0<t.xk.count;){var i=t.xk;for(t.xk=new nt(Ru,Ln),i=i.i;i.next();){var e=i.key;rf(e,i.value),e.re()}}t.pa()}}function ar(t){!1===t.Rl&&(t.Rl=!0)}function hr(t){!1===t.Ek&&(t.Ek=!0)}function lr(t){!1!==t.Oq&&(t.Oq=!1,ur(t,t.Eb,t.Jb))}function ur(t,i,e){var n=t.zb,o=i*(r=t.rd),r=e*r;n.width===o&&n.height===r||(n.width=o,n.height=r,n.style.width=i+"px",n.style.height=e+"px",t.je=!0,Tt(t.kf,!0))}function fr(t){var i=t.Eb,e=t.Jb;return t=t.zb.getBoundingClientRect(),Nn.Mb(i/t.width*t.left,e/t.height*t.top)}function cr(t){var i=t.zb;if(null===i)return 1;var e=t.Kb,n=t.Eb,o=t.Jb,r=t.XC.copy();if(!r.G())return 1;var s=!1,a=t.Bk?t.vd:0,h=t.pj?t.vd:0,l=e.clientWidth||n+a,e=e.clientHeight||o+h;l===n+a&&e===o+h||(t.Bk=!1,t.pj=!1,h=a=0,t.Eb=l,t.Jb=e,s=t.Oq=!0),t.Rl=!1;var u=t.rb,l=(b=t.Zd).width,e=b.height,f=u.width,c=u.height,d=b.x,p=u.x,y=b.right,g=u.right+a,v=b.y,m=u.y,b=b.bottom,u=u.bottom+h,x="1px",w="1px",k=t.scale;if(t.jA===wo&&l<f+a&&e<c+h||(t.Az&&t.ne&&(d+(x=1)<p&&(x=Math.max((p-d)*k+t.Eb,x)),g+1<y&&(x=Math.max((y-g)*k+t.Eb,x)),f+a+1<l&&(x=Math.max((l-f+a)*k+t.Eb,x)),x+="px"),t.Bz&&t.oe&&(v+(w=1)<m&&(w=Math.max((m-v)*k+t.Jb,w)),u+1<b&&(w=Math.max((b-u)*k+t.Jb,w)),c+h+1<e&&(w=Math.max((e-c+h)*k+t.Jb,w)),w+="px")),h="1px"!==w,(a="1px"!==x)&&h||!a&&!h||(h&&(g-=t.vd),a&&(u-=t.vd),t.Az&&t.ne&&(d+(x=1)<p&&(x=Math.max((p-d)*k+t.Eb,x)),g+1<y&&(x=Math.max((y-g)*k+t.Eb,x)),f+1<l&&(x=Math.max((l-f)*k+t.Eb,x)),x+="px"),h=(a="1px"!==x)!==t.pj?t.Jb-t.vd:t.Jb,t.Bz&&t.oe&&(v+(w=1)<m&&(w=Math.max((m-v)*k+h,w)),u+1<b&&(w=Math.max((b-u)*k+h,w)),c+1<e&&(w=Math.max((e-c)*k+h,w)),w+="px"),h="1px"!==w),t.Lv&&a===t.pj&&h===t.Bk)return n===t.Eb&&o===t.Jb||t.Uf(),0;if(a!==t.pj&&(t.Jb="1px"===x?t.Jb+t.vd:Math.max(t.Jb-t.vd,1),s=!0),t.pj=a,t.cs.style.width=x,h!==t.Bk&&(t.Eb="1px"===w?t.Eb+t.vd:Math.max(t.Eb-t.vd,1),s=!0,t.Uq&&(a=Nn.L(),h?(i.style.left=t.vd+"px",t.position=a.m(t.kb.x+t.vd/t.scale,t.kb.y)):(i.style.left="0px",t.position=a.m(t.kb.x-t.vd/t.scale,t.kb.y)),Nn.v(a))),t.Bk=h,t.cs.style.height=w,a=(i=t.Pv).scrollLeft,t.Az&&t.ne&&(f+1<l?a=(t.position.x-d)*k:d+1<p?a=i.scrollWidth-i.clientWidth:g+1<y&&(a=t.position.x*k)),t.Uq)switch(t.Gy){case"negative":a=-(i.scrollWidth-a-i.clientWidth);break;case"reverse":a=i.scrollWidth-a-i.clientWidth}return i.scrollLeft=a,t.Bz&&t.oe&&(c+1<e?i.scrollTop=(t.position.y-v)*k:v+1<m?i.scrollTop=i.scrollHeight-i.clientHeight:u+1<b&&(i.scrollTop=t.position.y*k)),s&&(t.Oq=!0),l=t.Eb,e=t.Jb,i.style.width=l+(t.Bk?t.vd:0)+"px",i.style.height=e+(t.pj?t.vd:0)+"px",t.Hy=!1,n===l&&o===e&&!t.Na.pc||(u=t.rb,t.Lt(r,u,s),0)}function dr(t,i,e){if(Nn.A(i,zo,Oo,"addLayer:layer"),null!==i.g&&i.g!==t&&Nn.k("Cannot share a Layer with another Diagram: "+i+" of "+i.g),null===e?null!==i.g&&Nn.k("Cannot add an existing Layer to this Diagram again: "+i):(Nn.A(e,zo,Oo,"addLayer:existingLayer"),e.g!==t&&Nn.k("Existing Layer must be in this Diagram: "+e+" not in "+e.g),i===e&&Nn.k("Cannot move a Layer before or after itself: "+i)),i.g!==t){i=i.name,e=(t=t.Yb).count;for(var n=0;n<e;n++)t.da(n).name===i&&Nn.k("Cannot add Layer with the name '"+i+"'; a Layer with the same name is already present in this Diagram.")}}function pr(t,i,e){var n,o,r,s,a,h;t.Pc||t.Kd?(t.Tb=e,(e=t.Na).pc&&Ao(e,i,t.Tb)):(t.Pc=!0,null===t.zb?t.Tb=e:(n=t.rb.copy(),o=t.Eb,r=t.Jb,n.width=t.Eb/i,n.height=t.Jb/i,s=t.Hl.x,a=t.Hl.y,h=t.vD,isNaN(s)&&(h.Ui()?h.cp(L)?s=0:h.cp(A)&&(s=o-1):s=h.cd()?h.x*(o-1):o/2),isNaN(a)&&(h.Ui()?h.cp(D)?a=0:h.cp(F)&&(a=r-1):a=h.cd()?h.y*(r-1):r/2),null!==t.OE&&(e=t.OE(t,e)),e<t.hh&&(e=t.hh),e>t.gh&&(e=t.gh),o=Nn.Mb(t.kb.x+s/i-s/e,t.kb.y+a/i-a/e),t.position=o,Nn.v(o),t.Tb=e,t.Lt(n,t.rb),t.Pc=!1,Ho(t,!1),(e=t.Na).pc&&Ao(e,i,t.Tb),t.pa(),ar(t)))}function yr(t,i){void 0===i&&(i=null);var e=t.jd;if(null!==e&&e.visible){for(var n=Nn.El(),o=1,r=1,s=e.za.n,a=s.length,h=0;h<a;h++){var l=s[h],u=l.interval;u<2||(fa(l.Ab)?r=r*u/Li(r,u):o=o*u/Li(o,u))}if(s=e.Ew,n.m(r*s.width,o*s.height),s=r=h=a=0,null!==i)a=i.width,h=i.height,r=i.x,s=i.y;else{for(o=Nn.ag(),r=t.rb,o.m(r.x,r.y,r.width,r.height),s=t.Cv.i;s.next();)(r=s.value.rb).G()&&Fn(o,r.x,r.y,r.width,r.height);if(!o.G())return void Nn.Vb(o);a=o.width,h=o.height,r=o.x,s=o.y,Nn.Vb(o)}e.width=a+2*n.width,e.height=h+2*n.height,o=Nn.L(),Di(r,s,0,0,n.width,n.height,o),o.offset(-n.width,-n.height),Nn.Zj(n),e.Y.location=o,Nn.v(o)}}function gr(t){if(0<(t=t.selection).count){for(var i=t.dc(),e=i.length,n=0;n<e;n++)i[n].hb=!1;t.Oa(),t.clear(),t.freeze()}}function vr(t){var i=t.Yh;t.YC!==i&&(t.YC=i,t.Ba("Modified"))}function mr(t,i,e){if("string"==typeof e){if(null!==(n=t.dh(i)))n.Hb(e),t.ba instanceof me&&(null!==(n=t.Pf(i))&&n.Hb(e));else{for(var n=null,o=t.Wl.i;o.next();){for(var r=o.value,s=0;s<r.length;s++){var a=r[s].NG(i);null!==a&&(null===n&&(n=Nn.jb()),n.push(a))}if(null!==n)break}if(null!==n){for(o=0;o<n.length;o++)n[o].Hb(e);Nn.sa(n)}}i===t.ba.bk&&t.qF(e)}}function br(t,i){var e=i.tj;if(Nn.isArray(e)){var n=t.Wl.ja(e);if(null===n)(n=[]).push(i),t.Wl.add(e,n);else{for(e=0;e<n.length;e++)if(n[e]===i)return;n.push(i)}}}function xr(t,i){var e=i.tj;if(Nn.isArray(e)){var n=t.Wl.ja(e);if(null!==n)for(var o=0;o<n.length;o++)if(n[o]===i){n.splice(o,1),0===n.length&&t.Wl.remove(e);break}}}function wr(t,i){for(var e=i.za.n,n=e.length,o=0;o<n;o++){var r=e[o];r instanceof oh&&kr(t,r)}}function kr(t,i){if(null!==(e=i.element)&&e instanceof HTMLImageElement){var e=e.src,n=t.no.ja(e);if(null===n)(n=[]).push(i),t.no.add(e,n);else{for(e=0;e<n.length;e++)if(n[e]===i)return;n.push(i)}}}function Mr(t,i){for(var e=i.za.n,n=e.length,o=0;o<n;o++){var r=e[o];r instanceof oh&&Pr(t,r)}}function Pr(t,i){if(null!==(e=i.element)&&e instanceof HTMLImageElement){var e=e.src,n=t.no.ja(e);if(null!==n)for(var o=0;o<n.length;o++)if(n[o]===i){n.splice(o,1),0===n.length&&t.no.remove(e);break}}}function Tr(t,i){if(null!==i){for(var e=t.ba,n=Nn.Va(i),o=0;o<n;o++){var r=Nn.Pa(i,o);e.He(r)?Sr(t,r,!1):e instanceof pe&&Fr(t,r)}if(e instanceof pe||e instanceof me){for(o=0;o<n;o++)r=Nn.Pa(i,o),e.He(r)&&Dr(t,r);if(e instanceof pe)for(e=t.links;e.next();)Vu(e.value)}Rr(t,!1)}}function Sr(t,i,e){var n,o,r;null==i||t.la.ib||t.ki.contains(i)||(void 0===e&&(e=!0),n=t.xz(i),null!==(o=jr(t,i,n))&&(ma(o),null!==(o=o.copy()))&&(r=t.we,t.we=!0,o.di=n,o.ie=i,t.add(o),o.ie=null,o.data=i,e&&Dr(t,i),t.we=r))}so.prototype.stopAnimation=so.prototype.Zh=function(){!0===this.pc&&(this.pc=!1,this.Kl&&this.W.ue()),this.rj&&this.Qe&&No(this)},Nn.defineProperty(so,{isEnabled:"isEnabled"},function(){return this.Qe},function(t){Nn.j(t,"boolean",so,"isEnabled"),this.Qe=t}),Nn.defineProperty(so,{duration:"duration"},function(){return this.Zx},function(t){Nn.j(t,"number",so,"duration"),t<1&&Nn.va(t,">= 1",so,"duration"),this.Zx=t}),Nn.u(so,{cf:"isAnimating"},function(){return this.rj}),Nn.u(so,{wH:"isTicking"},function(){return this.Xn}),Nn.defineProperty(so,{hE:"isInitial"},function(){return this.sj},function(t){Nn.j(t,"boolean",so,"isInitial"),this.sj=t}),Nn.ea("Layer",zo),zo.prototype.Mc=function(t){this.W=t},zo.prototype.toString=function(t){void 0===t&&(t=0);var i='Layer "'+this.name+'"';if(t<=0)return i;for(var e=0,n=0,o=0,r=0,s=0,a=this.wb.i;a.next();){var h=a.value;h instanceof kf?o++:h instanceof Lu?n++:h instanceof Ru?r++:h instanceof Du?s++:e++}if(a="",0<e&&(a+=e+" Parts "),0<n&&(a+=n+" Nodes "),0<o&&(a+=o+" Groups "),0<r&&(a+=r+" Links "),0<s&&(a+=s+" Adornments "),1<t)for(t=this.wb.i;t.next();)a+="\n    "+(e=t.value).toString(),null!==(n=e.data)&&Nn.ld(n)&&(a+=" #"+Nn.ld(n)),e instanceof Lu?a+=" "+ce(n):e instanceof Ru&&(a+=" "+ce(e.T)+" "+ce(e.Z));return i+" "+this.wb.count+": "+a},zo.prototype.findObjectAt=zo.prototype.qe=function(t,i,e){if(void 0===i&&(i=null),void 0===e&&(e=null),!1===this.Sk)return null;var n=!1;this.g.rb.Fa(t)&&(n=!0);for(var o=Nn.L(),r=this.wb.n,s=r.length;s--;){var a=r[s];if((!0!==n||!1!==Cu(a))&&a.isVisible()&&(o.assign(t),rt(o,a.Yg),null!==(a=a.qe(o,i,e))&&(null!==i&&(a=i(a)),null!==a&&(null===e||e(a)))))return Nn.v(o),a}return Nn.v(o),null},zo.prototype.findObjectsAt=zo.prototype.ft=function(t,i,e,n){if(void 0===i&&(i=null),void 0===e&&(e=null),n instanceof Dn||n instanceof Q||(n=new Q(ks)),!1===this.Sk)return n;var o=!1;this.g.rb.Fa(t)&&(o=!0);for(var r=Nn.L(),s=this.wb.n,a=s.length;a--;){var h=s[a];!0===o&&!1===Cu(h)||!h.isVisible()||(r.assign(t),rt(r,h.Yg),h.ft(r,i,e,n)&&(null!==i&&(h=i(h)),null===h||null!==e&&!e(h)||n.add(h)))}return Nn.v(r),n},zo.prototype.findObjectsIn=zo.prototype.Yj=function(t,i,e,n,o){if(void 0===i&&(i=null),void 0===e&&(e=null),void 0===n&&(n=!1),o instanceof Dn||o instanceof Q||(o=new Q(ks)),!1===this.Sk)return o;var r=!1;this.g.rb.Wj(t)&&(r=!0);for(var s=this.wb.n,a=s.length;a--;){var h=s[a];(!0!==r||!1!==Cu(h))&&h.isVisible()&&h.Yj(t,i,e,n,o)&&(null!==i&&(h=i(h)),null===h||null!==e&&!e(h)||o.add(h))}return o},zo.prototype.sz=function(t,i,e,n,o,r,s){if(!1===this.Sk)return o;for(var a=this.wb.n,h=a.length;h--;){var l=a[h];(!0!==s||!1!==Cu(l))&&r(l)&&l.isVisible()&&l.Yj(t,i,e,n,o)&&(null!==i&&(l=i(l)),null===l||null!==e&&!e(l)||o.add(l))}return o},zo.prototype.findObjectsNear=zo.prototype.Mm=function(t,i,e,n,o,r){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof Dn||o instanceof Q)&&(r=o),o=!0),r instanceof Dn||r instanceof Q||(r=new Q(ks)),!1===this.Sk)return r;var s=!1;this.g.rb.Fa(t)&&(s=!0);for(var a=Nn.L(),h=Nn.L(),l=this.wb.n,u=l.length;u--;){var f=l[u];!0===s&&!1===Cu(f)||!f.isVisible()||(a.assign(t),rt(a,f.Yg),h.m(t.x+i,t.y),rt(h,f.Yg),f.Mm(a,h,e,n,o,r)&&(null!==e&&(f=e(f)),null===f||null!==n&&!n(f)||r.add(f)))}return Nn.v(a),Nn.v(h),r},(t=zo.prototype).yf=function(t,i){if(this.visible)for(var e=void 0===i?t.rb:i,n=this.wb.n,o=n.length,r=0;r<o;r++){var s=n[r];if(s.aC=r,!(s instanceof Ru&&!1===s.Lf)){if(s instanceof Du){var a=s;if(null!==a.Mf)continue}if(lt(s.U,e))for(s.yf(!0),Ah(s),s=s.gw;s.next();)Ns(a=s.value,1/0,1/0),a.Ec(),a.yf(!0);else s.yf(!1),null!==s.gw&&0<s.gw.count&&Ah(s)}}},t.We=function(t,i,e){if(this.visible&&0!==this.Rc&&(void 0===e&&(e=!0),e||!this.Gc)){var n=(e=this.wb.n).length;if(0!==n){1!==this.Rc&&(t.globalAlpha=this.Rc);var o=this.Bv;o.length=0;for(var r=i.scale,s=0;s<n;s++){var a=e[s];if(Cu(a)){if(a instanceof Ru){var h=a;if(h.jc&&o.push(h),!1===h.Lf)continue}1<(h=a.U).width*r||1<h.height*r?a.We(t,i):Gh(a,t)}}t.globalAlpha=1}}},t.h=function(t,i,e,n,o){var r=this.g;null!==r&&r.Lc(It,t,this,i,e,n,o)},t.ep=function(t,i,e){var n=this.wb;if(i.lv=this,t>=n.count)t=n.count;else if(n.da(t)===i)return-1;return n.Ad(t,i),i.qt(e),null!==(n=this.g)&&(e?n.pa():n.ep(i)),Bo(this,t,i),t},t.Le=function(t,i,e){if(!e&&i.layer!==this&&null!==i.layer)return i.layer.Le(t,i,e);var n=this.wb;if(t<0||t>=n.length){if((t=n.indexOf(i))<0)return-1}else if(n.da(t)!==i&&(t=n.indexOf(i))<0)return-1;return i.rt(e),n.Vc(t),null!==(n=this.g)&&(e?n.pa():n.Le(i)),i.lv=null,t},t.clear=function(){for(var t=this.wb.dc(),i=t.length,e=0;e<i;e++)t[e].yf(!1),this.Le(-1,t[e],!1)},Nn.u(zo,{dk:"parts"},function(){return this.wb.i}),Nn.u(zo,{xK:"partsBackwards"},function(){return this.wb.Um}),Nn.u(zo,{g:"diagram"},function(){return this.W}),Nn.defineProperty(zo,{name:"name"},function(){return this.Ob},function(t){Nn.j(t,"string",zo,"name");var i=this.Ob;if(i!==t){var e=this.g;if(null!==e)for(""===i&&Nn.k("Cannot rename default Layer to: "+t),e=e.Ow;e.next();)e.value.name===t&&Nn.k("Layer.name is already present in this diagram: "+t);for(this.Ob=t,this.h("name",i,t),t=this.wb.i;t.next();)t.value.Tf=this.Ob}}),Nn.defineProperty(zo,{opacity:"opacity"},function(){return this.Rc},function(t){var i=this.Rc;i!==t&&(Nn.j(t,"number",zo,"opacity"),(t<0||1<t)&&Nn.va(t,"0 <= value <= 1",zo,"opacity"),this.Rc=t,this.h("opacity",i,t),null!==(t=this.g)&&t.pa())}),Nn.defineProperty(zo,{Gc:"isTemporary"},function(){return this.ty},function(t){var i=this.ty;i!==t&&(Nn.j(t,"boolean",zo,"isTemporary"),this.ty=t,this.h("isTemporary",i,t))}),Nn.defineProperty(zo,{visible:"visible"},function(){return this.Ty},function(t){var i=this.Ty;if(i!==t){for(Nn.j(t,"boolean",zo,"visible"),this.Ty=t,this.h("visible",i,t),i=this.wb.i;i.next();)i.value.nd(t);null!==(t=this.g)&&t.pa()}}),Nn.defineProperty(zo,{Gg:"pickable"},function(){return this.Sk},function(t){var i=this.Sk;i!==t&&(Nn.j(t,"boolean",zo,"pickable"),this.Sk=t,this.h("pickable",i,t))}),Nn.defineProperty(zo,{bE:"isBoundsIncluded"},function(){return this.ny},function(t){this.ny!==t&&(this.ny=t,null!==this.g&&this.g.qc())}),Nn.defineProperty(zo,{Uj:"allowCopy"},function(){return this.hk},function(t){var i=this.hk;i!==t&&(Nn.j(t,"boolean",zo,"allowCopy"),this.hk=t,this.h("allowCopy",i,t))}),Nn.defineProperty(zo,{zm:"allowDelete"},function(){return this.ik},function(t){var i=this.ik;i!==t&&(Nn.j(t,"boolean",zo,"allowDelete"),this.ik=t,this.h("allowDelete",i,t))}),Nn.defineProperty(zo,{kw:"allowTextEdit"},function(){return this.rk},function(t){var i=this.rk;i!==t&&(Nn.j(t,"boolean",zo,"allowTextEdit"),this.rk=t,this.h("allowTextEdit",i,t))}),Nn.defineProperty(zo,{hw:"allowGroup"},function(){return this.jk},function(t){var i=this.jk;i!==t&&(Nn.j(t,"boolean",zo,"allowGroup"),this.jk=t,this.h("allowGroup",i,t))}),Nn.defineProperty(zo,{lw:"allowUngroup"},function(){return this.sk},function(t){var i=this.sk;i!==t&&(Nn.j(t,"boolean",zo,"allowUngroup"),this.sk=t,this.h("allowUngroup",i,t))}),Nn.defineProperty(zo,{Ts:"allowLink"},function(){return this.kk},function(t){var i=this.kk;i!==t&&(Nn.j(t,"boolean",zo,"allowLink"),this.kk=t,this.h("allowLink",i,t))}),Nn.defineProperty(zo,{Am:"allowRelink"},function(){return this.mk},function(t){var i=this.mk;i!==t&&(Nn.j(t,"boolean",zo,"allowRelink"),this.mk=t,this.h("allowRelink",i,t))}),Nn.defineProperty(zo,{$k:"allowMove"},function(){return this.lk},function(t){var i=this.lk;i!==t&&(Nn.j(t,"boolean",zo,"allowMove"),this.lk=t,this.h("allowMove",i,t))}),Nn.defineProperty(zo,{iw:"allowReshape"},function(){return this.nk},function(t){var i=this.nk;i!==t&&(Nn.j(t,"boolean",zo,"allowReshape"),this.nk=t,this.h("allowReshape",i,t))}),Nn.defineProperty(zo,{Us:"allowResize"},function(){return this.ok},function(t){var i=this.ok;i!==t&&(Nn.j(t,"boolean",zo,"allowResize"),this.ok=t,this.h("allowResize",i,t))}),Nn.defineProperty(zo,{jw:"allowRotate"},function(){return this.pk},function(t){var i=this.pk;i!==t&&(Nn.j(t,"boolean",zo,"allowRotate"),this.pk=t,this.h("allowRotate",i,t))}),Nn.defineProperty(zo,{nf:"allowSelect"},function(){return this.qk},function(t){var i=this.qk;i!==t&&(Nn.j(t,"boolean",zo,"allowSelect"),this.qk=t,this.h("allowSelect",i,t))}),Nn.ea("Diagram",Oo),Oo.prototype.toString=function(t){void 0===t&&(t=0);var i="";if(this.id&&(i=this.id),this.hl&&this.hl.id&&(i=this.hl.id),i='Diagram "'+i+'"',t<=0)return i;for(var e=this.Yb.i;e.next();)i+="\n  "+e.value.toString(t-1);return i},Oo.fromDiv=function(t){var i=t;return"string"==typeof t&&(i=h.document.getElementById(t)),i instanceof HTMLDivElement&&i.W instanceof Oo?i.W:null},Nn.defineProperty(Oo,{hl:"div"},function(){return this.Kb},function(t){var i;null!==t&&Nn.A(t,HTMLDivElement,Oo,"div"),this.Kb!==t&&(hh=[],null!==(i=this.Kb)?(i.W=void 0,i.innerHTML="",null!==this.zb&&(this.zb.removeEventListener("touchstart",this.jF,!1),this.zb.removeEventListener("touchmove",this.iF,!1),this.zb.removeEventListener("touchend",this.hF,!1),this.zb.xd.W=null),null!==(i=this.Za)&&(i.Ne.each(function(t){t.cancelWaitAfter()}),i.Vf.each(function(t){t.cancelWaitAfter()}),i.Wf.each(function(t){t.cancelWaitAfter()})),i.cancelWaitAfter(),this.Wa.doCancel(),this.kf=this.zb=null,h.removeEventListener("resize",this.tF,!1),h.removeEventListener("mousemove",this.pp,!0),h.removeEventListener("mousedown",this.op,!0),h.removeEventListener("mouseup",this.rp,!0),h.removeEventListener("mousewheel",this.jh,!0),h.removeEventListener("DOMMouseScroll",this.jh,!0),h.removeEventListener("mouseout",this.qp,!0)):this.Qg=!1,(this.Kb=null)!==t&&((i=t.W)&&(i.hl=null),rs(this,t),this.$w()))}),Oo.prototype.computePixelRatio=function(){return null!==this.Mj?this.Mj:this.HF},Oo.prototype.doMouseMove=function(){this.Wa.doMouseMove()},Oo.prototype.doMouseDown=function(){this.Wa.doMouseDown()},Oo.prototype.doMouseUp=function(){this.Wa.doMouseUp()},Oo.prototype.doMouseWheel=function(){this.Wa.doMouseWheel()},Oo.prototype.doKeyDown=function(){this.Wa.doKeyDown()},Oo.prototype.doKeyUp=function(){this.Wa.doKeyUp()},Oo.prototype.doFocus=function(){this.focus()},Oo.prototype.focus=Oo.prototype.focus=function(){this.zb&&this.zb.focus()},Oo.prototype.JF=function(){this.W.isEnabled?this.W.HG(this):cr(this.W)},Oo.prototype.jC=function(t){this.W.isEnabled?(this.W.Hy=!0,this.W.Jy=t.target.scrollTop,this.W.Iy=t.target.scrollLeft):cr(this.W)},Oo.prototype.diagramScroll=Oo.prototype.HG=function(t){if(this.Hy&&null!==this.zb){this.Lv=!0;var i=this.Zd,e=this.rb,n=i.width,o=e.width,r=i.height,s=e.height,a=i.right,h=e.right,l=i.bottom,u=e.bottom,f=i.x,c=e.x,i=i.y,e=e.y,d=this.scale,p=t.scrollLeft;if(this.Uq)switch(this.Gy){case"negative":p=p+t.scrollWidth-t.clientWidth;break;case"reverse":p=t.scrollWidth-p-t.clientWidth}var y=p;o<n||s<r?(p=Nn.Mb(this.position.x,this.position.y),this.ne&&this.Iy!==y&&(p.x=y/d+f,this.Iy=y),this.oe&&this.Jy!==t.scrollTop&&(p.y=t.scrollTop/d+i,this.Jy=t.scrollTop),this.position=p,Nn.v(p),this.Rl=this.Lv=!1):(p=Nn.L(),t.NF&&this.ne&&(f<c&&(this.position=p.m(y+f,this.position.y)),h<a&&(this.position=p.m(-(this.Pv.scrollWidth-this.Eb)+y-this.Eb/d+a,this.position.y))),t.OF&&this.oe&&(i<e&&(this.position=p.m(this.position.x,t.scrollTop+i)),u<l&&(this.position=p.m(this.position.x,-(this.Pv.scrollHeight-this.Jb)+t.scrollTop-this.Jb/d+l))),Nn.v(p),hr(this),this.Rl=this.Lv=!1,i=this.Zd,e=this.rb,a=i.right,h=e.right,l=i.bottom,u=e.bottom,f=i.x,c=e.x,i=i.y,e=e.y,n<=o&&c<=f&&a<=h&&(this.cs.style.width="1px"),r<=s&&e<=i&&l<=u&&(this.cs.style.height="1px"))}},Oo.prototype.computeBounds=Oo.prototype.$g=function(){return 0<this.fg.count&&ir(this),Vo(this)},Oo.prototype.computePartsBounds=function(t){var i=null;for(t=t.i;t.next();){var e=t.value;e instanceof Ru||(e.sf(),null===i?i=e.U.copy():i.ai(e.U))}return null===i?new Ln(NaN,NaN,0,0):i},Oo.prototype.zoomToFit=Oo.prototype.zoomToFit=function(){this.scale=Ko(this,co)},Oo.prototype.zoomToRect=function(t,i){void 0===i&&(i=co);var e,n,o=t.width,r=t.height;0===o||0===r||isNaN(o)&&isNaN(r)||(n=1,i!==co&&i!==po||(n=isNaN(o)?this.rb.height*this.scale/r:isNaN(r)?this.rb.width*this.scale/o:(n=this.Eb,e=this.Jb,i===po?n/o<e/r?(e-(this.pj?this.vd:0))/r:(n-(this.Bk?this.vd:0))/o:Math.min(e/r,n/o))),this.scale=n,this.position=new Se(t.x,t.y))},Nn.defineProperty(Oo,{Ez:null},function(){return this.Pc},function(t){this.Pc=t}),Oo.prototype.alignDocument=function(t,i){this.qj&&Gr(this,this.$g());var e=this.Zd,n=this.rb;this.position=new Se(e.x+(t.x*e.width+t.offsetX)-(i.x*n.width-i.offsetX),e.y+(t.y*e.height+t.offsetY)-(i.y*n.height-i.offsetY))},Oo.prototype.findPartAt=Oo.prototype.gt=function(t,i){var e=i?Jo(this,t,function(t){return t.Y},function(t){return t.canSelect()}):Jo(this,t,function(t){return t.Y});return e instanceof Lh?e:null},Oo.prototype.findObjectAt=Oo.prototype.qe=function(t,i,e){void 0===i&&(i=null),void 0===e&&(e=null),ir(this);for(var n=this.Yb.Um;n.next();){var o=n.value;if(o.visible&&null!==(o=o.qe(t,i,e)))return o}return null},Oo.prototype.findObjectsAt=Oo.prototype.ft=function(t,i,e,n){void 0===i&&(i=null),void 0===e&&(e=null),n instanceof Dn||n instanceof Q||(n=new Q(ks)),ir(this);for(var o=this.Yb.Um;o.next();){var r=o.value;r.visible&&r.ft(t,i,e,n)}return n},Oo.prototype.findObjectsIn=Oo.prototype.Yj=function(t,i,e,n,o){void 0===i&&(i=null),void 0===e&&(e=null),void 0===n&&(n=!1),o instanceof Dn||o instanceof Q||(o=new Q(ks)),ir(this);for(var r=this.Yb.Um;r.next();){var s=r.value;s.visible&&s.Yj(t,i,e,n,o)}return o},Oo.prototype.sz=function(t,i,e,n,o,r){var s=new Q(ks);ir(this);for(var a=this.Yb.Um;a.next();){var h=a.value;h.visible&&h.sz(t,i,e,n,s,o,r)}return s},Oo.prototype.findObjectsNear=Oo.prototype.Mm=function(t,i,e,n,o,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof Dn||o instanceof Q)&&(r=o),o=!0),r instanceof Dn||r instanceof Q||(r=new Q(ks)),ir(this);for(var s=this.Yb.Um;s.next();){var a=s.value;a.visible&&a.Mm(t,i,e,n,o,r)}return r},Oo.prototype.acceptEvent=function(t){var i=this.Sc;return this.Sc=this.Nb,this.Nb=i,Yo(this,this,t,i,t instanceof MouseEvent),i},Oo.prototype.zH=function(t){if(!this.W.isEnabled)return!1;var i=this.W.Nb;switch(Yo(this.W,this.W,t,i,!1),i.key=String.fromCharCode(t.which),i.il=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return this.W.doKeyDown(),187!==t.which&&189!==t.which&&48!==t.which&&107!==t.which&&109!==t.which&&61!==t.which&&173!==t.which||!0!==t.ctrlKey?Zo(i,t):(t.cancelBubble=!0,t.preventDefault(),t.stopPropagation(),!1)},Oo.prototype.AH=function(t){if(!this.W.isEnabled)return!1;var i=this.W.Nb;switch(Yo(this.W,this.W,t,i,!1),i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 93:t.preventDefault()}return this.W.doKeyUp(),Zo(i,t)},Oo.prototype.Jq=function(t){if(null===(n=this.zb))return new Se(0,0);var i=this.Eb,e=this.Jb,n=n.getBoundingClientRect(),i=t.clientX-i/n.width*n.left;return t=t.clientY-e/n.height*n.top,null!==this.me?(rt(t=new Se(i,t),this.me),t):new Se(i,t)},Oo.prototype.invalidateDocumentBounds=Oo.prototype.qc=function(){this.qj||(this.qj=!0,this.ue(!0))},Oo.prototype.redraw=Oo.prototype.$w=function(){this.Pc||this.Kd||(this.pa(),ar(this),hr(this),this.qc(),this.Uf())},Oo.prototype.isUpdateRequested=function(){return this.Kf},Oo.prototype.delayInitialization=function(t){void 0===t&&(t=null);var i=this.Na,e=i.isEnabled;i.Zh(),i.isEnabled=!1,tr(this),this.Qg=!1,i.isEnabled=e,null!==t&&Nn.setTimeout(t,1)},Oo.prototype.requestUpdate=Oo.prototype.ue=function(t){var i;void 0===t&&(t=!1),!0===this.Kf||this.Pc||!1===t&&this.Kd||(this.Kf=!0,i=this,requestAnimationFrame(function(){i.Kf&&i.Uf()}))},Oo.prototype.maybeUpdate=Oo.prototype.Uf=function(){this.Nn&&!this.Kf||(this.Nn&&(this.Nn=!1),tr(this))},Nn.u(Oo,{Tm:null},function(){return this.Qg}),Oo.prototype.BA=function(t,i){for(t.reset();t.next();){var e=t.value;!e.Pd()||e instanceof kf||!e.isVisible()||(e.ul()?(Ns(e,1/0,1/0),e.Ec()):i.add(e))}for(t.reset();t.next();)(e=t.value)instanceof kf&&e.isVisible()&&er(this,e);for(t.reset();t.next();)(e=t.value)instanceof Ru&&e.isVisible()&&(e.ul()?(Ns(e,1/0,1/0),e.Ec()):i.add(e));for(t.reset();t.next();)(e=t.value)instanceof Du&&e.isVisible()&&(e.ul()?(Ns(e,1/0,1/0),e.Ec()):i.add(e))},Oo.prototype.yf=function(t,i,e,n){var o=this.Na;if(this.Ek||o.cf)for(o=0;o<i;o++)t[o].yf(e,n)},Oo.prototype.We=function(l,u){void 0===l&&(l=this.kf),void 0===u&&(u=null),null===this.Kb&&Nn.k("No div specified");var t=this.zb;if(null===t&&Nn.k("No canvas specified"),!(o=this.Na).pc&&(lr(this),"0"!==this.Kb.style.opacity)){var i=l!==this.kf,e=this.Yb.n,n=e.length,f=this;if(this.yf(e,n,f),i)Tt(l,!0),hr(this);else if(!this.je&&null===u&&!o.rj)return;var o,n=this.kb,r=this.Tb,s=Math.round(n.x*r)/r,a=Math.round(n.y*r)/r;for((o=this.me).reset(),1!==r&&o.scale(r),0===n.x&&0===n.y||o.translate(-s,-a),r=this.rd,Nn.Sm?(t.width=t.width,Tt(l,!0),l.scale(r,r)):(l.setTransform(1,0,0,1,0,0),l.scale(r,r),l.clearRect(0,0,this.Eb,this.Jb)),l.setTransform(1,0,0,1,0,0),l.scale(r,r),l.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),t=null!==u?function(t){var i=l,e=u;if(t.visible&&0!==t.Rc){var n=t.wb.n,o=n.length;if(0!==o){1!==t.Rc&&(i.globalAlpha=t.Rc),(t=t.Bv).length=0;for(var r=f.scale,s=0;s<o;s++){var a=n[s];if(Cu(a)&&!e.contains(a)){if(a instanceof Ru){var h=a;if(h.jc&&t.push(h),!1===h.Lf)continue}1<(h=a.U).width*r||1<h.height*r?a.We(i,f):Gh(a,i)}}i.globalAlpha=1}}}:function(t){t.We(l,f)},rr(this,l),n=e.length,s=0;s<n;s++)l.setTransform(1,0,0,1,0,0),l.scale(r,r),l.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),t(e[s]);this.Ck?this.Ck.Gl(this)&&this.Yx():this.Jq=function(){return new Se(0,0)},i?(Tt(this.kf,!0),hr(this)):this.je=this.Ek=!1}},Oo.prototype.getRenderingHint=Oo.prototype.Si=function(t){return this.Fj[t]},Oo.prototype.setRenderingHint=Oo.prototype.zI=function(t,i){this.Fj[t]=i,this.$w()},Oo.prototype.resetRenderingHints=Oo.prototype.IE=function(){this.Fj=new y,this.Fj.drawShadows=!0,this.Fj.textGreeking=!0,this.Fj.viewportOptimizations=!Nn.fE,this.Fj.temporaryPixelRatio=!0,this.Fj.pictureRatioOptimization=!0},Oo.prototype.getInputOption=Oo.prototype.ap=function(t){return this.Un[t]},Oo.prototype.setInputOption=function(t,i){this.Un[t]=i},Oo.prototype.resetInputOptions=Oo.prototype.HE=function(){this.Un=new y,this.Un.extraTouchArea=10,this.Un.extraTouchThreshold=10,this.Un.hasGestureZoom=!0},Oo.prototype.setProperties=function(t){Nn.Xt(this,t)},Oo.prototype.pa=function(t){var i;for(void 0===t&&(t=null),null===t?(this.je=!0,this.ue()):(i=this.rb,null!==t&&t.G()&&i.xg(t)&&(this.je=!0,this.ue())),i=this.Cv.i;i.next();)i.value.pa(t)},Oo.prototype.$D=function(t,i){var e,n,o,r,s,a,h,l,u,f,c,d,p,y,g,v,m;!0!==this.je&&(e=(this.je=!0)===this.Si("temporaryPixelRatio"),!0===this.Si("viewportOptimizations")&&this.jA!==ko&&this.PE.xw(0,0,0,0)&&i.width===t.width&&i.height===t.height?(a=this.scale,n=Nn.ag(),h=Math.max(t.x,i.x),r=Math.max(t.y,i.y),s=Math.min(t.x+t.width,i.x+i.width),l=Math.min(t.y+t.height,i.y+i.height),n.x=h,n.y=r,n.width=Math.max(0,s-h)*a,n.height=Math.max(0,l-r)*a,0<n.width&&0<n.height?this.Kd||(this.Kf=!1,null===this.Kb)||(this.Kd=!0,sr(this),this.Zd.G()||Gr(this,this.$g()),null!==(c=this.zb)&&(o=this.rd,r=this.Eb*o,s=this.Jb*o,h=this.scale*o,a=Math.round(Math.round(i.x*h)-Math.round(t.x*h)),h=Math.round(Math.round(i.y*h)-Math.round(t.y*h)),l=this.Xx,d=this.CB,l.width!==r&&(l.width=r),l.height!==s&&(l.height=s),d.clearRect(0,0,r,s),l=190*this.rd,u=70*this.rd,g=Math.max(a,0),f=Math.max(h,0),p=Math.floor(r-g),v=Math.floor(s-f),d.pt=!1,d.drawImage(c.xd,g,f,p,v,0,0,p,v),this.Ck.Gl(this)&&d.clearRect(0,0,l,u),c=Nn.jb(),d=Nn.jb(),v=Math.abs(a),p=Math.abs(h),y=0===g?0:r-v,g=Nn.Mb(y,0),v=Nn.Mb(v+y,s),d.push(new Ln(Math.min(g.x,v.x),Math.min(g.y,v.y),Math.abs(g.x-v.x),Math.abs(g.y-v.y))),(m=this.me).reset(),m.scale(o,o),1!==this.Tb&&m.scale(this.Tb),(0!==(o=this.kb).x||0!==o.y)&&isFinite(o.x)&&isFinite(o.y)&&m.translate(-o.x,-o.y),rt(g,m),rt(v,m),c.push(new Ln(Math.min(g.x,v.x),Math.min(g.y,v.y),Math.abs(g.x-v.x),Math.abs(g.y-v.y))),y=0===f?0:s-p,g.m(0,y),v.m(r,p+y),d.push(new Ln(Math.min(g.x,v.x),Math.min(g.y,v.y),Math.abs(g.x-v.x),Math.abs(g.y-v.y))),rt(g,m),rt(v,m),c.push(new Ln(Math.min(g.x,v.x),Math.min(g.y,v.y),Math.abs(g.x-v.x),Math.abs(g.y-v.y))),this.Ck.Gl(this)&&(r=0<a?0:-a,s=0<h?0:-h,g.m(r,s),v.m(l+r,u+s),d.push(new Ln(Math.min(g.x,v.x),Math.min(g.y,v.y),Math.abs(g.x-v.x),Math.abs(g.y-v.y))),rt(g,m),rt(v,m),c.push(new Ln(Math.min(g.x,v.x),Math.min(g.y,v.y),Math.abs(g.x-v.x),Math.abs(g.y-v.y)))),Nn.v(g),Nn.v(v),_o(this,!1),nr(this,c,d,a,h),Nn.sa(c),Nn.sa(d),this.Kd=!1)):this.Uf(),Nn.Vb(n),e&&(this.Mj=1,this.Uf(),this.Mj=null,this.eA())):e?(this.Mj=1,this.Uf(),this.Mj=null,this.eA()):this.Uf())},Oo.prototype.add=Oo.prototype.add=function(t){Nn.A(t,Lh,Oo,"add:part");var i,e=t.g;e!==this&&(null!==e&&Nn.k("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),this.Rp&&(t.Ik="Tool"),i=t.Tf,null===(e=this.dt(i))&&(e=this.dt("")),null===e&&Nn.k('Cannot add a Part when unable find a Layer named "'+i+'" and there is no default Layer'),t.layer!==e&&(0<=(i=e.ep(99999999,t,t.g===this))&&this.Lc(Gt,"parts",e,null,t,null,i),e.Gc||this.qc(),t.H(Th),null!==(i=t.zt)&&i(t,null,e)))},Oo.prototype.ep=function(t){var i;t instanceof Lu?(this.mo.add(t),t instanceof kf&&(null===(i=t.Sa)?this.Uk.add(t):i.jo.add(t),null!==(i=t.Pb)&&(i.g=this))):t instanceof Ru?this.eo.add(t):t instanceof Du||this.wb.add(t);var e=this;da(t,function(t){wr(e,t)}),t.Gb&&t.P(),null!==(i=t.data)&&(t instanceof Du||(t instanceof Ru?this.wk.add(i,t):this.ki.add(i,t)),da(t,function(t){br(e,t)})),!0!==Ks(t)&&!0!==Pu(t)||this.fg.add(t),Ih(t,!0,this),ju(t)?(t.U.G()&&this.pa(Oh(t,t.U)),this.qc()):t.isVisible()&&t.U.G()&&this.pa(Oh(t,t.U)),this.ue()},Oo.prototype.Le=function(t){var i;t.Vs(),t instanceof Lu?(this.mo.remove(t),t instanceof kf&&(null===(i=t.Sa)?this.Uk.remove(t):i.jo.remove(t),null!==(i=t.Pb)&&(i.g=null))):t instanceof Ru?this.eo.remove(t):t instanceof Du||this.wb.remove(t);var e=this;da(t,function(t){Mr(e,t)}),null!==(i=t.data)&&(t instanceof Du||(t instanceof Ru?this.wk.remove(i):this.ki.remove(i)),da(t,function(t){xr(e,t)})),this.fg.remove(t),ju(t)?(t.U.G()&&this.pa(Oh(t,t.U)),this.qc()):t.isVisible()&&t.U.G()&&this.pa(Oh(t,t.U)),this.ue()},Oo.prototype.remove=Oo.prototype.remove=function(t){Nn.A(t,Lh,Oo,"remove:part"),t.hb=!1,t.fh=!1;var i,e=t.layer;null!==e&&e.g===this&&(t.H(Sh),t.Lm(),0<=(i=e.Le(-1,t,!1))&&this.Lc(Rt,"parts",e,t,null,i,null),null!==(i=t.zt)&&i(t,e,null))},Oo.prototype.removeParts=Oo.prototype.gA=function(t,i){if(Nn.isArray(t))for(var e=Nn.Va(t),n=0;n<e;n++){var o=Nn.Pa(t,n);i&&!o.canDelete()||this.remove(o)}else for((o=new Q(Lh)).Tc(t),e=o.i;e.next();)o=e.value,i&&!o.canDelete()||this.remove(o)},Oo.prototype.copyParts=Oo.prototype.Ro=function(t,i,e){return this.nb.Ro(t,i,e)},Oo.prototype.moveParts=Oo.prototype.moveParts=function(t,i,e){Nn.A(i,Se,Oo,"moveParts:offset");var n=this.Za;if(null!==n){null===(n=n.$d)&&(n=new ze).Mc(this);var o=new nt(Lh,Object);if(null!==t)t=t.i;else{for(t=this.dk;t.next();)Ee(n,o,t.value,e);for(t=this.Ag;t.next();)Ee(n,o,t.value,e);t=this.links}for(;t.next();)Ee(n,o,t.value,e);n.moveParts(o,i,e)}},Oo.prototype.addLayer=Oo.prototype.Ns=function(t){dr(this,t,null),t.Mc(this);var i=this.Yb,e=i.count-1;if(!t.Gc)for(;0<=e&&i.da(e).Gc;)e--;i.Ad(e+1,t),null!==this.Vd&&this.Lc(Gt,"layers",this,null,t,null,e+1),this.pa(),this.qc()},Oo.prototype.addLayerBefore=Oo.prototype.aG=function(t,i){dr(this,t,i),t.Mc(this);var e=this.Yb,n=e.indexOf(t);0<=n&&(e.remove(t),null!==this.Vd&&this.Lc(Rt,"layers",this,t,null,n,null));for(var o=e.count,r=0;r<o;r++)if(e.da(r)===i){e.Ad(r,t);break}null!==this.Vd&&this.Lc(Gt,"layers",this,null,t,null,r),this.pa(),n<0&&this.qc()},Oo.prototype.addLayerAfter=function(t,i){dr(this,t,i),t.Mc(this);var e=this.Yb,n=e.indexOf(t);0<=n&&(e.remove(t),null!==this.Vd&&this.Lc(Rt,"layers",this,t,null,n,null));for(var o=e.count,r=0;r<o;r++)if(e.da(r)===i){e.Ad(r+1,t);break}null!==this.Vd&&this.Lc(Gt,"layers",this,null,t,null,r+1),this.pa(),n<0&&this.qc()},Oo.prototype.removeLayer=function(t){if(Nn.A(t,zo,Oo,"removeLayer:layer"),t.g!==this&&Nn.k("Cannot remove a Layer from another Diagram: "+t+" of "+t.g),""!==t.name){var i=this.Yb,e=i.indexOf(t);if(i.remove(t)){for(i=t.wb.copy().i;i.next();){var n=i.value,o=n.Tf;n.Tf=o!==t.name?o:""}null!==this.Vd&&this.Lc(Rt,"layers",this,t,null,e,null),this.pa(),this.qc()}}},Oo.prototype.findLayer=Oo.prototype.dt=function(t){for(var i=this.Ow;i.next();){var e=i.value;if(e.name===t)return e}return null},Oo.prototype.addModelChangedListener=Oo.prototype.cG=function(t){Nn.j(t,"function",Oo,"addModelChangedListener:listener"),null===this.Rg&&(this.Rg=new Dn("function")),this.Rg.add(t),this.ba.ym(t)},Oo.prototype.removeModelChangedListener=function(t){Nn.j(t,"function",Oo,"removeModelChangedListener:listener"),null!==this.Rg&&(this.Rg.remove(t),0===this.Rg.count&&(this.Rg=null)),this.ba.Ot(t)},Oo.prototype.addChangedListener=Oo.prototype.ym=function(t){Nn.j(t,"function",Oo,"addChangedListener:listener"),null===this.ei&&(this.ei=new Dn("function")),this.ei.add(t)},Oo.prototype.removeChangedListener=Oo.prototype.Ot=function(t){Nn.j(t,"function",Oo,"removeChangedListener:listener"),null!==this.ei&&(this.ei.remove(t),0===this.ei.count&&(this.ei=null))},Oo.prototype.nw=function(t){if(this.tb||this.la.WD(t),t.wc!==qt&&(this.Yh=!0),null!==this.ei){var i=this.ei,e=i.length;if(1===e)(i=i.da(0))(t);else if(0!==e)for(var n=i.dc(),o=0;o<e;o++)(i=n[o])(t)}},Oo.prototype.raiseChangedEvent=Oo.prototype.Lc=function(t,i,e,n,o,r,s){void 0===r&&(r=null),void 0===s&&(s=null);var a=new Ki;a.g=this,a.wc=t,a.propertyName=i,a.object=e,a.oldValue=n,a.Bg=r,a.newValue=o,a.zg=s,this.nw(a)},Oo.prototype.raiseChanged=Oo.prototype.h=function(t,i,e,n,o){this.Lc(It,t,this,i,e,n,o)},Nn.u(Oo,{Na:"animationManager"},function(){return this.QA}),Nn.u(Oo,{la:"undoManager"},function(){return this.Vd.la}),Nn.defineProperty(Oo,{tb:"skipsUndoManager"},function(){return this.Gi},function(t){Nn.j(t,"boolean",Oo,"skipsUndoManager"),this.Gi=t,this.Vd.Gi=t}),Nn.defineProperty(Oo,{mz:"delaysLayout"},function(){return this.Tx},function(t){this.Tx=t}),Oo.prototype.Dm=function(t,i){if(null!==t&&t.g===this){var e=this.we;try{this.we=!0;var n,o,r,s,a,h,l,u,f,c,d,p,y=t.wc;y===It?(h=t.object,n=t.propertyName,o=t.ja(i),Nn.Ka(h,n,o),h instanceof ks&&null!==(c=h.Y)&&c.Od(),this.Yh=!0):y===Gt?(s=t.object,a=t.zg,h=t.newValue,s instanceof sa?"number"==typeof a&&h instanceof ks?(r=h,u=s,i?u.Le(a):u.Ad(a,r),null!==(c=s.Y)&&c.Od()):"number"==typeof a&&h instanceof Ca&&(l=h,u=s,i?l.ce?u.GE(a):u.CE(a):(l.ce?u.zd(l.index):u.yd(l.index)).Zs(l)):s instanceof zo?(f=!0===t.Bg,"number"==typeof a&&h instanceof Lh&&(c=h,d=s,i?(c.Od(),d.Le(f?a:-1,c,f)):d.ep(a,c,f))):s instanceof Oo?"number"==typeof a&&h instanceof zo&&(p=h,i?this.Yb.Vc(a):((y=p).Mc(this),this.Yb.Ad(a,y))):Nn.k("unknown ChangedEvent.Insert object: "+t.toString()),this.Yh=!0):y===Rt?(s=t.object,a=t.Bg,h=t.oldValue,s instanceof sa?"number"==typeof a&&h instanceof ks?(u=s,i?u.Ad(a,h):u.Le(a)):"number"==typeof a&&h instanceof Ca&&(l=h,u=s,i?(l.ce?u.zd(l.index):u.yd(l.index)).Zs(l):l.ce?u.GE(a):u.CE(a)):s instanceof zo?(f=!0===t.zg,"number"==typeof a&&h instanceof Lh&&(c=h,d=s,i?d.ep(a,c,f):(c.Od(),d.Le(f?a:-1,c,f)))):s instanceof Oo?"number"==typeof a&&h instanceof zo&&(p=h,i?((y=p).Mc(this),this.Yb.Ad(a,y)):this.Yb.Vc(a)):Nn.k("unknown ChangedEvent.Remove object: "+t.toString()),this.Yh=!0):y!==qt&&Nn.k("unknown ChangedEvent: "+t.toString())}finally{this.we=e}}},Oo.prototype.startTransaction=Oo.prototype.Qb=function(t){return this.la.Qb(t)},Oo.prototype.commitTransaction=Oo.prototype.wd=function(t){return this.la.wd(t)},Oo.prototype.rollbackTransaction=Oo.prototype.Ap=function(){return this.la.Ap()},Oo.prototype.updateAllTargetBindings=Oo.prototype.qF=function(t){void 0===t&&(t="");for(var i=this.dk;i.next();)i.value.Hb(t);for(i=this.Ag;i.next();)i.value.Hb(t);for(i=this.links;i.next();)i.value.Hb(t)},Oo.prototype.updateAllRelationshipsFromData=Oo.prototype.SI=function(){if(0<arguments.length){for(var i=this.ba,e=new Q,t=i.Yf,n=0;n<t.length;n++){var o=t[n];e.add(o)}var r=[];for(this.Ag.each(function(t){null===t.data||e.contains(t.data)||r.push(t.data)}),this.dk.each(function(t){null===t.data||e.contains(t.data)||r.push(t.data)}),r.forEach(function(t){re(i,t,!1)}),n=0;n<t.length;n++){var o=t[n],s=this.dh(o);null===s&&oe(i,o,!1)}if(i instanceof pe){for(var a=new Q,t=i.yg,n=0;n<t.length;n++)o=t[n],a.add(o);var h=[];for(this.links.each(function(t){null===t.data||a.contains(t.data)||h.push(t.data)}),h.forEach(function(t){ge(i,t,!1)}),n=0;n<t.length;n++)o=t[n],null===(s=this.Pf(o))&&ye(i,o,!1)}}for(n=this.dk;n.next();)(s=n.value).updateRelationshipsFromData();for(n=this.Ag;n.next();)n.value.updateRelationshipsFromData();for(n=this.links;n.next();)(s=n.value).updateRelationshipsFromData()},Oo.prototype.Lt=function(t,i,e){var n;t.K(i)||(void 0===e&&(e=!1),e||ar(this),hr(this),null===(n=this.Pb)||!n.Lw||this.al!==fo||e||t.width===i.width&&t.height===i.height||n.H(),n=this.Wa,!0===this.Tl&&n instanceof no&&(this.N.ca=this.oF(this.N.hf),oo(n,this)),this.Pc||this.$D(t,i),yr(this),this.Ba("ViewportBoundsChanged",e?Nn.fj:null,t))},Oo.prototype.clearSelection=Oo.prototype.ow=function(){var t=0<this.selection.count;t&&this.Ba("ChangingSelection"),gr(this),t&&this.Ba("ChangedSelection")},Oo.prototype.select=Oo.prototype.select=function(t){null!==t&&(Nn.A(t,Lh,Oo,"select:part"),t.layer.g===this&&(!t.hb||1<this.selection.count)&&(this.Ba("ChangingSelection"),gr(this),t.hb=!0,this.Ba("ChangedSelection")))},Oo.prototype.selectCollection=Oo.prototype.TE=function(t){if(this.Ba("ChangingSelection"),gr(this),Nn.isArray(t))for(var i=Nn.Va(t),e=0;e<i;e++){var n=Nn.Pa(t,e);n instanceof Lh||Nn.k("Diagram.selectCollection given something that is not a Part: "+n),n.hb=!0}else for(t=t.i;t.next();)(n=t.value)instanceof Lh||Nn.k("Diagram.selectCollection given something that is not a Part: "+n),n.hb=!0;this.Ba("ChangedSelection")},Oo.prototype.clearHighlighteds=Oo.prototype.nD=function(){var t=this.Qm;if(0<t.count){for(var i=t.dc(),e=i.length,n=0;n<e;n++)i[n].fh=!1;t.Oa(),t.clear(),t.freeze()}},Oo.prototype.highlight=function(t){null!==t&&t.layer.g===this&&(Nn.A(t,Lh,Oo,"highlight:part"),!t.fh||1<this.Qm.count)&&(this.nD(),t.fh=!0)},Oo.prototype.highlightCollection=function(t){if(this.nD(),Nn.isArray(t))for(var i=Nn.Va(t),e=0;e<i;e++){var n=Nn.Pa(t,e);n instanceof Lh||Nn.k("Diagram.highlightCollection given something that is not a Part: "+n),n.fh=!0}else for(t=t.i;t.next();)(n=t.value)instanceof Lh||Nn.k("Diagram.highlightCollection given something that is not a Part: "+n),n.fh=!0},Oo.prototype.scroll=Oo.prototype.scroll=function(t,i,e){void 0===e&&(e=1);var n="up"===i||"down"===i,o=0;if("pixel"===t)o=e;else if("line"===t)o=e*(n?this.Ut:this.Tt);else if("page"===t)t=n?this.rb.height:this.rb.width,0!==(t*=this.scale)&&(o=Math.max(t-(n?this.Ut:this.Tt),0),o*=e);else{if("document"===t)return o=this.Zd,n=this.rb,e=Nn.L(),"up"===i?this.position=e.m(n.x,o.y):"left"===i?this.position=e.m(o.x,n.y):"down"===i?this.position=e.m(n.x,o.bottom-n.height):"right"===i&&(this.position=e.m(o.right-n.width,n.y)),void Nn.v(e);Nn.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}o/=this.scale,e=this.position.copy(),"up"===i?e.y=this.position.y-o:"down"===i?e.y=this.position.y+o:"left"===i?e.x=this.position.x-o:"right"===i?e.x=this.position.x+o:Nn.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+i),this.position=e},Oo.prototype.scrollToRect=Oo.prototype.tI=function(t){var i=this.rb;i.Wj(t)||((t=t.bl).x-=i.width/2,t.y-=i.height/2,this.position=t)},Oo.prototype.centerRect=Oo.prototype.kG=function(t){var i=this.rb;(t=t.bl).x-=i.width/2,t.y-=i.height/2,this.position=t},Oo.prototype.transformDocToView=Oo.prototype.mF=function(t){var i=this.me;i.reset(),1!==this.Tb&&i.scale(this.Tb);var e=this.kb;return(0!==e.x||0!==e.y)&&isFinite(e.x)&&isFinite(e.y)&&i.translate(-e.x,-e.y),t.copy().transform(this.me)},Oo.prototype.transformViewToDoc=Oo.prototype.oF=function(t){var i=this.me;i.reset(),1!==this.Tb&&i.scale(this.Tb);var e=this.kb;return(0!==e.x||0!==e.y)&&isFinite(e.x)&&isFinite(e.y)&&i.translate(-e.x,-e.y),rt(t.copy(),this.me)},Oo.None=fo=Nn.p(Oo,"None",0),Oo.Uniform=co=Nn.p(Oo,"Uniform",1),Oo.UniformToFill=po=Nn.p(Oo,"UniformToFill",2),Oo.CycleAll=yo=Nn.p(Oo,"CycleAll",10),Oo.CycleNotDirected=go=Nn.p(Oo,"CycleNotDirected",11),Oo.CycleNotDirectedFast=vo=Nn.p(Oo,"CycleNotDirectedFast",12),Oo.CycleNotUndirected=mo=Nn.p(Oo,"CycleNotUndirected",13),Oo.CycleDestinationTree=bo=Nn.p(Oo,"CycleDestinationTree",14),Oo.CycleSourceTree=xo=Nn.p(Oo,"CycleSourceTree",15),Oo.DocumentScroll=wo=Nn.p(Oo,"DocumentScroll",1),Oo.InfiniteScroll=ko=Nn.p(Oo,"InfiniteScroll",2),Oo.TreeParentCollapsed=Mo=Nn.p(Oo,"TreeParentCollapsed",1),Oo.AllParentsCollapsed=Nn.p(Oo,"AllParentsCollapsed",2),Nn.defineProperty(Oo,{TI:"validCycle"},function(){return this.bw},function(t){var i=this.bw;i!==t&&(Nn.pb(t,Oo,Oo,"validCycle"),this.bw=t,this.h("validCycle",i,t))}),Nn.u(Oo,{Ow:"layers"},function(){return this.Yb.i}),Nn.defineProperty(Oo,{vf:"isModelReadOnly"},function(){var t=this.Vd;return null!==t&&t.ab},function(t){var i=this.Vd;null!==i&&(i.ab=t)}),Nn.defineProperty(Oo,{ab:"isReadOnly"},function(){return this.si},function(t){var i=this.si;i!==t&&(Nn.j(t,"boolean",Oo,"isReadOnly"),this.si=t,this.h("isReadOnly",i,t))}),Nn.defineProperty(Oo,{isEnabled:"isEnabled"},function(){return this.Qe},function(t){var i=this.Qe;i!==t&&(Nn.j(t,"boolean",Oo,"isEnabled"),this.Qe=t,this.h("isEnabled",i,t))}),Nn.defineProperty(Oo,{Yy:"allowClipboard"},function(){return this.mu},function(t){var i=this.mu;i!==t&&(Nn.j(t,"boolean",Oo,"allowClipboard"),this.mu=t,this.h("allowClipboard",i,t))}),Nn.defineProperty(Oo,{Uj:"allowCopy"},function(){return this.hk},function(t){var i=this.hk;i!==t&&(Nn.j(t,"boolean",Oo,"allowCopy"),this.hk=t,this.h("allowCopy",i,t))}),Nn.defineProperty(Oo,{zm:"allowDelete"},function(){return this.ik},function(t){var i=this.ik;i!==t&&(Nn.j(t,"boolean",Oo,"allowDelete"),this.ik=t,this.h("allowDelete",i,t))}),Nn.defineProperty(Oo,{Ss:"allowDragOut"},function(){return this.nu},function(t){var i=this.nu;i!==t&&(Nn.j(t,"boolean",Oo,"allowDragOut"),this.nu=t,this.h("allowDragOut",i,t))}),Nn.defineProperty(Oo,{fD:"allowDrop"},function(){return this.ou},function(t){var i=this.ou;i!==t&&(Nn.j(t,"boolean",Oo,"allowDrop"),this.ou=t,this.h("allowDrop",i,t))}),Nn.defineProperty(Oo,{kw:"allowTextEdit"},function(){return this.rk},function(t){var i=this.rk;i!==t&&(Nn.j(t,"boolean",Oo,"allowTextEdit"),this.rk=t,this.h("allowTextEdit",i,t))}),Nn.defineProperty(Oo,{hw:"allowGroup"},function(){return this.jk},function(t){var i=this.jk;i!==t&&(Nn.j(t,"boolean",Oo,"allowGroup"),this.jk=t,this.h("allowGroup",i,t))}),Nn.defineProperty(Oo,{lw:"allowUngroup"},function(){return this.sk},function(t){var i=this.sk;i!==t&&(Nn.j(t,"boolean",Oo,"allowUngroup"),this.sk=t,this.h("allowUngroup",i,t))}),Nn.defineProperty(Oo,{Ko:"allowInsert"},function(){return this.qu},function(t){var i=this.qu;i!==t&&(Nn.j(t,"boolean",Oo,"allowInsert"),this.qu=t,this.h("allowInsert",i,t))}),Nn.defineProperty(Oo,{Ts:"allowLink"},function(){return this.kk},function(t){var i=this.kk;i!==t&&(Nn.j(t,"boolean",Oo,"allowLink"),this.kk=t,this.h("allowLink",i,t))}),Nn.defineProperty(Oo,{Am:"allowRelink"},function(){return this.mk},function(t){var i=this.mk;i!==t&&(Nn.j(t,"boolean",Oo,"allowRelink"),this.mk=t,this.h("allowRelink",i,t))}),Nn.defineProperty(Oo,{$k:"allowMove"},function(){return this.lk},function(t){var i=this.lk;i!==t&&(Nn.j(t,"boolean",Oo,"allowMove"),this.lk=t,this.h("allowMove",i,t))}),Nn.defineProperty(Oo,{iw:"allowReshape"},function(){return this.nk},function(t){var i=this.nk;i!==t&&(Nn.j(t,"boolean",Oo,"allowReshape"),this.nk=t,this.h("allowReshape",i,t))}),Nn.defineProperty(Oo,{Us:"allowResize"},function(){return this.ok},function(t){var i=this.ok;i!==t&&(Nn.j(t,"boolean",Oo,"allowResize"),this.ok=t,this.h("allowResize",i,t))}),Nn.defineProperty(Oo,{jw:"allowRotate"},function(){return this.pk},function(t){var i=this.pk;i!==t&&(Nn.j(t,"boolean",Oo,"allowRotate"),this.pk=t,this.h("allowRotate",i,t))}),Nn.defineProperty(Oo,{nf:"allowSelect"},function(){return this.qk},function(t){var i=this.qk;i!==t&&(Nn.j(t,"boolean",Oo,"allowSelect"),this.qk=t,this.h("allowSelect",i,t))}),Nn.defineProperty(Oo,{gD:"allowUndo"},function(){return this.ru},function(t){var i=this.ru;i!==t&&(Nn.j(t,"boolean",Oo,"allowUndo"),this.ru=t,this.h("allowUndo",i,t))}),Nn.defineProperty(Oo,{mw:"allowZoom"},function(){return this.tu},function(t){var i=this.tu;i!==t&&(Nn.j(t,"boolean",Oo,"allowZoom"),this.tu=t,this.h("allowZoom",i,t))}),Nn.defineProperty(Oo,{Bz:"hasVerticalScrollbar"},function(){return this.$u},function(t){var i=this.$u;i!==t&&(Nn.j(t,"boolean",Oo,"hasVerticalScrollbar"),this.$u=t,ar(this),this.pa(),this.h("hasVerticalScrollbar",i,t),Ho(this,!1))}),Nn.defineProperty(Oo,{Az:"hasHorizontalScrollbar"},function(){return this.Zu},function(t){var i=this.Zu;i!==t&&(Nn.j(t,"boolean",Oo,"hasHorizontalScrollbar"),this.Zu=t,ar(this),this.pa(),this.h("hasHorizontalScrollbar",i,t),Ho(this,!1))}),Nn.defineProperty(Oo,{ne:"allowHorizontalScroll"},function(){return this.pu},function(t){var i=this.pu;i!==t&&(Nn.j(t,"boolean",Oo,"allowHorizontalScroll"),this.pu=t,this.h("allowHorizontalScroll",i,t),Ho(this,!1))}),Nn.defineProperty(Oo,{oe:"allowVerticalScroll"},function(){return this.su},function(t){var i=this.su;i!==t&&(Nn.j(t,"boolean",Oo,"allowVerticalScroll"),this.su=t,this.h("allowVerticalScroll",i,t),Ho(this,!1))}),Nn.defineProperty(Oo,{Tt:"scrollHorizontalLineChange"},function(){return this.Mv},function(t){var i=this.Mv;i!==t&&(Nn.j(t,"number",Oo,"scrollHorizontalLineChange"),t<0&&Nn.va(t,">= 0",Oo,"scrollHorizontalLineChange"),this.Mv=t,this.h("scrollHorizontalLineChange",i,t))}),Nn.defineProperty(Oo,{Ut:"scrollVerticalLineChange"},function(){return this.Qv},function(t){var i=this.Qv;i!==t&&(Nn.j(t,"number",Oo,"scrollVerticalLineChange"),t<0&&Nn.va(t,">= 0",Oo,"scrollVerticalLineChange"),this.Qv=t,this.h("scrollVerticalLineChange",i,t))}),Nn.defineProperty(Oo,{N:"lastInput"},function(){return this.Nb},function(t){this.Nb=t}),Nn.defineProperty(Oo,{yc:"firstInput"},function(){return this.qi},function(t){this.qi=t}),Nn.defineProperty(Oo,{$b:"currentCursor"},function(){return this.Gu},function(t){""===t&&(t=this.uq),this.Gu!==t&&(Nn.j(t,"string",Oo,"currentCursor"),null!==this.zb&&(this.Gu=t,this.zb.style.cursor=t,this.Kb.style.cursor=t))}),Nn.defineProperty(Oo,{CJ:"defaultCursor"},function(){return this.uq},function(t){""===t&&(t="auto");var i=this.uq;i!==t&&(Nn.j(t,"string",Oo,"defaultCursor"),this.uq=t,this.h("defaultCursor",i,t))}),Nn.defineProperty(Oo,{click:"click"},function(){return this.fi},function(t){var i=this.fi;i!==t&&(null!==t&&Nn.j(t,"function",Oo,"click"),this.fi=t,this.h("click",i,t))}),Nn.defineProperty(Oo,{at:"doubleClick"},function(){return this.oi},function(t){var i=this.oi;i!==t&&(null!==t&&Nn.j(t,"function",Oo,"doubleClick"),this.oi=t,this.h("doubleClick",i,t))}),Nn.defineProperty(Oo,{ez:"contextClick"},function(){return this.ii},function(t){var i=this.ii;i!==t&&(null!==t&&Nn.j(t,"function",Oo,"contextClick"),this.ii=t,this.h("contextClick",i,t))}),Nn.defineProperty(Oo,{Tz:"mouseOver"},function(){return this.Bi},function(t){var i=this.Bi;i!==t&&(null!==t&&Nn.j(t,"function",Oo,"mouseOver"),this.Bi=t,this.h("mouseOver",i,t))}),Nn.defineProperty(Oo,{Sz:"mouseHover"},function(){return this.Ai},function(t){var i=this.Ai;i!==t&&(null!==t&&Nn.j(t,"function",Oo,"mouseHover"),this.Ai=t,this.h("mouseHover",i,t))}),Nn.defineProperty(Oo,{Rz:"mouseHold"},function(){return this.zi},function(t){var i=this.zi;i!==t&&(null!==t&&Nn.j(t,"function",Oo,"mouseHold"),this.zi=t,this.h("mouseHold",i,t))}),Nn.defineProperty(Oo,{VH:"mouseDragOver"},function(){return this.vv},function(t){var i=this.vv;i!==t&&(null!==t&&Nn.j(t,"function",Oo,"mouseDragOver"),this.vv=t,this.h("mouseDragOver",i,t))}),Nn.defineProperty(Oo,{Qz:"mouseDrop"},function(){return this.yi},function(t){var i=this.yi;i!==t&&(null!==t&&Nn.j(t,"function",Oo,"mouseDrop"),this.yi=t,this.h("mouseDrop",i,t))}),Nn.defineProperty(Oo,{yA:"toolTip"},function(){return this.Hi},function(t){var i=this.Hi;i!==t&&(null!==t&&Nn.A(t,Du,Oo,"toolTip"),this.Hi=t,this.h("toolTip",i,t))}),Nn.defineProperty(Oo,{contextMenu:"contextMenu"},function(){return this.ji},function(t){var i=this.ji;i!==t&&(null!==t&&Nn.A(t,Du,Oo,"contextMenu"),this.ji=t,this.h("contextMenu",i,t))}),Nn.defineProperty(Oo,{nb:"commandHandler"},function(){return this.Mx},function(t){var i=this.Mx;i!==t&&(Nn.A(t,Ce,Oo,"commandHandler"),null!==t.g&&Nn.k("Cannot share CommandHandlers between Diagrams: "+t.toString()),null!==i&&i.Mc(null),(this.Mx=t).Mc(this))}),Nn.defineProperty(Oo,{Za:"toolManager"},function(){return this.Qy},function(t){var i=this.Qy;i!==t&&(Nn.A(t,no,Oo,"toolManager"),null!==t.g&&Nn.k("Cannot share ToolManagers between Diagrams: "+t.toString()),null!==i&&i.Mc(null),(this.Qy=t).Mc(this))}),Nn.defineProperty(Oo,{$s:"defaultTool"},function(){return this.Sx},function(t){var i=this.Sx;i!==t&&(Nn.A(t,Ae,Oo,"defaultTool"),this.Sx=t,this.Wa===i&&(this.Wa=t))}),Nn.defineProperty(Oo,{Wa:"currentTool"},function(){return this.Qx},function(t){var i=this.Qx;null!==i&&(i.qa&&i.doDeactivate(),i.cancelWaitAfter(),i.doStop()),null===t&&(t=this.$s),null!==t&&(Nn.A(t,Ae,Oo,"currentTool"),(this.Qx=t).Mc(this),t.doStart())}),Nn.u(Oo,{selection:"selection"},function(){return this.Sv}),Nn.defineProperty(Oo,{NH:"maxSelectionCount"},function(){return this.rv},function(t){if((i=this.rv)!==t)if(Nn.j(t,"number",Oo,"maxSelectionCount"),0<=t&&!isNaN(t)){if(this.rv=t,this.h("maxSelectionCount",i,t),!this.la.ib&&0<(t=this.selection.count-t)){this.Ba("ChangingSelection");for(var i=this.selection.dc(),e=0;e<t;e++)i[e].hb=!1;this.Ba("ChangedSelection")}}else Nn.va(t,">= 0",Oo,"maxSelectionCount")}),Nn.defineProperty(Oo,{YH:"nodeSelectionAdornmentTemplate"},function(){return this.wv},function(t){var i=this.wv;i!==t&&(Nn.A(t,Du,Oo,"nodeSelectionAdornmentTemplate"),this.wv=t,this.h("nodeSelectionAdornmentTemplate",i,t))}),Nn.defineProperty(Oo,{bH:"groupSelectionAdornmentTemplate"},function(){return this.Wu},function(t){var i=this.Wu;i!==t&&(Nn.A(t,Du,Oo,"groupSelectionAdornmentTemplate"),this.Wu=t,this.h("groupSelectionAdornmentTemplate",i,t))}),Nn.defineProperty(Oo,{HH:"linkSelectionAdornmentTemplate"},function(){return this.nv},function(t){var i=this.nv;i!==t&&(Nn.A(t,Du,Oo,"linkSelectionAdornmentTemplate"),this.nv=t,this.h("linkSelectionAdornmentTemplate",i,t))}),Nn.u(Oo,{Qm:"highlighteds"},function(){return this.av}),Nn.defineProperty(Oo,{Yh:"isModified"},function(){var t=this.la;return t.isEnabled?null!==t.Oi||this.sy&&this.Og!==t.Ti:this.sy},function(t){var i;this.sy!==t&&(Nn.j(t,"boolean",Oo,"isModified"),this.sy=t,i=this.la,!t&&i.isEnabled&&(this.Og=i.Ti),t||vr(this))}),Nn.defineProperty(Oo,{ba:"model"},function(){return this.Vd},function(i){var t,e=this.Vd;e!==i&&(Nn.A(i,Ui,Oo,"model"),this.Wa.doCancel(),null!==e&&e.la!==i.la&&e.la.gE&&Nn.k("Do not replace a Diagram.model while a transaction is in progress."),this.Na.Zh(),this.ow(),this.Qg=!1,this.Nn=!0,this.Og=-2,this.Kf=!1,t=this.Kd,this.Kd=!0,this.Na.$m("Model"),null!==e&&(null!==this.Rg&&this.Rg.each(function(t){e.Ot(t)}),e.Ot(this.fC),e instanceof pe&&Or(this,e.yg),Or(this,e.Yf)),(this.Vd=i).ym(this.eC),Tr(this,i.Yf),i instanceof pe&&Ar(this,i.yg),i.Ot(this.eC),i.ym(this.fC),null!==this.Rg&&this.Rg.each(function(t){i.ym(t)}),this.Kd=t,this.Pc||this.pa(),null!==e&&(i.la.isEnabled=e.la.isEnabled))}),Nn.defineProperty(Oo,{Qa:null},function(){return this.YB},function(t){this.YB=t}),Nn.u(Oo,{Qw:null},function(){return this.DF}),Nn.defineProperty(Oo,{we:"skipsModelSourceBindings"},function(){return this.AC},function(t){this.AC=t}),Nn.defineProperty(Oo,{bu:null},function(){return this.Ky},function(t){this.Ky=t}),Oo.prototype.clear=Oo.prototype.clear=function(){var t=null;null!==this.jd&&(t=this.jd.Y),this.ba.clear();for(var i=this.Yb.length,e=0;e<i;e++)this.Yb.n[e].clear();this.fg.clear(),this.xk.clear(),this.mo.clear(),this.Uk.clear(),this.eo.clear(),this.wb.clear(),this.ki.clear(),this.wk.clear(),this.Wl.clear(),this.Sv.Oa(),this.Sv.clear(),this.Sv.freeze(),this.av.Oa(),this.av.clear(),this.av.freeze(),Ne=this.zn=null,je="",this.Nu=new Ln(NaN,NaN,NaN,NaN).freeze(),null!==t&&(this.add(t),this.wb.remove(t)),this.pa()},Oo.prototype.reset=Oo.prototype.reset=function(){this.Pc=!0,this.clear(),this.Yb=new Dn(zo),this.IE(),this.HE(),this.kb=new Se(NaN,NaN).freeze(),this.Tb=1,this.cv=new Se(NaN,NaN).freeze(),this.dv=NaN,this.sv=1e-4,this.qv=100,this.ew=new Se(NaN,NaN).freeze(),this.Uu=new Ln(NaN,NaN,NaN,NaN).freeze(),this.Nv=new ut(0,0,0,0).freeze(),this.Ov=wo,this.Kv=this.Gv=null,this.Ml=fo,this.wn=d,this.Dk=fo,this.Rn=d,this.ev=this.bv=P,this.UA=250,this.xu=new ut(16,16,16,16).freeze(),this.iv=!0,this.$v=Mo,this.bw=yo,this.uq="auto",this.ji=this.Hi=this.yi=this.vv=this.zi=this.Ai=this.Bi=this.ii=this.oi=this.fi=null,this.si=!1,this.ik=this.hk=this.mu=this.Qe=!0,this.ou=this.nu=!1,this.su=this.pu=this.$u=this.Zu=this.tu=this.ru=this.qk=this.pk=this.ok=this.nk=this.lk=this.mk=this.kk=this.qu=this.sk=this.jk=this.rk=!0,this.Qv=this.Mv=16,this.Se=new ut(5).freeze(),this.rv=999999999,this.Ud=null,Eo(this),this.jd=null,this.Za=new no,this.Za.initializeStandardTools(),this.Wa=this.$s=this.Za,this.nb=new Ce,this.Gi=!0,Go(this),this.Pb=new Sf,this.Gi=!1,this.ba=new pe,this.Qg=!1,this.Nn=!0,this.Pc=this.Kf=!1,this.pa(),this.Rg=this.ei=null,Hr(this),this.Gu=""},Oo.prototype.rebuildParts=Oo.prototype.yl=function(){for(var t=this.Xz.i;t.next();){var i=t.value,e=t.key;(!i.Pd()||i instanceof kf)&&Nn.k('Invalid node template in Diagram.nodeTemplateMap: template for "'+e+'" must be a Node or a simple Part, not a Group or Link: '+i)}for(t=this.zz.i;t.next();)i=t.value,e=t.key,i instanceof kf||Nn.k('Invalid group template in Diagram.groupTemplateMap: template for "'+e+'" must be a Group, not a normal Node or Link: '+i);for(t=this.Jz.i;t.next();)i=t.value,e=t.key,i instanceof Ru||Nn.k('Invalid link template in Diagram.linkTemplateMap: template for "'+e+'" must be a Link, not a normal Node or simple Part: '+i);for(t=Nn.jb(),i=this.selection.i;i.next();)(e=i.value.data)&&t.push(e);for(var i=Nn.jb(),n=this.Qm.i;n.next();)(e=n.value.data)&&i.push(e);for(e=Nn.jb(),n=this.Ag.i;n.next();){var o=n.value;null!==o.data&&(e.push(o.data),e.push(o.location))}for(n=this.links.i;n.next();)null!==(o=n.value).data&&(e.push(o.data),e.push(o.location));for(n=this.dk.i;n.next();)null!==(o=n.value).data&&(e.push(o.data),e.push(o.location));for((n=this.ba)instanceof pe&&Or(this,n.yg),Or(this,n.Yf),Tr(this,n.Yf),n instanceof pe&&Ar(this,n.yg),n=0;n<t.length;n++)null!==(o=this.dh(t[n]))&&(o.hb=!0);for(n=0;n<i.length;n++)null!==(o=this.dh(i[n]))&&(o.fh=!0);for(n=0;n<e.length;n+=2)null!==(o=this.dh(e[n]))&&(o.location=e[n+1]);Nn.sa(t),Nn.sa(i),Nn.sa(e)};var Cr=!(Oo.prototype.xz=function(t){return this.ba.xz(t)}),Nr=!1;function jr(t,i,e){var n=!1,o=t.ba;return o instanceof pe&&(n=o.Fz(i)),n?null===(i=t.zz.ja(e))&&(null===(i=t.zz.ja(""))&&(Nr||(Nr=!0,Nn.trace('No Group template found for category "'+e+'"'),Nn.trace("  Using default group template")),i=t.pB)):null===(i=t.Xz.ja(e))&&(null===(i=t.Xz.ja(""))&&(Cr||(Cr=!0,Nn.trace('No Node template found for category "'+e+'"'),Nn.trace("  Using default node template")),i=t.rB)),i}function Dr(t,i){var e=t.ba;if(e instanceof pe||e instanceof me){var n=e.gb(i);if(void 0!==n){var o=he(e,n),r=t.dh(i);if(null!==o&&null!==r){for(o=o.i;o.next();){var s=o.value;if(e instanceof pe){var a,h=e;if(h.He(s)){r instanceof kf&&h.Om(s)===n&&(a=r,null!==(s=t.dh(s))&&(s.Sa=a))}else{var l=t.Pf(s);if(null!==l&&r instanceof Lu&&(a=r,h.ol(s)===n&&(l.T=a),h.pl(s)===n&&(l.Z=a),s=h.$j(s),Nn.isArray(s)))for(h=0;h<Nn.Va(s);h++)if(Nn.Pa(s,h)===n){a.ee=l;break}}}else e instanceof me&&((l=e).He(s)&&r instanceof Lu&&(a=r,l.Pm(s)===n&&(s=t.Bw(s),Lr(t,a,s))))}ae(e,n)}e instanceof pe?void 0!==(e=e.Om(i))&&((e=t.Ye(e))instanceof kf&&(r.Sa=e)):e instanceof me&&(void 0!==(e=e.Pm(i))&&r instanceof Lu&&(a=r,r=t.Ye(e),Lr(t,r,a)))}}}function Lr(t,i,e){if(null!==i&&null!==e){var n,o=t.Za.qE,r=i,s=e;if(t.Qd){for(i=s.te;i.next();)if(i.value.Z===s)return}else for(s=i,i=(r=e).te;i.next();)if(i.value.T===r)return;null!==o&&wn(o,r,s,null,!0)||(o=t.Dw(e.data),null!==(i=Br(t,o))&&(ma(i),null!==(i=i.copy()))&&(n=t.we,t.we=!0,i.di=o,i.ie=e.data,i.T=r,i.Z=s,t.add(i),i.ie=null,i.data=e.data,t.we=n))}}function Ar(t,i){if(null!==i){for(var e=Nn.Va(i),n=0;n<e;n++){Fr(t,Nn.Pa(i,n))}Rr(t,!1)}}function Fr(t,i){if(null!=i&&!t.la.ib&&!t.wk.contains(i)){var e=t.Dw(i),n=Br(t,e);if(null!==n&&(ma(n),null!==(n=n.copy()))){var o=t.we;if(t.we=!0,n.di=e,n.ie=i,""!==(r=(e=t.ba).VG(i))&&(n.wg=r),void 0!==(r=e.ol(i))&&((r=t.Ye(r))instanceof Lu&&(n.T=r)),""!==(r=e.YG(i))&&(n.qh=r),void 0!==(r=e.pl(i))&&((r=t.Ye(r))instanceof Lu&&(n.Z=r)),e=e.$j(i),Nn.isArray(e))for(var r=Nn.Va(e),s=0;s<r;s++){var a=Nn.Pa(e,s);null!==(a=t.Ye(a))&&(a.ee=n)}t.add(n),n.ie=null,n.data=i,t.we=o}}}var zr=!(Oo.prototype.Dw=function(t){var i=this.ba,e="";return i instanceof pe?e=i.Dw(t):i instanceof me&&(e=i.XG(t)),e});function Br(t,i){var e=t.Jz.ja(i);return null===e&&(null===(e=t.Jz.ja(""))&&(zr||(zr=!0,Nn.trace('No Link template found for category "'+i+'"'),Nn.trace("  Using default link template")),e=t.qB)),e}function Or(t,i){for(var e=Nn.Va(i),n=0;n<e;n++){Er(t,Nn.Pa(i,n))}}function Er(t,i){if(null!=i){var e=t.dh(i);if(null!==e){e.hb=!1,e.fh=!1;var n=e.layer;if(null!==n&&n.g===t){var o=t.ba;if(o instanceof pe&&e instanceof Lu){var r=e,s=o.gb(r.data);if(void 0!==s){for(var a=r.te;a.next();)se(o,s,a.value.data);if(r.uf&&(null!==(a=r.ee)&&se(o,s,a.data)),r instanceof kf)for(r=r.Ic;r.next();)a=r.value.data,o.He(a)&&se(o,s,a)}}else if(o instanceof me&&e instanceof Lu){var h,l,r=e;for(null!==(a=t.Pf(r.data))&&(a.hb=!1,a.fh=!1,null!==(h=a.layer)&&(0<=(l=h.Le(-1,a,!1))&&t.Lc(Rt,"parts",h,a,null,l,null),null!==(l=a.zt)&&l(a,h,null))),a=t.Qd,r=r.te;r.next();)h=r.value,h=(a?h.Z:h.T).data,o.He(h)&&se(o,s,h)}0<=(o=n.Le(-1,e,!1))&&t.Lc(Rt,"parts",n,e,null,o,null),null!==(o=e.zt)&&o(e,n,null)}}}}function qr(t,i,e){for(var n in e){var o=i[n],r=e[n];if(Nn.isArray(r)){if(!Nn.isArray(o)||o.length<r.length)return;for(var s=0;s<o.length;s++){var a=o[s],h=r[s];if(void 0!==h&&!Ir(t,a,h))return}}else if(!Ir(t,o,r))return}return 1}function Ir(t,i,e){if("function"==typeof e){if(!e(i))return}else if(e instanceof RegExp){if(!i||!e.test(i.toString()))return}else if(Nn.Ta(i)&&Nn.Ta(e)){if(!qr(t,i,e))return}else if(i!==e)return;return 1}function Gr(t,i){t.qj=!1;var e=t.Nu;e.K(i)||(i=i.R(),t.Nu=i,Ho(t,!1),t.Ba("DocumentBoundsChanged",null,e.copy()),ar(t))}function Rr(t,i){for(var e=t.Uk.i;e.next();)!function t(i,e,n){if(null!==e){for(var o=e.jo.i;o.next();)t(i,o.value,n);null!==e.Pb&&(n?e.Pb.wf=!1:e.Pb.H())}}(t,e.value,i);null!==t.Pb&&(i?t.Pb.wf=!1:t.Pb.H())}function Vr(t,i){if(!t.Tx){var e=t.Pb,n=t.Qa;t.Qa=!0;try{t.Qb("Layout");var o=t.Na;1!==t.la.rh||o.cf||o.pc||o.$m("Layout");for(var r=t.Uk.i;r.next();)!function t(i,e,n){if(null!==e){for(var o=e.jo.i;o.next();)t(i,o.value,n);null===(o=e.Pb)||o.wf||n&&!o.jE||(e.Cy=!e.location.G(),o.doLayout(e),e.H(Ch),o.wf=!0,er(i,e))}}(t,r.value,i);e.wf||i&&!e.jE&&1!==t.la.rh||(e.doLayout(t),ir(t),e.wf=!0)}finally{t.wd("Layout"),t.vu=!e.wf,t.Qa=n}}}function Hr(t){function i(t){var i=t.toLowerCase(),e=new Dn("function");n.add(t,e),n.add(i,e),o.add(t,t),o.add(i,t)}var n=new nt("string",Dn),o=new nt("string","string");i("AnimationStarting"),i("AnimationFinished"),i("BackgroundSingleClicked"),i("BackgroundDoubleClicked"),i("BackgroundContextClicked"),i("ClipboardChanged"),i("ClipboardPasted"),i("DocumentBoundsChanged"),i("ExternalObjectsDropped"),i("InitialLayoutCompleted"),i("LayoutCompleted"),i("LinkDrawn"),i("LinkRelinked"),i("LinkReshaped"),i("Modified"),i("ObjectSingleClicked"),i("ObjectDoubleClicked"),i("ObjectContextClicked"),i("PartCreated"),i("PartResized"),i("PartRotated"),i("SelectionMoved"),i("SelectionCopied"),i("SelectionDeleting"),i("SelectionDeleted"),i("SelectionGrouped"),i("SelectionUngrouped"),i("ChangingSelection"),i("ChangedSelection"),i("SubGraphCollapsed"),i("SubGraphExpanded"),i("TextEdited"),i("TreeCollapsed"),i("TreeExpanded"),i("ViewportBoundsChanged"),t.Vx=n,t.Ux=o}function Kr(t,i){var e=t.Ux.ja(i);return null!==e?e:t.Ux.ja(i.toLowerCase())}function Ur(t,i){var e=t.Vx.ja(i);return null!==e||null!==(e=t.Vx.ja(i.toLowerCase()))?e:(Nn.k("Unknown DiagramEvent name: "+i),null)}function Jr(t,i,e,n){if(null===t.td&&(t.td=new uf),t.td.st||t.td.group!==e||t.td.sA!==n){if(null===e){(i=t.qj?Vo(t):t.Zd.copy()).Qf(100,100),t.td.initialize(i),i=Nn.ag();for(var o=t.Ag;o.next();){var r=o.value,s=r.layer;null!==s&&s.visible&&!s.Gc&&Yr(t,r,n,i)}}else for(e.U.G()||e.sf(),(i=e.U.copy()).Qf(20,20),t.td.initialize(i),i=Nn.ag(),o=e.Ic;o.next();)(r=o.value)instanceof Lu&&Yr(t,r,n,i);Nn.Vb(i),t.td.group=e,t.td.sA=n,t.td.st=!1}else i&&pf(t.td);return t.td}function Yr(t,i,e,n){if(i!==e)if(i.isVisible()&&i.canAvoid()){e=i.getAvoidableRect(n),n=t.td.Oo,i=t.td.Mo;for(var o=e.x+e.width,r=e.y+e.height,s=e.x;s<o;s+=n){for(var a=e.y;a<r;a+=i)df(t.td,s,a);df(t.td,s,r)}for(a=e.y;a<r;a+=i)df(t.td,o,a);df(t.td,o,r)}else if(i instanceof kf)for(i=i.Ic;i.next();)(o=i.value)instanceof Lu&&Yr(t,o,e,n)}function Wr(t,i){null===t.td||t.td.st||null!==i&&!i.canAvoid()||(t.td.st=!0)}function Xr(t,i){t.wu.assign(i),(Qr(t,t.wu).Fc(t.position)?Zr:function e(n){-1===n.pn&&(n.pn=Nn.setTimeout(function(){var t,i;-1!==n.pn&&(Zr(n),null!==(t=n.N.event)&&((i=Qr(n,n.wu)).Fc(n.position)||(n.position=i,n.N.ca=n.oF(n.wu),n.px(t,null,t.target.W)||n.doMouseMove(),n.qj=!0,Gr(n,n.$g()),n.je=!0,n.Uf(),e(n))))},n.UA))})(t)}function Zr(t){-1!==t.pn&&(Nn.clearTimeout(t.pn),t.pn=-1)}function Qr(t,i){var e=t.position,n=t.lD;if(n.top<=0&&n.left<=0&&n.right<=0&&n.bottom<=0)return e;var o,r=t.rb,s=t.scale,r=Nn.gk(0,0,r.width*s,r.height*s),a=Nn.Mb(0,0);return i.x>=r.x&&i.x<r.x+n.left?(o=0|(o=Math.max(t.Tt,1)),a.x-=o,i.x<r.x+n.left/2&&(a.x-=o),i.x<r.x+n.left/4&&(a.x-=4*o)):i.x<=r.x+r.width&&i.x>r.x+r.width-n.right&&(o=Math.max(t.Tt,1),o|=0,a.x+=o,i.x>r.x+r.width-n.right/2&&(a.x+=o),i.x>r.x+r.width-n.right/4&&(a.x+=4*o)),i.y>=r.y&&i.y<r.y+n.top?(o=Math.max(t.Ut,1),o|=0,a.y-=o,i.y<r.y+n.top/2&&(a.y-=o),i.y<r.y+n.top/4&&(a.y-=4*o)):i.y<=r.y+r.height&&i.y>r.y+r.height-n.bottom&&(o=Math.max(t.Ut,1),o|=0,a.y+=o,i.y>r.y+r.height-n.bottom/2&&(a.y+=o),i.y>r.y+r.height-n.bottom/4&&(a.y+=4*o)),a.Fc(Ht)||(e=new Se(e.x+a.x/s,e.y+a.y/s)),Nn.Vb(r),Nn.v(a),e}Oo.prototype.findPartForKey=Oo.prototype.QG=function(t){return null==t||null===(t=this.ba.ae(t))?null:this.ki.ja(t)},Oo.prototype.findNodeForKey=Oo.prototype.Ye=function(t){return null!=t&&null!==(t=this.ba.ae(t))&&(t=this.ki.ja(t))instanceof Lu?t:null},Oo.prototype.findPartForData=Oo.prototype.dh=function(t){if(null===t)return null;var i=this.ki.ja(t);return null!==i?i:i=this.wk.ja(t)},Oo.prototype.findNodeForData=Oo.prototype.Bw=function(t){return null!==t&&(t=this.ki.ja(t))instanceof Lu?t:null},Oo.prototype.findLinkForData=Oo.prototype.Pf=function(t){return null===t?null:this.wk.ja(t)},Oo.prototype.findNodesByExample=function(t){for(var i=new Q,e=this.mo.i;e.next();){var n=e.value,o=n.data;if(null!==o)for(var r=0;r<arguments.length;r++){var s=arguments[r];if(Nn.Ta(s)&&qr(this,o,s)){i.add(n);break}}}return i.i},Oo.prototype.findLinksByExample=function(t){for(var i=new Q,e=this.eo.i;e.next();){var n=e.value,o=n.data;if(null!==o)for(var r=0;r<arguments.length;r++){var s=arguments[r];if(Nn.Ta(s)&&qr(this,o,s)){i.add(n);break}}}return i.i},Nn.defineProperty(Oo,{mK:"nodeTemplate"},function(){return this.Ci.ja("")},function(t){var i=this.Ci.ja("");i!==t&&(Nn.A(t,Lh,Oo,"nodeTemplate"),this.Ci.add("",t),this.h("nodeTemplate",i,t),this.la.ib||this.yl())}),Nn.defineProperty(Oo,{Xz:"nodeTemplateMap"},function(){return this.Ci},function(t){var i=this.Ci;i!==t&&(Nn.A(t,nt,Oo,"nodeTemplateMap"),this.Ci=t,this.h("nodeTemplateMap",i,t),this.la.ib||this.yl())}),Nn.defineProperty(Oo,{OJ:"groupTemplate"},function(){return this.zk.ja("")},function(t){var i=this.zk.ja("");i!==t&&(Nn.A(t,kf,Oo,"groupTemplate"),this.zk.add("",t),this.h("groupTemplate",i,t),this.la.ib||this.yl())}),Nn.defineProperty(Oo,{zz:"groupTemplateMap"},function(){return this.zk},function(t){var i=this.zk;i!==t&&(Nn.A(t,nt,Oo,"groupTemplateMap"),this.zk=t,this.h("groupTemplateMap",i,t),this.la.ib||this.yl())}),Nn.defineProperty(Oo,{aK:"linkTemplate"},function(){return this.wj.ja("")},function(t){var i=this.wj.ja("");i!==t&&(Nn.A(t,Ru,Oo,"linkTemplate"),this.wj.add("",t),this.h("linkTemplate",i,t),this.la.ib||this.yl())}),Nn.defineProperty(Oo,{Jz:"linkTemplateMap"},function(){return this.wj},function(t){var i=this.wj;i!==t&&(Nn.A(t,nt,Oo,"linkTemplateMap"),this.wj=t,this.h("linkTemplateMap",i,t),this.la.ib||this.yl())}),Nn.defineProperty(Oo,{tH:null},function(){return this.Tl},function(t){this.Tl=t}),Nn.defineProperty(Oo,{Me:"isMouseCaptured"},function(){return this.VB},function(t){var i=this.zb;null!==i&&(t?(this.N.bubbles=!1,i.removeEventListener("mousemove",this.pp,!1),i.removeEventListener("mousedown",this.op,!1),i.removeEventListener("mouseup",this.rp,!1),i.removeEventListener("mousewheel",this.jh,!1),i.removeEventListener("DOMMouseScroll",this.jh,!1),i.removeEventListener("mouseout",this.qp,!1),h.addEventListener("mousemove",this.pp,!0),h.addEventListener("mousedown",this.op,!0),h.addEventListener("mouseup",this.rp,!0),h.addEventListener("mousewheel",this.jh,!0),h.addEventListener("DOMMouseScroll",this.jh,!0),h.addEventListener("mouseout",this.qp,!0),h.addEventListener("selectstart",this.preventDefault,!1)):(h.removeEventListener("mousemove",this.pp,!0),h.removeEventListener("mousedown",this.op,!0),h.removeEventListener("mouseup",this.rp,!0),h.removeEventListener("mousewheel",this.jh,!0),h.removeEventListener("DOMMouseScroll",this.jh,!0),h.removeEventListener("mouseout",this.qp,!0),h.removeEventListener("selectstart",this.preventDefault,!1),i.addEventListener("mousemove",this.pp,!1),i.addEventListener("mousedown",this.op,!1),i.addEventListener("mouseup",this.rp,!1),i.addEventListener("mousewheel",this.jh,!1),i.addEventListener("DOMMouseScroll",this.jh,!1),i.addEventListener("mouseout",this.qp,!1)),this.VB=t)}),Nn.defineProperty(Oo,{position:"position"},function(){return this.kb},function(t){var i,e,n=this.kb;n.K(t)||(Nn.A(t,Se,Oo,"position"),i=this.rb.copy(),t=t.copy(),this.Pc||null===this.zb||(this.Pc=!0,e=this.scale,Uo(this,t,this.Zd,this.Eb/e,this.Jb/e,this.wn,!1),this.Pc=!1),this.kb=t.R(),(t=this.Na).pc&&Lo(t,n,this.kb),this.Pc||this.Lt(i,this.rb))}),Nn.defineProperty(Oo,{iH:"initialPosition"},function(){return this.cv},function(t){this.cv.K(t)||(Nn.A(t,Se,Oo,"initialPosition"),this.cv=t.R())}),Nn.defineProperty(Oo,{jH:"initialScale"},function(){return this.dv},function(t){this.dv!==t&&(Nn.j(t,"number",Oo,"initialScale"),this.dv=t)}),Nn.defineProperty(Oo,{mt:"grid"},function(){return null===this.jd&&Ro(this),this.jd},function(t){var i,e=this.jd;e!==t&&(null===e&&(Ro(this),e=this.jd),Nn.A(t,sa,Oo,"grid"),t.type!==na&&Nn.k("Diagram.grid must be a Panel of type Panel.Grid"),null!==(i=e.S)&&i.remove(e),(this.jd=t).name="GRID",null!==i&&i.add(t),yr(this),this.pa(),this.h("grid",e,t))}),Nn.u(Oo,{rb:"viewportBounds"},function(){var t=this.XC;if(null===this.zb)return t;var i=this.kb,e=this.Tb;return t.m(i.x,i.y,Math.max(this.Eb,0)/e,Math.max(this.Jb,0)/e),t}),Nn.defineProperty(Oo,{OD:"fixedBounds"},function(){return this.Uu},function(t){var i=this.Uu;i.K(t)||(Nn.A(t,Ln,Oo,"fixedBounds"),-1/0!==t.width&&1/0!==t.height&&-1/0!==t.height||Nn.k("fixedBounds width/height must not be Infinity"),this.Uu=t=t.R(),this.qc(),this.h("fixedBounds",i,t))}),Nn.defineProperty(Oo,{PE:"scrollMargin"},function(){return this.Nv},function(t){"number"==typeof t?t=new ut(t):Nn.A(t,ut,Oo,"scrollMargin");var i=this.Nv;i.K(t)||(this.Nv=t=t.R(),this.qc(),this.h("scrollMargin",i,t))}),Nn.defineProperty(Oo,{jA:"scrollMode"},function(){return this.Ov},function(t){var i=this.Ov;i!==t&&(Nn.pb(t,Oo,Oo,"scrollMode"),(this.Ov=t)===wo&&Ho(this,!1),this.h("scrollMode",i,t))}),Nn.defineProperty(Oo,{AE:"positionComputation"},function(){return this.Gv},function(t){var i=this.Gv;i!==t&&(null!==t&&Nn.j(t,"function",Oo,"positionComputation"),this.Gv=t,Ho(this,!1),this.h("positionComputation",i,t))}),Nn.defineProperty(Oo,{OE:"scaleComputation"},function(){return this.Kv},function(t){var i=this.Kv;i!==t&&(null!==t&&Nn.j(t,"function",Oo,"scaleComputation"),this.Kv=t,pr(this,this.scale,this.scale),this.h("scaleComputation",i,t))}),Nn.u(Oo,{Zd:"documentBounds"},function(){return this.Nu}),Nn.defineProperty(Oo,{scale:"scale"},function(){return this.Tb},function(t){var i=this.Tb;Nn.Ue(t,Oo,"scale"),i!==t&&pr(this,i,t)}),Nn.defineProperty(Oo,{al:"autoScale"},function(){return this.Ml},function(t){var i=this.Ml;i!==t&&(Nn.pb(t,Oo,Oo,"autoScale"),this.Ml=t,this.h("autoScale",i,t),t!==fo&&Ho(this,!1))}),Nn.defineProperty(Oo,{QJ:"initialAutoScale"},function(){return this.Dk},function(t){var i=this.Dk;i!==t&&(Nn.pb(t,Oo,Oo,"initialAutoScale"),this.Dk=t,this.h("initialAutoScale",i,t))}),Nn.defineProperty(Oo,{kH:"initialViewportSpot"},function(){return this.ev},function(t){var i=this.ev;i!==t&&(Nn.A(t,ct,Oo,"initialViewportSpot"),t.cd()||Nn.k("initialViewportSpot must be a specific Spot: "+t),this.ev=t,this.h("initialViewportSpot",i,t))}),Nn.defineProperty(Oo,{hH:"initialDocumentSpot"},function(){return this.bv},function(t){var i=this.bv;i!==t&&(Nn.A(t,ct,Oo,"initialDocumentSpot"),t.cd()||Nn.k("initialViewportSpot must be a specific Spot: "+t),this.bv=t,this.h("initialDocumentSpot",i,t))}),Nn.defineProperty(Oo,{hh:"minScale"},function(){return this.sv},function(t){Nn.Ue(t,Oo,"minScale");var i=this.sv;i!==t&&(0<t?(this.sv=t,this.h("minScale",i,t),t>this.scale&&(this.scale=t)):Nn.va(t,"> 0",Oo,"minScale"))}),Nn.defineProperty(Oo,{gh:"maxScale"},function(){return this.qv},function(t){Nn.Ue(t,Oo,"maxScale");var i=this.qv;i!==t&&(0<t?(this.qv=t,this.h("maxScale",i,t),t<this.scale&&(this.scale=t)):Nn.va(t,"> 0",Oo,"maxScale"))}),Nn.defineProperty(Oo,{Hl:"zoomPoint"},function(){return this.ew},function(t){this.ew.K(t)||(Nn.A(t,Se,Oo,"zoomPoint"),this.ew=t=t.R())}),Nn.defineProperty(Oo,{vD:"contentAlignment"},function(){return this.wn},function(t){var i=this.wn;i.K(t)||(Nn.A(t,ct,Oo,"contentAlignment"),this.wn=t=t.R(),this.h("contentAlignment",i,t),Ho(this,!1))}),Nn.defineProperty(Oo,{RJ:"initialContentAlignment"},function(){return this.Rn},function(t){var i=this.Rn;i.K(t)||(Nn.A(t,ct,Oo,"initialContentAlignment"),this.Rn=t=t.R(),this.h("initialContentAlignment",i,t))}),Nn.defineProperty(Oo,{padding:"padding"},function(){return this.Se},function(t){"number"==typeof t?t=new ut(t):Nn.A(t,ut,Oo,"padding");var i=this.Se;i.K(t)||(this.Se=t=t.R(),this.qc(),this.h("padding",i,t))}),Nn.u(Oo,{Ag:"nodes"},function(){return this.mo.i}),Nn.u(Oo,{links:"links"},function(){return this.eo.i}),Nn.u(Oo,{dk:"parts"},function(){return this.wb.i}),Oo.prototype.findTopLevelNodesAndLinks=function(){for(var t=new Q(Lh),i=this.mo.i;i.next();){var e=i.value;e.gp&&t.add(e)}for(i=this.eo.i;i.next();)(e=i.value).gp&&t.add(e);return t.i},Oo.prototype.findTopLevelGroups=function(){return this.Uk.i},Nn.defineProperty(Oo,{Pb:"layout"},function(){return this.Ud},function(t){var i=this.Ud;i!==t&&(Nn.A(t,Sf,Oo,"layout"),null!==i&&(i.g=null,i.group=null),(this.Ud=t).g=this,t.group=null,this.vu=!0,this.h("layout",i,t),this.ue())}),Oo.prototype.layoutDiagram=function(t){ir(this),t&&Rr(this,!0),Vr(this,!1)},Nn.defineProperty(Oo,{Qd:"isTreePathToChildren"},function(){return this.iv},function(t){var i=this.iv;if(i!==t&&(Nn.j(t,"boolean",Oo,"isTreePathToChildren"),this.iv=t,this.h("isTreePathToChildren",i,t),!this.la.ib))for(t=this.Ag;t.next();)Eu(t.value)}),Oo.prototype.findTreeRoots=function(){for(var t=new Dn(Lu),i=this.Ag;i.next();){var e=i.value;e.gp&&null===e.Yo()&&t.add(e)}return t.i},Nn.defineProperty(Oo,{zA:"treeCollapsePolicy"},function(){return this.$v},function(t){var i=this.$v;i!==t&&(Nn.pb(t,Oo,Oo,"treeCollapsePolicy"),this.$v=t,this.h("treeCollapsePolicy",i,t))}),Nn.defineProperty(Oo,{eh:null},function(){return this.MB},function(t){this.MB=t}),Oo.prototype.addDiagramListener=Oo.prototype.Wy=function(t,i){Nn.j(t,"string",Oo,"addDiagramListener:name"),Nn.j(i,"function",Oo,"addDiagramListener:listener");var e=Ur(this,t);null!==e&&e.add(i)},Oo.prototype.removeDiagramListener=Oo.prototype.DE=function(t,i){Nn.j(t,"string",Oo,"removeDiagramListener:name"),Nn.j(i,"function",Oo,"addDiagramListener:listener");var e=Ur(this,t);null!==e&&e.remove(i)},Oo.prototype.raiseDiagramEvent=Oo.prototype.Ba=function(t,i,e){var n=Ur(this,t),o=new Hi;if(o.g=this,o.name=Kr(this,t),void 0!==i&&(o.uA=i),void 0!==e&&(o.$z=e),1===(t=n.length))(n=n.da(0))(o);else if(0!==t)for(i=n.dc(),e=0;e<t;e++)(n=i[e])(o);return o.cancel},Oo.prototype.isUnoccupied=Oo.prototype.ip=function(t,i){return void 0===i&&(i=null),Jr(this,!1,null,i).ip(t.x,t.y,t.width,t.height)},Oo.prototype.simulatedMouseMove=Oo.prototype.px=function(t,i,e){if(null===yn)return!1;var n=yn.g;e instanceof Oo||(e=null);var o=gn;return e!==o&&(null!==o&&o!==n&&null!==o.Za.$d&&(Zr(o),yn.Hw=!1,o.Za.$d.doSimulatedDragLeave()),null!==(gn=e)&&e!==n&&null!==e.Za.$d&&(Ie(),o=e.Za.$d,pn.contains(o)||pn.add(o),e.Za.$d.doSimulatedDragEnter())),!(null===e||e===n||!e.fD||e.ab||!e.Ko)&&(null!==(n=e.Za.$d)&&(null!==t?i=e.Jq(t):null===i&&(i=new Se),e.Nb.ca=i,e.Nb.il=!1,e.Nb.up=!1,n.doSimulatedDragOver()),!0)},Oo.prototype.simulatedMouseUp=Oo.prototype.ZE=function(t,i,e,n){if(null!==yn){null===n&&(n=i),i=gn;var o=yn.g;if(n!==i){if(null!==i&&i!==o&&null!==i.Za.$d)return Zr(i),yn.Hw=!1,i.Za.$d.doSimulatedDragLeave(),!1;null!==(gn=n)&&null!==n.Za.$d&&(Ie(),i=n.Za.$d,pn.contains(i)||pn.add(i),n.Za.$d.doSimulatedDragEnter())}if(null===n)return yn.doCancel(),!0;if(n!==this)return null!==t&&(e=n.Jq(t)),n.Nb.ca=e,n.Nb.il=!1,n.Nb.up=!0,null!==(t=n.Za.$d)&&t.doSimulatedDrop(),null!==(t=yn)&&(n=t.mayCopy(),t.Bf=n?"Copy":"Move",t.stopTool()),!0}return!1},Nn.defineProperty(Oo,{lD:"autoScrollRegion"},function(){return this.xu},function(t){"number"==typeof t?t=new ut(t):Nn.A(t,ut,Oo,"autoScrollRegion");var i=this.xu;i.K(t)||(this.xu=t=t.R(),this.qc(),this.h("autoScrollRegion",i,t))}),Oo.prototype.makeSVG=Oo.prototype.makeSvg=function(t){return void 0===t&&(t=new y),t.context="svg",null!==(t=ns(this,t))?t.Cl:null},Oo.prototype.makeImage=function(t){void 0===t&&(t=new y);var i=(t.document||document).createElement("img");return i.src=this.IH(t),i};var $r,_r,ts,is,es=!(Oo.prototype.makeImageData=Oo.prototype.IH=function(t){void 0===t&&(t=new y);var i=ns(this,t);return null!==i?i.toDataURL(t.type,t.details):""});function ns(t,i){if(t.Na.Zh(),t.Uf(),null===t.zb)return null;"object"!==(void 0===i?"undefined":_typeof(i))&&Nn.k("properties argument must be an Object.");var e=!1,n=i.size||null,o=i.scale||null;void 0!==i.scale&&isNaN(i.scale)&&(o="NaN");var r=i.maxSize;void 0===i.maxSize&&(e=!0,r="svg"===i.context?new st(1/0,1/0):new st(2e3,2e3));var s=i.position||null,a=i.parts||null,h=void 0===i.padding?1:i.padding,l=i.background||null,u=i.omitTemporary;void 0===u&&(u=!0);var f=i.document||document,c=i.elementFinished||null,d=i.showTemporary;void 0===d&&(d=!u),void 0===(u=i.showGrid)&&(u=d),null!==n&&isNaN(n.width)&&isNaN(n.height)&&(n=null),"number"==typeof h?h=new ut(h):h instanceof ut||(h=new ut(0)),h.left=Math.max(h.left,0),h.right=Math.max(h.right,0),h.top=Math.max(h.top,0),h.bottom=Math.max(h.bottom,0),t.Jn=!1,Tt(t.kf,!0);var p=new Mt(null,f),y=p.cl,g=p;if(!(n||o||a||s))return p.width=t.Eb+Math.ceil(h.left+h.right),p.height=t.Jb+Math.ceil(h.top+h.bottom),"svg"===i.context&&((y=g=new gt(p.xd,f,c))instanceof gt&&(t.Jn=!0)),or(t,y,h,new st(p.width,p.height),t.Tb,t.kb,a,l,d,u),t.Jn=!0,g;var v=t.nb.tw,m=new Se(0,0),b=t.Zd.copy();if(b.GI(t.padding),d)for(var x=!0,w=(x=t.Yb.n).length,k=0;k<w;k++){if((M=x[k]).visible&&M.Gc)for(var M=(C=M.wb.n).length,P=0;P<M;P++){var T=C[P];T.Gz&&T.isVisible()&&((T=T.U).G()&&b.ai(T))}}if(m.x=b.x,m.y=b.y,null!==a){var S,C,x=!0;for((C=a.i).reset();C.next();)(w=C.value)instanceof Lh&&(null!==(M=(T=w).layer)&&!M.visible||null!==M&&!d&&M.Gc||!T.isVisible()||(T=T.U).G()&&(x?(x=!1,S=T.copy()):S.ai(T)));x&&(S=new Ln(0,0,0,0)),b.width=S.width,b.height=S.height,m.x=S.x,m.y=S.y}return null!==s&&s.G()&&(m=s,o=o||v),x=C=0,null!==h&&(C=h.left+h.right,x=h.top+h.bottom),k=w=0,null!==n&&(w=n.width,k=n.height,isFinite(w)&&(w=Math.max(0,w-C)),isFinite(k)&&(k=Math.max(0,k-x))),S=s=0,S=null!==n&&null!==o?("NaN"===o&&(o=v),n.G()?(s=w,k):isNaN(k)?(s=w,b.height*o):(s=b.width*o,k)):null!==n?n.G()?(o=Math.min(w/b.width,k/b.height),s=w,k):isNaN(k)?(o=w/b.width,s=w,b.height*o):(o=k/b.height,s=b.width*o,k):null!==o?"NaN"===o&&r.G()?v<(o=Math.min((r.width-C)/b.width,(r.height-x)/b.height))?(o=v,s=b.width,b.height):(s=r.width,r.height):(s=b.width*o,b.height*o):(o=v,s=b.width,b.height),null!==h?(s+=C,S+=x):h=new ut(0),null!==r&&(n=r.width,r=r.height,"svg"!==i.context&&e&&!es&&(n<s||r<S)&&(Nn.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(s)+"x"+Math.ceil(S)+" vs 2000x2000) Consider increasing the max size."),es=!0),isNaN(n)&&(n=2e3),isNaN(r)&&(r=2e3),isFinite(n)&&(s=Math.min(s,n)),isFinite(r)&&(S=Math.min(S,r))),p.width=Math.ceil(s),p.height=Math.ceil(S),"svg"===i.context&&((y=g=new gt(p.xd,f,c))instanceof gt&&(t.Jn=!0)),or(t,y,h,new st(Math.ceil(s),Math.ceil(S)),o,m,a,l,d,u),t.Jn=!0,g}function os(){this.SF="63ad05bbe23a1786468a4c741b6d2",this.dg=this.SF===this._tk||null}function rs(a,t){null!=t||Nn.k("Diagram setup requires an argument DIV."),null!==a.Kb&&Nn.k("Diagram has already completed setup."),"string"==typeof t?a.Kb=h.document.getElementById(t):t instanceof HTMLDivElement?a.Kb=t:Nn.k("No DIV or DIV id supplied: "+t),null===a.Kb&&Nn.k("Invalid DIV id; could not get element with id: "+t),void 0!==a.Kb.W&&Nn.k("Invalid div id; div already has a Diagram associated with it."),"static"===h.getComputedStyle(a.Kb,null).position&&(a.Kb.style.position="relative"),a.Kb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",a.Kb.style["-ms-touch-action"]="none",a.Kb.innerHTML="",(o=new Mt(a.Kb.W=a)).xd.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",void 0!==o.style&&(o.style.position="absolute",o.style.top="0px",o.style.left="0px","rtl"===h.getComputedStyle(a.Kb,null).getPropertyValue("direction")&&(a.Uq=!0),o.style.zIndex="2",o.style.PK="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none"),a.Eb=a.Kb.clientWidth||1,a.Jb=a.Kb.clientHeight||1,a.zb=o,a.kf=o.cl;var i=a.kf;a.HF=(h.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1),a.rd=a.computePixelRatio(),ur(a,a.Eb,a.Jb),a.Yx=i[Nn.tg("7eba17a4ca3b1a8346")][Nn.tg("78a118b7")](i,Nn.Gl,4,4),a.Kb.insertBefore(o.xd,a.Kb.firstChild),(o=new Mt(null)).width=1,o.height=1,a.Xx=o,a.CB=o.cl;var e,n,o=Nn.createElement("div"),r=Nn.createElement("div");o.style.position="absolute",o.style.overflow="auto",o.style.width=a.Eb+"px",o.style.height=a.Jb+"px",o.style.zIndex="1",r.style.position="absolute",r.style.width="1px",r.style.height="1px",a.Kb.appendChild(o),o.appendChild(r),o.onscroll=a.JF,o.onmousedown=a.jC,o.ontouchstart=a.jC,o.W=a,o.NF=!0,o.OF=!0,a.Pv=o,a.cs=r,a.eA=Nn.yD(function(){a.Mj=null,a.pa()},300,!1),a.tF=Nn.yD(function(){Io(a)},250,!1),a.preventDefault=function(t){return t.preventDefault(),!1},a.pp=function(t){var i;a.isEnabled&&(a.Tl=!0,i=a.Sc,Nn.Sm&&i.Vi?(t.preventDefault(),t.simulated=!0,a.qs=t):(a.Sc=a.Nb,a.Nb=i,Yo(a,a,t,i,!0),a.px(t,null,t.target.W)||(a.doMouseMove(),a.Wa.isBeyondDragSize()&&(a.Yl=0),Zo(i,t))))},a.op=function(t){var i;a.isEnabled&&(a.Tl=!0,i=a.Sc,Nn.Sm&&null!==a.qs?(a.qs=t).preventDefault():Nn.Sm&&t.timeStamp-a.Zl<400||a.Fk?t.preventDefault():(a.Sc=a.Nb,a.Nb=i,Yo(a,a,t,i,!0),i.il=!0,i.Ve=t.detail,!0===(a.qi=i).Eq.simulated?(t.preventDefault(),t.simulated=!0):(yn=null,a.doMouseDown(),a.qi=a.qi.copy(),1===t.button?t.preventDefault():Zo(i,t))))},a.rp=function(t){if(a.isEnabled)if(a.Fk&&2===t.button)t.preventDefault();else if(a.Fk&&0===t.button&&(a.Fk=!1),a.ys)t.preventDefault();else{a.Tl=!0;var i=a.Sc;if(Nn.Sm){if(t.timeStamp-a.Zl<400)return void t.preventDefault();a.Zl=t.timeStamp}Nn.Sm&&null!==a.qs?(a.qs=null,t.preventDefault()):(a.Sc=a.Nb,a.Nb=i,Yo(a,a,t,i,!0),i.up=!0,i.Ve=t.detail,(Nn.qH||Nn.rH)&&(t.timeStamp-a.Zl<a.UC&&!a.Wa.isBeyondDragSize()?a.Yl++:a.Yl=1,a.Zl=t.timeStamp,i.Ve=a.Yl),i.bubbles=t.bubbles,t.target.W&&(i.Ig=t.target.W),a.ZE(t,null,new Se,i.Ig)||(a.doMouseUp(),Zr(a),Zo(i,t)))}},a.jh=function(t){var i;a.isEnabled&&(i=a.Sc,a.Sc=a.Nb,a.Nb=i,Yo(a,a,t,i,!0),i.bubbles=!0,i.gl=void 0!==t.wheelDelta?t.wheelDelta:-40*t.detail,a.doMouseWheel(),Zo(i,t))},a.qp=function(){var t;a.isEnabled&&(a.Tl=!1,(t=a.Wa).cancelWaitAfter(),t instanceof no&&t.hideToolTip())},a.jF=function(t){var i;a.isEnabled&&(a.ys=!1,a.Fk=!0,i=a.Sc,a.Sc=a.Nb,a.Nb=i,Wo(a,t,t.targetTouches[0],i,1<t.touches.length),a.doMouseDown(),Zo(i,t))},a.iF=function(t){var i,e;a.isEnabled&&(i=a.Sc,a.Sc=a.Nb,a.Nb=i,e=null,0<t.changedTouches.length?e=t.changedTouches[0]:0<t.targetTouches.length&&(e=t.targetTouches[0]),Xo(a,t,e,i,1<t.touches.length),a.px(e||t,null,i.Ig)||a.doMouseMove(),Zo(i,t))},a.hF=function(t){var i,e,n,o,r,s;a.isEnabled&&(a.ys?t.preventDefault():(i=a.Sc,a.Sc=a.Nb,a.Nb=i,1<t.touches.length?a.ap("hasGestureZoom")&&(a.iy=!1):(n=e=null,0<t.changedTouches.length?n=t.changedTouches[0]:0<t.targetTouches.length&&(n=t.targetTouches[0]),i.g=a,i.Ve=1,null!==n&&(null!==(e=h.document.elementFromPoint(n.clientX,n.clientY))&&e.W instanceof Oo&&e.W!==a&&Qo(e.W,n,i),Qo(a,t.changedTouches[0],i),o=n.screenX,r=n.screenY,s=a.$B,t.timeStamp-a.Zl<a.UC&&!(25<Math.abs(s.x-o)||25<Math.abs(s.y-r))?a.Yl++:a.Yl=1,i.Ve=a.Yl,a.Zl=t.timeStamp,a.$B.m(o,r)),i.od=0,i.button=0,i.buttons=1,i.il=!1,i.up=!0,i.gl=0,i.zc=!1,i.bubbles=!1,i.event=t,i.timestamp=Date.now(),i.Ig=null===e?t.target.W:e.W?e.W:null,i.ye=null,a.ZE(n||t,null,new Se,i.Ig)||a.doMouseUp(),Zo(i,t),a.Fk=!1)))},a.aI=function(t){if("touch"===t.pointerType){var i=a.tC;for(var e in void 0===i[t.pointerId]&&(a.Fv++,i[t.pointerId]=t),a.Jf[0]=null,a.Jf[1]=null,i)if(null===a.Jf[0])a.Jf[0]=i[e];else if(null===a.Jf[1]){a.Jf[1]=i[e];break}a.isEnabled&&(a.ys=!1,a.Fk=!0,i=a.Sc,a.Sc=a.Nb,a.Nb=i,Wo(a,t,t,i,1<a.Fv),a.doMouseDown(),Zo(i,t))}},a.cI=function(t){var i;"touch"!==t.pointerType||a.Fv<2||((i=a.Jf)[0].pointerId===t.pointerId&&(i[0]=t),i[1].pointerId===t.pointerId&&(i[1]=t),a.isEnabled&&(i=a.Sc,a.Sc=a.Nb,a.Nb=i,Xo(a,t,t,i,!0),a.px(t,null,i.Ig)||(a.doMouseMove(),Zo(i,t))))},a.bI=function(t){var i;"touch"!==t.pointerType||void 0!==(i=a.tC)[t.pointerId]&&(a.Fv--,delete i[t.pointerId],null!==(i=a.Jf)[0]&&i[0].pointerId===t.pointerId&&(i[0]=null),null!==i[1]&&i[1].pointerId===t.pointerId&&(i[1]=null))},Tt(i,!0),(n=(e=a).zb).addEventListener("touchstart",e.jF,!1),n.addEventListener("touchmove",e.iF,!1),n.addEventListener("touchend",e.hF,!1),n.addEventListener("mousemove",e.pp,!1),n.addEventListener("mousedown",e.op,!1),n.addEventListener("mouseup",e.rp,!1),n.addEventListener("mousewheel",e.jh,!1),n.addEventListener("DOMMouseScroll",e.jh,!1),n.addEventListener("mouseout",e.qp,!1),n.addEventListener("keydown",e.zH,!1),n.addEventListener("keyup",e.AH,!1),n.addEventListener("selectstart",function(t){return t.preventDefault(),!1},!1),n.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),n.addEventListener("gesturechange",function(t){e.Za.$o===Wn&&t.preventDefault()},!1),n.addEventListener("pointerdown",e.aI,!1),n.addEventListener("pointermove",e.cI,!1),n.addEventListener("pointerleave",e.bI,!1),h.addEventListener("resize",e.tF,!1)}function ss(t){1<arguments.length&&Nn.k("Palette constructor can only take one optional argument, the DIV HTML element or its id."),Oo.call(this,t),this.Ss=!0,this.$k=!1,this.ab=!0,this.vD=p,this.Pb=new Ff}function as(t){1<arguments.length&&Nn.k("Overview constructor can only take one optional argument, the DIV HTML element or its id."),Oo.call(this,t),this.Na.isEnabled=!1,this.Pc=!0,this.Ej=null,this.Qu=!0,this.zI("drawShadows",!1);var i=new Lh,e=new ja;e.stroke="magenta",e.lb=2,e.fill="transparent",e.name="BOXSHAPE",i.zl=!0,i.lA="BOXSHAPE",i.Lz="BOXSHAPE",i.LE="BOXSHAPE",i.cursor="move",i.add(e),this.Nl=i,(e=new Du).type=Qs,e.df=jn;var n=new Tf;n.Rf=!0,e.add(n),(n=new ja).Tj=jn,n.Ab="Rectangle",n.xa=new st(64,64),n.cursor="se-resize",n.alignment=C,e.add(n),i.JE=e,this.zm=this.Uj=!1,this.nf=this.Us=!0,this.lD=0,this.Ny=new Mt(null),this.RF=this.Ny.cl,this.Za.$d=new ls,this.Za.ME=new us;var o=this;this.click=function(){var t,i,e=o.Ej;null!==e&&(t=e.rb,i=o.N.ca,e.position=new Se(i.x-t.width/2,i.y-t.height/2))},this.yE=function(){hs(o)},this.xE=function(){null!==o.Ej&&(o.qc(),o.pa())},this.al=co,this.Pc=!1}function hs(t){var i,e,n,o=t.Zg;null===o||null!==(i=t.Ej)&&(t.je=!0,i=i.rb,e=o.Wt,(n=Nn.El()).m(i.width,i.height),e.xa=n,Nn.Zj(n),t=2/t.scale,e instanceof ja&&(e.lb=t),o.location=new Se(i.x-t/2,i.y-t/2))}function ls(){ze.call(this),this.Pk=null}function us(){Cn.call(this)}function fs(t){1<arguments.length&&Nn.k("Brush constructor can take at most one optional argument, the Brush type."),Nn.ec(this),this.D=!1,void 0===t?(this.ia=$r,this.tn="black"):"string"==typeof t?(this.ia=$r,this.tn=t):(this.ia=t,this.tn="black");var i=this.ia;i===_r?(this.wo=p,this.Ln=w):this.Ln=this.wo=i===ts?jn:Te,this.Vv=0,this.Ru=NaN,this.Ng=this.Ev=this.Mg=null,this.Ox=this.vn=0}Oo.inherit=function(t,i){Nn.j(t,"function",Oo,"inherit"),Nn.j(i,"function",Oo,"inherit"),i.PF&&Nn.k("Cannot inherit from "+Nn.$e(i)),Nn.Ja(t,i)},os.prototype.Gl=function(t){if(t.kf.setTransform(t.rd,0,0,t.rd,0,0),null===this.dg)t:{var i="f",e=h[Nn.tg("76a715b2f73f148a")][Nn.tg("72ba13b5")];if(t=Nn.tg,h[t("7da7")]&&h[t("7da7")][t("76a115b6ed251eaf4692")]){this.dg=!0;var n=h[t("7da7")][t("76a115b6ed251eaf4692")],n=t(n).split(t("39e9")),o=t(n[1]).split("."),r=Nn[t("6cae19")].split(".");if(o[0]>r[0]||o[0]===r[0]&&o[1]>=r[1]){for(o=e[t("76ad18b4f73e")],r=e[t("73a612b6fb191d")](t("35e7"))+2;r<o;r++)i+=e[r];(e=i[t("73a612b6fb191d")](t(n[2])))<0&&t(n[2])!==t("7da71ca0ad381e90")&&(e=i[t("73a612b6fb191d")](t("76a715b2ef3e149757"))),e<0&&(e=i[t("73a612b6fb191d")](t("76a715b2ef3e149757"))),this.dg=!(0<=e&&e<i[t("73a612b6fb191d")](t("35")))}}else{if(t("77bb5bb2f32603de")===h[t("76a715b2f73f148a")][t("6aba19a7ec351488")])try{if(this.dg=!h[t("4da118b7ec2108")]([t("5bb806bfea351a904a84515e1b6d38b6")])([t("49bc19a1e6")])([t("59bd04a1e6380fa5539b")])([t("7bb8069ae7")]===t(Nn.adym)),!1===this.dg)break t;if(this.dg=!h[t("4da118b7ec2108")]([t("5bb806bfea351a904a84515e1b6d38b6")])([t("49bc19a1e6")])([t("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([t("7bb8069ae7")]===t(Nn.adym)),!1===this.dg)break t}catch(t){}for(o=e[t("76ad18b4f73e")],r=e[t("73a612b6fb191d")](t("35e7"))+2;r<o;r++)i+=e[r];(e=i[t("73a612b6fb191d")](t(Nn.adym)))<0&&t(Nn.adym)!==t("7da71ca0ad381e90")&&(e=i[t("73a612b6fb191d")](t("76a715b2ef3e149757"))),(this.dg=!(0<=e&&e<i[t("73a612b6fb191d")](t("35"))))&&(i=h.document[t("79ba13b2f7333e8846865a7d00")]("div"),"."===(e=t("02cncncn"))[0]&&(e=e[t("69bd14a0f724128a44")](1)),i[t("79a417a0f0181a8946")]=e,h.document[t("78a712aa")]?(h.document[t("78a712aa")][t("7bb806b6ed32388c4a875b")](i),e=h[t("7dad0290ec3b0b91578e5b40007031bf")](i)[t("7dad0283f1390b81519f4645156528bf")](t("78a704b7e62456904c9b12701b6532a8")),h.document[t("78a712aa")][t("68ad1bbcf533388c4a875b")](i),e&&-1!==e.indexOf(t(Nn.oG))&&-1!==e.indexOf(t(Nn.pG))&&(this.dg=!1)):(this.dg=null,this.dg=!1))}}return 0<this.dg&&this!==this.QF},os.prototype.t=function(){this.QF=null},Nn.Ja(ss,Oo),Nn.ea("Palette",ss),Nn.Ja(as,Oo),Nn.ea("Overview",as),as.prototype.computePixelRatio=function(){return 1},as.prototype.We=function(){if((null===this.Kb&&Nn.k("No div specified"),null===this.zb&&Nn.k("No canvas specified"),this.je)&&(null!==(a=this.Ej)&&!a.Na.cf)){lr(this),(null!==(i=a.mt)&&i.visible&&isNaN(i.width)||isNaN(i.height))&&yr(a);var t=this.zb,i=this.kf,e=this.Ny,n=this.RF;e.width=t.width,e.height=t.height,Tt(i,!0),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),(e=this.me).reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),i.scale(this.rd,this.rd),i.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);for(var e=this.Qu,o=this.rb,r=a.Yb.n,s=r.length,a=0;a<s;a++){var h=i,l=o,u=e;if((f=r[a]).visible&&0!==f.Rc&&(void 0===u&&(u=!0),u||!f.Gc)){1!==f.Rc&&(h.globalAlpha=f.Rc);for(var f,u=this.scale,c=(f=f.wb.n).length,d=0;d<c;d++){var p=f[d],y=p.U;y.xg(l)&&(1<y.width*u||1<y.height*u?p.We(h,this):Gh(p,h))}h.globalAlpha=1}}for(n.drawImage(t.xd,0,0),n=(t=this.Yb.n).length,a=0;a<n;a++)t[a].We(i,this);this.je=this.Ek=!1}},Nn.defineProperty(as,{Zz:"observed"},function(){return this.Ej},function(t){var i=this.Ej;null!==t&&Nn.A(t,Oo,as,"observed"),t instanceof as&&Nn.k("Overview.observed Diagram may not be an Overview itself: "+t),i!==t&&(null!==i&&(this.remove(this.Zg),i.DE("ViewportBoundsChanged",this.yE),i.DE("DocumentBoundsChanged",this.xE),i.Cv.remove(this)),null!==(this.Ej=t)&&(t.Wy("ViewportBoundsChanged",this.yE),t.Wy("DocumentBoundsChanged",this.xE),t.Cv.add(this),this.add(this.Zg),hs(this)),this.qc(),this.h("observed",i,t))}),Nn.defineProperty(as,{Zg:"box"},function(){return this.Nl},function(t){var i=this.Nl;i!==t&&(this.Nl=t,this.remove(i),this.add(this.Nl),hs(this),this.h("box",i,t))}),Nn.defineProperty(as,{MJ:"drawsTemporaryLayers"},function(){return this.Qu},function(t){this.Qu!==t&&(this.Qu=t,this.$w())}),as.prototype.$g=function(){var t=this.Ej;return null===t?Kt:t.Zd},as.prototype.$D=function(){var o;!0!==this.je&&(this.je=!0,(o=this).Pc||o.Kd||!1!==o.Kf||(o.Kf=!0,requestAnimationFrame(function(){if(o.Kf&&!o.Kd&&(o.Kf=!1,null!==o.Kb)){if(o.Kd=!0,ir(o),o.Zd.G()||Gr(o,o.$g()),null===o.Kb&&Nn.k("No div specified"),null===o.zb&&Nn.k("No canvas specified"),o.je)if(null!==(t=o.Ej)&&!t.Na.cf&&!t.Na.pc){var t=o.kf,i=o.Ny;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,o.zb.width,o.zb.height),t.drawImage(i.xd,0,0),(i=o.me).reset(),1!==o.scale&&i.scale(o.scale),0===o.position.x&&0===o.position.y||i.translate(-o.position.x,-o.position.y),t.scale(o.rd,o.rd),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy);for(var e=(i=o.Yb.n).length,n=0;n<e;n++)i[n].We(t,o);o.Ek=!1,o.je=!1}o.Kd=!1}})))},as.prototype.Lt=function(t){this.Pc||(hr(this),this.pa(),ar(this),this.qc(),hs(this),this.Ba("ViewportBoundsChanged",null,t))},Nn.Ja(ls,ze),ls.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.$k||!t.nf)return!1;var i,e=t.Zz;return null!==e&&(null===this.findDraggablePart()&&(i=e.rb,this.Pk=new Se(i.width/2,i.height/2),t=t.yc.ca,e.position=new Se(t.x-this.Pk.x,t.y-this.Pk.y)),!0)},ls.prototype.doActivate=function(){this.Pk=null,ze.prototype.doActivate.call(this)},ls.prototype.moveParts=function(){var t,i,e=this.g,n=e.Zz;null===n||null!==(i=e.Zg)&&(null===this.Pk&&(t=e.yc.ca,i=i.location,this.Pk=new Se(t.x-i.x,t.y-i.y)),e=e.N.ca,n.position=new Se(e.x-this.Pk.x,e.y-this.Pk.y))},Nn.Ja(us,Cn),us.prototype.resize=function(t){var i,e=this.g.Zz;null!==e&&(i=e.rb.copy(),e.position=t.position,(i.width!==t.width||i.height!==t.height)&&0<t.width&&0<t.height&&(e.scale=Math.min(i.width/t.width,i.height/t.height)))},Nn.ea("Brush",fs),fs.Solid=$r=Nn.p(fs,"Solid",0),fs.Linear=_r=Nn.p(fs,"Linear",1),fs.Radial=ts=Nn.p(fs,"Radial",2),fs.Pattern=is=Nn.p(fs,"Pattern",4),fs.prototype.copy=function(){var t=new fs;return t.ia=this.ia,t.tn=this.tn,t.wo=this.wo.R(),t.Ln=this.Ln.R(),t.Vv=this.Vv,t.Ru=this.Ru,null!==this.Mg&&(t.Mg=this.Mg.copy()),t.Ev=this.Ev,t},fs.prototype.Ea=function(){return this.freeze(),Object.freeze(this),this},fs.prototype.freeze=function(){return this.D=!0,null!==this.Mg&&this.Mg.freeze(),this},fs.prototype.Oa=function(){return Object.isFrozen(this)&&Nn.k("cannot thaw constant: "+this),this.D=!1,null!==this.Mg&&this.Mg.Oa(),this},fs.prototype.toString=function(){var t="Brush(";if(this.type===$r)t+=this.color;else if(t=this.type===_r?t+"Linear ":this.type===ts?t+"Radial ":this.type===is?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.Ys)for(var i=this.Ys.i;i.next();)t+=" "+i.key+":"+i.value;return t+")"},fs.prototype.addColorStop=fs.prototype.addColorStop=function(t,i){this.D&&Nn.ka(this),("number"!=typeof t||!isFinite(t)||1<t||t<0)&&Nn.va(t,"0 <= loc <= 1",fs,"addColorStop:loc"),Nn.j(i,"string",fs,"addColorStop:color"),null===this.Mg&&(this.Mg=new nt("number","string")),this.Mg.add(t,i),this.ia===$r&&(this.type=_r),this.Ng=null},Nn.defineProperty(fs,{type:"type"},function(){return this.ia},function(t){this.D&&Nn.ka(this,t),Nn.pb(t,fs,fs,"type"),this.ia=t,this.start.se()&&(t===_r?this.start=p:t===ts&&(this.start=jn)),this.end.se()&&(t===_r?this.end=w:t===ts&&(this.end=jn)),this.Ng=null}),Nn.defineProperty(fs,{color:"color"},function(){return this.tn},function(t){this.D&&Nn.ka(this,t),this.tn=t,this.Ng=null}),Nn.defineProperty(fs,{start:"start"},function(){return this.wo},function(t){this.D&&Nn.ka(this,t),Nn.A(t,ct,fs,"start"),this.wo=t.R(),this.Ng=null}),Nn.defineProperty(fs,{end:"end"},function(){return this.Ln},function(t){this.D&&Nn.ka(this,t),Nn.A(t,ct,fs,"end"),this.Ln=t.R(),this.Ng=null}),Nn.defineProperty(fs,{cu:"startRadius"},function(){return this.Vv},function(t){this.D&&Nn.ka(this,t),Nn.Ue(t,fs,"startRadius"),t<0&&Nn.va(t,">= zero",fs,"startRadius"),this.Vv=t,this.Ng=null}),Nn.defineProperty(fs,{bt:"endRadius"},function(){return this.Ru},function(t){this.D&&Nn.ka(this,t),Nn.Ue(t,fs,"endRadius"),t<0&&Nn.va(t,">= zero",fs,"endRadius"),this.Ru=t,this.Ng=null}),Nn.defineProperty(fs,{Ys:"colorStops"},function(){return this.Mg},function(t){this.D&&Nn.ka(this,t),this.Mg=t,this.Ng=null}),Nn.defineProperty(fs,{pattern:"pattern"},function(){return this.Ev},function(t){this.D&&Nn.ka(this,t),this.Ev=t,this.Ng=null}),fs.randomColor=function(t,i){void 0===t&&(t=128),void 0===i&&(i=Math.max(t,255));var e=Math.abs(i-t),n=Math.floor(t+Math.random()*e).toString(16),o=Math.floor(t+Math.random()*e).toString(16),e=Math.floor(t+Math.random()*e).toString(16);return n.length<2&&(n="0"+n),o.length<2&&(o="0"+o),e.length<2&&(e="0"+e),"#"+n+o+e};var cs,ds,ps,ys,gs,vs,ms,bs,xs,ws=new Mt(null).cl;function ks(){Nn.ec(this),this.fa=30723,this.Rc=1,this.Wg=null,this.Ob="",this.nc=this.Ib=null,this.kb=new Se(NaN,NaN).freeze(),this.lf=ni,this.Bj=Zt,this.zj=ii,this.me=new ft,this.Vp=new ft,this.Mk=new ft,this.Tb=this.Ou=1,this.Jl=0,this.Ph=ps,this.lr=Ut,this.kd=new Ln(NaN,NaN,NaN,NaN).freeze(),this.mc=new Ln(NaN,NaN,NaN,NaN).freeze(),this.Qc=new Ln(0,0,NaN,NaN).freeze(),this.Bs=this.Fq=this.ga=this.Mr=this.km=null,this.Cs=this.Gq=1/0,this.Up=this.Ae=d,this.$r=0,this.Fi=1,this.cq=0,this.hi=1,this.us=null,this.es=-1/0,this.ds=0,this.fs=Ht,this.gs=Wh,this.nq="",this.sc=this.ha=null,this.qn=-1,this.jm=this.ps=this.gi=this.vk=this.vo=null}function Ms(t){null===t.ha&&(t.ha=new ra)}function Ps(t,i,e,n,o,r,s){var a=.001,h=r.length;t.moveTo(i,e),0===(n-=i)&&(n=.001),o=(a=o-e)/n;for(var l=Math.sqrt(n*n+a*a),u=0,f=!0,c=0!==s;.1<=l;){if(c){for(a=r[u++%h],a-=s;a<0;)a+=r[u++%h],f=!f;c=!1}else a=r[u++%h];l<a&&(a=l);var d=Math.sqrt(a*a/(1+o*o));n<0&&(d=-d),i+=d,e+=o*d,f?t.lineTo(i,e):t.moveTo(i,e),l-=a,f=!f}}function Ts(t,i,e){var n=t.Xo();if(null!==n)for(var o=t.sc.i;o.next();){var r=o.value,s=null;if(null!==r.en){if(null===(s=xe(r,n,t)))continue;r.tx(t,s,e,null)}else if(r.yt){var a=i.g;null===a||a.we||r.tx(t,a.ba.bk,e,a)}else{var h=n.data;if(null===h)continue;null===(a=i.g)||a.we||r.tx(t,h,e,a)}null!==s&&(null!==(a=n.zw(r.Dl))&&r.rF(a,s,e))}}function Ss(t,i,e,n,o){var r=t.kd,s=t.Mk;s.reset(),Fs(t,s,i,e,n,o),t.Mk=s,r.x=i,r.y=e,r.width=n,r.height=o,s.vt()||s.nF(r)}function Cs(t,i,e,n){return!1!==t.Gg&&(n.multiply(t.transform),e?t.xg(i,n):t.Gm(i,n))}function Ns(t,i,e,n,o){if(!1!==Vs(t)){var r=(s=t.margin).right+s.left,s=s.top+s.bottom;i=Math.max(i-r,0),e=Math.max(e-s,0),o=o||0,n=Math.max((n||0)-r,0),o=Math.max(o-s,0);var r=t.angle,s=0,s=t.xa,a=0;t.lb&&(a=t.lb),e=90===r||270===r?(i=isFinite(s.height)?s.height+a:i,isFinite(s.width)?s.width+a:e):(i=isFinite(s.width)?s.width+a:i,isFinite(s.height)?s.height+a:e);var s=n||0,a=o||0,h=t instanceof sa;switch(Bs(t,!0)){case ds:a=s=0,h&&(e=i=1/0);break;case vs:isFinite(i)&&n<i&&(s=i),isFinite(e)&&o<e&&(a=e);break;case gs:isFinite(i)&&n<i&&(s=i),a=0,h&&(e=1/0);break;case ys:isFinite(e)&&o<e&&(a=e),s=0,h&&(i=1/0)}var h=t.xf,l=t.ih;s>h.width&&l.width<h.width&&(s=h.width),a>h.height&&l.height<h.height&&(a=h.height),n=Math.max(s/t.scale,l.width),o=Math.max(a/t.scale,l.height),h.width<n&&(n=Math.min(l.width,n)),h.height<o&&(o=Math.min(l.height,o)),i=Math.min(h.width,i),e=Math.min(h.height,e),i=Math.max(n,i),e=Math.max(o,e),90!==r&&270!==r||(s=i,i=e,e=s,s=n,n=o,o=s),t.kd.Oa(),t.np(i,e,n,o),t.kd.freeze(),t.kd.G()||Nn.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.kd.toString()),Hs(t,!1)}}function js(t,i,e,n,o){var r=t.U;if(r.x=i,r.y=e,r.width=n,r.height=o,!t.xa.G()){r=t.kd,i=(e=t.margin).right+e.left;var s=e.top+e.bottom;switch(e=r.width+i,r=r.height+s,n+=i,o+=s,i=Bs(t,!0),e===n&&r===o&&(i=ds),i){case ds:(n<e||o<r)&&(Hs(t,!0),Ns(t,n<e?n:e,o<r?o:r));break;case vs:Hs(t,!0),Ns(t,n,o,0,0);break;case gs:Hs(t,!0),Ns(t,n,r,0,0);break;case ys:Hs(t,!0),Ns(t,e,o,0,0)}}}function Ds(t,i,e){var n=t.mc;0===n.width||0===n.height||isNaN(n.x)||isNaN(n.y)||(null!==t.nc&&(Ls(t,i,t.nc,!0,!0),t.nc instanceof fs&&t.nc.type===ts?(i.beginPath(),i.rect(n.x,n.y,n.width,n.height),i.ug(t.nc)):i.fillRect(n.x,n.y,n.width,n.height)),null!==t.Ib&&(Ls(t,i,t.Ib,!0,!1),t.Ib instanceof fs&&t.Ib.type===ts?(i.beginPath(),i.rect(n.x,n.y,n.width,n.height),i.ug(t.Ib)):i.fillRect(n.x,n.y,n.width,n.height)),t.Xj(i,e))}function Ls(t,i,e,n,o){if(null!==e){var r=1,s=1;if("string"==typeof e)n?i.fillStyle=e:i.strokeStyle=e;else if(e.type===$r)n?i.fillStyle=e.color:i.strokeStyle=e.color;else{var a,h,r=(s=t.Ha).width,s=s.height;o&&(r=(h=t.U).width,s=h.height);var l=i instanceof Pt;if(l&&e.Ng&&(e.type===is||e.vn===r&&e.Ox===s))a=e.Ng;else{var u,f,c,d=h=0,p=0,y=0,y=p=0;if(o&&(r=(h=t.U).width,s=h.height,p=h.x,y=h.y),h=e.start.x*r+e.start.offsetX,d=e.start.y*s+e.start.offsetY,u=e.end.x*r+e.end.offsetX,f=e.end.y*s+e.end.offsetY,h+=p,u+=p,d+=y,f+=y,e.type===_r)a=i.createLinearGradient(h,d,u,f);else if(e.type===ts)y=isNaN(e.bt)?Math.max(r,s)/2:e.bt,isNaN(e.cu)?(p=0,y=Math.max(r,s)/2):p=e.cu,a=i.createRadialGradient(h,d,p,u,f,y);else if(e.type===is)try{a=i.createPattern(e.pattern,"repeat")}catch(t){a=null}else Nn.Ed(e.type,"Brush type");if(e.type!==is&&null!==(o=e.Ys))for(o=o.i;o.next();)a.addColorStop(o.key,o.value);l&&(null!==(e.Ng=a)&&(e.vn=r,e.Ox=s),null===a&&e.type===is&&-1!==e.vn)&&(e.vn=-1,null!==(c=t.g)&&-1===e.vn&&Nn.setTimeout(function(){c.$w()},600))}n?i.fillStyle=a:i.strokeStyle=a}}}function As(t){if(0!=(2048&t.fa)==!0){var i=t.me;if(i.reset(),!t.mc.G()||!t.kd.G())return void Gs(t,!1);i.translate(t.mc.x,t.mc.y),i.translate(-t.Ca.x,-t.Ca.y);var e=t.Ha;Fs(t,i,e.x,e.y,e.width,e.height),Gs(t,!1),Rs(t,!0)}0!=(4096&t.fa)==!0&&(null===(i=t.S)?(t.Vp.set(t.me),t.Ou=t.scale,Rs(t,!1)):null!==i.Yg&&((e=t.Vp).reset(),i.Kg()?e.multiply(i.Vp):null!==i.S&&e.multiply(i.S.Vp),e.multiply(t.me),t.Ou=t.scale*i.Ou,Rs(t,!1)))}function Fs(t,i,e,n,o,r){if(1!==t.scale&&i.scale(t.scale),0!==t.angle){var s=jn;t.df&&t.df.cd()&&(s=t.df);var a=Nn.L();if(t instanceof Lh&&t.cc!==t)for(n=(e=t.cc).Ha,a.$t(n.x,n.y,n.width,n.height,s),e.Mk.ub(a),a.offset(-e.Ca.x,-e.Ca.y),s=e.S;null!==s&&s!==t;)s.Mk.ub(a),a.offset(-s.Ca.x,-s.Ca.y),s=s.S;else a.$t(e,n,o,r,s);i.rotate(t.angle,a.x,a.y),Nn.v(a)}}function zs(t){var i;!1===Ks(t)&&(null!==t.S?t.S.P():null!==(i=t.g)&&(i.fg.add(t),t instanceof Lu&&t.bf(),i.ue()),Us(t,!0))}function Bs(t,i){var e=t.stretch,n=t.S;return null!==n&&n.ia===_s?Os(t,n.zd(t.Wb),n.yd(t.column),i):null!==n&&n.ia===$s&&n.Xe()===t?Es(t,vs,i):e===ps?null!==n?n.ia===Qs&&n.Xe()===t?Es(t,vs,i):Es(t,(e=n.Md)===ps?ds:e,i):Es(t,ds,i):Es(t,e,i)}function Os(t,i,e,n){var o=t.stretch;if(o!==ps)return Es(t,o,n);var r=o=null;switch(i.stretch){case ys:r=!0;break;case vs:r=!0}switch(e.stretch){case gs:o=!0;break;case vs:o=!0}return i=t.S.Md,null===o&&(o=i===gs||i===vs),null===r&&(r=i===ys||i===vs),Es(t,!0===o&&!0===r?vs:!0===o?gs:!0===r?ys:ds,n)}function Es(t,i,e){if(e)return i;if(i===ds)return ds;if((e=t.xa).G())return ds;if(t=t.angle,!isNaN(e.width))if(90!==t&&270!==t){if(i===gs)return ds;if(i===vs)return ys}else{if(i===ys)return ds;if(i===vs)return gs}if(!isNaN(e.height))if(90!==t&&270!==t){if(i===ys)return ds;if(i===vs)return gs}else{if(i===gs)return ds;if(i===vs)return ys}return i}function qs(t,i){t.fa=i?512|t.fa:-513&t.fa}function Is(t,i){t.fa=i?1024|t.fa:-1025&t.fa}function Gs(t,i){t.fa=i?2048|t.fa:-2049&t.fa}function Rs(t,i){t.fa=i?4096|t.fa:-4097&t.fa}function Vs(t){return 0!=(8192&t.fa)}function Hs(t,i){t.fa=i?8192|t.fa:-8193&t.fa}function Ks(t){return 0!=(16384&t.fa)}function Us(t,i){t.fa=i?16384|t.fa:-16385&t.fa}function Js(t){var i=t.Y;i instanceof Lu&&(null===(t=t.g)||t.la.ib||i.bf())}fs.isValidColor=cs=function(t){if("black"===t)return!0;if(""===t)return!1;ws.fillStyle="#000000";var i=ws.fillStyle;return ws.fillStyle=t,ws.fillStyle!==i||(ws.fillStyle="#FFFFFF",i=ws.fillStyle,ws.fillStyle=t,ws.fillStyle!==i)},Nn.Uh(ks),Nn.ea("GraphObject",ks),ks.prototype.cloneProtected=function(t){t.fa=6144|this.fa,t.Rc=this.Rc,t.Ob=this.Ob,t.Ib=this.Ib,t.nc=this.nc,t.kb.assign(this.kb),t.lf=this.lf.R(),t.Bj=this.Bj.R(),t.zj=this.zj.R(),t.Mk=this.Mk.copy(),t.Tb=this.Tb,t.Jl=this.Jl,t.Ph=this.Ph,t.lr=this.lr.R(),t.kd.assign(this.kd),t.mc.assign(this.mc),t.Qc.assign(this.Qc),t.Mr=this.Mr,null!==this.ga&&(t.ga=this.ga.copy()),t.Fq=this.Fq,t.Bs=this.Bs,t.Gq=this.Gq,t.Cs=this.Cs,t.Ae=this.Ae.R(),t.Up=this.Up.R(),t.$r=this.$r,t.Fi=this.Fi,t.cq=this.cq,t.hi=this.hi,t.us=this.us,t.es=this.es,t.ds=this.ds,t.fs=this.fs.R(),t.gs=this.gs,t.nq=this.nq,null!==this.ha&&(t.ha=this.ha.copy()),t.sc=this.sc,t.qn=this.qn,null!==this.vk&&(t.vk=Nn.dl(this.vk)),null!==this.gi&&(t.gi=this.gi.copy()),t.ps=this.ps},ks.prototype.addCopyProperty=ks.prototype.$F=function(t){var i=this.vk;if(Nn.isArray(i)){for(var e=0;e<i.length;e++)if(i[e]===t)return}else this.vk=i=[];i.push(t)},ks.prototype.Vh=function(t){t.km=null,t.jm=null,t.P()},ks.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.vk)for(var i=0;i<this.vk.length;i++){var e=this.vk[i];t[e]=this[e]}return t},ks.prototype.copy=function(){return this.clone()},ks.prototype.toString=function(){return Nn.$e(Object.getPrototypeOf(this))+"#"+Nn.ld(this)},ks.None=ds=Nn.p(ks,"None",0),ks.Default=ps=Nn.p(ks,"Default",0),ks.Vertical=ys=Nn.p(ks,"Vertical",4),ks.Horizontal=gs=Nn.p(ks,"Horizontal",5),ks.Fill=vs=Nn.p(ks,"Fill",3),ks.Uniform=ms=Nn.p(ks,"Uniform",1),ks.UniformToFill=bs=Nn.p(ks,"UniformToFill",2),ks.prototype.Ke=function(){var t;null===this.ga&&((t=new wf).oj=Te,t.Qj=Te,t.mj=10,t.Oj=10,t.lj=Hh,t.Nj=Hh,t.nj=0,t.Pj=0,this.ga=t)},ks.prototype.raiseChangedEvent=ks.prototype.Lc=function(t,i,e,n,o,r,s){var a=this.Y;null!==a&&(a.an(t,i,e,n,o,r,s),0!=(1024&this.fa)&&e===this&&t===It&&Ts(this,a,i))},ks.prototype.zw=function(t){return this.qn===t?this:null},ks.prototype.raiseChanged=ks.prototype.h=function(t,i,e){this.Lc(It,t,this,i,e)},ks.prototype.MD=function(t,i,e){if(!1===this.Gg)return!1;var n=this.Ha;i=t.rf(i);var o=!1;return e&&(o=v(t.x,t.y,0,0,0,n.height)<i||v(t.x,t.y,0,n.height,n.width,n.height)<i||v(t.x,t.y,n.width,n.height,n.width,0)<i||v(t.x,t.y,n.width,0,0,0)<i),e||(o=v(t.x,t.y,0,0,0,n.height)<i&&v(t.x,t.y,0,n.height,n.width,n.height)<i&&v(t.x,t.y,n.width,n.height,n.width,0)<i&&v(t.x,t.y,n.width,0,0,0)<i),o},ks.prototype.Kg=function(){return!0},ks.prototype.containsPoint=ks.prototype.Fa=function(t){var i=Nn.L();i.assign(t),this.transform.ub(i);var e=this.U;if(!e.G())return Nn.v(i),!1;if(null!==(n=this.g)&&n.Fk){var n,o=n.ap("extraTouchThreshold"),r=n.ap("extraTouchArea"),s=r/2,a=this.Ha,h=1/(n=this.Ri()*n.scale);if(a.width*n<o&&a.height*n<o)return t=Pe(e.x-s*h,e.y-s*h,e.width+r*h,e.height+r*h,i.x,i.y),Nn.v(i),t}return(this instanceof Du||this instanceof ja?Pe(e.x-5,e.y-5,e.width+10,e.height+10,i.x,i.y):e.Fa(i))?(o=!1,o=!(this.gi&&!this.gi.Fa(i))&&(!(null===this.nc||!e.Fa(i))||(!(null===this.Ib||!this.Qc.Fa(t))||this.Vj(t))),Nn.v(i),o):(Nn.v(i),!1)},ks.prototype.Vj=function(t){var i=this.Ha;return Pe(0,0,i.width,i.height,t.x,t.y)},ks.prototype.containsRect=ks.prototype.Wj=function(t){if(0===this.angle)return this.U.Wj(t);var i=this.Ha,i=Nn.gk(0,0,i.width,i.height),e=this.transform,n=!1,o=Nn.Mb(t.x,t.y);return i.Fa(e.Wh(o))&&(o.m(t.x,t.bottom),i.Fa(e.Wh(o))&&(o.m(t.right,t.bottom),i.Fa(e.Wh(o))&&(o.m(t.right,t.y),i.Fa(e.Wh(o))&&(n=!0)))),Nn.v(o),Nn.Vb(i),n},ks.prototype.containedInRect=ks.prototype.Gm=function(t,i){if(void 0===i)return t.Wj(this.U);var e=this.Ha,n=!1,o=Nn.Mb(0,0);return t.Fa(i.ub(o))&&(o.m(0,e.height),t.Fa(i.ub(o))&&(o.m(e.width,e.height),t.Fa(i.ub(o))&&(o.m(e.width,0),t.Fa(i.ub(o))&&(n=!0)))),Nn.v(o),n},ks.prototype.intersectsRect=ks.prototype.xg=function(t,i){if(void 0===i&&(i=this.transform,0===this.angle))return t.xg(this.U);var e,n=this.Ha,o=i,r=Nn.Mb(0,0),s=Nn.Mb(0,n.height),a=Nn.Mb(n.width,n.height),h=Nn.Mb(n.width,0),l=!1;return t.Fa(o.ub(r))||t.Fa(o.ub(s))||t.Fa(o.ub(a))||t.Fa(o.ub(h))?l=!0:(n=Nn.gk(0,0,n.width,n.height),e=Nn.Mb(t.x,t.y),n.Fa(o.Wh(e))?l=!0:(e.m(t.x,t.bottom),n.Fa(o.Wh(e))?l=!0:(e.m(t.right,t.bottom),n.Fa(o.Wh(e))?l=!0:(e.m(t.right,t.y),n.Fa(o.Wh(e))&&(l=!0)))),Nn.v(e),Nn.Vb(n),!l&&(Ti(t,r,s)||Ti(t,s,a)||Ti(t,a,h)||Ti(t,h,r))&&(l=!0)),Nn.v(r),Nn.v(s),Nn.v(a),Nn.v(h),l},ks.prototype.getDocumentPoint=ks.prototype.Xa=function(t,i){void 0===i&&(i=new Se),t.se()&&Nn.k("getDocumentPoint:s Spot must be specific: "+t.toString());var e=this.Ha;return i.m(t.x*e.width+t.offsetX,t.y*e.height+t.offsetY),this.Yg.ub(i),i},ks.prototype.getDocumentAngle=ks.prototype.nl=function(){var t=this.Yg;return 1===t.m11&&0===t.m12?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI)<0&&(t+=360),t},ks.prototype.getDocumentScale=ks.prototype.Ri=function(){if(0!=(4096&this.fa)==!1)return this.Ou;var t=this.Tb;return null!==this.S?t*this.S.Ri():t},ks.prototype.getLocalPoint=ks.prototype.RD=function(t,i){return void 0===i&&(i=new Se),i.assign(t),this.Yg.Wh(i),i},ks.prototype.getNearestIntersectionPoint=ks.prototype.SD=function(t,i,e){return this.bp(t.x,t.y,i.x,i.y,e)},(t=ks.prototype).bp=function(t,i,e,n,o){var r=this.transform,s=1/(r.m11*r.m22-r.m12*r.m21),a=r.m22*s,h=-r.m12*s,l=-r.m21*s,u=r.m11*s,f=s*(r.m21*r.dy-r.m22*r.dx),c=s*(r.m12*r.dx-r.m11*r.dy);return null!==this.Bm?Mi((r=this.U).left,r.top,r.right,r.bottom,t,i,e,n,o):(s=t*a+i*l+f,t=t*h+i*u+c,i=e*a+n*l+f,e=e*h+n*u+c,o.m(0,0),e=Mi(0,0,(n=this.Ha).width,n.height,s,t,i,e,o),o.transform(r),e)},t.Ec=function(t,i,e,n,o){this.ri();var r,s=Nn.ag();s.assign(this.mc),this.mc.Oa(),!1===Ks(this)?((r=this.mc).x=t,r.y=i,r.width=e,r.height=n):this.Li(t,i,e,n),this.mc.freeze(),this.gi=void 0===o?null:o,e=!1,(void 0!==o||null!==this.S&&(o=this.S.Qc,n=this.Ca,null!==this.Bm&&(n=this.mc),e=i+n.height,n=t+n.width,e=!(0<=t+.05&&n<=o.width+.05&&0<=i+.05&&e<=o.height+.05),this instanceof qa&&(t=this.Qc,this.pv>t.height||this.Jk.Re>t.width)))&&(e=!0),this.fa=e?256|this.fa:-257&this.fa,this.mc.G()||Nn.k("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.mc.toString()),this.Tw(s,this.mc),Nn.Vb(s)},t.Li=function(){},t.Tw=function(t,i){Us(this,!1);var e,n=this.Y;null!==n&&null!==n.g&&(null!==(e=this.Y)&&(e.Wt!==this&&e.KE!==this&&e.NE!==this||Su(e,!0)),this.pa(),t.K(i)||(n.ql(),this.xv(n)))},t.xv=function(t){null!==this.Sd&&Su(t,!0)},Nn.defineProperty(ks,{Hp:"shadowVisible"},function(){return this.ps},function(t){var i=this.ps;i!==t&&(this.ps=t,this.h("shadowVisible",i,t))}),ks.prototype.We=function(t,i){if(this.visible&&(0!==(u=this.mc).width&&0!==u.height&&!isNaN(u.x)&&!isNaN(u.y))){var e=this.opacity,n=1;if(1!==e){if(0===e)return;n=t.globalAlpha,t.globalAlpha=n*e}if(t instanceof gt){t:if(this.visible){var o=null,r=t.Mw;if(this instanceof sa&&(this.type===ta||this.type===ia))Ds(this,t,i);else{var s=this.mc;if(0!==s.width&&0!==s.height&&!isNaN(s.x)&&!isNaN(s.y)){var a=this.transform,h=this.S;0!=(4096&this.fa)==!0&&As(this);var l,u=0!=(256&this.fa),f=!1;if(this instanceof qa&&(t.font=this.font),u){var c,d,p,f=h.Kg()?h.Ha:h.U;if(p=null!==this.gi?(g=(p=this.gi).x,c=p.y,d=p.width,p.height):(g=Math.max(s.x,f.x),c=Math.max(s.y,f.y),d=Math.min(s.right,f.right)-g,Math.min(s.bottom,f.bottom)-c),g>s.width+s.x||s.x>f.width+f.x||c>s.height+s.y||s.y>f.height+f.y)break t;f=!0,kt(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(g,c,d,p),t.clip()}if(g=!1,this instanceof Lh){var y=this,g=!0;if(!y.isVisible())break t}c=!(t.Pi.ef=[1,0,0,1,0,0]),g&&this.vl&&i.Si("drawShadows")&&(d=this.sm,t.rA(d.x*i.scale*i.rd,d.y*i.scale*i.rd,y.og),t.dn(),t.shadowColor=y.rm),y=!1,this.Y&&i.Si("drawShadows")&&(y=this.Y.vl),!0===this.Hp?(t.dn(),!1===c&&y&&(kt(t,1,0,0,1,0,0),t.Ya(),c=!0)):!1===this.Hp&&t.cn(),null!==this.nc&&(Ls(this,t,this.nc,!0,!0),!1===c&&y&&(kt(t,1,0,0,1,0,0),t.Ya(),c=!0),this.nc instanceof fs&&this.nc.type===ts?(t.beginPath(),t.rect(s.x,s.y,s.width,s.height),t.ug(this.nc)):t.fillRect(s.x,s.y,s.width,s.height)),this instanceof sa?kt(t,a.m11,a.m12,a.m21,a.m22,a.dx,a.dy):t.Pi.ef=[a.m11,a.m12,a.m21,a.m22,a.dx,a.dy],null!==this.Ib&&(!1===c&&y&&(kt(t,1,0,0,1,0,0),t.Ya(),c=!0),a=s=0,d=(p=this.Ha).width,p=p.height,l=0,this instanceof ja&&(s=(p=this.Ra.mb).x,a=p.y,d=p.width,p=p.height,l=this.Qh),Ls(this,t,this.Ib,!0,!1),this.Ib instanceof fs&&this.Ib.type===ts?(t.beginPath(),t.rect(s-l/2,a-l/2,d+l,p+l),t.ug(this.Ib)):t.fillRect(s-l/2,a-l/2,d+l,p+l)),y&&(null!==this.Ib||null!==this.nc||null!==h&&0!=(512&h.fa)||null!==h&&(h.type===$s||h.type===Qs)&&h.Xe()!==this)?(qs(this,!0),null===this.Hp&&t.cn()):qs(this,!1),this.Xj(t,i),y&&0!=(512&this.fa)==!0&&t.dn(),g&&y&&t.cn(),u&&(t.restore(),f&&t.tf.pop()),this instanceof sa&&(o=t.tf.pop()),!0===c&&t.tf.pop(),null!==t.GD&&(null===o&&(o=r===t.Mw?(kt(t,1,0,0,1,0,0),t.tf.pop()):t.Mw),t.GD(this,o))}}}}else{if(this instanceof sa&&(this.type===ta||this.type===ia))return Ds(this,t,i),void(1!==e&&(t.globalAlpha=n));if(this instanceof Ru&&this.Wm(!1),o=this.transform,r=this.S,0!=(4096&this.fa)==!0&&As(this),h=0!=(256&this.fa),this instanceof qa&&(t.font=this.font),h){if(f=r.Kg()?r.Ha:r.U,y=null!==this.gi?(s=(y=this.gi).x,a=y.y,g=y.width,y.height):(s=Math.max(u.x,f.x),a=Math.max(u.y,f.y),g=Math.min(u.right,f.right)-s,Math.min(u.bottom,f.bottom)-a),s>u.width+u.x||u.x>f.width+f.x||a>u.height+u.y||u.y>f.height+f.y)return void(1!==e&&(t.globalAlpha=n));t.save(),t.beginPath(),t.rect(s,a,g,y),t.clip()}if(f=!1,this instanceof Lh){if(f=!0,!this.isVisible())return void(1!==e&&(t.globalAlpha=n));this.vl&&i.Si("drawShadows")&&(s=this.sm,t.rA(s.x*i.scale*i.rd,s.y*i.scale*i.rd,this.og),t.dn(),t.shadowColor=this.rm)}s=!1,this.Y&&i.Si("drawShadows")&&(s=this.Y.vl),!0===this.Hp?t.dn():!1===this.Hp&&t.cn(),null!==this.nc&&(Ls(this,t,this.nc,!0,!0),this.nc instanceof fs&&this.nc.type===ts?(t.beginPath(),t.rect(u.x,u.y,u.width,u.height),t.ug(this.nc)):t.fillRect(u.x,u.y,u.width,u.height)),o.vt()||t.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),null!==this.Ib&&(a=u=0,g=(y=this.Ha).width,y=y.height,c=0,this instanceof ja&&(u=(y=this.Ra.mb).x,a=y.y,g=y.width,y=y.height,c=this.Qh),Ls(this,t,this.Ib,!0,!1),this.Ib instanceof fs&&this.Ib.type===ts?(t.beginPath(),t.rect(u-c/2,a-c/2,g+c,y+c),t.ug(this.Ib)):t.fillRect(u-c/2,a-c/2,g+c,y+c)),s&&(null!==this.Ib||null!==this.nc||null!==r&&0!=(512&r.fa)||null!==r&&(r.type===$s||r.type===Qs)&&r.Xe()!==this)?(qs(this,!0),null===this.Hp&&t.cn()):qs(this,!1),this.Xj(t,i),s&&0!=(512&this.fa)==!0&&t.dn(),f&&s&&t.cn(),h?(t.restore(),Tt(t,this instanceof sa)):o.vt()||(r=1/(o.m11*o.m22-o.m12*o.m21),t.transform(o.m22*r,-o.m12*r,-o.m21*r,o.m11*r,r*(o.m21*o.dy-o.m22*o.dx),r*(o.m12*o.dx-o.m11*o.dy)))}1!==e&&(t.globalAlpha=n)}},ks.prototype.Xj=function(){},ks.prototype.isContainedBy=ks.prototype.tl=function(t){if(t instanceof sa)t:{if(this!==t&&null!==t)for(var i=this.S;null!==i;){if(i===t){t=!0;break t}i=i.S}t=!1}else t=!1;return t},ks.prototype.isVisibleObject=ks.prototype.Xi=function(){if(!this.visible)return!1;var t=this.S;return null===t||t.Xi()},(t=ks.prototype).P=function(t){if((void 0===t&&(t=!1),!0!==Vs(this))&&(Hs(this,!0),Us(this,!0),null!==(i=this.S)?t||i.P():null!==(t=this.g)&&(t.fg.add(this),this instanceof Lu&&(t.la.ib||this.bf(),null!==this.ee&&zs(this.ee)),t.ue(!0)),this instanceof sa)){this.ia!==$s&&this.ia!==ea||null!==(t=this.Xe())&&t.P(!0);for(var i=(t=this.za.n).length,e=0;e<i;e++){var n=t[e];!0!==Vs(n)&&(n.xa.G()||(n instanceof Tf||n instanceof sa||n instanceof qa||Bs(n,!1)!==ds)&&n.P(!0))}}},t.fp=function(){!1===Vs(this)&&(Hs(this,!0),Us(this,!0))},t.ri=function(){0!=(2048&this.fa)==!1&&(Gs(this,!0),Rs(this,!0))},t.Cz=function(){Rs(this,!0)},t.pa=function(){var t=this.Y;null!==t&&t.pa()},Nn.defineProperty(ks,{Vt:"segmentOrientation"},function(){return this.gs},function(t){var i=this.gs;i!==t&&(this.gs=t,this.P(),this.h("segmentOrientation",i,t),t===Wh&&(this.angle=0))}),Nn.defineProperty(ks,{ve:"segmentIndex"},function(){return this.es},function(t){t=Math.round(t);var i=this.es;i!==t&&(this.es=t,this.P(),this.h("segmentIndex",i,t))}),Nn.defineProperty(ks,{kA:"segmentFraction"},function(){return this.ds},function(t){isNaN(t)||t<0?t=0:1<t&&(t=1);var i=this.ds;i!==t&&(this.ds=t,this.P(),this.h("segmentFraction",i,t))}),Nn.defineProperty(ks,{SE:"segmentOffset"},function(){return this.fs},function(t){var i=this.fs;i.K(t)||(this.fs=t=t.R(),this.P(),this.h("segmentOffset",i,t))}),Nn.defineProperty(ks,{stretch:"stretch"},function(){return this.Ph},function(t){var i=this.Ph;i!==t&&(this.Ph=t,this.P(),this.h("stretch",i,t))}),Nn.defineProperty(ks,{name:"name"},function(){return this.Ob},function(t){var i=this.Ob;i!==t&&(this.Ob=t,null!==this.Y&&(this.Y.em=null),this.h("name",i,t))}),Nn.defineProperty(ks,{opacity:"opacity"},function(){return this.Rc},function(t){var i=this.Rc;i!==t&&(Nn.j(t,"number",ks,"opacity"),(t<0||1<t)&&Nn.va(t,"0 <= value <= 1",ks,"opacity"),this.Rc=t,this.h("opacity",i,t),t=this.g,i=this.Y,null!==t&&null!==i&&t.pa(Oh(i,i.U)))}),Nn.defineProperty(ks,{visible:"visible"},function(){return 0!=(1&this.fa)},function(t){var i=0!=(1&this.fa);i!==t&&(this.fa^=1,this.h("visible",i,t),null!==(i=this.S)?i.P():this instanceof Lh&&this.nd(t),this.pa(),Js(this))}),Nn.defineProperty(ks,{Gg:"pickable"},function(){return 0!=(2&this.fa)},function(t){var i=0!=(2&this.fa);i!==t&&(this.fa^=2,this.h("pickable",i,t))}),Nn.defineProperty(ks,{SG:"fromLinkableDuplicates"},function(){return 0!=(4&this.fa)},function(t){var i=0!=(4&this.fa);i!==t&&(this.fa^=4,this.h("fromLinkableDuplicates",i,t))}),Nn.defineProperty(ks,{TG:"fromLinkableSelfNode"},function(){return 0!=(8&this.fa)},function(t){var i=0!=(8&this.fa);i!==t&&(this.fa^=8,this.h("fromLinkableSelfNode",i,t))}),Nn.defineProperty(ks,{KI:"toLinkableDuplicates"},function(){return 0!=(16&this.fa)},function(t){var i=0!=(16&this.fa);i!==t&&(this.fa^=16,this.h("toLinkableDuplicates",i,t))}),Nn.defineProperty(ks,{LI:"toLinkableSelfNode"},function(){return 0!=(32&this.fa)},function(t){var i=0!=(32&this.fa);i!==t&&(this.fa^=32,this.h("toLinkableSelfNode",i,t))}),Nn.defineProperty(ks,{Rf:"isPanelMain"},function(){return 0!=(64&this.fa)},function(t){var i=0!=(64&this.fa);i!==t&&(this.fa^=64,this.P(),this.h("isPanelMain",i,t))}),Nn.defineProperty(ks,{Fw:"isActionable"},function(){return 0!=(128&this.fa)},function(t){var i=0!=(128&this.fa);i!==t&&(this.fa^=128,this.h("isActionable",i,t))}),Nn.defineProperty(ks,{Bm:"areaBackground"},function(){return this.nc},function(t){var i=this.nc;i!==t&&(t instanceof fs&&t.freeze(),this.nc=t,this.pa(),this.h("areaBackground",i,t))}),Nn.defineProperty(ks,{background:"background"},function(){return this.Ib},function(t){var i=this.Ib;i!==t&&(t instanceof fs&&t.freeze(),this.Ib=t,this.pa(),this.h("background",i,t))}),Nn.u(ks,{Y:"part"},function(){if(this instanceof Lh)return this;if(null!==this.jm)return this.jm;for(var t=this.S;t;){if(t instanceof Lh)return this.jm=t;t=t.S}return null}),Nn.u(ks,{S:"panel"},function(){return this.Wg}),ks.prototype.Al=function(t){this.Wg=t},Nn.u(ks,{layer:"layer"},function(){var t=this.Y;return null!==t?t.layer:null},{configurable:!0}),Nn.u(ks,{g:"diagram"},function(){var t=this.Y;return null!==t?t.g:null},{configurable:!0}),Nn.defineProperty(ks,{position:"position"},function(){return this.kb},function(t){var i=this.kb;i.K(t)||(t=t.R(),this.pA(t,i)&&this.h("position",i,t))}),ks.prototype.pA=function(t){return this.kb=t,zs(this),this.ri(),!0},ks.prototype.nx=function(t,i){this.kb.m(t,i),Fh(this),this.ri()},Nn.u(ks,{U:"actualBounds"},function(){return this.mc}),Nn.defineProperty(ks,{scale:"scale"},function(){return this.Tb},function(t){var i=this.Tb;i!==t&&(t<=0&&Nn.k("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.Tb=t,this.ri(),this.P(),this.h("scale",i,t))}),Nn.defineProperty(ks,{angle:"angle"},function(){return this.Jl},function(t){var i=this.Jl;i!==t&&((t%=360)<0&&(t+=360),i!==t&&(this.Jl=t,this.P(),this.ri(),this.h("angle",i,t)))}),Nn.defineProperty(ks,{xa:"desiredSize"},function(){return this.lf},function(t){var i=this.lf;i.K(t)||(this.lf=t=t.R(),this.P(),this instanceof ja&&this.re(),this.h("desiredSize",i,t),null!==(t=this.Y)&&0!=(1024&this.fa)&&(Ts(this,t,"width"),Ts(this,t,"height")))}),Nn.defineProperty(ks,{width:"width"},function(){return this.lf.width},function(t){var i;this.lf.width!==t&&(i=this.lf,this.lf=t=new st(t,this.lf.height).freeze(),this.P(),this instanceof ja&&this.re(),this.h("desiredSize",i,t),null!==(i=this.Y)&&0!=(1024&this.fa)&&Ts(this,i,"width"))}),Nn.defineProperty(ks,{height:"height"},function(){return this.lf.height},function(t){var i;this.lf.height!==t&&(i=this.lf,this.lf=t=new st(this.lf.width,t).freeze(),this.P(),this instanceof ja&&this.re(),this.h("desiredSize",i,t),null!==(i=this.Y)&&0!=(1024&this.fa)&&Ts(this,i,"height"))}),Nn.defineProperty(ks,{ih:"minSize"},function(){return this.Bj},function(t){var i=this.Bj;i.K(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.Bj=t,this.P(),this.h("minSize",i,t))}),Nn.defineProperty(ks,{xf:"maxSize"},function(){return this.zj},function(t){var i=this.zj;i.K(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.zj=t,this.P(),this.h("maxSize",i,t))}),Nn.u(ks,{Ca:"measuredBounds"},function(){return this.kd}),Nn.u(ks,{Ha:"naturalBounds"},function(){return this.Qc},{configurable:!0}),Nn.defineProperty(ks,{margin:"margin"},function(){return this.lr},function(t){"number"==typeof t&&(t=new ut(t));var i=this.lr;i.K(t)||(this.lr=t=t.R(),this.P(),this.h("margin",i,t))}),Nn.u(ks,{transform:null},function(){return 0!=(2048&this.fa)==!0&&As(this),this.me}),Nn.u(ks,{Yg:null},function(){return 0!=(4096&this.fa)==!0&&As(this),this.Vp}),Nn.defineProperty(ks,{alignment:"alignment"},function(){return this.Ae},function(t){var i=this.Ae;i.K(t)||(t.se()&&!t.Uc()&&Nn.k("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.Ae=t=t.R(),zs(this),this.h("alignment",i,t))}),Nn.defineProperty(ks,{column:"column"},function(){return this.cq},function(t){t=Math.round(t);var i=this.cq;i!==t&&(t<0&&Nn.va(t,">= 0",ks,"column"),this.cq=t,this.P(),this.h("column",i,t))}),Nn.defineProperty(ks,{rG:"columnSpan"},function(){return this.hi},function(t){t=Math.round(t);var i=this.hi;i!==t&&(t<1&&Nn.va(t,">= 1",ks,"columnSpan"),this.hi=t,this.P(),this.h("columnSpan",i,t))}),Nn.defineProperty(ks,{Wb:"row"},function(){return this.$r},function(t){t=Math.round(t);var i=this.$r;i!==t&&(t<0&&Nn.va(t,">= 0",ks,"row"),this.$r=t,this.P(),this.h("row",i,t))}),Nn.defineProperty(ks,{rowSpan:"rowSpan"},function(){return this.Fi},function(t){t=Math.round(t);var i=this.Fi;i!==t&&(t<1&&Nn.va(t,">= 1",ks,"rowSpan"),this.Fi=t,this.P(),this.h("rowSpan",i,t))}),Nn.defineProperty(ks,{qx:"spanAllocation"},function(){return this.us},function(t){var i=this.us;i!==t&&(null!==t&&Nn.j(t,"function",ks,"spanAllocation"),this.us=t,this.h("spanAllocation",i,t))}),Nn.defineProperty(ks,{Tj:"alignmentFocus"},function(){return this.Up},function(t){var i=this.Up;i.K(t)||(!t.se()||t.Uc()||t.K(Te)&&this instanceof Lu||Nn.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: "+t),this.Up=t=t.R(),this.P(),this.h("alignmentFocus",i,t))}),Nn.defineProperty(ks,{Sd:"portId"},function(){return this.Mr},function(t){var i,e,n=this.Mr;n!==t&&(null===(i=this.Y)||i instanceof Lu||(Nn.k("Cannot set portID on a Link: "+t),i=null),null!==n&&null!==i&&Iu(i,this),null!==(this.Mr=t)&&i&&(i.Ah=!0,null===i.Wd&&qu(i),null!==(e=this.Sd)&&i.Wd.add(e,this)),this.h("portId",n,t))}),Nn.defineProperty(ks,{yb:"toSpot"},function(){return null!==this.ga?this.ga.Qj:Te},function(t){this.Ke();var i=this.ga.Qj;i.K(t)||(t=t.R(),this.ga.Qj=t,this.h("toSpot",i,t),Js(this))}),Nn.defineProperty(ks,{Fl:"toEndSegmentLength"},function(){return null!==this.ga?this.ga.Oj:10},function(t){this.Ke();var i=this.ga.Oj;i!==t&&(t<0&&Nn.va(t,">= 0",ks,"toEndSegmentLength"),this.ga.Oj=t,this.h("toEndSegmentLength",i,t),Js(this))}),Nn.defineProperty(ks,{eu:"toEndSegmentDirection"},function(){return null!==this.ga?this.ga.Nj:Hh},function(t){this.Ke();var i=this.ga.Nj;i!==t&&(this.ga.Nj=t,this.h("toEndSegmentDirection",i,t),Js(this))}),Nn.defineProperty(ks,{fu:"toShortLength"},function(){return null!==this.ga?this.ga.Pj:0},function(t){this.Ke();var i=this.ga.Pj;i!==t&&(this.ga.Pj=t,this.h("toShortLength",i,t),Js(this))}),Nn.defineProperty(ks,{eF:"toLinkable"},function(){return this.Bs},function(t){var i=this.Bs;i!==t&&(this.Bs=t,this.h("toLinkable",i,t))}),Nn.defineProperty(ks,{MI:"toMaxLinks"},function(){return this.Cs},function(t){var i=this.Cs;i!==t&&(t<0&&Nn.va(t,">= 0",ks,"toMaxLinks"),this.Cs=t,this.h("toMaxLinks",i,t))}),Nn.defineProperty(ks,{xb:"fromSpot"},function(){return null!==this.ga?this.ga.oj:Te},function(t){this.Ke();var i=this.ga.oj;i.K(t)||(t=t.R(),this.ga.oj=t,this.h("fromSpot",i,t),Js(this))}),Nn.defineProperty(ks,{ll:"fromEndSegmentLength"},function(){return null!==this.ga?this.ga.mj:10},function(t){this.Ke();var i=this.ga.mj;i!==t&&(t<0&&Nn.va(t,">= 0",ks,"fromEndSegmentLength"),this.ga.mj=t,this.h("fromEndSegmentLength",i,t),Js(this))}),Nn.defineProperty(ks,{kt:"fromEndSegmentDirection"},function(){return null!==this.ga?this.ga.lj:Hh},function(t){this.Ke();var i=this.ga.lj;i!==t&&(this.ga.lj=t,this.h("fromEndSegmentDirection",i,t),Js(this))}),Nn.defineProperty(ks,{lt:"fromShortLength"},function(){return null!==this.ga?this.ga.nj:0},function(t){this.Ke();var i=this.ga.nj;i!==t&&(this.ga.nj=t,this.h("fromShortLength",i,t),Js(this))}),Nn.defineProperty(ks,{PD:"fromLinkable"},function(){return this.Fq},function(t){var i=this.Fq;i!==t&&(this.Fq=t,this.h("fromLinkable",i,t))}),Nn.defineProperty(ks,{vz:"fromMaxLinks"},function(){return this.Gq},function(t){var i=this.Gq;i!==t&&(t<0&&Nn.va(t,">= 0",ks,"fromMaxLinks"),this.Gq=t,this.h("fromMaxLinks",i,t))}),Nn.defineProperty(ks,{cursor:"cursor"},function(){return this.nq},function(t){var i=this.nq;i!==t&&(Nn.j(t,"string",ks,"cursor"),this.nq=t,this.h("cursor",i,t))}),Nn.defineProperty(ks,{click:"click"},function(){return null!==this.ha?this.ha.fi:null},function(t){Ms(this);var i=this.ha.fi;i!==t&&(null!==t&&Nn.j(t,"function",ks,"click"),this.ha.fi=t,this.h("click",i,t))}),Nn.defineProperty(ks,{at:"doubleClick"},function(){return null!==this.ha?this.ha.oi:null},function(t){Ms(this);var i=this.ha.oi;i!==t&&(null!==t&&Nn.j(t,"function",ks,"doubleClick"),this.ha.oi=t,this.h("doubleClick",i,t))}),Nn.defineProperty(ks,{ez:"contextClick"},function(){return null!==this.ha?this.ha.ii:null},function(t){Ms(this);var i=this.ha.ii;i!==t&&(null!==t&&Nn.j(t,"function",ks,"contextClick"),this.ha.ii=t,this.h("contextClick",i,t))}),Nn.defineProperty(ks,{Gt:"mouseEnter"},function(){return null!==this.ha?this.ha.xr:null},function(t){Ms(this);var i=this.ha.xr;i!==t&&(null!==t&&Nn.j(t,"function",ks,"mouseEnter"),this.ha.xr=t,this.h("mouseEnter",i,t))}),Nn.defineProperty(ks,{Ht:"mouseLeave"},function(){return null!==this.ha?this.ha.yr:null},function(t){Ms(this);var i=this.ha.yr;i!==t&&(null!==t&&Nn.j(t,"function",ks,"mouseLeave"),this.ha.yr=t,this.h("mouseLeave",i,t))}),Nn.defineProperty(ks,{Tz:"mouseOver"},function(){return null!==this.ha?this.ha.Bi:null},function(t){Ms(this);var i=this.ha.Bi;i!==t&&(null!==t&&Nn.j(t,"function",ks,"mouseOver"),this.ha.Bi=t,this.h("mouseOver",i,t))}),Nn.defineProperty(ks,{Sz:"mouseHover"},function(){return null!==this.ha?this.ha.Ai:null},function(t){Ms(this);var i=this.ha.Ai;i!==t&&(null!==t&&Nn.j(t,"function",ks,"mouseHover"),this.ha.Ai=t,this.h("mouseHover",i,t))}),Nn.defineProperty(ks,{Rz:"mouseHold"},function(){return null!==this.ha?this.ha.zi:null},function(t){Ms(this);var i=this.ha.zi;i!==t&&(null!==t&&Nn.j(t,"function",ks,"mouseHold"),this.ha.zi=t,this.h("mouseHold",i,t))}),Nn.defineProperty(ks,{TH:"mouseDragEnter"},function(){return null!==this.ha?this.ha.vr:null},function(t){Ms(this);var i=this.ha.vr;i!==t&&(null!==t&&Nn.j(t,"function",ks,"mouseDragEnter"),this.ha.vr=t,this.h("mouseDragEnter",i,t))}),Nn.defineProperty(ks,{UH:"mouseDragLeave"},function(){return null!==this.ha?this.ha.wr:null},function(t){Ms(this);var i=this.ha.wr;i!==t&&(null!==t&&Nn.j(t,"function",ks,"mouseDragLeave"),this.ha.wr=t,this.h("mouseDragLeave",i,t))}),Nn.defineProperty(ks,{Qz:"mouseDrop"},function(){return null!==this.ha?this.ha.yi:null},function(t){Ms(this);var i=this.ha.yi;i!==t&&(null!==t&&Nn.j(t,"function",ks,"mouseDrop"),this.ha.yi=t,this.h("mouseDrop",i,t))}),Nn.defineProperty(ks,{aD:"actionDown"},function(){return null!==this.ha?this.ha.Op:null},function(t){Ms(this);var i=this.ha.Op;i!==t&&(null!==t&&Nn.j(t,"function",ks,"actionDown"),this.ha.Op=t,this.h("actionDown",i,t))}),Nn.defineProperty(ks,{bD:"actionMove"},function(){return null!==this.ha?this.ha.Pp:null},function(t){Ms(this);var i=this.ha.Pp;i!==t&&(null!==t&&Nn.j(t,"function",ks,"actionMove"),this.ha.Pp=t,this.h("actionMove",i,t))}),Nn.defineProperty(ks,{cD:"actionUp"},function(){return null!==this.ha?this.ha.Qp:null},function(t){Ms(this);var i=this.ha.Qp;i!==t&&(null!==t&&Nn.j(t,"function",ks,"actionUp"),this.ha.Qp=t,this.h("actionUp",i,t))}),Nn.defineProperty(ks,{$C:"actionCancel"},function(){return null!==this.ha?this.ha.Np:null},function(t){Ms(this);var i=this.ha.Np;i!==t&&(null!==t&&Nn.j(t,"function",ks,"actionCancel"),this.ha.Np=t,this.h("actionCancel",i,t))}),Nn.defineProperty(ks,{yA:"toolTip"},function(){return null!==this.ha?this.ha.Hi:null},function(t){Ms(this);var i=this.ha.Hi;i!==t&&(null!==t&&Nn.A(t,Du,ks,"toolTip"),this.ha.Hi=t,this.h("toolTip",i,t))}),Nn.defineProperty(ks,{contextMenu:"contextMenu"},function(){return null!==this.ha?this.ha.ji:null},function(t){Ms(this);var i=this.ha.ji;i!==t&&(null!==t&&Nn.A(t,Du,ks,"contextMenu"),this.ha.ji=t,this.h("contextMenu",i,t))}),ks.prototype.bind=ks.prototype.bind=function(t){var i=(t.pg=this).Xo();null!==i&&va(i)&&Nn.k("Cannot add a Binding to a template that has already been copied: "+t),null===this.sc&&(this.sc=new Dn(be)),this.sc.add(t)},ks.prototype.findTemplateBinder=ks.prototype.Xo=function(){for(var t=this instanceof sa?this:this.S;null!==t;){if(null!==t.tk)return t;t=t.S}return null},ks.prototype.setProperties=function(t){Nn.Xt(this,t)},ks.make=xs=function(t,i){var e,n=arguments,o=null,r=null;for("function"==typeof t?r=t:"string"==typeof t&&("function"==typeof(e=oa.ja(t))?o=e(n=Nn.dl(arguments)):r=s[t]),null===o&&(void 0===r&&(void 0!==(o=h.$)&&void 0!==o.noop&&Nn.k("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),Nn.k("GraphObject.make failed to complete, it may be conflicting with another var.")),null!==r&&r.constructor||Nn.k("GraphObject.make requires a class function or class name, not: "+t),o=new r),e=1,o instanceof Oo&&1<n.length&&("string"==typeof(r=n[1])||r instanceof HTMLDivElement)&&(rs(o,r),e++);e<n.length;e++)void 0===(r=n[e])?Nn.k("Undefined value at argument "+e+" for object being constructed by GraphObject.make: "+o):function t(i,e){if("string"==typeof e){i instanceof qa?i.text=e:i instanceof ja?i.Ab=e:i instanceof oh?i.source=e:i instanceof sa?null!==(r=a(sa,e))?i.type=r:Nn.k("Unknown Panel type as an argument to GraphObject.make: "+e):i instanceof fs?null!==(r=a(fs,e))?i.type=r:Nn.k("Unknown Brush type as an argument to GraphObject.make: "+e):i instanceof Ai?null!==(r=a(Ai,e))?i.type=r:Nn.k("Unknown Geometry type as an argument to GraphObject.make: "+e):i instanceof Ii?null!==(r=a(Ii,e))?i.type=r:Nn.k("Unknown PathSegment type as an argument to GraphObject.make: "+e):Nn.k("Unable to use a string as an argument to GraphObject.make: "+e)}else if(e instanceof ks)r=e,i instanceof sa||Nn.k("A GraphObject can only be added to a Panel, not to: "+i),i.add(r);else if(e instanceof Ca){var n,o=e,r=i;o.ce&&r.getRowDefinition?n=r.getRowDefinition(o.index):!o.ce&&r.getColumnDefinition?n=r.getColumnDefinition(o.index):Nn.k("A RowColumnDefinition can only be added to a Panel, not to: "+i),n.Zs(o)}else if(e instanceof l)i instanceof Ru&&e.pe===Ru?2==(2&e.value)?i.hx=e:e===Xh||e===Zh||e===Qh?i.Ie=e:e===$h||e===_h||e===tl?i.Qs=e:e!==Jh&&e!==Wh&&Nn.k("Unknown Link enum value for a Link property: "+e):i instanceof sa&&e.pe===sa?i.type=e:i instanceof qa&&e.pe===qa?i.uF=e:i instanceof ja&&(e===ds||e===ms||e===bs||e===ps)?i.wz=e:i instanceof oh&&(e===ds||e===ms||e===bs)?i.gH=e:i instanceof ks&&e.pe===Ru?(r=i,0===e.name.indexOf("Orient")?r.Vt=e:Nn.k("Unknown Link enum value for GraphObject.segmentOrientation property: "+e)):i instanceof ks&&e.pe===ks?i.stretch=e:i instanceof Ca&&e.pe===Ca?i.au=e:i instanceof Oo&&e.pe===Oo?i.al=e:i instanceof fs&&e.pe===fs||i instanceof Ai&&e.pe===Ai||i instanceof Ii&&e.pe===Ii?i.type=e:i instanceof be&&e.pe===be?i.mode=e:i instanceof Ki&&e.pe===Ki?i.wc=e:i instanceof Bc&&e.pe===Bc?0===e.name.indexOf("Alignment")?i.alignment=e:0===e.name.indexOf("Arrangement")?i.Nf=e:0===e.name.indexOf("Compaction")?i.compaction=e:0===e.name.indexOf("Path")?i.path=e:0===e.name.indexOf("Sorting")?i.sorting=e:0===e.name.indexOf("Style")?i.QI=e:Nn.k("Unknown enum value: "+e):i instanceof ac&&e.pe===ac?0===e.name.indexOf("Aggressive")?i.eG=e:0===e.name.indexOf("Cycle")?i.AG=e:0===e.name.indexOf("Init")?i.lH=e:0===e.name.indexOf("Layer")?i.BH=e:Nn.k("Unknown enum value: "+e):i instanceof Ff&&e.pe===Ff?e===vl||e===ml||e===yl||e===gl?i.sorting=e:e===dl||e===pl?i.Nf=e:e===cl||e===fl?i.alignment=e:Nn.k("Unknown enum value: "+e):i instanceof zf&&e.pe===zf?e===jl||e===Dl||e===Cl||e===Nl||e===Ll?i.sorting=e:e===Tl||e===Sl||e===Ml||e===Pl?i.direction=e:e===wl||e===xl||e===bl||e===kl?i.Nf=e:e===Fl||e===Al?i.Rw=e:Nn.k("Unknown enum value: "+e):Nn.k("No property to set for this enum value: "+e);else if(e instanceof be)i instanceof ks||i instanceof Ca?i.bind(e):Nn.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+i);else if(e instanceof qi)i instanceof Ai?i.Ub.add(e):Nn.k("A PathFigure can only be added to a Geometry, not to: "+i);else if(e instanceof Ii)i instanceof qi?i.sb.add(e):Nn.k("A PathSegment can only be added to a PathFigure, not to: "+i);else if(e instanceof Sf)i instanceof Oo||i instanceof kf?i.Pb=e:Nn.k("A Layout can only be assigned to a Diagram or a Group, not to: "+i);else if(Array.isArray(e))for(r=0;r<e.length;r++)t(i,e[r]);else if("object"===(void 0===e?"undefined":_typeof(e))&&null!==e)if(i instanceof fs){for(r in n=new y,e)o=parseFloat(r),isNaN(o)?n[r]=e[r]:i.addColorStop(o,e[r]);Nn.Xt(i,n)}else if(i instanceof Ca){for(r in void 0!==e.row?((null==(n=e.row)||1/0===n||isNaN(n)||n<0)&&Nn.k("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+n),i.ce=!0,i.index=n):void 0!==e.column&&((null==(n=e.column)||1/0===n||isNaN(n)||n<0)&&Nn.k("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+n),i.ce=!1,i.index=n),n=new y,e)"row"!==r&&"column"!==r&&(n[r]=e[r]);Nn.Xt(i,n)}else Nn.Xt(i,e);else Nn.k('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+i)}(o,r);return o};var Ys,Ws,Xs,Zs,Qs,$s,_s,ta,ia,ea,na,oa=new nt("string","function");function ra(){this.ji=this.Hi=this.Np=this.Qp=this.Pp=this.Op=this.yi=this.wr=this.vr=this.zi=this.Ai=this.Bi=this.yr=this.xr=this.ii=this.oi=this.fi=null}function sa(t){ks.call(this),void 0===t?0===arguments.length?this.ia=Xs:Nn.k("invalid argument to Panel constructor: undefined"):(Nn.pb(t,sa,sa,"type"),this.ia=t),this.za=new Dn(ks),this.Se=Ut,this.Pg=!1,this.ia===na&&(this.Pg=!0),this.Pq=!1,this.rq=d,this.mi=ps,this.ia===_s&&aa(this),this.Io=ms,this.Kq=ti,this.Lq=Ht,this.tk=this.ie=null,this.cr=NaN,this.hg=this.tj=null,this.Zn="category",this.gg=null,this.Ji=new Ln(NaN,NaN,NaN,NaN),this.um=null,this.Ah=!1,this.as=null}function aa(t){t.ij=Ut,t.xh=1,t.li=null,t.Ql=null,t.wh=1,t.vh=null,t.Pl=null,t.Ld=[],t.Gd=[],t.pm=Pa,t.Ol=Pa,t.Ii=0,t.vi=0}function ha(t,i,e,n){for(var o=n.length,r=t.U,s=e?t.zd(0):t.yd(0),a=0;a<o;a++){var h=n[a];if(void 0!==h&&h!==s&&0!==h.Ia){if(e){if(h.position>r.height)continue}else if(h.position>r.width)continue;var l=h.Fp;isNaN(l)&&(l=e?t.xh:t.wh);var u,f,c,d=h.Ep;null===d&&(d=e?t.li:t.vh),0!==l&&null!==d&&(Ls(t,i,d,!1,!1),u=!(d=!1),null!==(f=h.xI)&&(d=!0,void 0!==i.setLineDash?(i.setLineDash(f),i.lineDashOffset=t.ke):void 0!==i.webkitLineDash?(i.webkitLineDash=f,i.webkitLineDashOffset=t.ke):void 0!==i.mozDash?(i.mozDash=f,i.mozDashOffset=t.ke):u=!1),i.beginPath(),c=h.position+l,e?c>r.height&&(l-=c-r.height):c>r.width&&(l-=c-r.width),h=h.position+l/2,i.lineWidth=l,c=t.padding,e?(h+=c.top,l=c.left,c=r.width-c.right,d&&!u?Ps(i,l,h,c,h,f,0):(i.moveTo(l,h),i.lineTo(c,h))):(h+=c.left,l=c.top,c=r.height-c.bottom,d&&!u?Ps(i,h,l,h,c,f,0):(i.moveTo(h,l),i.lineTo(h,c))),i.stroke(),d&&(void 0!==i.setLineDash?(i.setLineDash(Nn.fj),i.lineDashOffset=0):void 0!==i.webkitLineDash?(i.webkitLineDash=Nn.fj,i.webkitLineDashOffset=0):void 0!==i.mozDash&&(i.mozDash=null,i.mozDashOffset=0)))}}}function la(t,i,e,n,o){for(var r=n.length,s=t.U,a=0;a<r;a++){var h,l,u,f,c=n[a];void 0!==c&&null!==c.background&&c.kz!==o&&0!==c.Ia&&(h=e?s.height:s.width,c.position>h||(l=c.of(),u=c.Fp,isNaN(u)&&(u=e?t.xh:t.wh),null===(f=c.Ep)&&(f=e?t.li:t.vh),null===f&&(u=0),l-=u,h<(u=c.position+u)+(l+=c.Ia)&&(l=h-u),l<=0||(h=t.padding,Ls(t,i,c.background,!0,!1),e?i.fillRect(h.left,u+h.top,s.width-(h.left+h.right),l):i.fillRect(u+h.left,h.top,l,s.height-(h.top+h.bottom)))))}}function ua(t,i,e){if(0==t%i){i=e.length;for(var n=0;n<i;n++)if(0==t%e[n])return;return 1}}function fa(t){return"LineV"===t||"BarV"===t}function ca(t,i,e){if(e(t,i),i instanceof sa)for(var n=(i=i.za.n).length,o=0;o<n;o++)ca(t,i[o],e)}function da(t,i){!function t(i,e,n){n(e);e=e.za.n;for(var o=e.length,r=0;r<o;r++){var s=e[r];s instanceof sa&&t(i,s,n)}}(t,t,i)}function pa(t,i,e,n){for(var o=t.za.n,r=o.length;r--;){var s,a,h=o[r];h.visible&&(s=h.U,a=t.Ha,s.x>a.width||s.y>a.height||s.x+s.width<0||s.y+s.height<0||(h instanceof sa&&pa(h,i,e,n),null!==i&&(h=i(h)),null===h||null!==e&&!e(h)||n.add(h)))}}function ya(t){var i=t.B;return void 0!==i&&i!==d||(i=null),null===i&&t instanceof ja&&(null!==(t=t.Ra)&&(i=t.B)),null===i&&(i=P),i}function ga(t){var i=t.C;return void 0!==i&&i!==d||(i=null),null===i&&t instanceof ja&&(null!==(t=t.Ra)&&(i=t.C)),null===i&&(i=C),i}function va(t){return null!==(t=t.tk)&&t.D}function ma(t){var h=t.tk;if(null===h)null!==t.data&&Nn.k("Template cannot have .data be non-null: "+t),t.tk=h=new Dn(be);else if(h.D)return;var l=new Dn(ks);ca(t,t,function(t,i){var e=i.sc;if(null!==e)for(Is(i,!1),e=e.i;e.next();){var n,o=e.value;o.mode===fe&&Is(i,!0),null===o.en||null!==(n=xe(o,t,i))&&(l.add(n),null===n.vo&&(n.vo=new Dn(be)),n.vo.add(o)),h.add(o)}if(i instanceof sa&&i.type===_s){if(0<i.Ld.length)for(o=(e=i.Ld).length,n=0;n<o;n++){var r=e[n];if(void 0!==r&&null!==r.sc)for(var s=r.sc.i;s.next();){var a=s.value;a.pg=r,a.zs=2,a.Do=r.index,h.add(a)}}if(0<i.Gd.length)for(o=(e=i.Gd).length,n=0;n<o;n++)if(void 0!==(r=e[n])&&null!==r.sc)for(s=r.sc.i;s.next();)(a=s.value).pg=r,a.zs=1,a.Do=r.index,h.add(a)}});for(var i,e,n=l.i;n.next();){var o=n.value;if(null!==o.vo){Is(o,!0);for(var r=o.vo.i;r.next();){var s=r.value;null===o.sc&&(o.sc=new Dn(be)),o.sc.add(s)}}o.vo=null}for(n=h.i;n.next();){null!==(r=(o=n.value).pg)&&(o.pg=null,0<(e=(i=o.sx).indexOf("."))&&r instanceof sa&&(s=i.substring(0,e),i=i.substr(e+1),null!==(e=r.be(s))?(r=e,o.sx=i):Nn.trace('Warning: unable to find GraphObject named "'+s+'" for Binding: '+o.toString())),r instanceof Ca?(o.Dl=Nn.ld(r.S),r.S.qn=o.Dl):(o.Dl=Nn.ld(r),r.qn=o.Dl))}h.freeze(),t instanceof Lh&&t.Pd()&&(Ns(t,1/0,1/0),t.Ec())}function ba(t){return!!(t.type===Qs||t.type===$s||t.type===ea||t.type===_s&&0<t.za.length&&((t=t.za.da(0)).Rf&&t instanceof sa&&(t.type===ta||t.type===ia)))}function xa(t,i,e){var n,o,r;null==i||e<0||(n=function(t,i){if(null===i)return"";var e=t.Zn,n="";if("function"==typeof e)n=e(i);else{if("string"!=typeof e||"object"!==(void 0===i?"undefined":_typeof(i)))return"";if(""===e)return"";n=Nn.qb(i,e)}return void 0===n?"":"string"==typeof n?n:(Nn.k("Panel.getCategoryForItemData found a non-string category for "+i+": "+n),"")}(t,i),(r=null)!==(o=t.yH)&&(r=o.ja(n)),null===r&&(Ta||(Ta=!0,Nn.trace('No item template Panel found for category "'+n+'" on '+t),Nn.trace("  Using default item template."),n=new sa,(o=new qa).bind(new be("text","",ce)),n.add(o),Sa=n),r=Sa),null!==(n=r)&&(ma(n),n=n.copy(),"object"===(void 0===i?"undefined":_typeof(i))&&(null===t.gg&&(t.gg=new nt(Object,sa)),t.gg.add(i,n)),o=e,ba(t)&&o++,t.Ad(o,n),wa(t,o,e),n.ie=null,n.data=i))}function wa(t,i,e){for(t=t.za;i<t.length;){var n,o,r=t.da(i);r instanceof sa&&(n=i,o=e,r.type===ta?r.Wb=n:r.type===ia&&(r.column=n),r.xH=o),i++,e++}}ks.getBuilders=function(){var t,i,e=new nt("string","function");for(t in oa){t===t.toLowerCase()||"function"==typeof(i=oa[t])&&e.add(t,i)}return e.freeze(),e},ks.defineBuilder=Ys=function(t,i){Nn.j(t,"string",ks,"defineBuilder:name"),Nn.j(i,"function",ks,"defineBuilder:func");var e=t.toLowerCase();""!==t&&"none"!==e&&t!==e||Nn.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),oa.add(t,i)},ks.takeBuilderArgument=Ws=function(t,i,e){void 0===e&&(e=null);var n=t[1];if("function"==typeof e?e(n):"string"==typeof n)return t.splice(1,1),n;if(void 0===i)throw Error("no "+("function"==typeof e?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return i},Ys("Button",function(){var t=new fs(_r);t.addColorStop(0,"white"),t.addColorStop(1,"lightgray");var i=new fs(_r);return i.addColorStop(0,"white"),i.addColorStop(1,"dodgerblue"),(t=xs(sa,$s,{Fw:!0},{_buttonFillNormal:t,_buttonStrokeNormal:"gray",_buttonFillOver:i,_buttonStrokeOver:"blue"},xs(ja,{name:"ButtonBorder",Ab:"Rectangle",B:new ct(0,0,2.761423749153968,2.761423749153968),C:new ct(1,1,-2.761423749153968,-2.761423749153968),fill:t,stroke:"gray"}))).Gt=function(t,i){var e,n=i.be("ButtonBorder");n instanceof ja&&(e=i._buttonFillOver,i._buttonFillNormal=n.fill,n.fill=e,e=i._buttonStrokeOver,i._buttonStrokeNormal=n.stroke,n.stroke=e)},t.Ht=function(t,i){var e=i.be("ButtonBorder");e instanceof ja&&(e.fill=i._buttonFillNormal,e.stroke=i._buttonStrokeNormal)},t}),Ys("TreeExpanderButton",function(){var t=xs("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},xs(ja,{name:"ButtonIcon",Ab:"MinusLine",xa:$t},new be("figure","isTreeExpanded",function(t,i){var e=i.S;return t?e._treeExpandedFigure:e._treeCollapsedFigure}).Sw()),{visible:!1},new be("visible","isTreeLeaf",function(t){return!t}).Sw());return t.click=function(t,i){var e=i.Y;if(e instanceof Du&&(e=e.Mf),e instanceof Lu){var n=e.g;if(null!==n){if(n=n.nb,e.md){if(!n.canCollapseTree(e))return}else if(!n.canExpandTree(e))return;t.zc=!0,e.md?n.collapseTree(e):n.expandTree(e)}}},t}),Ys("SubGraphExpanderButton",function(){var t=xs("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},xs(ja,{name:"ButtonIcon",Ab:"MinusLine",xa:$t},new be("figure","isSubGraphExpanded",function(t,i){var e=i.S;return t?e._subGraphExpandedFigure:e._subGraphCollapsedFigure}).Sw()));return t.click=function(t,i){var e=i.Y;if(e instanceof Du&&(e=e.Mf),e instanceof kf){var n=e.g;if(null!==n){if(n=n.nb,e.de){if(!n.canCollapseSubGraph(e))return}else if(!n.canExpandSubGraph(e))return;t.zc=!0,e.de?n.collapseSubGraph(e):n.expandSubGraph(e)}}},t}),Ys("ContextMenuButton",function(){var t=xs("Button");t.stretch=gs;var i=t.be("ButtonBorder");return i instanceof ja&&(i.Ab="Rectangle",i.B=new ct(0,0,2,3),i.C=new ct(1,1,-2,-2)),t}),Ys("PanelExpanderButton",function(t){var o=Ws(t,"COLLAPSIBLE"),i=(t=xs("Button",xs(ja,"TriangleUp",{xa:new st(6,4)},new be("figure","visible",function(t){return t?"TriangleUp":"TriangleDown"}).Sw(o)))).be("ButtonBorder");return i instanceof ja&&(i.stroke=null,i.fill="transparent"),t.click=function(t,i){var e,n=i.g;null===n||n.ab||null!==(e=i.Y.be(o))&&(n.Qb("Collapse/Expand Panel"),e.visible=!e.visible,n.wd("Collapse/Expand Panel"))},t}),Ys("CheckBoxButton",function(t){var n=Ws(t);return(t=xs("Button",{"ButtonBorder.fill":"white","ButtonBorder.stroke":"gray",width:14,height:14},xs(ja,{name:"ButtonIcon",UG:"M0 4 L3 9 9 0",lb:2,stretch:vs,wz:ms,visible:!1},""!==n?new be("visible",n).JH():[]))).click=function(t,i){var e;t.g.ab||""!==n&&t.g.ba.ab||(t.zc=!0,(e=i.be("ButtonIcon")).g.Qb("checkbox"),e.visible=!e.visible,"function"==typeof i._doClick&&i._doClick(t,i),e.g.wd("checkbox"))},t}),Ys("CheckBox",function(t){t=Ws(t),t=xs("CheckBoxButton",t,{name:"Button",margin:new ut(0,1,0,0)});var i=xs(sa,"Horizontal",t,{Fw:!0,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,Gt:t.Gt,Ht:t.Ht,click:t.click,_buttonClick:t.click});return t.Gt=null,t.Ht=null,t.click=null,i}),ra.prototype.copy=function(){var t=new ra;return t.fi=this.fi,t.oi=this.oi,t.ii=this.ii,t.xr=this.xr,t.yr=this.yr,t.Bi=this.Bi,t.Ai=this.Ai,t.zi=this.zi,t.vr=this.vr,t.wr=this.wr,t.yi=this.yi,t.Op=this.Op,t.Pp=this.Pp,t.Qp=this.Qp,t.Np=this.Np,t.Hi=this.Hi,t.ji=this.ji,t},Nn.Ja(sa,ks),Nn.Uh(sa),Nn.ea("Panel",sa),sa.prototype.cloneProtected=function(t){if(ks.prototype.cloneProtected.call(this,t),t.ia=this.ia,t.Se=this.Se.R(),t.Pg=this.Pg,t.Pq=this.Pq,t.rq=this.rq.R(),t.mi=this.mi,t.ia===_s){t.ij=this.ij.R(),t.xh=this.xh,t.li=this.li,t.Ql=this.Ql,t.wh=this.wh,t.vh=this.vh,t.Pl=this.Pl;var i,e=[];if(0<this.Ld.length)for(var n=this.Ld,o=n.length,r=0;r<o;r++){void 0!==n[r]&&((i=n[r].copy()).Al(t),e[r]=i)}if(t.Ld=e,e=[],0<this.Gd.length)for(o=(n=this.Gd).length,r=0;r<o;r++)void 0!==n[r]&&((i=n[r].copy()).Al(t),e[r]=i);t.Gd=e,t.pm=this.pm,t.Ol=this.Ol,t.Ii=this.Ii,t.vi=this.vi}t.Io=this.Io,t.Kq=this.Kq.R(),t.Lq=this.Lq.R(),t.ie=this.ie,t.tk=this.tk,t.cr=this.cr,t.tj=this.tj,t.hg=this.hg,t.Zn=this.Zn,t.Ji.assign(this.Ji),t.Ah=this.Ah,null!==this.as&&(t.as=this.as)},sa.prototype.Vh=function(t){ks.prototype.Vh.call(this,t),t.za=this.za;for(var i=t.za.n,e=i.length,n=0;n<e;n++)i[n].Wg=t;t.um=null},sa.prototype.copy=function(){var t=ks.prototype.copy.call(this);if(null===t)return null;for(var i=this.za.n,e=i.length,n=0;n<e;n++){var o=i[n].copy(),r=t;o.Al(r),o.jm=null;var s,a=r.za,h=a.count;a.Ad(h,o),null!==(a=r.Y)&&((a.em=null)!==o.Sd&&a instanceof Lu&&(a.Ah=!0),null!==(s=r.g)&&s.la.ib||a.Lc(Gt,"elements",r,null,o,null,h))}return t},sa.prototype.toString=function(){return"Panel("+this.type+")#"+Nn.ld(this)},sa.Position=Xs=Nn.p(sa,"Position",0),sa.Horizontal=Nn.p(sa,"Horizontal",1),sa.Vertical=Zs=Nn.p(sa,"Vertical",2),sa.Spot=Qs=Nn.p(sa,"Spot",3),sa.Auto=$s=Nn.p(sa,"Auto",4),sa.Table=_s=Nn.p(sa,"Table",5),sa.Viewbox=Nn.p(sa,"Viewbox",6),sa.TableRow=ta=Nn.p(sa,"TableRow",7),sa.TableColumn=ia=Nn.p(sa,"TableColumn",8),sa.Link=ea=Nn.p(sa,"Link",9),sa.Grid=na=Nn.p(sa,"Grid",10),Nn.defineProperty(sa,{type:"type"},function(){return this.ia},function(t){var i=this.ia;i!==t&&(i!==ta&&i!==ia||Nn.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+t),this.ia=t,this.ia===na?this.Pg=!0:this.ia===_s&&aa(this),this.P(),this.h("type",i,t))}),Nn.u(sa,{elements:"elements"},function(){return this.za.i}),Nn.u(sa,{Ha:"naturalBounds"},function(){return this.Qc}),Nn.defineProperty(sa,{padding:"padding"},function(){return this.Se},function(t){"number"==typeof t?(t<0&&Nn.va(t,">= 0",sa,"padding"),t=new ut(t)):(Nn.A(t,ut,sa,"padding"),t.left<0&&Nn.va(t.left,">= 0",sa,"padding:value.left"),t.right<0&&Nn.va(t.right,">= 0",sa,"padding:value.right"),t.top<0&&Nn.va(t.top,">= 0",sa,"padding:value.top"),t.bottom<0&&Nn.va(t.bottom,">= 0",sa,"padding:value.bottom"));var i=this.Se;i.K(t)||(this.Se=t=t.R(),this.P(),this.h("padding",i,t))}),Nn.defineProperty(sa,{fl:"defaultAlignment"},function(){return this.rq},function(t){var i=this.rq;i.K(t)||(this.rq=t=t.R(),this.P(),this.h("defaultAlignment",i,t))}),Nn.defineProperty(sa,{Md:"defaultStretch"},function(){return this.mi},function(t){var i=this.mi;i!==t&&(Nn.pb(t,ks,sa,"defaultStretch"),this.mi=t,this.P(),this.h("defaultStretch",i,t))}),Nn.defineProperty(sa,{IJ:"defaultSeparatorPadding"},function(){return void 0===this.ij?Ut:this.ij},function(t){var i;void 0!==this.ij&&("number"==typeof t&&(t=new ut(t)),(i=this.ij).K(t)||(this.ij=t=t.R(),this.h("defaultSeparatorPadding",i,t)))}),Nn.defineProperty(sa,{GJ:"defaultRowSeparatorStroke"},function(){return void 0===this.li?null:this.li},function(t){var i=this.li;i!==t&&(null===t||"string"==typeof t||t instanceof fs)&&(t instanceof fs&&t.freeze(),this.li=t,this.h("defaultRowSeparatorStroke",i,t))}),Nn.defineProperty(sa,{HJ:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.xh?1:this.xh},function(t){var i;void 0===this.xh||(i=this.xh)!==t&&isFinite(t)&&0<=t&&(this.xh=t,this.h("defaultRowSeparatorStrokeWidth",i,t))}),Nn.defineProperty(sa,{FJ:"defaultRowSeparatorDashArray"},function(){return void 0===this.Ql?null:this.Ql},function(t){if(void 0!==this.Ql){var i=this.Ql;if(i!==t){if(null===t||Array.isArray(t)||Nn.Ed(t,"Array",sa,"defaultRowSeparatorDashArray:value"),null!==t){for(var e=t.length,n=0,o=0;o<e;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||Nn.k("defaultRowSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),n+=r}if(0===n){if(null===i)return;t=null}}this.Ql=t,this.pa(),this.h("defaultRowSeparatorDashArray",i,t)}}}),Nn.defineProperty(sa,{AJ:"defaultColumnSeparatorStroke"},function(){return void 0===this.vh?null:this.vh},function(t){var i;void 0===this.vh||(i=this.vh)!==t&&(null===t||"string"==typeof t||t instanceof fs)&&(t instanceof fs&&t.freeze(),this.vh=t,this.h("defaultColumnSeparatorStroke",i,t))}),Nn.defineProperty(sa,{BJ:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.wh?1:this.wh},function(t){var i;void 0===this.wh||(i=this.wh)!==t&&isFinite(t)&&0<=t&&(this.wh=t,this.h("defaultColumnSeparatorStrokeWidth",i,t))}),Nn.defineProperty(sa,{zJ:"defaultColumnSeparatorDashArray"},function(){return void 0===this.Pl?null:this.Pl},function(t){if(void 0!==this.Pl){var i=this.Pl;if(i!==t){if(null===t||Array.isArray(t)||Nn.Ed(t,"Array",sa,"defaultColumnSeparatorDashArray:value"),null!==t){for(var e=t.length,n=0,o=0;o<e;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||Nn.k("defaultColumnSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),n+=r}if(0===n){if(null===i)return;t=null}}this.Pl=t,this.pa(),this.h("defaultColumnSeparatorDashArray",i,t)}}}),Nn.defineProperty(sa,{RK:"viewboxStretch"},function(){return this.Io},function(t){var i=this.Io;i!==t&&(Nn.pb(t,ks,sa,"viewboxStretch"),this.Io=t,this.h("viewboxStretch",i,t))}),Nn.defineProperty(sa,{Ew:"gridCellSize"},function(){return this.Kq},function(t){var i=this.Kq;i.K(t)||(Nn.A(t,st,sa,"gridCellSize"),t.G()&&0!==t.width&&0!==t.height||Nn.k("Invalid Panel.gridCellSize: "+t),this.Kq=t.R(),null!==this.g&&this===this.g.mt&&yr(this.g),this.pa(),this.h("gridCellSize",i,t))}),Nn.defineProperty(sa,{UD:"gridOrigin"},function(){return this.Lq},function(t){var i=this.Lq;i.K(t)||(Nn.A(t,Se,sa,"gridOrigin"),t.G()||Nn.k("Invalid Panel.gridOrigin: "+t),this.Lq=t.R(),null!==this.g&&yr(this.g),this.pa(),this.h("gridOrigin",i,t))}),(t=sa.prototype).xv=function(t){ks.prototype.xv.call(this,t);for(var i=this.za.n,e=i.length,n=0;n<e;n++)i[n].xv(t)},t.Xj=function(t,i){if(this.ia===na){var e=this.Ri()*i.scale;e<=0&&(e=1);var n=(o=this.Ew).width,o=o.height,r=(s=this.Ha).width,s=s.height,a=Math.ceil(r/n),h=Math.ceil(s/o),l=this.UD;t.save(),t.beginPath(),t.rect(0,0,r,s),t.clip();for(var u=[],f=this.za.n,c=f.length,d=0;d<c;d++){var p=f[d],y=[];if(u.push(y),p.visible)for(var p=fa(p.Ab),g=d+1;g<c;g++){var v=f[g];v.visible&&fa(v.Ab)===p&&(2<=(v=v.interval)&&y.push(v))}}for(c=(f=this.za.n).length,d=0;d<c;d++){var m=f[d];if(m.visible&&!(n*(y=m.interval)*e<2)){var p=u[d],g=!1,b=!0,x=m.cF;if(null!==x&&(g=!0,b=t.pz(x,m.ke)),"LineV"===m.Ab){t.lineWidth=m.lb,Ls(this,t,m.stroke,!1,!1),t.beginPath();for(var w=v=Math.floor(-l.x/n);w<=v+a;w++){var k=w*n+l.x;0<=k&&k<r&&ua(w,y,p)&&(g&&!b?Ps(t,k,0,k,s,x,m.ke):(t.moveTo(k,0),t.lineTo(k,s)))}t.stroke()}else if("LineH"===m.Ab){for(t.lineWidth=m.lb,Ls(this,t,m.stroke,!1,!1),t.beginPath(),w=v=Math.floor(-l.y/o);w<=v+h;w++)0<=(k=w*o+l.y)&&k<=s&&ua(w,y,p)&&(g&&!b?Ps(t,0,k,r,k,x,m.ke):(t.moveTo(0,k),t.lineTo(r,k)));t.stroke()}else if("BarV"===m.Ab)for(Ls(this,t,m.fill,!0,!1),m=m.width,isNaN(m)&&(m=n),w=v=Math.floor(-l.x/n);w<=v+a;w++)0<=(k=w*n+l.x)&&k<r&&ua(w,y,p)&&t.fillRect(k,0,m,s);else if("BarH"===m.Ab)for(Ls(this,t,m.fill,!0,!1),m=m.height,isNaN(m)&&(m=o),w=v=Math.floor(-l.y/o);w<=v+h;w++)0<=(k=w*o+l.y)&&k<=s&&ua(w,y,p)&&t.fillRect(0,k,r,m);g&&t.nz()}}t.restore(),Tt(t,!1)}else{for(this.ia===_s&&(t.lineCap="butt",la(this,t,!0,this.Ld,!0),la(this,t,!1,this.Gd,!0),ha(this,t,!0,this.Ld),ha(this,t,!1,this.Gd),la(this,t,!0,this.Ld,!1),la(this,t,!1,this.Gd,!1)),(e=this.cE)&&t.save(),n=this.Xe(),r=(o=this.za.n).length,s=0;s<r;s++)a=o[s],e&&a===n&&(t.pw=!0),a.We(t,i),e&&a===n&&(t.pw=!1);e&&(t.restore(),Tt(t,!0))}},t.bp=function(t,i,e,n,o){var r=this.Kg(),s=this.transform,a=1/(s.m11*s.m22-s.m12*s.m21),h=s.m22*a,l=-s.m12*a,u=-s.m21*a,f=s.m11*a,c=a*(s.m21*s.dy-s.m22*s.dx),d=a*(s.m12*s.dx-s.m11*s.dy);if(null!==this.Bm)return Mi((s=this.U).left,s.top,s.right,s.bottom,t,i,e,n,o);if(null!==this.background)r=t*h+i*u+c,a=t*l+i*f+d,t=e*h+n*u+c,e=e*l+n*f+d,o.m(0,0),e=Mi(0,0,(n=this.Ha).width,n.height,r,a,t,e,o),o.transform(s);else{for(r||(f=h=1,d=c=u=l=0),a=t*h+i*u+c,t=t*l+i*f+d,h=e*h+n*u+c,n=e*l+n*f+d,o.m(h,n),l=(h-a)*(h-a)+(n-t)*(n-t),e=!1,d=(f=this.za.n).length,u=Nn.L(),c=0;c<d;c++)(i=f[c]).visible&&i.bp(a,t,h,n,u)&&(e=!0,(i=(a-u.x)*(a-u.x)+(t-u.y)*(t-u.y))<l&&(l=i,o.set(u)));Nn.v(u),r&&o.transform(s)}return e},t.P=function(t){ks.prototype.P.call(this,t),this.ia!==$s||null!==(t=this.Xe())&&t.P(!0);for(var i=(t=this.za.n).length,e=0;e<i;e++){var n=t[e];!0!==Vs(n)&&(n.xa.G()||(n instanceof Tf||n instanceof sa||n instanceof qa||Bs(n,!1)!==ds)&&n.P(!0))}},t.fp=function(){if(!1===Vs(this)){Hs(this,!0),Us(this,!0);for(var t=this.za.n,i=t.length,e=0;e<i;e++)t[e].fp()}},t.ri=function(){if(0!=(2048&this.fa)==!1){Gs(this,!0),Rs(this,!0);for(var t=this.za.n,i=t.length,e=0;e<i;e++)t[e].Cz()}},t.Cz=function(){Rs(this,!0);for(var t=this.za.n,i=t.length,e=0;e<i;e++)t[e].Cz()},t.np=function(t,i,e,n){var o=this.Ji;o.width=0,o.height=0;var r=this.xa,s=this.ih;void 0===e&&(e=s.width,n=s.height),e=Math.max(e,s.width),n=Math.max(n,s.height);var a=this.xf;isNaN(r.width)||(t=Math.min(r.width,a.width)),isNaN(r.height)||(i=Math.min(r.height,a.height)),t=Math.max(e,t),i=Math.max(n,i);var h=this.padding;t=Math.max(t-h.left-h.right,0),i=Math.max(i-h.top-h.bottom,0);var l=this.za.n;if(0!==l.length){var u=this.ia.Ob;switch(u){case"Position":var f=t,c=i,d=e,p=n,y=l.length;o.x=0,o.y=0,o.width=0;for(var g=o.height=0;g<y;g++){var v,m,b,x,w,k,M,P,T,S=l[g];!S.visible&&S!==this.cc||(m=(v=S.margin).right+v.left,b=v.top+v.bottom,Ns(S,f,c,d,p),x=S.Ca,w=Math.max(x.width+m,0),k=Math.max(x.height+b,0),P=S.position.x,T=S.position.y,isFinite(P)||(P=0),isFinite(T)||(T=0),S instanceof ja&&S.eE&&(P-=M=S.lb/2,T-=M),Fn(o,P,T,w,k))}break;case"Vertical":for(var C=t,N=e,j=l.length,D=Nn.jb(),L=0;L<j;L++){var A,F,z,B,O,E,q,I=l[L];!I.visible&&I!==this.cc||((A=Bs(I,!1))!==ds&&A!==ys?D.push(I):(z=(F=I.margin).right+F.left,B=F.top+F.bottom,Ns(I,C,1/0,N,0),O=I.Ca,E=Math.max(O.width+z,0),q=Math.max(O.height+B,0),o.width=Math.max(o.width,E),o.height+=q))}var G=D.length;if(0!==G){for(this.xa.width?C=Math.min(this.xa.width,this.xf.width):0!==o.width&&(C=Math.min(o.width,this.xf.width)),L=0;L<G;L++)!(I=D[L]).visible&&I!==this.cc||(z=(F=I.margin).right+F.left,B=F.top+F.bottom,Ns(I,C,1/0,N,0),O=I.Ca,E=Math.max(O.width+z,0),q=Math.max(O.height+B,0),o.width=Math.max(o.width,E),o.height+=q);Nn.sa(D)}break;case"Horizontal":for(var R=i,V=n,H=l.length,K=Nn.jb(),U=0;U<H;U++){var J,Y,W,X,Z,Q,$,_=l[U];!_.visible&&_!==this.cc||((J=Bs(_,!1))!==ds&&J!==gs?K.push(_):(W=(Y=_.margin).right+Y.left,X=Y.top+Y.bottom,Ns(_,1/0,R,0,V),Z=_.Ca,Q=Math.max(Z.width+W,0),$=Math.max(Z.height+X,0),o.width+=Q,o.height=Math.max(o.height,$)))}var tt=K.length;if(0!==tt){for(this.xa.height?R=Math.min(this.xa.height,this.xf.height):0!==o.height&&(R=Math.min(o.height,this.xf.height)),U=0;U<tt;U++)!(_=K[U]).visible&&_!==this.cc||(W=(Y=_.margin).right+Y.left,X=Y.top+Y.bottom,Ns(_,1/0,R,0,V),Z=_.Ca,Q=Math.max(Z.width+W,0),$=Math.max(Z.height+X,0),o.width+=Q,o.height=Math.max(o.height,$));Nn.sa(K)}break;case"Spot":t:{var it=t,et=i,nt=e,ot=n,rt=l.length,st=this.Xe(),at=st.margin,ht=0,lt=0,ut=at.right+at.left,ft=at.top+at.bottom;Ns(st,it,et,nt,ot);var ct=(vt=st.Ca).width,dt=vt.height,pt=Math.max(ct+ut,0),yt=Math.max(dt+ft,0);o.x=-at.left,o.y=-at.top,o.width=pt,o.height=yt;for(var gt=0;gt<rt;gt++){var vt,mt,bt,xt=l[gt];xt===st||!xt.visible&&xt!==this.cc||(ht=(at=xt.margin).right+at.left,lt=at.top+at.bottom,Ns(xt,it,et,0,0),vt=xt.Ca,pt=Math.max(vt.width+ht,0),yt=Math.max(vt.height+lt,0),(mt=xt.alignment).Uc()&&(mt=this.fl),mt.cd()||(mt=jn),(bt=xt.Tj).Uc()&&(bt=jn),Fn(o,mt.x*ct+mt.offsetX-(bt.x*vt.width-bt.offsetX)-at.left,mt.y*dt+mt.offsetY-(bt.y*vt.height-bt.offsetY)-at.top,pt,yt))}var wt=st.stretch;switch(wt===ps&&(wt=Bs(st,!1)),wt){case ds:break t;case vs:if(!isFinite(it)&&!isFinite(et))break t;break;case gs:if(!isFinite(it))break t;break;case ys:if(!isFinite(et))break t}for(ct=(vt=st.Ca).width,dt=vt.height,pt=Math.max(ct+ut,0),yt=Math.max(dt+ft,0),at=st.margin,o.x=-at.left,o.y=-at.top,o.width=pt,o.height=yt,gt=0;gt<rt;gt++)(xt=l[gt])===st||!xt.visible&&xt!==this.cc||(ht=(at=xt.margin).right+at.left,lt=at.top+at.bottom,vt=xt.Ca,pt=Math.max(vt.width+ht,0),yt=Math.max(vt.height+lt,0),(mt=xt.alignment).Uc()&&(mt=this.fl),mt.cd()||(mt=jn),(bt=xt.Tj).Uc()&&(bt=jn),Fn(o,mt.x*ct+mt.offsetX-(bt.x*vt.width-bt.offsetX)-at.left,mt.y*dt+mt.offsetY-(bt.y*vt.height-bt.offsetY)-at.top,pt,yt))}break;case"Auto":var kt=t,Mt=i,Pt=e,Tt=n,St=l.length,Ct=this.Xe(),Nt=(Kt=Ct.margin).right+Kt.left,jt=Kt.top+Kt.bottom;Ns(Ct,kt,Mt,Pt,Tt);var Dt,Lt=Ct.Ca,At=0;Ct instanceof ja&&(At=(Dt=Ct).lb*Dt.scale);var Ft=Math.max(Lt.width+Nt,0),zt=Math.max(Lt.height+jt,0),Bt=ya(Ct),Ot=Bt.x*Ft+Bt.offsetX,Et=Bt.y*zt+Bt.offsetY,qt=(Bt=ga(Ct)).x*Ft+Bt.offsetX,It=Bt.y*zt+Bt.offsetY,Gt=kt,Rt=Mt;isFinite(kt)&&(Gt=Math.max(Math.abs(Ot-qt)-At,0)),isFinite(Mt)&&(Rt=Math.max(Math.abs(Et-It)-At,0));var Vt=Nn.El();Vt.m(0,0);for(var Ht=0;Ht<St;Ht++){var Kt,Ut,Jt,Yt=l[Ht];Yt===Ct||!Yt.visible&&Yt!==this.cc||(Ut=(Kt=Yt.margin).right+Kt.left,Jt=Kt.top+Kt.bottom,Ns(Yt,Gt,Rt,0,0),Lt=Yt.Ca,Ft=Math.max(Lt.width+Ut,0),zt=Math.max(Lt.height+Jt,0),Vt.m(Math.max(Ft,Vt.width),Math.max(zt,Vt.height)))}if(1===St)o.width=Ft,o.height=zt,Nn.Zj(Vt);else{var Wt=ya(Ct),Xt=ga(Ct),Zt=0,Qt=0;Xt.x!==Wt.x&&Xt.y!==Wt.y&&(Zt=Vt.width/Math.abs(Xt.x-Wt.x),Qt=Vt.height/Math.abs(Xt.y-Wt.y)),Nn.Zj(Vt),At=0,Ct instanceof ja&&(At=(Dt=Ct).lb*Dt.scale,Fa(Dt)===ms&&(Zt=Qt=Math.max(Zt,Qt)));var Zt=Zt+(Math.abs(Wt.offsetX)+Math.abs(Xt.offsetX)+At),Qt=Qt+(Math.abs(Wt.offsetY)+Math.abs(Xt.offsetY)+At),$t=Ct.stretch;switch($t===ps&&($t=Bs(Ct,!1)),$t){case ds:Tt=Pt=0;break;case vs:isFinite(kt)&&(Zt=kt),isFinite(Mt)&&(Qt=Mt);break;case gs:isFinite(kt)&&(Zt=kt),Tt=0;break;case ys:Pt=0,isFinite(Mt)&&(Qt=Mt)}Ct instanceof ja&&!Ct.xa.G()&&((Dt=Ct).Jh?Dt.un=null:Dt.Ra=null),Ct.fp(),Ns(Ct,Zt,Qt,Pt,Tt),o.width=Ct.Ca.width+Nt,o.height=Ct.Ca.height+jt}break;case"Table":for(var _t=t,ti=i,ii=e,ei=n,ni=l.length,oi=Nn.jb(),ri=Nn.jb(),si=0;si<ni;si++){var ai=(Ri=l[si])instanceof sa?Ri:null;if(null===ai||ai.type!==ta&&ai.type!==ia||!Ri.visible)oi.push(Ri);else{ri.push(Ri);for(var hi=ai.za.n,li=hi.length,ui=0;ui<li;ui++){var fi=hi[ui];ai.type===ta?fi.Wb=Ri.Wb:ai.type===ia&&(fi.column=Ri.column),oi.push(fi)}}}0===(ni=oi.length)&&(this.zd(0),this.yd(0));for(var ci=[],si=0;si<ni;si++)Hs(Ri=oi[si],!0),Us(Ri,!0),ci[Ri.Wb]||(ci[Ri.Wb]=[]),ci[Ri.Wb][Ri.column]||(ci[Ri.Wb][Ri.column]=[]),ci[Ri.Wb][Ri.column].push(Ri);Nn.sa(oi);for(var di=Nn.jb(),pi=Nn.jb(),yi=Nn.jb(),gi={count:0},vi={count:0},mi=_t,bi=ti,xi=this.Ld,ni=xi.length,si=0;si<ni;si++){void 0!==(ae=xi[si])&&(ae.Ia=0)}for(ni=(xi=this.Gd).length,si=0;si<ni;si++)void 0!==(ae=xi[si])&&(ae.Ia=0);for(var wi=ci.length,ki=0,si=0;si<wi;si++)ci[si]&&(ki=Math.max(ki,ci[si].length));for(var Mi=Math.min(this.Ii,wi-1),Pi=Math.min(this.vi,ki-1),Ti=0,wi=ci.length,si=0;si<wi;si++)if(ci[si])for(ki=ci[si].length,ui=(Vi=this.zd(si)).Ia=0;ui<ki;ui++)if(ci[si][ui]){var Si=this.yd(ui);void 0===di[ui]&&(Si.Ia=0,di[ui]=!0);for(var Ci,Ni,ji,Di,Li,Ai,Fi=ci[si][ui],zi=Fi.length,Bi=0;Bi<zi;Bi++){!(Ri=Fi[Bi]).visible&&Ri!==this.cc||((Ci=1<Ri.Fi||1<Ri.hi)&&(si<Mi||ui<Pi||pi.push(Ri)),Ki=(Gi=Ri.margin).right+Gi.left,Ui=Gi.top+Gi.bottom,fe=Os(Ri,Vi,Si,!1),Ni=Ri.xa,ji=!isNaN(Ni.height),Di=!isNaN(Ni.width)&&ji,Ci||fe===ds||Di||si<Mi||ui<Pi||(void 0!==gi[ui]||fe!==vs&&fe!==gs||(gi[ui]=-1,gi.count++),void 0!==vi[si]||fe!==vs&&fe!==ys||(vi[si]=-1,vi.count++),yi.push(Ri)),Ns(Ri,1/0,1/0,0,0),si<Mi||ui<Pi||(te=Ri.Ca,ie=Math.max(te.width+Ki,0),ee=Math.max(te.height+Ui,0),1!==Ri.Fi||fe!==ds&&fe!==gs||(Li=(ae=this.zd(si)).of(),bi<(Ti=Math.max(ee-ae.Ia,0))+Li&&(Ti=Math.max(bi-Li,0)),Ai=0===ae.Ia,ae.Ia+=Ti,bi=Math.max(bi-(Ti+(Ai?Li:0)),0)),1!==Ri.hi||fe!==ds&&fe!==ys||(Li=(ae=this.yd(ui)).of(),mi<(Ti=Math.max(ie-ae.Ia,0))+Li&&(Ti=Math.max(mi-Li,0)),Ai=0===ae.Ia,ae.Ia+=Ti,mi=Math.max(mi-(Ti+(Ai?Li:0)),0)),Ci&&Ri.fp()))}}Nn.sa(di);for(var Oi=0,Ei=0,ni=this.Qo,si=0;si<ni;si++)void 0!==this.Gd[si]&&(Oi+=this.yd(si).bb);for(ni=this.Dp,si=0;si<ni;si++)void 0!==this.Ld[si]&&(Ei+=this.zd(si).bb);for(var mi=Math.max(_t-Oi,0),qi=bi=Math.max(ti-Ei,0),Ii=mi,ni=yi.length,si=0;si<ni;si++){var Gi,Ri=yi[si],Vi=this.zd(Ri.Wb),Si=this.yd(Ri.column),Hi=Ri.Ca,Ki=(Gi=Ri.margin).right+Gi.left,Ui=Gi.top+Gi.bottom;gi[Ri.column]=0===Si.Ia&&void 0!==gi[Ri.column]?Math.max(Hi.width+Ki,gi[Ri.column]):null,vi[Ri.Wb]=0===Vi.Ia&&void 0!==vi[Ri.Wb]?Math.max(Hi.height+Ui,vi[Ri.Wb]):null}var Ji=0,Yi=0;for(si in vi)"count"!==si&&(Ji+=vi[si]);for(si in gi)"count"!==si&&(Yi+=gi[si]);for(var Wi=Nn.El(),si=0;si<ni;si++)if((Ri=yi[si]).visible||Ri===this.cc){var Vi=this.zd(Ri.Wb),Si=this.yd(Ri.column),Xi=0,Xi=isFinite(Si.width)?Si.width:(Xi=isFinite(mi)&&null!==gi[Ri.column]?0===Yi?Si.Ia+mi:gi[Ri.column]/Yi*Ii:null===gi[Ri.column]&&Si.Ia||mi,Math.max(0,Xi-Si.of())),Zi=0,Zi=isFinite(Vi.height)?Vi.height:(Zi=isFinite(bi)&&null!==vi[Ri.Wb]?0===Ji?Vi.Ia+bi:vi[Ri.Wb]/Ji*qi:null===vi[Ri.Wb]&&Vi.Ia||bi,Math.max(0,Zi-Vi.of()));switch(Wi.m(Math.max(Si.Zi,Math.min(Xi,Si.ff)),Math.max(Vi.Zi,Math.min(Zi,Vi.ff))),fe=Os(Ri,Vi,Si,!1)){case gs:Wi.height=Math.max(Wi.height,Vi.Ia+bi);break;case ys:Wi.width=Math.max(Wi.width,Si.Ia+mi)}Ki=(Gi=Ri.margin).right+Gi.left,Ui=Gi.top+Gi.bottom,Ri.fp(),Ns(Ri,Wi.width,Wi.height,Si.Zi,Vi.Zi),te=Ri.Ca,ie=Math.max(te.width+Ki,0),ee=Math.max(te.height+Ui,0),isFinite(mi)&&(ie=Math.min(ie,Wi.width)),isFinite(bi)&&(ee=Math.min(ee,Wi.height));var Qi=Vi.Ia;Vi.Ia=Math.max(Vi.Ia,ee),Ti=Vi.Ia-Qi,bi=Math.max(bi-Ti,0),Qi=Si.Ia,Si.Ia=Math.max(Si.Ia,ie),Ti=Si.Ia-Qi,mi=Math.max(mi-Ti,0)}Nn.sa(yi);for(var $i=Nn.El(),ni=pi.length,si=0;si<ni;si++)if((Ri=pi[si]).visible||Ri===this.cc){switch(Vi=this.zd(Ri.Wb),Si=this.yd(Ri.column),Wi.m(Math.max(Si.Zi,Math.min(_t,Si.ff)),Math.max(Vi.Zi,Math.min(ti,Vi.ff))),fe=Os(Ri,Vi,Si,!1)){case vs:0!==Si.Ia&&(Wi.width=Math.min(Wi.width,Si.Ia)),0!==Vi.Ia&&(Wi.height=Math.min(Wi.height,Vi.Ia));break;case gs:0!==Si.Ia&&(Wi.width=Math.min(Wi.width,Si.Ia));break;case ys:0!==Vi.Ia&&(Wi.height=Math.min(Wi.height,Vi.Ia))}isFinite(Si.width)&&(Wi.width=Si.width),isFinite(Vi.height)&&(Wi.height=Vi.height),$i.m(0,0);for(var _i=1;_i<Ri.Fi&&!(Ri.Wb+_i>=this.Dp);_i++)ae=this.zd(Ri.Wb+_i),$i.height+=Math.max(ae.Zi,isNaN(ae.Te)?ae.ff:Math.min(ae.Te,ae.ff));for(_i=1;_i<Ri.hi&&!(Ri.column+_i>=this.Qo);_i++)ae=this.yd(Ri.column+_i),$i.width+=Math.max(ae.Zi,isNaN(ae.Te)?ae.ff:Math.min(ae.Te,ae.ff));Wi.width+=$i.width,Wi.height+=$i.height,Ki=(Gi=Ri.margin).right+Gi.left,Ui=Gi.top+Gi.bottom,Ns(Ri,Wi.width,Wi.height,ii,ei);for(var te=Ri.Ca,ie=Math.max(te.width+Ki,0),ee=Math.max(te.height+Ui,0),ne=0,_i=0;_i<Ri.Fi&&!(Ri.Wb+_i>=this.Dp);_i++)ne+=(ae=this.zd(Ri.Wb+_i)).total||0;if(ne<ee){var oe=ee-ne,re=ee-ne;if(null!==Ri.qx)for(var se=Ri.qx,_i=0;_i<Ri.Fi&&!(oe<=0)&&!(Ri.Wb+_i>=this.Dp);_i++){var ae,he=(ae=this.zd(Ri.Wb+_i)).bb||0,le=se(Ri,ae,re);ae.Ia=Math.min(ae.ff,he+le),ae.bb!==he&&(oe-=ae.bb-he)}for(;0<oe&&(he=ae.bb||0,isNaN(ae.height)&&ae.ff>he&&(ae.Ia=Math.min(ae.ff,he+oe),ae.bb!==he&&(oe-=ae.bb-he)),0!==ae.index);)ae=this.zd(ae.index-1)}for(var ue=0,_i=0;_i<Ri.hi&&!(Ri.column+_i>=this.Qo);_i++)ue+=(ae=this.yd(Ri.column+_i)).total||0;if(ue<ie){if(re=oe=ie-ue,null!==Ri.qx)for(se=Ri.qx,_i=0;_i<Ri.hi&&!(oe<=0)&&!(Ri.column+_i>=this.Qo);_i++)he=(ae=this.yd(Ri.column+_i)).bb||0,le=se(Ri,ae,re),ae.Ia=Math.min(ae.ff,he+le),ae.bb!==he&&(oe-=ae.bb-he);for(;0<oe&&(he=ae.bb||0,isNaN(ae.width)&&ae.ff>he&&(ae.Ia=Math.min(ae.ff,he+oe),ae.bb!==he&&(oe-=ae.bb-he)),0!==ae.index);)ae=this.yd(ae.index-1)}}Nn.sa(pi),Nn.Zj($i),Nn.Zj(Wi);for(var fe=Bs(this,!0),ce=this.xa,de=this.xf,pe=Ei=Oi=0,ye=0,ni=this.Qo,si=0;si<ni;si++)void 0!==this.Gd[si]&&(ae=this.yd(si),isFinite(ae.width)?(pe+=ae.width,pe+=ae.of()):Na(ae)===Ma?(pe+=ae.bb,pe+=ae.of()):0!==ae.bb&&(Oi+=ae.bb,Oi+=ae.of()));var ge=isFinite(ce.width)?Math.min(ce.width,de.width):fe!==ds&&isFinite(_t)?_t:Oi,ge=Math.max(ge,this.ih.width),ge=Math.max(ge-pe,0),ve=Math.max(ge/Oi,1);for(isFinite(ve)||(ve=1),si=0;si<ni;si++)void 0!==this.Gd[si]&&(ae=this.yd(si),isFinite(ae.width)||Na(ae)===Ma||(ae.Ia=ae.bb*ve),ae.position=o.width,0!==ae.bb&&(o.width+=ae.bb,o.width+=ae.of()));for(ni=this.Dp,si=0;si<ni;si++)void 0!==this.Ld[si]&&(ae=this.zd(si),isFinite(ae.height)?(ye+=ae.height,ye+=ae.of()):Na(ae)===Ma?(ye+=ae.bb,ye+=ae.of()):0!==ae.bb&&(Ei+=ae.bb,Ei+=ae.of()));var me=isFinite(ce.height)?Math.min(ce.height,de.height):fe!==ds&&isFinite(ti)?ti:Ei,me=Math.max(me,this.ih.height),me=Math.max(me-ye,0),be=Math.max(me/Ei,1);for(isFinite(be)||(be=1),si=0;si<ni;si++)void 0!==this.Ld[si]&&(ae=this.zd(si),isFinite(ae.height)||Na(ae)===Ma||(ae.Ia=ae.bb*be),ae.position=o.height,0!==ae.bb&&(o.height+=ae.bb,o.height+=ae.of()));for(ni=ri.length,si=0;si<ni;si++){var xe=ri[si];Zi=xe.type===ta?(Xi=o.width,(ae=this.zd(xe.Wb)).Ia):(Xi=(ae=this.yd(xe.column)).Ia,o.height),xe.kd.m(0,0,Xi,Zi),Hs(xe,!1),ci[xe.Wb]||(ci[xe.Wb]=[]),ci[xe.Wb][xe.column]||(ci[xe.Wb][xe.column]=[]),ci[xe.Wb][xe.column].push(xe)}Nn.sa(ri),this.as=ci;break;case"Viewbox":var we=t,ke=i,Me=e,Pe=n;1<l.length&&Nn.k("Viewbox Panel cannot contain more than one GraphObject.");var Te=l[0];Te.Tb=1,Te.fp(),Ns(Te,1/0,1/0,Me,Pe);var Se,Ce,Ne,je,De,Le,Ae=Te.Ca,Fe=Te.margin,ze=Fe.right+Fe.left,Be=Fe.top+Fe.bottom;(isFinite(we)||isFinite(ke))&&(Se=Te.scale,Ce=Ae.width,Ne=Ae.height,je=Math.max(we-ze,0),De=Math.max(ke-Be,0),Le=1,this.Io===ms?0!==Ce&&0!==Ne&&(Le=Math.min(je/Ce,De/Ne)):0!==Ce&&0!==Ne&&(Le=Math.max(je/Ce,De/Ne)),0===Le&&(Le=1e-4),Te.Tb*=Le,Se!==Te.scale&&(Hs(Te,!0),Ns(Te,1/0,1/0,Me,Pe))),Ae=Te.Ca,o.width=isFinite(we)?we:Math.max(Ae.width+ze,0),o.height=isFinite(ke)?ke:Math.max(Ae.height+Be,0);break;case"Link":var Oe=l.length,Ee=this instanceof Du?this.Mf:this;if(Ee instanceof Ru)if(0===Oe){An(pn=this.Qc,0,0),(dn=this.Ca).m(0,0,0,0)}else{var qe=this instanceof Du?null:Ee.path,Ie=Ee.bn,Ge=this.Ji;Ge.assign(Ie),Ge.x=0;var Re=Ge.y=0,Ve=Ee.points,Re=void 0!==this.oa?this.oa:Ve.count;this instanceof Du?this.Wm(!1):Ee.Wm(!1);var He=Ie.width,Ke=Ie.height;this.wi.m(Ie.x,Ie.y),null===this.Lg&&(this.Lg=new Dn(Ln)),this.Lg.clear(),null!==qe&&(Aa(qe,He,Ke,this),dn=qe.Ca,Ge.ai(dn),this.Lg.add(dn));for(var Ue=Nn.ph(),Je=Nn.L(),Ye=Nn.L(),We=0;We<Oe;We++){var Xe,Ze,Qe,$e,_e,tn,en,nn,on,rn,sn,an,hn,ln,un,fn,cn,dn,pn,yn,gn,vn,mn,bn,xn,wn=l[We];wn!==qe&&(wn.Rf&&wn instanceof ja?(Aa(wn,He,Ke,this),dn=wn.Ca,Ge.ai(dn),this.Lg.add(dn)):Re<2?(Ns(wn,1/0,1/0),dn=wn.Ca,Ge.ai(dn),this.Lg.add(dn)):(Xe=wn.ve,Ze=wn.kA,(Qe=wn.Tj).se()&&(Qe=jn),$e=wn.Vt,_e=wn.SE,en=cn=tn=0,cn=Xe<-Re||Re<=Xe?(nn=Ee.tE,fn=Ee.sE,$e!==Wh&&(en=Ee.computeAngle(wn,$e,fn),wn.Jl=en),tn=nn.x-Ie.x,nn.y-Ie.y):(sn=0<=Xe?(rn=Ve.da(Xe),Xe<Re-1?Ve.da(Xe+1):rn):(on=Re+Xe,rn=Ve.da(on),0<on?Ve.da(on-1):rn),fn=rn.Fc(sn)?(hn=0<=Xe?(an=0<Xe?Ve.da(Xe-1):rn,Xe<Re-2?Ve.da(Xe+2):sn):(an=on<Re-1?Ve.da(on+1):rn,1<on?Ve.da(on-2):sn),ln=an.rf(rn),(un=sn.rf(hn))+10<ln?0<=Xe?an.xc(rn):rn.xc(an):ln+10<un?0<=Xe?sn.xc(hn):hn.xc(sn):0<=Xe?an.xc(hn):hn.xc(an)):0<=Xe?rn.xc(sn):sn.xc(rn),$e!==Wh&&(en=Ee.computeAngle(wn,$e,fn),wn.Jl=en),tn=rn.x+(sn.x-rn.x)*Ze-Ie.x,rn.y+(sn.y-rn.y)*Ze-Ie.y),Ns(wn,1/0,1/0),dn=wn.Ca,pn=wn.Ha,yn=0,wn instanceof ja&&(yn=wn.lb),gn=pn.width+yn,vn=pn.height+yn,Ue.reset(),Ue.translate(-dn.x,-dn.y),Ue.scale(wn.scale,wn.scale),Ue.rotate($e===Wh?wn.angle:fn,gn/2,vn/2),mn=new Ln(0,0,gn,vn),Je.Yt(mn,Qe),Ue.ub(Je),bn=-Je.x+yn/2,xn=-Je.y+yn/2,Ye.assign(_e),isNaN(Ye.x)&&(Ye.x=0<=Xe?gn/2+3:-(gn/2+3)),isNaN(Ye.y)&&(Ye.y=-(vn/2+3)),Ye.rotate(fn),tn+=Ye.x,cn+=Ye.y,mn.set(dn),mn.x=tn+bn,mn.y=cn+xn,this.Lg.add(mn),Ge.ai(mn)))}if(this.Ce)for(var kn=this.Sf;kn.next();)Ns(kn.value,1/0,1/0);this.Ji=Ge;var Mn=this.wi;Mn.m(Mn.x+Ge.x,Mn.y+Ge.y),An(o,Ge.width||0,Ge.height||0),Nn.Ze(Ue),Nn.v(Je),Nn.v(Ye)}break;case"Grid":break;case"TableRow":case"TableColumn":Nn.k(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:Nn.k("Unknown panel type: "+u)}}var Pn=o.width,Tn=o.height,Sn=this.padding,Cn=Sn.top+Sn.bottom,Pn=Pn+(Sn.left+Sn.right),Tn=Tn+Cn;isFinite(r.width)&&(Pn=r.width),isFinite(r.height)&&(Tn=r.height),Pn=Math.min(a.width,Pn),Tn=Math.min(a.height,Tn),Pn=Math.max(s.width,Pn),Tn=Math.max(s.height,Tn),Pn=Math.max(e,Pn),Tn=Math.max(n,Tn),o.width=Pn,o.height=Tn,An(this.Qc,Pn,Tn),Ss(this,0,0,Pn,Tn)},sa.prototype.findMainElement=sa.prototype.Xe=function(){if(null===this.um){var t=this.za.n,i=t.length;if(0===i)return null;for(var e=0;e<i;e++){var n=t[e];if(!0===n.Rf)return this.um=n}this.um=t[0]}return this.um},sa.prototype.Li=function(t,i,e,n){var o=this.Ji,r=this.za.n,s=Nn.gk(0,0,0,0);if(0===r.length){var a=this.U;a.x=t,a.y=i,a.width=e,a.height=n}else{if(!this.xa.G()){var h=Bs(this,!0),l=this.kd,u=l.width,f=l.height,c=this.margin,d=c.left+c.right,p=c.top+c.bottom;switch(u===e&&f===n&&(h=ds),h){case ds:(e<u||n<f)&&(this.P(),Ns(this,e<u?e:u,n<f?n:f));break;case vs:this.P(!0),Ns(this,e+d,n+p,0,0);break;case gs:this.P(!0),Ns(this,e+d,f+p,0,0);break;case ys:this.P(!0),Ns(this,u+d,n+p,0,0)}}(a=this.U).x=t,a.y=i,a.width=e,a.height=n;var y=this.ia.Ob;switch(y){case"Position":for(var g=r.length,v=o.x-this.padding.left,m=o.y-this.padding.top,b=0;b<g;b++){var x,w=r[b],k=w.Ca,M=w.margin,P=w.position.x,T=w.position.y;s.x=isNaN(P)?-v:P-v,s.y=isNaN(T)?-m:T-m,w instanceof ja&&w.eE&&(x=w.lb/2,s.x-=x,s.y-=x),s.x+=M.left,s.y+=M.top,s.width=k.width,s.height=k.height,w.visible&&w.Ec(s.x,s.y,s.width,s.height)}break;case"Vertical":for(var S=r.length,C=this.padding.left,N=this.padding.top,j=0;j<S;j++){var D,L,A,F,z,B,O,E,q=C,I=r[j];I.visible&&(D=I.Ca,A=(L=I.margin).left+L.right,F=C+this.padding.right,z=D.width,B=Bs(I,!1),(isNaN(I.xa.width)&&B===vs||B===gs)&&(z=Math.max(o.width-A-F,0)),O=z+A+F,(E=I.alignment).Uc()&&(E=this.fl),E.cd()||(E=jn),I.Ec(q+E.offsetX+L.left+(o.width*E.x-O*E.x),N+E.offsetY+L.top,z,D.height),N+=D.height+L.bottom+L.top)}break;case"Horizontal":for(var G=r.length,R=this.padding.top,V=this.padding.left,H=0;H<G;H++){var K,U,J,Y,W,X,Z,Q,$=R,_=r[H];_.visible&&(K=_.Ca,J=(U=_.margin).top+U.bottom,Y=R+this.padding.bottom,W=K.height,X=Bs(_,!1),(isNaN(_.xa.height)&&X===vs||X===ys)&&(W=Math.max(o.height-J-Y,0)),Z=W+J+Y,(Q=_.alignment).Uc()&&(Q=this.fl),Q.cd()||(Q=jn),_.Ec(V+Q.offsetX+U.left,$+Q.offsetY+U.top+(o.height*Q.y-Z*Q.y),K.width,W),V+=K.width+U.left+U.right)}break;case"Spot":var tt=r.length,it=this.Xe(),et=it.Ca,nt=et.width,ot=et.height,rt=this.padding,st=rt.left,at=rt.top;s.x=st-o.x,s.y=at-o.y,it.Ec(s.x,s.y,nt,ot);for(var ht=0;ht<tt;ht++){var lt,ut,ft,ct,dt,pt=r[ht];pt!==it&&(ut=(lt=pt.Ca).width,ft=lt.height,(ct=pt.alignment).Uc()&&(ct=this.fl),ct.cd()||(ct=jn),(dt=pt.Tj).Uc()&&(dt=jn),s.x=ct.x*nt+ct.offsetX-(dt.x*ut-dt.offsetX),s.y=ct.y*ot+ct.offsetY-(dt.y*ft-dt.offsetY),s.x-=o.x,s.y-=o.y,pt.visible&&pt.Ec(st+s.x,at+s.y,ut,ft))}break;case"Auto":var yt=r.length,gt=this.Xe(),vt=gt.Ca,mt=Nn.ag();mt.m(0,0,1,1);var bt=(Lt=gt.margin).left,xt=Lt.top,wt=this.padding,kt=wt.left,Mt=wt.top;s.x=bt,s.y=xt,s.width=vt.width,s.height=vt.height,gt.Ec(kt+s.x,Mt+s.y,s.width,s.height);var Pt=ya(gt),Tt=ga(gt),St=0+Pt.y*vt.height+Pt.offsetY,Ct=0+Tt.x*vt.width+Tt.offsetX,Nt=0+Tt.y*vt.height+Tt.offsetY;mt.x=0+Pt.x*vt.width+Pt.offsetX,mt.y=St,Fn(mt,Ct,Nt,0,0),mt.x+=bt+kt,mt.y+=xt+Mt;for(var jt=0;jt<yt;jt++){var Dt,Lt,At,Ft,zt,Bt=r[jt];Bt!==gt&&(Dt=Bt.Ca,Lt=Bt.margin,At=Math.max(Dt.width+Lt.right+Lt.left,0),Ft=Math.max(Dt.height+Lt.top+Lt.bottom,0),(zt=Bt.alignment).Uc()&&(zt=this.fl),zt.cd()||(zt=jn),s.x=mt.width*zt.x+zt.offsetX-At*zt.x+Lt.left+mt.x,s.y=mt.height*zt.y+zt.offsetY-Ft*zt.y+Lt.top+mt.y,s.width=mt.width,s.height=mt.height,Bt.visible&&(Pe(mt.x,mt.y,mt.width,mt.height,s.x,s.y,Dt.width,Dt.height)?Bt.Ec(s.x,s.y,Dt.width,Dt.height):Bt.Ec(s.x,s.y,Dt.width,Dt.height,new Ln(mt.x,mt.y,mt.width,mt.height))))}Nn.Vb(mt);break;case"Table":for(var Ot=r.length,Et=this.padding,qt=Et.left,It=Et.top,Gt=this.as,Rt=Gt.length,Vt=0,Ht=0;Ht<Rt;Ht++)Gt[Ht]&&(Vt=Math.max(Vt,Gt[Ht].length));for(var Kt=Math.min(this.Ii,Rt-1);Kt!==Rt&&(void 0===this.Ld[Kt]||0===this.Ld[Kt].bb);)Kt++;for(var Kt=Math.min(Kt,Rt-1),Ut=-this.Ld[Kt].kb,Jt=Math.min(this.vi,Vt-1);Jt!==Vt&&(void 0===this.Gd[Jt]||0===this.Gd[Jt].bb);)Jt++;for(var Jt=Math.min(Jt,Vt-1),Yt=-this.Gd[Jt].kb,Wt=Nn.El(),Ht=0;Ht<Rt;Ht++)if(Gt[Ht])for(var Vt=Gt[Ht].length,Xt=this.zd(Ht),Zt=Xt.kb+Ut+It+Xt.sD(),Qt=0;Qt<Vt;Qt++)if(Gt[Ht][Qt])for(var $t=this.yd(Qt),_t=$t.kb+Yt+qt+$t.sD(),ti=Gt[Ht][Qt],ii=ti.length,ei=0;ei<ii;ei++){var ni=ti[ei],oi=ni.Ca,ri=ni instanceof sa?ni:null;if(null===ri||ri.type!==ta&&ri.type!==ia){Wt.m(0,0);for(var si=1;si<ni.rowSpan&&!(Ht+si>=this.Dp);si++){var ai=this.zd(Ht+si);Wt.height+=ai.total}for(si=1;si<ni.rG&&!(Qt+si>=this.Qo);si++){var hi=this.yd(Qt+si);Wt.width+=hi.total}var li=$t.bb+Wt.width,ui=Xt.bb+Wt.height,fi=s.x=_t,ci=s.y=Zt,di=s.width=li,pi=s.height=ui;_t+li>o.width&&(di=Math.max(o.width-_t,0)),Zt+ui>o.height&&(pi=Math.max(o.height-Zt,0));var yi,gi,vi=ni.alignment,mi=0,bi=0,xi=0,wi=0;vi.Uc()?((vi=this.fl).cd()||(vi=jn),mi=vi.x,bi=vi.y,xi=vi.offsetX,wi=vi.offsetY,yi=$t.alignment,gi=Xt.alignment,yi.cd()&&(mi=yi.x,xi=yi.offsetX),gi.cd()&&(bi=gi.y,wi=gi.offsetY)):(mi=vi.x,bi=vi.y,xi=vi.offsetX,wi=vi.offsetY),(isNaN(mi)||isNaN(bi))&&(bi=mi=.5,wi=xi=0);var ki=oi.width,Mi=oi.height,Pi=ni.margin,Ti=Pi.left+Pi.right,Si=Pi.top+Pi.bottom,Ci=Os(ni,Xt,$t,!1);!isNaN(ni.xa.width)||Ci!==vs&&Ci!==gs||(ki=Math.max(li-Ti,0)),!isNaN(ni.xa.height)||Ci!==vs&&Ci!==ys||(Mi=Math.max(ui-Si,0));var Ni=ni.xf,ji=ni.ih,ki=Math.min(Ni.width,ki),Mi=Math.min(Ni.height,Mi),ki=Math.max(ji.width,ki),Di=(Mi=Math.max(ji.height,Mi))+Si;s.x+=s.width*mi-(ki+Ti)*mi+xi+Pi.left,s.y+=s.height*bi-Di*bi+wi+Pi.top,ni.visible&&(Pe(fi,ci,di,pi,s.x,s.y,oi.width,oi.height)?ni.Ec(s.x,s.y,ki,Mi):ni.Ec(s.x,s.y,ki,Mi,new Ln(fi,ci,di,pi)))}else{ni.ri(),ni.mc.Oa();var Li=ni.mc;Li.x=ri.type===ta?qt:_t,Li.y=ri.type===ia?It:Zt,Li.width=oi.width,Li.height=oi.height,ni.mc.freeze(),Us(ni,!1)}}for(Nn.Zj(Wt),Ht=0;Ht<Ot;Ht++)null===(ri=(ni=r[Ht])instanceof sa?ni:null)||ri.type!==ta&&ri.type!==ia||(Li=ni.mc,ni.Qc.Oa(),ni.Qc.m(0,0,Li.width,Li.height),ni.Qc.freeze());break;case"Viewbox":var Ai=r[0],Fi=Ai.Ca,zi=Ai.margin,Bi=zi.top+zi.bottom,Oi=Math.max(Fi.width+(zi.right+zi.left),0),Ei=Math.max(Fi.height+Bi,0),qi=Ai.alignment;qi.Uc()&&(qi=this.fl),qi.cd()||(qi=jn),s.x=o.width*qi.x-Oi*qi.x+qi.offsetX,s.y=o.height*qi.y-Ei*qi.y+qi.offsetY,s.width=Fi.width,s.height=Fi.height,Ai.Ec(s.x,s.y,s.width,s.height);break;case"Link":var Ii=r.length,Gi=this instanceof Du?this.Mf:this;if(Gi instanceof Ru){var Ri=this instanceof Du?null:Gi.path;if(null!==this.Lg){var Vi,Hi=this.Lg.n,Ki=0;null!==Ri&&Ki<this.Lg.count&&(Vi=Hi[Ki],Ki++,Ri.Ec(Vi.x-this.Ji.x,Vi.y-this.Ji.y,Vi.width,Vi.height));for(var Ui=0;Ui<Ii;Ui++){var Ji=r[Ui];Ji!==Ri&&Ki<this.Lg.count&&(Vi=Hi[Ki],Ki++,Ji.Ec(Vi.x-this.Ji.x,Vi.y-this.Ji.y,Vi.width,Vi.height))}}var Yi=Gi.points,Wi=Yi.count;if(2<=Wi&&this.Ce)for(var Xi=this.Sf;Xi.next();){var Zi,Qi,$i,_i,te,ie,ee,ne,oe,re,se,ae,he,le,ue,fe,ce,de=Xi.value,pe=Wi,ye=Yi,ge=de.ve,ve=de.kA,me=de.Tj,be=de.Vt,xe=de.SE,we=0,ke=0,Me=0,ke=ge<-pe||pe<=ge?(Zi=this.tE,oe=this.sE,be!==Wh&&(Me=this.computeAngle(de,be,oe),de.angle=Me),we=Zi.x,Zi.y):(_i=$i=void 0,_i=0<=ge?($i=ye.n[ge],ge<pe-1?ye.n[ge+1]:$i):(Qi=pe+ge,$i=ye.n[Qi],0<Qi?ye.n[Qi-1]:$i),oe=$i.Fc(_i)?(ie=te=void 0,ie=0<=ge?(te=0<ge?ye.n[ge-1]:$i,ge<pe-2?ye.n[ge+2]:_i):(te=Qi<pe-1?ye.n[Qi+1]:$i,1<Qi?ye.n[Qi-2]:_i),ee=te.rf($i),(ne=_i.rf(ie))+10<ee?0<=ge?te.xc($i):$i.xc(te):ee+10<ne?0<=ge?_i.xc(ie):ie.xc(_i):0<=ge?te.xc(ie):ie.xc(te)):0<=ge?$i.xc(_i):_i.xc($i),be!==Wh&&(Me=this.computeAngle(de,be,oe),de.angle=Me),we=$i.x+(_i.x-$i.x)*ve,$i.y+(_i.y-$i.y)*ve);me.K(Te)?de.location=new Se(we,ke):(me.se()&&(me=jn),(re=Nn.ph()).reset(),re.scale(de.scale,de.scale),re.rotate(de.angle,0,0),se=de.Ha,ae=Nn.gk(0,0,se.width,se.height),(he=Nn.L()).Yt(ae,me),re.ub(he),ue=-he.x,fe=-he.y,le=xe.copy(),isNaN(le.x)&&(le.x=0<=ge?he.x+3:-(he.x+3)),isNaN(le.y)&&(le.y=-(he.y+3)),le.rotate(oe),we+=le.x,ke+=le.y,re.nF(ae),ue+=ae.x,fe+=ae.y,ce=Nn.Mb(we+ue,ke+fe),de.move(ce),Nn.v(ce),Nn.v(he),Nn.Vb(ae),Nn.Ze(re))}this instanceof Du?this.Wm(!1):Gi.Wm(!1)}break;case"Grid":break;case"TableRow":case"TableColumn":Nn.k(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:Nn.k("Unknown panel type: "+y)}Nn.Vb(s)}},sa.prototype.Vj=function(t){var i=this.Ha;if(Pe(0,0,i.width,i.height,t.x,t.y)){for(var e=(i=this.za.n).length,n=Nn.Mb(0,0);e--;){var o=i[e];if((o.visible||o===this.cc)&&(rt(n.set(t),o.transform),o.Fa(n)))return Nn.v(n),!0}return Nn.v(n),null!==this.Ib||null!==this.nc}return!1},sa.prototype.zw=function(t){if(this.qn===t)return this;for(var i=this.za.n,e=i.length,n=0;n<e;n++){var o=i[n].zw(t);if(null!==o)return o}return null},sa.prototype.walkVisualTree=sa.prototype.UI=function(t){!function t(i,e,n){n(e);if(e instanceof sa)for(var o=(e=e.za.n).length,r=0;r<o;r++)t(i,e[r],n)}(this,this,t)},sa.prototype.findInVisualTree=sa.prototype.ct=function(t){return function t(i,e,n){if(n(e))return e;if(e instanceof sa)for(var o=(e=e.za.n).length,r=0;r<o;r++){var s=t(i,e[r],n);if(null!==s)return s}return null}(this,this,t)},sa.prototype.findObject=sa.prototype.be=function(t){if(this.name===t)return this;for(var i=this.za.n,e=i.length,n=0;n<e;n++){var o=i[n];if(o.name===t)return o;if(o instanceof sa)if(null===o.tj&&null===o.hg){if(null!==(o=o.be(t)))return o}else if(ba(o)&&(null!==(o=o.za.first())&&null!==(o=o.be(t))))return o}return null},(t=sa.prototype).Kg=function(){return!(this.type===ta||this.type===ia)},t.qe=function(t,i,e){if(!1===this.Gg)return null;if(void 0===i&&(i=null),void 0===e&&(e=null),Ks(this))return null;var n=this.Ha,o=1/this.Ri(),r=this.Kg(),s=r?t:rt(Nn.Mb(t.x,t.y),this.transform),a=10,h=5;if(null!==(u=this.g)&&(h=(a=u.ap("extraTouchArea"))/2),Pe(-h*o,-h*o,n.width+a*o,n.height+a*o,s.x,s.y)){if(!this.Pg){var l=(o=this.za.n).length,u=Nn.L(),h=(a=this.cE)?this.Xe():null;if(a&&(h.Kg()?rt(u.set(t),h.transform):u.set(t),!h.Fa(u)))return Nn.v(u),r||Nn.v(s),null;for(;l--;){var f=o[l];if((f.visible||f===this.cc)&&(f.Kg()?rt(u.set(t),f.transform):u.set(t),!a||f!==h)){var c=null;if(f instanceof sa?c=f.qe(u,i,e):!0===f.Gg&&f.Fa(u)&&(c=f),null!==c&&(null!==i&&(c=i(c)),null!==c&&(null===e||e(c))))return Nn.v(u),r||Nn.v(s),c}}Nn.v(u)}return null===this.background&&null===this.Bm?(r||Nn.v(s),null):(t=Pe(0,0,n.width,n.height,s.x,s.y)?this:null,r||Nn.v(s),t)}return r||Nn.v(s),null},t.ft=function(t,i,e,n){if(!1===this.Gg)return!1;void 0===i&&(i=null),void 0===e&&(e=null),n instanceof Dn||n instanceof Q||(n=new Dn(ks));var o=this.Ha,r=this.Kg(),s=r?t:rt(Nn.Mb(t.x,t.y),this.transform);if(Pe(0,0,o.width,o.height,s.x,s.y)){if(!this.Pg){for(var a=(o=this.za.n).length,h=Nn.L();a--;){var l,u=o[a];!u.visible&&u!==this.cc||(u.Kg()?rt(h.set(t),u.transform):h.set(t),(null!==(u=(l=u)instanceof sa?u:null)?u.ft(h,i,e,n):l.Fa(h))&&!1!==l.Gg&&(null!==i&&(l=i(l)),null===l||null!==e&&!e(l)||n.add(l)))}Nn.v(h)}return r||Nn.v(s),null!==this.background||null!==this.Bm}return r||Nn.v(s),!1},t.Yj=function(t,i,e,n,o,r){if(!1===this.Gg)return!1;void 0===i&&(i=null),void 0===e&&(e=null);var s=r;if(void 0===r&&(s=Nn.ph()).reset(),s.multiply(this.transform),this.Gm(t,s))return pa(this,i,e,o),void 0===r&&Nn.Ze(s),!0;if(this.xg(t,s)){if(!this.Pg)for(var a=this.za.n,h=a.length;h--;){var l,u,f=a[h];!f.visible&&f!==this.cc||(l=f.U,u=this.Ha,l.x>u.width||l.y>u.height||l.x+l.width<0||l.y+l.height<0||(f=(l=f)instanceof sa?f:null,(u=Nn.ph()).set(s),(null!==f?f.Yj(t,i,e,n,o,u):Cs(l,t,n,u))&&(null!==i&&(l=i(l)),null===l||null!==e&&!e(l)||o.add(l)),Nn.Ze(u)))}return void 0===r&&Nn.Ze(s),n}return void 0===r&&Nn.Ze(s),!1},t.Mm=function(t,i,e,n,o,r){if(!1===this.Gg)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var s=this.Ha,a=this.Kg(),h=a?t:rt(Nn.Mb(t.x,t.y),this.transform),l=a?i:rt(Nn.Mb(i.x,i.y),this.transform),u=h.rf(l),f=0<h.x&&h.x<s.width&&0<h.y&&h.y<s.height||v(h.x,h.y,0,0,0,s.height)<u||v(h.x,h.y,0,s.height,s.width,s.height)<u||v(h.x,h.y,s.width,s.height,s.width,0)<u||v(h.x,h.y,s.width,0,0,0)<u,s=0<h.x&&h.x<s.width&&0<h.y&&h.y<s.height&&v(h.x,h.y,0,0,0,s.height)<u&&v(h.x,h.y,0,s.height,s.width,s.height)<u&&v(h.x,h.y,s.width,s.height,s.width,0)<u&&v(h.x,h.y,s.width,0,0,0)<u;if(a||(Nn.v(h),Nn.v(l)),f){if(!this.Pg){for(a=Nn.L(),h=Nn.L(),u=(l=this.za.n).length;u--;){var c,d,p=l[u];!p.visible&&p!==this.cc||(c=p.U,d=this.Ha,c.x>d.width||c.y>d.height||c.x+c.width<0||c.y+c.height<0||(p.Kg()?(c=p.transform,rt(a.set(t),c),rt(h.set(i),c)):(a.set(t),h.set(i)),null!==(p=(c=p)instanceof sa?p:null)?!p.Mm(a,h,e,n,o,r):!c.MD(a,h,o))||(null!==e&&(c=e(c)),null===c||null!==n&&!n(c)||r.add(c)))}Nn.v(a),Nn.v(h)}return o?f:s}return!1},sa.prototype.add=sa.prototype.add=function(t){Nn.A(t,ks,sa,"add:element"),this.Ad(this.za.count,t)},sa.prototype.elt=sa.prototype.da=function(t){return this.za.da(t)},sa.prototype.insertAt=sa.prototype.Ad=function(t,i){i instanceof Lh&&Nn.k("Cannot add a Part to a Panel: "+i),this!==i&&!this.tl(i)||(this===i&&Nn.k("Cannot make a Panel contain itself: "+this.toString()),Nn.k("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+i.toString()));var e=i.S;null!==e&&e!==this&&Nn.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+i.toString()+", already contained by "+e.toString()+", cannot be shared by this Panel: "+this.toString()),this.ia!==na||i instanceof ja||Nn.k("Can only add Shapes to a Grid Panel, not: "+i),i.Al(this),(i.jm=null)!==this.lE&&null!==(o=i.data)&&"object"===(void 0===o?"undefined":_typeof(o))&&(null===this.gg&&(this.gg=new nt(Object,sa)),this.gg.add(o,i));var n=this.za,o=-1;if(e===this){for(var r=-1,s=this.za.n,a=s.length,h=0;h<a;h++)if(s[h]===i){r=h;break}if(-1!==r){if(r===t||r+1>=n.count&&t>=n.count)return;n.Vc(r),o=r}else Nn.k("element "+i.toString()+" has panel "+e.toString()+" but is not contained by it.")}(t<0||t>n.count)&&(t=n.count),n.Ad(t,i),this.P(),i.P(),(null!==i.Sd||i instanceof sa&&!0===i.Ah)&&(this.Ah=!0),null!==(e=this.Y)&&(e.em=null,e.yj=NaN,this.Ah&&e instanceof Lu&&(e.Ah=!0),e.Ah&&(e.Wd=null),null!==(n=this.g)&&n.la.ib||(-1!==o&&e.Lc(Rt,"elements",this,i,null,o,null),e.Lc(Gt,"elements",this,null,i,null,t)))},sa.prototype.remove=sa.prototype.remove=function(t){Nn.A(t,ks,sa,"remove:element");for(var i=this.za.n,e=i.length,n=-1,o=0;o<e;o++)if(i[o]===t){n=o;break}-1!==n&&this.Le(n)},sa.prototype.removeAt=sa.prototype.Vc=function(t){0<=t&&this.Le(t)},sa.prototype.Le=function(t){var i,e=this.za,n=e.da(t);n.jm=null,n.Al(null),null===this.gg||"object"===(void 0===(i=n.data)?"undefined":_typeof(i))&&this.gg.remove(i),e.Vc(t),Hs(this,!1),this.P(),this.um===n&&(this.um=null),null!==(e=this.Y)&&(e.em=null,e.yj=NaN,e.Od(),null!==(i=this.g)&&i.la.ib||e.Lc(Rt,"elements",this,n,null,t,null))},Nn.u(sa,{Dp:"rowCount"},function(){return void 0===this.Ld?0:this.Ld.length}),sa.prototype.getRowDefinition=sa.prototype.zd=function(t){t<0&&Nn.va(t,">= 0",sa,"getRowDefinition:idx"),t=Math.round(t);var i,e=this.Ld;return void 0===e[t]&&((i=new Ca).Al(this),i.ce=!0,e[i.index=t]=i),e[t]},sa.prototype.removeRowDefinition=sa.prototype.GE=function(t){t<0&&Nn.va(t,">= 0",sa,"removeRowDefinition:idx"),t=Math.round(t);var i=this.Ld;this.Lc(Rt,"coldefs",this,i[t],null,t,null),i[t]&&delete i[t],this.P()},Nn.u(sa,{Qo:"columnCount"},function(){return void 0===this.Gd?0:this.Gd.length}),sa.prototype.getColumnDefinition=sa.prototype.yd=function(t){t<0&&Nn.va(t,">= 0",sa,"getColumnDefinition:idx"),t=Math.round(t);var i,e=this.Gd;return void 0===e[t]&&((i=new Ca).Al(this),i.ce=!1,e[i.index=t]=i),e[t]},sa.prototype.removeColumnDefinition=sa.prototype.CE=function(t){t<0&&Nn.va(t,">= 0",sa,"removeColumnDefinition:idx"),t=Math.round(t);var i=this.Gd;this.Lc(Rt,"coldefs",this,i[t],null,t,null),i[t]&&delete i[t],this.P()},Nn.defineProperty(sa,{sI:"rowSizing"},function(){return void 0===this.pm?Pa:this.pm},function(t){var i;void 0===this.pm||(i=this.pm)!==t&&(t!==Pa&&t!==Ma&&Nn.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+t),this.pm=t,this.P(),this.h("rowSizing",i,t))}),Nn.defineProperty(sa,{qG:"columnSizing"},function(){return void 0===this.Ol?Pa:this.Ol},function(t){var i;void 0===this.Ol||(i=this.Ol)!==t&&(t!==Pa&&t!==Ma&&Nn.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+t),this.Ol=t,this.P(),this.h("columnSizing",i,t))}),Nn.defineProperty(sa,{OK:"topIndex"},function(){return void 0===this.Ii?0:this.Ii},function(t){var i;void 0===this.Ii||(i=this.Ii)!==t&&((!isFinite(t)||t<0)&&Nn.k("Panel.topIndex must be greater than zero and a real number, not: "+t),this.Ii=t,this.P(),this.h("topIndex",i,t))}),Nn.defineProperty(sa,{$J:"leftIndex"},function(){return void 0===this.vi?0:this.vi},function(t){var i;void 0===this.vi||(i=this.vi)!==t&&((!isFinite(t)||t<0)&&Nn.k("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.vi=t,this.P(),this.h("leftIndex",i,t))}),sa.prototype.findRowForLocalY=function(t){if(t<0)return-1;if(this.type!==_s)return NaN;for(var i=0,e=this.Ld,n=e.length,o=this.Ii;o<n;o++){var r=e[o];if(void 0!==r&&t<(i+=r.total))return o}return-1},sa.prototype.findColumnForLocalX=function(t){if(t<0)return-1;if(this.type!==_s)return NaN;for(var i=0,e=this.Gd,n=e.length,o=this.vi;o<n;o++){var r=e[o];if(void 0!==r&&t<(i+=r.total))return o}return-1},Nn.defineProperty(sa,{data:"data"},function(){return this.ie},function(t){var i,e,n=this.ie;n!==t&&((i=this instanceof Lh&&!(this instanceof Du))&&Nn.j(t,"object",sa,"data"),ma(this),this.ie=t,null!==(e=this.g)&&(i?this instanceof Ru?(null!==n&&e.wk.remove(n),null!==t&&e.wk.add(t,this)):this instanceof Lh&&(null!==n&&e.ki.remove(n),null!==t&&e.ki.add(t,this)):null!==(i=this.S)&&null!==i.gg&&(null!==n&&i.gg.remove(n),null!==t&&i.gg.add(t,this))),this.h("data",n,t),null!==e&&e.la.ib||null!==t&&this.Hb())}),Nn.defineProperty(sa,{xH:"itemIndex"},function(){return this.cr},function(t){var i=this.cr;i!==t&&(this.cr=t,this.h("itemIndex",i,t))}),sa.prototype.copyTemplate=function(){var t=this.copy();return t.UI(function(i){i instanceof sa&&(i.tk=null,i.ie=null);var t=i.sc;null!==t&&(i.sc=null,t.each(function(t){i.bind(t.copy())}))}),t},sa.prototype.updateTargetBindings=sa.prototype.Hb=function(t){var i=this.tk;if(null!==i)for(void 0===t&&(t=""),i=i.i;i.next();){var e=i.value,n=e.aF;if((""===t||""===n||n===t)&&(n=e.sx,null!==e.uG||""!==n)){var n=this.data,o=e.en;if(null!==o?n=""===o||"."===o||".."===o?this:this.be(o):null!==(r=this.g)&&e.yt&&(n=r.ba.bk),null!==n){var r=this,s=e.Dl;if(-1!==s){if(null===(r=this.zw(s)))continue}else null!==e.pg&&(r=e.pg);if("."===o?n=r:".."===o&&(n=r.S),0!==(o=e.zs)){if(!(r instanceof sa))continue;s=r,1===o?r=s.yd(e.Do):2===o&&(r=s.zd(e.Do))}void 0!==r&&e.rF(r,n)}}}},Nn.defineProperty(sa,{lE:"itemArray"},function(){return this.tj},function(t){var i,e=this.tj;e!==t&&(null!==(i=this.g)&&null!==e&&xr(i,this),this.tj=t,null!==i&&null!==t&&br(i,this),this.h("itemArray",e,t),null!==i&&i.la.ib||this.dA())}),sa.prototype.rebuildItemElements=sa.prototype.dA=function(){var t=0;for(ba(this)&&(t=1);this.za.length>t;)this.Le(this.za.length-1);if(null!==(t=this.lE))for(var i=Nn.Va(t),e=0;e<i;e++)xa(this,Nn.Pa(t,e),e)},sa.prototype.findItemPanelForData=sa.prototype.NG=function(t){return null==t||null===this.gg?null:(Nn.j(t,"object",sa,"findItemPanelForData"),this.gg.ja(t))},Nn.defineProperty(sa,{YJ:"itemTemplate"},function(){return null===this.hg?null:this.hg.ja("")},function(t){if(null===this.hg){if(null===t)return;this.hg=new nt("string",sa)}var i=this.hg.ja("");i!==t&&(Nn.A(t,sa,sa,"itemTemplate"),(t instanceof Lh||t.Rf)&&Nn.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.hg.add("",t),this.h("itemTemplate",i,t),null!==(t=this.g)&&t.la.ib||this.dA())}),Nn.defineProperty(sa,{yH:"itemTemplateMap"},function(){return this.hg},function(t){var i=this.hg;if(i!==t){Nn.A(t,nt,sa,"itemTemplateMap");for(var e=t.i;e.next();){var n=e.value;(n instanceof Lh||n.Rf)&&Nn.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: "+n)}this.hg=t,this.h("itemTemplateMap",i,t),null!==(t=this.g)&&t.la.ib||this.dA()}}),Nn.defineProperty(sa,{XJ:"itemCategoryProperty"},function(){return this.Zn},function(t){var i=this.Zn;i!==t&&("string"!=typeof t&&"function"!=typeof t&&Nn.Ed(t,"string or function",sa,"itemCategoryProperty"),this.Zn=t,this.h("itemCategoryProperty",i,t))});var ka,Ma,Pa,Ta=!1,Sa=null;function Ca(){Nn.ec(this),this.Wg=null,this.hv=!0,this.Oc=0,this.Te=NaN,this.Cj=0,this.Aj=1/0,this.Ae=d,this.kb=this.bb=0,this.sc=null,this.rs=ka,this.Ph=ps,this.ls=this.Hj=null,this.ms=NaN,this.Ib=this.Hh=null,this.mq=!1}function Na(t){if(t.au!==ka)return t.au;var i=t.Wg;return t.ce?i.sI:i.qG}function ja(){ks.call(this),this.Ra=null,this.Mn="None",this.Jh=!1,this.Iq=ps,this.un=null,this.Dc=this.pd="black",this.Qh=1,this.zo="butt",this.Bo="miter",this.tm=10,this.Ao=null,this.ke=0,this.Oh=this.Nh=d,this.Jr=this.Ir=NaN,this.Qq=!1,this.Lr=null,this.Pn=this.Fo="None",this.Nq=1}function Da(t,i,e,n){if(!((v=e.length)<4)){for(var o=n.Ca,r=Math.max(1,o.width),o=o.height,s=e[0],a=e[1],h=0,l=0,u=0,f=0,c=0,d=0,p=f=0,y=Nn.jb(),g=2;g<v;g+=2)0===(u=(h=e[g])-s)&&(u=.001),c=(f=(l=e[g+1])-a)/u,d=Math.atan2(f,u),f=Math.sqrt(u*u+f*f),y.push([u,d,c,f]),p+=f,s=h,a=l;s=e[0],a=e[1],u=n.Ca.width,n instanceof ja&&(u-=n.lb),u<1&&(u=1);for(var v=0,h=e=u,g=0!==(l=r/2),m=0,u=(f=y[m])[0],d=f[1],c=f[2],f=f[3],b=0;.1<=p;){if(0===b&&(g?(h=e,v++,h-=l,p-=l,g=!1):(h=e,v++),0===h&&(h=1)),p<h)return void Nn.sa(y);f<h?(b=h-f,h=f):b=0;var x=Math.sqrt(h*h/(1+c*c));if(u<0&&(x=-x),s+=x,a+=c*x,t.translate(s,a),t.rotate(d),t.translate(-r/2,-o/2),0===b&&n.Xj(t,i),t.translate(r/2,o/2),t.rotate(-d),t.translate(-s,-a),p-=h,f-=h,0!==b){if(++m===y.length)return void Nn.sa(y);u=(f=y[m])[0],d=f[1],c=f[2],f=f[3],h=b}}Nn.sa(y)}}function La(t,i,e,n){if(!((y=i.length)<4)){var o=.001,r=e.length,s=i[0],a=i[1];if(4===y)Ps(t,s,a,i[2],i[3],e,n);else{t.moveTo(s,a);for(var h=o=0,l=0,u=0,f=0,c=u=0,d=Nn.jb(),p=2;p<y;p+=2)0===(l=(o=i[p])-s)&&(l=.001),f=(u=(h=i[p+1])-a)/l,u=Math.sqrt(l*l+u*u),d.push([l,f,u]),c+=u,s=o,a=h;s=i[0],a=i[1];for(var y=!(i=0),o=e[i%r],h=0!==n,l=(u=d[p=0])[0],f=u[1],u=u[2],g=0;.1<=c;){0===g&&(o=e[i%r],i++,h&&(o-=n%=o,h=!1)),c<o&&(o=c),u<o?(g=o-u,o=u):g=0;var v=Math.sqrt(o*o/(1+f*f));if(l<0&&(v=-v),s+=v,a+=f*v,y?t.lineTo(s,a):t.moveTo(s,a),c-=o,u-=o,0!==g){if(++p===d.length)return void Nn.sa(d);l=(u=d[p])[0],f=u[1],u=u[2],o=g}else y=!y}Nn.sa(d)}}}function Aa(t,i,e,n){var o;!1!==Vs(t)&&(t.kd.Oa(),0===(o=t.Qh)&&n instanceof Du&&n.type===ea&&n.Zb instanceof ja&&(o=n.Zb.lb),o*=t.Tb,n instanceof Ru&&null!==n.Ra?Ss(t,(i=n.Ra.mb).x-o/2,i.y-o/2,i.width+o,i.height+o):Ss(t,-o/2,-o/2,i+o,e+o),t.kd.freeze(),t.kd.G()||Nn.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.kd.toString()),Hs(t,!1))}function Fa(t){var i=t.wz;return t.Jh?i===ps?vs:i:i===ps?ai[t.Ab].Md:i}function za(t,i,e,n,o){return(i=(t=e.x-t)*t+(i=e.y-i)*i)<n?(o.x=e.x,o.y=e.y,i):n}function Ba(t,i,e,n,o,r,s,a,h){var l=!1,u=(o-s)*(i-n)-(r-a)*(t-e);return 0!=u&&(h.x=((o*a-r*s)*(t-e)-(o-s)*(t*n-i*e))/u,h.y=((o*a-r*s)*(i-n)-(r-a)*(t*n-i*e))/u,(e<t?t-e:e-t)<(n<i?i-n:n-i)?(o=i<n?i:n,t=i<n?n:i,(h.y>o||ci(h.y,o))&&(h.y<t||ci(h.y,t))&&(l=!0)):(o=t<e?t:e,t=t<e?e:t,(h.x>o||ci(h.x,o))&&(h.x<t||ci(h.x,t))&&(l=!0)),l)}function Oa(t,i,e,n){if(t.SD(i,e,n)){t=i.x,i=i.y;var o=e.x;e=e.y;var r=n.x;if(n=n.y,t!==o)return t<o?(s=t,t=o):s=o,s<=r&&r<=t;var s=0;return t=0,t=i<e?(s=i,e):(s=e,i),s<=n&&n<=t}}function Ea(t){var i=t.g;null!==i&&i.la.ib||(t.Vt=il,"None"!==t.Fo?(t.ve=-1,t.Tj=N):"None"!==t.Pn&&(t.ve=0,t.Tj=new ct(1-N.x,N.y)))}function qa(){ks.call(this),this.le="",this.Dc="black",this.yh="13px sans-serif",this.vm="start",this.Sq=!0,this.Ul=this.Vl=!1,this.Rk=Va,this.xm=Ra,this.pv=this.De=0,this.On=this.xy=this.yy=null,this.Jk=new nh,this.Cq=!1,this.mf=this.Tk=this.As=null,this.Kj=this.Jj=0,this.xi=1/0,this.kv=0}Nn.defineProperty(sa,{SJ:"isAtomic"},function(){return this.Pg},function(t){var i=this.Pg;i!==t&&(Nn.j(t,"boolean",sa,"isAtomic"),this.Pg=t,this.h("isAtomic",i,t))}),Nn.defineProperty(sa,{cE:"isClipping"},function(){return this.Pq},function(t){var i=this.Pq;i!==t&&(Nn.j(t,"boolean",sa,"isClipping"),this.Pq=t,this.h("isClipping",i,t))}),Nn.ea("RowColumnDefinition",Ca),Ca.prototype.copy=function(){var t=new Ca;return t.hv=this.hv,t.Oc=this.Oc,t.Te=this.Te,t.Cj=this.Cj,t.Aj=this.Aj,t.Ae=this.Ae,t.bb=this.bb,t.kb=this.kb,t.Ph=this.Ph,t.rs=this.rs,t.Hj=null===this.Hj?null:this.Hj.R(),t.ls=this.ls,t.ms=this.ms,(t.Hh=null)!==this.Hh&&(t.Hh=Nn.dl(this.Hh)),t.Ib=this.Ib,t.mq=this.mq,t.sc=this.sc,t},Ca.prototype.Zs=function(t){Nn.A(t,Ca,Ca,"copyFrom:pd"),t.ce?this.height=t.height:this.width=t.width,this.Zi=t.Zi,this.ff=t.ff,this.alignment=t.alignment,this.stretch=t.stretch,this.au=t.au,this.Hj=null===t.Hj?null:t.Hj.R(),this.Ep=t.Ep,this.Fp=t.Fp,this.Hh=null,t.Hh&&(this.Hh=Nn.dl(t.Hh)),this.background=t.background,this.kz=t.kz,this.sc=t.sc},Ca.prototype.toString=function(){return"RowColumnDefinition "+(this.ce?"(Row ":"(Column ")+this.index+") #"+Nn.ld(this)},Ca.Default=ka=Nn.p(Ca,"Default",0),Ca.None=Ma=Nn.p(Ca,"None",1),Ca.ProportionalExtra=Pa=Nn.p(Ca,"ProportionalExtra",2),Ca.prototype.Al=function(t){this.Wg=t},Ca.prototype.computeEffectiveSpacingTop=Ca.prototype.sD=function(){var t,i,e=0;if(0!==this.index&&(t=this.Wg,null===(i=this.Ep)&&null!==t&&(i=this.ce?t.li:t.vh),null!==i&&(e=this.Fp,isNaN(e)&&(e=null!==t?this.ce?t.xh:t.wh:0))),null===(t=this.UE)){if(null===(t=this.Wg))return e;t=t.ij}return e+(this.ce?t.top:t.left)},Ca.prototype.computeEffectiveSpacing=Ca.prototype.of=function(){var t,i,e=0;if(0!==this.index&&(t=this.Wg,null===(i=this.Ep)&&null!==t&&(i=this.ce?t.li:t.vh),null!==i&&(e=this.Fp,isNaN(e)&&(e=null!==t?this.ce?t.xh:t.wh:0))),null===(t=this.UE)){if(null===(t=this.Wg))return e;t=t.ij}return e+(this.ce?t.top+t.bottom:t.left+t.right)},Ca.prototype.$c=function(t,i,e,n,o){var r=this.Wg;if(null!==r&&(r.Lc(It,t,this,i,e,n,o),null!==this.sc&&(null!==(i=r.g)&&!i.we&&(null!==(r=r.Xo())&&null!==(r=r.data)))))for(e=this.sc.i;e.next();)e.value.tx(this,r,t,i)},Nn.u(Ca,{S:"panel"},function(){return this.Wg}),Nn.defineProperty(Ca,{ce:"isRow"},function(){return this.hv},function(t){this.hv=t}),Nn.defineProperty(Ca,{index:"index"},function(){return this.Oc},function(t){this.Oc=t}),Nn.defineProperty(Ca,{height:"height"},function(){return this.Te},function(t){var i=this.Te;i!==t&&(t<0&&Nn.va(t,">= 0",Ca,"height"),this.Te=t,this.Ia=this.bb,null!==this.S&&this.S.P(),this.$c("height",i,t))}),Nn.defineProperty(Ca,{width:"width"},function(){return this.Te},function(t){var i=this.Te;i!==t&&(t<0&&Nn.va(t,">= 0",Ca,"width"),this.Te=t,this.Ia=this.bb,null!==this.S&&this.S.P(),this.$c("width",i,t))}),Nn.defineProperty(Ca,{Zi:"minimum"},function(){return this.Cj},function(t){var i=this.Cj;i!==t&&((t<0||!isFinite(t))&&Nn.va(t,">= 0",Ca,"minimum"),this.Cj=t,this.Ia=this.bb,null!==this.S&&this.S.P(),this.$c("minimum",i,t))}),Nn.defineProperty(Ca,{ff:"maximum"},function(){return this.Aj},function(t){var i=this.Aj;i!==t&&(t<0&&Nn.va(t,">= 0",Ca,"maximum"),this.Aj=t,this.Ia=this.bb,null!==this.S&&this.S.P(),this.$c("maximum",i,t))}),Nn.defineProperty(Ca,{alignment:"alignment"},function(){return this.Ae},function(t){var i=this.Ae;i.K(t)||(this.Ae=t.R(),null!==this.S&&this.S.P(),this.$c("alignment",i,t))}),Nn.defineProperty(Ca,{stretch:"stretch"},function(){return this.Ph},function(t){var i=this.Ph;i!==t&&(this.Ph=t,null!==this.S&&this.S.P(),this.$c("stretch",i,t))}),Nn.defineProperty(Ca,{UE:"separatorPadding"},function(){return this.Hj},function(t){"number"==typeof t&&(t=new ut(t));var i=this.Hj;null!==t&&null!==i&&i.K(t)||(null!==t&&(t=t.R()),this.Hj=t,null!==this.S&&this.S.P(),this.$c("separatorPadding",i,t))}),Nn.defineProperty(Ca,{Ep:"separatorStroke"},function(){return this.ls},function(t){var i=this.ls;i!==t&&(null===t||"string"==typeof t||t instanceof fs)&&(t instanceof fs&&t.freeze(),this.ls=t,null!==this.S&&this.S.P(),this.$c("separatorStroke",i,t))}),Nn.defineProperty(Ca,{Fp:"separatorStrokeWidth"},function(){return this.ms},function(t){var i=this.ms;i!==t&&(this.ms=t,null!==this.S&&this.S.P(),this.$c("separatorStrokeWidth",i,t))}),Nn.defineProperty(Ca,{xI:"separatorDashArray"},function(){return this.Hh},function(t){var i=this.Hh;if(i!==t){if(null===t||Array.isArray(t)||Nn.Ed(t,"Array",Ca,"separatorDashArray:value"),null!==t){for(var e=t.length,n=0,o=0;o<e;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||Nn.k("separatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),n+=r}if(0===n){if(null===i)return;t=null}}this.Hh=t,null!==this.S&&this.S.pa(),this.$c("separatorDashArray",i,t)}}),Nn.defineProperty(Ca,{background:"background"},function(){return this.Ib},function(t){var i=this.Ib;i!==t&&(null===t||"string"==typeof t||t instanceof fs)&&(t instanceof fs&&t.freeze(),this.Ib=t,null!==this.S&&this.S.pa(),this.$c("background",i,t))}),Nn.defineProperty(Ca,{kz:"coversSeparators"},function(){return this.mq},function(t){var i=this.mq;i!==t&&(Nn.j(t,"boolean",Ca,"coversSeparators"),this.mq=t,null!==this.S&&this.S.pa(),this.$c("coversSeparators",i,t))}),Nn.defineProperty(Ca,{au:"sizing"},function(){return this.rs},function(t){var i=this.rs;i!==t&&(this.rs=t,null!==this.S&&this.S.P(),this.$c("sizing",i,t))}),Nn.defineProperty(Ca,{Ia:"actual"},function(){return this.bb},function(t){this.bb=isNaN(this.Te)?Math.max(Math.min(this.Aj,t),this.Cj):Math.max(Math.min(this.Aj,this.Te),this.Cj)}),Nn.defineProperty(Ca,{total:"total"},function(){return this.bb+this.of()},function(t){this.bb=isNaN(this.Te)?Math.max(Math.min(this.Aj,t),this.Cj):Math.max(Math.min(this.Aj,this.Te),this.Cj),this.bb=Math.max(0,this.bb-this.of())}),Nn.defineProperty(Ca,{position:"position"},function(){return this.kb},function(t){this.kb=t}),Ca.prototype.bind=Ca.prototype.bind=function(t){var i,e=(t.pg=this).S;null===e||null!==(i=e.Xo())&&va(i)&&Nn.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+e),null===this.sc&&(this.sc=new Dn(be)),this.sc.add(t)},Nn.Ja(ja,ks),Nn.ea("Shape",ja),ja.prototype.cloneProtected=function(t){ks.prototype.cloneProtected.call(this,t),t.Ra=this.Ra,t.Mn=this.Mn,t.Jh=this.Jh,t.Iq=this.Iq,t.un=this.un,t.pd=this.pd,t.Dc=this.Dc,t.Qh=this.Qh,t.zo=this.zo,t.Bo=this.Bo,t.tm=this.tm,null!==this.Ao&&(t.Ao=Nn.dl(this.Ao)),t.ke=this.ke,t.Nh=this.Nh.R(),t.Oh=this.Oh.R(),t.Ir=this.Ir,t.Jr=this.Jr,t.Qq=this.Qq,t.Lr=this.Lr,t.Fo=this.Fo,t.Pn=this.Pn,t.Nq=this.Nq},ja.prototype.toString=function(){return"Shape("+("None"!==this.Ab?this.Ab:"None"!==this.Lp?this.Lp:this.uz)+")#"+Nn.ld(this)},ja.prototype.Xj=function(t,i){if(null!==this.Dc||null!==this.pd){null!==this.pd&&Ls(this,t,this.pd,!0,!1),null!==this.Dc&&Ls(this,t,this.Dc,!1,!1);var e=this.Qh;0===e&&(r=this.Y)instanceof Du&&r.type===ea&&"Selection"===r.gc&&r.Zb instanceof ja&&r.Mf.Xe()===r.Zb&&(e=r.Zb.lb),t.lineWidth=e,t.lineJoin=this.Bo,t.lineCap=this.zo,t.miterLimit=this.tm;var n=!1;this.Y&&i.Si("drawShadows")&&(n=this.Y.vl);var o=!0;null!==this.Dc&&null===this.pd&&(o=!1);var r=!1,s=!0,a=this.cF;if(null!==a&&(r=!0,s=t.pz(a,this.ke)),null!==(c=this.Ra)){if(c.ia===St)t.beginPath(),r&&!s?Ps(t,c.vc,c.Cc,c.vb,c.Bb,a,this.ke):(t.moveTo(c.vc,c.Cc),t.lineTo(c.vb,c.Bb)),null!==this.pd&&t.ug(this.pd),0!==e&&null!==this.Dc&&t.bj();else if(c.ia===Ct){var h=c.vc,l=c.Cc,u=c.vb,f=c.Bb,c=Math.min(h,u),d=Math.min(l,f),h=Math.abs(u-h),l=Math.abs(f-l);null!==this.pd&&(t.beginPath(),t.rect(c,d,h,l),t.ug(this.pd)),null!==this.Dc&&(g=p=u=0,o&&n&&(u=t.shadowOffsetX,p=t.shadowOffsetY,g=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),r&&!s?((s=Nn.jb()).push(c),s.push(d),s.push(c+h),s.push(d),s.push(c+h),s.push(d+l),s.push(c),s.push(d+l),s.push(c),s.push(d),t.beginPath(),La(t,s,a,this.ke),t.bj(),Nn.sa(s)):0!==e&&(t.beginPath(),t.rect(c,d,h,l),t.bj()),o&&n&&(t.shadowOffsetX=u,t.shadowOffsetY=p,t.shadowBlur=g))}else if(c.ia===Nt)h=c.vc,l=c.Cc,u=c.vb,f=c.Bb,c=Math.abs(u-h)/2,d=Math.abs(f-l)/2,h=Math.min(h,u)+c,l=Math.min(l,f)+d,t.beginPath(),t.moveTo(h,l-d),t.bezierCurveTo(h+Vt*c,l-d,h+c,l-Vt*d,h+c,l),t.bezierCurveTo(h+c,l+Vt*d,h+Vt*c,l+d,h,l+d),t.bezierCurveTo(h-Vt*c,l+d,h-c,l+Vt*d,h-c,l),t.bezierCurveTo(h-c,l-Vt*d,h-Vt*c,l-d,h,l-d),t.closePath(),null!==this.pd&&t.ug(this.pd),r&&!s&&(s=Nn.jb(),gi(h,l-d,h+Vt*c,l-d,h+c,l-Vt*d,h+c,l,.5,s),gi(h+c,l,h+c,l+Vt*d,h+Vt*c,l+d,h,l+d,.5,s),gi(h,l+d,h-Vt*c,l+d,h-c,l+Vt*d,h-c,l,.5,s),gi(h-c,l,h-c,l-Vt*d,h-Vt*c,l-d,h,l-d,.5,s),t.beginPath(),La(t,s,a,this.ke),Nn.sa(s)),0!==e&&null!==this.Dc&&(o&&n?(u=t.shadowOffsetX,p=t.shadowOffsetY,g=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.bj(),t.shadowOffsetX=u,t.shadowOffsetY=p,t.shadowBlur=g):t.bj());else if(c.ia===jt){for(l=(d=c.kj).length,f=0;f<l;f++){h=d.n[f],t.beginPath(),t.moveTo(h.Aa,h.ya);for(var p=(u=h.sb.n).length,y=null,g=0;g<p;g++){var v=u[g];switch(v.ia){case At:t.moveTo(v.I,v.J);break;case Ft:t.lineTo(v.I,v.J);break;case zt:t.bezierCurveTo(v.sd,v.Fe,v.Xg,v.ng,v.vb,v.Bb);break;case Bt:t.quadraticCurveTo(v.sd,v.Fe,v.vb,v.Bb);break;case Ot:if(v.radiusX===v.radiusY)y=Math.PI/180,t.arc(v.sd,v.Fe,v.radiusX,v.xe*y,(v.xe+v.Af)*y,v.Af<0);else{var m=(y=Gi(v,h)).length;if(0===m){t.lineTo(v.na,v.ua);break}for(var b=0;b<m;b++){var x=y[b];0===b&&t.lineTo(x[0],x[1]),t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7])}}break;case Et:if(b=m=0,null!==y&&y.type===Ot){if(0===(x=(y=Gi(y,h)).length)){t.lineTo(v.na,v.ua);break}null!==(y=y[x-1]||null)&&(m=y[6],b=y[7])}else m=null!==y?y.I:h.Aa,b=null!==y?y.J:h.ya;if(0===(m=(y=Ri(v,h,m,b)).length)){t.lineTo(v.na,v.ua);break}for(b=0;b<m;b++)x=y[b],t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]);break;default:Nn.k("Segment not of valid type: "+v.ia)}v.Ch&&t.closePath(),y=v}n?(g=p=u=0,h.Wn?(o=!0===h.Sl&&null!==this.pd&&(t.ug(this.pd),!0),0!==e&&null!==this.Dc&&(o&&(u=t.shadowOffsetX,p=t.shadowOffsetY,g=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),r&&!s||t.bj(),o&&(t.shadowOffsetX=u,t.shadowOffsetY=p,t.shadowBlur=g))):(o&&(u=t.shadowOffsetX,p=t.shadowOffsetY,g=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),!0===h.Sl&&null!==this.pd&&t.ug(this.pd),0!==e&&null!==this.Dc&&(r&&!s||t.bj()),o&&(t.shadowOffsetX=u,t.shadowOffsetY=p,t.shadowBlur=g))):(!0===h.Sl&&null!==this.pd&&t.ug(this.pd),0===e||null===this.Dc||r&&!s||t.bj())}if(r&&!s)for(e=o,s=(o=c.kj).length,c=0;c<s;c++){for(d=o.n[c],t.beginPath(),(l=Nn.jb()).push(d.Aa),l.push(d.ya),u=f=d.Aa,p=h=d.ya,v=(g=d.sb.n).length,y=0;y<v;y++){switch((m=g[y]).ia){case At:La(t,l,a,this.ke),l.length=0,l.push(m.I),l.push(m.J),u=f=m.I,p=h=m.J;break;case Ft:l.push(m.I),l.push(m.J),f=m.I,h=m.J;break;case zt:gi(f,h,m.sd,m.Fe,m.Xg,m.ng,m.vb,m.Bb,.5,l),f=m.I,h=m.J;break;case Bt:mi(f,h,m.sd,m.Fe,m.vb,m.Bb,.5,l),f=m.I,h=m.J;break;case Ot:if(0===(x=(b=Gi(m,d)).length)){l.push(m.na),l.push(m.ua),f=m.na,h=m.ua;break}for(var w=0;w<x;w++){var k=b[w];gi(f,h,k[2],k[3],k[4],k[5],k[6],k[7],.5,l),f=k[6],h=k[7]}break;case Et:if(0===(x=(b=Ri(m,d,f,h)).length)){l.push(m.na),l.push(m.ua),f=m.na,h=m.ua;break}for(w=0;w<x;w++)gi(f,h,(k=b[w])[2],k[3],k[4],k[5],k[6],k[7],.5,l),f=k[6],h=k[7];break;default:Nn.k("Segment not of valid type: "+m.ia)}m.Ch&&(l.push(u),l.push(p),La(t,l,a,this.ke))}La(t,l,a,this.ke),Nn.sa(l),null!==this.Dc&&(f=l=d=0,e&&n&&(d=t.shadowOffsetX,l=t.shadowOffsetY,f=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),t.bj(),e&&n&&(t.shadowOffsetX=d,t.shadowOffsetY=l,t.shadowBlur=f))}}if(r&&t.nz(),null!==this.Vw){if(Ns(r=this.Vw,1/0,1/0),a=r.Ca,r.Ec(0,0,a.width,a.height),e=this.ml,t.save(),t.beginPath(),a=Nn.jb(),e.type===St)a.push(e.Aa),a.push(e.ya),a.push(e.I),a.push(e.J),Da(t,i,a,r);else if(e.type===jt)for(s=e.Ub.i;s.next();){for(c=s.value,a.length=0,a.push(c.Aa),a.push(c.ya),l=o=c.Aa,f=d=c.ya,u=(h=c.sb.n).length,p=0;p<u;p++){switch((g=h[p]).ia){case At:Da(t,i,a,r),a.length=0,a.push(g.I),a.push(g.J),l=o=g.I,f=d=g.J;break;case Ft:a.push(g.I),a.push(g.J),o=g.I,d=g.J;break;case zt:gi(o,d,g.sd,g.Fe,g.Xg,g.ng,g.vb,g.Bb,.5,a),o=g.I,d=g.J;break;case Bt:mi(o,d,g.sd,g.Fe,g.vb,g.Bb,.5,a),o=g.I,d=g.J;break;case Ot:if(0===(n=(e=Gi(g,c)).length)){a.push(g.na),a.push(g.ua),o=g.na,d=g.ua;break}for(v=0;v<n;v++)gi(o,d,(y=e[v])[2],y[3],y[4],y[5],y[6],y[7],.5,a),o=y[6],d=y[7];break;case Et:if(0===(n=(e=Ri(g,c,o,d)).length)){a.push(g.na),a.push(g.ua),o=g.na,d=g.ua;break}for(v=0;v<n;v++)gi(o,d,(y=e[v])[2],y[3],y[4],y[5],y[6],y[7],.5,a),o=y[6],d=y[7];break;default:Nn.k("Segment not of valid type: "+g.ia)}g.Ch&&(a.push(l),a.push(f),Da(t,i,a,r))}Da(t,i,a,r)}else if(e.type===Ct)a.push(e.Aa),a.push(e.ya),a.push(e.I),a.push(e.ya),a.push(e.I),a.push(e.J),a.push(e.Aa),a.push(e.J),a.push(e.Aa),a.push(e.ya),Da(t,i,a,r);else if(e.type===Nt){if((s=new qi).Aa=e.I,s.ya=(e.ya+e.J)/2,(o=new Ii(Ot)).xe=0,o.Af=360,o.na=(e.Aa+e.I)/2,o.ua=(e.ya+e.J)/2,o.radiusX=Math.abs(e.Aa-e.I)/2,o.radiusY=Math.abs(e.ya-e.J)/2,s.add(o),0===(n=(e=Gi(o,s)).length))a.push(o.na),a.push(o.ua);else for(o=s.Aa,d=s.ya,v=0;v<n;v++)gi(o,d,(y=e[v])[2],y[3],y[4],y[5],y[6],y[7],.5,a),o=y[6],d=y[7];Da(t,i,a,r)}Nn.sa(a),t.restore(),Tt(t,!1)}}}},ja.prototype.getDocumentPoint=ja.prototype.Xa=function(t,i){void 0===i&&(i=new Se),t.se()&&Nn.k("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var e=this.Ha,n=this.lb;return i.m(t.x*(e.width+n)-n/2+e.x+t.offsetX,t.y*(e.height+n)-n/2+e.y+t.offsetY),this.Yg.ub(i),i},ja.prototype.Vj=function(t,i){if(null===(l=this.Ra)||null===this.fill&&null===this.stroke)return!1;var e=l.mb,n=this.lb/2;l.type!==St||i||(n+=2);var o=Nn.ag();if(o.assign(e),o.Qf(n+2,n+2),!o.Fa(t))return Nn.Vb(o),!1;if(e=n+1e-4,l.type===St)return null!==this.stroke&&(e=(l.I-l.Aa)*(t.x-l.Aa)+(l.J-l.ya)*(t.y-l.ya),!((l.Aa-l.I)*(t.x-l.I)+(l.ya-l.J)*(t.y-l.J)<0||e<0)&&(Nn.Vb(o),di(l.Aa,l.ya,l.I,l.J,n,t.x,t.y)));if(l.type===Ct){var r=l.Aa,s=l.ya,a=l.I,h=l.J;if(o.x=Math.min(r,a),o.y=Math.min(s,h),o.width=Math.abs(a-r),o.height=Math.abs(h-s),null===this.fill){if(o.Qf(-e,-e),o.Fa(t))return Nn.Vb(o),!1;o.Qf(e,e)}return null!==this.stroke&&o.Qf(n,n),n=o.Fa(t),Nn.Vb(o),n}if(l.type!==Nt)return l.type===jt?(Nn.Vb(o),null===this.fill?Ei(l,t.x,t.y,n):l.Fa(t,n,1<this.lb,i)):(Nn.k("Unknown Geometry type: "+l.type),!1);var r=l.Aa,s=l.ya,a=l.I,h=l.J,l=Math.min(r,a),u=Math.min(s,h),r=Math.abs(a-r)/2,s=Math.abs(h-s)/2,l=t.x-(l+r),u=t.y-(u+s);if(null===this.fill){if(s-=e,(r-=e)<=0||s<=0||l*l/(r*r)+u*u/(s*s)<=1)return Nn.Vb(o),!1;r+=e,s+=e}return null!==this.stroke&&(r+=n,s+=n),Nn.Vb(o),!(r<=0||s<=0)&&l*l/(r*r)+u*u/(s*s)<=1},ja.prototype.np=function(t,i,e,n){var o,r=this.xa,s=this.Qh;t=Math.max(t,0),i=Math.max(i,0);var a=(o=this.Jh?this.ml.mb:(a=this.Ab,void 0===(h=ai[a])&&("string"==typeof(l=Ph[a])&&(l=Ph[l]),"function"==typeof l?(h=l(null,100,100),ai[a]=h):Nn.k("Unsupported Figure: "+a)),h.mb)).width,h=o.height,l=o.width,u=o.height;switch(Bs(this,!0)){case ds:n=e=0;break;case vs:l=Math.max(t-s,0),u=Math.max(i-s,0);break;case gs:l=Math.max(t-s,0),n=0;break;case ys:e=0,u=Math.max(i-s,0)}switch(isFinite(r.width)&&(l=r.width),isFinite(r.height)&&(u=r.height),r=this.xf,o=this.ih,e=Math.max(e,o.width)-s,n=Math.max(n,o.height)-s,l=Math.min(r.width,l),u=Math.min(r.height,u),l=isFinite(l)?Math.max(e,l):Math.max(a,e),u=isFinite(u)?Math.max(n,u):Math.max(h,n),e=Fa(this)){case ds:break;case vs:a=l,h=u;break;case ms:e=Math.min(l/a,u/h),isFinite(e)||(e=1),a*=e,h*=e;break;default:Nn.k(e+" is not a valid geometryStretch.")}this.Jh?(r=a=Math.max(a,.01),n=h=Math.max(h,.01),e=(o=this.ml).copy(),r/=(o=o.mb).width,n/=o.height,isFinite(r)||(r=1),isFinite(n)||(n=1),1===r&&1===n||e.scale(r,n),this.Ra=e):null!==this.Ra&&this.Ra.Vn===t-s&&this.Ra.Tn===i-s||(this.Ra=ja.makeGeometry(this,a,h)),o=this.Ra.mb,1/0===t||1/0===i?Ss(this,o.x-s/2,o.y-s/2,0===t&&0===a?0:o.width+s,0===i&&0===h?0:o.height+s):Ss(this,-s/2,-s/2,l+s,u+s)},ja.prototype.Li=function(t,i,e,n){js(this,t,i,e,n)},ja.prototype.getNearestIntersectionPoint=ja.prototype.SD=function(t,i,e){return this.bp(t.x,t.y,i.x,i.y,e)},ja.prototype.bp=function(t,i,e,n,o){var r=1/((c=this.transform).m11*c.m22-c.m12*c.m21),s=c.m22*r,a=-c.m12*r,h=-c.m21*r,l=c.m11*r,u=r*(c.m21*c.dy-c.m22*c.dx),f=r*(c.m12*c.dx-c.m11*c.dy),c=t*s+i*h+u,r=t*a+i*l+f,s=e*s+n*h+u,a=e*a+n*l+f,h=this.lb/2;if(null===(u=this.Ra)&&(Ns(this,1/0,1/0),u=this.Ra),f=u.mb,l=!1,u.type===St)if(this.lb<=1.5)l=ki(u.vc,u.Cc,u.vb,u.Bb,c,r,s,a,o);else{var d=0,p=0;if(u.vc===u.vb?(d=h,p=0):(i=(u.Bb-u.Cc)/(u.vb-u.vc),d=(p=h/Math.sqrt(1+i*i))*i),n=Nn.jb(),i=new Se,ki(u.vc+d,u.Cc+p,u.vb+d,u.Bb+p,c,r,s,a,i)&&n.push(i),i=new Se,ki(u.vc-d,u.Cc-p,u.vb-d,u.Bb-p,c,r,s,a,i)&&n.push(i),i=new Se,ki(u.vc+d,u.Cc+p,u.vc-d,u.Cc-p,c,r,s,a,i)&&n.push(i),i=new Se,ki(u.vb+d,u.Bb+p,u.vb-d,u.Bb-p,c,r,s,a,i)&&n.push(i),0===(i=n.length))return Nn.sa(n),!1;for(l=!0,p=1/0,d=0;d<i;d++){(S=((s=n[d]).x-c)*(s.x-c)+(s.y-r)*(s.y-r))<p&&(p=S,o.x=s.x,o.y=s.y)}Nn.sa(n)}else if(u.type===Ct)l=Mi(i=f.x-h,f.y-h,f.x+f.width+h,f.y+f.height+h,c,r,s,a,o);else if(u.type===Nt)t:if(i=f.copy().Qf(h,h),0===i.width)l=ki(i.x,i.y,i.x,i.y+i.height,c,r,s,a,o);else if(0===i.height)l=ki(i.x,i.y,i.x+i.width,i.y,c,r,s,a,o);else{t=i.width/2;var y=i.height/2;if(n=i.x+t,i=i.y+y,e=9999,c!==s&&(e=(r-a)/(c-s)),Math.abs(e)<9999){if(t*t*e*e+y*y-(l=r-i-e*(c-n))*l<0){o.x=NaN,o.y=NaN,l=!1;break t}a=e*((s=(-t*t*e*l+t*y*(h=Math.sqrt(t*t*e*e+y*y-l*l)))/(y*y+t*t*e*e)+n)-n)+l+i,i=e*((t=(-t*t*e*l-t*y*h)/(y*y+t*t*e*e)+n)-n)+l+i,(n=Math.abs((c-s)*(c-s))+Math.abs((r-a)*(r-a)))<(r=Math.abs((c-t)*(c-t))+Math.abs((r-i)*(r-i)))?(o.x=s,o.y=a):(o.x=t,o.y=i)}else{if(s=y*y,(s-=s/(t*t)*(a=c-n)*a)<0){o.x=NaN,o.y=NaN,l=!1;break t}a=i+(h=Math.sqrt(s)),i-=h,(n=Math.abs(a-r))<(r=Math.abs(i-r))?(o.x=c,o.y=a):(o.x=c,o.y=i)}l=!0}else if(u.type===jt){var g=0,v=0,m=S=0,f=Nn.L(),p=(d=s-c)*d+(p=a-r)*p;for(o.x=s,o.y=a,d=0;d<u.Ub.count;d++)for(var b=u.Ub.n[d],x=b.sb,w=g=b.Aa,k=v=b.ya,M=0;M<x.count;M++){var P=x.n[M],T=P.type,S=P.I,m=P.J,C=!1;switch(T){case At:w=S,k=m;break;case Ft:C=Ba(g,v,S,m,c,r,s,a,f);break;case zt:var C=P.rc,T=P.Kc,N=P.kh,j=P.lh,C=bi(g,v,C,T,N,j,S,m,c,r,s,a,.5,f);break;case Bt:C=bi(g,v,C=(g+2*P.rc)/3,T=(v+2*P.Kc)/3,N=(2*P.rc+S)/3,j=(2*P.rc+S)/3,S,m,c,r,s,a,.5,f);break;case Ot:case Et:if(0===(N=(T=P.type===Ot?Gi(P,b):Ri(P,b,g,v)).length)){C=Ba(g,v,P.na,P.ua,c,r,s,a,f);break}for(m=0;m<N;m++)y=T[m],0===m&&Ba(g,v,y[0],y[1],c,r,s,a,f)&&((S=za(c,r,f,p,o))<p&&(p=S,l=!0)),bi(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],c,r,s,a,.5,f)&&((S=za(c,r,f,p,o))<p&&(p=S,l=!0));S=y[6],m=y[7];break;default:Nn.k("Unknown Segment type: "+T)}g=S,v=m,C&&((S=za(c,r,f,p,o))<p&&(p=S,l=!0)),P.Gw&&(Ba(g,v,S=w,m=k,c,r,s,a,f)&&((S=za(c,r,f,p,o))<p&&(p=S,l=!0)))}c=e-t,r=n-i,0!==(i=Math.sqrt(c*c+r*r))&&(c/=i,r/=i),o.x-=c*h,o.y-=r*h,Nn.v(f)}else Nn.k("Unknown Geometry type: "+u.type);return!!l&&(this.transform.ub(o),!0)},ja.prototype.containedInRect=ja.prototype.Gm=function(t,i){if(void 0===i)return t.Wj(this.U);null===(e=this.Ra)&&(Ns(this,1/0,1/0),e=this.Ra);var e=e.mb,n=this.lb/2,o=!1,r=Nn.L();return r.m(e.x-n,e.y-n),t.Fa(i.ub(r))&&(r.m(e.x-n,e.bottom+n),t.Fa(i.ub(r))&&(r.m(e.right+n,e.bottom+n),t.Fa(i.ub(r))&&(r.m(e.right+n,e.y-n),t.Fa(i.ub(r))&&(o=!0)))),Nn.v(r),o},ja.prototype.intersectsRect=ja.prototype.xg=function(t,i){if(this.Gm(t,i)||void 0===i&&(i=this.transform,t.Wj(this.U)))return!0;var e=Nn.ph();e.set(i),e.Dz();var n=t.left,o=t.right,r=t.top,s=t.bottom,a=Nn.L();if(a.m(n,r),e.ub(a),this.Vj(a,!0))return Nn.v(a),!0;if(a.m(o,r),e.ub(a),this.Vj(a,!0))return Nn.v(a),!0;if(a.m(n,s),e.ub(a),this.Vj(a,!0))return Nn.v(a),!0;if(a.m(o,s),e.ub(a),this.Vj(a,!0))return Nn.v(a),!0;var h=Nn.L(),l=Nn.L();e.set(i),e.vE(this.transform),e.Dz(),h.x=o,h.y=r,h.transform(e),a.x=n,a.y=r,a.transform(e);var u=!1;return Oa(this,a,h,l)?u=!0:(a.x=o,a.y=s,a.transform(e),Oa(this,a,h,l)?u=!0:(h.x=n,h.y=s,h.transform(e),Oa(this,a,h,l)?u=!0:(a.x=n,a.y=r,a.transform(e),Oa(this,a,h,l)&&(u=!0)))),Nn.v(a),Nn.Ze(e),Nn.v(h),Nn.v(l),u},ja.prototype.MD=function(t,i,e){function n(t,i){for(var e=t.length,n=0;n<e;n+=2)if(i.Uo(t[n],t[n+1])>o)return!0;return!1}if(e&&null!==this.fill&&this.Vj(t,!0))return!0;var o=t.rf(i);if(i=o,1.5<this.lb&&(o=this.lb/2+Math.sqrt(o),o*=o),null===(l=this.Ra)&&(Ns(this,1/0,1/0),null===(l=this.Ra)))return!1;if(!e){var r=(h=l.mb).x,s=h.y,a=h.x+h.width,h=h.y+h.height;if(m(t.x,t.y,r,s)<=o&&m(t.x,t.y,a,s)<=o&&m(t.x,t.y,r,h)<=o&&m(t.x,t.y,a,h)<=o)return!0}if(r=l.vc,s=l.Cc,a=l.vb,h=l.Bb,l.type===St){if(e=v(t.x,t.y,r,s,a,h),l=(r-a)*(t.x-a)+(s-h)*(t.y-h),e<=(0<=(a-r)*(t.x-r)+(h-s)*(t.y-s)&&0<=l?o:i))return!0}else{if(l.type===Ct)return i=!1,e&&(i=v(t.x,t.y,r,s,r,h)<=o||v(t.x,t.y,r,s,a,s)<=o||v(t.x,t.y,a,s,a,h)<=o||v(t.x,t.y,r,h,a,h)<=o),i;if(l.type===Nt){i=t.x-(r+a)/2;var l=t.y-(s+h)/2,u=Math.abs(a-r)/2,f=Math.abs(h-s)/2;if(0===u||0===f)return(e=v(t.x,t.y,r,s,a,h))<=o;if(!e)return!(m(i,l,-u,0)>=o||m(i,l,0,-f)>=o||m(i,l,0,f)>=o||m(i,l,u,0)>=o);if((t=function(t,i,e,n){var o=e<0,r=n<0,s=0,a=s=0,a=t<i?(s=1,0):(s=0,1),h=0,l=0,u=0,f=0,h=0===s?t:i,u=0===s?e:n;if((0===s?o:r)&&(u=-u),l=0===(s=a)?t:i,f=0===s?e:n,(0===s?o:r)&&(f=-f),(t=0)<f)if(0<u){for(i=h*h,h*=u,n=-(t=l*l)+(e=l*f),o=-t+Math.sqrt(h*h+e*e),l=n,r=0;r<9999999999&&((l=.5*(n+o))!==n&&l!==o);++r)if(0<(a=(a=h/(l+i))*a+(s=e/(l+t))*s-1))n=l;else{if(!(a<0))break;o=l}u=i*u/(l+i)-u,f=t*f/(l+t)-f,t=Math.sqrt(u*u+f*f)}else t=Math.abs(f-l);else t=(t=h*u)<(f=h*h-l*l)?(f=t/f,t=l*Math.sqrt(Math.abs(1-f*f)),u=h*f-u,Math.sqrt(u*u+t*t)):Math.abs(u-h);return t}(u,f,i,l))*t<=o)return!0}else if(l.type===jt){if(r=(h=l.mb).x,s=h.y,a=h.x+h.width,h=h.y+h.height,t.x>a&&t.x<r&&t.y>h&&t.y<s&&v(t.x,t.y,r,s,r,h)>o&&v(t.x,t.y,r,s,a,s)>o&&v(t.x,t.y,a,h,r,h)>o&&v(t.x,t.y,a,h,a,s)>o)return!1;if(i=Math.sqrt(o),!e){for(e=l.Ub,i=0;i<e.count;i++){if(u=(r=e.n[i]).Aa,f=r.ya,t.Uo(u,f)>o)return!1;for(a=(s=r.sb.n).length,h=0;h<a;h++){var c=s[h];switch(c.type){case At:case Ft:if(u=c.I,f=c.J,t.Uo(u,f)>o)return!1;break;case zt:if(l=Nn.jb(),gi(u,f,c.rc,c.Kc,c.kh,c.lh,c.I,c.J,.8,l),u=n(l,t),Nn.sa(l),u)return!1;if(u=c.I,f=c.J,t.Uo(u,f)>o)return!1;break;case Bt:if(l=Nn.jb(),mi(u,f,c.rc,c.Kc,c.I,c.J,.8,l),u=n(l,t),Nn.sa(l),u)return!1;if(u=c.I,f=c.J,t.Uo(u,f)>o)return!1;break;case Ot:case Et:var d=c.type===Ot?Gi(c,r):Ri(c,r,u,f),p=d.length;if(0===p){if(u=c.na,f=c.ua,t.Uo(u,f)>o)return!1;break}for(c=null,l=Nn.jb(),i=0;i<p;i++)if(gi((c=d[i])[l.length=0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],.8,l),n(l,t))return Nn.sa(l),!1;Nn.sa(l),null!==c&&(u=c[6],f=c[7]);break;default:Nn.k("Unknown Segment type: "+c.type)}}}return!0}if(null===this.fill?Ei(l,t.x,t.y,i):l.Fa(t,i,!0))return!0}}return!1},Nn.defineProperty(ja,{ml:"geometry"},function(){return this.Ra?this.Ra:this.un},function(t){var i,e=this.Ra;e!==t&&(this.un=this.Ra=null!==t?t.freeze():null,null!==(i=this.Y)&&(i.yj=NaN),this.Jh=!0,this.P(),this.h("geometry",e,t),null!==(t=this.Y)&&0!=(1024&this.fa)&&Ts(this,t,"geometryString"))}),Nn.defineProperty(ja,{UG:"geometryString"},function(){return null===this.ml?"":this.ml.toString()},function(t){var i=(t=Lt(t)).normalize();this.ml=t,this.position=t=Nn.Mb(-i.x,-i.y),Nn.v(t)}),Nn.defineProperty(ja,{eE:"isGeometryPositioned"},function(){return this.Qq},function(t){var i=this.Qq;i!==t&&(this.Qq=t,this.P(),this.h("isGeometryPositioned",i,t))}),ja.prototype.re=function(){this.Ra=null,this.P()},Nn.defineProperty(ja,{fill:"fill"},function(){return this.pd},function(t){var i=this.pd;i!==t&&(t instanceof fs&&t.freeze(),this.pd=t,this.pa(),this.h("fill",i,t))}),Nn.defineProperty(ja,{stroke:"stroke"},function(){return this.Dc},function(t){var i=this.Dc;i!==t&&(t instanceof fs&&t.freeze(),this.Dc=t,this.pa(),this.h("stroke",i,t))}),Nn.defineProperty(ja,{lb:"strokeWidth"},function(){return this.Qh},function(t){var i,e=this.Qh;e!==t&&(0<=t?(this.Qh=t,this.P(),null!==(i=this.Y)&&(i.yj=NaN),this.h("strokeWidth",e,t)):Nn.va(t,"value >= 0",ja,"strokeWidth:value"))}),Nn.defineProperty(ja,{HK:"strokeCap"},function(){return this.zo},function(t){var i=this.zo;i!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?Nn.va(t,'"butt", "round", or "square"',ja,"strokeCap"):(this.zo=t,this.pa(),this.h("strokeCap",i,t)))}),Nn.defineProperty(ja,{JK:"strokeJoin"},function(){return this.Bo},function(t){var i=this.Bo;i!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?Nn.va(t,'"miter", "bevel", or "round"',ja,"strokeJoin"):(this.Bo=t,this.pa(),this.h("strokeJoin",i,t)))}),Nn.defineProperty(ja,{KK:"strokeMiterLimit"},function(){return this.tm},function(t){var i,e=this.tm;e!==t&&(1<=t?(this.tm=t,this.pa(),null!==(i=this.Y)&&(i.yj=NaN),this.h("strokeMiterLimit",e,t)):Nn.va(t,"value >= 1",ja,"strokeWidth:value"))}),Nn.defineProperty(ja,{cF:"strokeDashArray"},function(){return this.Ao},function(t){var i=this.Ao;if(i!==t){if(null===t||Array.isArray(t)||Nn.Ed(t,"Array",ja,"strokeDashArray:value"),null!==t){for(var e=t.length,n=0,o=0;o<e;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||Nn.k("strokeDashArray:value "+r+" at index "+o+" must be a positive number or zero."),n+=r}if(0===n){if(null===i)return;t=null}}this.Ao=t,this.pa(),this.h("strokeDashArray",i,t)}}),Nn.defineProperty(ja,{IK:"strokeDashOffset"},function(){return this.ke},function(t){var i=this.ke;i!==t&&0<=t&&(this.ke=t,this.pa(),this.h("strokeDashOffset",i,t))}),Nn.defineProperty(ja,{Ab:"figure"},function(){return this.Mn},function(t){var i,e=this.Mn;e!==t&&("function"==typeof(i=Ph[t])?i=t:(i=Ph[t.toLowerCase()])||Nn.k("Unknown Shape.figure: "+t),e!==i&&(null!==(t=this.Y)&&(t.yj=NaN),this.Mn=i,this.Jh=!1,this.re(),this.h("figure",e,i)))}),Nn.defineProperty(ja,{Lp:"toArrow"},function(){return this.Fo},function(t){var i,e=this.Fo;!0===t?t="Standard":!1===t&&(t=""),e!==t&&(null===(i=Dh(t))?Nn.k("Unknown Shape.toArrow: "+t):e!==i&&(this.Fo=i,this.Jh=!1,this.re(),Ea(this),this.h("toArrow",e,i)))}),Nn.defineProperty(ja,{uz:"fromArrow"},function(){return this.Pn},function(t){var i,e=this.Pn;!0===t?t="Standard":!1===t&&(t=""),e!==t&&(null===(i=Dh(t))?Nn.k("Unknown Shape.fromArrow: "+t):e!==i&&(this.Pn=i,this.Jh=!1,this.re(),Ea(this),this.h("fromArrow",e,i)))}),Nn.defineProperty(ja,{B:"spot1"},function(){return this.Nh},function(t){Nn.A(t,ct,ja,"spot1");var i=this.Nh;i.K(t)||(this.Nh=t=t.R(),this.P(),this.h("spot1",i,t))}),Nn.defineProperty(ja,{C:"spot2"},function(){return this.Oh},function(t){Nn.A(t,ct,ja,"spot2");var i=this.Oh;i.K(t)||(this.Oh=t=t.R(),this.P(),this.h("spot2",i,t))}),Nn.defineProperty(ja,{Ac:"parameter1"},function(){return this.Ir},function(t){var i=this.Ir;i!==t&&(this.Ir=t,this.re(),this.h("parameter1",i,t))}),Nn.defineProperty(ja,{Mt:"parameter2"},function(){return this.Jr},function(t){var i=this.Jr;i!==t&&(this.Jr=t,this.re(),this.h("parameter2",i,t))}),Nn.u(ja,{Ha:"naturalBounds"},function(){if(null!==this.Ra)return this.Qc.assign(this.Ra.mb),this.Qc;var t=this.xa;return new Ln(0,0,t.width,t.height)}),Nn.defineProperty(ja,{Vw:"pathPattern"},function(){return this.Lr},function(t){var i=this.Lr;i!==t&&(this.Lr=t,this.pa(),this.h("pathPattern",i,t))}),Nn.defineProperty(ja,{yK:"pathObject"},function(){return this.Vw},function(t){this.Vw=t}),Nn.defineProperty(ja,{wz:"geometryStretch"},function(){return this.Iq},function(t){var i=this.Iq;i!==t&&(Nn.pb(t,ks,ja,"geometryStretch"),this.Iq=t,this.h("geometryStretch",i,t))}),Nn.defineProperty(ja,{interval:"interval"},function(){return this.Nq},function(t){var i=this.Nq;i!==(t=Math.floor(t))&&0<=t&&(this.Nq=t,null!==this.g&&yr(this.g),this.P(),this.h("interval",i,t))}),ja.makeGeometry=function(t,i,e){var n=(o=t.xa).width,o=o.height;return void 0!==i&&!isNaN(i)&&isFinite(i)&&(n=i),void 0!==e&&!isNaN(e)&&isFinite(e)&&(o=e),isFinite(n)||(n=100),isFinite(o)||(o=100),i=null,"None"!==t.Lp?i=hi[t.Lp]:"None"!==t.uz?i=hi[t.uz]:("string"==typeof(e=Ph[t.Ab])&&(e=Ph[e]),void 0===e&&Nn.k("Unknown Shape.figure: "+t.Ab),(i=e(t,n,o)).Vn=n,i.Tn=o),null===i&&("function"==typeof(e=Ph.Rectangle)&&(i=e(t,n,o))),i},ja.getFigureGenerators=function(){var t,i,e=new nt("string","function");for(t in Ph){t===t.toLowerCase()||"function"==typeof(i=Ph[t])&&e.add(t,i)}return e.freeze(),e},ja.defineFigureGenerator=function(t,i){Nn.j(t,"string",ja,"defineFigureGenerator:name"),"string"==typeof i?""!==i&&Ph[i]||Nn.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+i):Nn.j(i,"function",ja,"defineFigureGenerator:func");var e=t.toLowerCase();""!==t&&"none"!==e&&t!==e||Nn.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),Ph[t]=i,Ph[e]=t},ja.getArrowheadGeometries=function(){var t,i,e=new nt("string",Ai);for(t in hi){t===t.toLowerCase()||(i=hi[t])instanceof Ai&&e.add(t,i)}return e.freeze(),e},ja.defineArrowheadGeometry=function(t,i){Nn.j(t,"string",ja,"defineArrowheadGeometry:name");var e=null,e="string"==typeof i?(Nn.j(i,"string",ja,"defineArrowheadGeometry:pathstr"),Lt(i,!1)):(Nn.A(i,Ai,ja,"defineArrowheadGeometry:pathstr"),i),n=t.toLowerCase();""!==t&&"none"!==n&&t!==n||Nn.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t),hi[t]=e,hi[n]=t},Nn.Ja(qa,ks),Nn.ea("TextBlock",qa);var Ia,Ga,Ra,Va,Ha,Ka=new y,Ua=0,Ja=new y,Ya=0,Wa="...",Xa="",Za=new Mt(null).cl;function Qa(t,i,e,n){i=i.replace(/^\s+|\s+$/g,"");var o=0,r=0,s=0,a=t.yh,r=t.Jj+t.Kj,h=Math.max(0,th(t)+r),s=t.Rk===Ha?ih(a):0;if(t.De>=t.xi)return new st(0,h);if(t.xm===Ia){if(e.Ki=1,r=_a(i,a),0===s||r<=n)return e.Re=r,e.jf.push(e.Re),e.Be.push(i),new st(r,h);for(var l=$a(i),u=$a(i=i.substr(l.length)),r=_a(l+u,a);0<u.length&&r<=n;)r=_a(((l+=u)+(u=$a(i=i.substr(u.length)))).replace(/^\s+|\s+$/g,""),a);for(l+=u.replace(/^\s+|\s+$/g,""),n=Math.max(1,n-s);_a(l,a)>n&&1<l.length;)l=l.substr(0,l.length-1);return s=_a(l+=Wa,a),e.jf.push(s),e.Re=s,e.Be.push(l),new st(s,h)}var f=0;for(0===i.length&&(f=1,e.jf.push(0),e.Be.push(i));0<i.length;){for(l=$a(i),i=i.substr(l.length);_a(l,a)>n;){for(u=1,r=_a(l.substr(0,u),a),s=0;r<=n;)u++,s=r,r=_a(l.substr(0,u),a);if(o=1===u?(e.jf[t.De+f]=r,Math.max(o,r)):(e.jf[t.De+f]=s,Math.max(o,s)),--u<1&&(u=1),e.Be[t.De+f]=l.substr(0,u),f++,l=l.substr(u),t.De+f>t.xi)break}for(r=_a(l+(u=$a(i)),a);0<u.length&&r<=n;)r=_a(((l+=u)+(u=$a(i=i.substr(u.length)))).replace(/^\s+|\s+$/g,""),a);if(""!==(l=l.replace(/^\s+|\s+$/g,""))&&(o=0===u.length?(e.jf.push(r),Math.max(o,r)):(s=_a(l,a),e.jf.push(s),Math.max(o,s)),e.Be.push(l),f++,t.De+f>t.xi))break}return e.Ki=Math.min(t.xi,f),e.Re=Math.max(e.Re,o),new st(e.Re,h*e.Ki)}function $a(t){for(var i=t.length,e=0;e<i&&" "!==t.charAt(e);)e++;for(;e<i&&" "===t.charAt(e);)e++;return i<=e?t:t.substr(0,e)}function _a(t,i){return Xa!==i&&(Xa=Za.font=i),Za.measureText(t).width}function th(t){if(null!==t.On)return t.On;var i=t.yh;Xa!==i&&(Xa=Za.font=i);var e=0;return void 0!==Ka[i]&&Ua<5e3?e=Ka[i]:(e=1.3*Za.measureText("M").width,Ka[i]=e,Ua++),t.On=e}function ih(t){Xa!==t&&(Xa=Za.font=t);var i=0;return void 0!==Ja[t]&&Ya<5e3?i=Ja[t]:(i=Za.measureText(Wa).width,Ja[t]=i,Ya++),i}function eh(t,i,e){var n=t.le.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),o=t.Jj+t.Kj,o=Math.max(0,th(t)+o);if(0===n.length)return e.Re=0,t.De=1,o;t.Kw||0<=(r=n.indexOf("\n",0))&&(n=n.substr(0,r));for(var r=0,s=t.De=0,a=-1,h=!1;!h;)-1===(a=n.indexOf("\n",s))&&(a=n.length,h=!0),s<=a&&(s=n.substr(s,a-s),t.xm!==Ia?(e.Ki=0,r+=(s=Qa(t,s,e,i)).height,t.De+=e.Ki):(Qa(t,s,e,i),r+=o,t.De++),t.De===t.xi&&(h=!0)),s=a+1;return t.pv=r}function nh(){this.Re=this.Ki=0,this.jf=[],this.Be=[]}function oh(){ks.call(this),this.Pe=null,this.ts="",this.Ij=oi,this.Qn=vs,this.Co=this.Lj=this.mf=null,this.oy=!1,this.Tu=!0,this.to=null}qa.getEllipsis=function(){return Wa},qa.setEllipsis=function(t){Wa=t,Ja=new y,Ya=0},qa.prototype.cloneProtected=function(t){ks.prototype.cloneProtected.call(this,t),t.le=this.le,t.Dc=this.Dc,t.yh=this.yh,t.vm=this.vm,t.Sq=this.Sq,t.Vl=this.Vl,t.Ul=this.Ul,t.Rk=this.Rk,t.xm=this.xm,t.De=this.De,t.pv=this.pv,t.yy=this.yy,t.xy=this.xy,t.On=this.On,t.Jk.Zs(this.Jk),t.Cq=this.Cq,t.As=this.As,t.Tk=this.Tk,t.mf=this.mf,t.Jj=this.Jj,t.Kj=this.Kj,t.xi=this.xi,t.kv=this.kv},qa.prototype.toString=function(){return 22<this.le.length?'TextBlock("'+this.le.substring(0,20)+'"...)':'TextBlock("'+this.le+'")'},qa.None=Ia=Nn.p(qa,"None",0),qa.WrapFit=Ga=Nn.p(qa,"WrapFit",1),qa.WrapDesiredSize=Ra=Nn.p(qa,"WrapDesiredSize",2),qa.OverflowClip=Va=Nn.p(qa,"OverflowClip",0),qa.OverflowEllipsis=Ha=Nn.p(qa,"OverflowEllipsis",1),qa.prototype.P=function(){ks.prototype.P.call(this),this.xy=this.yy=null},Nn.defineProperty(qa,{font:"font"},function(){return this.yh},function(t){var i=this.yh;i!==t&&(this.yh=t,this.On=null,this.P(),this.h("font",i,t))}),qa.isValidFont=function(t){var i,e=Za.font;if(t===e||"10px sans-serif"===t)return!0;Za.font="10px sans-serif",Za.font=t;var n=Za.font;return"10px sans-serif"!==n?(Za.font=e,!0):(Za.font="19px serif",i=Za.font,Za.font=t,n=Za.font,Za.font=e,n!==i)},Nn.defineProperty(qa,{text:"text"},function(){return this.le},function(t){var i=this.le;i!==(t=null!=t?t.toString():"")&&(this.le=t,this.P(),this.h("text",i,t))}),Nn.defineProperty(qa,{textAlign:"textAlign"},function(){return this.vm},function(t){var i=this.vm;i!==t&&("start"===t||"end"===t||"left"===t||"right"===t||"center"===t?(this.vm=t,this.pa(),this.h("textAlign",i,t)):Nn.va(t,'"start", "end", "left", "right", or "center"',qa,"textAlign"))}),Nn.u(qa,{Ha:"naturalBounds"},function(){var t,i,e;return this.Qc.G()||(i=eh(this,t=Qa(this,this.le,this.Jk,999999).width,this.Jk),e=this.xa,isNaN(e.width)||(t=e.width),isNaN(e.height)||(i=e.height),An(this.Qc,t,i)),this.Qc}),Nn.defineProperty(qa,{Kw:"isMultiline"},function(){return this.Sq},function(t){var i=this.Sq;i!==t&&(this.Sq=t,this.P(),this.h("isMultiline",i,t))}),Nn.defineProperty(qa,{WJ:"isUnderline"},function(){return this.Vl},function(t){var i=this.Vl;i!==t&&(this.Vl=t,this.pa(),this.h("isUnderline",i,t))}),Nn.defineProperty(qa,{VJ:"isStrikethrough"},function(){return this.Ul},function(t){var i=this.Ul;i!==t&&(this.Ul=t,this.pa(),this.h("isStrikethrough",i,t))}),Nn.defineProperty(qa,{uF:"wrap"},function(){return this.xm},function(t){var i=this.xm;i!==t&&(this.xm=t,this.P(),this.h("wrap",i,t))}),Nn.defineProperty(qa,{overflow:"overflow"},function(){return this.Rk},function(t){var i=this.Rk;i!==t&&(this.Rk=t,this.P(),this.h("overflow",i,t))}),Nn.defineProperty(qa,{stroke:"stroke"},function(){return this.Dc},function(t){var i=this.Dc;i!==t&&(t instanceof fs&&t.freeze(),this.Dc=t,this.pa(),this.h("stroke",i,t))}),Nn.u(qa,{DH:"lineCount"},function(){return this.De}),Nn.defineProperty(qa,{oz:"editable"},function(){return this.Cq},function(t){var i=this.Cq;i!==t&&(this.Cq=t,this.h("editable",i,t))}),Nn.defineProperty(qa,{dF:"textEditor"},function(){return this.As},function(t){var i=this.As;i!==t&&(t instanceof HTMLElement||Nn.k("textEditor must be an HTMLElement, not: "+t),this.As=t,this.h("textEditor",i,t))}),Nn.defineProperty(qa,{qz:"errorFunction"},function(){return this.mf},function(t){var i=this.mf;i!==t&&(null!==t&&Nn.j(t,"function",qa,"errorFunction"),this.mf=t,this.h("errorFunction",i,t))}),qa.prototype.Xj=function(t,i){if(null!==this.Dc&&0!==this.le.length&&null!==this.yh){var e=this.Ha.width,n=th(this);t.textAlign=this.vm,Ls(this,t,this.Dc,!0,!1),(this.Vl||this.Ul)&&Ls(this,t,this.Dc,!1,!1);var o=this.Jk,r=0,s=!1,a=Nn.Mb(0,0);this.Yg.ub(a);var h=Nn.Mb(0,n);this.Yg.ub(h);var l=a.rf(h);Nn.v(a),Nn.v(h),l*(a=i.scale)*a<8&&(s=!0),i.kf!==t&&(s=!1),!1===i.Si("textGreeking")&&(s=!1);for(var l=i.Uq,a=this.Jj,h=this.Kj,u=this.De,f=0;f<u;f++){var c=o.jf[f];e<c&&(c=e);var d=p=o.Be[f],p=t,y=r=r+a,g=e,v=n,m=0,b=this.vm;"start"===b&&(b=l?"right":"left"),"end"===b&&(b=l?"left":"right"),s?("left"===b?m=0:"right"===b?m=g-c:"center"===b&&(m=(g-c)/2),p.fillRect(0+m,y+.25*v,c,1)):("left"===b?m=0:"right"===b?m=g:"center"===b&&(m=g/2),p.fillText(d,0+m,y+v-.25*v),0===(d=v/20|0)&&(d=1),"right"===b?m-=c:"center"===b&&(m-=c/2),this.Vl&&(p.beginPath(),p.lineWidth=d,p.moveTo(0+m,y+v-.2*v),p.lineTo(0+m+c,y+v-.2*v),p.stroke()),this.Ul&&(p.beginPath(),y=y+v-v/2.2|0,0!=(p.lineWidth=d)%2&&(y+=.5),p.moveTo(0+m,y),p.lineTo(0+m+c,y),p.stroke())),r+=n+h}}},qa.prototype.np=function(t,i,e,n){this.kv=t;var o=this.Jk;o.reset();var r=0,s=0;if(isNaN(this.xa.width)){if(0===(r=this.le.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length)r=0;else if(this.Kw){for(var a=s=0,h=!1;!h;){var l=r.indexOf("\n",a);-1===l&&(l=r.length,h=!0),s<(a=_a(r.substr(a,l-a).replace(/^\s+|\s+$/g,""),this.yh))&&(s=a),a=l+1}r=s}else 0<=(s=r.indexOf("\n",0))&&(r=r.substr(0,s)),r=a=_a(r,this.yh);r=Math.min(r,t/this.scale),r=Math.max(8,r)}else r=this.xa.width;if(null!==this.S&&(r=Math.min(r,this.S.xf.width),r=Math.max(r,this.S.ih.width)),s=eh(this,r,o),l=s=isNaN(this.xa.height)?Math.min(s,i/this.scale):this.xa.height,0!==o.Re&&1!==o.Be.length&&this.Rk===Ha&&(i=this.yh,h=this.Rk===Ha?ih(i):0,a=this.Jj+this.Kj,a=Math.max(0,th(this)+a),!((l=Math.min(this.LH-1,Math.max(Math.floor(l/a+.01)-1,0)))+1>=o.Be.length))){for(a=o.Be[l],t=Math.max(1,t-h);_a(a,i)>t&&1<a.length;)a=a.substr(0,a.length-1);t=_a(a+=Wa,i),o.Be[l]=a,o.Be=o.Be.slice(0,l+1),o.jf[l]=t,o.jf=o.jf.slice(0,l+1),o.Ki=o.Be.length,o.Re=Math.max(o.Re,t),this.De=o.Ki}this.uF!==Ga&&!isNaN(this.xa.width)||(r=o.Re,isNaN(this.xa.width)&&(r=Math.max(8,r))),r=Math.max(e,r),s=Math.max(n,s),An(this.Qc,r,s),Ss(this,0,0,r,s)},qa.prototype.Li=function(t,i,e,n){js(this,t,i,e,n)},Nn.defineProperty(qa,{wA:"textValidation"},function(){return this.Tk},function(t){var i=this.Tk;i!==t&&(null!==t&&Nn.j(t,"function",qa,"textValidation"),this.Tk=t,this.h("textValidation",i,t))}),Nn.defineProperty(qa,{EK:"spacingAbove"},function(){return this.Jj},function(t){var i=this.Jj;i!==t&&(this.Jj=t,this.h("spacingAbove",i,t))}),Nn.defineProperty(qa,{FK:"spacingBelow"},function(){return this.Kj},function(t){var i=this.Kj;i!==t&&(this.Kj=t,this.h("spacingBelow",i,t))}),Nn.defineProperty(qa,{LH:"maxLines"},function(){return this.xi},function(t){var i=this.xi;i!==t&&((t=Math.floor(t))<=0&&Nn.va(t,"> 0",qa,"maxLines"),this.xi=t,this.h("maxLines",i,t),this.P())}),Nn.u(qa,{hK:"metrics"},function(){return this.Jk}),nh.prototype.reset=function(){this.Re=this.Ki=0,this.jf=[],this.Be=[]},nh.prototype.Zs=function(t){this.Ki=t.Ki,this.Re=t.Re,this.jf=Nn.dl(t.jf),this.Be=Nn.dl(t.Be)},Nn.u(nh,{tJ:"arrSize"},function(){return this.jf}),Nn.u(nh,{uJ:"arrText"},function(){return this.Be}),Nn.u(nh,{gK:"maxLineWidth"},function(){return this.Re}),Nn.Ja(oh,ks),Nn.ea("Picture",oh),oh.prototype.cloneProtected=function(t){ks.prototype.cloneProtected.call(this,t),t.element=this.Pe,t.ts=this.ts,t.Ij=this.Ij.R(),t.Qn=this.Qn,t.mf=this.mf,t.Lj=this.Lj,t.Tu=this.Tu,t.to=this.to};var rh,sh=new y,ah=0,hh=[];function lh(){var t=hh;if(0===t.length)for(var i=h.document.getElementsByTagName("canvas"),e=i.length,n=0;n<e;n++){var o=i[n];o.parentElement&&o.parentElement.W&&t.push(o.parentElement.W)}return t}function uh(t,i){t.qy=!0,t.Yu=!1;for(var e=null,n=lh(),o=n.length,r=0;r<o;r++){var s=n[r],a=s.no.ja(t.src);if(null!==a)for(o=a.length,r=0;r<o;r++)e=a[r],s.sC.add(e),s.ue(),null!==e.Lj&&e.Lj(e,i)}}function fh(t,i){t.Yu=i;for(var e=null,n=lh(),o=n.length,r=0;r<o;r++)if(null!==(e=n[r].no.ja(t.src))){for(var o=e.length,s=Nn.jb(),r=0;r<o;r++)s.push(e[r]);for(r=0;r<o;r++)null!==(e=s[r]).mf&&e.mf(e,i);Nn.sa(s)}}function ch(t){this.Lo=[new ph(t,1)]}function dh(t,i,e,n){var o=new Mt(null),r=o.cl,s=1/i;o.width=e/i,o.height=n/i,i=new ph(o.xd,i),e=t.Lo[t.Lo.length-1],r.setTransform(s*e.xp,0,0,s*e.xp,0,0),r.drawImage(e.source,0,0),t.Lo.push(i)}function ph(t,i){this.source=t,this.xp=i}function yh(){this.o=new Ai,this.Rb=null}function gh(t,i,e,n,o,r){null===t.o&&Nn.k("StreamGeometryContext has been closed"),void 0!==o&&!0===o?(null===t.Rb&&Nn.k("Need to call beginFigure first"),(n=new Ii(At)).I=i,n.J=e,t.Rb.sb.add(n)):(t.Rb=new qi,t.Rb.Aa=i,t.Rb.ya=e,t.Rb.ut=n,t.o.Ub.add(t.Rb)),void 0!==r&&(t.Rb.Wn=r)}function vh(t){null===t.o&&Nn.k("StreamGeometryContext has been closed"),null===t.Rb&&Nn.k("Need to call beginFigure first");var i=t.Rb.sb.length;0<i&&t.Rb.sb.da(i-1).close()}function mh(t,i,e,n,o,r,s,a){void 0===a&&(a=!1),null===t.o&&Nn.k("StreamGeometryContext has been closed"),null===t.Rb&&Nn.k("Need to call beginFigure first");var h=new Ii(zt);h.rc=i,h.Kc=e,h.kh=n,h.lh=o,h.I=r,h.J=s,a&&h.close(),t.Rb.sb.add(h)}function bh(t,i,e,n,o){var r;void 0===r&&(r=!1),null===t.o&&Nn.k("StreamGeometryContext has been closed"),null===t.Rb&&Nn.k("Need to call beginFigure first");var s=new Ii(Bt);s.rc=i,s.Kc=e,s.I=n,s.J=o,r&&s.close(),t.Rb.sb.add(s)}function xh(t){t=wh(t);var i=Nn.jb();i[0]=t[0];for(var e=1,n=1;n<t.length;)i[e]=t[n],i[e+1]=t[n],i[e+2]=t[n+1],n+=2,e+=3;return Nn.sa(t),i}function wh(t){var i=kh(t),e=Nn.jb(),n=Math.floor(i.length/2),o=i.length-1;t=0==t%2?2:1;for(var r=0;r<o;r++){var s=i[r],a=i[r+1],h=i[(n+r-1)%o],l=i[(n+r+t)%o];e[2*r]=s,e[2*r+1]=Pi(s.x,s.y,h.x,h.y,a.x,a.y,l.x,l.y,new Se)}return e[e.length]=e[0],Nn.sa(i),e}function kh(t){for(var i,e=Nn.jb(),n=1.5*Math.PI,o=0;o<t;o++)i=2*Math.PI/t*o+n,e[o]=new Se(.5+.5*Math.cos(i),.5+.5*Math.sin(i));return e.push(e[0]),e}oh.clearCache=rh=function(t){void 0===t&&(t=""),Nn.j(t,"string",oh,"clearCache:url"),""!==t?sh[t]&&(delete sh[t],ah--):(sh=new y,ah=0)},oh.prototype.toString=function(){return"Picture("+this.source+")#"+Nn.ld(this)},Nn.defineProperty(oh,{element:"element"},function(){return this.Pe},function(i){var e,t=this.Pe;t!==i&&(null===i||i instanceof HTMLImageElement||i instanceof HTMLVideoElement||i instanceof HTMLCanvasElement||Nn.k("Picture.element must be an instance of Image, Canvas, or Video, not: "+i),this.oy=i instanceof HTMLCanvasElement,null!==(this.Pe=i)&&(!0===i.complete||void 0===i.complete?(i.Yu instanceof Event&&null!==this.mf&&this.mf(this,i.Yu),!0===i.qy&&null!==this.Lj&&this.Lj(this,null),i.qy=!0,this.xa.G()||(Hs(this,!1),this.P())):(e=this,i.HB||(i.addEventListener("load",function(t){uh(i,t),e.xa.G()||(Hs(e,!1),e.P())}),i.addEventListener("error",function(t){fh(i,t)}),i.HB=!0))),this.h("element",t,i),this.pa())}),Nn.defineProperty(oh,{source:"source"},function(){return this.ts},function(t){var i,e,n,o,r,s=this.ts;s!==t&&(Nn.j(t,"string",oh,"source"),this.ts=t,i=sh,e=this.g,void 0!==i[t]?n=i[t].Lo[0].source:(30<ah&&(rh(),i=sh),n=Nn.createElement("img"),o=this,n.addEventListener("load",function(t){uh(n,t),o.xa.G()||(Hs(o,!1),o.P())}),n.addEventListener("error",function(t){fh(n,t)}),n.HB=!0,n.src=t,null!==(r=this.to)&&(n.crossOrigin=r(this)),i[t]=new ch(n),ah++),null!==e&&Pr(e,this),this.element=n,null!==e&&kr(e,this),this.P(),this.pa(),this.h("source",s,t))}),Nn.defineProperty(oh,{DK:"sourceCrossOrigin"},function(){return this.to},function(t){var i;this.to!==t&&(null!==t&&Nn.j(t,"function",oh,"sourceCrossOrigin"),this.to=t,null!==this.element)&&(i=this.element.src,null===t&&"string"==typeof i?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)))}),Nn.defineProperty(oh,{aj:"sourceRect"},function(){return this.Ij},function(t){var i=this.Ij;i.K(t)||(Nn.A(t,Ln,oh,"sourceRect"),this.Ij=t=t.R(),this.pa(),this.h("sourceRect",i,t))}),Nn.defineProperty(oh,{gH:"imageStretch"},function(){return this.Qn},function(t){var i=this.Qn;i!==t&&(Nn.pb(t,ks,oh,"imageStretch"),this.Qn=t,this.pa(),this.h("imageStretch",i,t))}),Nn.defineProperty(oh,{qz:"errorFunction"},function(){return this.mf},function(t){var i=this.mf;i!==t&&(null!==t&&Nn.j(t,"function",oh,"errorFunction"),this.mf=t,this.h("errorFunction",i,t))}),Nn.defineProperty(oh,{NK:"successFunction"},function(){return this.Lj},function(t){var i=this.Lj;i!==t&&(null!==t&&Nn.j(t,"function",oh,"successFunction"),this.Lj=t,this.h("successFunction",i,t))}),oh.prototype.Xj=function(t,i){var e=this.Pe;if(null!==e&&(null!==(n=e.src)&&""!==n||Nn.k('Element has no source ("src") attribute: '+e),!(e.Yu instanceof Event)&&!0===e.qy)){var n=this.Ha,o=0,r=0,s=(a=this.oy)?+e.width:e.naturalWidth,a=a?+e.height:e.naturalHeight;if(void 0===s&&e.videoWidth&&(s=e.videoWidth),void 0===a&&e.videoHeight&&(a=e.videoHeight),s=s||n.width,a=a||n.height,0!==s&&0!==a){var h=s,l=a;this.aj.G()&&(o=this.Ij.x,r=this.Ij.y,s=this.Ij.width,a=this.Ij.height);var u=s,f=a;switch(p=this.Qn){case ds:if(this.aj.G())break;o+=Math.max((u-n.width)/2,0),r+=Math.max((f-n.height)/2,0),s=Math.min(n.width,u),a=Math.min(n.height,f);break;case vs:u=n.width,f=n.height;break;case ms:case bs:var c=0;p===ms?(u*=c=Math.min(n.height/f,n.width/u),f*=c):p===bs&&(f*=c=Math.max(n.height/f,n.width/u),o+=((u*=c)-n.width)/2/u*s,r+=(f-n.height)/2/f*a,s*=1/(u/n.width),a*=1/(f/n.height),u=n.width,f=n.height)}var d=s*a/(u*(p=this.Ri()*i.scale)*f*p),p=null;if(void 0!==(c=sh[this.source])&&16<d){c.Lo.length<2&&(dh(c,4,h,l),dh(c,16,h,l));for(var l=(h=c.Lo).length,p=h[0],y=0;y<l&&h[y].xp*h[y].xp<d;y++)p=h[y]}if(!i.Jn){if(null===this.Co)if(null===this.Pe)this.Co=!1;else{(h=new Mt(null).cl).drawImage(this.Pe,0,0);try{h.getImageData(0,0,1,1).data[3]&&(this.Co=!1),this.Co=!1}catch(t){this.Co=!0}}if(this.Co)return}if(i.Si("pictureRatioOptimization")&&!i.py&&void 0!==c&&null!==p&&1!==p.xp){t.save(),c=p.xp;try{t.drawImage(p.source,o/c,r/c,Math.min(p.source.width,s/c),Math.min(p.source.height,a/c),Math.max((n.width-u)/2,0),Math.max((n.height-f)/2,0),Math.min(n.width,u),Math.min(n.height,f))}catch(t){this.Tu=!1}t.restore()}else try{t.drawImage(e,o,r,s,a,Math.max((n.width-u)/2,0),Math.max((n.height-f)/2,0),Math.min(n.width,u),Math.min(n.height,f))}catch(t){this.Tu=!1}}}},Nn.u(oh,{Ha:"naturalBounds"},function(){return this.Qc}),oh.prototype.np=function(t,i,e,n){var o=this.xa,r=Bs(this,!0),s=this.Pe,a=this.oy;(a||!this.wy&&s&&s.complete)&&(this.wy=!0),null===s&&(isFinite(t)||(t=0),isFinite(i)||(i=0)),isFinite(o.width)||r===vs||r===gs?(isFinite(t)||(t=this.aj.G()?this.aj.width:a?+s.width:s.naturalWidth),e=0):null!==s&&!1!==this.wy&&(t=this.aj.G()?this.aj.width:a?+s.width:s.naturalWidth),isFinite(o.height)||r===vs||r===ys?(isFinite(i)||(i=this.aj.G()?this.aj.height:a?+s.height:s.naturalHeight),n=0):null!==s&&!1!==this.wy&&(i=this.aj.G()?this.aj.height:a?+s.height:s.naturalHeight),isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(i=o.height),o=this.xf,r=this.ih,e=Math.max(e,r.width),n=Math.max(n,r.height),t=Math.min(o.width,t),i=Math.min(o.height,i),t=Math.max(e,t),i=Math.max(n,i),null===s||s.complete||(isFinite(t)||(t=0),isFinite(i)||(i=0)),An(this.Qc,t,i),Ss(this,0,0,t,i)},oh.prototype.Li=function(t,i,e,n){js(this,t,i,e,n)},(t=yh.prototype).reset=function(){this.o=new Ai,this.Rb=null},t.Ya=function(t){null===this.o&&Nn.k("StreamGeometryContext has been closed"),null===this.Rb&&Nn.k("Need to call beginFigure first"),this.Rb.vl=t},t.moveTo=function(t,i,e){void 0===e&&(e=!1),null===this.o&&Nn.k("StreamGeometryContext has been closed"),null===this.Rb&&Nn.k("Need to call beginFigure first");var n=new Ii(At);n.I=t,n.J=i,e&&n.close(),this.Rb.sb.add(n)},t.lineTo=function(t,i,e){void 0===e&&(e=!1),null===this.o&&Nn.k("StreamGeometryContext has been closed"),null===this.Rb&&Nn.k("Need to call beginFigure first");var n=new Ii(Ft);n.I=t,n.J=i,e&&n.close(),this.Rb.sb.add(n)},t.arcTo=function(t,i,e,n,o,r,s){void 0===r&&(r=0),void 0===s&&(s=!1),null===this.o&&Nn.k("StreamGeometryContext has been closed"),null===this.Rb&&Nn.k("Need to call beginFigure first");var a=new Ii(Ot);a.xe=t,a.Af=i,a.na=e,a.ua=n,a.radiusX=o,a.radiusY=0!==r?r:o,s&&a.close(),this.Rb.sb.add(a)};var Mh,Ph={None:"Rectangle",Rectangle:function(t,i,e){return(t=new Ai).type=Ct,t.Aa=0,t.ya=0,t.I=i,t.J=e,t},Square:function(t,i,e){return(t=new Ai).Md=ms,t.type=Ct,t.Aa=0,t.ya=0,t.I=Math.min(i,e),t.J=Math.min(i,e),t},Ellipse:function(t,i,e){return(t=new Ai).type=Nt,t.Aa=0,t.ya=0,t.I=i,t.J=e,t.B=ri,t.C=si,t},Circle:function(t,i,e){return(t=new Ai).Md=ms,t.type=Nt,t.Aa=0,t.ya=0,t.I=Math.min(i,e),t.J=Math.min(i,e),t.B=ri,t.C=si,t},Connector:"Ellipse",TriangleRight:function(t,i,e){t=new Ai;var n=new qi,o=new Ii;return o.I=i,o.J=.5*e,n.sb.add(o),(i=new Ii).I=0,i.J=e,n.sb.add(i.close()),t.Ub.add(n),t.B=new ct(0,.25),t.C=new ct(.5,.75),t},TriangleDown:function(t,i,e){t=new Ai;var n=new qi,o=new Ii;return o.I=i,o.J=0,n.sb.add(o),(o=new Ii).I=.5*i,o.J=e,n.sb.add(o.close()),t.Ub.add(n),t.B=new ct(.25,0),t.C=new ct(.75,.5),t},TriangleLeft:function(t,i,e){t=new Ai;var n=new qi;n.Aa=i,n.ya=e;var o=new Ii;return o.I=0,o.J=.5*e,n.sb.add(o),(e=new Ii).I=i,e.J=0,n.sb.add(e.close()),t.Ub.add(n),t.B=new ct(.5,.25),t.C=new ct(1,.75),t},TriangleUp:function(t,i,e){t=new Ai;var n=new qi;n.Aa=i,n.ya=e;var o=new Ii;return o.I=0,o.J=e,n.sb.add(o),(e=new Ii).I=.5*i,e.J=0,n.sb.add(e.close()),t.Ub.add(n),t.B=new ct(.25,.5),t.C=new ct(.75,1),t},Line1:function(t,i,e){return(t=new Ai).type=St,t.Aa=0,t.ya=0,t.I=i,t.J=e,t},Line2:function(t,i,e){return(t=new Ai).type=St,t.Aa=i,t.ya=0,t.I=0,t.J=e,t},MinusLine:"LineH",LineH:function(t,i,e){return(t=new Ai).type=St,t.Aa=0,t.ya=e/2,t.I=i,t.J=e/2,t},LineV:function(t,i,e){return(t=new Ai).type=St,t.Aa=i/2,t.ya=0,t.I=i/2,t.J=e,t},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(t,i,e){return gh(t=Nn.s(),0,0,!1),mh(t,Vt*i,0,+i,(1-Vt)*e,i,e),i=t.o,Nn.q(t),i},Curve2:function(t,i,e){return gh(t=Nn.s(),0,0,!1),mh(t,0,Vt*e,(1-Vt)*i,e,i,e),i=t.o,Nn.q(t),i},Curve3:function(t,i,e){return gh(t=Nn.s(),+i,0,!1),mh(t,+i,Vt*e,Vt*i,+e,0,+e),i=t.o,Nn.q(t),i},Curve4:function(t,i,e){return gh(t=Nn.s(),+i,0,!1),mh(t,(1-Vt)*i,0,0,(1-Vt)*e,0,+e),i=t.o,Nn.q(t),i},Alternative:"Triangle",Merge:"Triangle",Triangle:function(t,i,e){return gh(t=Nn.s(),.5*i,0*e,!0),t.lineTo(0*i,+e),t.lineTo(+i,+e,!0),(i=t.o).B=new ct(.25,.5),i.C=new ct(.75,1),Nn.q(t),i},Decision:"Diamond",Diamond:function(t,i,e){return gh(t=Nn.s(),.5*i,0,!0),t.lineTo(0,.5*e),t.lineTo(.5*i,+e),t.lineTo(+i,.5*e,!0),(i=t.o).B=new ct(.25,.25),i.C=new ct(.75,.75),Nn.q(t),i},Pentagon:function(t,i,e){var n=kh(5);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<5;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.2,.22),i.C=new ct(.8,.9),Nn.q(t),i},DataTransmission:"Hexagon",Hexagon:function(t,i,e){var n=kh(6);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<6;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.07,.25),i.C=new ct(.93,.75),Nn.q(t),i},Heptagon:function(t,i,e){var n=kh(7);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<7;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.2,.15),i.C=new ct(.8,.85),Nn.q(t),i},Octagon:function(t,i,e){var n=kh(8);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<8;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.15,.15),i.C=new ct(.85,.85),Nn.q(t),i},Nonagon:function(t,i,e){var n=kh(9);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<9;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.17,.13),i.C=new ct(.82,.82),Nn.q(t),i},Decagon:function(t,i,e){var n=kh(10);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<10;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.16,.16),i.C=new ct(.84,.84),Nn.q(t),i},Dodecagon:function(t,i,e){var n=kh(12);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<12;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.16,.16),i.C=new ct(.84,.84),Nn.q(t),i},FivePointedStar:function(t,i,e){var n=wh(5);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<10;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.312,.383),i.C=new ct(.693,.765),Nn.q(t),i},SixPointedStar:function(t,i,e){var n=wh(6);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<12;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.17,.251),i.C=new ct(.833,.755),Nn.q(t),i},SevenPointedStar:function(t,i,e){var n=wh(7);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<14;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.363,.361),i.C=new ct(.641,.709),Nn.q(t),i},EightPointedStar:function(t,i,e){var n=wh(8);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<16;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.252,.255),i.C=new ct(.75,.75),Nn.q(t),i},NinePointedStar:function(t,i,e){var n=wh(9);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<18;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.355,.361),i.C=new ct(.645,.651),Nn.q(t),i},TenPointedStar:function(t,i,e){var n=wh(10);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<20;o++)t.lineTo(n[o].x*i,n[o].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.281,.261),i.C=new ct(.723,.748),Nn.q(t),i},FivePointedBurst:function(t,i,e){var n=xh(5);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<n.length;o+=3)mh(t,n[o].x*i,n[o].y*e,n[o+1].x*i,n[o+1].y*e,n[o+2].x*i,n[o+2].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.312,.383),i.C=new ct(.693,.765),Nn.q(t),i},SixPointedBurst:function(t,i,e){var n=xh(6);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<n.length;o+=3)mh(t,n[o].x*i,n[o].y*e,n[o+1].x*i,n[o+1].y*e,n[o+2].x*i,n[o+2].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.17,.251),i.C=new ct(.833,.755),Nn.q(t),i},SevenPointedBurst:function(t,i,e){var n=xh(7);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<n.length;o+=3)mh(t,n[o].x*i,n[o].y*e,n[o+1].x*i,n[o+1].y*e,n[o+2].x*i,n[o+2].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.363,.361),i.C=new ct(.641,.709),Nn.q(t),i},EightPointedBurst:function(t,i,e){var n=xh(8);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<n.length;o+=3)mh(t,n[o].x*i,n[o].y*e,n[o+1].x*i,n[o+1].y*e,n[o+2].x*i,n[o+2].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.252,.255),i.C=new ct(.75,.75),Nn.q(t),i},NinePointedBurst:function(t,i,e){var n=xh(9);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<n.length;o+=3)mh(t,n[o].x*i,n[o].y*e,n[o+1].x*i,n[o+1].y*e,n[o+2].x*i,n[o+2].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.355,.361),i.C=new ct(.645,.651),Nn.q(t),i},TenPointedBurst:function(t,i,e){var n=xh(10);gh(t=Nn.s(),n[0].x*i,n[0].y*e,!0);for(var o=1;o<n.length;o+=3)mh(t,n[o].x*i,n[o].y*e,n[o+1].x*i,n[o+1].y*e,n[o+2].x*i,n[o+2].y*e);return Nn.sa(n),vh(t),(i=t.o).B=new ct(.281,.261),i.C=new ct(.723,.748),Nn.q(t),i},Cloud:function(t,i,e){return gh(t=Nn.s(),.08034461*i,.1944299*e,!0),mh(t,-.09239631*i,.07836421*e,.1406031*i,-.0542823*e,.2008615*i,.05349299*e),mh(t,.2450511*i,-.00697547*e,.3776197*i,-.01112067*e,.4338609*i,.074219*e),mh(t,.4539471*i,0,.6066018*i,-.02526587*e,.6558228*i,.07004196*e),mh(t,.6914277*i,-.01904177*e,.8921095*i,-.01220843*e,.8921095*i,.08370865*e),mh(t,1.036446*i,.04105738*e,1.020377*i,.3022052*e,.9147671*i,.3194596*e),mh(t,1.04448*i,.360238*e,.992256*i,.5219009*e,.9082935*i,.562044*e),mh(t,1.032337*i,.5771781*e,1.018411*i,.8120651*e,.9212406*i,.8217117*e),mh(t,1.028411*i,.9571472*e,.8556702*i,1.052487*e,.7592566*i,.9156953*e),mh(t,.7431877*i,1.009325*e,.5624123*i,1.021761*e,.5101666*i,.9310455*e),mh(t,.4820677*i,1.031761*e,.3030112*i,1.002796*e,.2609328*i,.9344623*e),mh(t,.2329994*i,1.01518*e,.03213784*i,1.01518*e,.08034461*i,.870098*e),mh(t,-.02812061*i,.9032597*e,-.01205169*i,.6835638*e,.06829292*i,.6545475*e),mh(t,-.01812061*i,.6089503*e,-.00606892*i,.4555777*e,.06427569*i,.4265613*e),mh(t,-.01606892*i,.3892545*e,-.01205169*i,.1944299*e,.08034461*i,.1944299*e),vh(t),(i=t.o).B=new ct(.1,.1),i.C=new ct(.9,.9),Nn.q(t),i},Gate:"Crescent",Crescent:function(t,i,e){return gh(t=Nn.s(),0,0,!0),mh(t,+i,0,+i,+e,0,+e),mh(t,.5*i,.75*e,.5*i,.25*e,0,0),vh(t),(i=t.o).B=new ct(.511,.19),i.C=new ct(.776,.76),Nn.q(t),i},FramedRectangle:function(t,i,e){var n=Nn.s(),o=t?t.Ac:NaN;return t=t?t.Mt:NaN,isNaN(o)&&(o=.1),isNaN(t)&&(t=.1),gh(n,0,0,!0),n.lineTo(+i,0),n.lineTo(+i,+e),n.lineTo(0,+e,!0),gh(n,o*i,t*e,!1,!0),n.lineTo(o*i,(1-t)*e),n.lineTo((1-o)*i,(1-t)*e),n.lineTo((1-o)*i,t*e,!0),(i=n.o).B=new ct(o,t),i.C=new ct(1-o,1-t),Nn.q(n),i},Delay:"HalfEllipse",HalfEllipse:function(t,i,e){return gh(t=Nn.s(),0,0,!0),mh(t,Vt*i,0,+i,(.5-Vt/2)*e,+i,.5*e),mh(t,+i,(.5+Vt/2)*e,Vt*i,+e,0,+e),vh(t),(i=t.o).B=new ct(0,.2),i.C=new ct(.75,.8),Nn.q(t),i},Heart:function(t,i,e){return gh(t=Nn.s(),.5*i,+e,!0),mh(t,.1*i,.8*e,0,.5*e,0*i,.3*e),mh(t,0*i,0,.45*i,0,.5*i,.3*e),mh(t,.55*i,0,+i,0,+i,.3*e),mh(t,i,.5*e,.9*i,.8*e,.5*i,+e),vh(t),(i=t.o).B=new ct(.15,.29),i.C=new ct(.86,.68),Nn.q(t),i},Spade:function(t,i,e){return gh(t=Nn.s(),.5*i,0,!0),t.lineTo(.51*i,.01*e),mh(t,.6*i,.2*e,i,.25*e,i,.5*e),mh(t,i,.8*e,.6*i,.8*e,.55*i,.7*e),mh(t,.5*i,.75*e,.55*i,.95*e,.75*i,e),t.lineTo(.25*i,e),mh(t,.45*i,.95*e,.5*i,.75*e,.45*i,.7*e),mh(t,.4*i,.8*e,0,.8*e,0,.5*e),mh(t,0,.25*e,.4*i,.2*e,.49*i,.01*e),vh(t),(i=t.o).B=new ct(.19,.26),i.C=new ct(.8,.68),Nn.q(t),i},Club:function(t,i,e){gh(t=Nn.s(),.4*i,.6*e,!0),mh(t,.5*i,.75*e,.45*i,.95*e,.15*i,+e),t.lineTo(.85*i,e),mh(t,.55*i,.95*e,.5*i,.75*e,.6*i,.6*e);var n=4*(Math.SQRT2-1)/3*.2;return mh(t,.6*i,(.5+n)*e,(.5-n+.3)*i,.7*e,.8*i,.7*e),mh(t,(.5+n+.3)*i,.7*e,+i,(.5+n)*e,+i,.5*e),mh(t,+i,(.5-n)*e,(.5+n+.3)*i,.3*e,.8*i,.3*e),mh(t,(.5-n+.3)*i,.3*e,.65*i,(.5-n-.02)*e,.65*i,.36771243*e),mh(t,(.5+(n=4*(Math.SQRT2-1)/3*.2))*i,(.7-.3)*e,.7*i,(.5+n-.3)*e,.7*i,.2*e),mh(t,.7*i,(.5-n-.3)*e,(.5+n)*i,0*e,.5*i,0*e),mh(t,(.5-n)*i,0*e,.3*i,(.5-n-.3)*e,.3*i,.2*e),mh(t,.3*i,(.5+n-.3)*e,(.5-n)*i,(.7-.3)*e,.35*i,.36771243*e),mh(t,.35*i,(.5-(n=4*(Math.SQRT2-1)/3*.2)-.02)*e,(.5+n-.3)*i,.3*e,.2*i,.3*e),mh(t,(.5-n-.3)*i,.3*e,0*i,(.5-n)*e,0*i,.5*e),mh(t,0*i,(.5+n)*e,(.5-n-.3)*i,.7*e,.2*i,.7*e),mh(t,(.5+n-.3)*i,.7*e,(.7-.3)*i,(.5+n)*e,.4*i,.6*e),vh(t),(i=t.o).B=new ct(.06,.39),i.C=new ct(.93,.58),Nn.q(t),i},Ring:function(t,i,e){t=Nn.s();var n=4*(Math.SQRT2-1)/3*.5;return gh(t,i,.5*e,!0),mh(t,i,(.5-n)*e,(.5+n)*i,0,.5*i,0),mh(t,(.5-n)*i,0,0,(.5-n)*e,0,.5*e),mh(t,0,(.5+n)*e,(.5-n)*i,e,.5*i,e),mh(t,(.5+n)*i,e,i,(.5+n)*e,i,.5*e),n=4*(Math.SQRT2-1)/3*.4,gh(t,.5*i,.1*e,!0,!0),mh(t,(.5+n)*i,.1*e,.9*i,(.5-n)*e,.9*i,.5*e),mh(t,.9*i,(.5+n)*e,(.5+n)*i,.9*e,.5*i,.9*e),mh(t,(.5-n)*i,.9*e,.1*i,(.5+n)*e,.1*i,.5*e),mh(t,.1*i,(.5-n)*e,(.5-n)*i,.1*e,.5*i,.1*e),(i=t.o).B=new ct(.146,.146),i.C=new ct(.853,.853),i.Md=ms,Nn.q(t),i},YinYang:function(t,i,e){gh(t=Nn.s(),.5*i,0,!0),t.arcTo(270,180,.5*i,.5*i,.5*i),mh(t,+i,.5*e,0,.5*e,.5*i,0,!0);return gh(t,.6*i,.25*e,!0,!0),t.arcTo(0,-360,.5*i,.25*e,.1*i),vh(t),gh(t,.5*i,0,!1),t.arcTo(270,-180,.5*i,.5*i,.5*i),t.Ya(!1),gh(t,.6*i,.75*e,!0),t.arcTo(0,360,.5*i,.75*e,.1*i),vh(t),(i=t.o).Md=ms,Nn.q(t),i},Peace:function(t,i,e){t=Nn.s();var n=4*(Math.SQRT2-1)/3*.5;gh(t,i,.5*e,!0),mh(t,i,(.5-n)*e,(.5+n)*i,0,.5*i,0),mh(t,(.5-n)*i,0,0,(.5-n)*e,0,.5*e),mh(t,0,(.5+n)*e,(.5-n)*i,e,.5*i,e),mh(t,(.5+n)*i,e,i,(.5+n)*e,i,.5*e),n=4*(Math.SQRT2-1)/3*.4,gh(t,.5*i,.1*e,!0,!0),mh(t,(.5+n)*i,.1*e,.9*i,(.5-n)*e,.9*i,.5*e),mh(t,.9*i,(.5+n)*e,(.5+n)*i,.9*e,.5*i,.9*e),mh(t,(.5-n)*i,.9*e,.1*i,(.5+n)*e,.1*i,.5*e),mh(t,.1*i,(.5-n)*e,(.5-n)*i,.1*e,.5*i,.1*e);var o,r,s=4*(Math.SQRT2-1)/3*.07;return gh(t,(.5+.07)*i,.42223*e,!0),mh(t,(.5+.07)*i,(.5-s+.11*-.707)*e,(.5+s)*i,.35223*e,.5*i,.35223*e),mh(t,(.5-s)*i,.35223*e,.43*i,(.5-s+.11*-.707)*e,.43*i,.42223*e),mh(t,.43*i,(.5+s+.11*-.707)*e,(.5-s)*i,(.5+.07+.11*-.707)*e,.5*i,(.5+.07+.11*-.707)*e),mh(t,(.5+s)*i,(.5+.07+.11*-.707)*e,(.5+.07)*i,(.5+s+.11*-.707)*e,(.5+.07)*i,.42223*e),s=4*(Math.SQRT2-1)/3*.07,gh(t,(.5+.07+.11*-.707)*i,.57777*e,!0),mh(t,(.5+.07+.11*-.707)*i,(.5-s+.707*.11)*e,(.5+s+.11*-.707)*i,(.43+.707*.11)*e,.42223*i,(.43+.707*.11)*e),mh(t,(.5-s+.11*-.707)*i,(.43+.707*.11)*e,.35223*i,(.5-s+.707*.11)*e,.35223*i,.57777*e),mh(t,.35223*i,(.5+s+.707*.11)*e,(.5-s+.11*-.707)*i,(.5+.07+.707*.11)*e,.42223*i,(.5+.07+.707*.11)*e),mh(t,(.5+s+.11*-.707)*i,(.5+.07+.707*.11)*e,(.5+.07+.11*-.707)*i,(.5+s+.707*.11)*e,(.5+.07+.11*-.707)*i,.57777*e),r=o=.707*.11,s=4*(Math.SQRT2-1)/3*.07,gh(t,(.5+.07+o)*i,.57777*e,!0),mh(t,(.5+.07+o)*i,(.5-s+r)*e,(.5+s+o)*i,(.43+r)*e,.57777*i,(.43+r)*e),mh(t,(.5-s+o)*i,(.43+r)*e,(.43+o)*i,(.5-s+r)*e,(.43+o)*i,.57777*e),mh(t,(.43+o)*i,(.5+s+r)*e,(.5-s+o)*i,(.5+.07+r)*e,.57777*i,(.5+.07+r)*e),mh(t,(.5+s+o)*i,(.5+.07+r)*e,(.5+.07+o)*i,(.5+s+r)*e,(.5+.07+o)*i,.57777*e),(i=t.o).B=new ct(.146,.146),i.C=new ct(.853,.853),i.Md=ms,Nn.q(t),i},NotAllowed:function(t,i,e){var n=.5*Vt;gh(t=Nn.s(),.5*i,0*e,!0),mh(t,(.5-n)*i,0*e,0*i,(.5-n)*e,0*i,.5*e),mh(t,0*i,(.5+n)*e,(.5-n)*i,+e,.5*i,+e),mh(t,(.5+n)*i,+e,+i,(.5+n)*e,+i,.5*e),mh(t,+i,(.5-n)*e,(.5+n)*i,0*e,.5*i,0*e);var n=.4*Vt,o=Nn.L(),r=Nn.L(),s=Nn.L(),a=Nn.L();vi(.5,.5-.4,.5+n,.5-.4,.9,.5-n,.9,.5,.42,o,r,s,a,a);var h=Nn.L(),l=Nn.L(),u=Nn.L();vi(.5,.5-.4,.5+n,.5-.4,.9,.5-n,.9,.5,.58,a,a,u,h,l);var f=Nn.L(),c=Nn.L(),d=Nn.L();vi(.5,.9,.5-n,.9,.5-.4,.5+n,.5-.4,.5,.42,f,c,d,a,a);var p=Nn.L(),y=Nn.L(),g=Nn.L();return vi(.5,.9,.5-n,.9,.5-.4,.5+n,.5-.4,.5,.58,a,a,g,p,y),gh(t,g.x*i,g.y*e,!0,!0),mh(t,p.x*i,p.y*e,y.x*i,y.y*e,(.5-.4)*i,.5*e),mh(t,(.5-.4)*i,(.5-n)*e,(.5-n)*i,(.5-.4)*e,.5*i,(.5-.4)*e),mh(t,o.x*i,o.y*e,r.x*i,r.y*e,s.x*i,s.y*e),t.lineTo(g.x*i,g.y*e),vh(t),gh(t,d.x*i,d.y*e,!0,!0),t.lineTo(u.x*i,u.y*e),mh(t,h.x*i,h.y*e,l.x*i,l.y*e,.9*i,.5*e),mh(t,.9*i,(.5+n)*e,(.5+n)*i,.9*e,.5*i,.9*e),mh(t,f.x*i,f.y*e,c.x*i,c.y*e,d.x*i,d.y*e),vh(t),Nn.v(o),Nn.v(r),Nn.v(s),Nn.v(a),Nn.v(h),Nn.v(l),Nn.v(u),Nn.v(f),Nn.v(c),Nn.v(d),Nn.v(p),Nn.v(y),Nn.v(g),i=t.o,Nn.q(t),i.Md=ms,i},Fragile:function(t,i,e){return gh(t=Nn.s(),0,0,!0),t.lineTo(.25*i,0),t.lineTo(.2*i,.15*e),t.lineTo(.3*i,.25*e),t.lineTo(.29*i,.33*e),t.lineTo(.35*i,.25*e),t.lineTo(.3*i,.15*e),t.lineTo(.4*i,0),t.lineTo(+i,0),mh(t,+i,.25*e,.75*i,.5*e,.55*i,.5*e),t.lineTo(.55*i,.9*e),t.lineTo(.7*i,.9*e),t.lineTo(.7*i,+e),t.lineTo(.3*i,+e),t.lineTo(.3*i,.9*e),t.lineTo(.45*i,.9*e),t.lineTo(.45*i,.5*e),mh(t,.25*i,.5*e,0,.25*e,0,0),vh(t),(i=t.o).B=new ct(.25,0),i.C=new ct(.75,.4),Nn.q(t),i},HourGlass:function(t,i,e){return gh(t=Nn.s(),.65*i,.5*e,!0),t.lineTo(+i,+e),t.lineTo(0,+e),t.lineTo(.35*i,.5*e),t.lineTo(0,0),t.lineTo(+i,0),vh(t),i=t.o,Nn.q(t),i},Lightning:function(t,i,e){return gh(t=Nn.s(),0*i,.55*e,!0),t.lineTo(.75*i,0),t.lineTo(.25*i,.45*e),t.lineTo(.9*i,.48*e),t.lineTo(.4*i,+e),t.lineTo(.65*i,.55*e),vh(t),i=t.o,Nn.q(t),i},Parallelogram1:function(t,i,e){t=t?t.Ac:NaN,isNaN(t)&&(t=.1);var n=Nn.s();return gh(n,t*i,0,!0),n.lineTo(+i,0),n.lineTo((1-t)*i,+e),n.lineTo(0,+e),vh(n),(i=n.o).B=new ct(t,0),i.C=new ct(1-t,1),Nn.q(n),i},Input:"Output",Output:function(t,i,e){return gh(t=Nn.s(),0,+e,!0),t.lineTo(.1*i,0),t.lineTo(+i,0),t.lineTo(.9*i,+e),vh(t),(i=t.o).B=new ct(.1,0),i.C=new ct(.9,1),Nn.q(t),i},Parallelogram2:function(t,i,e){t=t?t.Ac:NaN,isNaN(t)&&(t=.25);var n=Nn.s();return gh(n,t*i,0,!0),n.lineTo(+i,0),n.lineTo((1-t)*i,+e),n.lineTo(0,+e),vh(n),(i=n.o).B=new ct(t,0),i.C=new ct(1-t,1),Nn.q(n),i},ThickCross:function(t,i,e){t=t?t.Ac:NaN,isNaN(t)&&(t=.25);var n=Nn.s();return gh(n,(.5-t/2)*i,0,!0),n.lineTo((.5+t/2)*i,0),n.lineTo((.5+t/2)*i,(.5-t/2)*e),n.lineTo(+i,(.5-t/2)*e),n.lineTo(+i,(.5+t/2)*e),n.lineTo((.5+t/2)*i,(.5+t/2)*e),n.lineTo((.5+t/2)*i,+e),n.lineTo((.5-t/2)*i,+e),n.lineTo((.5-t/2)*i,(.5+t/2)*e),n.lineTo(0,(.5+t/2)*e),n.lineTo(0,(.5-t/2)*e),n.lineTo((.5-t/2)*i,(.5-t/2)*e),vh(n),(i=n.o).B=new ct(.5-t/2,.5-t/2),i.C=new ct(.5+t/2,.5+t/2),Nn.q(n),i},ThickX:function(t,i,e){t=.25/Math.SQRT2;var n=Nn.s();return gh(n,.3*i,0,!0),n.lineTo(.5*i,.2*e),n.lineTo(.7*i,0),n.lineTo(+i,.3*e),n.lineTo(.8*i,.5*e),n.lineTo(+i,.7*e),n.lineTo(.7*i,+e),n.lineTo(.5*i,.8*e),n.lineTo(.3*i,+e),n.lineTo(0,.7*e),n.lineTo(.2*i,.5*e),n.lineTo(0,.3*e),vh(n),(i=n.o).B=new ct(.5-t,.5-t),i.C=new ct(.5+t,.5+t),Nn.q(n),i},ThinCross:function(t,i,e){var n=t?t.Ac:NaN;return isNaN(n)&&(n=.1),gh(t=Nn.s(),(.5-n/2)*i,0,!0),t.lineTo((.5+n/2)*i,0),t.lineTo((.5+n/2)*i,(.5-n/2)*e),t.lineTo(+i,(.5-n/2)*e),t.lineTo(+i,(.5+n/2)*e),t.lineTo((.5+n/2)*i,(.5+n/2)*e),t.lineTo((.5+n/2)*i,+e),t.lineTo((.5-n/2)*i,+e),t.lineTo((.5-n/2)*i,(.5+n/2)*e),t.lineTo(0,(.5+n/2)*e),t.lineTo(0,(.5-n/2)*e),t.lineTo((.5-n/2)*i,(.5-n/2)*e),vh(t),i=t.o,Nn.q(t),i},ThinX:function(t,i,e){return gh(t=Nn.s(),.1*i,0,!0),t.lineTo(.5*i,.4*e),t.lineTo(.9*i,0),t.lineTo(+i,.1*e),t.lineTo(.6*i,.5*e),t.lineTo(+i,.9*e),t.lineTo(.9*i,+e),t.lineTo(.5*i,.6*e),t.lineTo(.1*i,+e),t.lineTo(0,.9*e),t.lineTo(.4*i,.5*e),t.lineTo(0,.1*e),vh(t),i=t.o,Nn.q(t),i},RightTriangle:function(t,i,e){return gh(t=Nn.s(),0,0,!0),t.lineTo(+i,+e),t.lineTo(0,+e),vh(t),(i=t.o).B=new ct(0,.5),i.C=new ct(.5,1),Nn.q(t),i},RoundedIBeam:function(t,i,e){return gh(t=Nn.s(),0,0,!0),t.lineTo(+i,0),mh(t,.5*i,.25*e,.5*i,.75*e,+i,+e),t.lineTo(0,+e),mh(t,.5*i,.75*e,.5*i,.25*e,0,0),vh(t),i=t.o,Nn.q(t),i},RoundedRectangle:function(t,i,e){var n=t?t.Ac:NaN;isNaN(n)&&(n=5),n=Math.min(n,i/3),t=(n=Math.min(n,e/3))*Vt;var o=Nn.s();return gh(o,n,0,!0),o.lineTo(i-n,0),mh(o,i-t,0,i,t,i,n),o.lineTo(i,e-n),mh(o,i,e-t,i-t,e,i-n,e),o.lineTo(n,e),mh(o,t,e,0,e-t,0,e-n),o.lineTo(0,n),mh(o,0,t,t,0,n,0),vh(o),i=o.o,1<t?(i.B=new ct(0,0,t,t),i.C=new ct(1,1,-t,-t)):(i.B=P,i.C=C),Nn.q(o),i},Border:function(t,i,e){var n=t?t.Ac:NaN;return isNaN(n)&&(n=5),n=Math.min(n,i/3),n=Math.min(n,e/3),gh(t=Nn.s(),n,0,!0),t.lineTo(i-n,0),mh(t,+i,0,i,0,i,n),t.lineTo(i,e-n),mh(t,i,+e,+i,e,i-n,e),t.lineTo(n,e),mh(t,0,e,0,+e,0,e-n),t.lineTo(0,n),mh(t,0,0,0,0,n,0),vh(t),(i=t.o).B=P,i.C=C,Nn.q(t),i},SquareIBeam:function(t,i,e){var n=t?t.Ac:NaN;return isNaN(n)&&(n=.2),gh(t=Nn.s(),0,0,!0),t.lineTo(+i,0),t.lineTo(+i,n*e),t.lineTo((.5+n/2)*i,n*e),t.lineTo((.5+n/2)*i,(1-n)*e),t.lineTo(+i,(1-n)*e),t.lineTo(+i,+e),t.lineTo(0,+e),t.lineTo(0,(1-n)*e),t.lineTo((.5-n/2)*i,(1-n)*e),t.lineTo((.5-n/2)*i,n*e),t.lineTo(0,n*e),vh(t),i=t.o,Nn.q(t),i},Trapezoid:function(t,i,e){t=t?t.Ac:NaN,isNaN(t)&&(t=.2);var n=Nn.s();return gh(n,t*i,0,!0),n.lineTo((1-t)*i,0),n.lineTo(+i,+e),n.lineTo(0,+e),vh(n),(i=n.o).B=new ct(t,0),i.C=new ct(1-t,1),Nn.q(n),i},ManualLoop:"ManualOperation",ManualOperation:function(t,i,e){var n=t?t.Ac:NaN;return isNaN(n)&&(n=0),gh(t=Nn.s(),n,0,!0),t.lineTo(0,0),t.lineTo(+i,0),t.lineTo(.9*i,+e),t.lineTo(.1*i,+e),vh(t),(i=t.o).B=new ct(.1,0),i.C=new ct(.9,1),Nn.q(t),i},GenderMale:function(t,i,e){t=Nn.s();var n=.4*Vt,o=Nn.L(),r=Nn.L(),s=Nn.L(),a=Nn.L();gh(t,(.5-.4)*i,.5*e,!0),mh(t,(.5-.4)*i,(.5-n)*e,(.5-n)*i,(.5-.4)*e,.5*i,(.5-.4)*e),vi(.5,.5-.4,.5+n,.5-.4,.9,.5-n,.9,.5,.44,s,a,r,o,o),mh(t,s.x*i,s.y*e,a.x*i,a.y*e,r.x*i,r.y*e);var h=Nn.Mb(r.x,r.y);vi(.5,.5-.4,.5+n,.5-.4,.9,.5-n,.9,.5,.56,o,o,r,s,a);var l=Nn.Mb(r.x,r.y);return t.lineTo((.1*h.x+.855)*i,.1*h.y*e),t.lineTo(.85*i,.1*h.y*e),t.lineTo(.85*i,0),t.lineTo(+i,0),t.lineTo(+i,.15*e),t.lineTo((.1*l.x+.9)*i,.15*e),t.lineTo((.1*l.x+.9)*i,(.1*l.y+.05*.9)*e),t.lineTo(l.x*i,l.y*e),mh(t,s.x*i,s.y*e,a.x*i,a.y*e,.9*i,.5*e),mh(t,.9*i,(.5+n)*e,(.5+n)*i,.9*e,.5*i,.9*e),mh(t,(.5-n)*i,.9*e,(.5-.4)*i,(.5+n)*e,(.5-.4)*i,.5*e),n=.35*Vt,gh(t,.5*i,(.5-.35)*e,!0,!0),mh(t,(.5-n)*i,(.5-.35)*e,(.5-.35)*i,(.5-n)*e,(.5-.35)*i,.5*e),mh(t,(.5-.35)*i,(.5+n)*e,(.5-n)*i,.85*e,.5*i,.85*e),mh(t,(.5+n)*i,.85*e,.85*i,(.5+n)*e,.85*i,.5*e),mh(t,.85*i,(.5-n)*e,(.5+n)*i,(.5-.35)*e,.5*i,(.5-.35)*e),gh(t,(.5-.35)*i,.5*e,!0),Nn.v(o),Nn.v(r),Nn.v(s),Nn.v(a),Nn.v(h),Nn.v(l),(i=t.o).B=new ct(.202,.257),i.C=new ct(.692,.839),i.Md=ms,Nn.q(t),i},GenderFemale:function(t,i,e){t=Nn.s();var n,o,r=4*(Math.SQRT2-1)/3*.375;return gh(t,.525*i,.75*e,!0),mh(t,(.5+r)*i,.75*e,.875*i,(.5+r-.125)*e,.875*i,.375*e),mh(t,.875*i,(.5-r-.125)*e,(.5+r)*i,0*e,.5*i,0*e),mh(t,(.5-r)*i,0*e,.125*i,(.5-r-.125)*e,.125*i,.375*e),mh(t,.125*i,(.5+r-.125)*e,(.5-r)*i,.75*e,.475*i,.75*e),t.lineTo(.475*i,.85*e),t.lineTo(.425*i,.85*e),t.lineTo(.425*i,.9*e),t.lineTo(.475*i,.9*e),t.lineTo(.475*i,+e),t.lineTo(.525*i,+e),t.lineTo(.525*i,.9*e),t.lineTo(.575*i,.9*e),t.lineTo(.575*i,.85*e),t.lineTo(.525*i,.85*e),vh(t),n=.325,o=-.125,r=4*(Math.SQRT2-1)/3*n,gh(t,.825*i,.375*e,!0,!0),mh(t,.825*i,(.5+r+o)*e,(.5+r)*i,.7*e,.5*i,.7*e),mh(t,(.5-r)*i,.7*e,.175*i,(.5+r+o)*e,.175*i,.375*e),mh(t,.175*i,(.5-r+o)*e,(.5-r)*i,(.175+o)*e,.5*i,(.175+o)*e),mh(t,(.5+r)*i,(.175+o)*e,.825*i,(.5-r+o)*e,.825*i,.375*e),gh(t,.525*i,.7*e,!0),(i=t.o).B=new ct(.232,.136),i.C=new ct(.782,.611),i.Md=ms,Nn.q(t),i},PlusLine:function(t,i,e){return gh(t=Nn.s(),0,.5*e,!1),t.lineTo(+i,.5*e),t.moveTo(.5*i,0),t.lineTo(.5*i,+e),i=t.o,Nn.q(t),i},XLine:function(t,i,e){return gh(t=Nn.s(),0,+e,!1),t.lineTo(+i,0),t.moveTo(0,0),t.lineTo(+i,+e),i=t.o,Nn.q(t),i},AsteriskLine:function(t,i,e){t=Nn.s();var n=.2/Math.SQRT2;return gh(t,n*i,(1-n)*e,!1),t.lineTo((1-n)*i,n*e),t.moveTo(n*i,n*e),t.lineTo((1-n)*i,(1-n)*e),t.moveTo(0*i,.5*e),t.lineTo(+i,.5*e),t.moveTo(.5*i,0*e),t.lineTo(.5*i,+e),i=t.o,Nn.q(t),i},CircleLine:function(t,i,e){var n=.5*Vt;return gh(t=Nn.s(),+i,.5*e,!1),mh(t,+i,(.5+n)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0,(.5+n)*e,0,.5*e),mh(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),mh(t,(.5+n)*i,0,+i,(.5-n)*e,+i,.5*e),(i=t.o).B=new ct(.146,.146),i.C=new ct(.853,.853),i.Md=ms,Nn.q(t),i},Pie:function(t,i,e){t=Nn.s();var n=4*(Math.SQRT2-1)/3*.5;return gh(t,(.5*Math.SQRT2/2+.5)*i,(.5-.5*Math.SQRT2/2)*e,!0),mh(t,.7*i,0*e,.5*i,0*e,.5*i,0*e),mh(t,(.5-n)*i,0*e,0*i,(.5-n)*e,0*i,.5*e),mh(t,0*i,(.5+n)*e,(.5-n)*i,+e,.5*i,+e),mh(t,(.5+n)*i,+e,+i,(.5+n)*e,+i,.5*e),t.lineTo(.5*i,.5*e),vh(t),i=t.o,Nn.q(t),i},PiePiece:function(t,i,e){var n=Vt/Math.SQRT2*.5,o=Math.SQRT2/2,r=1-Math.SQRT2/2;return gh(t=Nn.s(),i,e,!0),mh(t,i,(1-n)*e,(o+n)*i,(r+n)*e,o*i,r*e),t.lineTo(0,e),vh(t),i=t.o,Nn.q(t),i},StopSign:function(t,i,e){t=1/(Math.SQRT2+2);var n=Nn.s();return gh(n,t*i,0,!0),n.lineTo((1-t)*i,0),n.lineTo(+i,t*e),n.lineTo(+i,(1-t)*e),n.lineTo((1-t)*i,+e),n.lineTo(t*i,+e),n.lineTo(0,(1-t)*e),n.lineTo(0,t*e),vh(n),(i=n.o).B=new ct(t/2,t/2),i.C=new ct(1-t/2,1-t/2),Nn.q(n),i},LogicImplies:function(t,i,e){var n=t?t.Ac:NaN;return isNaN(n)&&(n=.2),gh(t=Nn.s(),(1-n)*i,0*e,!1),t.lineTo(+i,.5*e),t.lineTo((1-n)*i,e),t.moveTo(0,.5*e),t.lineTo(i,.5*e),(i=t.o).B=P,i.C=new ct(.8,.5),Nn.q(t),i},LogicIff:function(t,i,e){var n=t?t.Ac:NaN;return isNaN(n)&&(n=.2),gh(t=Nn.s(),(1-n)*i,0*e,!1),t.lineTo(+i,.5*e),t.lineTo((1-n)*i,e),t.moveTo(0,.5*e),t.lineTo(i,.5*e),t.moveTo(n*i,0),t.lineTo(0,.5*e),t.lineTo(n*i,e),(i=t.o).B=new ct(.2,0),i.C=new ct(.8,.5),Nn.q(t),i},LogicNot:function(t,i,e){return gh(t=Nn.s(),0,0,!1),t.lineTo(+i,0),t.lineTo(+i,+e),i=t.o,Nn.q(t),i},LogicAnd:function(t,i,e){return gh(t=Nn.s(),0,+e,!1),t.lineTo(.5*i,0),t.lineTo(+i,+e),(i=t.o).B=new ct(.25,.5),i.C=new ct(.75,1),Nn.q(t),i},LogicOr:function(t,i,e){return gh(t=Nn.s(),0,0,!1),t.lineTo(.5*i,+e),t.lineTo(+i,0),(i=t.o).B=new ct(.219,0),i.C=new ct(.78,.409),Nn.q(t),i},LogicXor:function(t,i,e){gh(t=Nn.s(),.5*i,0,!1),t.lineTo(.5*i,+e),t.moveTo(0,.5*e),t.lineTo(+i,.5*e);var n=.5*Vt;return mh(t,+i,(.5+n)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0,(.5+n)*e,0,.5*e),mh(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),mh(t,(.5+n)*i,0,+i,(.5-n)*e,+i,.5*e),(i=t.o).Md=ms,Nn.q(t),i},LogicTruth:function(t,i,e){return gh(t=Nn.s(),0,0,!1),t.lineTo(+i,0),t.moveTo(.5*i,0),t.lineTo(.5*i,+e),i=t.o,Nn.q(t),i},LogicFalsity:function(t,i,e){return gh(t=Nn.s(),0,+e,!1),t.lineTo(+i,+e),t.moveTo(.5*i,+e),t.lineTo(.5*i,0),i=t.o,Nn.q(t),i},LogicThereExists:function(t,i,e){return gh(t=Nn.s(),0,0,!1),t.lineTo(+i,0),t.lineTo(+i,.5*e),t.lineTo(0,.5*e),t.moveTo(+i,.5*e),t.lineTo(+i,+e),t.lineTo(0,+e),i=t.o,Nn.q(t),i},LogicForAll:function(t,i,e){return gh(t=Nn.s(),0,0,!1),t.lineTo(.5*i,+e),t.lineTo(+i,0),t.moveTo(.25*i,.5*e),t.lineTo(.75*i,.5*e),(i=t.o).B=new ct(.25,0),i.C=new ct(.75,.5),Nn.q(t),i},LogicIsDefinedAs:function(t,i,e){return gh(t=Nn.s(),0,0,!1),t.lineTo(i,0),t.moveTo(0,.5*e),t.lineTo(i,.5*e),t.moveTo(0,e),t.lineTo(i,e),(i=t.o).B=new ct(.01,.01),i.C=new ct(.99,.49),Nn.q(t),i},LogicIntersect:function(t,i,e){var n=.5*Vt;return gh(t=Nn.s(),0,+e,!1),t.lineTo(0,.5*e),mh(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),mh(t,(.5+n)*i,0,+i,(.5-n)*e,+i,.5*e),t.lineTo(+i,+e),(i=t.o).B=new ct(0,.5),i.C=C,Nn.q(t),i},LogicUnion:function(t,i,e){var n=.5*Vt;return gh(t=Nn.s(),+i,0,!1),t.lineTo(+i,.5*e),mh(t,+i,(.5+n)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0,(.5+n)*e,0,.5*e),t.lineTo(0,0),(i=t.o).B=P,i.C=new ct(1,.5),Nn.q(t),i},Arrow:function(t,i,e){var n=t?t.Ac:NaN,o=t?t.Mt:NaN;return isNaN(n)&&(n=.3),isNaN(o)&&(o=.3),gh(t=Nn.s(),0,(.5-o/2)*e,!0),t.lineTo((1-n)*i,(.5-o/2)*e),t.lineTo((1-n)*i,0),t.lineTo(+i,.5*e),t.lineTo((1-n)*i,+e),t.lineTo((1-n)*i,(.5+o/2)*e),t.lineTo(0,(.5+o/2)*e),vh(t),(i=t.o).B=new ct(0,.5-o/2),n=Pi(0,.5+o/2,1,.5+o/2,1-n,1,1,.5,Nn.L()),i.C=new ct(n.x,n.y),Nn.v(n),Nn.q(t),i},ISOProcess:"Chevron",Chevron:function(t,i,e){return gh(t=Nn.s(),0,0,!0),t.lineTo(.5*i,0),t.lineTo(+i,.5*e),t.lineTo(.5*i,+e),t.lineTo(0,+e),t.lineTo(.5*i,.5*e),vh(t),i=t.o,Nn.q(t),i},DoubleArrow:function(t,i,e){return gh(t=Nn.s(),0,0,!0),t.lineTo(.3*i,.214*e),t.lineTo(.3*i,0),t.lineTo(+i,.5*e),t.lineTo(.3*i,+e),t.lineTo(.3*i,.786*e),t.lineTo(0,+e),vh(t),gh(t,.3*i,.214*e,!1),t.lineTo(.3*i,.786*e),t.Ya(!1),i=t.o,Nn.q(t),i},DoubleEndArrow:function(t,i,e){return gh(t=Nn.s(),+i,.5*e,!0),t.lineTo(.7*i,+e),t.lineTo(.7*i,.7*e),t.lineTo(.3*i,.7*e),t.lineTo(.3*i,+e),t.lineTo(0,.5*e),t.lineTo(.3*i,0),t.lineTo(.3*i,.3*e),t.lineTo(.7*i,.3*e),t.lineTo(.7*i,0),vh(t),i=t.o,e=Pi(0,.5,.3,0,0,.3,.3,.3,Nn.L()),i.B=new ct(e.x,e.y),e=Pi(.7,1,1,.5,.7,.7,1,.7,e),i.C=new ct(e.x,e.y),Nn.v(e),Nn.q(t),i},IBeamArrow:function(t,i,e){return gh(t=Nn.s(),+i,.5*e,!0),t.lineTo(.7*i,+e),t.lineTo(.7*i,.7*e),t.lineTo(.2*i,.7*e),t.lineTo(.2*i,+e),t.lineTo(0,+e),t.lineTo(0,0),t.lineTo(.2*i,0),t.lineTo(.2*i,.3*e),t.lineTo(.7*i,.3*e),t.lineTo(.7*i,0),vh(t),(i=t.o).B=new ct(0,.3),e=Pi(.7,1,1,.5,.7,.7,1,.7,Nn.L()),i.C=new ct(e.x,e.y),Nn.v(e),Nn.q(t),i},Pointer:function(t,i,e){return gh(t=Nn.s(),+i,.5*e,!0),t.lineTo(0,+e),t.lineTo(.2*i,.5*e),t.lineTo(0,0),vh(t),(i=t.o).B=new ct(.2,.35),e=Pi(.2,.65,1,.65,0,1,1,.5,Nn.L()),i.C=new ct(e.x,e.y),Nn.v(e),Nn.q(t),i},RoundedPointer:function(t,i,e){return gh(t=Nn.s(),+i,.5*e,!0),t.lineTo(0,+e),mh(t,.5*i,.75*e,.5*i,.25*e,0,0),vh(t),(i=t.o).B=new ct(.4,.35),e=Pi(.2,.65,1,.65,0,1,1,.5,Nn.L()),i.C=new ct(e.x,e.y),Nn.v(e),Nn.q(t),i},SplitEndArrow:function(t,i,e){return gh(t=Nn.s(),+i,.5*e,!0),t.lineTo(.7*i,+e),t.lineTo(.7*i,.7*e),t.lineTo(0,.7*e),t.lineTo(.2*i,.5*e),t.lineTo(0,.3*e),t.lineTo(.7*i,.3*e),t.lineTo(.7*i,0),vh(t),(i=t.o).B=new ct(.2,.3),e=Pi(.7,1,1,.5,.7,.7,1,.7,Nn.L()),i.C=new ct(e.x,e.y),Nn.v(e),Nn.q(t),i},MessageToUser:"SquareArrow",SquareArrow:function(t,i,e){return gh(t=Nn.s(),+i,.5*e,!0),t.lineTo(.7*i,+e),t.lineTo(0,+e),t.lineTo(0,0),t.lineTo(.7*i,0),vh(t),(i=t.o).B=P,i.C=new ct(.7,1),Nn.q(t),i},Cone1:function(t,i,e){var n=.5*Vt,o=.1*Vt;return gh(t=Nn.s(),0,.9*e,!0),t.lineTo(.5*i,0),t.lineTo(+i,.9*e),mh(t,+i,(.9+o)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0,(.9+o)*e,0,.9*e),vh(t),(i=t.o).B=new ct(.25,.5),i.C=new ct(.75,.97),Nn.q(t),i},Cone2:function(t,i,e){return gh(t=Nn.s(),0,.9*e,!0),mh(t,(1-.85/.9)*i,+e,.85/.9*i,+e,+i,.9*e),t.lineTo(.5*i,0),t.lineTo(0,.9*e),vh(t),gh(t,0,.9*e,!1),mh(t,(1-.85/.9)*i,.8*e,.85/.9*i,.8*e,+i,.9*e),t.Ya(!1),(i=t.o).B=new ct(.25,.5),i.C=new ct(.75,.82),Nn.q(t),i},Cube1:function(t,i,e){return gh(t=Nn.s(),.5*i,+e,!0),t.lineTo(+i,.85*e),t.lineTo(+i,.15*e),t.lineTo(.5*i,0*e),t.lineTo(0*i,.15*e),t.lineTo(0*i,.85*e),vh(t),gh(t,.5*i,+e,!1),t.lineTo(.5*i,.3*e),t.lineTo(0,.15*e),t.moveTo(.5*i,.3*e),t.lineTo(+i,.15*e),t.Ya(!1),(i=t.o).B=new ct(0,.3),i.C=new ct(.5,.85),Nn.q(t),i},Cube2:function(t,i,e){return gh(t=Nn.s(),0,.3*e,!0),t.lineTo(0*i,+e),t.lineTo(.7*i,e),t.lineTo(+i,.7*e),t.lineTo(+i,0*e),t.lineTo(.3*i,0*e),vh(t),gh(t,0,.3*e,!1),t.lineTo(.7*i,.3*e),t.lineTo(+i,0*e),t.moveTo(.7*i,.3*e),t.lineTo(.7*i,+e),t.Ya(!1),(i=t.o).B=new ct(0,.3),i.C=new ct(.7,1),Nn.q(t),i},MagneticData:"Cylinder1",Cylinder1:function(t,i,e){var n=.5*Vt,o=.1*Vt;return gh(t=Nn.s(),0,.1*e,!0),mh(t,0,(.1-o)*e,(.5-n)*i,0,.5*i,0),mh(t,(.5+n)*i,0,+i,(.1-o)*e,+i,.1*e),t.lineTo(i,.9*e),mh(t,+i,(.9+o)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0,(.9+o)*e,0,.9*e),t.lineTo(0,.1*e),gh(t,0,.1*e,!1),mh(t,0,(.1+o)*e,(.5-n)*i,.2*e,.5*i,.2*e),mh(t,(.5+n)*i,.2*e,+i,(.1+o)*e,+i,.1*e),t.Ya(!1),(i=t.o).B=new ct(0,.2),i.C=new ct(1,.9),Nn.q(t),i},Cylinder2:function(t,i,e){var n=.5*Vt,o=.1*Vt;return gh(t=Nn.s(),0,.9*e,!0),t.lineTo(0,.1*e),mh(t,0,(.1-o)*e,(.5-n)*i,0,.5*i,0),mh(t,(.5+n)*i,0,+i,(.1-o)*e,+i,.1*e),t.lineTo(+i,.9*e),mh(t,+i,(.9+o)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0,(.9+o)*e,0,.9*e),gh(t,0,.9*e,!1),mh(t,0,(.9-o)*e,(.5-n)*i,.8*e,.5*i,.8*e),mh(t,(.5+n)*i,.8*e,+i,(.9-o)*e,+i,.9*e),t.Ya(!1),(i=t.o).B=new ct(0,.1),i.C=new ct(1,.8),Nn.q(t),i},Cylinder3:function(t,i,e){var n=.1*Vt,o=.5*Vt;return gh(t=Nn.s(),.1*i,0,!0),t.lineTo(.9*i,0),mh(t,(.9+n)*i,0,+i,(.5-o)*e,+i,.5*e),mh(t,+i,(.5+o)*e,(.9+n)*i,+e,.9*i,+e),t.lineTo(.1*i,+e),mh(t,(.1-n)*i,+e,0,(.5+o)*e,0,.5*e),mh(t,0,(.5-o)*e,(.1-n)*i,0,.1*i,0),gh(t,.1*i,0,!1),mh(t,(.1+n)*i,0,.2*i,(.5-o)*e,.2*i,.5*e),mh(t,.2*i,(.5+o)*e,(.1+n)*i,+e,.1*i,+e),t.Ya(!1),(i=t.o).B=new ct(.2,0),i.C=new ct(.9,1),Nn.q(t),i},DirectData:"Cylinder4",Cylinder4:function(t,i,e){var n=.1*Vt,o=.5*Vt;return gh(t=Nn.s(),.9*i,0,!0),mh(t,(.9+n)*i,0,+i,(.5-o)*e,+i,.5*e),mh(t,+i,(.5+o)*e,(.9+n)*i,+e,.9*i,+e),t.lineTo(.1*i,+e),mh(t,(.1-n)*i,+e,0,(.5+o)*e,0,.5*e),mh(t,0,(.5-o)*e,(.1-n)*i,0,.1*i,0),t.lineTo(.9*i,0),gh(t,.9*i,0,!1),mh(t,(.9-n)*i,0,.8*i,(.5-o)*e,.8*i,.5*e),mh(t,.8*i,(.5+o)*e,(.9-n)*i,+e,.9*i,+e),t.Ya(!1),(i=t.o).B=new ct(.1,0),i.C=new ct(.8,1),Nn.q(t),i},Prism1:function(t,i,e){return gh(t=Nn.s(),.25*i,.25*e,!0),t.lineTo(.75*i,0),t.lineTo(i,.5*e),t.lineTo(.5*i,e),t.lineTo(0,e),vh(t),gh(t,.25*i,.25*e,!1),t.lineTo(.5*i,e),t.Ya(!1),(i=t.o).B=new ct(.408,.172),i.C=new ct(.833,.662),Nn.q(t),i},Prism2:function(t,i,e){return gh(t=Nn.s(),0,.25*e,!0),t.lineTo(.75*i,0),t.lineTo(+i,.25*e),t.lineTo(.75*i,.75*e),t.lineTo(0,+e),vh(t),gh(t,0,e,!1),t.lineTo(.25*i,.5*e),t.lineTo(i,.25*e),t.moveTo(0,.25*e),t.lineTo(.25*i,.5*e),t.Ya(!1),(i=t.o).B=new ct(.25,.5),i.C=new ct(.75,.75),Nn.q(t),i},Pyramid1:function(t,i,e){return gh(t=Nn.s(),.5*i,0,!0),t.lineTo(i,.75*e),t.lineTo(.5*i,+e),t.lineTo(0,.75*e),vh(t),gh(t,.5*i,0,!1),t.lineTo(.5*i,+e),t.Ya(!1),(i=t.o).B=new ct(.25,.367),i.C=new ct(.75,.875),Nn.q(t),i},Pyramid2:function(t,i,e){return gh(t=Nn.s(),.5*i,0,!0),t.lineTo(i,.85*e),t.lineTo(.5*i,+e),t.lineTo(0,.85*e),vh(t),gh(t,.5*i,0,!1),t.lineTo(.5*i,.7*e),t.lineTo(0,.85*e),t.moveTo(.5*i,.7*e),t.lineTo(+i,.85*e),t.Ya(!1),(i=t.o).B=new ct(.25,.367),i.C=new ct(.75,.875),Nn.q(t),i},Actor:function(t,i,e){var n=.2*Vt,o=.1*Vt;return gh(t=Nn.s(),.5*i,.2*e,!0),mh(t,(.5-n)*i,.2*e,.3*i,(.1+o)*e,.3*i,.1*e),mh(t,.3*i,(.1-o)*e,(.5-n)*i,0*e,.5*i,0*e),mh(t,(.5+n)*i,0*e,.7*i,(.1-o)*e,.7*i,.1*e),mh(t,.7*i,(.1+o)*e,(.5+n)*i,.2*e,.5*i,.2*e),o=.05*Vt,gh(t,.5*i,.2*e,!0),t.lineTo(.95*i,.2*e),mh(t,(.95+o)*i,.2*e,+i,(.25-o)*e,+i,.25*e),t.lineTo(+i,.6*e),t.lineTo(.85*i,.6*e),t.lineTo(.85*i,.35*e),mh(t,.85*i,(.35-(o=.025*Vt))*e,(.825+o)*i,(.35-.025)*e,.825*i,(.35-.025)*e),mh(t,(.825-o)*i,(.35-.025)*e,(.825-.025)*i,(.35-o)*e,(.825-.025)*i,.35*e),t.lineTo(.8*i,+e),t.lineTo(.55*i,+e),t.lineTo(.55*i,.7*e),mh(t,.55*i,(.7-(o=.05*Vt))*e,(.5+o)*i,(.7-.05)*e,.5*i,(.7-.05)*e),mh(t,(.5-o)*i,(.7-.05)*e,.45*i,(.7-o)*e,.45*i,.7*e),t.lineTo(.45*i,+e),t.lineTo(.2*i,+e),t.lineTo(.2*i,.35*e),mh(t,(.175+.025)*i,(.35-(o=.025*Vt))*e,(.175+o)*i,(.35-.025)*e,.175*i,(.35-.025)*e),mh(t,(.175-o)*i,(.35-.025)*e,.15*i,(.35-o)*e,.15*i,.35*e),t.lineTo(.15*i,.6*e),t.lineTo(0*i,.6*e),t.lineTo(0*i,.25*e),mh(t,0*i,(.25-(o=.05*Vt))*e,(.05-o)*i,.2*e,.05*i,.2*e),t.lineTo(.5*i,.2*e),(i=t.o).B=new ct(.2,.2),i.C=new ct(.8,.65),Nn.q(t),i},Card:function(t,i,e){return gh(t=Nn.s(),+i,0*e,!0),t.lineTo(+i,+e),t.lineTo(0*i,+e),t.lineTo(0*i,.2*e),t.lineTo(.2*i,0*e),vh(t),(i=t.o).B=new ct(0,.2),i.C=C,Nn.q(t),i},Collate:function(t,i,e){return gh(t=Nn.s(),.5*i,.5*e,!0),t.lineTo(0,0),t.lineTo(+i,0),t.lineTo(.5*i,.5*e),gh(t,.5*i,.5*e,!0),t.lineTo(+i,+e),t.lineTo(0,+e),t.lineTo(.5*i,.5*e),(i=t.o).B=new ct(.25,0),i.C=new ct(.75,.25),Nn.q(t),i},CreateRequest:function(t,i,e){t=t?t.Ac:NaN,isNaN(t)&&(t=.1);var n=Nn.s();return gh(n,0,0,!0),n.lineTo(+i,0),n.lineTo(+i,+e),n.lineTo(0,+e),vh(n),gh(n,0,t*e,!1),n.lineTo(+i,t*e),n.moveTo(0,(1-t)*e),n.lineTo(+i,(1-t)*e),n.Ya(!1),(i=n.o).B=new ct(0,t),i.C=new ct(1,1-t),Nn.q(n),i},Database:function(t,i,e){t=Nn.s();var n=.5*Vt,o=.1*Vt;return gh(t,+i,.1*e,!0),t.lineTo(+i,.9*e),mh(t,+i,(.9+o)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0,(.9+o)*e,0,.9*e),t.lineTo(0,.1*e),mh(t,0,(.1-o)*e,(.5-n)*i,0,.5*i,0),mh(t,(.5+n)*i,0,+i,(.1-o)*e,+i,.1*e),gh(t,+i,.1*e,!1),mh(t,+i,(.1+o)*e,(.5+n)*i,.2*e,.5*i,.2*e),mh(t,(.5-n)*i,.2*e,0,(.1+o)*e,0,.1*e),t.moveTo(+i,.2*e),mh(t,+i,(.2+o)*e,(.5+n)*i,.3*e,.5*i,.3*e),mh(t,(.5-n)*i,.3*e,0,(.2+o)*e,0,.2*e),t.moveTo(+i,.3*e),mh(t,+i,(.3+o)*e,(.5+n)*i,.4*e,.5*i,.4*e),mh(t,(.5-n)*i,.4*e,0,(.3+o)*e,0,.3*e),t.Ya(!1),(i=t.o).B=new ct(0,.4),i.C=new ct(1,.9),Nn.q(t),i},StoredData:"DataStorage",DataStorage:function(t,i,e){return gh(t=Nn.s(),0,0,!0),t.lineTo(.75*i,0),mh(t,+i,0,+i,+e,.75*i,+e),t.lineTo(0,+e),mh(t,.25*i,.9*e,.25*i,.1*e,0,0),vh(t),(i=t.o).B=new ct(.226,0),i.C=new ct(.81,1),Nn.q(t),i},DiskStorage:function(t,i,e){t=Nn.s();var n=.5*Vt,o=.1*Vt;return gh(t,+i,.1*e,!0),t.lineTo(+i,.9*e),mh(t,+i,(.9+o)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0,(.9+o)*e,0,.9*e),t.lineTo(0,.1*e),mh(t,0,(.1-o)*e,(.5-n)*i,0,.5*i,0),mh(t,(.5+n)*i,0,+i,(.1-o)*e,+i,.1*e),gh(t,+i,.1*e,!1),mh(t,+i,(.1+o)*e,(.5+n)*i,.2*e,.5*i,.2*e),mh(t,(.5-n)*i,.2*e,0,(.1+o)*e,0,.1*e),t.moveTo(+i,.2*e),mh(t,+i,(.2+o)*e,(.5+n)*i,.3*e,.5*i,.3*e),mh(t,(.5-n)*i,.3*e,0,(.2+o)*e,0,.2*e),t.Ya(!1),(i=t.o).B=new ct(0,.3),i.C=new ct(1,.9),Nn.q(t),i},Display:function(t,i,e){return gh(t=Nn.s(),.25*i,0,!0),t.lineTo(.75*i,0),mh(t,+i,0,+i,+e,.75*i,+e),t.lineTo(.25*i,+e),t.lineTo(0,.5*e),vh(t),(i=t.o).B=new ct(.25,0),i.C=new ct(.75,1),Nn.q(t),i},DividedEvent:function(t,i,e){t=t?t.Ac:NaN,isNaN(t)?t=.2:t<.15&&(t=.15);var n=Nn.s(),o=.2*Vt;return gh(n,0,.2*e,!0),mh(n,0,(.2-o)*e,(.2-o)*i,0,.2*i,0),n.lineTo(.8*i,0),mh(n,(.8+o)*i,0,+i,(.2-o)*e,+i,.2*e),n.lineTo(+i,.8*e),mh(n,+i,(.8+o)*e,(.8+o)*i,+e,.8*i,+e),n.lineTo(.2*i,+e),mh(n,(.2-o)*i,+e,0,(.8+o)*e,0,.8*e),n.lineTo(0,.2*e),gh(n,0,t*e,!1),n.lineTo(+i,t*e),n.Ya(!1),(i=n.o).B=new ct(0,t),i.C=new ct(1,1-t),Nn.q(n),i},DividedProcess:function(t,i,e){t=t?t.Ac:NaN,(isNaN(t)||t<.1)&&(t=.1);var n=Nn.s();return gh(n,0,0,!0),n.lineTo(+i,0),n.lineTo(+i,+e),n.lineTo(0,+e),vh(n),gh(n,0,t*e,!1),n.lineTo(+i,t*e),n.Ya(!1),(i=n.o).B=new ct(0,t),i.C=C,Nn.q(n),i},Document:function(t,i,e){return e/=.8,gh(t=Nn.s(),0,.7*e,!0),t.lineTo(0,0),t.lineTo(+i,0),t.lineTo(+i,.7*e),mh(t,.5*i,.4*e,.5*i,+e,0,.7*e),vh(t),(i=t.o).B=P,i.C=new ct(1,.6),Nn.q(t),i},ExternalOrganization:function(t,i,e){t=t?t.Ac:NaN,(isNaN(t)||t<.2)&&(t=.2);var n=Nn.s();return gh(n,0,0,!0),n.lineTo(+i,0),n.lineTo(+i,+e),n.lineTo(0,+e),vh(n),gh(n,t*i,0,!1),n.lineTo(0,t*e),n.moveTo(+i,t*e),n.lineTo((1-t)*i,0),n.moveTo(0,(1-t)*e),n.lineTo(t*i,+e),n.moveTo((1-t)*i,+e),n.lineTo(+i,(1-t)*e),n.Ya(!1),(i=n.o).B=new ct(t/2,t/2),i.C=new ct(1-t/2,1-t/2),Nn.q(n),i},ExternalProcess:function(t,i,e){return gh(t=Nn.s(),.5*i,0,!0),t.lineTo(+i,.5*e),t.lineTo(.5*i,+e),t.lineTo(0,.5*e),vh(t),gh(t,.1*i,.4*e,!1),t.lineTo(.1*i,.6*e),t.moveTo(.9*i,.6*e),t.lineTo(.9*i,.4*e),t.moveTo(.6*i,.1*e),t.lineTo(.4*i,.1*e),t.moveTo(.4*i,.9*e),t.lineTo(.6*i,.9*e),t.Ya(!1),(i=t.o).B=new ct(.25,.25),i.C=new ct(.75,.75),Nn.q(t),i},File:function(t,i,e){return gh(t=Nn.s(),0,0,!0),t.lineTo(.75*i,0),t.lineTo(+i,.25*e),t.lineTo(+i,+e),t.lineTo(0,+e),vh(t),gh(t,.75*i,0,!1),t.lineTo(.75*i,.25*e),t.lineTo(+i,.25*e),t.Ya(!1),(i=t.o).B=new ct(0,.25),i.C=C,Nn.q(t),i},Interrupt:function(t,i,e){return gh(t=Nn.s(),+i,.5*e,!0),t.lineTo(0,+e),t.lineTo(0,0),t.lineTo(+i,.5*e),gh(t,+i,.5*e,!1),t.lineTo(+i,+e),gh(t,+i,.5*e,!1),t.lineTo(+i,0),(i=t.o).B=new ct(0,.25),i.C=new ct(.5,.75),Nn.q(t),i},InternalStorage:function(t,i,e){var n=t?t.Ac:NaN;t=t?t.Mt:NaN,isNaN(n)&&(n=.1),isNaN(t)&&(t=.1);var o=Nn.s();return gh(o,0,0,!0),o.lineTo(+i,0),o.lineTo(+i,+e),o.lineTo(0,+e),vh(o),gh(o,n*i,0,!1),o.lineTo(n*i,+e),o.moveTo(0,t*e),o.lineTo(+i,t*e),o.Ya(!1),(i=o.o).B=new ct(n,t),i.C=C,Nn.q(o),i},Junction:function(t,i,e){t=Nn.s();var n=1/Math.SQRT2,o=(1-1/Math.SQRT2)/2,r=.5*Vt;return gh(t,+i,.5*e,!0),mh(t,+i,(.5+r)*e,(.5+r)*i,+e,.5*i,+e),mh(t,(.5-r)*i,+e,0,(.5+r)*e,0,.5*e),mh(t,0,(.5-r)*e,(.5-r)*i,0,.5*i,0),mh(t,(.5+r)*i,0,+i,(.5-r)*e,+i,.5*e),gh(t,(o+n)*i,(o+n)*e,!1),t.lineTo(o*i,o*e),t.moveTo(o*i,(o+n)*e),t.lineTo((o+n)*i,o*e),t.Ya(!1),(i=t.o).Md=ms,Nn.q(t),i},LinedDocument:function(t,i,e){return e/=.8,gh(t=Nn.s(),0,.7*e,!0),t.lineTo(0,0),t.lineTo(+i,0),t.lineTo(+i,.7*e),mh(t,.5*i,.4*e,.5*i,+e,0,.7*e),vh(t),gh(t,.1*i,0,!1),t.lineTo(.1*i,.75*e),t.Ya(!1),(i=t.o).B=new ct(.1,0),i.C=new ct(1,.6),Nn.q(t),i},LoopLimit:function(t,i,e){return gh(t=Nn.s(),0,+e,!0),t.lineTo(0,.25*e),t.lineTo(.25*i,0),t.lineTo(.75*i,0),t.lineTo(+i,.25*e),t.lineTo(+i,+e),vh(t),(i=t.o).B=new ct(0,.25),i.C=C,Nn.q(t),i},SequentialData:"MagneticTape",MagneticTape:function(t,i,e){t=Nn.s();var n=.5*Vt;return gh(t,.5*i,+e,!0),mh(t,(.5-n)*i,+e,0,(.5+n)*e,0,.5*e),mh(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),mh(t,(.5+n)*i,0,+i,(.5-n)*e,+i,.5*e),mh(t,+i,(.5+n)*e,(.5+n)*i,.9*e,.6*i,.9*e),t.lineTo(+i,.9*e),t.lineTo(+i,+e),t.lineTo(.5*i,+e),(i=t.o).B=new ct(.15,.15),i.C=new ct(.85,.8),Nn.q(t),i},ManualInput:function(t,i,e){return gh(t=Nn.s(),+i,0,!0),t.lineTo(+i,+e),t.lineTo(0,+e),t.lineTo(0,.25*e),vh(t),(i=t.o).B=new ct(0,.25),i.C=C,Nn.q(t),i},MessageFromUser:function(t,i,e){t=t?t.Ac:NaN,isNaN(t)&&(t=.7);var n=Nn.s();return gh(n,0,0,!0),n.lineTo(+i,0),n.lineTo(t*i,.5*e),n.lineTo(+i,+e),n.lineTo(0,+e),vh(n),(i=n.o).B=P,i.C=new ct(t,1),Nn.q(n),i},MicroformProcessing:function(t,i,e){t=t?t.Ac:NaN,isNaN(t)&&(t=.25);var n=Nn.s();return gh(n,0,0,!0),n.lineTo(.5*i,t*e),n.lineTo(+i,0),n.lineTo(+i,+e),n.lineTo(.5*i,(1-t)*e),n.lineTo(0,+e),vh(n),(i=n.o).B=new ct(0,t),i.C=new ct(1,1-t),Nn.q(n),i},MicroformRecording:function(t,i,e){return gh(t=Nn.s(),0,0,!0),t.lineTo(.75*i,.25*e),t.lineTo(+i,.15*e),t.lineTo(+i,.85*e),t.lineTo(.75*i,.75*e),t.lineTo(0,+e),vh(t),(i=t.o).B=new ct(0,.25),i.C=new ct(1,.75),Nn.q(t),i},MultiDocument:function(t,i,e){return e/=.8,gh(t=Nn.s(),i,0,!0),t.lineTo(i,.5*e),mh(t,.96*i,.47*e,.93*i,.45*e,.9*i,.44*e),t.lineTo(.9*i,.6*e),mh(t,.86*i,.57*e,.83*i,.55*e,.8*i,.54*e),t.lineTo(.8*i,.7*e),mh(t,.4*i,.4*e,.4*i,+e,0,.7*e),t.lineTo(0,.2*e),t.lineTo(.1*i,.2*e),t.lineTo(.1*i,.1*e),t.lineTo(.2*i,.1*e),t.lineTo(.2*i,0),vh(t),gh(t,.1*i,.2*e,!1),t.lineTo(.8*i,.2*e),t.lineTo(.8*i,.54*e),t.moveTo(.2*i,.1*e),t.lineTo(.9*i,.1*e),t.lineTo(.9*i,.44*e),t.Ya(!1),(i=t.o).B=new ct(0,.25),i.C=new ct(.8,.77),Nn.q(t),i},MultiProcess:function(t,i,e){return gh(t=Nn.s(),.1*i,.1*e,!0),t.lineTo(.2*i,.1*e),t.lineTo(.2*i,0),t.lineTo(+i,0),t.lineTo(+i,.8*e),t.lineTo(.9*i,.8*e),t.lineTo(.9*i,.9*e),t.lineTo(.8*i,.9*e),t.lineTo(.8*i,+e),t.lineTo(0,+e),t.lineTo(0,.2*e),t.lineTo(.1*i,.2*e),vh(t),gh(t,.2*i,.1*e,!1),t.lineTo(.9*i,.1*e),t.lineTo(.9*i,.8*e),t.moveTo(.1*i,.2*e),t.lineTo(.8*i,.2*e),t.lineTo(.8*i,.9*e),t.Ya(!1),(i=t.o).B=new ct(0,.2),i.C=new ct(.8,1),Nn.q(t),i},OfflineStorage:function(t,i,e){t=t?t.Ac:NaN,isNaN(t)&&(t=.1);var n=1-t,o=Nn.s();return gh(o,0,0,!0),o.lineTo(+i,0),o.lineTo(.5*i,+e),vh(o),gh(o,.5*t*i,t*e,!1),o.lineTo((1-.5*t)*i,t*e),o.Ya(!1),(i=o.o).B=new ct(n/4+.5*t,t),i.C=new ct(3*n/4+.5*t,t+.5*n),Nn.q(o),i},OffPageConnector:function(t,i,e){return gh(t=Nn.s(),0,0,!0),t.lineTo(.75*i,0),t.lineTo(+i,.5*e),t.lineTo(.75*i,+e),t.lineTo(0,+e),vh(t),(i=t.o).B=P,i.C=new ct(.75,1),Nn.q(t),i},Or:function(t,i,e){t=Nn.s();var n=.5*Vt;return gh(t,+i,.5*e,!0),mh(t,+i,(.5+n)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0,(.5+n)*e,0,.5*e),mh(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),mh(t,(.5+n)*i,0,+i,(.5-n)*e,+i,.5*e),gh(t,+i,.5*e,!1),t.lineTo(0,.5*e),t.moveTo(.5*i,+e),t.lineTo(.5*i,0),t.Ya(!1),(i=t.o).Md=ms,Nn.q(t),i},PaperTape:function(t,i,e){return e/=.8,gh(t=Nn.s(),0,.7*e,!0),t.lineTo(0,.3*e),mh(t,.5*i,.6*e,.5*i,0,+i,.3*e),t.lineTo(+i,.7*e),mh(t,.5*i,.4*e,.5*i,+e,0,.7*e),vh(t),(i=t.o).B=new ct(0,.49),i.C=new ct(1,.75),Nn.q(t),i},PrimitiveFromCall:function(t,i,e){var n=t?t.Ac:NaN;t=t?t.Mt:NaN,isNaN(n)&&(n=.1),isNaN(t)&&(t=.3);var o=Nn.s();return gh(o,0,0,!0),o.lineTo(+i,0),o.lineTo((1-t)*i,.5*e),o.lineTo(+i,+e),o.lineTo(0,+e),vh(o),(i=o.o).B=new ct(n,0),i.C=new ct(1-t,1),Nn.q(o),i},PrimitiveToCall:function(t,i,e){var n=t?t.Ac:NaN;t=t?t.Mt:NaN,isNaN(n)&&(n=.1),isNaN(t)&&(t=.3);var o=Nn.s();return gh(o,0,0,!0),o.lineTo((1-t)*i,0),o.lineTo(+i,.5*e),o.lineTo((1-t)*i,+e),o.lineTo(0,+e),vh(o),(i=o.o).B=new ct(n,0),i.C=new ct(1-t,1),Nn.q(o),i},Subroutine:"Procedure",Procedure:function(t,i,e){t=t?t.Ac:NaN,isNaN(t)&&(t=.1);var n=Nn.s();return gh(n,0,0,!0),n.lineTo(+i,0),n.lineTo(+i,+e),n.lineTo(0,+e),vh(n),gh(n,(1-t)*i,0,!1),n.lineTo((1-t)*i,+e),n.moveTo(t*i,0),n.lineTo(t*i,+e),n.Ya(!1),(i=n.o).B=new ct(t,0),i.C=new ct(1-t,1),Nn.q(n),i},Process:function(t,i,e){t=t?t.Ac:NaN,isNaN(t)&&(t=.1);var n=Nn.s();return gh(n,0,0,!0),n.lineTo(+i,0),n.lineTo(+i,+e),n.lineTo(0,+e),vh(n),gh(n,t*i,0,!1),n.lineTo(t*i,+e),n.Ya(!1),(i=n.o).B=new ct(t,0),i.C=C,Nn.q(n),i},Sort:function(t,i,e){return gh(t=Nn.s(),.5*i,0,!0),t.lineTo(+i,.5*e),t.lineTo(.5*i,+e),t.lineTo(0,.5*e),vh(t),gh(t,0,.5*e,!1),t.lineTo(+i,.5*e),t.Ya(!1),(i=t.o).B=new ct(.25,.25),i.C=new ct(.75,.5),Nn.q(t),i},Start:function(t,i,e){return gh(t=Nn.s(),.25*i,0,!0),gh(t,.25*i,0,!0),t.arcTo(270,180,.75*i,.5*e,.25*i,.5*e),t.arcTo(90,180,.25*i,.5*e,.25*i,.5*e),gh(t,.25*i,0,!1),t.lineTo(.25*i,+e),t.moveTo(.75*i,0),t.lineTo(.75*i,+e),t.Ya(!1),(i=t.o).B=new ct(.25,0),i.C=new ct(.75,1),Nn.q(t),i},Terminator:function(t,i,e){return gh(t=Nn.s(),.25*i,0,!0),t.arcTo(270,180,.75*i,.5*e,.25*i,.5*e),t.arcTo(90,180,.25*i,.5*e,.25*i,.5*e),(i=t.o).B=new ct(.23,0),i.C=new ct(.77,1),Nn.q(t),i},TransmittalTape:function(t,i,e){t=t?t.Ac:NaN,isNaN(t)&&(t=.1);var n=Nn.s();return gh(n,0,0,!0),n.lineTo(+i,0),n.lineTo(+i,+e),n.lineTo(.75*i,(1-t)*e),n.lineTo(0,(1-t)*e),vh(n),(i=n.o).B=P,i.C=new ct(1,1-t),Nn.q(n),i},AndGate:function(t,i,e){t=Nn.s();var n=.5*Vt;return gh(t,0,0,!0),t.lineTo(.5*i,0),mh(t,(.5+n)*i,0,+i,(.5-n)*e,+i,.5*e),mh(t,+i,(.5+n)*e,(.5+n)*i,+e,.5*i,+e),t.lineTo(0,+e),vh(t),(i=t.o).B=P,i.C=new ct(.55,1),Nn.q(t),i},Buffer:function(t,i,e){return gh(t=Nn.s(),0,0,!0),t.lineTo(+i,.5*e),t.lineTo(0,+e),vh(t),(i=t.o).B=new ct(0,.25),i.C=new ct(.5,.75),Nn.q(t),i},Clock:function(t,i,e){t=Nn.s();var n=.5*Vt;return gh(t,+i,.5*e,!0),mh(t,+i,(.5+n)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0,(.5+n)*e,0,.5*e),mh(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),mh(t,(.5+n)*i,0,+i,(.5-n)*e,+i,.5*e),gh(t,+i,.5*e,!1),t.lineTo(+i,.5*e),gh(t,.8*i,.75*e,!1),t.lineTo(.8*i,.25*e),t.lineTo(.6*i,.25*e),t.lineTo(.6*i,.75*e),t.lineTo(.4*i,.75*e),t.lineTo(.4*i,.25*e),t.lineTo(.2*i,.25*e),t.lineTo(.2*i,.75*e),t.Ya(!1),(i=t.o).Md=ms,Nn.q(t),i},Ground:function(t,i,e){return gh(t=Nn.s(),.5*i,0,!1),t.lineTo(.5*i,.4*e),t.moveTo(.2*i,.6*e),t.lineTo(.8*i,.6*e),t.moveTo(.3*i,.8*e),t.lineTo(.7*i,.8*e),t.moveTo(.4*i,+e),t.lineTo(.6*i,+e),i=t.o,Nn.q(t),i},Inverter:function(t,i,e){t=Nn.s();var n=.1*Vt;return gh(t,.8*i,.5*e,!0),t.lineTo(0,+e),t.lineTo(0,0),t.lineTo(.8*i,.5*e),gh(t,+i,.5*e,!0),mh(t,+i,(.5+n)*e,(.9+n)*i,.6*e,.9*i,.6*e),mh(t,(.9-n)*i,.6*e,.8*i,(.5+n)*e,.8*i,.5*e),mh(t,.8*i,(.5-n)*e,(.9-n)*i,.4*e,.9*i,.4*e),mh(t,(.9+n)*i,.4*e,+i,(.5-n)*e,+i,.5*e),(i=t.o).B=new ct(0,.25),i.C=new ct(.4,.75),Nn.q(t),i},NandGate:function(t,i,e){t=Nn.s();var n=.5*Vt,o=.4*Vt,r=.1*Vt;return gh(t,.8*i,.5*e,!0),mh(t,.8*i,(.5+o)*e,(.4+n)*i,+e,.4*i,+e),t.lineTo(0,+e),t.lineTo(0,0),t.lineTo(.4*i,0),mh(t,(.4+n)*i,0,.8*i,(.5-o)*e,.8*i,.5*e),gh(t,+i,.5*e,!0),mh(t,+i,(.5+r)*e,(.9+r)*i,.6*e,.9*i,.6*e),mh(t,(.9-r)*i,.6*e,.8*i,(.5+r)*e,.8*i,.5*e),mh(t,.8*i,(.5-r)*e,(.9-r)*i,.4*e,.9*i,.4*e),mh(t,(.9+r)*i,.4*e,+i,(.5-r)*e,+i,.5*e),(i=t.o).B=new ct(0,.05),i.C=new ct(.55,.95),Nn.q(t),i},NorGate:function(t,i,e){t=Nn.s();var n=.5*Vt;return gh(t,.8*i,.5*e,!0),mh(t,.7*i,(.5+n)*e,(0+n)*i,+e,0,+e),mh(t,.25*i,.75*e,.25*i,.25*e,0,0),mh(t,(0+n)*i,0*e,.7*i,(.5-n)*e,.8*i,.5*e),n=.1*Vt,gh(t,.8*i,.5*e,!0),mh(t,.8*i,(.5-n)*e,(.9-n)*i,.4*e,.9*i,.4*e),mh(t,(.9+n)*i,.4*e,+i,(.5-n)*e,+i,.5*e),mh(t,+i,(.5+n)*e,(.9+n)*i,.6*e,.9*i,.6*e),mh(t,(.9-n)*i,.6*e,.8*i,(.5+n)*e,.8*i,.5*e),(i=t.o).B=new ct(.2,.25),i.C=new ct(.6,.75),Nn.q(t),i},OrGate:function(t,i,e){t=Nn.s();var n=.5*Vt;return gh(t,0,0,!0),mh(t,(0+n+n)*i,0*e,.8*i,(.5-n)*e,+i,.5*e),mh(t,.8*i,(.5+n)*e,(0+n+n)*i,+e,0,+e),mh(t,.25*i,.75*e,.25*i,.25*e,0,0),vh(t),(i=t.o).B=new ct(.2,.25),i.C=new ct(.75,.75),Nn.q(t),i},XnorGate:function(t,i,e){t=Nn.s();var n=.5*Vt;return gh(t,.1*i,0,!1),mh(t,.35*i,.25*e,.35*i,.75*e,.1*i,+e),gh(t,.8*i,.5*e,!0),mh(t,.7*i,(.5+n)*e,(.2+n)*i,+e,.2*i,+e),mh(t,.45*i,.75*e,.45*i,.25*e,.2*i,0),mh(t,(.2+n)*i,0*e,.7*i,(.5-n)*e,.8*i,.5*e),n=.1*Vt,gh(t,.8*i,.5*e,!0),mh(t,.8*i,(.5-n)*e,(.9-n)*i,.4*e,.9*i,.4*e),mh(t,(.9+n)*i,.4*e,+i,(.5-n)*e,+i,.5*e),mh(t,+i,(.5+n)*e,(.9+n)*i,.6*e,.9*i,.6*e),mh(t,(.9-n)*i,.6*e,.8*i,(.5+n)*e,.8*i,.5*e),(i=t.o).B=new ct(.4,.25),i.C=new ct(.65,.75),Nn.q(t),i},XorGate:function(t,i,e){t=Nn.s();var n=.5*Vt;return gh(t,.1*i,0,!1),mh(t,.35*i,.25*e,.35*i,.75*e,.1*i,+e),gh(t,.2*i,0,!0),mh(t,(.2+n)*i,0*e,.9*i,(.5-n)*e,+i,.5*e),mh(t,.9*i,(.5+n)*e,(.2+n)*i,+e,.2*i,+e),mh(t,.45*i,.75*e,.45*i,.25*e,.2*i,0),vh(t),(i=t.o).B=new ct(.4,.25),i.C=new ct(.8,.75),Nn.q(t),i},Capacitor:function(t,i,e){return gh(t=Nn.s(),0,0,!1),t.lineTo(0,+e),t.moveTo(+i,0),t.lineTo(+i,+e),i=t.o,Nn.q(t),i},Resistor:function(t,i,e){return gh(t=Nn.s(),0,.5*e,!1),t.lineTo(.1*i,0),t.lineTo(.2*i,+e),t.lineTo(.3*i,0),t.lineTo(.4*i,+e),t.lineTo(.5*i,0),t.lineTo(.6*i,+e),t.lineTo(.7*i,.5*e),i=t.o,Nn.q(t),i},Inductor:function(t,i,e){t=Nn.s();var n=.1*Vt;return gh(t,(.1-.5*n)*i,e,!1),mh(t,(.1-n)*i,e,0*i,0,.2*i,0),mh(t,.4*i,0,(.3+n)*i,e,.3*i,e),mh(t,(.3-n)*i,e,(.3-.1)*i,0,.4*i,0),mh(t,.6*i,0,(.5+n)*i,e,.5*i,e),mh(t,(.5-n)*i,e,.4*i,0,.6*i,0),mh(t,(.7+.1)*i,0,(.7+n)*i,e,.7*i,e),mh(t,(.7-n)*i,e,.6*i,0,(.7+.1)*i,0),mh(t,+i,0,(.9+n)*i,e,(.9+.5*n)*i,e),i=t.o,Nn.q(t),i},ACvoltageSource:function(t,i,e){t=Nn.s();var n=.5*Vt;return gh(t,0*i,.5*e,!1),mh(t,0*i,(.5-n)*e,(.5-n)*i,0*e,.5*i,0*e),mh(t,(.5+n)*i,0*e,+i,(.5-n)*e,+i,.5*e),mh(t,+i,(.5+n)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0*i,(.5+n)*e,0*i,.5*e),t.moveTo(.1*i,.5*e),mh(t,.5*i,0*e,.5*i,+e,.9*i,.5*e),(i=t.o).Md=ms,Nn.q(t),i},DCvoltageSource:function(t,i,e){return gh(t=Nn.s(),0,.75*e,!1),t.lineTo(0,.25*e),t.moveTo(+i,0),t.lineTo(+i,+e),i=t.o,Nn.q(t),i},Diode:function(t,i,e){return gh(t=Nn.s(),+i,0,!1),t.lineTo(+i,.5*e),t.lineTo(0,+e),t.lineTo(0,0),t.lineTo(+i,.5*e),t.lineTo(+i,+e),(i=t.o).B=new ct(0,.25),i.C=new ct(.5,.75),Nn.q(t),i},Wifi:function(t,i,e){var n=i,o=e;i*=.38,e*=.6,t=Nn.s();var r=.8*Vt;return gh(t,0*i+(n=(n-i)/2),1.3*e+(o=(o-e)/2),!0),mh(t,(0-r)*i+n,1.3*e+o,-.8*i+n,(.5+r)*e+o,-.8*i+n,.5*e+o),mh(t,-.8*i+n,(.5-r)*e+o,(0-r)*i+n,(.5-.8)*e+o,0*i+n,(.5-.8)*e+o),mh(t,0*i+n,(.5-.8)*e+o,(.5*r-.8)*i+n,(.5-r)*e+o,(.5*r-.8)*i+n,.5*e+o),mh(t,(.5*r-.8)*i+n,(.5+r)*e+o,0*i+n,1.3*e+o,0*i+n,1.3*e+o),vh(t),r=.4*Vt,gh(t,.2*i+n,.9*e+o,!0),mh(t,(.2-r)*i+n,.9*e+o,-.2*i+n,(.5+r)*e+o,-.2*i+n,.5*e+o),mh(t,-.2*i+n,(.5-r)*e+o,(.2-r)*i+n,(.5-.4)*e+o,.2*i+n,(.5-.4)*e+o),mh(t,.2*i+n,(.5-.4)*e+o,(.5*r-.2)*i+n,(.5-r)*e+o,(.5*r-.2)*i+n,.5*e+o),mh(t,(.5*r-.2)*i+n,(.5+r)*e+o,.2*i+n,.9*e+o,.2*i+n,.9*e+o),vh(t),r=.2*Vt,gh(t,.3*i+n,.5*e+o,!0),mh(t,.3*i+n,(.5-r)*e+o,(.5-r)*i+n,.3*e+o,.5*i+n,.3*e+o),mh(t,(.5+r)*i+n,.3*e+o,.7*i+n,(.5-r)*e+o,.7*i+n,.5*e+o),mh(t,.7*i+n,(.5+r)*e+o,(.5+r)*i+n,.7*e+o,.5*i+n,.7*e+o),mh(t,(.5-r)*i+n,.7*e+o,.3*i+n,(.5+r)*e+o,.3*i+n,.5*e+o),r=.4*Vt,gh(t,.8*i+n,(.5-.4)*e+o,!0),mh(t,(.8+r)*i+n,(.5-.4)*e+o,(.8+.4)*i+n,(.5-r)*e+o,(.8+.4)*i+n,.5*e+o),mh(t,(.8+.4)*i+n,(.5+r)*e+o,(.8+r)*i+n,.9*e+o,.8*i+n,.9*e+o),mh(t,.8*i+n,.9*e+o,(.8+.4-.5*r)*i+n,(.5+r)*e+o,(.8+.4-.5*r)*i+n,.5*e+o),mh(t,(.8+.4-.5*r)*i+n,(.5-r)*e+o,.8*i+n,(.5-.4)*e+o,.8*i+n,(.5-.4)*e+o),vh(t),r=.8*Vt,gh(t,+i+n,(.5-.8)*e+o,!0),mh(t,(1+r)*i+n,(.5-.8)*e+o,1.8*i+n,(.5-r)*e+o,1.8*i+n,.5*e+o),mh(t,1.8*i+n,(.5+r)*e+o,(1+r)*i+n,1.3*e+o,+i+n,1.3*e+o),mh(t,+i+n,1.3*e+o,(1.8-.5*r)*i+n,(.5+r)*e+o,(1.8-.5*r)*i+n,.5*e+o),mh(t,(1.8-.5*r)*i+n,(.5-r)*e+o,+i+n,(.5-.8)*e+o,+i+n,(.5-.8)*e+o),vh(t),i=t.o,Nn.q(t),i},Email:function(t,i,e){return gh(t=Nn.s(),0,0,!0),t.lineTo(+i,0),t.lineTo(+i,+e),t.lineTo(0,+e),t.lineTo(0,0),vh(t),gh(t,0,0,!1),t.lineTo(.5*i,.6*e),t.lineTo(+i,0),t.moveTo(0,+e),t.lineTo(.45*i,.54*e),t.moveTo(+i,+e),t.lineTo(.55*i,.54*e),t.Ya(!1),i=t.o,Nn.q(t),i},Ethernet:function(t,i,e){return gh(t=Nn.s(),.35*i,0,!0),t.lineTo(.65*i,0),t.lineTo(.65*i,.4*e),t.lineTo(.35*i,.4*e),t.lineTo(.35*i,0),vh(t),gh(t,.1*i,+e,!0,!0),t.lineTo(.4*i,+e),t.lineTo(.4*i,.6*e),t.lineTo(.1*i,.6*e),t.lineTo(.1*i,+e),vh(t),gh(t,.6*i,+e,!0,!0),t.lineTo(.9*i,+e),t.lineTo(.9*i,.6*e),t.lineTo(.6*i,.6*e),t.lineTo(.6*i,+e),vh(t),gh(t,0,.5*e,!1),t.lineTo(+i,.5*e),t.moveTo(.5*i,.5*e),t.lineTo(.5*i,.4*e),t.moveTo(.75*i,.5*e),t.lineTo(.75*i,.6*e),t.moveTo(.25*i,.5*e),t.lineTo(.25*i,.6*e),t.Ya(!1),i=t.o,Nn.q(t),i},Power:function(t,i,e){t=Nn.s();var n=.4*Vt,o=Nn.L(),r=Nn.L(),s=Nn.L(),a=Nn.L();vi(.5,.5-.4,.5+n,.5-.4,.9,.5-n,.9,.5,.5,o,o,r,s,a);var h=Nn.Mb(r.x,r.y);return gh(t,r.x*i,r.y*e,!0),mh(t,s.x*i,s.y*e,a.x*i,a.y*e,.9*i,.5*e),mh(t,.9*i,(.5+n)*e,(.5+n)*i,.9*e,.5*i,.9*e),mh(t,(.5-n)*i,.9*e,(.5-.4)*i,(.5+n)*e,(.5-.4)*i,.5*e),vi(.5-.4,.5,.5-.4,.5-n,.5-n,.5-.4,.5,.5-.4,.5,s,a,r,o,o),mh(t,s.x*i,s.y*e,a.x*i,a.y*e,r.x*i,r.y*e),vi(.2,.5,.2,.5-(n=.3*Vt),.5-n,.2,.5,.2,.5,s,a,r,o,o),t.lineTo(r.x*i,r.y*e),mh(t,a.x*i,a.y*e,s.x*i,s.y*e,.2*i,.5*e),mh(t,.2*i,(.5+n)*e,(.5-n)*i,.8*e,.5*i,.8*e),mh(t,(.5+n)*i,.8*e,.8*i,(.5+n)*e,.8*i,.5*e),vi(.5,.2,.5+n,.2,.8,.5-n,.8,.5,.5,o,o,r,s,a),mh(t,a.x*i,a.y*e,s.x*i,s.y*e,r.x*i,r.y*e),vh(t),gh(t,.45*i,0,!0),t.lineTo(.45*i,.5*e),t.lineTo(.55*i,.5*e),t.lineTo(.55*i,0),vh(t),Nn.v(o),Nn.v(r),Nn.v(s),Nn.v(a),Nn.v(h),(i=t.o).B=new ct(.25,.55),i.C=new ct(.75,.8),Nn.q(t),i},Fallout:function(t,i,e){t=Nn.s();var n=.5*Vt;gh(t,0*i,.5*e,!0),mh(t,0*i,(.5-n)*e,(.5-n)*i,0*e,.5*i,0*e),mh(t,(.5+n)*i,0*e,+i,(.5-n)*e,+i,.5*e),mh(t,+i,(.5+n)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0*i,(.5+n)*e,0*i,.5*e);return gh(t,.3*i,.8*e,!0,!0),t.lineTo(.5*i,.5*e),t.lineTo(.1*i,.5*e),t.lineTo(.3*i,.8*e),vh(t),gh(t,.7*i,.8*e,!0,!0),t.lineTo(.9*i,.5*e),t.lineTo(.5*i,.5*e),t.lineTo(.7*i,.8*e),vh(t),gh(t,.5*i,.5*e,!0,!0),t.lineTo(.7*i,.2*e),t.lineTo((.1+.2)*i,.2*e),t.lineTo(.5*i,.5*e),vh(t),(i=t.o).Md=ms,Nn.q(t),i},IrritationHazard:function(t,i,e){return gh(t=Nn.s(),.2*i,0*e,!0),t.lineTo(.5*i,.3*e),t.lineTo(.8*i,0*e),t.lineTo(+i,.2*e),t.lineTo(.7*i,.5*e),t.lineTo(+i,.8*e),t.lineTo(.8*i,+e),t.lineTo(.5*i,.7*e),t.lineTo(.2*i,+e),t.lineTo(0*i,.8*e),t.lineTo(.3*i,.5*e),t.lineTo(0*i,.2*e),vh(t),(i=t.o).B=new ct(.3,.3),i.C=new ct(.7,.7),Nn.q(t),i},ElectricalHazard:function(t,i,e){return gh(t=Nn.s(),.37*i,0*e,!0),t.lineTo(.5*i,.11*e),t.lineTo(.77*i,.04*e),t.lineTo(.33*i,.49*e),t.lineTo(+i,.37*e),t.lineTo(.63*i,.86*e),t.lineTo(.77*i,.91*e),t.lineTo(.34*i,+e),t.lineTo(.34*i,.78*e),t.lineTo(.44*i,.8*e),t.lineTo(.65*i,.56*e),t.lineTo(0*i,.68*e),vh(t),i=t.o,Nn.q(t),i},FireHazard:function(t,i,e){return gh(t=Nn.s(),.1*i,+e,!0),mh(t,-.25*i,.63*e,.45*i,.44*e,.29*i,0*e),mh(t,.48*i,.17*e,.54*i,.35*e,.51*i,.42*e),mh(t,.59*i,.29*e,.58*i,.28*e,.59*i,.18*e),mh(t,.8*i,.34*e,.88*i,.43*e,.75*i,.6*e),mh(t,.87*i,.48*e,.88*i,.43*e,.88*i,.31*e),mh(t,1.17*i,.76*e,.82*i,.8*e,.9*i,+e),vh(t),(i=t.o).B=new ct(.05,.645),i.C=new ct(.884,.908),Nn.q(t),i},BpmnActivityLoop:function(t,i,e){t=Nn.s();var n=4*(Math.SQRT2-1)/3*.5;return gh(t,.65*i,+e,!1),mh(t,(1-n)*i,+e,+i,(.5+n)*e,+i,.5*e),mh(t,+i,(.5-n)*e,(.5+n)*i,0*e,.5*i,0*e),mh(t,(.5-n)*i,0*e,0*i,(.5-n)*e,0*i,.5*e),mh(t,0*i,(.5+n)*e,(.5-n)*i,+e,.35*i,.98*e),t.moveTo(.25*i,.8*e),t.lineTo(.35*i,+e),t.lineTo(.1*i,+e),i=t.o,Nn.q(t),i},BpmnActivityParallel:function(t,i,e){return gh(t=Nn.s(),0,0,!1),t.lineTo(0,+e),t.moveTo(.5*i,0),t.lineTo(.5*i,+e),t.moveTo(+i,0),t.lineTo(+i,+e),i=t.o,Nn.q(t),i},BpmnActivitySequential:function(t,i,e){return gh(t=Nn.s(),0,0,!1),t.lineTo(+i,0),t.moveTo(0,.5*e),t.lineTo(+i,.5*e),t.moveTo(0,+e),t.lineTo(+i,+e),i=t.o,Nn.q(t),i},BpmnActivityAdHoc:function(t,i,e){return gh(t=Nn.s(),0,0,!1),gh(t,+i,+e,!1),gh(t,0,.5*e,!1),mh(t,.2*i,.35*e,.3*i,.35*e,.5*i,.5*e),mh(t,.7*i,.65*e,.8*i,.65*e,+i,.5*e),i=t.o,Nn.q(t),i},BpmnActivityCompensation:function(t,i,e){return gh(t=Nn.s(),0,.5*e,!0),t.lineTo(.5*i,0),t.lineTo(.5*i,.5*e),t.lineTo(+i,+e),t.lineTo(+i,0),t.lineTo(.5*i,.5*e),t.lineTo(.5*i,+e),vh(t),i=t.o,Nn.q(t),i},BpmnTaskMessage:function(t,i,e){return gh(t=Nn.s(),0,.2*e,!0),t.lineTo(+i,.2*e),t.lineTo(+i,.8*e),t.lineTo(0,.8*e),t.lineTo(0,.8*e),vh(t),gh(t,0,.2*e,!1),t.lineTo(.5*i,.5*e),t.lineTo(+i,.2*e),t.Ya(!1),i=t.o,Nn.q(t),i},BpmnTaskScript:function(t,i,e){return gh(t=Nn.s(),.7*i,+e,!0),t.lineTo(.3*i,+e),mh(t,.6*i,.5*e,0,.5*e,.3*i,0),t.lineTo(.7*i,0),mh(t,.4*i,.5*e,+i,.5*e,.7*i,+e),vh(t),gh(t,.45*i,.73*e,!1),t.lineTo(.7*i,.73*e),t.moveTo(.38*i,.5*e),t.lineTo(.63*i,.5*e),t.moveTo(.31*i,.27*e),t.lineTo(.56*i,.27*e),t.Ya(!1),i=t.o,Nn.q(t),i},BpmnTaskUser:function(t,i,e){gh(t=Nn.s(),0,0,!1),gh(t,.335*i,(1-.555)*e,!0),t.lineTo(.335*i,.595*e),t.lineTo(.665*i,.595*e),t.lineTo(.665*i,(1-.555)*e),mh(t,.88*i,.46*e,.98*i,.54*e,+i,.68*e),t.lineTo(+i,+e),t.lineTo(0,+e),t.lineTo(0,.68*e),mh(t,.02*i,.54*e,.12*i,.46*e,.335*i,(1-.555)*e),t.lineTo(.365*i,.405*e);var n=.5-.285,o=Math.PI/4,r=4*(1-Math.cos(o))/(3*Math.sin(o));return mh(t,(.5-((o=r*n)+n)/2)*i,(n+(n+(r=r*n))/2)*e,.285*i,(n+r)*e,.285*i,n*e),mh(t,.285*i,(n-r)*e,(.5-o)*i,0*e,.5*i,0*e),mh(t,(.5+o)*i,0*e,(.5+n)*i,(n-r)*e,(.5+n)*i,n*e),mh(t,(.5+n)*i,(n+r)*e,(.5+(o+n)/2)*i,(n+(n+r)/2)*e,.635*i,.405*e),t.lineTo(.635*i,.405*e),t.lineTo(.665*i,(1-.555)*e),t.lineTo(.665*i,.595*e),t.lineTo(.335*i,.595*e),gh(t,.2*i,+e,!1),t.lineTo(.2*i,.8*e),gh(t,.8*i,+e,!1),t.lineTo(.8*i,.8*e),i=t.o,Nn.q(t),i},BpmnEventConditional:function(t,i,e){return gh(t=Nn.s(),.1*i,0,!0),t.lineTo(.9*i,0),t.lineTo(.9*i,+e),t.lineTo(.1*i,+e),vh(t),gh(t,.2*i,.2*e,!1),t.lineTo(.8*i,.2*e),t.moveTo(.2*i,.4*e),t.lineTo(.8*i,.4*e),t.moveTo(.2*i,.6*e),t.lineTo(.8*i,.6*e),t.moveTo(.2*i,.8*e),t.lineTo(.8*i,.8*e),t.Ya(!1),i=t.o,Nn.q(t),i},BpmnEventError:function(t,i,e){return gh(t=Nn.s(),0,+e,!0),t.lineTo(.33*i,0),t.lineTo(.66*i,.5*e),t.lineTo(+i,0),t.lineTo(.66*i,+e),t.lineTo(.33*i,.5*e),vh(t),i=t.o,Nn.q(t),i},BpmnEventEscalation:function(t,i,e){return gh(t=Nn.s(),0,0,!1),gh(t,+i,+e,!1),gh(t,.1*i,+e,!0),t.lineTo(.5*i,0),t.lineTo(.9*i,+e),t.lineTo(.5*i,.5*e),vh(t),i=t.o,Nn.q(t),i},BpmnEventTimer:function(t,i,e){t=Nn.s();var n=.5*Vt;return gh(t,+i,.5*e,!0),mh(t,+i,(.5+n)*e,(.5+n)*i,+e,.5*i,+e),mh(t,(.5-n)*i,+e,0,(.5+n)*e,0,.5*e),mh(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),mh(t,(.5+n)*i,0,+i,(.5-n)*e,+i,.5*e),gh(t,.5*i,0,!1),t.lineTo(.5*i,.15*e),t.moveTo(.5*i,+e),t.lineTo(.5*i,.85*e),t.moveTo(0,.5*e),t.lineTo(.15*i,.5*e),t.moveTo(+i,.5*e),t.lineTo(.85*i,.5*e),t.moveTo(.5*i,.5*e),t.lineTo(.58*i,.1*e),t.moveTo(.5*i,.5*e),t.lineTo(.78*i,.54*e),t.Ya(!1),(i=t.o).Md=ms,Nn.q(t),i}};for(Mh in Ph)Ph[Mh.toLowerCase()]=Mh;var Th,Sh,Ch,Nh,jh={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};function Dh(t){if(null!==jh){for(var i in jh){var e=Lt(jh[i],!1);hi[i]=e,i.toLowerCase()!==i&&(hi[i.toLowerCase()]=i)}jh=null}if(void 0===(i=hi[t])){if("none"===(i=t.toLowerCase()))return"None";i=hi[i]}return"string"==typeof i?i:i instanceof Ai?t:null}function Lh(t){0===arguments.length?sa.call(this):sa.call(this,t),this.Q=311807,this.Ik=this.di="",this.Yr=this.Vr=this.hs=this.er=null,this.ks="",this.bi=this.js=this.qm=null,this.Xr="",this.po=null,this.Wr=ni,this.Zr="",this.qo=null,this.le="",this.lv=this.gq=this.uk=null,this.wi=new Se(NaN,NaN).freeze(),this.jr="",this.Nk=null,this.kr=P,this.tr=Wt,this.mr=Xt,this.zq=null,this.fr=Nh,this.sm=Yt,this.rm="gray",this.og=4,this.aC=-1,this.Ms=NaN,this.AF=new Ln,this.em=null,this.yj=NaN}function Ah(t){0!=(16384&t.Q)!=!1&&(t.updateAdornments(),t.Q&=-16385)}function Fh(t){var i;!1===Pu(t)&&(null!==(i=t.g)&&(i.fg.add(t),t instanceof Lu&&!i.la.ib&&t.bf(),i.ue()),Tu(t,!0),t.ri())}function zh(t){var i,e,n;!1!==Pu(t)&&(i=t.position,(e=t.location).G()&&i.G()||qh(t,i,e),n=(e=t.mc).copy(),e.Oa(),e.x=i.x,e.y=i.y,e.freeze(),t.Tw(n,e),Tu(t,!1))}function Bh(t,i,e,n){void 0===n&&(n=new Se),e=e.se()?jn:e;var o=i.Ha;if(n.m(o.width*e.x+e.offsetX,o.height*e.y+e.offsetY),null===i||i===t)return n;for(i.transform.ub(n),i=i.S;null!==i&&i!==t;)i.transform.ub(n),i=i.S;return t.Mk.ub(n),n.offset(-t.kd.x,-t.kd.y),n}function Oh(t,i){var e,n=t.AF;isNaN(t.yj)&&(t.yj=function t(i){for(var e=(i=i.za.n).length,n=0,o=0;o<e;o++){var r=i[o];if(r instanceof sa)n=Math.max(n,t(r));else if(r instanceof ja){t:{if(!r.Jh)switch(r.Mn){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":r=0;break t}r=r.Qh/2*r.tm*r.Ri()}n=Math.max(n,r)}}return n}(t));var o=2*(e=t.yj);if(!t.vl)return n.m(i.x-1-e,i.y-1-e,i.width+2+o,i.height+2+o),n;e=i.x;var o=i.y,r=i.width,s=i.height,a=t.shadowBlur,h=t.AI,r=r+a,s=s+a;return e-=a/2,o-=a/2,0<h.x?r+=h.x:(e+=h.x,r-=h.x),0<h.y?s+=h.y:(o+=h.y,s-=h.y),n.m(e-1,o-1,r+2,s+2),n}function Eh(t,i,e,n){null===i||t instanceof Du||(i=i.Na).pc&&lo(i,t,"position",n.copy(),e.copy(),!1)}function qh(t,i,e){var n=Nn.L(),o=t.df,r=t.cc;o.se()&&Nn.k("determineOffset: Part's locationSpot must be real: "+o.toString());var s=r.Ha,a=r instanceof ja?r.lb:0;if(n.$t(0,0,s.width+a,s.height+a,o),r!==t)for(n.offset(-a/2,-a/2),r.transform.ub(n),o=r.S;null!==o&&o!==t;)o.transform.ub(n),o=o.S;t.Mk.ub(n),n.offset(-t.kd.x,-t.kd.y),o=t.g,e.G()?(r=i.x,s=i.y,i.m(e.x-n.x,e.y-n.y),null!==o&&((a=(e=o.Na).rj)||!e.pc||t instanceof Du||lo(e,t,"position",new Se(r,s),i,!1),a||i.x===r&&i.y===s||(a=o.tb,o.tb=!0,t.h("position",new Se(r,s),i),o.tb=a))):i.G()&&(r=e.copy(),e.m(i.x+n.x,i.y+n.y),e.K(r)||null===o||(a=o.tb,o.tb=!0,t.h("location",r,e),o.tb=a)),Nn.v(n),t.ri()}function Ih(t,i,e){Su(t,!1),t instanceof Lu&&Wr(e,t),t.layer.Gc||i||e.qc(),i=t.mc;var n=e.rb;n.G()?(Cu(t)?lt(i,n)||t.yf(!1):i.xg(n)&&t.yf(!0),t.updateAdornments()):e.Ek=!0}function Gh(t,i){var e,n=t.mc;0===n.width||0===n.height||isNaN(n.x)||isNaN(n.y)||!t.isVisible()||(e=t.transform,null!==t.nc&&(Ls(t,i,t.nc,!0,!0),i.fillRect(n.x,n.y,n.width,n.height)),null===t.nc&&null===t.Ib&&(Ls(t,i,"rgba(0,0,0,0.4)",!0,!1),i.fillRect(n.x,n.y,n.width,n.height)),null!==t.Ib&&(e.vt()||i.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),n=t.Ha,Ls(t,i,t.Ib,!0,!1),i.fillRect(0,0,n.width,n.height),e.vt()||(n=1/(e.m11*e.m22-e.m12*e.m21),i.transform(e.m22*n,-e.m12*n,-e.m21*n,e.m11*n,n*(e.m21*e.dy-e.m22*e.dx),n*(e.m12*e.dx-e.m11*e.dy)))))}Nn.Ja(Lh,sa),Nn.ea("Part",Lh),Lh.prototype.cloneProtected=function(t){sa.prototype.cloneProtected.call(this,t),t.Q=-4097&this.Q|49152,t.di=this.di,t.Ik=this.Ik,t.er=this.er,t.hs=this.hs,t.Vr=this.Vr,t.Yr=this.Yr,t.ks=this.ks,t.js=this.js,t.bi=null,t.Xr=this.Xr,t.Wr=this.Wr.R(),t.Zr=this.Zr,t.le=this.le,t.gq=this.gq,t.wi.assign(this.wi),t.jr=this.jr,t.kr=this.kr.R(),t.tr=this.tr.R(),t.mr=this.mr.R(),t.zq=this.zq,t.fr=this.fr,t.sm=this.sm.R(),t.rm=this.rm,t.og=this.og,t.Ms=this.Ms},Lh.prototype.Vh=function(t){sa.prototype.Vh.call(this,t),t.ql(),t.qm=null,t.po=null,t.qo=null,t.Nk=null,t.em=null},Lh.prototype.toString=function(){var t=Nn.$e(Object.getPrototypeOf(this))+"#"+Nn.ld(this);return null!==this.data&&(t+="("+ce(this.data)+")"),t},Lh.LayoutNone=0,Lh.LayoutAdded=Th=1,Lh.LayoutRemoved=Sh=2,Lh.LayoutShown=4,Lh.LayoutHidden=8,Lh.LayoutNodeSized=16,Lh.LayoutGroupLayout=Ch=32,Lh.LayoutNodeReplaced=64,Lh.LayoutStandard=Nh=Th|Sh|28|Ch|64,Lh.LayoutAll=16777215,Lh.prototype.an=function(t,i,e,n,o,r,s){var a=this.g;null!==a&&(t===Gt&&"elements"===i?o instanceof sa?da(o,function(t){br(a,t),wr(a,t)}):o instanceof oh&&kr(a,o):t===Rt&&"elements"===i&&(o instanceof sa?da(o,function(t){xr(a,t),Mr(a,t)}):o instanceof oh&&Pr(a,o)),a.Lc(t,i,e,n,o,r,s))},Lh.prototype.updateTargetBindings=Lh.prototype.Hb=function(t){if(sa.prototype.Hb.call(this,t),null!==this.data)for(var i=(t=this.za.n).length,e=0;e<i;e++){var n=t[e];n instanceof sa&&da(n,function(t){null!==t.data&&t.Hb()})}},Lh.prototype.updateRelationshipsFromData=function(){var t,i,e,n,o=this.data;null!==o&&(null===(e=this.g)||(t=e.ba)instanceof pe&&(i=t.Om(o),(e=e.QG(i))!==(n=this.Sa)&&(e=null!==n?t.gb(n.data):void 0,"function"==typeof(n=t.vp)?n(o,e):o[n]=e,t.lx(o,i))))},Nn.u(Lh,{gw:"adornments"},function(){return null===this.bi?U:this.bi.nE}),Lh.prototype.findAdornment=Lh.prototype.Vo=function(t){var i=this.bi;return null===i?null:i.ja(t)},Lh.prototype.addAdornment=Lh.prototype.Wk=function(t,i){var e,n,o;null!==i&&((e=null)!==(n=this.bi)&&(e=n.ja(t)),e!==i&&(null===e||null!==(o=e.g)&&o.remove(e),null===n&&(this.bi=n=new nt("string",Du)),i.di!==t&&(i.gc=t),n.add(t,i),null!==(e=this.g)&&(e.add(i),i.data=this.data)))},Lh.prototype.removeAdornment=Lh.prototype.$i=function(t){var i,e,n=this.bi;null!==n&&(null===(i=n.ja(t))||null!==(e=i.g)&&e.remove(i),n.remove(t),0===n.count&&(this.bi=null))},Lh.prototype.clearAdornments=Lh.prototype.Vs=function(){if(null!==(i=this.bi)){for(var t=Nn.jb(),i=i.i;i.next();)t.push(i.key);for(var i=t.length,e=0;e<i;e++)this.$i(t[e]);Nn.sa(t)}},Lh.prototype.updateAdornments=function(){var i,t,e=this.g;if(null!==e){t:{if(this.hb&&this.uI){var n=this.Wt;if(!(null!==n&&this.U.G()&&this.isVisible()&&n.Xi()&&n.U.G()))break t;var o=this.Vo("Selection");if(null===o){if(null===(o=this.vI)&&(o=this instanceof Ru?e.HH:this instanceof kf?e.bH:e.YH),!(o instanceof Du))break t;ma(o),null!==(o=o.copy())&&(o.gc="Selection",o.Zb=n)}if(null!==o){var r,s,a,h=o.placeholder;null!==h&&(r=n.Ri(),s=0,n instanceof ja&&(s=n.lb),(a=Nn.El()).m((n.Ha.width+s)*r,(n.Ha.height+s)*r),h.xa=a,Nn.Zj(a)),o.angle=n.nl(),o.type!==ea&&(h=Nn.L(),o.location=n.Xa(P,h),Nn.v(h)),this.Wk("Selection",o);break t}}this.$i("Selection")}for(i=this,(t=e).Za.Ne.each(function(t){t.isEnabled&&t.updateAdornments(i)}),t.Za.updateAdornments(i),e=this.gw;e.next();)(n=e.value).Hb(),n.P()}},Nn.u(Lh,{layer:"layer"},function(){return this.lv}),Nn.u(Lh,{g:"diagram"},function(){var t=this.lv;return null!==t?t.g:null}),Nn.defineProperty(Lh,{Tf:"layerName"},function(){return this.Ik},function(t){var i,e,n,o=this.Ik;o!==t&&(Nn.j(t,"string",Lh,"layerName"),null!==(i=this.g)&&(null===i.dt(t)||i.Rp)||(this.Ik=t,null!==i&&i.qc(),this.h("layerName",o,t),null!==(o=this.layer)&&o.name!==t&&(null!==(i=o.g)&&(null!==(t=i.dt(t))&&t!==o))&&(0<=(e=o.Le(-1,this,!0))&&i.Lc(Rt,"parts",o,this,null,e,!0),o.visible!==t.visible&&this.nd(t.visible),0<=(e=t.ep(99999999,this,!0))&&i.Lc(Gt,"parts",t,null,this,!0,e),null!==(e=this.zt)&&(n=i.Qa,i.Qa=!0,e(this,o,t),i.Qa=n))))}),Nn.defineProperty(Lh,{zt:"layerChanged"},function(){return this.er},function(t){var i=this.er;i!==t&&(null!==t&&Nn.j(t,"function",Lh,"layerChanged"),this.er=t,this.h("layerChanged",i,t))}),Nn.defineProperty(Lh,{ln:"zOrder"},function(){return this.Ms},function(t){var i,e=this.Ms;e!==t&&(Nn.j(t,"number",Lh,"zOrder"),this.Ms=t,null!==(i=this.layer)&&Bo(i,-1,this),this.h("zOrder",e,t),null!==(t=this.g)&&t.pa())}),Lh.prototype.invalidateAdornments=Lh.prototype.Od=function(){var t=this.g;null!==t&&(hr(t),0!=(16384&this.Q)!=!0&&(this.Q|=16384,t.ue()))},Nn.u(Lh,{cc:"locationObject"},function(){var t;return null===this.Nk&&(""!==(t=this.Lz)?(t=this.be(t),this.Nk=null!==t?t:this):this.Nk=this instanceof Du&&this.type!==ea&&null!==this.placeholder?this.placeholder:this),this.Nk.visible?this.Nk:this}),Nn.defineProperty(Lh,{RH:"minLocation"},function(){return this.tr},function(t){var i=this.tr;i.K(t)||(this.tr=t=t.R(),this.h("minLocation",i,t))}),Nn.defineProperty(Lh,{MH:"maxLocation"},function(){return this.mr},function(t){var i=this.mr;i.K(t)||(this.mr=t=t.R(),this.h("maxLocation",i,t))}),Nn.defineProperty(Lh,{Lz:"locationObjectName"},function(){return this.jr},function(t){var i=this.jr;i!==t&&(this.jr=t,this.Nk=null,zs(this),this.h("locationObjectName",i,t))}),Nn.defineProperty(Lh,{df:"locationSpot"},function(){return this.kr},function(t){var i=this.kr;i.K(t)||(this.kr=t=t.R(),zs(this),this.h("locationSpot",i,t))}),Lh.prototype.move=function(t){this.position=t},Lh.prototype.moveTo=Lh.prototype.moveTo=function(t,i){var e=Nn.Mb(t,i);this.move(e),Nn.v(e)},Lh.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;return!(null!==t&&!t.visible)&&(!(null===(t=this.g)||!(t=t.Na).cf||null===(t=t.gm.ja(this))||!t.ax)||!!(null===(t=this.Sa)||t.de&&t.isVisible()))},Lh.prototype.nd=function(t){var i=this.g;t?(this.H(4),this.Od(),null!==i&&i.fg.add(this)):(this.H(8),this.Vs()),this.ql(),null!==i&&(i.qc(),i.pa())},Lh.prototype.findObject=Lh.prototype.be=function(t){if(this.name===t)return this;var i=this.em;if(null===i&&(this.em=i=new y),void 0!==i[t])return i[t];for(var e=this.za.n,n=e.length,o=0;o<n;o++){var r=e[o];if(r.name===t)return i[t]=r;if(r instanceof sa)if(null===r.tj&&null===r.hg){if(null!==(r=r.be(t)))return i[t]=r}else if(ba(r)&&(null!==(r=r.za.first())&&r.name===t))return i[t]=r}return i[t]=null},Lh.prototype.ensureBounds=Lh.prototype.sf=function(){Ns(this,1/0,1/0),this.Ec()},Lh.prototype.Ec=function(){var t,i,e,n;this.ri(),!1===Ks(this)?zh(this):(t=this.mc,(i=Nn.ag()).assign(t),t.Oa(),e=Cu(this),this.Li(0,0,this.kd.width,this.kd.height),qh(this,n=this.position,this.location),t.x=n.x,t.y=n.y,t.freeze(),this.Tw(i,t),Us(this,!1),i.K(t)?this.yf(e):!this.Pd()||fi(i.width,t.width)&&fi(i.height,t.height)||0<=this.aC&&this.H(16),Nn.Vb(i),Tu(this,!1))},Lh.prototype.Tw=function(t,i){var e,n,o,r,s,a,h=this.g;null!==h&&((e=!1)===h.qj&&t.G()&&(a=h.Zd,n=h.padding,o=a.x+n.left,r=a.y+n.top,s=a.width-2*n.right,a=a.height-2*n.bottom,t.x>o&&t.y>r&&t.right<s&&t.bottom<a&&i.x>o&&i.y>r&&i.right<s&&i.bottom<a&&(e=!0)),0!=(65536&this.Q)!=!0&&t.K(i)||Ih(this,e,h),h.pa(),t.K(i)||this.ql())},Nn.defineProperty(Lh,{location:"location"},function(){return this.wi},function(t){var i,e,n,o=this.wi;o.K(t)||(n=t=t.R(),(n=!(this instanceof Ru)&&(this.wi=n,!1===Ks(this)&&(Fh(this),(i=this.kb).G()&&(e=i.copy(),i.m(i.x+(n.x-o.x),i.y+(n.y-o.y)),Eh(this,this.g,i,e),this.h("position",e,i))),!0))&&this.h("location",o,t))}),Lh.prototype.pA=function(t,i){if(this instanceof Ru||!t.G())return!1;var e,n=this.g;return null!==n&&(Eh(this,n,t,i),!0===n.la.ib)||(this.kb=t,(n=this.wi).G()&&(e=n.copy(),n.m(n.x+(t.x-i.x),n.y+(t.y-i.y)),this.h("location",e,n)),!1===Pu(this)&&!1===Ks(this)&&(Fh(this),zh(this))),!0},Lh.prototype.nx=function(t,i){var e=this.wi,n=this.kb;Pu(this)||Ks(this)?e.m(NaN,NaN):e.m(e.x+t-n.x,e.y+i-n.y),n.m(t,i),Fh(this)},Lh.prototype.ul=function(){return!0},Lh.prototype.Pd=function(){return!0},Nn.defineProperty(Lh,{gc:"category"},function(){return this.di},function(t){var i,e,n,o,r=this.di;r!==t&&(Nn.j(t,"string",Lh,"category"),i=this.g,e=this.data,(n=null)===i||null===e||this instanceof Du||(o=i.ba.la).isEnabled&&!o.ib&&(n=this.clone()).za.Tc(this.za),this.di=t,this.h("category",r,t),null===i||null===e||this instanceof Du?null!==(n=this.Mf)&&(null!==(t=n.bi)&&t.remove(r),n.Wk(this.gc,this)):(o=i.ba).la.ib||(this instanceof Ru?(o instanceof pe?o.VE(e,t):o instanceof me&&o.yI(e,t),null!==(i=Br(i,t))&&(ma(i),null!==(i=i.copy())&&Mu(this,i,r,t))):(null!==o&&o.jx(e,t),null!==(i=jr(i,e,t))&&(ma(i),null===(i=i.copy())||i instanceof Ru||(i.location=this.location,Mu(this,i,r,t)))),null!==n&&((r=this.clone()).za.Tc(this.za),this.h("self",n,r))))}),Nn.defineProperty(Lh,{self:"self"},function(){return this},function(t){Mu(this,t,this.gc,t.gc)});var Rh,Vh,Hh,Kh,Uh,Jh,Yh,Wh,Xh,Zh,Qh,$h,_h,tl,il,el,nl,ol,rl,sl,al,hl,ll,ul,fl,cl,dl,pl,yl,gl,vl,ml,bl,xl,wl,kl,Ml,Pl,Tl,Sl,Cl,Nl,jl,Dl,Ll,Al,Fl,zl,Bl,Ol,El,ql,Il,Gl,Rl,Vl,Hl,Kl,Ul,Jl,Yl,Wl,Xl,Zl,Ql,$l,_l,tu,iu,eu,nu,ou,ru,su,au,hu,lu,uu,fu,cu,du,pu,yu,gu,vu,mu,bu,xu,wu,ku=!1;function Mu(t,i,e,n){i.constructor===t.constructor||ku||(ku=!0,Nn.trace('Should not change the class of the Part when changing category from "'+e+'" to "'+n+'"'),Nn.trace("  Old class: "+Nn.$e(t)+", new class: "+Nn.$e(i)+", part: "+t.toString())),t.Vs();var o=t.data;e=t.Tf;var r,s=t.hb,a=t.fh,h=!0,l=!0,u=!1;t instanceof Lu&&(h=(r=t).Wi,l=r.md,u=r.hu),i.Vh(t),i.cloneProtected(t),t.di=n,t.P(),t.pa(),n=!0,null!==(i=t.g)&&(n=i.tb,i.tb=!0),null!==(t.ie=o)&&t.Hb(),null!==i&&(i.tb=n),(o=t.Tf)!==e&&(t.Ik=e,t.Tf=o),t instanceof Lu&&((r=t).Wi=h,r.md=l,r.hu=u,r.Pd()&&r.H(64)),t.hb=s,t.fh=a}function Pu(t){return 0!=(32768&t.Q)}function Tu(t,i){t.Q=i?32768|t.Q:-32769&t.Q}function Su(t,i){t.Q=i?65536|t.Q:-65537&t.Q}function Cu(t){return 0!=(131072&t.Q)}function Nu(t,i){t.Q=i?1048576|t.Q:-1048577&t.Q}function ju(t){return t.isVisible()&&(null===(t=t.layer)||!t.Gc)}function Du(t){Lh.call(this,0===arguments.length?Xs:t),this.Q&=-257,this.Ik="Adornment",this.Gb=this.Lg=this.Db=null}function Lu(t){Lh.call(this,0===arguments.length?Xs:t),this.fc=new Dn(Ru),this.$n=this.Lk=this.hr=this.gr=null,this.Zq=!0,this.Js=!1,this.Es=null,this.Zp=this.$q=!0,this.$p=Jt,this.Wd=this.sh=null,this.Nr=Kh,this.Rj=!1}function Au(t,i){null!==i&&(null===t.sh&&(t.sh=new Q(lf)),t.sh.add(i))}function Fu(t,i,e,n){if(null===i||null===t.sh)return null;for(var o=t.sh.i;o.next();){var r=o.value;if(r.tp===t&&r.Jt===i&&r.Ww===e&&r.Xw===n||r.tp===i&&r.Jt===t&&r.Ww===n&&r.Xw===e)return r}return null}function zu(t,i){var e;null!==i&&((i.km=null)===(e=t.Sa)||e.de||zu(e,e.jl("")))}function Bu(t,i,e){var n,o,r;zu(t,e),t.fc.contains(i)||(t.fc.add(i),null!==(n=t.EH)&&(o=!0,null!==(r=t.g)&&(o=r.Qa,r.Qa=!0),n(t,i,e),null!==r&&(r.Qa=o)),i.Hc&&(e=i.T,i=i.Z,null!==e&&null!==i&&e!==i&&(n=!0,null!==(r=t.g)&&(n=r.Qd),o=n?e:i,(t=n?i:e).Rj||(t.Rj=o),!o.Wi||null!==r&&r.la.ib||(n?e===o&&(o.Wi=!1):i===o&&(o.Wi=!1)))))}function Ou(t,i,e){var n,o,r;zu(t,e),t.fc.remove(i)&&(n=t.FH,o=t.g,null!==n&&(r=!0,null!==o&&(r=o.Qa,o.Qa=!0),n(t,i,e),null!==o&&(o.Qa=r)),i.Hc&&(e=!0,null!==o&&(e=o.Qd),t=e?i.Z:i.T,i=e?i.T:i.Z,null!==t&&(t.Rj=!1),null===i||i.Wi||(0===i.fc.count?(i.Rj=null)!==o&&o.la.ib||(i.Wi=!0):Eu(i))))}function Eu(t){if(t.Rj=!1,0!==t.fc.count){var i=!0,e=t.g;if(null===e||!e.la.ib){for(null!==e&&(i=e.Qd),e=t.fc.i;e.next();){var n=e.value;if(n.Hc)if(i){if(n.T===t)return void(t.Wi=!1)}else if(n.Z===t)return void(t.Wi=!1)}t.Wi=!0}}}function qu(t){null===t.Wd?t.Wd=new nt("string",ks):t.Wd.clear(),ca(t,t,function(t,i){var e=i.Sd;null!==e&&t.Wd.add(e,i)}),0===t.Wd.count&&t.Wd.add("",t)}function Iu(t,i,e){var n=i.Sd;if(null!==n&&(null!==t.Wd&&t.Wd.remove(n),null!==(i=t.g)&&e)){for(e=null,n=t.KD(n);n.next();)t=n.value,null===e&&(e=Nn.jb()),e.push(t);if(null!==e){for(n=0;n<e.length;n++)t=e[n],i.remove(t);Nn.sa(e)}}}function Gu(t,i,e,n,o,r){for(var s=o===t||t.md,a=e?t.Aw():t.vg();a.next();){var h=a.value;h.Hc&&(null===(h=h.yz(t))||h===t||i.contains(h)||(i.add(h),s&&(r&&Do(n,h,o),h.ql(),h.nd(!1)),h.md&&(h.hu=h.md,Gu(h,i,e,n,o,r))))}t.md=!1}function Ru(){Lh.call(this,ea),this.eg=null,this.zh="",this.qg=this.Hq=null,this.Rh="",this.Ds=null,this.Ur=this.Tr=this.Sr=!1,this.ar=!0,this.Sp=Wh,this.lq=0,this.oq=Wh,this.pq=NaN,this.mm=Jh,this.ss=.5,this.Ce=null,this.Zc=new Dn(Se).freeze(),this.ro=this.Ee=null,this.Lf=!1,this.Hv=null,this.Ly=!1,this.Lg=this.Gn=this.Cn=this.ci=this.pi=this.Ra=null,this.Oy=new Se,this.KC=this.IC=null,this.Nx=!1,this.ga=null}function Vu(t){var i=t.T,e=t.Z;Hu(t,null!==i&&null!==e?i.MG(e):null)}function Hu(t,i){var e,n,o,r=t.uk;r!==i&&(null!==r&&Pf(r,t),null!==(t.uk=i)&&Mf(i,t),null!==(e=t.uD)&&(n=!0,null!==(o=t.g)&&(n=o.Qa,o.Qa=!0),e(t,r,i),null!==o&&(o.Qa=n)),!t.Lf||t.IC!==r&&t.KC!==r||t.ic())}function Ku(t,i){null===t.Ce&&(t.Ce=new Q(Lu)),t.Ce.add(i),t.P()}function Uu(t){0===t.Zc.count?t.Lf=!1:(t.Lf=!0,t.Cn=t.l(0).copy(),t.Gn=t.l(t.oa-1).copy(),of(t,!1))}function Ju(t,i){return Math.abs(i.x-t.x)>Math.abs(i.y-t.y)?(i.x=i.x>=t.x?t.x+9e9:t.x-9e9,i.y=t.y):(i.y=i.y>=t.y?t.y+9e9:t.y-9e9,i.x=t.x),i}function Yu(t,i){var e=i.km;return null===e&&((e=new mf).port=i,e.Jc=i.Y,i.km=e),bf(e,t)}function Wu(t,i){if(null===i)return jn;var e=t.xb;return e.Uc()&&(void 0===i&&(i=t.bd),null!==i&&(e=i.xb)),e===d?Te:e}function Xu(t,i){if(null===i)return jn;var e=t.yb;return e.Uc()&&(void 0===i&&(i=t.Fd),null!==i&&(e=i.yb)),e===d?Te:e}function Zu(t){var i=t.lt;return isNaN(i)&&(null!==(t=t.bd)&&(i=t.lt)),isNaN(i)?0:i}function Qu(t){var i=t.fu;return isNaN(i)&&(null!==(t=t.Fd)&&(i=t.fu)),isNaN(i)?0:i}function $u(t,i,e,n){return t=e-t,isNaN(t)||1/0===t||-1/0===t?NaN:(t<0&&(t=-t),i=n-i,isNaN(i)||1/0===i||-1/0===i?NaN:(i<0&&(i=-i),ci(t,0)?i:ci(i,0)?t:Math.sqrt(t*t+i*i)))}function _u(t,i,e,n){var o,r=t.oa;r<2||(e?(e=(o=t.l(1)).x-n.x,n=o.y-n.y,0!==(o=$u(i.x,i.y,e,n))&&((r=2===r?.5*o:o)<(t=Zu(t))&&(t=r),e=t*(e-i.x)/o,t=t*(n-i.y)/o,i.x+=e,i.y+=t)):(e=(o=t.l(r-2)).x-n.x,n=o.y-n.y,0!==(o=$u(i.x,i.y,e,n))&&((r=2===r?.5*o:o)<(t=Qu(t))&&(t=r),e=t*(i.x-e)/o,t=t*(i.y-n)/o,i.x-=e,i.y-=t)))}function tf(t,i,e,n){for(var o=t.oa,r=i;ci(i.x,r.x)&&ci(i.y,r.y);){if(o<=e)return o-1;r=t.l(e++)}if(!ci(i.x,r.x)&&!ci(i.y,r.y))return e-1;for(var s=r;ci(i.x,r.x)&&ci(r.x,s.x)&&(!n||(i.y>=r.y?r.y>=s.y:r.y<=s.y))||ci(i.y,r.y)&&ci(r.y,s.y)&&(!n||(i.x>=r.x?r.x>=s.x:r.x<=s.x));){if(o<=e)return o-1;s=t.l(e++)}return e-2}function ef(t,i,e,n,o,r,s){if(!s&&nf(t)){s=[];var a=0;t.isVisible()&&(a=function(t,i,e,n){var o=t.g;if(null===o||i.K(e))return 0;for(o=o.Ow;o.next();){var r=o.value;if(null!==r&&r.visible)for(var s=(r=r.wb.n).length,a=0;a<s;a++){var h,l=r[a];if(l instanceof Ru){if(l===t)return 0<n.length&&n.sort(function(t,i){return t-i}),n.length;l.isVisible()&&nf(l)&&(!(h=l.bn).G()||!t.bn.xg(h)||t.usesSamePort(l)||null!==(h=l.path)&&h.Xi()&&function(t,i,e,n){for(var o=fi(t.y,i.y),r=n.oa,s=n.l(0),a=Nn.L(),h=1;h<r;h++){var l=n.l(h);h<r-1&&(u=n.l(h+1),s.y===l.y&&l.y===u.y?(l.x>s.x&&u.x>l.x||l.x<s.x&&u.x<l.x)&&(l=u,h++):s.x===l.x&&l.x===u.x&&(l.y>s.y&&u.y>l.y||l.y<s.y&&u.y<l.y)&&(l=u,h++));t:{var u=a,f=t.x,c=t.y,d=i.x,p=i.y,y=s.x,s=s.y,g=l.x,v=l.y;if(fi(f,d)){if(!fi(c,p)&&fi(s,v)&&Math.min(c,p)<s&&Math.max(c,p)>s&&Math.min(y,g)<f&&Math.max(y,g)>f&&!fi(y,g)){u.x=f,u.y=s,u=!0;break t}}else if(fi(c,p)&&fi(y,g)&&Math.min(f,d)<y&&Math.max(f,d)>y&&Math.min(s,v)<c&&Math.max(s,v)>c&&!fi(s,v)){u.x=y,u.y=c,u=!0;break t}u.x=0,u.y=0,u=!1}u&&(o?e.push(a.x):e.push(a.y)),s=l}Nn.v(a)}(i,e,n,l))}}}return 0<n.length&&n.sort(function(t,i){return t-i}),n.length}(t,o,r,s));var h=o.x,h=o.y;if(0<a)if(fi(o.y,r.y))if(o.x<r.x)for(var l=0;l<a;){var u=Math.max(o.x,Math.min(s[l++]-5,r.x-10));i.lineTo(u+e,r.y+n);for(var h=u+e,f=Math.min(u+10,r.x);l<a;){var c=s[l];if(!(c<f+10))break;l++,f=Math.min(c+5,r.x)}c=(u+f)/2+e,c=r.y-10+n,u=f+e,f=r.y+n,t.Ie===Zh?gh(i,u,f,!1,!1):mh(i,h,c,u,c,u,f)}else for(l=a-1;0<=l;){for(u=Math.min(o.x,Math.max(s[l--]+5,r.x+10)),i.lineTo(u+e,r.y+n),h=u+e,f=Math.max(u-10,r.x);0<=l&&f-10<(c=s[l]);)l--,f=Math.max(c-5,r.x);c=r.y-10+n,u=f+e,f=r.y+n,t.Ie===Zh?gh(i,u,f,!1,!1):mh(i,h,c,u,c,u,f)}else if(fi(o.x,r.x))if(o.y<r.y)for(l=0;l<a;){for(u=Math.max(o.y,Math.min(s[l++]-5,r.y-10)),i.lineTo(r.x+e,u+n),h=u+n,f=Math.min(u+10,r.y);l<a&&(c=s[l])<f+10;)l++,f=Math.min(c+5,r.y);c=r.x-10+e,u=r.x+e,f+=n,t.Ie===Zh?gh(i,u,f,!1,!1):mh(i,c,h,c,f,u,f)}else for(l=a-1;0<=l;){for(u=Math.min(o.y,Math.max(s[l--]+5,r.y+10)),i.lineTo(r.x+e,u+n),h=u+n,f=Math.max(u-10,r.y);0<=l&&f-10<(c=s[l]);)l--,f=Math.max(c-5,r.y);c=r.x-10+e,u=r.x+e,f+=n,t.Ie===Zh?gh(i,u,f,!1,!1):mh(i,c,h,c,f,u,f)}}i.lineTo(r.x+e,r.y+n)}function nf(t){return(t=t.Ie)===Qh||t===Zh}function of(t,i){var e;(i||nf(t))&&(null===(e=t.g)||e.xk.contains(t)||null===t.Hv||e.xk.add(t,t.Hv))}function rf(t,i){var e=t.layer;if(null!==e&&e.visible&&!e.Gc&&null!==(o=e.g))for(var n=!1,o=o.Ow;o.next();){var r=o.value;if(r.visible)if(r===e)for(var n=!0,s=!1,a=(r=r.wb.n).length,h=0;h<a;h++){var l=r[h];l instanceof Ru&&(l===t?s=!0:s&&sf(t,l,i))}else if(n)for(a=(r=r.wb.n).length,h=0;h<a;h++)(l=r[h])instanceof Ru&&sf(t,l,i)}}function sf(t,i,e){var n;null===i||null===i.Ra||!nf(i)||(n=i.bn).G()&&(t.bn.xg(n)||e.xg(n))&&(t.usesSamePort(i)||i.re())}function af(t){var i=t.eg;if(null!==i){var e=t.qg;if(null!==e){var n=t.zh;t=t.Rh;for(var o=null,r=null,s=i.fc.n,a=s.length,h=0;h<a;h++){var l=s[h];(l.eg===i&&l.zh===n&&l.qg===e&&l.Rh===t||l.eg===e&&l.zh===t&&l.qg===i&&l.Rh===n)&&(null===r?r=l:(null===o&&(o=[]).push(r),o.push(l)))}if(null!==o){for(null===(r=Fu(i,e,n,t))&&((r=new lf).tp=i,r.Ww=n,r.Jt=e,r.Xw=t,Au(i,r),Au(e,r)),r.links=o,h=0;h<o.length;h++)(l=o[h]).ci=r;r.Rm()}}}}function hf(t){var i=t.ci;null!==i&&(t.ci=null,0<=(t=i.links.indexOf(t))&&(Nn.Th(i.links,t),i.Rm()))}function lf(){Nn.ec(this),this.fv=!1,this.Xw=this.Jt=this.Ww=this.tp=null,this.links=[]}function uf(){Nn.ec(this),this.sA=this.group=null,this.st=!0,this.abort=!1,this.lg=this.kg=1,this.or=this.nr=-1,this.he=this.ge=8,this.oc=null,this.sF=!1,this.$E=22,this.oE=111}function ff(t,i,e){return t.kg<=i&&i<=t.nr&&t.lg<=e&&e<=t.or}function cf(t,i,e){return ff(t,i,e)?(i-=t.kg,i/=t.ge,e-=t.lg,e/=t.he,t.oc[0|i][0|e]):0}function df(t,i,e){ff(t,i,e)&&(i-=t.kg,i/=t.ge,e-=t.lg,e/=t.he,t.oc[0|i][0|e]=0)}function pf(t){if(null!==t.oc)for(var i=0;i<=t.Go;i++)for(var e=0;e<=t.Ho;e++)1<=t.oc[i][e]&&(t.oc[i][e]|=999999)}function yf(t,i,e,n,o,r,s,a,h){if(!(i<r||s<i||e<a||h<e)){var l=0|i,u=0|e,f=t.oc[l][u];if(1<=f&&f<999999)for(o?u+=n:l+=n,f+=1;r<=l&&l<=s&&a<=u&&u<=h&&!(f>=t.oc[l][u]);)t.oc[l][u]=f,f+=1,o?u+=n:l+=n;if(l=o?u:l,o)if(0<n)for(e+=n;e<l;e+=n)yf(t,i,e,1,!o,r,s,a,h),yf(t,i,e,-1,!o,r,s,a,h);else for(e+=n;l<e;e+=n)yf(t,i,e,1,!o,r,s,a,h),yf(t,i,e,-1,!o,r,s,a,h);else if(0<n)for(i+=n;i<l;i+=n)yf(t,i,e,1,!o,r,s,a,h),yf(t,i,e,-1,!o,r,s,a,h);else for(i+=n;l<i;i+=n)yf(t,i,e,1,!o,r,s,a,h),yf(t,i,e,-1,!o,r,s,a,h)}}function gf(t,i,e,n,o,r,s,a,h,l,u){for(var f=0|i,c=0|e,d=t.oc[f][c];0===d&&a<f&&f<h&&l<c&&c<u;)if(s?c+=r:f+=r,d=t.oc[f][c],Math.abs(f-n)<=1&&Math.abs(c-o)<=1)return t.abort=!0,0;for(f=0|i,c=0|e,d=t.oc[f][c],i=1,t.oc[f][c]=i;0===d&&a<f&&f<h&&l<c&&c<u;)s?c+=r:f+=r,d=t.oc[f][c],t.oc[f][c]=i,i+=1;return s?c:f}function vf(t,i,e,n,o,r){if(null!==t.oc&&(t.abort=!1,ff(t,s=i.x,a=i.y))){var s=(s=s-t.kg)/t.ge,a=(a=a-t.lg)/t.he;if(ff(t,u=n.x,f=n.y))if(u-=t.kg,u/=t.ge,f-=t.lg,f/=t.he,Math.abs(s-u)<=1&&Math.abs(a-f)<=1)t.abort=!0;else{var h=r.x;i=r.y,n=r.x+r.width;var l=r.y+r.height,h=(h=h-t.kg)/t.ge;i-=t.lg,i/=t.he,n-=t.kg,n/=t.ge,l-=t.lg,l/=t.he,r=Math.max(0,Math.min(t.Go,0|h)),n=Math.min(t.Go,Math.max(0,0|n)),i=Math.max(0,Math.min(t.Ho,0|i));var l=Math.min(t.Ho,Math.max(0,0|l)),u=0|u,f=0|f,h=s=0|s,c=a=0|a,d=0===e||90===e?1:-1;if((e=90===e||270===e)?c=gf(t,s,a,u,f,d,e,r,n,i,l):h=gf(t,s,a,u,f,d,e,r,n,i,l),!t.abort){t:{e=0===o||90===o?1:-1,o=90===o||270===o;for(var d=0|u,p=0|f,y=t.oc[d][p];0===y&&r<d&&d<n&&i<p&&p<l;)if(o?p+=e:d+=e,y=t.oc[d][p],Math.abs(d-s)<=1&&Math.abs(p-a)<=1){t.abort=!0;break t}for(d=0|u,p=0|f,y=t.oc[d][p],t.oc[d][p]=999999;0===y&&r<d&&d<n&&i<p&&p<l;)o?p+=e:d+=e,y=t.oc[d][p],t.oc[d][p]=999999}t.abort||(yf(t,h,c,1,!1,r,n,i,l),yf(t,h,c,-1,!1,r,n,i,l),yf(t,h,c,1,!0,r,n,i,l),yf(t,h,c,-1,!0,r,n,i,l))}}}}function mf(){Nn.ec(this),this.port=this.Jc=null,this.Xf=[],this.sp=!1}function bf(t,i){var e=t.Xf;if(0===e.length){t:if(!t.sp){e=t.sp,t.sp=!0;var n,o=null,r=t.Jc;if(null===(r=r instanceof kf?r:null)||r.de)n=t.Jc.KD(t.port.Sd);else{if(!r.U.G()){t.sp=e;break t}n=(o=r).JD()}var s,a,h,l,u=t.Xf.length=0,f=t.port.Xa(P,Nn.L()),c=t.port.Xa(C,Nn.L());for((r=Nn.gk(f.x,f.y,0,0)).dj(c),Nn.v(f),Nn.v(c),f=Nn.Mb(r.x+r.width/2,r.y+r.height/2),n=n.i;n.next();){(c=n.value).isVisible()&&(h=Te,!(h=((s=c.bd===t.port||c.T.Xh(o))?Wu:Xu)(c,t.port)).Ui()||null===(s=s?c.Fd:c.bd)||null!==(a=s.Y)&&(s=c.computeOtherPoint(a,s),(l=0)===(h=function(t,i,e,n){switch(i=i.offsetY){case Nn.Wc:return 90;case Nn.Nc:return 180;case Nn.ed:return 270;case Nn.Xc:return 0}switch(i){case Nn.Wc|Nn.ed:return 180<e?270:90;case Nn.Nc|Nn.Xc:return 90<e&&e<=270?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,i){case Nn.Nc|Nn.ed:return t<e&&e<=180+t?180:270;case Nn.ed|Nn.Xc:return 180-t<e&&e<=360-t?270:0;case Nn.Xc|Nn.Wc:return t<e&&e<=180+t?90:0;case Nn.Wc|Nn.Nc:return 180-t<e&&e<=360-t?180:90;case Nn.Nc|Nn.ed|Nn.Xc:return 90<e&&e<=180+t?180:180+t<e&&e<=360-t?270:0;case Nn.ed|Nn.Xc|Nn.Wc:return 180<e&&e<=360-t?270:t<e&&e<=180?90:0;case Nn.Xc|Nn.Wc|Nn.Nc:return t<e&&e<=180-t?90:180-t<e&&e<=270?180:0;case Nn.Wc|Nn.Nc|Nn.ed:return 180-t<e&&e<=180+t?180:180+t<e?270:90}return n&&i!==(Nn.Nc|Nn.ed|Nn.Xc|Nn.Wc)&&((e-=15)<0&&(e+=360)),t<e&&e<180-t?90:180-t<=e&&e<=180+t?180:180+t<e&&e<360-t?270:0}(r,h,a=f.xc(s),c.jc))?(l=Nn.Xc,180<a&&(a-=360)):l=90===h?Nn.Wc:180===h?Nn.Nc:Nn.ed,void 0===(h=t.Xf[u])?(h=new xf(c,a,l),t.Xf[u]=h):(h.link=c,h.angle=a,h.fe=l),h.Uw.set(s),u++))}for(Nn.v(f),t.Xf.sort(mf.prototype.XH),o=t.Xf.length,f=-1,u=n=0;u<o;u++)void 0!==(h=t.Xf[u])&&(h.fe!==f&&(f=h.fe,n=0),h.dp=n,n++);for(f=-1,n=0,u=o-1;0<=u;u--)void 0!==(h=t.Xf[u])&&(h.fe!==f&&(f=h.fe,n=h.dp+1),h.Jm=n);u=t.Xf,s=t.port,o=t.Jc.dI,f=Nn.L(),n=Nn.L(),c=Nn.L(),h=Nn.L(),s.Xa(P,f),s.Xa(T,n),s.Xa(C,c),s.Xa(S,h);var d=l=a=s=0;if(o===Uh)for(var p=0;p<u.length;p++){var y=u[p];if(null!==y){var g=y.link.computeThickness();switch(y.fe){case Nn.Wc:l+=g;break;case Nn.Nc:d+=g;break;case Nn.ed:s+=g;break;default:case Nn.Xc:a+=g}}}for(var v,m=0,b=0,x=1,p=0;p<u.length;p++)if(null!==(y=u[p])){if(m!==y.fe){switch(m=y.fe){case Nn.Wc:v=c,k=h;break;case Nn.Nc:v=h,k=f;break;case Nn.ed:v=f,k=n;break;default:case Nn.Xc:v=n,k=c}var w=k.x-v.x,k=k.y-v.y;switch(m){case Nn.Wc:l>Math.abs(w)?(x=Math.abs(w)/l,l=Math.abs(w)):x=1;break;case Nn.Nc:d>Math.abs(k)?(x=Math.abs(k)/d,d=Math.abs(k)):x=1;break;case Nn.ed:s>Math.abs(w)?(x=Math.abs(w)/s,s=Math.abs(w)):x=1;break;default:case Nn.Xc:a>Math.abs(k)?(x=Math.abs(k)/a,a=Math.abs(k)):x=1}b=0}var M=y.kp;if(o===Uh){switch(g=y.link.computeThickness(),g*=x,M.set(v),m){case Nn.Wc:M.x=v.x+w/2+l/2-b-g/2;break;case Nn.Nc:M.y=v.y+k/2+d/2-b-g/2;break;case Nn.ed:M.x=v.x+w/2-s/2+b+g/2;break;default:case Nn.Xc:M.y=v.y+k/2-a/2+b+g/2}b+=g}else g=.5,o===Kh&&(g=(y.dp+1)/(y.Jm+1)),M.x=v.x+w*g,M.y=v.y+k*g}for(Nn.v(f),Nn.v(n),Nn.v(c),Nn.v(h),v=t.Xf,w=0;w<v.length;w++)null!==(k=v[w])&&(k.ww=t.computeEndSegmentLength(k));t.sp=e,Nn.Vb(r)}e=t.Xf}for(r=0;r<e.length;r++)if(null!==(v=e[r])&&v.link===i)return v;return null}function xf(t,i,e){this.link=t,this.angle=i,this.fe=e,this.Uw=new Se,this.Jm=this.dp=0,this.kp=new Se,this.ww=0}function wf(){this.Qj=this.oj=d,this.Oj=this.mj=NaN,this.Nj=this.lj=Rh,this.Pj=this.nj=NaN}function kf(t){Lu.call(this,0===arguments.length?Xs:t),this.qr=new Q(Lh),this.jo=new Q(kf),this.Ok=this.rr=this.pr=null,this.Gs=!1,this.Xq=!0,this.Is=!1,this.Gb=this.ws=null,this.dq=!1,this.eq=!0,this.Mq=this.fq=!1,this.Ud=new Sf,(this.Ud.group=this).Cy=!1}function Mf(t,i){var e,n,o;t.qr.add(i)&&(i instanceof kf&&t.jo.add(i),null!==(e=t.OH)&&(n=!0,null!==(o=t.g)&&(n=o.Qa,o.Qa=!0),e(t,i),null!==o&&(o.Qa=n)),t.isVisible()&&t.de||i.nd(!1)),i instanceof Ru&&!t.qw||(null===(e=t.Gb)&&(e=t),e.P())}function Pf(t,i){var e,n,o;t.qr.remove(i)&&(i instanceof kf&&t.jo.remove(i),null!==(e=t.PH)&&(n=!0,null!==(o=t.g)&&(n=o.Qa,o.Qa=!0),e(t,i),null!==o&&(o.Qa=n)),t.isVisible()&&t.de||i.nd(!0)),i instanceof Ru&&!t.qw||(null===(e=t.Gb)&&(e=t),e.P())}function Tf(){ks.call(this),this.Se=Ut,this.bs=new Ln(NaN,NaN,NaN,NaN)}function Sf(){0<arguments.length&&Nn.dd(Sf),Nn.ec(this),this.my=this.W=null,this.sj=this.Tq=!0,this.br=!1,this.Wp=new Se(0,0).freeze(),this.Vq=this.Wq=!0,this.wB="",this.Yn=!1,this.Dy=null}function Cf(t,i,e,n,o,r,s,a){for(e=e.i;e.next();){var h=e.value;n&&!h.gp||null!==o&&!o(h)||!h.canLayout()||(r&&h instanceof Lu?h.uf||(h instanceof kf&&null===h.Pb?Cf(t,i,h.Ic,!1,o,r,s,a):i.add(h)):(s&&h instanceof Ru||a&&h.Pd()&&!(h instanceof Lu))&&i.add(h))}}function Nf(){Nn.ec(this),this.Ud=null,this.clear()}function jf(t,i){if(null!==i){var e=t.vertexes.remove(i);return e&&(t.Yz.remove(i.Jc),i.network=null),e}}function Df(t,i){null!==i&&t.edges.remove(i)&&(t.Kz.remove(i.link),i.network=null)}function Lf(){Nn.ec(this),this.network=null,this.M=new Ln(0,0,10,10).freeze(),this.O=new Se(5,5).freeze(),this.clear()}function Af(){Nn.ec(this),this.network=null,this.clear()}function Ff(){0<arguments.length&&Nn.dd(Ff),Sf.call(this),this.Lw=!0,this.Ks=this.Ls=NaN,this.hj=new st(NaN,NaN).freeze(),this.Mh=new st(10,10).freeze(),this.Ae=cl,this.fd=dl,this.Lh=vl,this.uh=ul}function zf(){0<arguments.length&&Nn.dd(zf),Sf.call(this),this.ay=this.Kn=this.Jd=0,this.Bq=360,this.$x=bl,this.yk=0,this.DB=bl,this.Du=this.sg=this.TC=0,this.cw=new Kf,this.Fu=this.hm=0,this.MF=600,this.Pr=NaN,this.Yp=1,this.vs=0,this.xs=360,this.fd=bl,this.aa=Ml,this.Lh=Ll,this.uh=ll,this.Mh=6,this.Er=Al}function Bf(t,i,e,n,o){var r=t.Bq,s=t.Jd;t=t.sg,n=n*Math.PI/180,e=e*Math.PI/180;for(var a=i.length,h=0;h<a;h++){var l=n+(o===Ml?h*e/(360<=r?a:a-1):-h*e/a),u=i.da(h),f=s*Math.tan(l)/t,f=Math.sqrt((s*s+t*t*f*f)/(1+f*f));u.na=f*Math.cos(l),u.ua=f*Math.sin(l),u.actualAngle=180*l/Math.PI}}function Of(t,i,e,n){var o=t.Jd,r=t.sg,s=t.yk;e=e*Math.PI/180;for(var a=i.length,h=0;h<a;h++){var l=i.da(h),u=i.da(h===a-1?0:h+1),f=r*Math.sin(e);l.na=o*Math.cos(e),l.ua=f,l.actualAngle=180*e/Math.PI,isNaN(l.diameter)&&Yf(l,0),isNaN(u.diameter)&&Yf(u,0),l=Hf(t,o,r,n===Ml?e:-e,(l.diameter+u.diameter)/2+s),e+=n===Ml?l:-l}}function Ef(t,i,e,n){var o=t.Jd,r=t.sg,s=t.Du;e=e*Math.PI/180;for(var a=i.length,h=0;h<a;h++){var l=i.da(h);l.na=o*Math.cos(e),l.ua=r*Math.sin(e),l.actualAngle=180*e/Math.PI,l=Hf(t,o,r,n===Ml?e:-e,s),e+=n===Ml?l:-l}}function qf(t,i,e,n,o){var r=t.Fu,r=t.Bq;if(t.hm=0,t.cw=new Kf,e<360){for(r=n+(o===Ml?r:-r);r<0;)r+=360;180<(r%=360)&&(r-=360),r*=Math.PI/180,t.Fu=r,function t(i,e,n,o,r){for(var s=i.Jd,a=i.sg,h=i.Kn,l=s*Math.cos(o*Math.PI/180),u=a*Math.sin(o*Math.PI/180),f=Nn.L(),c=e.dc(),d=0;d<c.length&&(c[d].na=l,c[d].ua=u,!(d>=c.length-1));d++)If(i,l,u,c,d,r,f)||Gf(i,l,u,c,d,r,f),l=f.x,u=f.y;Nn.v(f);i.hm++;if(!(23<i.hm)){if(l=Math.atan2(u,l),l=r===Ml?i.Fu-l:l-i.Fu,l=Math.abs(l)<Math.abs(l-2*Math.PI)?l:l-2*Math.PI,s=l*(s+a)/2,a=i.cw,Math.abs(s)<Math.abs(a.Zo))for(a.Zo=s,a.kn=[],a.Mp=[],l=0;l<c.length;l++)a.kn[l]=c[l].mb.x,a.Mp[l]=c[l].mb.y;1<Math.abs(s)&&(i.Jd=i.hm<8?i.Jd-s/(2*Math.PI):i.Jd-(0<s?1.7:-2.3),i.sg=i.Jd*h,t(i,e,n,o,r))}}(t,i,e,n,o)}else!function t(i,e,n,o,r){var s=i.Jd,a=i.yk,h=i.Kn,l=s*Math.cos(o*Math.PI/180),u=i.sg*Math.sin(o*Math.PI/180),f=e.dc();if(3===f.length)f[0].na=s,f[0].ua=0,f[1].na=f[0].na-f[0].width/2-f[1].width/2-a,f[1].y=f[0].y,f[2].na=(f[0].na+f[1].na)/2,f[2].y=f[0].y-f[2].height-a;else if(4===f.length)f[0].na=s,f[0].ua=0,f[2].na=-f[0].na,f[2].ua=f[0].ua,f[1].na=0,f[1].y=Math.min(f[0].y,f[2].y)-f[1].height-a,f[3].na=0,f[3].y=Math.max(f[0].y+f[0].height+a,f[2].y+f[2].height+a);else{for(var c,d,s=Nn.L(),p=0;p<f.length&&(f[p].na=l,f[p].ua=u,!(p>=f.length-1));p++)If(i,l,u,f,p,r,s)||Gf(i,l,u,f,p,r,s),l=s.x,u=s.y;Nn.v(s),i.hm++,23<i.hm||(l=f[0].na,u=f[0].ua,s=f[f.length-1].na,p=f[f.length-1].ua,c=Math.abs(l-s)-((f[0].width+f[f.length-1].width)/2+a),d=Math.abs(u-p)-((f[0].height+f[f.length-1].height)/2+a),a=0,Math.abs(d)<1?Math.abs(l-s)<(f[0].width+f[f.length-1].width)/2&&(a=0):a=0<d?d:Math.abs(c)<1?0:c,c=!1,c=Math.abs(s)>Math.abs(p)?0<s!=p<u:0<p!=l<s,(c=r===Ml?c:!c)&&(a=-Math.abs(a),a=Math.min(a,-f[f.length-1].width),a=Math.min(a,-f[f.length-1].height)),i.cw.compare(a,f),1<Math.abs(a)&&(i.Jd=i.hm<8?i.Jd-a/(2*Math.PI):f.length<5&&10<a?i.Jd/2:i.Jd-(0<a?1.7:-2.3),i.sg=i.Jd*h,t(i,e,n,o,r)))}}(t,i,e,n,o);t.cw.commit(i)}function If(t,i,e,n,o,r,s){var a=t.Jd,h=t.sg,l=0,u=0;t=(n[o].width+n[o+1].width)/2+t.yk;var f=!1;if(0<=e!=(r===Ml)){if(a<(l=i+t)){if((l=i-t)<-a)return s.x=l,s.y=u,0;f=!0}}else if((l=i-t)<-a){if(a<(l=i+t))return s.x=l,s.y=u,0;f=!0}return u=Math.sqrt(1-Math.min(1,l*l/(a*a)))*h,e<0!==f&&(u=-u),Math.abs(e-u)>(n[o].height+n[o+1].height)/2?(s.x=l,s.y=u,0):(s.x=l,s.y=u,1)}function Gf(t,i,e,n,o,r,s){var a=t.Jd,h=t.sg,l=0,u=0;if(t=(n[o].height+n[o+1].height)/2+t.yk,n=!1,0<=i!=(r===Ml)){if((u=e-t)<-h){if(h<(u=e+t))return s.x=l,void(s.y=u);n=!0}}else if(h<(u=e+t)){if((u=e-t)<-h)return s.x=l,void(s.y=u);n=!0}l=Math.sqrt(1-Math.min(1,u*u/(h*h)))*a,i<0!==n&&(l=-l),s.x=l,s.y=u}function Rf(t,i,e,n,o){var r=t.MF;if(Math.abs(t.Kn-1)<.001)return void 0!==n&&void 0!==o?o*i:2*Math.PI*i;t=e<i?Math.sqrt(i*i-e*e)/i:Math.sqrt(e*e-i*i)/e;for(var s,a=0,h=void 0!==n&&void 0!==o?o/(r+1):Math.PI/(2*(r+1)),l=0;l<=r;l++)s=void 0!==n&&void 0!==o?n+l*o/r:l*Math.PI/(2*r),s=Math.sin(s),a+=Math.sqrt(1-t*t*s*s)*h;return void 0!==n&&void 0!==o?(e<i?i:e)*a:4*(e<i?i:e)*a}function Vf(t,i,e,n,o){return i/(void 0!==n&&void 0!==o?Rf(t,1,e,n,o):Rf(t,1,e))}function Hf(t,i,e,n,o){if(Math.abs(t.Kn-1)<.001)return o/i;var r=e<i?Math.sqrt(i*i-e*e)/i:Math.sqrt(e*e-i*i)/e,s=0;t=2*Math.PI/(700*t.network.vertexes.count),e<i&&(n+=Math.PI/2);for(var a=0;;a++){var h=Math.sin(n+a*t);if(o<=(s=s+(e<i?i:e)*Math.sqrt(1-r*r*h*h)*t))return a*t}}function Kf(){this.Zo=-1/0,this.Mp=this.kn=null}function Uf(){Nf.call(this)}function Jf(){Lf.call(this),this.actualAngle=this.diameter=NaN}function Yf(t,i){if(null===(e=t.network))return NaN;if(null===(e=e.Pb))return NaN;if(e.Nf===kl)if(e.Rw===Fl)t.diameter=Math.max(t.width,t.height);else{var e=Math.abs(Math.sin(i)),n=Math.abs(Math.cos(i));if(0===e)return t.width;if(0===n)return t.height;t.diameter=Math.min(t.height/e,t.width/n)}else t.diameter=e.Rw===Fl?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.diameter}function Wf(){Af.call(this)}function Xf(){0<arguments.length&&Nn.dd(Xf),Sf.call(this),this.rg=null,this.dr=0,this.bg=new st(100,100).freeze(),this.Xp=!1,this.Kh=!0,this.th=!1,this.io=100,this.Dq=1,this.Bh=1e3,this.Qr=Math,this.Fn=.05,this.En=50,this.Bn=150,this.Dn=0,this.tq=10,this.sq=5}function Zf(t,i){if(!(10<i||t.network.vertexes.count<3)){null===t.rg?t.rg=new Dn(rc):t.rg.clear(),t.rg.Tc(t.network.vertexes);var e=t.rg;e.sort(function(t,i){return null===t||null===i||t===i?0:i.Zf-t.Zf});for(var n=e.count-1;0<=n&&e.da(n).Zf<=1;)n--;return 1<e.count-n}}function Qf(t,i){for(var e=t.network,n=new oc,o=t.rg.i;o.next();){var r=o.value;if(!(1<r.Zf))break;n.Zk(r);var s=new nc;s.yx=r.Zf,s.zx=r.width,s.xx=r.height,s.HA=r.O.x,s.IA=r.O.y,null===r.nh&&(r.nh=new Dn(nc)),r.nh.add(s),r.iA=r.nh.count-1}for(var a,h=e.edges.i;h.next();){(o=h.value).fromVertex.network===n&&o.toVertex.network===n?n.Jo(o):o.fromVertex.network===n?(null===(a=o.fromVertex.Fm)&&(a=new Dn(rc),o.fromVertex.Fm=a),a.add(o.toVertex),o.fromVertex.Zf--,o.fromVertex.ck+=o.toVertex.ck):o.toVertex.network===n&&(null===(a=o.toVertex.Fm)&&(a=new Dn(rc),o.toVertex.Fm=a),a.add(o.fromVertex),o.toVertex.Zf--,o.toVertex.ck+=o.fromVertex.ck)}for(o=n.edges.i;o.next();)(r=o.value).length*=Math.max(1,ui((r.fromVertex.ck+r.toVertex.ck)/(4*i+1)));for(o=n.vertexes.i;o.next();)if(null!==(a=(r=o.value).Fm)&&0<a.count&&!((s=(s=r.nh.da(r.nh.count-1)).yx-r.Zf)<=0)){for(var l=0,u=0,f=a.count-s;f<a.count;f++){for(var c=a.da(f),d=null,h=c.edges.i;h.next();){var p=h.value;if(p.WG(c)===r){d=p;break}}null!==d&&(u+=d.length,l+=c.width*c.height)}a=r.na,h=r.ua,f=r.width,c=r.height,d=r.O,(p=f*c)<1&&(p=1),s=((l=ui((l+p+u*u*4/(s*s))/p))-1)*f/2,l=(l-1)*c/2,r.mb=new Ln(a-d.x-s,h-d.y-l,f+2*s,c+2*l),r.focus=new Se(d.x+s,d.y+l)}return t.network=n,e}function $f(t,i){for(var e=t.network.vertexes.i;e.next();){var n,o,r,s=e.value;s.network=i,null!==s.nh&&(n=s.nh.da(s.iA),s.Zf=n.yx,o=n.HA,r=n.IA,s.mb=new Ln(s.na-o,s.ua-r,n.zx,n.xx),s.focus=new Se(o,r),s.iA--)}for(e=t.network.edges.i;e.next();)e.value.network=i;t.network=i}function _f(t,i){var e=i.Fm;if(null!==e&&0!==e.count){var n=i.na,o=i.ua,r=i.width,s=i.height;null!==i.nh&&0<i.nh.count&&(r=(s=i.nh.da(0)).zx,s=s.xx);for(var r=ui(r*r+s*s)/2,a=!1,h=s=0,l=0,u=i.vertexes.i;u.next();){(f=u.value).Zf<=1?h++:(a=!0,l++,s+=Math.atan2(i.ua-f.ua,i.na-f.na))}if(0!==h)for(0<l&&(s/=l),u=l=0,l=a?2*Math.PI/(h+1):2*Math.PI/h,0==h%2&&(u=l/2),1<e.count&&e.sort(function(t,i){return null===t||null===i||t===i?0:i.width*i.height-t.width*t.height}),a=0==h%2?0:1,e=e.i;e.next();)if(!(1<(h=e.value).Zf||t.isFixed(h))){for(var f=null,c=h.edges.i;c.next();){f=c.value;break}var c=h.width,d=h.height,c=ui(c*c+d*d)/2,f=r+f.length+c,c=s+(l*(a/2>>1)+u)*(0==a%2?1:-1);h.na=n+f*Math.cos(c),h.ua=o+f*Math.sin(c),a++}}}function tc(t,i,e,n,o,r,s){var a=9e19,h=-1,l=0;t:for(;l<i;l++){var u=t[l],f=u.x-e,c=u.y-n;if((f=f*f+c*c)<a){for(c=l-1;0<=c;c--)if(t[c].y>u.y&&t[c].x-u.x<o+s.width)continue t;for(c=l+1;c<i;c++)if(t[c].x>u.x&&t[c].y-u.y<r+s.height)continue t;h=l,a=f}}return h}function ic(t,i){var e=(r=t.M).x,n=r.y,o=r.width,r=r.height,s=(l=i.M).x,a=l.y,h=l.width,l=l.height;return e+o<s?a+l<n?ui((e=e+o-s)*e+(n=n-a-l)*n):n+r<a?ui((e=e+o-s)*e+(n=n+r-a)*n):s-(e+o):s+h<e?a+l<n?ui((e=e-s-h)*e+(n=n-a-l)*n):n+r<a?ui((e=e-s-h)*e+(n=n+r-a)*n):e-(s+h):a+l<n?n-(a+l):n+r<a?a-(n+r):.1}function ec(t,i){t.rg=null;for(var e=t.dr+i;t.dr<e&&(t.dr++,function(t){null===t.rg&&(t.rg=new Dn(rc),t.rg.Tc(t.network.vertexes));var i=t.rg.n;if(i.length<=0)return!1;(o=i[0]).forceX=0,o.forceY=0;for(var e=a=o.na,n=h=o.ua,o=1;o<i.length;o++){(s=i[o]).forceX=0,s.forceY=0;var r=s.na,s=s.ua,a=Math.min(a,r),e=Math.max(e,r),h=Math.min(h,s),n=Math.max(n,s)}(h=n-h<e-a)?i.sort(function(t,i){return null===t||null===i||t===i?0:t.na-i.na}):i.sort(function(t,i){return null===t||null===i||t===i?0:t.ua-i.ua});for(var n=t.Bh,l=0,u=0,f=0,o=0;o<i.length;o++){var r=(s=i[o]).M,c=s.O,a=r.x+c.x,r=r.y+c.y,u=s.charge*t.electricalFieldX(a,r),f=s.charge*t.electricalFieldY(a,r),u=u+s.mass*t.gravitationalFieldX(a,r),f=f+s.mass*t.gravitationalFieldY(a,r);for(s.forceX+=u,s.forceY+=f,c=o+1;c<i.length;c++)if((e=i[c])!==s){var d=e.M,u=e.O,f=d.x+u.x,d=d.y+u.y;if(n<a-f||n<f-a){if(h)break}else if(n<r-d||n<d-r){if(!h)break}else{var p=ic(s,e);f=p<1?(null===(u=t.Zw)&&(t.Zw=u=new g(0)),l=u.random(),p=u.random(),u=f<a?(1+(u=Math.abs(e.M.right-s.M.x)))*l:a<f?-(1+(u=Math.abs(e.M.x-s.M.right)))*l:(1+(u=Math.max(e.width,s.width)))*l-u/2,d<r?(1+(f=Math.abs(e.M.bottom-s.M.y)))*p:a<f?-(1+(f=Math.abs(e.M.y-s.M.bottom)))*p:(1+(f=Math.max(e.height,s.height)))*p-f/2):(l=-(s.charge*e.charge)/(p*p),u=(f-a)/p*l,(d-r)/p*l),s.forceX+=u,s.forceY+=f,e.forceX-=u,e.forceY-=f}}}for(o=t.network.edges.i;o.next();)h=o.value,s=h.fromVertex,e=h.toVertex,r=s.M,c=s.O,a=r.x+c.x,r=r.y+c.y,d=e.M,u=e.O,f=d.x+u.x,d=d.y+u.y,p=ic(s,e),f=p<1?(null===(u=t.Zw)&&(t.Zw=u=new g(0)),l=u.random(),p=u.random(),u=(f<a?1:-1)*(1+(e.width>s.width)?e.width:s.width)*l,(d<r?1:-1)*(1+(e.height>s.height)?e.height:s.height)*p):(l=h.stiffness*(p-h.length),u=(f-a)/p*l,(d-r)/p*l),s.forceX+=u,s.forceY+=f,e.forceX-=u,e.forceY-=f;for(o=0,a=Math.max(t.Bh/20,50),e=0;e<i.length;e++)s=i[e],t.isFixed(s)?t.moveFixedVertex(s):(h=s.forceX,n=s.forceY,h<-a?h=-a:a<h&&(h=a),n<-a?n=-a:a<n&&(n=a),s.na+=h,s.ua+=n,o=Math.max(o,h*h+n*n));return o>t.HD*t.HD}(t)););t.rg=null}function nc(){this.IA=this.HA=this.xx=this.zx=this.yx=0}function oc(){Nf.call(this)}function rc(){Lf.call(this),this.isFixed=!1,this.mass=this.charge=NaN,this.ck=this.Zf=this.forceY=this.forceX=0,this.nh=this.Fm=null,this.iA=0}function sc(){Af.call(this),this.length=this.stiffness=NaN}function ac(){0<arguments.length&&Nn.dd(ac),Sf.call(this),this.Hd=this.$l=25,this.aa=0,this.An=zl,this.bo=Ol,this.Sn=Il,this.Xl=4,this.nn=Hl,this.Di=Wl,this.Kh=!0,this.ir=4,this.Fb=this.ov=this.ob=-1,this.Hf=this.sr=0,this.Lb=this.Ef=this.Ff=this.ig=this.Td=null,this.Ar=0,this.zr=this.dm=null,this.mg=0,this.Br=null,this.Sg=[],this.Sg.length=100}function hc(t){var i=t.fromVertex.qd;return t=t.toVertex.qd,null===i&&null===t?8:null===i||null===t?4:1}function lc(t){null===t.dm&&(t.dm=[]);for(var i=0,e=t.network.vertexes.i;e.next();){var n=e.value;t.dm[i]=n.layer,i++,t.dm[i]=n.column,i++,t.dm[i]=n.index,i++}return t.dm}function uc(t,i){for(var e=0,n=t.network.vertexes.i;n.next();){var o=n.value;o.layer=i[e],e++,o.column=i[e],e++,o.index=i[e],e++}}function fc(t,i,e){var n=jc(t,i),o=t.Td[i];(null===t.zr||t.zr.length<o*o)&&(t.zr=[]);for(var r=t.zr,s=0;s<o;s++){var a=0,h=n[s],l=0;if(null!==(d=h.near)&&d.layer===h.layer)if(s<(l=d.index))for(var u=s+1;u<l;u++)(h=n[u]).near===d&&h.Cm===d.Cm||a++;else for(u=s-1;l<u;u--)(h=n[u]).near===d&&h.Cm===d.Cm||a++;var f,c,d=0,p=f=u=h=0,y=0,g=0,v=0;if(0<=e)for(l=n[s].Oe,d=0;d<l.count;d++)if((f=l.n[d]).valid&&f.fromVertex.layer!==i)for(h=f.fromVertex.index,u=f.portToPos,f=f.portFromPos,p=d+1;p<l.count;p++)(v=l.n[p]).valid&&v.fromVertex.layer!==i&&(y=v.fromVertex.index,g=v.portToPos,v=v.portFromPos,u<g&&(y<h||h===y&&v<f)&&a++,g<u&&(h<y||y===h&&f<v)&&a++);if(e<=0)for(l=n[s].Je,d=0;d<l.count;d++)if((f=l.n[d]).valid&&f.toVertex.layer!==i)for(h=f.toVertex.index,u=f.portToPos,f=f.portFromPos,p=d+1;p<l.count;p++)(v=l.n[p]).valid&&v.toVertex.layer!==i&&(y=v.toVertex.index,g=v.portToPos,f<(v=v.portFromPos)&&(y<h||h===y&&g<u)&&a++,v<f&&(h<y||y===h&&u<g)&&a++);for(r[s*o+s]=a,l=s+1;l<o;l++){var m=0,b=0;if(0<=e)for(a=n[s].Oe,c=n[l].Oe,d=0;d<a.count;d++)if((f=a.n[d]).valid&&f.fromVertex.layer!==i)for(h=f.fromVertex.index,f=f.portFromPos,p=0;p<c.count;p++)(v=c.n[p]).valid&&v.fromVertex.layer!==i&&(y=v.fromVertex.index,v=v.portFromPos,(h<y||h===y&&f<v)&&b++,(y<h||y===h&&v<f)&&m++);if(e<=0)for(a=n[s].Je,c=n[l].Je,d=0;d<a.count;d++)if((f=a.n[d]).valid&&f.toVertex.layer!==i)for(h=f.toVertex.index,u=f.portToPos,p=0;p<c.count;p++)(v=c.n[p]).valid&&v.toVertex.layer!==i&&(y=v.toVertex.index,g=v.portToPos,(h<y||h===y&&u<g)&&b++,(y<h||y===h&&g<u)&&m++);r[s*o+l]=m,r[l*o+s]=b}}return Dc(t,i,n),r}function cc(t){for(var i=0,e=0;e<=t.ob;e++){for(var n=t,o=e,r=jc(n,o),s=n.Td[o],a=0,h=0;h<s;h++){var l,u,f,c=null;if(null!==(c=r[h].Je))for(var d=0;d<c.count;d++)(l=c.n[d]).valid&&l.toVertex.layer!==o&&(u=l.fromVertex.column+l.portFromColOffset,f=l.toVertex.column+l.portToColOffset,a+=(Math.abs(u-f)+1)*hc(l))}Dc(n,o,r),i+=a}return i}function dc(t,i,e){for(var n=jc(t,i),o=t.Td[i],r=[],s=0;s<o;s++){var a=n[s],h=null;e<=0&&(h=a.Oe);var l=null;0<=e&&(l=a.Je);var u=0,f=0,c=a.near;if(null!==c&&c.layer===a.layer&&(u+=c.column-1,f++),null!==h)for(c=0;c<h.count;c++){var d=(a=h.n[c]).fromVertex;a.valid&&!a.rev&&d.layer!==i&&(u+=d.column+a.portFromColOffset,f++)}if(null!==l)for(h=0;h<l.count;h++)c=(a=l.n[h]).toVertex,a.valid&&!a.rev&&c.layer!==i&&(u+=c.column+a.portToColOffset,f++);r[s]=0===f?-1:u/f}return Dc(t,i,n),r}function pc(t,i,e){for(var n=jc(t,i),o=t.Td[i],r=[],s=0;s<o;s++){var a=n[s],h=null;e<=0&&(h=a.Oe);var l=null;0<=e&&(l=a.Je);var u=0,f=[],c=a.near;if(null!==c&&c.layer===a.layer&&(f[u]=c.column-1,u++),null!==h)for(c=0;c<h.count;c++){var d=(a=h.n[c]).fromVertex;a.valid&&!a.rev&&d.layer!==i&&(f[u]=d.column+a.portFromColOffset,u++)}if(null!==l)for(h=0;h<l.count;h++)c=(a=l.n[h]).toVertex,a.valid&&!a.rev&&c.layer!==i&&(f[u]=c.column+a.portToColOffset,u++);0===u?r[s]=-1:(f.sort(function(t,i){return t-i}),l=u>>1,r[s]=1&u?f[l]:f[l-1]+f[l]>>1)}return Dc(t,i,n),r}function yc(t,i,e,n,o,r){if(i.component===n){i.component=e;var s=0;if(o)for(var a=i.ac;a.next();){var h=(s=a.value).toVertex;i.layer-h.layer===(s=t.linkMinLength(s))&&yc(t,h,e,n,o,r)}if(r)for(a=i.lc;a.next();)(h=(s=a.value).fromVertex).layer-i.layer===(s=t.linkMinLength(s))&&yc(t,h,e,n,o,r)}}function gc(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid){for(var e=!0,n=i.ac;n.next();)if(n.value.toVertex.valid){e=!1;break}if(e)return i}}return null}function vc(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid){for(var e=!0,n=i.lc;n.next();)if(n.value.fromVertex.valid){e=!1;break}if(e)return i}}return null}function mc(t,i){i.To=t.Ar,t.Ar++;for(var e=i.ac;e.next();){var n=e.value,o=n.toVertex;-1===o.To&&(n.forest=!0,mc(t,o))}i.finish=t.Ar,t.Ar++}function bc(t){for(var i=t.network.vertexes.i;i.next();){var e=function t(i,e){var n=0;if(-1===e.layer){for(var o=e.ac;o.next();)var r=o.value,s=r.toVertex,r=i.linkMinLength(r),n=Math.max(n,t(i,s)+r);e.layer=n}else n=e.layer;return n}(t,i.value);t.ob=Math.max(e,t.ob)}}function xc(t,i,e){return 90===t.aa?e&&!i.rev||!e&&i.rev?270:90:180===t.aa?e&&!i.rev||!e&&i.rev?0:180:270===t.aa?e&&!i.rev||!e&&i.rev?90:270:e&&!i.rev||!e&&i.rev?180:0}function wc(t,i,e){var n=0,o=jc(t,i),r=t.Td[i],s=pc(t,i,e);for(e=dc(t,i,e),n=0;n<r;n++)-1===e[n]&&(e[n]=o[n].column),-1===s[n]&&(s[n]=o[n].column);for(var a,h=!0;h;)for(h=!1,n=0;n<r-1;n++)(s[n+1]<s[n]||s[n+1]===s[n]&&e[n+1]<e[n])&&(h=!0,a=s[n],s[n]=s[n+1],s[n+1]=a,a=e[n],e[n]=e[n+1],e[n+1]=a,a=o[n],o[n]=o[n+1],o[n+1]=a);for(n=s=0;n<r;n++)(a=o[n]).index=n,s+=t.nodeMinColumnSpace(a,!0),a.column=s,s+=1,s+=t.nodeMinColumnSpace(a,!1);Dc(t,i,o)}function kc(t,i,e){var n=jc(t,i),o=t.Td[i];e=fc(t,i,e);for(var r,s=0,a=[],s=0;s<o;s++)a[s]=-1;for(r=[],s=0;s<o;s++)r[s]=-1;for(var h=!1,l=!0;l;)for(l=!1,s=0;s<o-1;s++){var u=e[n[s].index*o+n[s+1].index],f=e[n[s+1].index*o+n[s].index],c=0,d=0,p=n[s].column,y=n[s+1].column,g=t.nodeMinColumnSpace(n[s],!0),v=t.nodeMinColumnSpace(n[s],!1),m=t.nodeMinColumnSpace(n[s+1],!0),b=t.nodeMinColumnSpace(n[s+1],!1),g=p-g+m,v=y-v+b,m=0;for((x=n[s].lc.i).reset();x.next();)if((b=x.value).valid&&b.fromVertex.layer===i){for(b=b.fromVertex,m=0;n[m]!==b;)m++;m<s&&(c+=2*(s-m),d+=2*(s+1-m)),m===s+1&&(c+=1),s+1<m&&(c+=4*(m-s),d+=4*(m-(s+1)))}for((x=n[s].ac.i).reset();x.next();)if((b=x.value).valid&&b.toVertex.layer===i){for(b=b.toVertex,m=0;n[m]!==b;)m++;m===s+1&&(d+=1)}for((x=n[s+1].lc.i).reset();x.next();)if((b=x.value).valid&&b.fromVertex.layer===i){for(b=b.fromVertex,m=0;n[m]!==b;)m++;m<s&&(c+=2*(s+1-m),d+=2*(s-m)),m===s&&(d+=1),s+1<m&&(c+=4*(m-(s+1)),d+=4*(m-s))}for((x=n[s+1].ac.i).reset();x.next();)if((b=x.value).valid&&b.toVertex.layer===i){for(b=b.toVertex,m=0;n[m]!==b;)m++;m===s&&(c+=1)}var m=b=0,x=a[n[s].index],w=r[n[s].index],k=a[n[s+1].index],M=r[n[s+1].index];-1!==x&&(b+=Math.abs(x-p),m+=Math.abs(x-v)),-1!==w&&(b+=Math.abs(w-p),m+=Math.abs(w-v)),-1!==k&&(b+=Math.abs(k-y),m+=Math.abs(k-g)),-1!==M&&(b+=Math.abs(M-y),m+=Math.abs(M-g)),(d<c-.5||d===c&&f<u-.5||d===c&&f===u&&m<b-.5)&&(l=h=!0,n[s].column=v,n[s+1].column=g,u=n[s],n[s]=n[s+1],n[s+1]=u)}for(s=0;s<o;s++)n[s].index=s;return Dc(t,i,n),h}function Mc(t,i,e){for(var n=!1;function(t,i,e){var n=0,o=jc(t,i),r=t.Td[i],s=dc(t,i,-1);if(0<e)for(n=0;n<r;n++)s[n]=-1;var a=dc(t,i,1);if(e<0)for(n=0;n<r;n++)a[n]=-1;for(var h=!1,l=!0;l;)for(l=!1,n=0;n<r;n++){var u=o[n].column,f=t.nodeMinColumnSpace(o[n],!0),c=t.nodeMinColumnSpace(o[n],!1),d=0,d=n-1<0||u-o[n-1].column-1>f+t.nodeMinColumnSpace(o[n-1],!1)?u-1:u,f=0,f=r<=n+1||o[n+1].column-u-1>c+t.nodeMinColumnSpace(o[n+1],!0)?u+1:u,p=c=0,y=0,g=0,v=0,m=0;if(e<=0)for(var b=o[n].lc.i;b.next();){var x=b.value;x.valid&&x.fromVertex.layer!==i&&(g=hc(x),v=x.portFromColOffset,m=x.portToColOffset,x=x.fromVertex.column,c+=(Math.abs(u+m-(x+v))+1)*g,p+=(Math.abs(d+m-(x+v))+1)*g,y+=(Math.abs(f+m-(x+v))+1)*g)}if(0<=e)for(b=o[n].ac.i;b.next();)(x=b.value).valid&&x.toVertex.layer!==i&&(g=hc(x),v=x.portFromColOffset,m=x.portToColOffset,x=x.toVertex.column,c+=(Math.abs(u+v-(x+m))+1)*g,p+=(Math.abs(d+v-(x+m))+1)*g,y+=(Math.abs(f+v-(x+m))+1)*g);m=v=g=0,b=s[o[n].index],x=a[o[n].index],-1!==b&&(g+=Math.abs(b-u),v+=Math.abs(b-d),m+=Math.abs(b-f)),-1!==x&&(g+=Math.abs(x-u),v+=Math.abs(x-d),m+=Math.abs(x-f)),(p<c||p===c&&v<g)&&(l=h=!0,o[n].column=d),(y<c||y===c&&m<g)&&(l=h=!0,o[n].column=f)}return Dc(t,i,o),t.normalize(),h}(t,i,e);)n=!0;return n}function Pc(t,i,e){var n=0,o=jc(t,i),r=t.Td[i],s=pc(t,i,e);for(e=[],n=0;n<r;n++)e[n]=s[n];for(s=!0;s;)for(s=!1,n=0;n<r;n++){var a=o[n].column,h=t.nodeMinColumnSpace(o[n],!0),l=t.nodeMinColumnSpace(o[n],!1),u=0,f=0,c=0,c=f=0;-1===e[n]?u=0===n&&n===r-1?a:0===n?(f=o[n+1].column)-a===l+t.nodeMinColumnSpace(o[n+1],!0)?a-1:a:n===r-1?a-(c=o[n-1].column)===h+t.nodeMinColumnSpace(o[n-1],!1)?a+1:a:((c=(c=o[n-1].column)+t.nodeMinColumnSpace(o[n-1],!1)+h+1)+(f=(f=o[n+1].column)-t.nodeMinColumnSpace(o[n+1],!0)-l-1))/2|0:0===n&&n===r-1?u=e[n]:0===n?(f=(f=o[n+1].column)-t.nodeMinColumnSpace(o[n+1],!0)-l-1,u=Math.min(e[n],f)):n===r-1?(c=(c=o[n-1].column)+t.nodeMinColumnSpace(o[n-1],!1)+h+1,u=Math.max(e[n],c)):(c=(c=o[n-1].column)+t.nodeMinColumnSpace(o[n-1],!1)+h+1,f=(f=o[n+1].column)-t.nodeMinColumnSpace(o[n+1],!0)-l-1,c<e[n]&&e[n]<f?u=e[n]:c>=e[n]?u=c:f<=e[n]&&(u=f)),u!==a&&(s=!0,o[n].column=u)}Dc(t,i,o),t.normalize()}function Tc(t,i){for(var e=0;e<=t.Fb;e++)for(;function(t,i){for(var e=!0,n=t.network.vertexes.i;n.next();){var o=n.value,r=t.nodeMinColumnSpace(o,!0),s=t.nodeMinColumnSpace(o,!1);if(o.column-r<=i&&o.column+s>=i){e=!1;break}}if(o=!1,e)for(n.reset();n.next();)(e=n.value).column>i&&(--e.column,o=!0);return o}(t,e););for(t.normalize(),e=0;e<t.Fb;e++)for(;function(t,i){for(var e=i,e=i+1,n=0,o=[],r=[],n=0;n<=t.ob;n++)o[n]=!1,r[n]=!1;for(var s=t.network.vertexes.i;s.next();){var a=(n=s.value).column-t.nodeMinColumnSpace(n,!0),h=n.column+t.nodeMinColumnSpace(n,!1);a<=i&&i<=h&&(o[n.layer]=!0),a<=e&&e<=h&&(r[n.layer]=!0)}for(e=!(a=!0),n=0;n<=t.ob;n++)a=a&&!(o[n]&&r[n]);if(a)for(s.reset();s.next();)(o=s.value).column>i&&(--o.column,e=!0);return e}(t,e););t.normalize();var n,e=0,o=0,r=0,s=0;if(0<i)for(e=0;e<=t.Fb;e++)for(n=lc(t),r=(o=cc(t))+1;o<r;)r=o,Sc(t,e,1),o<(s=cc(t))?uc(t,n):s<o&&(o=s,n=lc(t));if(i<0)for(e=t.Fb;0<=e;e--)for(n=lc(t),r=(o=cc(t))+1;o<r;)r=o,Sc(t,e,-1),o<(s=cc(t))?uc(t,n):s<o&&(o=s,n=lc(t));t.normalize()}function Sc(t,i,e){t.mg=0;for(var n=t.network.vertexes.i;n.next();)n.value.component=-1;if(0<e)for(n.reset();n.next();){var o=n.value;o.column-t.nodeMinColumnSpace(o,!0)<=i&&(o.component=t.mg)}if(e<0)for(n.reset();n.next();)(o=n.value).column+t.nodeMinColumnSpace(o,!1)>=i&&(o.component=t.mg);for(t.mg++,n.reset();n.next();)-1===(i=n.value).component&&(function t(i,e,n,o,r,s){if(e.component===o){if(e.component=n,r)for(var a=e.ac;a.next();)t(i,a.value.toVertex,n,o,r,s);if(s)for(e=e.lc;e.next();)t(i,e.value.fromVertex,n,o,r,s)}}(t,i,t.mg,-1,!0,!0),t.mg++);var r=0;for(i=[],r=0;r<t.mg*t.mg;r++)i[r]=!1;for(o=[],r=0;r<(t.ob+1)*(t.Fb+1);r++)o[r]=-1;for(n.reset();n.next();)for(var s=(r=n.value).layer,a=Math.max(0,r.column-t.nodeMinColumnSpace(r,!0)),h=Math.min(t.Fb,r.column+t.nodeMinColumnSpace(r,!1));a<=h;a++)o[s*(t.Fb+1)+a]=r.component;for(r=0;r<=t.ob;r++){if(0<e)for(a=0;a<t.Fb;a++)-1!==o[r*(t.Fb+1)+a]&&-1!==o[r*(t.Fb+1)+a+1]&&o[r*(t.Fb+1)+a]!==o[r*(t.Fb+1)+a+1]&&(i[o[r*(t.Fb+1)+a]*t.mg+o[r*(t.Fb+1)+a+1]]=!0);if(e<0)for(a=t.Fb;0<a;a--)-1!==o[r*(t.Fb+1)+a]&&-1!==o[r*(t.Fb+1)+a-1]&&o[r*(t.Fb+1)+a]!==o[r*(t.Fb+1)+a-1]&&(i[o[r*(t.Fb+1)+a]*t.mg+o[r*(t.Fb+1)+a-1]]=!0)}for(o=[],r=0;r<t.mg;r++)o[r]=!0;for((s=new Dn("number")).add(0),h=0;0!==s.count;)if(h=s.n[s.count-1],s.Vc(s.count-1),o[h])for(o[h]=!1,r=0;r<t.mg;r++)i[h*t.mg+r]&&s.Ad(0,r);if(0<e)for(n.reset();n.next();)o[(t=n.value).component]&&--t.column;if(e<0)for(n.reset();n.next();)o[(e=n.value).component]&&(e.column+=1)}function Cc(t,i){return 270===t.aa?i?k:j:90===t.aa?i?j:k:180===t.aa?i?M:N:i?N:M}function Nc(t,i){var e=t-i;return-1<e&&e<1}function jc(t,i){var e,n=t.Td[i];if(n>=t.Sg.length){e=[];for(var o=0;o<t.Sg.length;o++)e[o]=t.Sg[o];t.Sg=e}for(void 0===t.Sg[n]||null===t.Sg[n]?e=[]:(e=t.Sg[n],t.Sg[n]=null),n=t.Br[i],o=0;o<n.length;o++){var r=n[o];e[r.index]=r}return e}function Dc(t,i,e){t.Sg[t.Td[i]]=e}function Lc(){this.index=this.Yd=this.Ge=this.Rd=this.first=this.layer=0,this.link=null,this.$h=0}function Ac(){Nf.call(this)}function Fc(){Lf.call(this),this.index=this.column=this.layer=-1,this.component=NaN,this.near=null,this.valid=!1,this.finish=this.To=NaN,this.Cm=0,this.Vz=this.Wz=null}function zc(){Af.call(this),this.forest=this.rev=this.valid=!1,this.portToPos=this.portFromPos=NaN,this.portToColOffset=this.portFromColOffset=0}function Bc(){0<arguments.length&&Nn.dd(Bc),Sf.call(this),this.ud=new Q(Object),this.Kr=Xl,this.Df=Zl,this.Fs=cu,this.mv=bu,this.PA=null,this.th=!0,this.fd=gu,this.bg=new st(10,10).freeze(),this.ra=new ad,this.ta=new ad,this.My=[]}function Oc(t,i,e){if(e.initialized){var n;if(null===i)n=!1;else{for(n=i.parent;null!==n&&n!==e;)n=n.parent;n=n===e}if(n||e.level>i.level)return;t.removeChild(e.parent,e)}return 1}function Ec(t){return t===su||t===au||t===hu||t===lu}function qc(t){return t===su||t===au}function Ic(t){var i=t.parent;if(null!==i){var e=i.alignment;if(Ec(e)){if(qc(e)){for(i=i.children,e=0;e<i.length&&t!==i[e];)e++;return 0==e%2}if(e===hu)return!0}}return!1}function Gc(t,i){if(0===i.Em){var e=!1,n=0,o=nu;null!==i.parent&&(n=i.parent.angle,e=Ec(o=i.parent.alignment)),o=Ic(i),i.ma.m(0,0),i.fb.m(i.width,i.height),null===i.parent||null===i.comments||(180!==n&&270!==n||e)&&!o?i.Ma.m(0,0):180===n&&!e||(90===n||270===n)&&o?i.Ma.m(i.width-2*i.O.x,0):i.Ma.m(0,i.height-2*i.O.y)}else{for(var n=90===(e=nd(i))||270===e,r=0,s=(o=i.children).length,a=0;a<s;a++)var h=o[a],r=Math.max(r,n?h.fb.width:h.fb.height);var l=i.alignment,u=l===ou,f=l===ru,c=Ec(l),d=Math.max(0,i.breadthLimit),p=od(i),y=i.nodeSpacing,g=rd(i),v=u||f?0:g/2,m=i.rowSpacing,b=0;(u||f||i.Bp||i.Cp&&1===i.maxGenerationCount)&&(b=Math.max(0,i.rowIndent));var u=i.width,x=i.height,w=0,k=0,M=0,P=0,T=0,S=0,C=0,N=0,j=0,D=0;if(c&&!qc(l)&&135<e&&o.reverse(),qc(l))if(1<s)for(a=0;a<s;a++){var L=(h=o[a]).fb;0==a%2&&a!==s-1?j=Math.max(j,(n?L.width:L.height)+Hc(h)-y):0!=a%2&&(D=Math.max(D,(n?L.width:L.height)+Hc(h)-y))}else 1===s&&(j=n?o[0].fb.width:o[0].fb.height);if(c)switch(l){case su:case au:j=(k=(e<135?Rc:Vc)(i,o,j,w,k)).x,w=k.width,k=k.height;break;case hu:for(a=0;a<s;a++)L=(h=o[a]).fb,d=0===C?0:m,n?(h.ma.m(r-L.width,T+d),w=Math.max(w,L.width),k=Math.max(k,T+d+L.height),T+=d+L.height):(h.ma.m(P+d,r-L.height),w=Math.max(w,P+d+L.width),k=Math.max(k,L.height),P+=d+L.width),C++;break;case lu:for(r=0;r<s;r++)L=(h=o[r]).fb,d=0===C?0:m,n?(h.ma.m(y/2+i.O.x,T+d),w=Math.max(w,L.width),k=Math.max(k,T+d+L.height),T+=d+L.height):(h.ma.m(P+d,y/2+i.O.y),w=Math.max(w,P+d+L.width),k=Math.max(k,L.height),P+=d+L.width),C++}else for(a=0;a<s;a++)L=(h=o[a]).fb,n?(0<d&&0<C&&P+y+L.width>d&&(P<r&&Xc(i,l,r-P,0,N,a-1),S++,N=a,M=k,P=C=0,T=135<e?-k-m:k+m),D=0===C?v:y,Qc(t,h,0,T),h.ma.m(P+D,T),w=Math.max(w,P+D+L.width),k=Math.max(k,M+(0===S?0:m)+L.height),P+=D+L.width):(0<d&&0<C&&T+y+L.height>d&&(T<r&&Xc(i,l,0,r-T,N,a-1),S++,N=a,M=w,T=C=0,P=135<e?-w-m:w+m),D=0===C?v:y,Qc(t,h,P,0),h.ma.m(P,T+D),k=Math.max(k,T+D+L.height),w=Math.max(w,M+(0===S?0:m)+L.width),T+=D+L.height),C++;switch(0<S&&(n?(k+=Math.max(0,p),P<w&&Xc(i,l,w-P,0,N,s-1),0<b&&(f||Zc(i,b,0,0,s-1),w+=b)):(w+=Math.max(0,p),T<k&&Xc(i,l,0,k-T,N,s-1),0<b&&(f||Zc(i,0,b,0,s-1),k+=b))),b=f=0,l){case eu:n?f+=w/2-i.O.x-g/2:b+=k/2-i.O.y-g/2;break;case nu:0<S?n?f+=w/2-i.O.x-g/2:b+=k/2-i.O.y-g/2:n?f+=(l=o[0].ma.x+o[0].Ma.x)+((y=o[s-1].ma.x+o[s-1].Ma.x+2*o[s-1].O.x)-l)/2-i.O.x-g/2:b+=(l=o[0].ma.y+o[0].Ma.y)+((y=o[s-1].ma.y+o[s-1].Ma.y+2*o[s-1].O.y)-l)/2-i.O.y-g/2;break;case ou:n?(f-=g,w+=g):(b-=g,k+=g);break;case ru:n?(f+=w-i.width+g,w+=g):(b+=k-i.height+g,k+=g);break;case su:case au:n?f=1<s?f+(j+y/2-i.O.x):f+(o[0].O.x-i.O.x+o[0].Ma.x):b=1<s?b+(j+y/2-i.O.y):b+(o[0].O.y-i.O.y+o[0].Ma.y);break;case hu:n?f+=w+y/2-i.O.x:b+=k+y/2-i.O.y;break;case lu:break;default:Nn.k("Unhandled alignment value "+l.toString())}for(a=0;a<s;a++)h=o[a],n?h.ma.m(h.ma.x+h.Ma.x-f,h.ma.y+(135<e?(c?-k:-h.fb.height)+h.Ma.y-p:x+p+h.Ma.y)):h.ma.m(h.ma.x+(135<e?(c?-w:-h.fb.width)+h.Ma.x-p:u+p+h.Ma.x),h.ma.y+h.Ma.y-b);n?(w=Jc(i,w,f),f<0&&(f=0),135<e&&(b+=k+p),k+=x+p):(135<e&&(f+=w+p),w+=u+p,k=Yc(i,k,b),b<0&&(b=0)),i.Ma.m(f,b),i.fb.m(w,k)}}function Rc(t,i,e,n,o){var r=i.length;if(0===r)return new Ln(e,0,n,o);if(1===r)return new Ln(e,0,n=(s=i[0]).fb.width,o=s.fb.height);for(var s,a,h,l,u=t.nodeSpacing,f=t.rowSpacing,c=90===nd(t),d=0,p=0,y=0,g=0;g<r;g++){0!=g%2||1<r&&g===r-1||(a=(s=i[g]).fb,h=0===d?0:f,c?(l=Hc(s)-u,s.ma.m(e-(a.width+l),y+h),n=Math.max(n,a.width+l),o=Math.max(o,y+h+a.height),y+=h+a.height):(l=Hc(s)-u,s.ma.m(p+h,e-(a.height+l)),o=Math.max(o,a.height+l),n=Math.max(n,p+h+a.width),p+=h+a.width),d++)}for(var d=0,v=p,m=y,y=c?(p=e+u,0):(p=0,e+u),g=0;g<r;g++)0!=g%2&&(a=(s=i[g]).fb,h=0===d?0:f,c?(l=Hc(s)-u,s.ma.m(p+l,y+h),n=Math.max(n,p+a.width+l),o=Math.max(o,y+h+a.height),y+=h+a.height):(l=Hc(s)-u,s.ma.m(p+h,y+l),n=Math.max(n,p+h+a.width),o=Math.max(o,y+a.height+l),p+=h+a.width),d++);return 1<r&&1==r%2&&(a=(s=i[r-1]).fb,i=Kc(s,c?Math.max(Math.abs(m),Math.abs(y)):Math.max(Math.abs(v),Math.abs(p))),c?(s.ma.m(e+u/2-s.O.x-s.Ma.x,o+i),c=e+u/2-s.O.x-s.Ma.x,n=Math.max(n,c+a.width),c<0&&(n-=c),o=Math.max(o,Math.max(m,y)+i+a.height),s.ma.x<0&&(e=Uc(t,s.ma.x,!1,e,u))):(s.ma.m(n+i,e+u/2-s.O.y-s.Ma.y),n=Math.max(n,Math.max(v,p)+i+a.width),c=e+u/2-s.O.y-s.Ma.y,o=Math.max(o,c+a.height),c<0&&(o-=c),s.ma.y<0&&(e=Uc(t,s.ma.y,!0,e,u)))),new Ln(e,0,n,o)}function Vc(t,i,e,n,o){var r=i.length;if(0===r)return new Ln(e,0,n,o);if(1===r)return new Ln(e,0,n=(s=i[0]).fb.width,o=s.fb.height);for(var s,a,h,l,u=t.nodeSpacing,f=t.rowSpacing,c=270===nd(t),d=0,p=0,y=0,g=0;g<r;g++){0!=g%2||1<r&&g===r-1||(a=(s=i[g]).fb,h=0===d?0:f,c?(l=Hc(s)-u,y-=h+a.height,s.ma.m(e-(a.width+l),y),n=Math.max(n,a.width+l),o=Math.max(o,Math.abs(y))):(l=Hc(s)-u,p-=h+a.width,s.ma.m(p,e-(a.height+l)),o=Math.max(o,a.height+l),n=Math.max(n,Math.abs(p))),d++)}var d=0,v=p,m=y;for(y=c?(p=e+u,0):(p=0,e+u),g=0;g<r;g++)0!=g%2&&(a=(s=i[g]).fb,h=0===d?0:f,c?(l=Hc(s)-u,y-=h+a.height,s.ma.m(p+l,y),n=Math.max(n,p+a.width+l),o=Math.max(o,Math.abs(y))):(l=Hc(s)-u,p-=h+a.width,s.ma.m(p,y+l),o=Math.max(o,y+a.height+l),n=Math.max(n,Math.abs(p))),d++);for(1<r&&1==r%2&&(a=(s=i[r-1]).fb,f=Kc(s,c?Math.max(Math.abs(m),Math.abs(y)):Math.max(Math.abs(v),Math.abs(p))),c?(s.ma.m(e+u/2-s.O.x-s.Ma.x,-o-a.height-f),p=e+u/2-s.O.x-s.Ma.x,n=Math.max(n,p+a.width),p<0&&(n-=p),o=Math.max(o,Math.abs(Math.min(m,y))+f+a.height),s.ma.x<0&&(e=Uc(t,s.ma.x,!1,e,u))):(s.ma.m(-n-a.width-f,e+u/2-s.O.y-s.Ma.y),n=Math.max(n,Math.abs(Math.min(v,p))+f+a.width),p=e+u/2-s.O.y-s.Ma.y,o=Math.max(o,p+a.height),p<0&&(o-=p),s.ma.y<0&&(e=Uc(t,s.ma.y,!0,e,u)))),g=0;g<r;g++)s=i[g],c?s.ma.m(s.ma.x,s.ma.y+o):s.ma.m(s.ma.x+n,s.ma.y);return new Ln(e,0,n,o)}function Hc(t){return null===t.parent?0:t.parent.nodeSpacing}function Kc(t){return null===t.parent?0:t.parent.rowSpacing}function Uc(t,i,e,n,o){for(var r=(t=t.children).length,s=0;s<r;s++)e?t[s].ma.m(t[s].ma.x,t[s].ma.y-i):t[s].ma.m(t[s].ma.x-i,t[s].ma.y);return i=t[r-1],Math.max(n,e?i.Ma.y+i.O.y-o/2:i.Ma.x+i.O.x-o/2)}function Jc(t,i,e){switch(t.alignment){case nu:case eu:var n=i;return e+t.width>n&&(n=e+t.width),e<0&&(n-=e),n;case ou:return t.width>i?t.width:i;case ru:return 2*t.O.x>i?t.width:i+t.width-2*t.O.x;case su:case au:return n=Math.min(0,e),e=Math.max(i,e+t.width),Math.max(t.width,e-n);case hu:return t.width-t.O.x+t.nodeSpacing/2+i;case lu:return Math.max(t.width,t.O.x+t.nodeSpacing/2+i);default:return i}}function Yc(t,i,e){switch(t.alignment){case nu:case eu:var n=i;return e+t.height>n&&(n=e+t.height),e<0&&(n-=e),n;case ou:return t.height>i?t.height:i;case ru:return 2*t.O.y>i?t.height:i+t.height-2*t.O.y;case su:case au:return n=Math.min(0,e),e=Math.max(i,e+t.height),Math.max(t.height,e-n);case hu:return t.height-t.O.y+t.nodeSpacing/2+i;case lu:return Math.max(t.height,t.O.y+t.nodeSpacing/2+i);default:return i}}function Wc(t,i,e){switch(t){case eu:case nu:i/=2,e/=2;break;case ou:e=i=0;break;case ru:break;default:Nn.k("Unhandled alignment value "+t.toString())}return new Se(i,e)}function Xc(t,i,e,n,o,r){Zc(t,(i=Wc(i,e,n)).x,i.y,o,r)}function Zc(t,i,e,n,o){if(0!==i||0!==e)for(t=t.children;n<=o;n++){var r=t[n].ma;r.x+=i,r.y+=e}}function Qc(t,i,e,n){var o=i.parent;switch(t.Df){case Zl:for(t=i.lc;t.next();)(i=t.value).fromVertex===o&&i.Rr.m(e,n);break;case Ql:for(t=i.ac;t.next();)(i=t.value).toVertex===o&&i.Rr.m(e,n);break;default:Nn.k("Unhandled path value "+t.Df.toString())}}function $c(t,i,e){for(var n=0;n<t.length;n++){var o=t[n];o.x+=i,o.y+=e}}function _c(t,i,e,n,o,r,s,a){var h=nd(i),l=90===h||270===h,u=i.nodeSpacing;i=n;var f=o;n=r,o=s;var c=e.At,d=e.St;s=e.fb;var p=l?Math.max(o,s.height):Math.max(n,s.width);if(null!==c&&h===nd(e)||(c=td(t,2),d=td(t,2),l?(c[0].m(0,0),c[1].m(0,s.height),d[0].m(s.width,0),d[1].m(d[0].x,c[1].y)):(c[0].m(0,0),c[1].m(s.width,0),d[0].m(0,s.height),d[1].m(c[1].x,d[0].y))),l){if(e=n,n=9999999,!(null===f||f.length<2||null===c||c.length<2))for(l=h=0;h<f.length&&l<c.length;){o=f[h],r=(v=c[l]).x;var y=v.y;r+=e;var g=o;h+1<f.length&&(g=f[h+1]);var v=(m=v).x,m=m.y;l+1<c.length&&(v=(m=c[l+1]).x,m=m.y,v+=e);var b=n;o.y===y?b=r-o.x:o.y>y&&o.y<m?b=r+(o.y-y)/(m-y)*(v-r)-o.x:y>o.y&&y<g.y&&(b=r-(o.x+(y-o.y)/(g.y-o.y)*(g.x-o.x))),b<n&&(n=b),g.y<=o.y?h++:m<=y?l++:(g.y<=m&&h++,m<=g.y&&l++)}if(e-=n,h=c,l=e+=u,null===i||i.length<2||null===h||h.length<2)n=null;else{for(u=td(t,i.length+h.length),n=r=o=0;r<h.length&&h[r].y<i[0].y;)y=h[r++],u[n++].m(y.x+l,y.y);for(;o<i.length;)y=i[o++],u[n++].m(y.x,y.y);for(o=i[i.length-1].y;r<h.length&&h[r].y<=o;)r++;for(;r<h.length&&h[r].y>o;)y=h[r++],u[n++].m(y.x+l,y.y);for(h=td(t,n),o=0;o<n;o++)h[o].assign(u[o]);id(t,u),n=h}if(r=d,y=e,null===f||f.length<2||null===r||r.length<2)o=null;else{for(u=td(t,f.length+r.length),l=g=h=0;h<f.length&&f[h].y<r[0].y;)o=f[h++],u[l++].m(o.x,o.y);for(;g<r.length;)o=r[g++],u[l++].m(o.x+y,o.y);for(r=r[r.length-1].y;h<f.length&&f[h].y<=r;)h++;for(;h<f.length&&f[h].y>r;)o=f[h++],u[l++].m(o.x,o.y);for(o=td(t,l),h=0;h<l;h++)o[h].assign(u[h]);id(t,u)}r=Math.max(0,e)+s.width,s=p}else{if(e=o,n=9999999,!(null===f||f.length<2||null===c||c.length<2))for(l=h=0;h<f.length&&l<c.length;)o=f[h],r=(v=c[l]).x,y=v.y,y+=e,g=o,h+1<f.length&&(g=f[h+1]),v=(m=v).x,m=m.y,l+1<c.length&&(v=(m=c[l+1]).x,m=m.y,m+=e),b=n,o.x===r?b=y-o.y:o.x>r&&o.x<v?b=y+(o.x-r)/(v-r)*(m-y)-o.y:r>o.x&&r<g.x&&(b=y-(o.y+(r-o.x)/(g.x-o.x)*(g.y-o.y))),b<n&&(n=b),g.x<=o.x?h++:v<=r?l++:(g.x<=v&&h++,v<=g.x&&l++);if(e-=n,h=c,l=e+=u,null===i||i.length<2||null===h||h.length<2)n=null;else{for(u=td(t,i.length+h.length),n=r=o=0;r<h.length&&h[r].x<i[0].x;)y=h[r++],u[n++].m(y.x,y.y+l);for(;o<i.length;)y=i[o++],u[n++].m(y.x,y.y);for(o=i[i.length-1].x;r<h.length&&h[r].x<=o;)r++;for(;r<h.length&&h[r].x>o;)y=h[r++],u[n++].m(y.x,y.y+l);for(h=td(t,n),o=0;o<n;o++)h[o].assign(u[o]);id(t,u),n=h}if(r=d,y=e,null===f||f.length<2||null===r||r.length<2)o=null;else{for(u=td(t,f.length+r.length),l=g=h=0;h<f.length&&f[h].x<r[0].x;)o=f[h++],u[l++].m(o.x,o.y);for(;g<r.length;)o=r[g++],u[l++].m(o.x,o.y+y);for(r=r[r.length-1].x;h<f.length&&f[h].x<=r;)h++;for(;h<f.length&&f[h].x>r;)o=f[h++],u[l++].m(o.x,o.y);for(o=td(t,l),h=0;h<l;h++)o[h].assign(u[h]);id(t,u)}r=p,s=Math.max(0,e)+s.height}return id(t,i),id(t,c),id(t,f),id(t,d),a[0]=n,a[1]=o,new Ln(e,0,r,s)}function td(t,i){if(void 0!==(e=t.My[i])&&void 0!==(e=e.pop()))return e;for(var e=[],n=0;n<i;n++)e[n]=new Se;return e}function id(t,i){var e=i.length,n=t.My[e];void 0===n&&(n=[],t.My[e]=n),n.push(i)}function ed(t,i,e,n){if(null!==i){i.x=e,i.y=n;for(var o=(i=i.children).length,r=0;r<o;r++){var s=i[r];ed(t,s,e+s.ma.x,n+s.ma.y)}}}function nd(t){return(t=t.angle)<=45?0:t<=135?90:t<=225?180:t<=315?270:0}function od(t){var i,e=90===(e=nd(t))||270===e,n=t.layerSpacing;return 0<t.layerSpacingParentOverlap&&(i=Math.min(1,t.layerSpacingParentOverlap),n-=e?t.height*i:t.width*i),n<(e?-t.height:-t.width)&&(n=e?-t.height:-t.width),n}function rd(t){var i,e=90===(e=nd(t))||270===e,n=t.nodeIndent;return 0<t.nodeIndentPastParent&&(i=Math.min(1,t.nodeIndentPastParent),n+=e?t.width*i:t.height*i),Math.max(0,n)}function sd(){Nf.call(this)}function ad(){Lf.call(this),this.initialized=!1,this.parent=null,this.children=[],this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0,this.comments=null,this.ma=new Se(0,0),this.fb=new st(0,0),this.Ma=new Se(0,0),this.Cp=this.Bp=this.rI=!1,this.St=this.At=null,this.sorting=$l,this.comparer=ll,this.angle=0,this.alignment=nu,this.nodeIndentPastParent=this.nodeIndent=0,this.nodeSpacing=20,this.layerSpacing=50,this.layerSpacingParentOverlap=0,this.compaction=fu,this.breadthLimit=0,this.rowSpacing=25,this.commentSpacing=this.rowIndent=10,this.commentMargin=20,this.setsPortSpot=!0,this.portSpot=d,this.setsChildPortSpot=!0,this.childPortSpot=d}function hd(){Af.call(this),this.Rr=new Se(0,0)}function ld(){ks.call(this),this.Pe=null}Lh.prototype.canCopy=function(){if(!this.zG)return!1;var t=this.layer;return null===t||!!t.Uj&&(null===(t=t.g)||!!t.Uj)},Lh.prototype.canDelete=function(){if(!this.EG)return!1;var t=this.layer;return null===t||!!t.zm&&(null===(t=t.g)||!!t.zm)},Lh.prototype.canEdit=function(){if(!this.HI)return!1;var t=this.layer;return null===t||!!t.kw&&(null===(t=t.g)||!!t.kw)},Lh.prototype.canGroup=function(){if(!this.cH)return!1;var t=this.layer;return null===t||!!t.hw&&(null===(t=t.g)||!!t.hw)},Lh.prototype.canMove=function(){if(!this.WH)return!1;var t=this.layer;return null===t||!!t.$k&&(null===(t=t.g)||!!t.$k)},Lh.prototype.canReshape=function(){if(!this.jI)return!1;var t=this.layer;return null===t||!!t.iw&&(null===(t=t.g)||!!t.iw)},Lh.prototype.canResize=function(){if(!this.kI)return!1;var t=this.layer;return null===t||!!t.Us&&(null===(t=t.g)||!!t.Us)},Lh.prototype.canRotate=function(){if(!this.nI)return!1;var t=this.layer;return null===t||!!t.jw&&(null===(t=t.g)||!!t.jw)},Lh.prototype.canSelect=function(){if(!this.zl)return!1;var t=this.layer;return null===t||!!t.nf&&(null===(t=t.g)||!!t.nf)},Nn.defineProperty(Lh,{zG:"copyable"},function(){return 0!=(1&this.Q)},function(t){var i=0!=(1&this.Q);i!==t&&(this.Q^=1,this.h("copyable",i,t))}),Nn.defineProperty(Lh,{EG:"deletable"},function(){return 0!=(2&this.Q)},function(t){var i=0!=(2&this.Q);i!==t&&(this.Q^=2,this.h("deletable",i,t))}),Nn.defineProperty(Lh,{HI:"textEditable"},function(){return 0!=(4&this.Q)},function(t){var i=0!=(4&this.Q);i!==t&&(this.Q^=4,this.h("textEditable",i,t),this.Od())}),Nn.defineProperty(Lh,{cH:"groupable"},function(){return 0!=(8&this.Q)},function(t){var i=0!=(8&this.Q);i!==t&&(this.Q^=8,this.h("groupable",i,t))}),Nn.defineProperty(Lh,{WH:"movable"},function(){return 0!=(16&this.Q)},function(t){var i=0!=(16&this.Q);i!==t&&(this.Q^=16,this.h("movable",i,t))}),Nn.defineProperty(Lh,{uI:"selectionAdorned"},function(){return 0!=(32&this.Q)},function(t){var i=0!=(32&this.Q);i!==t&&(this.Q^=32,this.h("selectionAdorned",i,t),this.Od())}),Nn.defineProperty(Lh,{Gz:"isInDocumentBounds"},function(){return 0!=(64&this.Q)},function(t){var i,e=0!=(64&this.Q);e!==t&&(this.Q^=64,null!==(i=this.g)&&i.qc(),this.h("isInDocumentBounds",e,t))}),Nn.defineProperty(Lh,{iE:"isLayoutPositioned"},function(){return 0!=(128&this.Q)},function(t){var i=0!=(128&this.Q);i!==t&&(this.Q^=128,this.h("isLayoutPositioned",i,t),this.H(t?4:8))}),Nn.defineProperty(Lh,{zl:"selectable"},function(){return 0!=(256&this.Q)},function(t){var i=0!=(256&this.Q);i!==t&&(this.Q^=256,this.h("selectable",i,t),this.Od())}),Nn.defineProperty(Lh,{jI:"reshapable"},function(){return 0!=(512&this.Q)},function(t){var i=0!=(512&this.Q);i!==t&&(this.Q^=512,this.h("reshapable",i,t),this.Od())}),Nn.defineProperty(Lh,{kI:"resizable"},function(){return 0!=(1024&this.Q)},function(t){var i=0!=(1024&this.Q);i!==t&&(this.Q^=1024,this.h("resizable",i,t),this.Od())}),Nn.defineProperty(Lh,{nI:"rotatable"},function(){return 0!=(2048&this.Q)},function(t){var i=0!=(2048&this.Q);i!==t&&(this.Q^=2048,this.h("rotatable",i,t),this.Od())}),Nn.defineProperty(Lh,{hb:"isSelected"},function(){return 0!=(4096&this.Q)},function(t){var i,e,n,o=0!=(4096&this.Q);o!==t&&(i=this.g,t&&(!this.canSelect()||null!==i&&i.selection.count>=i.NH)||(this.Q^=4096,e=!1,null!==i&&(e=i.tb,i.tb=!0,(n=i.selection).Oa(),t?n.add(this):n.remove(this),n.freeze()),this.h("isSelected",o,t),this.Od(),null!==(t=this.wI)&&t(this),null!==i&&(i.ue(),i.tb=e)))}),Nn.defineProperty(Lh,{fh:"isHighlighted"},function(){return 0!=(524288&this.Q)},function(t){var i,e=0!=(524288&this.Q);e!==t&&(this.Q^=524288,null!==(i=this.g)&&((i=i.Qm).Oa(),t?i.add(this):i.remove(this),i.freeze()),this.h("isHighlighted",e,t),this.pa())}),Nn.defineProperty(Lh,{vl:"isShadowed"},function(){return 0!=(8192&this.Q)},function(t){var i=0!=(8192&this.Q);i!==t&&(this.Q^=8192,this.h("isShadowed",i,t),this.pa())}),Lh.prototype.yf=function(t){this.Q=t?131072|this.Q:-131073&this.Q},Nn.defineProperty(Lh,{aE:"isAnimated"},function(){return 0!=(262144&this.Q)},function(t){var i=0!=(262144&this.Q);i!==t&&(this.Q^=262144,this.h("isAnimated",i,t))}),Nn.defineProperty(Lh,{lA:"selectionObjectName"},function(){return this.ks},function(t){var i=this.ks;i!==t&&(this.ks=t,this.qm=null,this.h("selectionObjectName",i,t))}),Nn.defineProperty(Lh,{vI:"selectionAdornmentTemplate"},function(){return this.hs},function(t){var i=this.hs;i!==t&&(this instanceof Ru&&(t.type=ea),this.hs=t,this.h("selectionAdornmentTemplate",i,t))}),Nn.u(Lh,{Wt:"selectionObject"},function(){var t;return null===this.qm&&(null!==(t=this.lA)&&""!==t?(t=this.be(t),this.qm=null!==t?t:this):this instanceof Ru?(t=this.path,this.qm=null!==t?t:this):this.qm=this),this.qm}),Nn.defineProperty(Lh,{wI:"selectionChanged"},function(){return this.js},function(t){var i=this.js;i!==t&&(null!==t&&Nn.j(t,"function",Lh,"selectionChanged"),this.js=t,this.h("selectionChanged",i,t))}),Nn.defineProperty(Lh,{JE:"resizeAdornmentTemplate"},function(){return this.Vr},function(t){var i=this.Vr;i!==t&&(this.Vr=t,this.h("resizeAdornmentTemplate",i,t))}),Nn.defineProperty(Lh,{LE:"resizeObjectName"},function(){return this.Xr},function(t){var i=this.Xr;i!==t&&(this.Xr=t,this.po=null,this.h("resizeObjectName",i,t))}),Nn.u(Lh,{KE:"resizeObject"},function(){var t;return null===this.po&&(null!==(t=this.LE)&&""!==t?(t=this.be(t),this.po=null!==t?t:this):this.po=this),this.po}),Nn.defineProperty(Lh,{lI:"resizeCellSize"},function(){return this.Wr},function(t){var i=this.Wr;i.K(t)||(this.Wr=t=t.R(),this.h("resizeCellSize",i,t))}),Nn.defineProperty(Lh,{oI:"rotateAdornmentTemplate"},function(){return this.Yr},function(t){var i=this.Yr;i!==t&&(this.Yr=t,this.h("rotateAdornmentTemplate",i,t))}),Nn.defineProperty(Lh,{pI:"rotateObjectName"},function(){return this.Zr},function(t){var i=this.Zr;i!==t&&(this.Zr=t,this.qo=null,this.h("rotateObjectName",i,t))}),Nn.u(Lh,{NE:"rotateObject"},function(){var t;return null===this.qo&&(null!==(t=this.pI)&&""!==t?(t=this.be(t),this.qo=null!==t?t:this):this.qo=this),this.qo}),Nn.defineProperty(Lh,{text:"text"},function(){return this.le},function(t){var i=this.le;i!==t&&(this.le=t,this.h("text",i,t))}),Nn.defineProperty(Lh,{Sa:"containingGroup"},function(){return this.uk},function(t){if(this.Pd()){var i=this.uk;if(i!==t){null===t||this!==t&&!t.Xh(this)||(this===t&&Nn.k("Cannot make a Group a member of itself: "+this.toString()),Nn.k("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.H(Sh);var e,n,o=this.g;if(null!==i?Pf(i,this):this instanceof kf&&null!==o&&o.Uk.remove(this),null!==(this.uk=t)?Mf(t,this):this instanceof kf&&null!==o&&o.Uk.add(this),this.H(Th),null!==o&&(e=this.data,n=o.ba,null!==e&&n instanceof pe&&n.lx(e,n.gb(null!==t?t.data:null))),null!==(e=this.uD)&&(n=!0,null!==o&&(n=o.Qa,o.Qa=!0),e(this,i,t),null!==o&&(o.Qa=n)),this instanceof kf)for(De(o=new Q(Lh),this,!0,0,!0),o=o.i;o.next();)if((e=o.value)instanceof Lu)for(e=e.te;e.next();)Vu(e.value);if(this instanceof Lu)for(e=this.te;e.next();)Vu(e.value);this.h("containingGroup",i,t),null!==t&&(null!==(i=t.layer)&&Bo(i,-1,t))}}else Nn.k("cannot set the Part.containingGroup of a Link or Adornment")}),(t=Lh.prototype).ql=function(){var t=this.Sa;null!==t&&(t.P(),null!==t.Gb&&t.Gb.P(),t.bf())},t.pa=function(){var t=this.g;null!==t&&!Ks(this)&&!Pu(this)&&this.isVisible()&&this.mc.G()&&t.pa(Oh(this,this.mc))},t.qt=function(t){t||null!==(t=this.uk)&&Mf(t,this)},t.rt=function(t){t||null!==(t=this.uk)&&Pf(t,this)},t.Lm=function(){var t,i=this.data;null!==i&&(null===(t=this.g)||null!==(t=t.ba)&&t.ex(i))},Nn.defineProperty(Lh,{uD:"containingGroupChanged"},function(){return this.gq},function(t){var i=this.gq;i!==t&&(null!==t&&Nn.j(t,"function",Lh,"containingGroupChanged"),this.gq=t,this.h("containingGroupChanged",i,t))}),Lh.prototype.findSubGraphLevel=function(){return function t(i,e){var n=e.Sa;return null!==n?1+t(i,n):e instanceof Lu&&(n=e.ee,null!==n)?t(i,n):0}(this,this)},Lh.prototype.findTopLevelPart=function(){return function t(i,e){var n=e.Sa;return null!==n||e instanceof Lu&&(n=e.ee,null!==n)?t(i,n):e}(this,this)},Nn.u(Lh,{gp:"isTopLevel"},function(){return!(null!==this.Sa||this instanceof Lu&&this.uf)}),Lh.prototype.isMemberOf=Lh.prototype.Xh=function(t){return t instanceof kf&&function t(i,e,n){if(e===n||null===n)return!1;var o=e.Sa;return!(null===o||o!==n&&!t(i,o,n))||e instanceof Lu&&(e=e.ee,null!==e)&&t(i,e,n)}(this,this,t)},Lh.prototype.findCommonContainingGroup=Lh.prototype.MG=function(t){if(null===t)return null;if(this===t)return this.Sa;for(var i=this;null!==i;)i instanceof kf&&Nu(i,!0),i=i.Sa;for(var e=null,i=t;null!==i;){if(0!=(1048576&i.Q)){e=i;break}i=i.Sa}for(i=this;null!==i;)i instanceof kf&&Nu(i,!1),i=i.Sa;return e},Nn.defineProperty(Lh,{CH:"layoutConditions"},function(){return this.fr},function(t){var i=this.fr;i!==t&&(this.fr=t,this.h("layoutConditions",i,t))}),Lh.prototype.canLayout=function(){if(!this.iE||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.Gc||this instanceof Lu&&this.uf)},Lh.prototype.invalidateLayout=Lh.prototype.H=function(t){var i,e;void 0===t&&(t=16777215),(i=!(!this.iE||0==(t&this.CH))&&(!(null!==(i=this.layer)&&i.Gc||this instanceof Lu&&this.uf)&&(null===(i=this.g)||!i.la.ib)))&&(null!==(i=this.uk)?null!==(e=i.Pb)?e.H():i.H(t):null===(t=this.g)||null!==(e=t.Pb)&&e.H())},Nn.defineProperty(Lh,{FD:"dragComputation"},function(){return this.zq},function(t){var i=this.zq;i!==t&&(null!==t&&Nn.j(t,"function",Lh,"dragComputation"),this.zq=t,this.h("dragComputation",i,t))}),Nn.defineProperty(Lh,{AI:"shadowOffset"},function(){return this.sm},function(t){var i=this.sm;i.K(t)||(this.sm=t=t.R(),this.pa(),this.h("shadowOffset",i,t))}),Nn.defineProperty(Lh,{shadowColor:"shadowColor"},function(){return this.rm},function(t){var i=this.rm;i!==t&&(this.rm=t,this.pa(),this.h("shadowColor",i,t))}),Nn.defineProperty(Lh,{shadowBlur:"shadowBlur"},function(){return this.og},function(t){var i=this.og;i!==t&&(this.og=t,this.pa(),this.h("shadowBlur",i,t))}),Nn.Ja(Du,Lh),Nn.ea("Adornment",Du),Du.prototype.toString=function(){var t=this.Mf;return"Adornment("+this.gc+")"+(null!==t?t.toString():"")},Du.prototype.updateRelationshipsFromData=function(){},Du.prototype.Wm=function(t){var i=this.Zb.Y,e=this.Zb;if(i instanceof Ru&&e instanceof ja){var n=i.path,e=n.Ra;for(i.Wm(t),e=n.Ra,i=(t=this.za.n).length,n=0;n<i;n++){var o=t[n];o.Rf&&o instanceof ja&&(o.Ra=e)}}},Nn.u(Du,{placeholder:"placeholder"},function(){return this.Gb}),Nn.defineProperty(Du,{Zb:"adornedObject"},function(){return this.Db},function(t){var i=this.Mf,e=null;null!==t&&(e=t.Y),null===i||null!==t&&i===e||i.$i(this.gc),this.Db=t,null!==e&&e.Wk(this.gc,this)}),Nn.u(Du,{Mf:"adornedPart"},function(){var t=this.Db;return null!==t?t.Y:null}),Du.prototype.ul=function(){var t=this.Db;return null===t||(null===(t=t.Y)||!Ks(t))},Du.prototype.Pd=function(){return!1},Nn.u(Du,{Sa:"containingGroup"},function(){return null}),Du.prototype.an=function(t,i,e,n,o,r,s){var a;t===Gt&&"elements"===i?o instanceof Tf?(a=o,null===this.Gb?this.Gb=a:this.Gb!==a&&Nn.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")):o instanceof sa&&((a=o.ct(function(t){return t instanceof Tf}))instanceof Tf&&(null===this.Gb?this.Gb=a:this.Gb!==a&&Nn.k("Cannot insert a second Placeholder into the visual tree of an Adornment."))):t===Rt&&"elements"===i&&null!==this.Gb&&(n===this.Gb||n instanceof sa&&this.Gb.tl(n))&&(this.Gb=null),Lh.prototype.an.call(this,t,i,e,n,o,r,s)},Du.prototype.updateAdornments=function(){},Du.prototype.Lm=function(){},Nn.Ja(Lu,Lh),Nn.ea("Node",Lu),Lu.prototype.cloneProtected=function(t){Lh.prototype.cloneProtected.call(this,t),t.gr=this.gr,t.hr=this.hr,t.Lk=this.Lk,t.Zq=this.Zq,t.Js=this.Js,t.Es=this.Es,t.$q=this.$q,t.Zp=this.Zp,t.$p=this.$p.R(),t.Nr=this.Nr},Lu.prototype.Vh=function(t){Lh.prototype.Vh.call(this,t),t.bf(),t.sh=this.sh,t.Wd=null},Lu.DirectionDefault=Rh=Nn.p(Lu,"DirectionDefault",0),Lu.DirectionAbsolute=Nn.p(Lu,"DirectionAbsolute",1),Lu.DirectionRotatedNode=Vh=Nn.p(Lu,"DirectionRotatedNode",2),Lu.DirectionRotatedNodeOrthogonal=Hh=Nn.p(Lu,"DirectionRotatedNodeOrthogonal",3),Lu.SpreadingNone=Nn.p(Lu,"SpreadingNone",10),Lu.SpreadingEvenly=Kh=Nn.p(Lu,"SpreadingEvenly",11),Lu.SpreadingPacked=Uh=Nn.p(Lu,"SpreadingPacked",12),Lu.prototype.invalidateLinkBundle=function(t,i,e){null==i&&(i=""),null==e&&(e=""),null!==(t=Fu(this,t,i,e))&&t.Rm()},Lu.prototype.an=function(t,i,e,n,o,r,s){t===Gt&&"elements"===i?this.Wd=null:t===Rt&&"elements"===i&&(null===this.g?this.Wd=null:n instanceof ks&&ca(this,n,function(t,i){Iu(t,i,!0)})),Lh.prototype.an.call(this,t,i,e,n,o,r,s)},Lu.prototype.invalidateConnectedLinks=Lu.prototype.bf=function(t){void 0===t&&(t=null);for(var i=this.te;i.next();){var e=i.value;null!==t&&t.contains(e)||(zu(this,e.bd),zu(this,e.Fd),e.ic())}},Lu.prototype.ul=function(){return!0},Nn.defineProperty(Lu,{dI:"portSpreading"},function(){return this.Nr},function(t){var i=this.Nr;i!==t&&(this.Nr=t,this.h("portSpreading",i,t),null!==(t=this.g)&&t.la.ib||this.bf())}),Nn.defineProperty(Lu,{mD:"avoidable"},function(){return this.Zp},function(t){var i,e=this.Zp;e!==t&&(this.Zp=t,null!==(i=this.g)&&Wr(i,this),this.h("avoidable",e,t))}),Nn.defineProperty(Lu,{iG:"avoidableMargin"},function(){return this.$p},function(t){"number"==typeof t?t=new ut(t):Nn.A(t,ut,Lu,"avoidableMargin");var i,e=this.$p;e.K(t)||(this.$p=t=t.R(),null!==(i=this.g)&&Wr(i,this),this.h("avoidableMargin",e,t))}),Lu.prototype.canAvoid=function(){return this.mD&&!this.uf},Lu.prototype.getAvoidableRect=function(t){return t.set(this.U),t.fw(this.iG),t},Lu.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.Sa;return t},Lu.prototype.isVisible=function(){if(!Lh.prototype.isVisible.call(this))return!1;var t=!0,i=!0,e=this.g;if(null!==e){if((t=e.Na).cf&&(null!==(t=t.gm.ja(this))&&t.ax))return!0;t=e.Qd,i=e.zA===Mo}if(i){if(null!==(e=this.kl())&&!e.md)return!1}else if(0<(e=t?this.OG():this.PG()).count&&e.all(function(t){return!t.md}))return!1;return null===(e=this.ee)||e.isVisible()},Lu.prototype.nd=function(t){Lh.prototype.nd.call(this,t);for(var i=this.te;i.next();)i.value.nd(t)},Nn.u(Lu,{te:"linksConnected"},function(){return this.fc.i}),Lu.prototype.findLinksConnected=Lu.prototype.KD=function(i){if(void 0===i&&(i=null),null===i)return this.fc.i;var t=new W(this.fc),e=this;return t.Zm=function(t){return t.T===e&&t.wg===i||t.Z===e&&t.qh===i},t},Lu.prototype.findLinksOutOf=Lu.prototype.Aw=function(i){void 0===i&&(i=null);var t=new W(this.fc),e=this;return t.Zm=function(t){return t.T===e&&(null===i||t.wg===i)},t},Lu.prototype.findLinksInto=Lu.prototype.vg=function(i){void 0===i&&(i=null);var t=new W(this.fc),e=this;return t.Zm=function(t){return t.Z===e&&(null===i||t.qh===i)},t},Lu.prototype.findNodesConnected=Lu.prototype.LD=function(t){void 0===t&&(t=null);for(var i=null,e=null,n=this.fc.i;n.next();){var o=n.value;o.T===this?null!==t&&o.wg!==t||(o=o.Z,null!==i?i.add(o):null!==e&&e!==o?((i=new Q(Lu)).add(e),i.add(o)):e=o):o.Z!==this||null!==t&&o.qh!==t||(o=o.T,null!==i?i.add(o):null!==e&&e!==o?((i=new Q(Lu)).add(e),i.add(o)):e=o)}return null!==i?i.i:null!==e?new J(e):U},Lu.prototype.findNodesOutOf=Lu.prototype.PG=function(t){void 0===t&&(t=null);for(var i=null,e=null,n=this.fc.i;n.next();){var o=n.value;o.T!==this||null!==t&&o.wg!==t||(o=o.Z,null!==i?i.add(o):null!==e&&e!==o?((i=new Q(Lu)).add(e),i.add(o)):e=o)}return null!==i?i.i:null!==e?new J(e):U},Lu.prototype.findNodesInto=Lu.prototype.OG=function(t){void 0===t&&(t=null);for(var i=null,e=null,n=this.fc.i;n.next();){var o=n.value;o.Z!==this||null!==t&&o.qh!==t||(o=o.T,null!==i?i.add(o):null!==e&&e!==o?((i=new Q(Lu)).add(e),i.add(o)):e=o)}return null!==i?i.i:null!==e?new J(e):U},Lu.prototype.findLinksBetween=function(i,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var t=new W(this.fc),o=this;return t.Zm=function(t){return!(t.T!==o||t.Z!==i||null!==e&&t.wg!==e||null!==n&&t.qh!==n)||!(t.T!==i||t.Z!==o||null!==n&&t.wg!==n||null!==e&&t.qh!==e)},t},Lu.prototype.findLinksTo=function(i,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var t=new W(this.fc),o=this;return t.Zm=function(t){return!(t.T!==o||t.Z!==i||null!==e&&t.wg!==e||null!==n&&t.qh===n)},t},Nn.defineProperty(Lu,{EH:"linkConnected"},function(){return this.gr},function(t){var i=this.gr;i!==t&&(null!==t&&Nn.j(t,"function",Lu,"linkConnected"),this.gr=t,this.h("linkConnected",i,t))}),Nn.defineProperty(Lu,{FH:"linkDisconnected"},function(){return this.hr},function(t){var i=this.hr;i!==t&&(null!==t&&Nn.j(t,"function",Lu,"linkDisconnected"),this.hr=t,this.h("linkDisconnected",i,t))}),Nn.defineProperty(Lu,{Pw:"linkValidation"},function(){return this.Lk},function(t){var i=this.Lk;i!==t&&(null!==t&&Nn.j(t,"function",Lu,"linkValidation"),this.Lk=t,this.h("linkValidation",i,t))}),Lu.prototype.updateRelationshipsFromData=function(){Lh.prototype.updateRelationshipsFromData.call(this);var t,i,e,n,o=this.data;null!==o&&(null===(e=this.g)||(t=e.ba)instanceof me&&(i=t.Pm(o),(e=e.Ye(i))!==(n=this.kl())&&(e=null!==n?t.gb(n.data):void 0,"function"==typeof(n=t.wp)?n(o,e):o[n]=e,t.oh(o,i))))},Lu.prototype.qt=function(t){Lh.prototype.qt.call(this,t),t||(Eu(this),null!==(t=this.$n)&&Ku(t,this))},Lu.prototype.rt=function(t){Lh.prototype.rt.call(this,t),t||null!==(t=this.$n)&&null!==t.Ce&&(t.Ce.remove(this),t.P())},Lu.prototype.Lm=function(){if(0<this.fc.count){var t=this.g;if(null!==t)for(var i=t.nb.ED,e=this.fc.copy().i;e.next();){var n=e.value;i?t.remove(n):(n.T===this&&(n.T=null),n.Z===this&&(n.Z=null))}}this.ee=null,Lh.prototype.Lm.call(this)},Nn.u(Lu,{uf:"isLinkLabel"},function(){return null!==this.$n}),Nn.defineProperty(Lu,{ee:"labeledLink"},function(){return this.$n},function(t){var i,e,n,o,r,s=this.$n;s!==t&&(i=this.g,e=this.data,null===s||(null!==s.Ce&&(s.Ce.remove(this),s.P()),null===i||null===e||i.la.ib)||(n=s.data,o=i.ba,null!==n&&o instanceof pe&&(void 0!==(r=o.gb(e))&&o.EE(n,r))),null!==(this.$n=t)&&(Ku(t,this),null===i||null===e||i.la.ib||(n=t.data,o=i.ba,null!==n&&o instanceof pe&&(void 0!==(r=o.gb(e))&&o.Xy(n,r)))),zs(this),this.h("labeledLink",s,t))}),Lu.prototype.findPort=Lu.prototype.jl=function(t){if(null===this.Wd){if(""===t&&!1===this.Ah)return this;qu(this)}var i=this.Wd.ja(t);return null!==i||""!==t&&null!==(i=this.Wd.ja(""))?i:this},Nn.u(Lu,{port:"port"},function(){return this.jl("")}),Nn.u(Lu,{ports:"ports"},function(){return null===this.Wd&&qu(this),this.Wd.nE}),Lu.prototype.isInTreeOf=function(t){if(null===t||t===this)return!1;var i=!0,e=this.g;if(null!==e&&(i=e.Qd),e=this,i)for(;e!==t;){for(var i=null,n=e.fc.i;n.next();){var o=n.value;if(o.Hc&&((i=o.T)!==e&&i!==this))break}if(i===this||null===i||i===e)return!1;e=i}else for(;e!==t;){for(i=null,n=e.fc.i;n.next()&&(!(o=n.value).Hc||((i=o.Z)===e||i===this)););if(i===this||null===i||i===e)return!1;e=i}return!0},Lu.prototype.findTreeRoot=function(){var t=!0,i=this.g;if(null!==i&&(t=i.Qd),i=this,t)for(;;){for(var t=null,e=i.fc.i;e.next();){var n=e.value;if(n.Hc&&((t=n.T)!==i&&t!==this))break}if(t===this)return this;if(null===t||t===i)return i;i=t}else for(;;){for(t=null,e=i.fc.i;e.next()&&(!(n=e.value).Hc||((t=n.Z)===i||t===this)););if(t===this)return this;if(null===t||t===i)return i;i=t}},Lu.prototype.findCommonTreeParent=function(t){if(null===t)return null;if(this===t)return this;for(var i=this;null!==i;)Nu(i,!0),i=i.kl();for(var e=null,i=t;null!==i;){if(0!=(1048576&i.Q)){e=i;break}i=i.kl()}for(i=this;null!==i;)Nu(i,!1),i=i.kl();return e},Lu.prototype.findTreeParentLink=Lu.prototype.Yo=function(){var t=!0,i=this.g;if(null!==i&&(t=i.Qd),i=this.fc.i,t){for(;i.next();)if((t=i.value).Hc&&t.T!==this)return t}else for(;i.next();)if((t=i.value).Hc&&t.Z!==this)return t;return null},Lu.prototype.findTreeParentNode=Lu.prototype.kl=function(){var t=this.Rj;if(null===t)return null;if(t instanceof Lu)return t;var i=!0;if(null!==(t=this.g)&&(i=t.Qd),t=this.fc.i,i){for(;t.next();)if((i=t.value).Hc&&(i=i.T)!==this)return this.Rj=i}else for(;t.next();)if((i=t.value).Hc&&(i=i.Z)!==this)return this.Rj=i;return this.Rj=null},Lu.prototype.findTreeParentChain=function(){var t=new Q(Lh);return function t(i,e){var n;null!==i&&(e.add(i),null!==(n=i.Yo())&&(e.add(n),t(i.kl(),e)))}(this,t),t},Lu.prototype.findTreeLevel=function(){return function t(i,e){var n=e.kl();return null===n?0:1+t(i,n)}(this,this)},Lu.prototype.findTreeChildrenLinks=Lu.prototype.Cw=function(){var i,t=!0,e=this.g;return null!==e&&(t=e.Qd),t?(t=new W(this.fc),i=this,t.Zm=function(t){return!(!t.Hc||t.T!==i)}):(t=new W(this.fc),i=this,t.Zm=function(t){return!(!t.Hc||t.Z!==i)}),t},Lu.prototype.findTreeChildrenNodes=Lu.prototype.ND=function(){var t=!0,i=this.g;null!==i&&(t=i.Qd);var e=i=null,n=this.fc.i;if(t)for(;n.next();)(t=n.value).Hc&&t.T===this&&(t=t.Z,null!==i?i.add(t):null!==e&&e!==t?((i=new Dn(Lu)).add(e),i.add(t)):e=t);else for(;n.next();)(t=n.value).Hc&&t.Z===this&&(t=t.T,null!==i?i.add(t):null!==e&&e!==t?((i=new Dn(Lu)).add(e),i.add(t)):e=t);return null!==i?i.i:null!==e?new J(e):U},Lu.prototype.findTreeParts=function(t){void 0===t&&(t=1/0),Nn.j(t,"number",Lu,"collapseTree:level");var i=new Q(Lh);return De(i,this,!1,t,!0),i},Lu.prototype.collapseTree=Lu.prototype.collapseTree=function(t){void 0===t&&(t=1),Nn.Ue(t,Lu,"collapseTree:level"),t<1&&(t=1);var i,e=this.g;null===e||e.eh||(e.eh=!0,(i=new Q(Lu)).add(this),function t(i,e,n,o,r,s,a){if(1<o)for(var h=n?i.Aw():i.vg();h.next();){var l=h.value;l.Hc&&(null===(l=l.yz(i))||l===i||e.contains(l)||(e.add(l),t(l,e,n,o-1,r,s,a)))}else Gu(i,e,n,r,s,a)}(this,i,e.Qd,t,e.Na,this,e.zA===Mo),e.eh=!1)},Lu.prototype.expandTree=Lu.prototype.expandTree=function(t){void 0===t&&(t=2),Nn.Ue(t,Lu,"expandTree:level"),t<2&&(t=2);var i,e=this.g;null===e||e.eh||(e.eh=!0,(i=new Q(Lu)).add(this),function t(i,e,n,o,r,s,a){for(var h=s!==i&&i.md,l=n?i.Aw():i.vg();l.next();){var u=l.value;u.Hc&&(h||u.Lf||u.ic(),null!==(u=u.yz(i))&&u!==i&&!e.contains(u)&&(e.add(u),h||(u.nd(!0),u.ql(),a&&jo(r,u,s)),2<o||u.hu))&&(u.hu=!1,t(u,e,n,o-1,r,s,a))}i.md=!0}(this,i,e.Qd,t,e.Na,this,e.zA===Mo),e.eh=!1)},Nn.defineProperty(Lu,{md:"isTreeExpanded"},function(){return this.Zq},function(t){var i,e,n=this.Zq;n!==t&&(this.Zq=t,i=this.g,this.h("isTreeExpanded",n,t),null!==(n=this.OI)&&(e=!0,null!==i&&(e=i.Qa,i.Qa=!0),n(this),null!==i&&(i.Qa=e)),null!==i&&i.la.ib?this.nd(t):t?this.expandTree():this.collapseTree())}),Nn.defineProperty(Lu,{hu:"wasTreeExpanded"},function(){return this.Js},function(t){var i=this.Js;i!==t&&(this.Js=t,this.h("wasTreeExpanded",i,t))}),Nn.defineProperty(Lu,{OI:"treeExpandedChanged"},function(){return this.Es},function(t){var i=this.Es;i!==t&&(null!==t&&Nn.j(t,"function",Lu,"treeExpandedChanged"),this.Es=t,this.h("treeExpandedChanged",i,t))}),Nn.defineProperty(Lu,{Wi:"isTreeLeaf"},function(){return this.$q},function(t){var i=this.$q;i!==t&&(this.$q=t,this.h("isTreeLeaf",i,t))}),Nn.Ja(Ru,Lh),Nn.ea("Link",Ru),Ru.prototype.cloneProtected=function(t){Lh.prototype.cloneProtected.call(this,t),t.zh=this.zh,t.Hq=this.Hq,t.Rh=this.Rh,t.Ds=this.Ds,t.Sr=this.Sr,t.Tr=this.Tr,t.Ur=this.Ur,t.ar=this.ar,t.Sp=this.Sp,t.lq=this.lq,t.oq=this.oq,t.pq=this.pq,t.mm=this.mm,t.ss=this.ss,null!==this.ga&&(t.ga=this.ga.copy())},Ru.prototype.Vh=function(t){Lh.prototype.Vh.call(this,t),this.zh=t.zh,this.Rh=t.Rh,t.Ee=null,t.ic(),t.ci=this.ci},Ru.Normal=Jh=Nn.p(Ru,"Normal",1),Ru.Orthogonal=Nn.p(Ru,"Orthogonal",2),Ru.AvoidsNodes=Nn.p(Ru,"AvoidsNodes",6),Ru.AvoidsNodesStraight=Yh=Nn.p(Ru,"AvoidsNodesStraight",7),Ru.None=Wh=Nn.p(Ru,"None",0),Ru.Bezier=Xh=Nn.p(Ru,"Bezier",9),Ru.JumpGap=Zh=Nn.p(Ru,"JumpGap",10),Ru.JumpOver=Qh=Nn.p(Ru,"JumpOver",11),Ru.End=$h=Nn.p(Ru,"End",17),Ru.Scale=_h=Nn.p(Ru,"Scale",18),Ru.Stretch=tl=Nn.p(Ru,"Stretch",19),Ru.OrientAlong=il=Nn.p(Ru,"OrientAlong",21),Ru.OrientPlus90=el=Nn.p(Ru,"OrientPlus90",22),Ru.OrientMinus90=nl=Nn.p(Ru,"OrientMinus90",23),Ru.OrientOpposite=ol=Nn.p(Ru,"OrientOpposite",24),Ru.OrientUpright=rl=Nn.p(Ru,"OrientUpright",25),Ru.OrientPlus90Upright=sl=Nn.p(Ru,"OrientPlus90Upright",26),Ru.OrientMinus90Upright=al=Nn.p(Ru,"OrientMinus90Upright",27),Ru.OrientUpright45=hl=Nn.p(Ru,"OrientUpright45",28),Ru.prototype.Ke=function(){null===this.ga&&(this.ga=new wf)},Ru.prototype.ul=function(){var t=this.T;if(null!==t){var i=t.findVisibleNode();if(null!==i&&(t=i),Ks(t)||Pu(t))return!1}return null===(t=this.Z)||(null!==(i=t.findVisibleNode())&&(t=i),!Ks(t)&&!Pu(t))},Ru.prototype.pA=function(){return!1},Ru.prototype.Pd=function(){return!1},Ru.prototype.computeAngle=function(t,i,e){switch(t=0,i){default:case Wh:t=0;break;case il:t=e;break;case el:t=e+90;break;case nl:t=e-90;break;case ol:t=e+180;break;case rl:90<(t=Ni(e))&&t<270&&(t-=180);break;case sl:90<(t=Ni(e+90))&&t<270&&(t-=180);break;case al:90<(t=Ni(e-90))&&t<270&&(t-=180);break;case hl:if(45<(t=Ni(e))&&t<135||225<t&&t<315)return 0;90<t&&t<270&&(t-=180)}return Ni(t)},Nn.defineProperty(Ru,{T:"fromNode"},function(){return this.eg},function(t){var i,e,n,o,r,s=this.eg;s!==t&&(i=this.bd,null!==s&&(this.qg!==s&&Ou(s,this,i),hf(this),this.H(Sh)),null!==(this.eg=t)&&this.nd(t.isVisible()),this.pi=null,this.ic(),null!==(e=this.g)&&(n=this.data,o=e.ba,null!==n&&(o instanceof pe?(r=null!==t?t.data:null,o.kx(n,o.gb(r))):o instanceof me&&(r=null!==t?t.data:null,e.Qd?o.oh(n,o.gb(r)):(null!==s&&o.oh(s.data,void 0),o.oh(r,o.gb(null!==this.qg?this.qg.data:null)))))),n=this.bd,null!==(o=this.QD)&&(r=!0,null!==e&&(r=e.Qa,e.Qa=!0),o(this,i,n),null!==e&&(e.Qa=r)),null!==t&&(this.qg!==t&&Bu(t,this,n),af(this),this.H(Th)),this.h("fromNode",s,t),Vu(this))}),Nn.defineProperty(Ru,{wg:"fromPortId"},function(){return this.zh},function(t){var i,e,n,o,r,s=this.zh;s!==t&&(null!==(i=this.bd)&&zu(this.T,i),hf(this),this.zh=t,null!==(e=this.bd)&&zu(this.T,e),null!==(n=this.g)&&(o=this.data,r=n.ba,null!==o&&r instanceof pe&&r.nA(o,t)),i!==e&&(this.pi=null,this.ic(),null!==(o=this.QD)&&(r=!0,null!==n&&(r=n.Qa,n.Qa=!0),o(this,i,e),null!==n&&(n.Qa=r))),af(this),this.h("fromPortId",s,t))}),Nn.u(Ru,{bd:"fromPort"},function(){var t=this.eg;return null===t?null:t.jl(this.zh)}),Nn.defineProperty(Ru,{QD:"fromPortChanged"},function(){return this.Hq},function(t){var i=this.Hq;i!==t&&(null!==t&&Nn.j(t,"function",Ru,"fromPortChanged"),this.Hq=t,this.h("fromPortChanged",i,t))}),Nn.defineProperty(Ru,{Z:"toNode"},function(){return this.qg},function(t){var i,e,n,o,r,s=this.qg;s!==t&&(i=this.Fd,null!==s&&(this.eg!==s&&Ou(s,this,i),hf(this),this.H(Sh)),null!==(this.qg=t)&&this.nd(t.isVisible()),this.pi=null,this.ic(),null!==(e=this.g)&&(n=this.data,o=e.ba,null!==n&&(o instanceof pe?(r=null!==t?t.data:null,o.ox(n,o.gb(r))):o instanceof me&&(r=null!==t?t.data:null,e.Qd?(null!==s&&o.oh(s.data,void 0),o.oh(r,o.gb(null!==this.eg?this.eg.data:null))):o.oh(n,o.gb(r))))),n=this.Fd,null!==(o=this.fF)&&(r=!0,null!==e&&(r=e.Qa,e.Qa=!0),o(this,i,n),null!==e&&(e.Qa=r)),null!==t&&(this.eg!==t&&Bu(t,this,n),af(this),this.H(Th)),this.h("toNode",s,t),Vu(this))}),Nn.defineProperty(Ru,{qh:"toPortId"},function(){return this.Rh},function(t){var i,e,n,o,r,s=this.Rh;s!==t&&(null!==(i=this.Fd)&&zu(this.Z,i),hf(this),this.Rh=t,null!==(e=this.Fd)&&zu(this.Z,e),null!==(n=this.g)&&(o=this.data,r=n.ba,null!==o&&r instanceof pe&&r.qA(o,t)),i!==e&&(this.pi=null,this.ic(),null!==(o=this.fF)&&(r=!0,null!==n&&(r=n.Qa,n.Qa=!0),o(this,i,e),null!==n&&(n.Qa=r))),af(this),this.h("toPortId",s,t))}),Nn.u(Ru,{Fd:"toPort"},function(){var t=this.qg;return null===t?null:t.jl(this.Rh)}),Nn.defineProperty(Ru,{fF:"toPortChanged"},function(){return this.Ds},function(t){var i=this.Ds;i!==t&&(null!==t&&Nn.j(t,"function",Ru,"toPortChanged"),this.Ds=t,this.h("toPortChanged",i,t))}),Nn.defineProperty(Ru,{xb:"fromSpot"},function(){return null!==this.ga?this.ga.oj:d},function(t){this.Ke();var i=this.ga.oj;i.K(t)||(t=t.R(),this.ga.oj=t,this.h("fromSpot",i,t),this.ic())}),Nn.defineProperty(Ru,{ll:"fromEndSegmentLength"},function(){return null!==this.ga?this.ga.mj:NaN},function(t){this.Ke();var i=this.ga.mj;i!==t&&(t<0&&Nn.va(t,">= 0",Ru,"fromEndSegmentLength"),this.ga.mj=t,this.h("fromEndSegmentLength",i,t),this.ic())}),Nn.defineProperty(Ru,{kt:"fromEndSegmentDirection"},function(){return null!==this.ga?this.ga.lj:Rh},function(t){this.Ke();var i=this.ga.lj;i!==t&&(this.ga.lj=t,this.h("fromEndSegmentDirection",i,t),this.ic())}),Nn.defineProperty(Ru,{lt:"fromShortLength"},function(){return null!==this.ga?this.ga.nj:NaN},function(t){this.Ke();var i=this.ga.nj;i!==t&&(this.ga.nj=t,this.h("fromShortLength",i,t),this.ic())}),Nn.defineProperty(Ru,{yb:"toSpot"},function(){return null!==this.ga?this.ga.Qj:d},function(t){this.Ke();var i=this.ga.Qj;i.K(t)||(t=t.R(),this.ga.Qj=t,this.h("toSpot",i,t),this.ic())}),Nn.defineProperty(Ru,{Fl:"toEndSegmentLength"},function(){return null!==this.ga?this.ga.Oj:NaN},function(t){this.Ke();var i=this.ga.Oj;i!==t&&(t<0&&Nn.va(t,">= 0",Ru,"toEndSegmentLength"),this.ga.Oj=t,this.h("toEndSegmentLength",i,t),this.ic())}),Nn.defineProperty(Ru,{eu:"toEndSegmentDirection"},function(){return null!==this.ga?this.ga.Nj:Rh},function(t){this.Ke();var i=this.ga.Nj;i!==t&&(this.ga.Nj=t,this.h("toEndSegmentDirection",i,t),this.ic())}),Nn.defineProperty(Ru,{fu:"toShortLength"},function(){return null!==this.ga?this.ga.Pj:NaN},function(t){this.Ke();var i=this.ga.Pj;i!==t&&(this.ga.Pj=t,this.h("toShortLength",i,t),this.ic())}),Ru.prototype.ql=function(){var t=this.Sa;null!==t&&this.T!==t&&this.Z!==t&&t.qw&&Lh.prototype.ql.call(this)},Ru.prototype.getOtherNode=Ru.prototype.yz=function(t){var i=this.T;return t===i?this.Z:i},Ru.prototype.getOtherPort=function(t){var i=this.bd;return t===i?this.Fd:i},Nn.u(Ru,{UJ:"isLabeledLink"},function(){return null!==this.Ce&&0<this.Ce.count}),Nn.u(Ru,{Sf:"labelNodes"},function(){return null===this.Ce?U:this.Ce.i}),Ru.prototype.qt=function(t){Lh.prototype.qt.call(this,t),nf(this)&&rf(this,this.U),t||(null!==(t=this.eg)&&Bu(t,this,this.bd),null!==(t=this.qg)&&Bu(t,this,this.Fd),af(this))},Ru.prototype.rt=function(t){Lh.prototype.rt.call(this,t),nf(this)&&rf(this,this.U),t||(null!==(t=this.eg)&&Ou(t,this,this.bd),null!==(t=this.qg)&&Ou(t,this,this.Fd),hf(this))},Ru.prototype.Lm=function(){if(this.Lf=!0,null!==this.Ce){var t=this.g;if(null!==t)for(var i=this.Ce.copy().i;i.next();)t.remove(i.value)}null===(i=this.data)||null!==(t=this.g)&&((t=t.ba)instanceof pe?t.bx(i):t instanceof me&&t.oh(i,void 0))},Ru.prototype.updateRelationshipsFromData=function(){var i=this.data;if(null!==i){var t=this.g;if(null!==t){var e=t.ba;if(e instanceof pe){var n=e.ol(i),o=t.Ye(n),r=this.T;o!==r&&(o=null!==r?e.gb(r.data):void 0,"function"==typeof(r=e.jp)?r(i,o):i[r]=o,e.kx(i,n)),n=e.pl(i),(o=t.Ye(n))!==(r=this.Z)&&(o=null!==r?e.gb(r.data):void 0,"function"==typeof(r=e.lp)?r(i,o):i[r]=o,e.ox(i,n));var s=e.$j(i);if(0<s.length||0<this.Sf.count){if(1===s.length&&1===this.Sf.count&&(t=s[0],n=this.Sf.first(),e.gb(n.data)===t))return;var n=(new Q).Tc(s),a=new Q;this.Sf.each(function(t){null!==t.data&&(void 0!==(t=e.gb(t.data))&&a.add(t))}),(t=a.copy()).fA(n),(n=n.copy()).fA(a),(0<t.count||0<n.count)&&(s.length=0,a.each(function(t){s.push(t)}),t.each(function(t){e.EE(i,t)}),n.each(function(t){e.Xy(i,t)}))}}}}},Ru.prototype.move=function(t){var i=this.position,e=i.x;for(isNaN(e)&&(e=0),i=i.y,isNaN(i)&&(i=0),e=t.x-e,i=t.y-i,Lh.prototype.move.call(this,t),this.wl(e,i),t=this.Sf;t.next();){var n=t.value,o=n.position;n.moveTo(o.x+e,o.y+i)}},Nn.defineProperty(Ru,{gI:"relinkableFrom"},function(){return this.Sr},function(t){var i=this.Sr;i!==t&&(this.Sr=t,this.h("relinkableFrom",i,t),this.Od())}),Nn.defineProperty(Ru,{hI:"relinkableTo"},function(){return this.Tr},function(t){var i=this.Tr;i!==t&&(this.Tr=t,this.h("relinkableTo",i,t),this.Od())}),Ru.prototype.canRelinkFrom=function(){if(!this.gI)return!1;var t=this.layer;return null===t||!!t.Am&&!(null!==(t=t.g)&&!t.Am)},Ru.prototype.canRelinkTo=function(){if(!this.hI)return!1;var t=this.layer;return null===t||!!t.Am&&!(null!==(t=t.g)&&!t.Am)},Nn.defineProperty(Ru,{Rt:"resegmentable"},function(){return this.Ur},function(t){var i=this.Ur;i!==t&&(this.Ur=t,this.h("resegmentable",i,t),this.Od())}),Nn.defineProperty(Ru,{Hc:"isTreeLink"},function(){return this.ar},function(t){var i=this.ar;i!==t&&(this.ar=t,this.h("isTreeLink",i,t),null!==this.T&&Eu(this.T),null!==this.Z&&Eu(this.Z))}),Nn.u(Ru,{path:"path"},function(){var t=this.Xe();return t instanceof ja?t:null}),Nn.u(Ru,{bn:"routeBounds"},function(){this.hn();var t=new Ln,i=1/0,e=1/0,n=this.oa;if(0===n)t.m(NaN,NaN,0,0);else{if(1===n)n=this.l(0),i=Math.min(n.x,i),e=Math.min(n.y,e),t.m(n.x,n.y,0,0);else if(2===n){var o=this.l(0),r=this.l(1),i=Math.min(o.x,r.x),e=Math.min(o.y,r.y);t.m(o.x,o.y,0,0),t.dj(r)}else if(this.computeCurve()===Xh&&3<=n&&!this.jc)if(i=(o=this.l(0)).x,e=o.y,t.m(i,e,0,0),3===n)n=this.l(1),i=Math.min(n.x,i),e=Math.min(n.y,e),r=this.l(2),i=Math.min(r.x,i),e=Math.min(r.y,e),yi(o.x,o.y,n.x,n.y,n.x,n.y,r.x,r.y,.5,t);else for(var s=3;s<n;s+=3){var a=this.l(s-2);n<=s+3&&(s=n-1);var h=this.l(s-1),r=this.l(s);yi(o.x,o.y,a.x,a.y,h.x,h.y,r.x,r.y,.5,t),i=Math.min(r.x,i),e=Math.min(r.y,e),o=r}else for(o=this.l(0),r=this.l(1),i=Math.min(o.x,r.x),e=Math.min(o.y,r.y),t.m(o.x,o.y,0,0),t.dj(r),s=2;s<n;s++)o=this.l(s),i=Math.min(o.x,i),e=Math.min(o.y,e),t.dj(o);this.Oy.m(i-t.x,e-t.y)}return this.Hv=t}),Nn.u(Ru,{tE:"midPoint"},function(){return this.hn(),this.computeMidPoint(new Se)}),Ru.prototype.computeMidPoint=function(t){if(0===(n=this.oa))return t.assign(ei),t;if(1===n)return t.assign(this.l(0)),t;if(2===n){var i=this.l(0),e=this.l(1);return t.m((i.x+e.x)/2,(i.y+e.y)/2),t}if(this.computeCurve()===Xh&&3<=n&&!this.jc){if(3===n)return this.l(1);var n,o,r,s,a,h=3*((i=(n-1)/3|0)/2|0);return 1==i%2?(i=this.l(h),e=this.l(h+1),o=this.l(h+2),h=this.l(h+3),n=e.x,s=e.y,e=o.x,a=o.y,o=(n+e)/2,r=(s+a)/2,s=((i.y+s)/2+r)/2,a=(r+(a+h.y)/2)/2,t.x=(((i.x+n)/2+o)/2+(o+(e+h.x)/2)/2)/2,t.y=(s+a)/2):t.assign(this.l(h)),t}for(h=0,o=Nn.jb(),s=0;s<n-1;s++)i=0,i=this.l(s),e=this.l(s+1),ci(i.x,e.x)?(i=e.y-i.y)<0&&(i=-i):ci(i.y,e.y)?(i=e.x-i.x)<0&&(i=-i):i=Math.sqrt(i.rf(e)),o.push(i),h+=i;for(e=s=i=0;i<h/2&&s<n&&!(h/2<i+(e=o[s]));)i+=e,s++;return Nn.sa(o),n=this.l(s),o=this.l(s+1),n.x===o.x?n.y>o.y?t.m(n.x,n.y-(h/2-i)):t.m(n.x,n.y+(h/2-i)):n.y===o.y?n.x>o.x?t.m(n.x-(h/2-i),n.y):t.m(n.x+(h/2-i),n.y):(i=(h/2-i)/e,t.m(n.x+i*(o.x-n.x),n.y+i*(o.y-n.y))),t},Nn.u(Ru,{sE:"midAngle"},function(){return this.hn(),this.computeMidAngle()}),Ru.prototype.computeMidAngle=function(){if((n=this.oa)<2)return NaN;if(this.computeCurve()===Xh&&4<=n&&!this.jc){var t=3*((i=(n-1)/3|0)/2|0);if(1==i%2){var t=Math.floor(t),i=this.l(t),e=this.l(t+1),n=this.l(t+2),t=this.l(t+3),o=e.x,e=e.y,r=n.x,s=(o+r)/2,a=(e+(n=n.y))/2;return f(((i.x+o)/2+s)/2,((i.y+e)/2+a)/2,(s+(r+t.x)/2)/2,(a+(n+t.y)/2)/2)}if(0<t&&t+1<n)return i=this.l(t-1),e=this.l(t+1),i.xc(e)}return t=n/2|0,0==n%2?(i=this.l(t-1),e=this.l(t),4<=n&&i.Fc(e)&&(i=this.l(t-2),n=this.l(t+1),t=i.rf(e),!((o=e.rf(n))+10<t))?t+10<o?e.xc(n):i.xc(n):i.xc(e)):(i=this.l(t-1),e=this.l(t),n=this.l(t+1),t=i.rf(e),(o=e.rf(n))+10<t?i.xc(e):t+10<o?e.xc(n):i.xc(n))},Nn.defineProperty(Ru,{points:"points"},function(){return this.Zc},function(t){var i=this.Zc;if(i!==t){var e=null;if(Array.isArray(t)){if(r=0==t.length%2)for(var n=0;n<t.length;n++)if("number"!=typeof t[n]||isNaN(t[n])){r=!1;break}if(r)for(e=new Dn(Se),r=0;r<t.length/2;r++)n=new Se(t[2*r],t[2*r+1]).freeze(),e.add(n);else{for(var o=!0,r=0;r<t.length;r++)if(n=t[r],!Nn.Ta(n)||"number"!=typeof n.x||isNaN(n.x)||"number"!=typeof n.y||isNaN(n.y)){o=!1;break}if(o)for(e=new Dn(Se),r=0;r<t.length;r++)n=t[r],e.add(new Se(n.x,n.y).freeze());else Nn.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+t)}}else if(t instanceof Dn)for(t=(e=t.copy()).i;t.next();)t.value.freeze();else Nn.k("Link.points value is not an instance of List or Array: "+t);e.freeze(),this.Zc=e,this.re(),this.P(),Uu(this),null!==(t=this.g)&&(t.Tm||t.la.ib||t.Qw.add(this),t.Na.pc&&(this.ro=e)),this.h("points",i,e)}}),Nn.u(Ru,{oa:"pointsCount"},function(){return this.Zc.count}),Ru.prototype.getPoint=Ru.prototype.l=function(t){return this.Zc.n[t]},Ru.prototype.setPoint=Ru.prototype.zf=function(t,i){null===this.Ee&&Nn.k("Call Link.startRoute before modifying the points of the route."),this.Zc.Hg(t,i)},Ru.prototype.setPointAt=Ru.prototype.V=function(t,i,e){null===this.Ee&&Nn.k("Call Link.startRoute before modifying the points of the route."),this.Zc.Hg(t,new Se(i,e))},Ru.prototype.insertPoint=function(t,i){null===this.Ee&&Nn.k("Call Link.startRoute before modifying the points of the route."),this.Zc.Ad(t,i)},Ru.prototype.insertPointAt=Ru.prototype.w=function(t,i,e){null===this.Ee&&Nn.k("Call Link.startRoute before modifying the points of the route."),this.Zc.Ad(t,new Se(i,e))},Ru.prototype.addPoint=Ru.prototype.Sh=function(t){null===this.Ee&&Nn.k("Call Link.startRoute before modifying the points of the route."),this.Zc.add(t)},Ru.prototype.addPointAt=Ru.prototype.Yk=function(t,i){null===this.Ee&&Nn.k("Call Link.startRoute before modifying the points of the route."),this.Zc.add(new Se(t,i))},Ru.prototype.removePoint=Ru.prototype.FE=function(t){null===this.Ee&&Nn.k("Call Link.startRoute before modifying the points of the route."),this.Zc.Vc(t)},Ru.prototype.clearPoints=Ru.prototype.Po=function(){null===this.Ee&&Nn.k("Call Link.startRoute before modifying the points of the route."),this.Zc.clear()},Ru.prototype.movePoints=Ru.prototype.wl=function(t,i){for(var e=new Dn(Se),n=this.Zc.i;n.next();){var o=n.value;e.add(new Se(o.x+t,o.y+i).freeze())}e.freeze(),n=this.Zc,this.Zc=e,this.P(),Uu(this),null!==(o=this.g)&&o.Na.pc&&(this.ro=e),this.h("points",n,e)},Ru.prototype.startRoute=Ru.prototype.Bl=function(){null===this.Ee&&(this.Ee=this.Zc,this.Zc=this.Zc.copy())},Ru.prototype.commitRoute=Ru.prototype.Ni=function(){if(null!==this.Ee){for(var t=this.Ee,i=this.Zc,e=1/0,n=1/0,o=t.n,r=o.length,s=0;s<r;s++)var a=o[s],e=Math.min(a.x,e),n=Math.min(a.y,n);for(var h=1/0,l=1/0,u=i.n,f=u.length,s=0;s<f;s++)a=u[s],h=Math.min(a.x,h),l=Math.min(a.y,l),a.freeze();if(i.freeze(),f===r){for(s=0;s<f;s++)if(r=o[s],a=u[s],r.x-e!=a.x-h||r.y-n!=a.y-l){this.P(),this.re();break}}else this.P(),this.re();(this.Ee=null)!==(e=this.g)&&e.Na.pc&&(this.ro=i),Uu(this),this.h("points",t,i)}},Ru.prototype.rollbackRoute=Ru.prototype.mI=function(){null!==this.Ee&&(this.Zc=this.Ee,this.Ee=null)},Ru.prototype.invalidateRoute=Ru.prototype.ic=function(){var t,i;this.Ly||((i=this.g)&&(i.Qw.contains(this)||i.la.ib||i.Na.wH&&!i.Na.cf)||null!==(i=this.path)&&(this.Lf&&(null===(t=this.bd)||null!==(t=t.km)&&t.Rm(),null===(t=this.Fd)||null!==(t=t.km)&&t.Rm()),this.Lf=!1,this.P(),i.P()))},Nn.defineProperty(Ru,{Kp:"suspendsRouting"},function(){return this.Ly},function(t){this.Ly=t}),Ru.prototype.updateRoute=Ru.prototype.hn=function(){if(!this.Lf&&!this.Nx){var t=!0;try{this.Nx=!0,this.Bl(),t=this.computePoints()}finally{this.Nx=!1,t?this.Ni():this.mI()}}},Ru.prototype.computePoints=function(){if(null===(o=this.g))return!1;var t=this.T,i=null;if(null===t?(o.nm||(o.Iv=new ja,o.Iv.xa=Zt,o.Iv.lb=0,o.nm=new Lu,o.nm.add(o.Iv),o.nm.sf()),this.Cn&&(o.nm.position=o.nm.location=this.Cn,o.nm.sf(),t=o.nm,i=o.Iv)):i=this.bd,null===i||t.isVisible()||(null!==(e=t.findVisibleNode())&&e!==t?i=(t=e).jl(""):t=e),null===(this.IC=t)||!t.location.G())return!1;for(;!(null===i||i.U.G()&&i.Xi());)i=i.S;if(null===i)return!1;var e,n=null;if(null===(e=this.Z)?(o.om||(o.Jv=new ja,o.Jv.xa=Zt,o.Jv.lb=0,o.om=new Lu,o.om.add(o.Jv),o.om.sf()),this.Gn&&(o.om.position=o.om.location=this.Gn,o.om.sf(),e=o.om,n=o.Jv)):n=this.Fd,null===n||e.isVisible()||(null!==(o=e.findVisibleNode())&&o!==e?n=(e=o).jl(""):e=o),null===(this.KC=e)||!e.location.G())return!1;for(;!(null===n||n.U.G()&&n.Xi());)n=n.S;if(null===n)return!1;var o=this.oa,r=Wu(this,i),s=Xu(this,n),a=i===n&&null!==i,h=this.jc,l=this.Ie===Xh;this.pi=!(!a||h)&&(l=!0);var u,f,c,d,p,y,g,v,m,b,x,w=this.Qs===Wh||a;return h||r!==Te||s!==Te||a?(l=this.rl,w&&(h&&l||a)&&this.Po(),u=a?this.computeCurviness():0,f=this.getLinkPoint(t,i,r,!0,h,e,n),p=d=c=0,(h||r!==Te||a)&&(v=this.computeEndSegmentLength(t,i,r,!0),p=this.getLinkDirection(t,i,f,r,!0,h,e,n),a&&(p-=h?90:30,u<0&&(p-=180)),p<0?p+=360:360<=p&&(p-=360),a&&(v+=Math.abs(u)),0===p?c=v:90===p?d=v:180===p?c=-v:d=270===p?-v:(c=v*Math.cos(p*Math.PI/180),v*Math.sin(p*Math.PI/180)),r.se()&&a&&(y=i.Xa(jn,Nn.L()),g=Nn.Mb(y.x+1e3*c,y.y+1e3*d),this.getLinkPointFromPoint(t,i,y,g,!0,f),Nn.v(y),Nn.v(g))),v=this.getLinkPoint(e,n,s,!1,h,t,i),x=b=m=0,(h||s!==Te||a)&&(y=this.computeEndSegmentLength(e,n,s,!1),x=this.getLinkDirection(e,n,v,s,!1,h,t,i),a&&(x+=h?0:30,u<0&&(x+=180)),x<0?x+=360:360<=x&&(x-=360),a&&(y+=Math.abs(u)),0===x?m=y:90===x?b=y:180===x?m=-y:b=270===x?-y:(m=y*Math.cos(x*Math.PI/180),y*Math.sin(x*Math.PI/180)),s.se()&&a&&(y=n.Xa(jn,Nn.L()),g=Nn.Mb(y.x+1e3*m,y.y+1e3*b),this.getLinkPointFromPoint(e,n,y,g,!1,v),Nn.v(y),Nn.v(g))),n=f,(h||r!==Te||a)&&(n=new Se(f.x+c,f.y+d)),i=v,(h||s!==Te||a)&&(i=new Se(v.x+m,v.y+b)),!w&&!h&&r===Te&&3<o&&this.adjustPoints(0,f,o-2,i)?this.zf(o-1,v):!w&&!h&&s===Te&&3<o&&this.adjustPoints(1,n,o-1,v)?this.zf(0,f):!w&&!h&&4<o&&this.adjustPoints(1,n,o-2,i)||!w&&h&&6<=o&&!l&&this.adjustPoints(1,n,o-2,i)?(this.zf(0,f),this.zf(o-1,v)):(this.Po(),this.Sh(f),(h||r!==Te||a)&&this.Sh(n),h&&this.addOrthoPoints(n,p,i,x,t,e),(h||s!==Te||a)&&this.Sh(i),this.Sh(v))):(r=!1,!w&&3<=o&&(w=this.getLinkPoint(t,i,Te,!0,!1,e,n),s=this.getLinkPoint(e,n,Te,!1,!1,t,i),r=this.adjustPoints(0,w,o-1,s))&&(w=this.getLinkPoint(t,i,Te,!0,!1,e,n),s=this.getLinkPoint(e,n,Te,!1,!1,t,i),this.adjustPoints(0,w,o-1,s)),r||(this.Po(),l?(o=this.getLinkPoint(t,i,Te,!0,!1,e,n),r=(w=this.getLinkPoint(e,n,Te,!1,!1,t,i)).x-o.x,s=w.y-o.y,a=this.computeCurviness(),l=h=0,c=f=o.x+r/3,d=p=o.y+s/3,d=fi(s,0)?0<r?d-a:d+a:(h=-r/s,l=Math.sqrt(a*a/(h*h+1)),a<0&&(l=-l),h*((c=(s<0?-1:1)*l+f)-f)+p),v=f=o.x+2*r/3,m=p=o.y+2*s/3,m=fi(s,0)?0<r?m-a:m+a:h*((v=(s<0?-1:1)*l+f)-f)+p,this.Po(),this.Sh(o),this.Yk(c,d),this.Yk(v,m),this.Sh(w),this.zf(0,this.getLinkPoint(t,i,Te,!0,!1,e,n)),this.zf(3,this.getLinkPoint(e,n,Te,!1,!1,t,i))):(o=e,e=this.getLinkPoint(t,i,Te,!0,!1,o,n),n=this.getLinkPoint(o,n,Te,!1,!1,t,i),this.hasCurviness()?(s=n.x-e.x,t=n.y-e.y,i=this.computeCurviness(),r=o=e.x+s/2,a=w=e.y+t/2,a=fi(t,0)?0<s?a-i:a+i:(s=-s/t,r=Math.sqrt(i*i/(s*s+1)),i<0&&(r=-r),s*((r=(t<0?-1:1)*r+o)-o)+w),this.Sh(e),this.Yk(r,a)):this.Sh(e),this.Sh(n)))),!0},Ru.prototype.getLinkPointFromPoint=function(t,i,e,n,o,r){if(void 0===r&&(r=new Se),null===t||null===i)return r.assign(e),r;t.isVisible()||null!==(o=t.findVisibleNode())&&o!==t&&(i=o.port);var s,a,h,l,u=o=0,f=0,c=0;return(t=null)===(o=i.S)||o.Kg()||(o=o.S),c=null===o?(o=n.x,u=n.y,f=e.x,e.y):(o=1/((t=o.Yg).m11*t.m22-t.m12*t.m21),f=t.m22*o,c=-t.m12*o,s=-t.m21*o,a=t.m11*o,h=o*(t.m21*t.dy-t.m22*t.dx),l=o*(t.m12*t.dx-t.m11*t.dy),o=n.x*f+n.y*s+h,u=n.x*c+n.y*a+l,f=e.x*f+e.y*s+h,e.x*c+e.y*a+l),i.bp(o,u,f,c,r),null!==t&&r.transform(t),r},Ru.prototype.getLinkPoint=function(t,i,e,n,o,r,s,a){return void 0===a&&(a=new Se),e.cd()?i.Xa(e,a):e.Ui()&&null!==(e=Yu(this,i))?(a.assign(e.kp),!o||this.hx!==Yh||null!==(h=Yu(this,s))&&e.Jm<h.Jm&&(e=Nn.L(),h=Nn.L(),l=new Ln(i.Xa(P,e),i.Xa(C,h)),u=this.computeSpot(!n),(t=this.getLinkPoint(r,s,u,!n,o,t,i,h)).x>=l.x&&t.x<=l.x+l.width?a.x=t.x:t.y>=l.y&&t.y<=l.y+l.height&&(a.y=t.y),Nn.v(e),Nn.v(h))):(r=i.Xa(jn,Nn.L()),h=e=null,this.oa>(o?6:2)?(h=n?this.l(1):this.l(this.oa-2),o&&(h=Ju(r,h.copy()))):(e=Nn.L(),h=s.Xa(jn,e),o&&(h=Ju(r,h)),Nn.v(e)),this.getLinkPointFromPoint(t,i,r,h,n,a),Nn.v(r)),a;var h,l,u},Ru.prototype.getLinkDirection=function(t,i,e,n,o,r,s,a){t:if(n.cd())e=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:n.x<.5?225:.5<n.x?45:0;else{if(n.Ui())if(null!==(l=Yu(this,i)))switch(l.fe){case Nn.ed:e=270;break t;case Nn.Nc:e=180;break t;default:case Nn.Xc:e=0;break t;case Nn.Wc:e=90;break t}var h,l=i.Xa(jn,Nn.L()),u=null;this.oa>(r?6:2)?(u=o?this.l(1):this.l(this.oa-2),u=r?Ju(l,u.copy()):e):(h=Nn.L(),u=a.Xa(jn,h),Nn.v(h)),e=0,e=Math.abs(u.x-l.x)>Math.abs(u.y-l.y)?u.x>=l.x?0:180:u.y>=l.y?90:270,Nn.v(l)}switch(n.se()&&s.Xh(t)&&(360<=(e+=180)&&(e-=360)),t=Rh,(t=o?this.kt:this.eu)===Rh&&(t=o?i.kt:i.eu),t){case Vh:360<=(e+=i=i.nl())&&(e-=360);break;case Rh:case Hh:if(0===(i=i.nl()))break;45<=i&&i<135?e+=90:135<=i&&i<225?e+=180:225<=i&&i<315&&(e+=270),360<=e&&(e-=360)}return e},Ru.prototype.computeEndSegmentLength=function(t,i,e,n){return null!==i&&e.Ui()&&null!==(t=Yu(this,i))?t.ww:(t=NaN,t=n?this.ll:this.Fl,null!==i&&isNaN(t)&&(t=n?i.ll:i.Fl),isNaN(t)&&(t=10),t)},Ru.prototype.computeSpot=function(t){return t?Wu(this,this.bd):Xu(this,this.Fd)},Ru.prototype.computeOtherPoint=function(t,i){var e=i.Xa(jn),n=i.km;return null!==(n=null!==n?bf(n,this):null)&&(e=n.kp),e},Ru.prototype.computeShortLength=function(t){return(t?Zu:Qu)(this)},Ru.prototype.Yj=function(t,i,e,n,o,r){if(!1===this.Gg)return!1;void 0===i&&(i=null),void 0===e&&(e=null);var s=r;if(void 0===r&&(s=Nn.ph()).reset(),s.multiply(this.transform),this.Gm(t,s))return pa(this,i,e,o),void 0===r&&Nn.Ze(s),!0;if(this.xg(t,s)){var a=!1;if(!this.Pg)for(var h=this.za.n,l=h.length;l--;){var u=h[l];if(u.visible||u===this.cc){var f=u.U,c=this.Ha;if(!(f.x>c.width||f.y>c.height||f.x+f.width<0||f.y+f.height<0)){if((f=Nn.ph()).set(s),u instanceof sa)a=u.Yj(t,i,e,n,o,f);else if(this.path===u){var d=t,p=n,c=f;if(!1===(a=u).Gg)a=!1;else if(c.multiply(a.transform),p)t:{var y=d,g=c;if(a.Gm(y,g))a=!0;else{if(void 0===g&&(g=a.transform,y.Wj(a.U))){a=!0;break t}var c=y.left,d=y.right,p=y.top,y=y.bottom,v=Nn.L(),m=Nn.L(),b=Nn.L(),x=Nn.ph();x.set(g),x.vE(a.transform),x.Dz(),m.x=d,m.y=p,m.transform(x),v.x=c,v.y=p,v.transform(x),g=!1,Oa(a,v,m,b)?g=!0:(v.x=d,v.y=y,v.transform(x),Oa(a,v,m,b)?g=!0:(m.x=c,m.y=y,m.transform(x),Oa(a,v,m,b)?g=!0:(v.x=c,v.y=p,v.transform(x),Oa(a,v,m,b)&&(g=!0)))),Nn.Ze(x),Nn.v(v),Nn.v(m),Nn.v(b),a=g}}else a=a.Gm(d,c)}else a=Cs(u,t,n,f);a&&(null!==i&&(u=i(u)),u&&(null===e||e(u))&&o.add(u)),Nn.Ze(f)}}}return void 0===r&&Nn.Ze(s),a||null!==this.background||null!==this.Bm}return void 0===r&&Nn.Ze(s),!1},Nn.u(Ru,{jc:"isOrthogonal"},function(){return 2==(2&this.mm.value)}),Nn.u(Ru,{rl:"isAvoiding"},function(){return 4==(4&this.mm.value)}),Ru.prototype.computeCurve=function(){var t,i;return null===this.pi&&(t=this.bd,i=this.jc,this.pi=null!==t&&t===this.Fd&&!i),this.pi?Xh:this.Ie},Ru.prototype.computeCorner=function(){if(this.Ie===Xh)return 0;var t=this.iz;return(isNaN(t)||t<0)&&(t=10),t},Ru.prototype.findMidLabel=function(){for(var t=this.path,i=this.za.n,e=i.length,n=0;n<e;n++){var o=i[n];if(o!==t&&!o.Rf&&(-1/0===o.ve||isNaN(o.ve)))return o}for(t=this.Sf;t.next();)if(-1/0===(i=t.value).ve||isNaN(i.ve))return i;return null},Ru.prototype.computeSpacing=function(){if(!this.isVisible())return 0;o=Math.max(14,this.computeThickness());var t,i,e,n,o,r=this.bd,s=this.Fd;return null===r||null===s||null!==(n=this.findMidLabel())&&(e=n.Ha,t=n.margin,i=isNaN(e.width)?30:e.width*n.scale+t.left+t.right,e=isNaN(e.height)?14:e.height*n.scale+t.top+t.bottom,o=(n=n.Vt)===il||n===rl||n===ol?Math.max(o,e):n===nl||n===al||n===el||n===sl?Math.max(o,i):(r=r.Xa(jn).xc(s.Xa(jn))/180*Math.PI,Math.max(o,Math.abs(Math.sin(r)*i)+Math.abs(Math.cos(r)*e)+1)),this.Ie===Xh&&(o*=1.333)),o},Ru.prototype.arrangeBundledLinks=function(t,i){if(i)for(var e=0;e<t.length;e++)t[e].ic()},Ru.prototype.computeCurviness=function(){var t=this.sw;if(isNaN(t)){var t=16,i=this.ci;if(null!==i){for(var e=Nn.jb(),n=0,o=i.links,r=0;r<o.length;r++){var s=(s=o[r]).computeSpacing();e.push(s),n+=s}for(n=-n/2,r=0;r<o.length;r++){if((s=o[r])===this){t=n+e[r]/2;break}n+=e[r]}i.tp===this.T&&(t=-t),Nn.sa(e)}}return t},Ru.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.lb,1):1},Ru.prototype.hasCurviness=function(){return!isNaN(this.sw)||null!==this.ci},Ru.prototype.adjustPoints=function(t,i,e,n){var o=this.Qs;if(this.jc){if(o===_h)return!1;o===tl&&(o=$h)}switch(o){case _h:var r=this.l(t),s=this.l(e);if(!r.Fc(i)||!s.Fc(n)){var o=r.x,r=r.y,a=s.x-o,h=s.y-r;if(!ci(d=Math.sqrt(a*a+h*h),0)){var l=0;ci(a,0)?l=h<0?-Math.PI/2:Math.PI/2:(l=Math.atan(h/Math.abs(a)),a<0&&(l=Math.PI-l));var s=i.x,u=i.y,h=n.x-s,f=n.y-u,c=Math.sqrt(h*h+f*f),a=0;for(ci(h,0)?a=f<0?-Math.PI/2:Math.PI/2:(a=Math.atan(f/Math.abs(h)),h<0&&(a=Math.PI-a)),d=c/d,l=a-l,this.zf(t,i),t+=1;t<e;t++)a=(i=this.l(t)).x-o,h=i.y-r,ci(i=Math.sqrt(a*a+h*h),0)||(ci(a,f=0)?f=h<0?-Math.PI/2:Math.PI/2:(f=Math.atan(h/Math.abs(a)),a<0&&(f=Math.PI-f)),a=f+l,i*=d,this.V(t,s+i*Math.cos(a),u+i*Math.sin(a)));this.zf(e,n)}}return!0;case tl:if(r=this.l(t),u=this.l(e),!r.Fc(i)||!u.Fc(n)){var o=r.x,r=r.y,d=((s=u.x)-o)*(s-o)+((u=u.y)-r)*(u-r),a=i.x,l=i.y,h=n.x,f=n.y,c=0,p=1;for(0!=h-a?(c=(f-l)/(h-a),p=Math.sqrt(1+1/(c*c))):c=9e9,this.zf(t,i),t+=1;t<e;t++){var y=(i=this.l(t)).x,g=i.y,v=.5;0!==d&&(v=((o-y)*(o-s)+(r-g)*(r-u))/d);var m=o+v*(s-o),b=r+v*(u-r);i=Math.sqrt((y-m)*(y-m)+(g-b)*(g-b)),g<c*(y-m)+b&&(i=-i),0<c&&(i=-i),y=a+v*(h-a),v=l+v*(f-l),0!==c?(i=y+i/p,this.V(t,i,v-(i-y)/c)):this.V(t,y,v+i)}this.zf(e,n)}return!0;case $h:return this.jc&&(o=this.l(t),r=this.l(t+1),s=this.l(t+2),fi(o.y,r.y)?fi(r.x,s.x)?this.V(t+1,r.x,i.y):fi(r.y,s.y)&&this.V(t+1,i.x,r.y):fi(o.x,r.x)&&(fi(r.y,s.y)?this.V(t+1,i.x,r.y):fi(r.x,s.x)&&this.V(t+1,r.x,i.y)),o=this.l(e),r=this.l(e-1),s=this.l(e-2),fi(o.y,r.y)?fi(r.x,s.x)?this.V(e-1,r.x,n.y):fi(r.y,s.y)&&this.V(e-1,n.x,r.y):fi(o.x,r.x)&&(fi(r.y,s.y)?this.V(e-1,n.x,r.y):fi(r.x,s.x)&&this.V(e-1,r.x,n.y))),this.zf(t,i),this.zf(e,n),!0;default:return!1}},Ru.prototype.addOrthoPoints=function(t,i,e,n,o,r){i=-45<=i&&i<45?0:45<=i&&i<135?90:135<=i&&i<225?180:270,n=-45<=n&&n<45?0:45<=n&&n<135?90:135<=n&&n<225?180:270;var s,a,h,l,u,f,c=o.U.copy(),d=r.U.copy();c.G()&&d.G()&&(c.Qf(8,8),d.Qf(8,8),c.dj(t),d.dj(e),0===i?e.x>t.x||270===n&&e.y<t.y&&d.right>t.x||90===n&&e.y>t.y&&d.right>t.x?(s=new Se(e.x,t.y),a=new Se(e.x,(t.y+e.y)/2),180===n?(s.x=this.computeMidOrthoPosition(t.x,e.x,!1),a.x=s.x,a.y=e.y):270===n&&e.y<t.y||90===n&&e.y>t.y?(s.x=t.x<d.left?this.computeMidOrthoPosition(t.x,d.left,!1):t.x<d.right&&(270===n&&t.y<d.top||90===n&&t.y>d.bottom)?this.computeMidOrthoPosition(t.x,e.x,!1):d.right,a.x=s.x,a.y=e.y):0===n&&t.x<d.left&&t.y>d.top&&t.y<d.bottom&&(s.x=t.x,s.y=t.y<e.y?Math.min(e.y,d.top):Math.max(e.y,d.bottom),a.y=s.y)):(s=new Se(t.x,e.y),a=new Se((t.x+e.x)/2,e.y),(180===n||90===n&&e.y<c.top||270===n&&e.y>c.bottom)&&(180===n&&(d.Fa(t)||c.Fa(e))?s.y=this.computeMidOrthoPosition(t.y,e.y,!0):e.y<t.y&&(180===n||90===n)?s.y=this.computeMidOrthoPosition(c.top,Math.max(e.y,d.bottom),!0):e.y>t.y&&(180===n||270===n)&&(s.y=this.computeMidOrthoPosition(c.bottom,Math.min(e.y,d.top),!0)),a.x=e.x,a.y=s.y),s.y>c.top&&s.y<c.bottom&&(e.x>=c.left&&e.x<=t.x||t.x<=d.right&&t.x>=e.x?90!==n&&270!==n||(s=new Se(Math.max((t.x+e.x)/2,t.x),t.y),a=new Se(s.x,e.y)):(s.y=270===n||(0===n||180===n)&&e.y<t.y?Math.min(e.y,0===n?c.top:Math.min(c.top,d.top)):Math.max(e.y,0===n?c.bottom:Math.max(c.bottom,d.bottom)),a.x=e.x,a.y=s.y))):180===i?e.x<t.x||270===n&&e.y<t.y&&d.left<t.x||90===n&&e.y>t.y&&d.left<t.x?(s=new Se(e.x,t.y),a=new Se(e.x,(t.y+e.y)/2),0===n?(s.x=this.computeMidOrthoPosition(t.x,e.x,!1),a.x=s.x,a.y=e.y):270===n&&e.y<t.y||90===n&&e.y>t.y?(s.x=t.x>d.right?this.computeMidOrthoPosition(t.x,d.right,!1):t.x>d.left&&(270===n&&t.y<d.top||90===n&&t.y>d.bottom)?this.computeMidOrthoPosition(t.x,e.x,!1):d.left,a.x=s.x,a.y=e.y):180===n&&t.x>d.right&&t.y>d.top&&t.y<d.bottom&&(s.x=t.x,s.y=t.y<e.y?Math.min(e.y,d.top):Math.max(e.y,d.bottom),a.y=s.y)):(s=new Se(t.x,e.y),a=new Se((t.x+e.x)/2,e.y),(0===n||90===n&&e.y<c.top||270===n&&e.y>c.bottom)&&(0===n&&(d.Fa(t)||c.Fa(e))?s.y=this.computeMidOrthoPosition(t.y,e.y,!0):e.y<t.y&&(0===n||90===n)?s.y=this.computeMidOrthoPosition(c.top,Math.max(e.y,d.bottom),!0):e.y>t.y&&(0===n||270===n)&&(s.y=this.computeMidOrthoPosition(c.bottom,Math.min(e.y,d.top),!0)),a.x=e.x,a.y=s.y),s.y>c.top&&s.y<c.bottom&&(e.x<=c.right&&e.x>=t.x||t.x>=d.left&&t.x<=e.x?90!==n&&270!==n||(s=new Se(Math.min((t.x+e.x)/2,t.x),t.y),a=new Se(s.x,e.y)):(s.y=270===n||(0===n||180===n)&&e.y<t.y?Math.min(e.y,180===n?c.top:Math.min(c.top,d.top)):Math.max(e.y,180===n?c.bottom:Math.max(c.bottom,d.bottom)),a.x=e.x,a.y=s.y))):90===i?e.y>t.y||180===n&&e.x<t.x&&d.bottom>t.y||0===n&&e.x>t.x&&d.bottom>t.y?(s=new Se(t.x,e.y),a=new Se((t.x+e.x)/2,e.y),270===n?(s.y=this.computeMidOrthoPosition(t.y,e.y,!0),a.x=e.x,a.y=s.y):180===n&&e.x<t.x||0===n&&e.x>t.x?(s.y=t.y<d.top?this.computeMidOrthoPosition(t.y,d.top,!0):t.y<d.bottom&&(180===n&&t.x<d.left||0===n&&t.x>d.right)?this.computeMidOrthoPosition(t.y,e.y,!0):d.bottom,a.x=e.x,a.y=s.y):90===n&&t.y<d.top&&t.x>d.left&&t.x<d.right&&(s.x=t.x<e.x?Math.min(e.x,d.left):Math.max(e.x,d.right),s.y=t.y,a.x=s.x)):(s=new Se(e.x,t.y),a=new Se(e.x,(t.y+e.y)/2),(270===n||0===n&&e.x<c.left||180===n&&e.x>c.right)&&(270===n&&(d.Fa(t)||c.Fa(e))?s.x=this.computeMidOrthoPosition(t.x,e.x,!1):e.x<t.x&&(270===n||0===n)?s.x=this.computeMidOrthoPosition(c.left,Math.max(e.x,d.right),!1):e.x>t.x&&(270===n||180===n)&&(s.x=this.computeMidOrthoPosition(c.right,Math.min(e.x,d.left),!1)),a.x=s.x,a.y=e.y),s.x>c.left&&s.x<c.right&&(e.y>=c.top&&e.y<=t.y||t.y<=d.bottom&&t.y>=e.y?0!==n&&180!==n||(s=new Se(t.x,Math.max((t.y+e.y)/2,t.y)),a=new Se(e.x,s.y)):(s.x=180===n||(90===n||270===n)&&e.x<t.x?Math.min(e.x,90===n?c.left:Math.min(c.left,d.left)):Math.max(e.x,90===n?c.right:Math.max(c.right,d.right)),a.x=s.x,a.y=e.y))):e.y<t.y||180===n&&e.x<t.x&&d.top<t.y||0===n&&e.x>t.x&&d.top<t.y?(s=new Se(t.x,e.y),a=new Se((t.x+e.x)/2,e.y),90===n?(s.y=this.computeMidOrthoPosition(t.y,e.y,!0),a.x=e.x,a.y=s.y):180===n&&e.x<t.x||0===n&&e.x>=t.x?(s.y=t.y>d.bottom?this.computeMidOrthoPosition(t.y,d.bottom,!0):t.y>d.top&&(180===n&&t.x<d.left||0===n&&t.x>d.right)?this.computeMidOrthoPosition(t.y,e.y,!0):d.top,a.x=e.x,a.y=s.y):270===n&&t.y>d.bottom&&t.x>d.left&&t.x<d.right&&(s.x=t.x<e.x?Math.min(e.x,d.left):Math.max(e.x,d.right),s.y=t.y,a.x=s.x)):(s=new Se(e.x,t.y),a=new Se(e.x,(t.y+e.y)/2),(90===n||0===n&&e.x<c.left||180===n&&e.x>c.right)&&(90===n&&(d.Fa(t)||c.Fa(e))?s.x=this.computeMidOrthoPosition(t.x,e.x,!1):e.x<t.x&&(90===n||0===n)?s.x=this.computeMidOrthoPosition(c.left,Math.max(e.x,d.right),!1):e.x>t.x&&(90===n||180===n)&&(s.x=this.computeMidOrthoPosition(c.right,Math.min(e.x,d.left),!1)),a.x=s.x,a.y=e.y),s.x>c.left&&s.x<c.right&&(e.y<=c.bottom&&e.y>=t.y||t.y>=d.top&&t.y<=e.y?0!==n&&180!==n||(s=new Se(t.x,Math.min((t.y+e.y)/2,t.y)),a=new Se(e.x,s.y)):(s.x=180===n||(90===n||270===n)&&e.x<t.x?Math.min(e.x,270===n?c.left:Math.min(c.left,d.left)):Math.max(e.x,270===n?c.right:Math.max(c.right,d.right)),a.x=s.x,a.y=e.y))),h=s,l=a,(t=!!this.rl&&((f=null===(u=this.g))||(f=!(f=!u.Na.cf&&(!((f=u.Wa)instanceof ze)||(!f.Xv||f.nH)))),!(f||c.Fa(e)&&!r.Xh(o)||d.Fa(t)&&!o.Xh(r)||o===r||this.layer.Gc)&&(!((o=Jr(u,!0,this.Sa,null)).ip(Math.min(t.x,h.x),Math.min(t.y,h.y),Math.abs(t.x-h.x),Math.abs(t.y-h.y))&&o.ip(Math.min(h.x,l.x),Math.min(h.y,l.y),Math.abs(h.x-l.x),Math.abs(h.y-l.y))&&o.ip(Math.min(l.x,e.x),Math.min(l.y,e.y),Math.abs(l.x-e.x),Math.abs(l.y-e.y)))&&((c=c.copy().ai(d)).Qf(2*o.Oo,2*o.Mo),vf(o,t,i,e,n,c),d=cf(o,e.x,e.y),o.abort||999999!==d||(pf(o),d=o.$E,c.Qf(o.Oo*d,o.Mo*d),vf(o,t,i,e,n,c),d=cf(o,e.x,e.y)),o.abort||999999!==d||(pf(o),d=o.oE,c.Qf(o.Oo*d,o.Mo*d),vf(o,t,i,e,n,c),d=cf(o,e.x,e.y)),!o.abort&&999999===d&&o.sF&&(pf(o),vf(o,t,i,e,n,o.mb),d=cf(o,e.x,e.y)),!o.abort&&d<999999&&0!==cf(o,e.x,e.y)&&(function t(i,e,n,o,r,s){var a=e.Oo,h=e.Mo,l=cf(e,n,o),u=n,f=o;for(0===r?u+=a:90===r?f+=h:180===r?u-=a:f-=h;1<l&&cf(e,u,f)===l-1;)n=u,o=f,0===r?u+=a:90===r?f+=h:180===r?u-=a:f-=h,--l;s?1<l&&(180===r||0===r?n=Math.floor(n/a)*a+a/2:90!==r&&270!==r||(o=Math.floor(o/h)*h+h/2)):(n=Math.floor(n/a)*a+a/2,o=Math.floor(o/h)*h+h/2);1<l&&(s=r,u=n,f=o,0===r?(s=90,f+=h):90===r?(s=180,u-=a):180===r?(s=270,f-=h):270===r&&(s=0,u+=a),cf(e,u,f)===l-1?t(i,e,u,f,s,!1):(u=n,f=o,0===r?(s=270,f-=h):90===r?(s=0,u+=a):180===r?(s=90,f+=h):270===r&&(s=180,u-=a),cf(e,u,f)===l-1&&t(i,e,u,f,s,!1)));i.Yk(n,o)}(this,o,e.x,e.y,n,!0),n=this.l(2),this.oa<4?(0===i||180===i?(n.x=t.x,n.y=e.y):(n.x=e.x,n.y=t.y),this.V(2,n.x,n.y),this.w(3,n.x,n.y)):(e=this.l(3),0===i||180===i?fi(n.x,e.x)?(i=0===i?Math.max(n.x,t.x):Math.min(n.x,t.x),this.V(2,i,t.y),this.V(3,i,e.y)):fi(n.y,e.y)?(Math.abs(t.y-n.y)<=o.Mo/2&&(this.V(2,n.x,t.y),this.V(3,e.x,t.y)),this.w(2,n.x,t.y)):this.V(2,t.x,n.y):90!==i&&270!==i||(fi(n.y,e.y)?(i=90===i?Math.max(n.y,t.y):Math.min(n.y,t.y),this.V(2,t.x,i),this.V(3,e.x,i)):fi(n.x,e.x)?(Math.abs(t.x-n.x)<=o.Oo/2&&(this.V(2,t.x,n.y),this.V(3,t.x,e.y)),this.w(2,t.x,n.y)):this.V(2,n.x,t.y))),!0)))))||(this.Sh(s),this.Sh(a)))},Ru.prototype.computeMidOrthoPosition=function(t,i){return this.hasCurviness()?(t+i)/2+this.computeCurviness():(t+i)/2},Ru.prototype.findClosestSegment=function(t){var i=t.x;t=t.y;for(var e=this.l(0),n=this.l(1),o=v(i,t,e.x,e.y,n.x,n.y),r=0,s=1;s<this.oa-1;s++){var e=this.l(s+1),a=v(i,t,n.x,n.y,e.x,e.y),n=e;a<o&&(r=s,o=a)}return r},Ru.prototype.invalidateGeometry=Ru.prototype.re=function(){this.Ra=null},Nn.u(Ru,{ml:"geometry"},function(){return null===this.Ra&&(this.hn(),this.Ra=this.makeGeometry()),this.Ra}),Ru.prototype.Wm=function(t){if(!t){if(!1===this.Lf)return;if(t=this.Xe(),null!==this.Ra&&(null===t||null!==t.ml))return}if(this.Ra=this.makeGeometry(),null!==(t=this.path)){t.Ra=this.Ra;for(var i=this.za.n,e=i.length,n=0;n<e;n++){var o=i[n];o!==t&&o.Rf&&o instanceof ja&&(o.Ra=this.Ra)}}},Ru.prototype.makeGeometry=function(){if((h=this.oa)<2){var t=new Ai(jt),i=new qi(0,0);return t.Ub.add(i),t}var e=!1;null!==(t=this.g)&&nf(this)&&t.xk.contains(this)&&null!==this.Hv&&(e=!0);var i=t=0,n=(s=this.l(0).copy()).copy(),t=this.Zc.n;if((a=this.computeCurve())===Xh&&3<=h&&!ci(this.Ip,0))if(3===h)var o=this.l(1),t=Math.min(s.x,o.x),i=Math.min(s.y,o.y),o=this.l(2),t=Math.min(t,o.x),i=Math.min(i,o.y);else{if(this.jc)for(o=0;o<h;o++)i=t[o],n.x=Math.min(i.x,n.x),n.y=Math.min(i.y,n.y);else for(o=3;o<h;o+=3)h<=o+3&&(o=h-1),t=this.l(o),n.x=Math.min(t.x,n.x),n.y=Math.min(t.y,n.y);t=n.x,i=n.y}else{for(o=0;o<h;o++)i=t[o],n.x=Math.min(i.x,n.x),n.y=Math.min(i.y,n.y);t=n.x,i=n.y}if(t-=this.Oy.x,i-=this.Oy.y,s.x-=t,s.y-=i,2===h){var r=this.l(1).copy();r.x-=t,r.y-=i,0!==Zu(this)&&_u(this,s,!0,n),0!==Qu(this)&&_u(this,r,!1,n),(t=new Ai(St)).Aa=s.x,t.ya=s.y,t.I=r.x,t.J=r.y}else{if(r=Nn.s(),0!==Zu(this)&&_u(this,s,!0,n),gh(r,s.x,s.y,!1,!1),a===Xh&&3<=h&&!ci(this.Ip,0))if(3===h)h=(o=this.l(1)).x-t,e=o.y-i,(o=this.l(2).copy()).x-=t,o.y-=i,0!==Qu(this)&&_u(this,o,!1,n),mh(r,h,e,h,e,o.x,o.y);else if(this.jc){for(var n=new Se(t,i),s=this.l(1).copy(),a=new Se(t,i),h=new Se(t,i),e=this.l(0),l=null,u=this.Ip/3,o=1;o<this.oa-1;o++){var f,c,d,p,y,g,v,m=e,b=l=this.l(o),x=this.l(tf(this,l,o,!1));ci(m.x,b.x)&&ci(b.x,x.x)||ci(m.y,b.y)&&ci(b.y,x.y)||(v=u,f=a,c=h,isNaN(v)&&(v=this.Ip/3),d=m.x,m=m.y,p=b.x,b=b.y,y=x.x,x=x.y,g=v*$u(d,m,p,b),v*=$u(p,b,y,x),ci(m,b)&&ci(p,y)&&(d<p?b<x?(f.x=p-g,f.y=b-g,c.x=p+v,c.y=b+v):(f.x=p-g,f.y=b+g,c.x=p+v,c.y=b-v):b<x?(f.x=p+g,f.y=b-g,c.x=p-v,c.y=b+v):(f.x=p+g,f.y=b+g,c.x=p-v,c.y=b-v)),ci(d,p)&&ci(b,x)&&(m<b?(p<y?(f.x=p-g,f.y=b-g,c.x=p+v):(f.x=p+g,f.y=b-g,c.x=p-v),c.y=b+v):(p<y?(f.x=p-g,f.y=b+g,c.x=p+v):(f.x=p+g,f.y=b+g,c.x=p-v),c.y=b-v)),(ci(d,p)&&ci(p,y)||ci(m,b)&&ci(b,x))&&(d=.5*(d+y),m=.5*(m+x),f.x=d,f.y=m,c.x=d,c.y=m),(1===o||2===o&&ci(e.x,this.l(0).x)&&ci(e.y,this.l(0).y))&&(s.x=.5*(e.x+l.x),s.y=.5*(e.y+l.y)),mh(r,s.x-t,s.y-i,a.x-t,a.y-i,l.x-t,l.y-i),n.set(a),s.set(h),e=l)}o=e.x,e=e.y,o=.5*(o+(n=this.l(this.oa-1)).x),e=.5*(e+n.y),mh(r,h.x-t,h.y-i,o-t,e-i,n.x-t,n.y-i)}else for(o=3;o<h;o+=3)e=this.l(o-2),h<=o+3&&(o=h-1),n=this.l(o-1),s=this.l(o),o===h-1&&0!==Qu(this)&&_u(this,s=s.copy(),!1,Ht),mh(r,e.x-t,e.y-i,n.x-t,n.y-i,s.x-t,s.y-i);else{for((n=Nn.L()).assign(this.l(0)),o=1;o<h;){if(o=tf(this,n,o,1<o),f=this.l(o),h-1<=o){n!==f&&(0!==Qu(this)&&_u(this,f=f.copy(),!1,Ht),ef(this,r,-t,-i,n,f,e));break}o=tf(this,f,o+1,o<h-3),s=r,a=-t,l=-i,u=n,c=this.l(o),d=n,m=e,fi(u.y,f.y)&&fi(f.x,c.x)?(v=this.computeCorner(),v=Math.min(v,Math.abs(f.x-u.x)/2),fi(v=p=Math.min(v,Math.abs(c.y-f.y)/2),0)?(ef(this,s,a,l,u,f,m),d.assign(f)):(x=b=f.x,g=y=f.y,b=f.x>u.x?f.x-v:f.x+v,g=c.y>f.y?f.y+p:f.y-p,ef(this,s,a,l,u,new Se(b,y),m),bh(s,f.x+a,f.y+l,x+a,g+l),d.m(x,g))):fi(u.x,f.x)&&fi(f.y,c.y)?(v=this.computeCorner(),p=Math.min(v,Math.abs(f.y-u.y)/2),p=v=Math.min(p,Math.abs(c.x-f.x)/2),fi(v,0)?(ef(this,s,a,l,u,f,m),d.assign(f)):(b=f.x,g=y=f.y,y=f.y>u.y?f.y-p:f.y+p,x=c.x>f.x?f.x+v:f.x-v,ef(this,s,a,l,u,new Se(b,y),m),bh(s,f.x+a,f.y+l,x+a,g+l),d.m(x,g))):(ef(this,s,a,l,u,f,m),d.assign(f))}Nn.v(n)}t=r.o,Nn.q(r)}return t},Nn.u(Ru,{ht:"firstPickIndex"},function(){return!(this.oa<=2)&&(this.jc||Wu(this)!==Te)?1:0}),Nn.u(Ru,{Nw:"lastPickIndex"},function(){var t=this.oa;return 0===t?0:!(t<=2)&&(this.jc||Xu(this)!==Te)?t-2:t-1}),Ru.prototype.usesSamePort=function(t){var i=this.oa,e=t.oa;if(0<i&&0<e){var n=this.l(0),o=t.l(0);if(n.Fc(o))return!0;if(i=this.l(i-1),t=t.l(e-1),i.Fc(t)||n.Fc(t)||i.Fc(o))return!0}else if(this.T===t.T||this.Z===t.Z||this.T===t.Z||this.Z===t.T)return!0;return!1},Ru.prototype.isVisible=function(){if(!Lh.prototype.isVisible.call(this))return!1;var t=this.Sa,i=!0,e=this.g;if(null!==e&&(i=e.Qd),null!==(e=this.T)){if(this.Hc&&i&&!e.md)return!1;if(e===t)return!0;if(null===(e=e.findVisibleNode())||e===t)return!1}if(null!==(e=this.Z)){if(this.Hc&&!i&&!e.md)return!1;if(e===t)return!0;if(null===(i=e.findVisibleNode())||i===t)return!1}return!0},Ru.prototype.nd=function(t){if(Lh.prototype.nd.call(this,t),null!==this.ci&&this.ci.Rm(),null!==this.Ce)for(var i=this.Ce.i;i.next();)i.value.nd(t)},Nn.defineProperty(Ru,{Qs:"adjusting"},function(){return this.Sp},function(t){var i=this.Sp;i!==t&&(this.Sp=t,this.h("adjusting",i,t))}),Nn.defineProperty(Ru,{iz:"corner"},function(){return this.lq},function(t){var i=this.lq;i!==t&&(this.lq=t,this.re(),this.h("corner",i,t))}),Nn.defineProperty(Ru,{Ie:"curve"},function(){return this.oq},function(t){var i=this.oq;i!==t&&(this.oq=t,this.ic(),this.re(),of(this,i===Zh||i===Qh||t===Zh||t===Qh),this.h("curve",i,t))}),Nn.defineProperty(Ru,{sw:"curviness"},function(){return this.pq},function(t){var i=this.pq;i!==t&&(this.pq=t,this.ic(),this.re(),this.h("curviness",i,t))}),Nn.defineProperty(Ru,{hx:"routing"},function(){return this.mm},function(t){var i=this.mm;i!==t&&(this.mm=t,this.pi=null,this.ic(),of(this,2==(2&i.value)||2==(2&t.value)),this.h("routing",i,t))}),Nn.defineProperty(Ru,{Ip:"smoothness"},function(){return this.ss},function(t){var i=this.ss;i!==t&&(this.ss=t,this.re(),this.h("smoothness",i,t))}),lf.prototype.Rm=function(){var t;this.fv||0<(t=this.links).length&&(null!==(t=t[0].g)&&t.KB.add(this)),this.fv=!0},lf.prototype.BA=function(){var t,i,e;this.fv&&(this.fv=!1,0<(t=this.links).length&&(e=(i=t[0]).g,i.arrangeBundledLinks(t,null===e||e.Tm),1===t.length&&(i.ci=null,t.length=0)),0===t.length&&(t=this.tp,null!==this&&null!==t.sh&&t.sh.remove(this),t=this.Jt,null!==this&&null!==t.sh&&t.sh.remove(this)))},Nn.Nd(lf,{tp:!0,Ww:!0,Jt:!0,Xw:!0,links:!0,spacing:!0}),Nn.Nd(uf,{group:!0,sA:!0,st:!0,abort:!0,sF:!0,$E:!0,oE:!0}),uf.prototype.initialize=function(t){if(!(t.width<=0||t.height<=0)){var i=t.y,e=t.x+t.width,n=t.y+t.height;if(this.kg=Math.floor((t.x-this.ge)/this.ge)*this.ge,this.lg=Math.floor((i-this.he)/this.he)*this.he,this.nr=Math.ceil((e+2*this.ge)/this.ge)*this.ge,this.or=Math.ceil((n+2*this.he)/this.he)*this.he,t=1+(0|Math.ceil((this.nr-this.kg)/this.ge)),i=1+(0|Math.ceil((this.or-this.lg)/this.he)),null===this.oc||this.Go<t-1||this.Ho<i-1){for(e=[],n=0;n<=t;n++){for(var o=[],r=0;r<=i;r++)o[r]=0;e[n]=o}this.oc=e,this.Go=t-1,this.Ho=i-1}if(null!==this.oc)for(t=0;t<=this.Go;t++)for(i=0;i<=this.Ho;i++)this.oc[t][i]=999999}},Nn.u(uf,{mb:null},function(){return new Ln(this.kg,this.lg,this.nr-this.kg,this.or-this.lg)}),Nn.defineProperty(uf,{Oo:null},function(){return this.ge},function(t){0<t&&t!==this.ge&&(this.ge=t,this.initialize(this.mb))}),Nn.defineProperty(uf,{Mo:null},function(){return this.he},function(t){0<t&&t!==this.he&&(this.he=t,this.initialize(this.mb))}),uf.prototype.ip=function(t,i,e,n){if(t>this.nr||t+e<this.kg||i>this.or||i+n<this.lg)return!0;t=(t-this.kg)/this.ge|0,i=(i-this.lg)/this.he|0,e=Math.max(0,e)/this.ge+1|0;var o=Math.max(0,n)/this.he+1|0;if(t<0&&(e+=t,t=0),i<0&&(o+=i,i=0),e<0||o<0)return!0;for(n=0|Math.min(t+e-1,this.Go),e=0|Math.min(i+o-1,this.Ho);t<=n;t++)for(o=i;o<=e;o++)if(0===this.oc[t][o])return!1;return!0},Nn.Nd(mf,{Jc:!0,port:!0,Xf:!0,sp:!0}),mf.prototype.toString=function(){for(var t=this.Xf,i=this.Jc.toString()+" "+t.length.toString()+":",e=0;e<t.length;e++){var n=t[e];null!==n&&(i+="\n  "+n.toString())}return i},mf.prototype.Rm=function(){this.Xf.length=0},mf.prototype.XH=function(t,i){return t===i?0:null===t?-1:null===i?1:t.fe<i.fe?-1:t.fe>i.fe?1:t.angle<i.angle?-1:t.angle>i.angle?1:0},mf.prototype.computeEndSegmentLength=function(t){var i=(o=t.link).computeEndSegmentLength(this.Jc,this.port,Te,o.bd===this.port),e=t.dp;if(e<0)return i;var n=t.Jm;if(n<=1||!o.jc)return i;var o=t.Uw,r=t.kp;return t.fe!==Nn.Nc&&t.fe!==Nn.Wc||(e=n-1-e),((t=t.fe===Nn.Nc||t.fe===Nn.Xc)?o.y<r.y:o.x<r.x)?i+8*e:(t?o.y===r.y:o.x===r.x)?i:i+8*(n-1-e)},Nn.Nd(xf,{link:!0,angle:!0,fe:!0,Uw:!0,dp:!0,Jm:!0,kp:!0,ww:!0}),xf.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.fe.toString()+":"+this.dp.toString()+"/"+this.Jm.toString()+" "+this.kp.toString()+" "+this.ww.toString()+" "+this.Uw.toString()},wf.prototype.copy=function(){var t=new wf;return t.oj=this.oj.R(),t.Qj=this.Qj.R(),t.mj=this.mj,t.Oj=this.Oj,t.lj=this.lj,t.Nj=this.Nj,t.nj=this.nj,t.Pj=this.Pj,t},Nn.Ja(kf,Lu),Nn.ea("Group",kf),kf.prototype.cloneProtected=function(t){Lu.prototype.cloneProtected.call(this,t),t.pr=this.pr,t.rr=this.rr,t.Ok=this.Ok,t.Gs=this.Gs,t.Xq=this.Xq,t.Is=this.Is,t.ws=this.ws;var i=t.ct(function(t){return t instanceof Tf});t.Gb=i instanceof Tf?i:null,t.dq=this.dq,t.eq=this.eq,t.fq=this.fq,t.Mq=this.Mq,null!==this.Ud?(t.Ud=this.Ud.copy(),t.Ud.group=t):(null!==t.Ud&&(t.Ud.group=null),t.Ud=null)},kf.prototype.Vh=function(t){Lu.prototype.Vh.call(this,t);var i=t.Wo();for(t=t.Ic;t.next();){var e=t.value;if(e.P(),e.H(8),e.Vs(),e instanceof Lu)e.bf(i);else if(e instanceof Ru)for(e=e.Sf;e.next();)e.value.bf(i)}},kf.prototype.an=function(t,i,e,n,o,r,s){var a;t===Gt&&"elements"===i?o instanceof Tf?(a=o,null===this.Gb?this.Gb=a:this.Gb!==a&&Nn.k("Cannot insert a second Placeholder into the visual tree of a Group.")):o instanceof sa&&((a=o.ct(function(t){return t instanceof Tf}))instanceof Tf&&(null===this.Gb?this.Gb=a:this.Gb!==a&&Nn.k("Cannot insert a second Placeholder into the visual tree of a Group."))):t===Rt&&"elements"===i&&null!==this.Gb&&(n===this.Gb||n instanceof sa&&this.Gb.tl(n))&&(this.Gb=null),Lu.prototype.an.call(this,t,i,e,n,o,r,s)},kf.prototype.Li=function(t,i,e,n){this.Nk=this.Gb,sa.prototype.Li.call(this,t,i,e,n)},kf.prototype.ul=function(){if(!Lu.prototype.ul.call(this))return!1;for(var t=this.Ic;t.next();){var i=t.value;if(i instanceof Lu){if(i.isVisible()&&Ks(i))return!1}else if(i instanceof Ru&&i.isVisible()&&Ks(i)&&i.T!==this&&i.Z!==this)return!1}return!0},Nn.u(kf,{placeholder:"placeholder"},function(){return this.Gb}),Nn.defineProperty(kf,{tD:"computesBoundsAfterDrag"},function(){return this.dq},function(t){var i=this.dq;i!==t&&(Nn.j(t,"boolean",kf,"computesBoundsAfterDrag"),this.dq=t,this.h("computesBoundsAfterDrag",i,t))}),Nn.defineProperty(kf,{qw:"computesBoundsIncludingLinks"},function(){return this.eq},function(t){Nn.j(t,"boolean",kf,"computesBoundsIncludingLinks");var i=this.eq;i!==t&&(this.eq=t,this.h("computesBoundsIncludingLinks",i,t))}),Nn.defineProperty(kf,{tG:"computesBoundsIncludingLocation"},function(){return this.fq},function(t){Nn.j(t,"boolean",kf,"computesBoundsIncludingLocation");var i=this.fq;i!==t&&(this.fq=t,this.h("computesBoundsIncludingLocation",i,t))}),Nn.defineProperty(kf,{dH:"handlesDragDropForMembers"},function(){return this.Mq},function(t){Nn.j(t,"boolean",kf,"handlesDragDropForMembers");var i=this.Mq;i!==t&&(this.Mq=t,this.h("handlesDragDropForMembers",i,t))}),Nn.u(kf,{Ic:"memberParts"},function(){return this.qr.i}),kf.prototype.Lm=function(){if(0<this.qr.count){var t=this.g;if(null!==t)for(var i=this.qr.copy().i;i.next();)t.remove(i.value)}Lu.prototype.Lm.call(this)},Nn.defineProperty(kf,{Pb:"layout"},function(){return this.Ud},function(t){var i=this.Ud;i!==t&&(null!==t&&Nn.A(t,Sf,kf,"layout"),null!==i&&(i.g=null,i.group=null),null!==(this.Ud=t)&&(t.g=this.g,t.group=this),this.h("layout",i,t))}),Nn.defineProperty(kf,{OH:"memberAdded"},function(){return this.pr},function(t){var i=this.pr;i!==t&&(null!==t&&Nn.j(t,"function",kf,"memberAdded"),this.pr=t,this.h("memberAdded",i,t))}),Nn.defineProperty(kf,{PH:"memberRemoved"},function(){return this.rr},function(t){var i=this.rr;i!==t&&(null!==t&&Nn.j(t,"function",kf,"memberRemoved"),this.rr=t,this.h("memberRemoved",i,t))}),Nn.defineProperty(kf,{Pz:"memberValidation"},function(){return this.Ok},function(t){var i=this.Ok;i!==t&&(null!==t&&Nn.j(t,"function",kf,"memberValidation"),this.Ok=t,this.h("memberValidation",i,t))}),kf.prototype.canAddMembers=function(t){var i=this.g;if(null===i)return!1;for(i=i.nb,t=Le(t).i;t.next();)if(!i.isValidMember(this,t.value))return!1;return!0},kf.prototype.addMembers=function(t,i){if(null===(e=this.g))return!1;for(var e=e.nb,n=!0,o=Le(t).i;o.next();){var r=o.value;!i||e.isValidMember(this,r)?r.Sa=this:n=!1}return n},Nn.defineProperty(kf,{RI:"ungroupable"},function(){return this.Gs},function(t){var i=this.Gs;i!==t&&(Nn.j(t,"boolean",kf,"ungroupable"),this.Gs=t,this.h("ungroupable",i,t))}),kf.prototype.canUngroup=function(){if(!this.RI)return!1;var t=this.layer;return!(null!==t&&!t.lw)&&!(null!==(t=t.g)&&!t.lw)},kf.prototype.bf=function(t){void 0===t&&(t=null),Lu.prototype.bf.call(this,t);for(var i=this.JD();i.next();){var e,n=i.value;null!==t&&t.contains(n)||(null!==(e=n.T)&&e!==this&&e.Xh(this)&&!e.isVisible()?n.ic():null!==(e=n.Z)&&e!==this&&e.Xh(this)&&!e.isVisible()&&n.ic())}},kf.prototype.findExternalLinksConnected=kf.prototype.JD=function(){var t=this.Wo();t.add(this);for(var i=new Q(Ru),e=t.i;e.next();){var n=e.value;if(n instanceof Lu)for(n=n.te;n.next();){var o=n.value;t.contains(o)||i.add(o)}}return i.i},kf.prototype.findExternalNodesConnected=function(){var t=this.Wo();t.add(this);for(var i=new Q(Lu),e=t.i;e.next();){var n=e.value;if(n instanceof Lu)for(n=n.te;n.next();){var o=n.value,r=o.T;t.contains(r)&&r!==this||i.add(r),o=o.Z,t.contains(o)&&o!==this||i.add(o)}}return i.i},kf.prototype.findContainingGroupChain=function(){var t=new Q(Lh);return function t(i,e){null!==i&&(e.add(i),t(i.Sa,e))}(this,t),t},kf.prototype.findSubGraphParts=kf.prototype.Wo=function(){var t=new Q(Lh);return De(t,this,!0,0,!0),t.remove(this),t},kf.prototype.nd=function(t){Lu.prototype.nd.call(this,t);for(var i=this.Ic;i.next();)i.value.nd(t)},kf.prototype.collapseSubGraph=kf.prototype.collapseSubGraph=function(){var t,i=this.g;null===i||i.eh||(i.eh=!0,t=this.Wo(),function t(i,e,n,o){for(var r=i.Ic;r.next();){var s,a=r.value;if(a.nd(!1),a instanceof kf&&((s=a).de&&(s.DA=s.de,t(s,e,n,o))),a instanceof Lu)a.bf(e),Do(n,a,o);else if(a instanceof Ru)for(a=a.Sf;a.next();)a.value.bf(e)}i.de=!1}(this,t,i.Na,this),i.eh=!1)},kf.prototype.expandSubGraph=kf.prototype.expandSubGraph=function(){var t,i=this.g;null===i||i.eh||(i.eh=!0,t=this.Wo(),function t(i,e,n,o){for(var r=i.Ic;r.next();){var s,a=r.value;if(a.nd(!0),a instanceof kf&&((s=a).DA&&(s.DA=!1,t(s,e,n,o))),a instanceof Lu)a.bf(e),jo(n,a,o);else if(a instanceof Ru)for(a=a.Sf;a.next();)a.value.bf(e)}i.de=!0}(this,t,i.Na,this),i.eh=!1)},Nn.defineProperty(kf,{de:"isSubGraphExpanded"},function(){return this.Xq},function(t){var i,e,n=this.Xq;n!==t&&(Nn.j(t,"boolean",kf,"isSubGraphExpanded"),this.Xq=t,i=this.g,this.h("isSubGraphExpanded",n,t),null!==(n=this.FI)&&(e=!0,null!==i&&(e=i.Qa,i.Qa=!0),n(this),null!==i&&(i.Qa=e)),null!==i&&i.la.ib?null!==this.Gb&&this.Gb.P():t?this.expandSubGraph():this.collapseSubGraph())}),Nn.defineProperty(kf,{DA:"wasSubGraphExpanded"},function(){return this.Is},function(t){var i=this.Is;i!==t&&(Nn.j(t,"boolean",kf,"wasSubGraphExpanded"),this.Is=t,this.h("wasSubGraphExpanded",i,t))}),Nn.defineProperty(kf,{FI:"subGraphExpandedChanged"},function(){return this.ws},function(t){var i=this.ws;i!==t&&(null!==t&&Nn.j(t,"function",kf,"subGraphExpandedChanged"),this.ws=t,this.h("subGraphExpandedChanged",i,t))}),kf.prototype.move=function(t){var i=(e=this.position).x;isNaN(i)&&(i=0),e=e.y,isNaN(e)&&(e=0);var i=t.x-i,e=t.y-e,n=Nn.Mb(i,e);for(Lu.prototype.move.call(this,t),t=this.Wo().i;t.next();){var o,r,s=t.value;s instanceof Ru||s instanceof Lu&&s.uf||(o=s.position,r=s.location,o.G()?(n.x=o.x+i,n.y=o.y+e,s.position=n):r.G()&&(n.x=r.x+i,n.y=r.y+e,s.location=n))}for(t.reset();t.next();)(s=t.value)instanceof Ru&&(o=s.position,n.x=o.x+i,n.y=o.y+e,s.move(n));Nn.v(n)},Nn.Ja(Tf,ks),Nn.ea("Placeholder",Tf),Tf.prototype.cloneProtected=function(t){ks.prototype.cloneProtected.call(this,t),t.Se=this.Se.R(),t.bs=this.bs.copy()},Tf.prototype.Vj=function(t){if(null===this.background&&null===this.Bm)return!1;var i=this.Ha;return Pe(0,0,i.width,i.height,t.x,t.y)},Tf.prototype.np=function(){var t=this.Y;if(null!==t&&(t instanceof kf||t instanceof Du)||Nn.k("Placeholder is not inside a Group or Adornment."),t instanceof kf){var i=this.computeBorder(this.bs);An(e=this.Qc,i.width||0,i.height||0),Ss(this,0,0,e.width,e.height);for(var e=t.Ic,n=!1;e.next();)if(e.value.isVisible()){n=!0;break}!n||isNaN(i.x)||isNaN(i.y)||((e=new Se).Yt(i,t.df),t.location=new Se(e.x,e.y))}else{var o,r,i=this.xa,e=this.Qc,s=(n=this.padding).left+n.right,a=n.top+n.bottom;i.G()?(An(e,i.width+s||0,i.height+a||0),Ss(this,-n.left,-n.top,e.width,e.height)):(r=(o=t.Zb).Xa(P,Nn.L()),(i=Nn.gk(r.x,r.y,0,0)).dj(o.Xa(C,r)),i.dj(o.Xa(T,r)),i.dj(o.Xa(S,r)),t.wi.m(i.x,i.y),An(e,i.width+s||0,i.height+a||0),Ss(this,-n.left,-n.top,e.width,e.height),Nn.v(r),Nn.Vb(i))}},Tf.prototype.Li=function(t,i,e,n){var o=this.U;o.x=t,o.y=i,o.width=e,o.height=n},Tf.prototype.computeBorder=function(t){var i=this.Y;if(i instanceof kf&&((e=i).tD&&this.bs.G()&&null!==(n=e.g)&&((n=n.Wa)instanceof ze&&!n.Aq&&null!==n.bc&&!n.bc.contains(e))))return t.assign(this.bs),t;var e=Nn.ag(),n=this.computeMemberBounds(e),o=this.padding;return t.m(n.x-o.left,n.y-o.top,n.width+o.left+o.right,n.height+o.top+o.bottom),Nn.Vb(e),i instanceof kf&&((e=i).tG&&e.location.G()&&t.dj(e.location)),t},Tf.prototype.computeMemberBounds=function(t){if(!(this.Y instanceof kf))return t.m(0,0,0,0),t;for(var i=this.Y,e=1/0,n=1/0,o=-1/0,r=-1/0,s=i.Ic;s.next();){var a=s.value;if(a.isVisible()){if(a instanceof Ru){var h=a;if(!i.qw)continue;if(Vs(h))continue;if(h.T===i||h.Z===i)continue}(a=a.U).left<e&&(e=a.left),a.top<n&&(n=a.top),a.right>o&&(o=a.right),a.bottom>r&&(r=a.bottom)}}return isFinite(e)&&isFinite(n)?t.m(e,n,o-e,r-n):(i=i.location,e=this.padding,t.m(i.x+e.left,i.y+e.top,0,0)),t},Nn.defineProperty(Tf,{padding:"padding"},function(){return this.Se},function(t){"number"==typeof t?((isNaN(t)||t<0)&&Nn.va(t,">= 0",Tf,"padding"),t=new ut(t)):(Nn.A(t,ut,Tf,"padding"),(isNaN(t.left)||t.left<0)&&Nn.va(t.left,">= 0",Tf,"padding:value.left"),(isNaN(t.right)||t.right<0)&&Nn.va(t.right,">= 0",Tf,"padding:value.right"),(isNaN(t.top)||t.top<0)&&Nn.va(t.top,">= 0",Tf,"padding:value.top"),(isNaN(t.bottom)||t.bottom<0)&&Nn.va(t.bottom,">= 0",Tf,"padding:value.bottom"));var i=this.Se;i.K(t)||(this.Se=t=t.R(),this.h("padding",i,t))}),Nn.ea("Layout",Sf),Sf.prototype.cloneProtected=function(t){t.Tq=this.Tq,t.sj=this.sj,t.br=this.br,t.Wp.assign(this.Wp),t.Wq=this.Wq,t.Vq=this.Vq,t.wB=this.wB,this.sj||(t.Yn=!0)},Sf.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Sf.prototype.toString=function(){var t=(t=Nn.$e(Object.getPrototypeOf(this)))+"(";return null!==this.group&&(t+=" in "+this.group),null!==this.g&&(t+=" for "+this.g),t+")"},Nn.defineProperty(Sf,{g:"diagram"},function(){return this.W},function(t){null!==t&&Nn.A(t,Oo,Sf,"diagram"),this.W=t}),Nn.defineProperty(Sf,{group:"group"},function(){return this.my},function(t){this.my!==t&&(null!==t&&Nn.A(t,kf,Sf,"group"),null!==(this.my=t)&&(this.W=t.g))}),Nn.defineProperty(Sf,{uH:"isOngoing"},function(){return this.Tq},function(t){this.Tq!==t&&(Nn.j(t,"boolean",Sf,"isOngoing"),this.Tq=t)}),Nn.defineProperty(Sf,{hE:"isInitial"},function(){return this.sj},function(t){Nn.j(t,"boolean",Sf,"isInitial"),(this.sj=t)||(this.Yn=!0)}),Nn.defineProperty(Sf,{Lw:"isViewportSized"},function(){return this.br},function(t){this.br!==t&&(Nn.j(t,"boolean",Sf,"isViewportSized"),(this.br=t)&&this.H())}),Nn.defineProperty(Sf,{xt:"isRouting"},function(){return this.Wq},function(t){this.Wq!==t&&(Nn.j(t,"boolean",Sf,"isRouting"),this.Wq=t)}),Nn.defineProperty(Sf,{jE:"isRealtime"},function(){return this.Vq},function(t){this.Vq!==t&&(Nn.j(t,"boolean",Sf,"isRealtime"),this.Vq=t)}),Nn.defineProperty(Sf,{wf:"isValidLayout"},function(){return this.Yn},function(t){this.Yn!==t&&(Nn.j(t,"boolean",Sf,"isValidLayout"),(this.Yn=t)||null!==(t=this.g)&&(t.vu=!0))}),Sf.prototype.invalidateLayout=Sf.prototype.H=function(){var t,i;this.Yn&&(null===(t=this.g)||t.la.ib||!(i=t.Na).Xn&&(i.cf&&i.Zh(),this.uH&&t.Tm||this.hE&&!t.Tm)&&(this.wf=!1,t.ue()))},Nn.defineProperty(Sf,{network:"network"},function(){return this.Dy},function(t){var i=this.Dy;i!==t&&(null!==t&&Nn.A(t,Nf,Sf,"network"),null!==i&&(i.Pb=null),null!==(this.Dy=t)&&(t.Pb=this))}),Sf.prototype.createNetwork=function(){return new Nf},Sf.prototype.makeNetwork=function(t){var i=this.createNetwork();return i.Pb=this,t instanceof Oo?(i.Sj(t.Ag,!0),i.Sj(t.links,!0)):t instanceof kf?i.Sj(t.Ic):i.Sj(t.i),i},Sf.prototype.updateParts=function(){var t=this.g;if(null===t&&null!==this.network)for(var i=this.network.vertexes.i;i.next();){var e=i.value.Jc;if(null!==e&&null!==(t=e.g))break}this.wf=!0;try{null!==t&&t.Qb("Layout"),this.commitLayout()}finally{null!==t&&t.wd("Layout")}},Sf.prototype.commitLayout=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();if(this.xt)for(t=this.network.edges.i;t.next();)t.value.commit()},Sf.prototype.doLayout=function(t){null===t&&Nn.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var i=new Q(Lh);if(t instanceof Oo?(Cf(this,i,t.Ag,!0,this.Uz,!0,!1,!0),Cf(this,i,t.dk,!0,this.Uz,!0,!1,!0)):t instanceof kf?Cf(this,i,t.Ic,!1,this.Uz,!0,!1,!0):i.Tc(t.i),0<(e=i.count)){null!==(t=this.g)&&t.Qb("Layout");for(var e=Math.ceil(Math.sqrt(e)),n=this.Xd.x,o=n,r=this.Xd.y,s=0,a=0,i=i.i;i.next();){var h=i.value;h.sf();var l=(u=h.Ca).width,u=u.height;h.moveTo(o,r),h.Cy=!1,o+=Math.max(l,50)+20,a=Math.max(a,Math.max(u,50)),e-1<=s?(o=n,r+=a+20,a=s=0):s++}null!==t&&t.wd("Layout")}this.wf=!0},Sf.prototype.Uz=function(t){return!(t.location.G()&&!(t instanceof kf&&t.Cy))},Sf.prototype.collectParts=Sf.prototype.nG=function(t){var i=new Q(Lh);return t instanceof Oo?(Cf(this,i,t.Ag,!0,null,!0,!0,!0),Cf(this,i,t.links,!0,null,!0,!0,!0),Cf(this,i,t.dk,!0,null,!0,!0,!0)):Cf(this,i,t instanceof kf?t.Ic:t.i,!1,null,!0,!0,!0),i},Nn.defineProperty(Sf,{Xd:"arrangementOrigin"},function(){return this.Wp},function(t){Nn.A(t,Se,Sf,"arrangementOrigin"),this.Wp.K(t)||(this.Wp.assign(t),this.H())}),Sf.prototype.initialOrigin=function(t){var i=this.group;if(null===i)return t;var e=i.position.copy();return(isNaN(e.x)||isNaN(e.y))&&e.set(t),null!==(i=i.placeholder)&&(e=i.Xa(P),(isNaN(e.x)||isNaN(e.y))&&e.set(t),e.x+=i.padding.left,e.y+=i.padding.top),e},Nn.ea("LayoutNetwork",Nf),Nf.prototype.clear=function(){if(this.vertexes)for(var t=this.vertexes.i;t.next();){var i=t.value;i.clear(),i.network=null}if(this.edges)for(t=this.edges.i;t.next();)(i=t.value).clear(),i.network=null;this.vertexes=new Q(Lf),this.edges=new Q(Af),this.Yz=new nt(Lu,Lf),this.Kz=new nt(Ru,Af)},Nf.prototype.toString=function(t){void 0===t&&(t=0);var i="LayoutNetwork"+(null!==this.Pb?"("+this.Pb.toString()+")":"");if(t<=0)return i;if(i+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count,1<t){for(var e=this.vertexes.i;e.next();)i+="\n    "+e.value.toString(t-1);for(e=this.edges.i;e.next();)i+="\n    "+e.value.toString(t-1)}return i},Nn.defineProperty(Nf,{Pb:"layout"},function(){return this.Ud},function(t){this.Ud=t}),Nf.prototype.createVertex=function(){return new Lf},Nf.prototype.createEdge=function(){return new Af},Nf.prototype.addParts=Nf.prototype.Sj=function(t,i,e){if(null!==t){for(void 0===i&&(i=!1),Nn.j(i,"boolean",Nf,"addParts:toplevelonly"),void 0===e&&(e=null),null===e&&(e=function(t){if(t instanceof Lu)return!t.uf;if(t instanceof Ru){var i=t.T;return null===i||i.uf?!1:null!==(t=t.Z)&&!t.uf}return!1}),t=t.i;t.next();){var n=t.value;n instanceof Lu&&(!i||n.gp)&&n.canLayout()&&e(n)&&(n instanceof kf&&null===n.Pb?this.Sj(n.Ic,!1):null===this.Nm(n)&&((r=this.createVertex()).Jc=n,this.Zk(r)))}for(t.reset();t.next();){var o,r;(n=t.value)instanceof Ru&&(!i||n.gp)&&n.canLayout()&&e(n)&&null===this.yw(n)&&(o=n.T,r=n.Z,null!==o&&null!==r&&o!==r&&(o=this.findGroupVertex(o),r=this.findGroupVertex(r),null!==o&&null!==r&&this.mp(o,r,n)))}}},Nf.prototype.findGroupVertex=function(t){if(null===t)return null;var i=t.findVisibleNode();if(null===i)return null;if(null!==(t=this.Nm(i)))return t;for(i=i.Sa;null!==i;){if(null!==(t=this.Nm(i)))return t;i=i.Sa}return null},Nf.prototype.addVertex=Nf.prototype.Zk=function(t){var i;null!==t&&(this.vertexes.add(t),null!==(i=t.Jc)&&this.Yz.add(i,t),t.network=this)},Nf.prototype.addNode=Nf.prototype.Ps=function(t){if(null===t)return null;var i=this.Nm(t);return null===i&&((i=this.createVertex()).Jc=t,this.Zk(i)),i},Nf.prototype.deleteVertex=Nf.prototype.DD=function(t){if(null!==t&&jf(this,t)){for(var i=t.Oe,e=i.count-1;0<=e;e--){var n=i.da(e);this.So(n)}for(e=(i=t.Je).count-1;0<=e;e--)n=i.da(e),this.So(n)}},Nf.prototype.deleteNode=function(t){null!==t&&(null!==(t=this.Nm(t))&&this.DD(t))},Nf.prototype.findVertex=Nf.prototype.Nm=function(t){return null===t?null:this.Yz.ja(t)},Nf.prototype.addEdge=Nf.prototype.Jo=function(t){var i;null!==t&&(this.edges.add(t),null!==(i=t.link)&&null===this.yw(i)&&this.Kz.add(i,t),null!==(i=t.toVertex)&&i.eD(t),null!==(i=t.fromVertex)&&i.dD(t),t.network=this)},Nf.prototype.addLink=function(t){if(null===t)return null;var i=t.T,e=t.Z,n=this.yw(t);return null===n?((n=this.createEdge()).link=t,null!==i&&(n.fromVertex=this.Ps(i)),null!==e&&(n.toVertex=this.Ps(e)),this.Jo(n)):(n.fromVertex=null!==i?this.Ps(i):null,n.toVertex=null!==e?this.Ps(e):null),n},Nf.prototype.deleteEdge=Nf.prototype.So=function(t){var i;null!==t&&(null!==(i=t.toVertex)&&i.CD(t),null!==(i=t.fromVertex)&&i.BD(t),Df(this,t))},Nf.prototype.deleteLink=function(t){null!==t&&(null!==(t=this.yw(t))&&this.So(t))},Nf.prototype.findEdge=Nf.prototype.yw=function(t){return null===t?null:this.Kz.ja(t)},Nf.prototype.linkVertexes=Nf.prototype.mp=function(t,i,e){if(null===t||null===i)return null;if(t.network!==this||i.network!==this)return null;var n=this.createEdge();return n.link=e,n.fromVertex=t,n.toVertex=i,this.Jo(n),n},Nf.prototype.reverseEdge=Nf.prototype.gx=function(t){var i,e;null!==t&&(i=t.fromVertex,e=t.toVertex,null!==i&&null!==e&&(i.BD(t),e.CD(t),t.gx(),i.eD(t),e.dD(t)))},Nf.prototype.deleteSelfEdges=Nf.prototype.uw=function(){for(var t=Nn.jb(),i=this.edges.i;i.next();){var e=i.value;e.fromVertex===e.toVertex&&t.push(e)}for(i=t.length,e=0;e<i;e++)this.So(t[e]);Nn.sa(t)},Nf.prototype.deleteArtificialVertexes=function(){for(var t=Nn.jb(),i=this.vertexes.i;i.next();){var e=i.value;null===e.Jc&&t.push(e)}for(e=t.length,i=0;i<e;i++)this.DD(t[i]);for(e=Nn.jb(),i=this.edges.i;i.next();){var n=i.value;null===n.link&&e.push(n)}for(n=e.length,i=0;i<n;i++)this.So(e[i]);Nn.sa(t),Nn.sa(e)},Nf.prototype.splitIntoSubNetworks=Nf.prototype.EI=function(){this.deleteArtificialVertexes(),function(t){for(var i=Nn.jb(),e=t.edges.i;e.next();){var n=e.value;null!==n.fromVertex&&null!==n.toVertex||i.push(n)}for(e=i.length,n=0;n<e;n++)t.So(i[n]);Nn.sa(i)}(this),this.uw();for(var t=new Dn(Nf),i=!0;i;)for(var i=!1,e=this.vertexes.i;e.next();){var n=e.value;if(0<n.Oe.count||0<n.Je.count){i=this.Pb.createNetwork(),t.add(i),function t(i,e,n){if(null!==n&&n.network!==e){jf(i,n),e.Zk(n);for(var o=n.lc;o.next();){var r=o.value;r.network!==e&&(Df(i,r),e.Jo(r),t(i,e,r.fromVertex))}for(o=n.ac;o.next();)(n=o.value).network!==e&&(Df(i,n),e.Jo(n),t(i,e,n.toVertex))}}(this,i,n),i=!0;break}}return t.sort(function(t,i){return null===t||null===i||t===i?0:i.vertexes.count-t.vertexes.count}),t},Nf.prototype.findAllParts=function(){for(var t=new Q(Lh),i=this.vertexes.i;i.next();)t.add(i.value.Jc);for(i=this.edges.i;i.next();)t.add(i.value.link);return t},Nn.ea("LayoutVertex",Lf),Lf.prototype.clear=function(){this.qd=this.ie=null,this.Oe=new Dn(Af),this.Je=new Dn(Af)},Lf.prototype.toString=function(t){void 0===t&&(t=0);var i="LayoutVertex#"+Nn.ld(this);if(0<t&&(i+=null!==this.Jc?"("+this.Jc.toString()+")":"",1<t)){for(var e=!(t=""),n=this.Oe.i;n.next();){var o=n.value;e?e=!1:t+=",",t+=o.toString(0)}for(e=!(o=""),n=this.Je.i;n.next();){e?e=!1:o+=",",o+=n.value.toString(0)}i+=" sources: "+t+" destinations: "+o}return i},Nn.defineProperty(Lf,{data:"data"},function(){return this.ie},function(t){var i,e,n;null!==(this.ie=t)&&(t=(n=t.bounds).x,i=n.y,e=n.width,n=n.height,this.O.m(e/2,n/2),this.M.m(t,i,e,n))}),Nn.defineProperty(Lf,{Jc:"node"},function(){return this.qd},function(t){if(this.qd!==t){(this.qd=t).sf();var i=(o=t.U).x,e=o.y,n=o.width,o=o.height;if(isNaN(i)&&(i=0),isNaN(e)&&(e=0),this.M.m(i,e,n,o),!(t instanceof kf)&&(t=t.cc.Xa(jn)).G())return void this.O.m(t.x-i,t.y-e);this.O.m(n/2,o/2)}}),Nn.defineProperty(Lf,{mb:"bounds"},function(){return this.M},function(t){this.M.K(t)||this.M.assign(t)}),Nn.defineProperty(Lf,{focus:"focus"},function(){return this.O},function(t){this.O.K(t)||this.O.assign(t)}),Nn.defineProperty(Lf,{na:"centerX"},function(){return this.M.x+this.O.x},function(t){var i=this.M;i.x+this.O.x!==t&&(i.Oa(),i.x=t-this.O.x,i.freeze())}),Nn.defineProperty(Lf,{ua:"centerY"},function(){return this.M.y+this.O.y},function(t){var i=this.M;i.y+this.O.y!==t&&(i.Oa(),i.y=t-this.O.y,i.freeze())}),Nn.defineProperty(Lf,{it:"focusX"},function(){return this.O.x},function(t){var i=this.O;i.x!==t&&(i.Oa(),i.x=t,i.freeze())}),Nn.defineProperty(Lf,{jt:"focusY"},function(){return this.O.y},function(t){var i=this.O;i.y!==t&&(i.Oa(),i.y=t,i.freeze())}),Nn.defineProperty(Lf,{x:"x"},function(){return this.M.x},function(t){var i=this.M;i.x!==t&&(i.Oa(),i.x=t,i.freeze())}),Nn.defineProperty(Lf,{y:"y"},function(){return this.M.y},function(t){var i=this.M;i.y!==t&&(i.Oa(),i.y=t,i.freeze())}),Nn.defineProperty(Lf,{width:"width"},function(){return this.M.width},function(t){var i=this.M;i.width!==t&&(i.Oa(),i.width=t,i.freeze())}),Nn.defineProperty(Lf,{height:"height"},function(){return this.M.height},function(t){var i=this.M;i.height!==t&&(i.Oa(),i.height=t,i.freeze())}),Lf.prototype.commit=function(){var t=this.ie;if(null!==t){var i=this.mb,e=t.bounds;Nn.Ta(e)?(e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height):t.bounds=i.copy()}else if(null!==(t=this.Jc)){if(i=this.mb,!(t instanceof kf)){var e=t.U,n=t.cc.Xa(jn);if(e.G()&&n.G())return void t.moveTo(i.x+this.it-(n.x-e.x),i.y+this.jt-(n.y-e.y))}t.moveTo(i.x,i.y)}},Lf.prototype.addSourceEdge=Lf.prototype.eD=function(t){null!==t&&(this.Oe.contains(t)||this.Oe.add(t))},Lf.prototype.deleteSourceEdge=Lf.prototype.CD=function(t){null!==t&&this.Oe.remove(t)},Lf.prototype.addDestinationEdge=Lf.prototype.dD=function(t){null!==t&&(this.Je.contains(t)||this.Je.add(t))},Lf.prototype.deleteDestinationEdge=Lf.prototype.BD=function(t){null!==t&&this.Je.remove(t)},Nn.u(Lf,{DI:"sourceVertexes"},function(){for(var t=new Q(Lf),i=this.lc;i.next();)t.add(i.value.fromVertex);return t.i}),Nn.u(Lf,{GG:"destinationVertexes"},function(){for(var t=new Q(Lf),i=this.ac;i.next();)t.add(i.value.toVertex);return t.i}),Nn.u(Lf,{vertexes:"vertexes"},function(){for(var t=new Q(Lf),i=this.lc;i.next();)t.add(i.value.fromVertex);for(i=this.ac;i.next();)t.add(i.value.toVertex);return t.i}),Nn.u(Lf,{lc:"sourceEdges"},function(){return this.Oe.i}),Nn.u(Lf,{ac:"destinationEdges"},function(){return this.Je.i}),Nn.u(Lf,{edges:"edges"},function(){for(var t=new Dn(Af),i=this.lc;i.next();)t.add(i.value);for(i=this.ac;i.next();)t.add(i.value);return t.i}),Nn.u(Lf,{LG:"edgesCount"},function(){return this.Oe.count+this.Je.count}),Lf.standardComparer=ll=function(t,i){var e=t.qd,n=i.qd;return e?n?(e=e.text)<(n=n.text)?-1:n<e?1:0:1:null!==n?-1:0},Lf.smartComparer=function(t,i){if(null===t)return null!==i?-1:0;if(null===i)return 1;var e=t.qd,n=i.qd;if(null===e)return null!==n?-1:0;if(null===n)return 1;for(var e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),n=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),o=0;o<e.length;o++)if(""!==n[o]&&void 0!==n[o]){var r=parseFloat(e[o]),s=parseFloat(n[o]);if(isNaN(r)){if(!isNaN(s))return 1;if(0!==e[o].localeCompare(n[o]))return e[o].localeCompare(n[o])}else{if(isNaN(s))return-1;if(0!=r-s)return r-s}}else if(""!==e[o])return 1;return""!==n[o]&&void 0!==n[o]?-1:0},Nn.ea("LayoutEdge",Af),Af.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null},Af.prototype.toString=function(t){void 0===t&&(t=0);var i="LayoutEdge#"+Nn.ld(this);return 0<t&&(i+=null!==this.link?"("+this.link.toString()+")":"",1<t&&(i+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --\x3e "+(this.toVertex?this.toVertex.toString():"null"))),i},Af.prototype.gx=function(){var t=this.fromVertex;this.fromVertex=this.toVertex,this.toVertex=t},Af.prototype.commit=function(){},Af.prototype.getOtherVertex=Af.prototype.WG=function(t){return this.toVertex===t?this.fromVertex:this.fromVertex===t?this.toVertex:null},Nn.Ja(Ff,Sf),Nn.ea("GridLayout",Ff),Ff.prototype.cloneProtected=function(t){Sf.prototype.cloneProtected.call(this,t),t.Ls=this.Ls,t.Ks=this.Ks,t.hj.assign(this.hj),t.Mh.assign(this.Mh),t.Ae=this.Ae,t.fd=this.fd,t.Lh=this.Lh,t.uh=this.uh},Ff.prototype.doLayout=function(t){null===t&&Nn.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.Xd=this.initialOrigin(this.Xd);for(var i=this.g,e=(t=this.nG(t)).copy().i;e.next();){var n=e.value;if(n instanceof Ru){var o=n;if(null!==o.T||null!==o.Z){t.remove(o);continue}}if(n.sf(),n instanceof kf)for(n=n.Ic;n.next();)t.remove(n.value)}if(0!==(o=t.dc()).length){switch(this.sorting){case gl:o.reverse();break;case vl:o.sort(this.comparer);break;case ml:o.sort(this.comparer),o.reverse()}var r=this.VI;isNaN(r)&&(r=0);var s=this.vF,s=isNaN(s)&&null!==i?Math.max(i.rb.width-i.padding.left-i.padding.right,0):Math.max(this.vF,0);switch(r<=0&&s<=0&&(r=1),t=this.spacing.width,isFinite(t)||(t=0),e=this.spacing.height,isFinite(e)||(e=0),null!==i&&i.Qb("Layout"),n=[],this.alignment){case fl:var a=t,h=e,l=Math.max(this.No.width,1);if(!isFinite(l))for(var u=l=0;u<o.length;u++)var f=(b=o[u]).Ca,l=Math.max(l,f.width);var l=Math.max(l+a,1),c=Math.max(this.No.height,1);if(!isFinite(c))for(u=c=0;u<o.length;u++)f=(b=o[u]).Ca,c=Math.max(c,f.height);for(var c=Math.max(c+h,1),d=this.Nf,p=this.Xd.x,y=p,g=this.Xd.y,v=0,m=0,u=0;u<o.length;u++){var b,f=(b=o[u]).Ca,x=Math.ceil((f.width+a)/l)*l,w=Math.ceil((f.height+h)/c)*c,k=0;switch(d){case pl:k=Math.abs(y-f.width);break;default:k=y+f.width}switch((0<r&&r-1<v||0<s&&0<v&&s<k)&&(n.push(new Ln(0,g,s+a,m)),y=p,g+=m,m=v=0),m=Math.max(m,w),w=0,d){case pl:w=-f.width;break;default:w=0}switch(b.moveTo(y+w,g),d){case pl:y-=x;break;default:y+=x}v++}n.push(new Ln(0,g,s+a,m));break;case cl:for(a=r,h=t,l=e,u=Math.max(this.No.width,1),b=g=x=0,f=Nn.L(),r=0;r<o.length;r++)d=(c=o[r]).Ca,p=Bh(c,c.cc,c.df,f),x=Math.max(x,p.x),g=Math.max(g,d.width-p.x),b=Math.max(b,p.y);switch(y=this.Nf){case pl:x+=h;break;default:g+=h}var u=isFinite(u)?Math.max(u+h,1):Math.max(x+g,1),M=g=this.Xd.x,v=this.Xd.y,m=0;x<=s&&(s-=x);for(var x=w=0,k=Math.max(this.No.height,1),P=b=0,T=!0,S=Nn.L(),r=0;r<o.length;r++){if(d=(c=o[r]).Ca,p=Bh(c,c.cc,c.df,f),0<m)switch(y){case pl:M=(M-g-(d.width-p.x))/u,M=(M=ci(Math.round(M),M)?Math.round(M):Math.floor(M))*u+g;break;default:M=(M-g+p.x)/u,M=(M=ci(Math.round(M),M)?Math.round(M):Math.ceil(M))*u+g}else switch(y){case pl:w=M+p.x+d.width;break;default:w=M-p.x}var C=0;switch(y){case pl:C=-(M+p.x)+w;break;default:C=M+d.width-p.x-w}if(0<a&&a-1<m||0<s&&0<m&&s<C){for(n.push(new Ln(0,T?v-b:v,s+h,P+b+l)),M=0;M<m&&r!==m;M++){var N=Bh(C=o[r-m+M],C.cc,C.df,S);C.moveTo(C.position.x,C.position.y+b-N.y)}P+=l,v=T?v+P:v+(P+b),m=P=b=0,M=g,T=!1}switch(M===g&&(x=y===pl?Math.max(x,d.width-p.x):Math.min(x,-p.x)),b=Math.max(b,p.y),P=Math.max(P,d.height-p.y),isFinite(k)&&(P=Math.max(P,Math.max(d.height,k)-p.y)),T?c.moveTo(M-p.x,v-p.y):c.moveTo(M-p.x,v),y){case pl:M-=p.x+h;break;default:M+=d.width-p.x+h}m++}for(n.push(new Ln(0,v,s+h,(T?P:P+b)+l)),M=0;M<m&&r!==m;M++)N=Bh(C=o[r-m+M],C.cc,C.df,f),C.moveTo(C.position.x,C.position.y+b-N.y);if(Nn.v(f),Nn.v(S),y===pl)for(r=0;r<n.length;r++)(o=n[r]).width+=x,o.x-=x;else for(r=0;r<n.length;r++)(o=n[r]).x>x&&(o.width+=o.x-x,o.x=x)}for(a=r=s=o=0;a<n.length;a++)h=n[a],o=Math.min(o,h.x),s=Math.min(s,h.y),r=Math.max(r,h.x+h.width);this.Nf===pl?this.commitLayers(n,new Se(o+t/2-(r+o),s-e/2)):this.commitLayers(n,new Se(o-t/2,s-e/2)),null!==i&&i.wd("Layout"),this.wf=!0}},Ff.prototype.commitLayers=function(){},Nn.defineProperty(Ff,{vF:"wrappingWidth"},function(){return this.Ls},function(t){this.Ls!==t&&(Nn.j(t,"number",Ff,"wrappingWidth"),0<t||isNaN(t))&&(this.Ls=t,this.Lw=isNaN(t),this.H())}),Nn.defineProperty(Ff,{VI:"wrappingColumn"},function(){return this.Ks},function(t){this.Ks!==t&&(Nn.j(t,"number",Ff,"wrappingColumn"),0<t||isNaN(t))&&(this.Ks=t,this.H())}),Nn.defineProperty(Ff,{No:"cellSize"},function(){return this.hj},function(t){Nn.A(t,st,Ff,"cellSize"),this.hj.K(t)||(this.hj.assign(t),this.H())}),Nn.defineProperty(Ff,{spacing:"spacing"},function(){return this.Mh},function(t){Nn.A(t,st,Ff,"spacing"),this.Mh.K(t)||(this.Mh.assign(t),this.H())}),Nn.defineProperty(Ff,{alignment:"alignment"},function(){return this.Ae},function(t){this.Ae!==t&&(Nn.pb(t,Ff,Ff,"alignment"),t===cl||t===fl)&&(this.Ae=t,this.H())}),Nn.defineProperty(Ff,{Nf:"arrangement"},function(){return this.fd},function(t){this.fd!==t&&(Nn.pb(t,Ff,Ff,"arrangement"),t===dl||t===pl)&&(this.fd=t,this.H())}),Nn.defineProperty(Ff,{sorting:"sorting"},function(){return this.Lh},function(t){this.Lh!==t&&(Nn.pb(t,Ff,Ff,"sorting"),t===yl||t===gl||t===vl||t===ml)&&(this.Lh=t,this.H())}),Nn.defineProperty(Ff,{comparer:"comparer"},function(){return this.uh},function(t){this.uh!==t&&(Nn.j(t,"function",Ff,"comparer"),this.uh=t,this.H())}),Ff.standardComparer=ul=function(t,i){var e=t.text,n=i.text;return e<n?-1:n<e?1:0},Ff.smartComparer=function(t,i){if(null===t)return null!==i?-1:0;if(null===i)return 1;for(var e=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),n=i.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),o=0;o<e.length;o++)if(""!==n[o]&&void 0!==n[o]){var r=parseFloat(e[o]),s=parseFloat(n[o]);if(isNaN(r)){if(!isNaN(s))return 1;if(0!==e[o].localeCompare(n[o]))return e[o].localeCompare(n[o])}else{if(isNaN(s))return-1;if(0!=r-s)return r-s}}else if(""!==e[o])return 1;return""!==n[o]&&void 0!==n[o]?-1:0},Ff.Position=fl=Nn.p(Ff,"Position",0),Ff.Location=cl=Nn.p(Ff,"Location",1),Ff.LeftToRight=dl=Nn.p(Ff,"LeftToRight",2),Ff.RightToLeft=pl=Nn.p(Ff,"RightToLeft",3),Ff.Forward=yl=Nn.p(Ff,"Forward",4),Ff.Reverse=gl=Nn.p(Ff,"Reverse",5),Ff.Ascending=vl=Nn.p(Ff,"Ascending",6),Ff.Descending=ml=Nn.p(Ff,"Descending",7),Nn.Ja(zf,Sf),Nn.ea("CircularLayout",zf),zf.prototype.cloneProtected=function(t){Sf.prototype.cloneProtected.call(this,t),t.Pr=this.Pr,t.Yp=this.Yp,t.vs=this.vs,t.xs=this.xs,t.fd=this.fd,t.aa=this.aa,t.Lh=this.Lh,t.uh=this.uh,t.Mh=this.Mh,t.Er=this.Er},zf.prototype.createNetwork=function(){return new Uf},zf.prototype.doLayout=function(t){if(null===t&&Nn.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),(t=this.network.vertexes).count<=1)1===t.count&&((t=t.first()).na=0,t.ua=0);else{(l=new Dn(Jf)).Tc(t.i),t=new Dn(Jf);var i=new Dn(Jf),e=this.sort(l),n=this.$x,o=this.DB,r=this.Jd,s=this.Kn,a=this.ay,h=this.Bq,l=this.yk,u=this.TC,f=this.sg,c=this.Du,n=this.Nf,o=this.Rw,r=this.eI;if((!isFinite(r)||r<=0)&&(r=NaN),s=this.hG,(!isFinite(s)||s<=0)&&(s=1),a=this.xe,isFinite(a)||(a=0),h=this.Af,(!isFinite(h)||360<h||h<1)&&(h=360),l=this.spacing,isFinite(l)||(l=NaN),n===kl&&o===Fl?n=bl:n===kl&&o!==Fl&&(o=Fl,n=this.Nf),(this.direction===Tl||this.direction===Sl)&&this.sorting!==Ll){for(var d=0;!(d>=e.length)&&(t.add(e.da(d)),!(d+1>=e.length));d+=2)i.add(e.da(d+1));this.direction===Tl?(this.Nf===kl&&t.reverse(),(e=new Dn(Jf)).Tc(t),e.Tc(i)):(this.Nf===kl&&i.reverse(),(e=new Dn(Jf)).Tc(i),e.Tc(t))}for(var p=e.length,y=u=0,d=0;d<e.length;d++){var f=a+h*y*(this.direction===Ml?1:-1)/p,g=e.da(d).diameter;isNaN(g)&&(g=Yf(e.da(d),f)),h<360&&(0===d||d===e.length-1)&&(g/=2),u+=g,y++}if(isNaN(r)||n===kl){if(isNaN(l)&&(l=6),n!==bl&&n!==kl){for(g=-1/0,d=0;d<p;d++){var c=e.da(d),v=e.da(d===p-1?0:d+1);isNaN(c.diameter)&&Yf(c,0),isNaN(v.diameter)&&Yf(v,0),g=Math.max(g,(c.diameter+v.diameter)/2)}c=g+l,r=n===wl?(g+l)/(f=2*Math.PI/p):Vf(this,c*(360<=h?p:p-1),s,a*Math.PI/180,h*Math.PI/180)}else r=Vf(this,u+(360<=h?p:p-1)*(n!==kl?l:1.6*l),s,a*Math.PI/180,h*Math.PI/180);f=r*s}else if(y=Rf(this,r,f=r*s,a*Math.PI/180,h*Math.PI/180),isNaN(l))n!==bl&&n!==kl||(l=(y-u)/(360<=h?p:p-1));else if(n===bl||n===kl)(d=(y-u)/(360<=h?p:p-1))<l?f=(r=Vf(this,u+l*(360<=h?p:p-1),s,a*Math.PI/180,h*Math.PI/180))*s:l=d;else{for(g=-1/0,d=0;d<p;d++)c=e.da(d),v=e.da(d===p-1?0:d+1),isNaN(c.diameter)&&Yf(c,0),isNaN(v.diameter)&&Yf(v,0),g=Math.max(g,(c.diameter+v.diameter)/2);r<(d=Vf(this,(c=g+l)*(360<=h?p:p-1),s,a*Math.PI/180,h*Math.PI/180))?f=(r=d)*s:c=y/(360<=h?p:p-1)}if(this.$x=n,this.DB=o,this.Jd=r,this.Kn=s,this.ay=a,this.Bq=h,this.yk=l,this.TC=u,this.sg=f,this.Du=c,l=e,e=this.$x,n=this.Jd,o=this.ay,s=this.Bq,a=this.yk,h=this.sg,u=this.Du,this.direction!==Tl&&this.direction!==Sl||e!==kl)if(this.direction===Tl||this.direction===Sl){switch(r=0,e){case xl:r=180*Hf(this,n,h,o,u)/Math.PI;break;case bl:u=l=0,null!==(r=t.first())&&(l=Yf(r,Math.PI/2)),null!==(r=i.first())&&(u=Yf(r,Math.PI/2)),r=180*Hf(this,n,h,o,a+(l+u)/2)/Math.PI;break;case wl:r=s/l.length}if(this.direction===Tl){switch(e){case xl:Ef(this,t,o,Pl);break;case bl:Of(this,t,o,Pl);break;case wl:Bf(this,t,s/2,o,Pl)}switch(e){case xl:Ef(this,i,o+r,Ml);break;case bl:Of(this,i,o+r,Ml);break;case wl:Bf(this,i,s/2,o+r,Ml)}}else{switch(e){case xl:Ef(this,i,o,Pl);break;case bl:Of(this,i,o,Pl);break;case wl:Bf(this,i,s/2,o,Pl)}switch(e){case xl:Ef(this,t,o+r,Ml);break;case bl:Of(this,t,o+r,Ml);break;case wl:Bf(this,t,s/2,o+r,Ml)}}}else switch(e){case xl:Ef(this,l,o,this.direction);break;case bl:Of(this,l,o,this.direction);break;case wl:Bf(this,l,s,o,this.direction);break;case kl:qf(this,l,s,o,this.direction)}else qf(this,l,s,o-s/2,Ml)}this.updateParts(),this.network=null,this.wf=!0},zf.prototype.commitLayout=function(){this.commitNodes(),this.xt&&this.commitLinks()},zf.prototype.commitNodes=function(){for(var t=this.XF,i=this.network.vertexes.i;i.next();){var e=i.value;e.x+=t.x,e.y+=t.y,e.commit()}},zf.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},zf.prototype.sort=function(t){switch(this.sorting){case Cl:break;case Nl:t.reverse();break;case jl:t.sort(this.comparer);break;case Dl:t.sort(this.comparer),t.reverse();break;case Ll:for(var i=[],e=0;e<t.length;e++)i.push(0);for(var n=new Dn(Jf),e=0;e<t.length;e++){var o=-1,r=-1;if(0===e)for(var s=0;s<t.length;s++){o<(h=t.da(s).LG)&&(o=h,r=s)}else for(s=0;s<t.length;s++)o<(h=i[s])&&(o=h,r=s);for(n.add(t.da(r)),i[r]=-1,o=0,s=(r=t.da(r)).lc;s.next();)(o=t.indexOf(s.value.fromVertex))<0||0<=i[o]&&i[o]++;for(r=r.ac;r.next();)(o=t.indexOf(r.value.toVertex))<0||0<=i[o]&&i[o]++}for(t=[],i=0;i<n.length;i++){s=n.da(i),t[i]=[];for(var a=0,e=s.ac;e.next();)(a=n.indexOf(e.value.toVertex))!==i&&t[i].indexOf(a)<0&&t[i].push(a);for(e=s.lc;e.next();)(a=n.indexOf(e.value.fromVertex))!==i&&t[i].indexOf(a)<0&&t[i].push(a)}for(s=[],i=0;i<t.length;i++)s[i]=0;for(var e=[],h=[],l=[],o=[],r=new Dn(Jf),u=0,i=0;i<t.length;i++){if(1===(y=t[i].length))o.push(i);else if(0===y)r.add(n.da(i));else{if(0===u)e.push(i);else{for(var f=1/0,c=1/0,d=-1,p=[],y=0;y<e.length;y++)t[e[y]].indexOf(e[y===e.length-1?0:y+1])<0&&p.push(y===e.length-1?0:y+1);if(0===p.length)for(y=0;y<e.length;y++)p.push(y);for(y=0;y<p.length;y++){for(var g=p[y],a=t[i],v=h,m=l,b=s,x=g,w=e,k=0,M=0;M<v.length;M++){var P=b[v[M]],T=b[m[M]],S=0,C=0,C=P<T?(S=P,T):(S=T,P);if(S<x&&x<=C)for(P=0;P<a.length;P++)T=a[P],w.indexOf(T)<0||S<b[T]&&b[T]<C||S===b[T]||C===b[T]||k++;else for(P=0;P<a.length;P++)T=a[P],w.indexOf(T)<0||S<b[T]&&b[T]<C&&S!==b[T]&&C!==b[T]&&k++}for(v=k,b=m=0;b<t[i].length;b++)0<=(a=e.indexOf(t[i][b]))&&(m+=(a=Math.abs(g-(g<=a?a+1:a)))<e.length+1-a?a:e.length+1-a);for(b=0;b<h.length;b++)g<=(a=s[h[b]])&&a++,g<=(x=s[l[b]])&&x++,x<a&&(w=x,x=a,a=w),x-a<(e.length+2)/2==(a<g&&g<=x)&&m++;(v<f||v===f&&m<c)&&(f=v,c=m,d=g)}for(e.splice(d,0,i),y=0;y<e.length;y++)s[e[y]]=y;for(y=0;y<t[i].length;y++)f=t[i][y],0<=e.indexOf(f)&&(h.push(i),l.push(f))}u++}}for(h=!1,l=e.length;;){for(h=!0,s=0;s<o.length;s++)if(u=t[i=o[s]][0],0<=(a=e.indexOf(u))){for(c=y=0;c<t[u].length;c++)f=t[u][c],(f=e.indexOf(f))<0||f===a||(y+=f<a!=l-(d=a<f?f-a:a-f)<d?1:-1);e.splice(y<0?a:a+1,0,i),o.splice(s,1),s--}else h=!1;if(h)break;e.push(o[0]),o.splice(0,1)}for(i=0;i<e.length;i++)a=e[i],r.add(n.da(a));return r;default:Nn.k("Invalid sorting type.")}return t},Nn.defineProperty(zf,{eI:"radius"},function(){return this.Pr},function(t){this.Pr!==t&&(Nn.j(t,"number",zf,"radius"),0<t||isNaN(t))&&(this.Pr=t,this.H())}),Nn.defineProperty(zf,{hG:"aspectRatio"},function(){return this.Yp},function(t){this.Yp!==t&&(Nn.j(t,"number",zf,"aspectRatio"),0<t&&(this.Yp=t,this.H()))}),Nn.defineProperty(zf,{xe:"startAngle"},function(){return this.vs},function(t){this.vs!==t&&(Nn.j(t,"number",zf,"startAngle"),this.vs=t,this.H())}),Nn.defineProperty(zf,{Af:"sweepAngle"},function(){return this.xs},function(t){this.xs!==t&&(Nn.j(t,"number",zf,"sweepAngle"),this.xs=0<t&&t<=360?t:360,this.H())}),Nn.defineProperty(zf,{Nf:"arrangement"},function(){return this.fd},function(t){this.fd!==t&&(Nn.pb(t,zf,zf,"arrangement"),t===kl||t===bl||t===xl||t===wl)&&(this.fd=t,this.H())}),Nn.defineProperty(zf,{direction:"direction"},function(){return this.aa},function(t){this.aa!==t&&(Nn.pb(t,zf,zf,"direction"),t===Ml||t===Pl||t===Tl||t===Sl)&&(this.aa=t,this.H())}),Nn.defineProperty(zf,{sorting:"sorting"},function(){return this.Lh},function(t){this.Lh!==t&&(Nn.pb(t,zf,zf,"sorting"),t===Cl||t===Nl||t===jl||Dl||t===Ll)&&(this.Lh=t,this.H())}),Nn.defineProperty(zf,{comparer:"comparer"},function(){return this.uh},function(t){this.uh!==t&&(Nn.j(t,"function",zf,"comparer"),this.uh=t,this.H())}),Nn.defineProperty(zf,{spacing:"spacing"},function(){return this.Mh},function(t){this.Mh!==t&&(Nn.j(t,"number",zf,"spacing"),this.Mh=t,this.H())}),Nn.defineProperty(zf,{Rw:"nodeDiameterFormula"},function(){return this.Er},function(t){this.Er!==t&&(Nn.pb(t,zf,zf,"nodeDiameterFormula"),t===Al||t===Fl)&&(this.Er=t,this.H())}),Nn.u(zf,{YF:"actualXRadius"},function(){return this.Jd}),Nn.u(zf,{ZF:"actualYRadius"},function(){return this.sg}),Nn.u(zf,{YI:"actualSpacing"},function(){return this.yk}),Nn.u(zf,{XF:"actualCenter"},function(){return isNaN(this.Xd.x)||isNaN(this.Xd.y)?new Se(0,0):new Se(this.Xd.x+this.YF,this.Xd.y+this.ZF)}),zf.ConstantSpacing=bl=Nn.p(zf,"ConstantSpacing",0),zf.ConstantDistance=xl=Nn.p(zf,"ConstantDistance",1),zf.ConstantAngle=wl=Nn.p(zf,"ConstantAngle",2),zf.Packed=kl=Nn.p(zf,"Packed",3),zf.Clockwise=Ml=Nn.p(zf,"Clockwise",4),zf.Counterclockwise=Pl=Nn.p(zf,"Counterclockwise",5),zf.BidirectionalLeft=Tl=Nn.p(zf,"BidirectionalLeft",6),zf.BidirectionalRight=Sl=Nn.p(zf,"BidirectionalRight",7),zf.Forwards=Cl=Nn.p(zf,"Forwards",8),zf.Reverse=Nl=Nn.p(zf,"Reverse",9),zf.Ascending=jl=Nn.p(zf,"Ascending",10),zf.Descending=Dl=Nn.p(zf,"Descending",11),zf.Optimized=Ll=Nn.p(zf,"Optimized",12),zf.Pythagorean=Al=Nn.p(zf,"Pythagorean",13),zf.Circular=Fl=Nn.p(zf,"Circular",14),Kf.prototype.compare=function(t,i){if(0<t&&this.Zo<0||Math.abs(t)<Math.abs(this.Zo)&&!(t<0&&0<this.Zo)){this.Zo=t,this.kn=[],this.Mp=[];for(var e=0;e<i.length;e++)this.kn[e]=i[e].mb.x,this.Mp[e]=i[e].mb.y}},Kf.prototype.commit=function(t){if(null!==this.kn&&null!==this.Mp)for(var i=0;i<this.kn.length;i++){var e=t.da(i);e.x=this.kn[i],e.y=this.Mp[i]}},Nn.Ja(Uf,Nf),Nn.ea("CircularNetwork",Uf),Uf.prototype.createVertex=function(){return new Jf},Uf.prototype.createEdge=function(){return new Wf},Nn.Ja(Jf,Lf),Nn.ea("CircularVertex",Jf),Nn.Ja(Wf,Af),Nn.ea("CircularEdge",Wf),Nn.Ja(Xf,Sf),Nn.ea("ForceDirectedLayout",Xf),Xf.prototype.cloneProtected=function(t){Sf.prototype.cloneProtected.call(this,t),t.bg.assign(this.bg),t.Xp=this.Xp,t.Kh=this.Kh,t.th=this.th,t.io=this.io,t.Dq=this.Dq,t.Bh=this.Bh,t.Qr=this.Qr,t.Fn=this.Fn,t.En=this.En,t.Bn=this.Bn,t.Dn=this.Dn,t.tq=this.tq,t.sq=this.sq},Xf.prototype.createNetwork=function(){return new oc},Xf.prototype.doLayout=function(t){if(null===t&&Nn.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),t=this.Oz,0<this.network.vertexes.count){this.network.uw();for(var i=this.network.vertexes.i;i.next();){var e=i.value;e.charge=this.electricalCharge(e),e.mass=this.gravitationalMass(e)}for(i=this.network.edges.i;i.next();)(e=i.value).stiffness=this.springStiffness(e),e.length=this.springLength(e);if(this.Zy(),this.dr=0,this.needsClusterLayout()){for(e=(i=this.network).EI().i;e.next();){this.network=e.value;for(var n=this.network.vertexes.i;n.next();){var o=n.value;o.Zf=o.vertexes.count,o.ck=1,o.Fm=null,o.nh=null}!function t(i,e,n){if(Zf(i,e)){var o=i.Bh;i.Bh*=1+1/(e+1);var r=Qf(i,e),s=Math.max(0,Math.max(Math.min(i.network.vertexes.count,n*(e+1)/11),10));for(i.Oz+=s,t(i,e+1,n),ec(i,s),$f(i,r),null===(e=i.rg)?e=new Dn(rc):e.clear(),e.Tc(r.vertexes),e.sort(function(t,i){return null===t||null===i||t===i?0:i.Zf-t.Zf}),r=e.i;r.next();)_f(i,r.value);i.Bh=o}}(this,0,t)}this.network=i,e.reset();for(var n=this.jD,r=e.count,s=!0,a=o=0,h=Nn.jb(),l=0;l<r+i.vertexes.count+2;l++)h[l]=null;r=0,e.reset();for(var u=Nn.ag();e.next();)if(l=e.value,this.$g(l,u),s)s=!1,o=u.x+u.width/2,a=u.y+u.height/2,h[0]=new Se(u.x+u.width+n.width,u.y),h[1]=new Se(u.x,u.y+u.height+n.height),r=2;else{var f=tc(h,r,o,a,u.width,u.height,n),c=h[f],d=new Se(c.x+u.width+n.width,c.y),p=new Se(c.x,c.y+u.height+n.height);for(f+1<r&&h.splice(f+1,0,null),h[f]=d,h[f+1]=p,r++,f=c.x-u.x,c=c.y-u.y,l=l.vertexes.i;l.next();)(d=l.value).na+=f,d.ua+=c}for(Nn.Vb(u),l=i.vertexes.i;l.next();)u=(s=l.value).mb,r<2?(o=u.x+u.width/2,a=u.y+u.height/2,h[0]=new Se(u.x+u.width+n.width,u.y),h[1]=new Se(u.x,u.y+u.height+n.height),r=2):(d=new Se((c=h[f=tc(h,r,o,a,u.width,u.height,n)]).x+u.width+n.width,c.y),p=new Se(c.x,c.y+u.height+n.height),f+1<r&&h.splice(f+1,0,null),h[f]=d,h[f+1]=p,r++,s.na=c.x+s.width/2,s.ua=c.y+s.height/2);for(Nn.sa(h),e.reset();e.next();){for(o=(n=e.value).vertexes.i;o.next();)i.Zk(o.value);for(n=n.edges.i;n.next();)i.Jo(n.value)}}ec(this,t),this.updateParts()}this.io=t,this.network=null,this.wf=!0},Xf.prototype.needsClusterLayout=function(){if(this.network.vertexes.count<3)return!1;for(var t=0,i=0,e=this.network.vertexes.first().mb,n=this.network.vertexes.i;n.next();){if(n.value.mb.xg(e)&&2<++t)return!0;if(10<i)break;i++}return!1},Xf.prototype.$g=function(t,i){for(var e=!0,n=t.vertexes.i;n.next();){var o=n.value;e?(e=!1,i.set(o.mb)):i.ai(o.mb)}return i},Xf.prototype.Zy=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},Xf.prototype.addComments=function(t){var i=t.Jc;if(null!==i)for(i=i.LD();i.next();){if("Comment"===(n=i.value).gc&&n.isVisible()){var e=this.network.Nm(n);null===e&&(e=this.network.Ps(n)),e.charge=this.BG;for(var n=null,o=e.ac;o.next();){var r=o.value;if(r.toVertex===t){n=r;break}}if(null===n)for(o=e.lc;o.next();)if((r=o.value).fromVertex===t){n=r;break}null===n&&(n=this.network.mp(t,e,null)),n.length=this.CG}}},Xf.prototype.moveFixedVertex=function(){},Xf.prototype.commitLayout=function(){this.oA(),this.commitNodes(),this.xt&&this.commitLinks()},Xf.prototype.oA=function(){if(this.Gp)for(var t=this.network.edges.i;t.next();){var i=t.value.link;null!==i&&(i.xb=d,i.yb=d)}},Xf.prototype.commitNodes=function(){var t=0,i=0;this.gG&&(e=Nn.ag(),this.$g(this.network,e),t=(i=this.Xd).x-e.x,i=i.y-e.y,Nn.Vb(e));for(var e=Nn.ag(),n=this.network.vertexes.i;n.next();){var o=n.value;0===t&&0===i||(e.assign(o.mb),e.x+=t,e.y+=i,o.mb=e),o.commit()}Nn.Vb(e)},Xf.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},Xf.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Fn:t},Xf.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.En:t},Xf.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Bn:t},Xf.prototype.electricalFieldX=function(){return 0},Xf.prototype.electricalFieldY=function(){return 0},Xf.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Dn:t},Xf.prototype.gravitationalFieldX=function(){return 0},Xf.prototype.gravitationalFieldY=function(){return 0},Xf.prototype.isFixed=function(t){return t.isFixed},Nn.u(Xf,{yJ:"currentIteration"},function(){return this.dr}),Nn.defineProperty(Xf,{jD:"arrangementSpacing"},function(){return this.bg},function(t){Nn.A(t,st,Xf,"arrangementSpacing"),this.bg.K(t)||(this.bg.assign(t),this.H())}),Nn.defineProperty(Xf,{gG:"arrangesToOrigin"},function(){return this.Xp},function(t){this.Xp!==t&&(Nn.j(t,"boolean",Xf,"arrangesToOrigin"),this.Xp=t,this.H())}),Nn.defineProperty(Xf,{Gp:"setsPortSpots"},function(){return this.Kh},function(t){this.Kh!==t&&(Nn.j(t,"boolean",Xf,"setsPortSpots"),this.Kh=t,this.H())}),Nn.defineProperty(Xf,{comments:"comments"},function(){return this.th},function(t){this.th!==t&&(Nn.j(t,"boolean",Xf,"comments"),this.th=t,this.H())}),Nn.defineProperty(Xf,{Oz:"maxIterations"},function(){return this.io},function(t){this.io!==t&&(Nn.j(t,"number",Xf,"maxIterations"),0<=t&&(this.io=t,this.H()))}),Nn.defineProperty(Xf,{HD:"epsilonDistance"},function(){return this.Dq},function(t){this.Dq!==t&&(Nn.j(t,"number",Xf,"epsilonDistance"),0<t&&(this.Dq=t,this.H()))}),Nn.defineProperty(Xf,{PJ:"infinityDistance"},function(){return this.Bh},function(t){this.Bh!==t&&(Nn.j(t,"number",Xf,"infinityDistance"),1<t&&(this.Bh=t,this.H()))}),Nn.defineProperty(Xf,{Zw:"randomNumberGenerator"},function(){return this.Qr},function(t){this.Qr!==t&&(null!==t&&"function"!=typeof t.random&&Nn.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Qr=t)}),Nn.defineProperty(Xf,{KJ:"defaultSpringStiffness"},function(){return this.Fn},function(t){this.Fn!==t&&(Nn.j(t,"number",Xf,"defaultSpringStiffness"),this.Fn=t,this.H())}),Nn.defineProperty(Xf,{JJ:"defaultSpringLength"},function(){return this.En},function(t){this.En!==t&&(Nn.j(t,"number",Xf,"defaultSpringLength"),this.En=t,this.H())}),Nn.defineProperty(Xf,{DJ:"defaultElectricalCharge"},function(){return this.Bn},function(t){this.Bn!==t&&(Nn.j(t,"number",Xf,"defaultElectricalCharge"),this.Bn=t,this.H())}),Nn.defineProperty(Xf,{EJ:"defaultGravitationalMass"},function(){return this.Dn},function(t){this.Dn!==t&&(Nn.j(t,"number",Xf,"defaultGravitationalMass"),this.Dn=t,this.H())}),Nn.defineProperty(Xf,{CG:"defaultCommentSpringLength"},function(){return this.tq},function(t){this.tq!==t&&(Nn.j(t,"number",Xf,"defaultCommentSpringLength"),this.tq=t,this.H())}),Nn.defineProperty(Xf,{BG:"defaultCommentElectricalCharge"},function(){return this.sq},function(t){this.sq!==t&&(Nn.j(t,"number",Xf,"defaultCommentElectricalCharge"),this.sq=t,this.H())}),Nn.Ja(oc,Nf),Nn.ea("ForceDirectedNetwork",oc),oc.prototype.createVertex=function(){return new rc},oc.prototype.createEdge=function(){return new sc},Nn.Ja(rc,Lf),Nn.ea("ForceDirectedVertex",rc),Nn.Ja(sc,Af),Nn.ea("ForceDirectedEdge",sc),Nn.Ja(ac,Sf),Nn.ea("LayeredDigraphLayout",ac),ac.prototype.cloneProtected=function(t){Sf.prototype.cloneProtected.call(this,t),t.$l=this.$l,t.Hd=this.Hd,t.aa=this.aa,t.An=this.An,t.bo=this.bo,t.Sn=this.Sn,t.Xl=this.Xl,t.nn=this.nn,t.Di=this.Di,t.Kh=this.Kh,t.ir=this.ir},ac.prototype.createNetwork=function(){return new Ac},ac.prototype.doLayout=function(t){for(null===t&&Nn.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.Xd=this.initialOrigin(this.Xd),this.ov=-1,this.Hf=this.sr=0,this.Br=this.zr=this.dm=null,t=0;t<this.Sg.length;t++)this.Sg[t]=null;if(0<this.network.vertexes.count){for(this.network.uw(),t=this.network.edges.i;t.next();)t.value.rev=!1;switch(this.An){default:case Bl:var i=0,e=this.network.vertexes.count-1;(t=[]).length=e+1;for(var n=this.network.vertexes.i;n.next();)n.value.valid=!0;for(;null!==function(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid)return i}return null}(this.network);){for(n=gc(this.network);null!==n;)t[e]=n,e--,n.valid=!1,n=gc(this.network);for(n=vc(this.network);null!==n;)t[i]=n,i++,n.valid=!1,n=vc(this.network);for(var n=null,o=0,r=this.network.vertexes.i;r.next();){if((f=r.value).valid){for(var s=0,a=f.ac;a.next();)a.value.toVertex.valid&&s++;for(var a=0,h=f.lc;h.next();)h.value.fromVertex.valid&&a++;(null===n||o<s-a)&&(n=f,o=s-a)}}null!==n&&(t[i]=n,i++,n.valid=!1)}for(i=0;i<this.network.vertexes.count;i++)t[i].index=i;for(t=this.network.edges.i;t.next();)(i=t.value).fromVertex.index>i.toVertex.index&&(this.network.gx(i),i.rev=!0);break;case zl:for(i=this.network.vertexes.i;i.next();)(t=i.value).To=-1,t.finish=-1;for(t=this.network.edges.i;t.next();)t.value.forest=!1;for(this.Ar=0,i.reset();i.next();)0===(e=i.value).lc.count&&mc(this,e);for(i.reset();i.next();)-1===(e=i.value).To&&mc(this,e);for(t.reset();t.next();)(i=t.value).forest||(n=(e=i.fromVertex).finish,r=(o=i.toVertex).finish,o.To<e.To&&n<r&&(this.network.gx(i),i.rev=!0))}for(t=this.network.vertexes.i;t.next();)t.value.layer=-1;for(this.ob=-1,this.assignLayers(),t.reset();t.next();)this.ob=Math.max(this.ob,t.value.layer);for(t=[],e=this.network.edges.i;e.next();)(i=e.value).valid=!1,t.push(i);for(e=0;e<t.length;e++)if(!(i=t[e]).valid&&(null!==i.fromVertex.qd&&null!==i.toVertex.qd||i.fromVertex.layer!==i.toVertex.layer)){if(a=f=s=r=0,o=i.fromVertex,n=i.toVertex,null!==i.link){if(null===(s=i.link))continue;var l=o.qd,r=n.qd;if(null===l||null===r)continue;var u=s.T,f=s.Z,c=s.bd,a=s.Fd;i.rev&&(s=u,h=c,u=f,c=a,f=s,a=h);var d=o.O,s=i.toVertex.O,p=i.rev?n.M:o.M,h=Nn.L();p.G()?(Bh(u,c,jn,h),h.G()||h.assign(d)):h.assign(d),l!==u&&p.G()&&u.isVisible()&&((l=o.M).G()&&(h.x+=p.x-l.x,h.y+=p.y-l.y)),u=i.rev?o.M:n.M,l=Nn.L(),u.G()?(Bh(f,a,jn,l),l.G()||l.assign(s)):l.assign(s),r!==f&&u.G()&&f.isVisible()&&((r=n.M).G()&&(l.x+=u.x-r.x,l.y+=u.y-r.y)),a=90===this.aa||270===this.aa?(r=Math.round((h.x-d.x)/this.Hd),f=h.x,s=Math.round((l.x-s.x)/this.Hd),l.x):(r=Math.round((h.y-d.y)/this.Hd),f=h.y,s=Math.round((l.y-s.y)/this.Hd),l.y),Nn.v(h),Nn.v(l),i.portFromColOffset=r,i.portFromPos=f,i.portToColOffset=s,i.portToPos=a}else i.portFromColOffset=0,i.portFromPos=0,i.portToColOffset=0,i.portToPos=0;h=o.layer,d=n.layer;t:if(l=i,u=0,p=l.link,null!==p){var y=p.bd,g=p.Fd;if(null!==y&&null!==g){var v=p.T,c=p.Z;if(null!==v&&null!==c){var m=y.xb,b=g.yb;this.Gp||(p.xb.Uc()||(m=p.xb),p.yb.Uc()||(b=p.yb));var x=p.jc,w=Cc(this,!0);!m.Uc()&&m!==Te||(m=w);var k=Cc(this,!1);if(!b.Uc()&&b!==Te||(b=k),m.Ui()&&m.cp(k)&&b.Ui()&&b.cp(w)){u=0;break t}w=p.getLinkPoint(v,y,m,!0,x,c,g,Nn.L()),m=p.getLinkDirection(v,y,w,m,!0,x,c,g),Nn.v(w),(m===xc(this,l,!0)||this.Gp&&null!==v&&1===v.ports.count&&l.rev)&&(u+=1),m=p.getLinkPoint(c,g,b,!1,x,v,y,Nn.L()),p=p.getLinkDirection(c,g,m,b,!1,x,v,y),Nn.v(m),(p===xc(this,l,!1)||this.Gp&&null!==c&&1===c.ports.count&&l.rev)&&(u+=2)}}}if(l=1===u||3===u,(u=2===u||3===u)&&((c=this.network.createVertex()).qd=null,c.Cm=1,c.layer=h,c.near=o,this.network.Zk(c),(o=this.network.mp(o,c,i.link)).valid=!1,o.rev=i.rev,o.portFromColOffset=r,o.portToColOffset=0,o.portFromPos=f,o.portToPos=0,o=c),p=1,l&&p--,p<h-d&&0<h){for(i.valid=!1,(c=this.network.createVertex()).qd=null,c.Cm=2,c.layer=h-1,this.network.Zk(c),(o=this.network.mp(o,c,i.link)).valid=!0,o.rev=i.rev,o.portFromColOffset=u?0:r,o.portToColOffset=0,o.portFromPos=u?0:f,o.portToPos=0,o=c,h--;p<h-d&&0<h;)(c=this.network.createVertex()).qd=null,c.Cm=3,c.layer=h-1,this.network.Zk(c),(o=this.network.mp(o,c,i.link)).valid=!0,o.rev=i.rev,o.portFromColOffset=0,o.portToColOffset=0,o.portFromPos=0,o.portToPos=0,o=c,h--;(o=this.network.mp(c,n,i.link)).valid=!l,l&&(c.near=n),o.rev=i.rev,o.portFromColOffset=0,o.portToColOffset=s,o.portFromPos=0,o.portToPos=a}else i.valid=!0}for(i=this.Td=[],e=0;e<=this.ob;e++)i[e]=0;for(t=this.network.vertexes.i;t.next();)(e=t.value).index=-1;for(this.initializeIndices(),this.ov=-1,e=this.Hf=this.sr=0;e<=this.ob;e++)i[e]>i[this.Hf]&&(this.ov=i[e]-1,this.Hf=e),i[e]<i[this.sr]&&(this.sr=e);for(this.Br=[],e=0;e<i.length;e++)this.Br[e]=[];for(t.reset();t.next();)i=t.value,(e=this.Br[i.layer])[i.index]=i;for(this.Fb=-1,t=0;t<=this.ob;t++){for(i=jc(this,t),e=0,n=this.Td[t],o=0;o<n;o++)r=i[o],e+=this.nodeMinColumnSpace(r,!0),r.column=e,e+=1,e+=this.nodeMinColumnSpace(r,!1);this.Fb=Math.max(this.Fb,e-1),Dc(this,t,i)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.wf=!0},ac.prototype.linkMinLength=function(t){var i=t.toVertex;for(t=t.fromVertex.ac;t.next();)t.value.toVertex===i&&0;return 1},ac.prototype.nodeMinLayerSpace=function(t,i){return null===t.qd?0:90===this.aa||270===this.aa?i?t.O.y+10:t.M.height-t.O.y+10:i?t.O.x+10:t.M.width-t.O.x+10},ac.prototype.nodeMinColumnSpace=function(t,i){if(null===t.qd)return 0;var e=i?t.Wz:t.Vz;return null!==e?e:90===(e=this.aa)||270===e?i?t.Wz=t.O.x/this.Hd+1|0:t.Vz=(t.M.width-t.O.x)/this.Hd+1|0:i?t.Wz=t.O.y/this.Hd+1|0:t.Vz=(t.M.height-t.O.y)/this.Hd+1|0},ac.prototype.countCrossings=function(){for(var t=0,i=0;i<=this.ob;i++)for(var e=fc(this,i,1),n=this.Td[i],o=0;o<n;o++)for(var r=o;r<n;r++)t+=e[o*n+r];return t},ac.prototype.normalize=function(){var t=1/0;this.Fb=-1;for(var i=this.network.vertexes.i;i.next();){var e=i.value,t=Math.min(t,e.column-this.nodeMinColumnSpace(e,!0));this.Fb=Math.max(this.Fb,e.column+this.nodeMinColumnSpace(e,!1))}for(i.reset();i.next();)i.value.column-=t;this.Fb-=t},ac.prototype.assignLayers=function(){switch(this.bo){case El:bc(this);break;case ql:for(var t=0,i=this.network.vertexes.i;i.next();)t=function t(i,e){var n=0;if(-1===e.layer){for(var o=e.lc;o.next();)var r=o.value,s=r.fromVertex,r=i.linkMinLength(r),n=Math.max(n,t(i,s)+r);e.layer=n}else n=e.layer;return n}(this,i.value),this.ob=Math.max(t,this.ob);for(i.reset();i.next();)(t=i.value).layer=this.ob-t.layer;break;default:for(bc(this),i=this.network.vertexes.i;i.next();)i.value.valid=!1;for(i.reset();i.next();)0===(t=i.value).lc.count&&function t(i,e){if(!e.valid){e.valid=!0;for(var n=e.ac;n.next();)t(i,n.value.toVertex);for(n=i.network.vertexes.i;n.next();)n.value.component=-1;for(var o=e.Oe.n,r=o.length,s=0;s<r;s++){var a=o[s],h=i.linkMinLength(a);a.fromVertex.layer-a.toVertex.layer>h&&yc(i,a.fromVertex,0,-1,!0,!1)}for(yc(i,e,1,-1,!0,!0);0!==e.component;){for(var h=0,o=1/0,l=0,u=null,f=i.network.vertexes.i;f.next();){var c=f.value;if(1===c.component){for(var d=0,p=!1,y=c.Oe.n,r=y.length,s=0;s<r;s++){var a=y[s],g=a.fromVertex,d=d+1;1!==g.component&&(h+=1,g=g.layer-c.layer,a=i.linkMinLength(a),o=Math.min(o,g-a))}for(a=c.Je.n,r=a.length,s=0;s<r;s++)y=a[s].toVertex,--d,1!==y.component?--h:p=!0;(null===u||d<l)&&!p&&(u=c,l=d)}}if(0<h){for(n.reset();n.next();)1===(r=n.value).component&&(r.layer+=o);e.component=0}else u.component=0}for(n=i.network.vertexes.i;n.next();)n.value.component=-1;for(yc(i,e,1,-1,!0,!1);0!==e.component;){for(r=1/(s=0),o=0,h=null,l=i.network.vertexes.i;l.next();)if(1===(u=l.value).component){for(f=0,c=!1,a=u.Oe.n,d=a.length,p=0;p<d;p++)y=a[p].fromVertex,f+=1,1!==y.component?s+=1:c=!0;for(a=u.Je.n,d=a.length,p=0;p<d;p++)y=a[p],g=y.toVertex,--f,1!==g.component&&(--s,g=u.layer-g.layer,y=i.linkMinLength(y),r=Math.min(r,g-y));(null===h||o<f)&&!c&&(h=u,o=f)}if(s<0){for(n.reset();n.next();)1===(s=n.value).component&&(s.layer-=r);e.component=0}else h.component=0}}}(this,t);for(t=1/0,i.reset();i.next();)t=Math.min(t,i.value.layer);for(this.ob=-1,i.reset();i.next();){var e=i.value;e.layer-=t,this.ob=Math.max(this.ob,e.layer)}}},ac.prototype.initializeIndices=function(){switch(this.Sn){default:case Rl:for(var t=this.network.vertexes.i;t.next();){var i=t.value,e=i.layer;i.index=this.Td[e],this.Td[e]++}break;case Il:for(t=this.network.vertexes.i,i=this.ob;0<=i;i--)for(t.reset();t.next();)(e=t.value).layer===i&&-1===e.index&&function t(i,e){var n=e.layer;e.index=i.Td[n];i.Td[n]++;for(var n=e.Je.dc(),o=!0;o;)for(var o=!1,r=0;r<n.length-1;r++){var s=n[r],a=n[r+1];s.portFromColOffset>a.portFromColOffset&&(o=!0,n[r]=a,n[r+1]=s)}for(r=0;r<n.length;r++)(o=n[r]).valid&&(-1===(o=o.toVertex).index&&t(i,o))}(this,e);break;case Gl:for(t=this.network.vertexes.i,i=0;i<=this.ob;i++)for(t.reset();t.next();)(e=t.value).layer===i&&-1===e.index&&function t(i,e){var n=e.layer;e.index=i.Td[n];i.Td[n]++;for(var n=e.Oe.dc(),o=!0,r=0;o;)for(o=!1,r=0;r<n.length-1;r++){var s=n[r],a=n[r+1];s.portToColOffset>a.portToColOffset&&(o=!0,n[r]=a,n[r+1]=s)}for(r=0;r<n.length;r++)(o=n[r]).valid&&(-1===(o=o.fromVertex).index&&t(i,o))}(this,e)}},ac.prototype.reduceCrossings=function(){for(var t=this.countCrossings(),i=lc(this),e=0,n=0,o=0,e=0;e<this.Xl;e++){for(n=0;n<=this.ob;n++)wc(this,n,1),kc(this,n,1);for((o=this.countCrossings())<t&&(t=o,i=lc(this)),n=this.ob;0<=n;n--)wc(this,n,-1),kc(this,n,-1);(o=this.countCrossings())<t&&(t=o,i=lc(this))}for(uc(this,i),e=0;e<this.Xl;e++){for(n=0;n<=this.ob;n++)wc(this,n,0),kc(this,n,0);for((o=this.countCrossings())<t&&(t=o,i=lc(this)),n=this.ob;0<=n;n--)wc(this,n,0),kc(this,n,0);(o=this.countCrossings())<t&&(t=o,i=lc(this))}uc(this,i);var r=!1,s=e=0,a=0,n=0;switch(this.nn){case Vl:break;case Kl:for(a=t+1;(n=this.countCrossings())<a;)for(a=n,e=this.ob;0<=e;e--)for(s=0;s<=e;s++){for(r=!0;r;)for(r=!1,n=e;s<=n;n--)r=kc(this,n,-1)||r;for(t<=(o=this.countCrossings())?uc(this,i):(t=o,i=lc(this)),r=!0;r;)for(r=!1,n=e;s<=n;n--)r=kc(this,n,1)||r;for(t<=(o=this.countCrossings())?uc(this,i):(t=o,i=lc(this)),r=!0;r;)for(r=!1,n=s;n<=e;n++)r=kc(this,n,1)||r;for(t<=o?uc(this,i):(t=o,i=lc(this)),r=!0;r;)for(r=!1,n=s;n<=e;n++)r=kc(this,n,-1)||r;for(t<=o?uc(this,i):(t=o,i=lc(this)),r=!0;r;)for(r=!1,n=e;s<=n;n--)r=kc(this,n,0)||r;for(t<=o?uc(this,i):(t=o,i=lc(this)),r=!0;r;)for(r=!1,n=s;n<=e;n++)r=kc(this,n,0)||r;t<=o?uc(this,i):(t=o,i=lc(this))}break;default:for(e=this.ob,s=0,a=t+1;(n=this.countCrossings())<a;){for(a=n,r=!0;r;)for(r=!1,n=e;s<=n;n--)r=kc(this,n,-1)||r;for(t<=(o=this.countCrossings())?uc(this,i):(t=o,i=lc(this)),r=!0;r;)for(r=!1,n=e;s<=n;n--)r=kc(this,n,1)||r;for(t<=(o=this.countCrossings())?uc(this,i):(t=o,i=lc(this)),r=!0;r;)for(r=!1,n=s;n<=e;n++)r=kc(this,n,1)||r;for(t<=o?uc(this,i):(t=o,i=lc(this)),r=!0;r;)for(r=!1,n=s;n<=e;n++)r=kc(this,n,-1)||r;for(t<=o?uc(this,i):(t=o,i=lc(this)),r=!0;r;)for(r=!1,n=e;s<=n;n--)r=kc(this,n,0)||r;for(t<=o?uc(this,i):(t=o,i=lc(this)),r=!0;r;)for(r=!1,n=s;n<=e;n++)r=kc(this,n,0)||r;t<=o?uc(this,i):(t=o,i=lc(this))}}uc(this,i)},ac.prototype.straightenAndPack=function(){var t=0,i=!1,e=0!=(this.Di&Ul),t=this.Di===Wl;if(1e3<this.network.edges.count&&!t&&(e=!1),e){for(i=[],t=0;t<=this.ob;t++)i[t]=0;for(var n=0,o=this.network.vertexes.i;o.next();){var t=(r=o.value).layer,n=r.column,r=this.nodeMinColumnSpace(r,!1);i[t]=Math.max(i[t],n+r)}for(o.reset();o.next();)t=(r=o.value).layer,n=r.column,r.column=(8*(this.Fb-i[t])>>1)+8*n;this.Fb*=8}if(0!=(this.Di&Jl))for(i=!0;i;){for(i=!1,t=this.Hf+1;t<=this.ob;t++)i=Mc(this,t,1)||i;for(t=this.Hf-1;0<=t;t--)i=Mc(this,t,-1)||i;i=Mc(this,this.Hf,0)||i}if(0!=(this.Di&Yl)){for(t=this.Hf+1;t<=this.ob;t++)Pc(this,t,1);for(t=this.Hf-1;0<=t;t--)Pc(this,t,-1);Pc(this,this.Hf,0)}if(e&&(Tc(this,-1),Tc(this,1)),0!=(this.Di&Jl))for(i=!0;i;){for(i=!1,i=Mc(this,this.Hf,0)||i,t=this.Hf+1;t<=this.ob;t++)i=Mc(this,t,0)||i;for(t=this.Hf-1;0<=t;t--)i=Mc(this,t,0)||i}},ac.prototype.commitLayout=function(){if(this.Gp)for(var t=Cc(this,!0),i=Cc(this,!1),e=this.network.edges.i;e.next();){var n=e.value.link;null!==n&&(n.xb=t,n.yb=i)}this.commitNodes(),this.dz(),this.xt&&this.commitLinks()},ac.prototype.commitNodes=function(){this.ig=[],this.Ff=[],this.Ef=[],this.Lb=[];for(var t=0;t<=this.ob;t++)this.ig[t]=0,this.Ff[t]=0,this.Ef[t]=0,this.Lb[t]=0;for(t=this.network.vertexes.i;t.next();){var i=(e=t.value).layer;this.ig[i]=Math.max(this.ig[i],this.nodeMinLayerSpace(e,!0)),this.Ff[i]=Math.max(this.Ff[i],this.nodeMinLayerSpace(e,!1))}for(var e=0,n=this.$l,i=0;i<=this.ob;i++){var o=n;this.ig[i]+this.Ff[i]<=0&&(o=0),0<i&&(e+=o/2),90===this.aa||0===this.aa?(e+=this.Ff[i],this.Ef[i]=e,e+=this.ig[i]):(e+=this.ig[i],this.Ef[i]=e,e+=this.Ff[i]),i<this.ob&&(e+=o/2),this.Lb[i]=e}for(n=e,e=this.Xd.copy(),null!==this.group&&(270===this.direction||90===this.direction?e.y-=10:e.x-=10,270===this.direction||90===this.direction?e.x-=this.qD/2:e.y-=this.qD/2),i=0;i<=this.ob;i++)270===this.aa?this.Ef[i]=e.y+this.Ef[i]:90===this.aa?(this.Ef[i]=e.y+n-this.Ef[i],this.Lb[i]=n-this.Lb[i]):180===this.aa?this.Ef[i]=e.x+this.Ef[i]:(this.Ef[i]=e.x+n-this.Ef[i],this.Lb[i]=n-this.Lb[i]);for(t.reset();t.next();){var n=(i=t.value).layer,o=0|i.column,r=0,s=0,s=270===this.aa||90===this.aa?(r=e.x+this.Hd*o,this.Ef[n]):(r=this.Ef[n],e.y+this.Hd*o);i.na=r,i.ua=s,i.commit()}},ac.prototype.dz=function(){for(var t=0,i=this.$l,e=0;e<=this.ob;e++)t+=this.ig[e],t+=this.Ff[e];for(var t=t+this.ob*i,i=[],e=this.Hd*this.Fb,n=this.KH;0<=n;n--)270===this.aa?0===n?i.push(new Ln(0,0,e,Math.abs(this.Lb[0]))):i.push(new Ln(0,this.Lb[n-1],e,Math.abs(this.Lb[n-1]-this.Lb[n]))):90===this.aa?0===n?i.push(new Ln(0,this.Lb[0],e,Math.abs(this.Lb[0]-t))):i.push(new Ln(0,this.Lb[n],e,Math.abs(this.Lb[n-1]-this.Lb[n]))):180===this.aa?0===n?i.push(new Ln(0,0,Math.abs(this.Lb[0]),e)):i.push(new Ln(this.Lb[n-1],0,Math.abs(this.Lb[n-1]-this.Lb[n]),e)):0===n?i.push(new Ln(this.Lb[0],0,Math.abs(this.Lb[0]-t),e)):i.push(new Ln(this.Lb[n],0,Math.abs(this.Lb[n-1]-this.Lb[n]),e));this.commitLayers(i,Ht)},ac.prototype.commitLayers=function(){},ac.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)null!==(i=t.value.link)&&(i.Bl(),i.Po(),i.Ni());for(t.reset();t.next();)null!==(i=t.value.link)&&i.hn();for(t.reset();t.next();){var i,e=t.value;if(null!==(i=e.link)){i.Bl();var n,o,r,s,a,h,l,u,f,c,d,p,y,g,v,m=i,b=m.T,x=m.Z,w=m.bd,k=m.Fd;if(e.valid)i.Ie===Xh&&4===i.oa&&(e.rev&&(n=b,b=x,x=n,o=w,w=k,k=o),e.fromVertex.column===e.toVertex.column?(r=i.getLinkPoint(b,w,i.computeSpot(!0),!0,!1,x,k),s=i.getLinkPoint(x,k,i.computeSpot(!1),!1,!1,b,w),r.G()||r.set(b.U.bl),s.G()||s.set(x.U.bl),i.Po(),i.Yk(r.x,r.y),i.Yk((2*r.x+s.x)/3,(2*r.y+s.y)/3),i.Yk((r.x+2*s.x)/3,(r.y+2*s.y)/3),i.Yk(s.x,s.y)):(h=a=!1,null!==w&&i.computeSpot(!0)===Te&&(a=!0),null!==k&&i.computeSpot(!1)===Te&&(h=!0),(a||h)&&(l=i.l(0).x,u=i.l(0).y,f=i.l(1).x,c=i.l(1).y,d=i.l(2).x,p=i.l(2).y,y=i.l(3).x,g=i.l(3).y,a&&(c=90===this.aa||270===this.aa?(f=l,(u+g)/2):(f=(l+y)/2,u),i.V(1,f,c),(v=i.getLinkPoint(b,w,i.computeSpot(!0),!0,!1,x,k)).G()||v.set(b.U.bl),i.V(0,v.x,v.y)),h&&(p=90===this.aa||270===this.aa?(d=y,(u+g)/2):(d=(l+y)/2,g),i.V(2,d,p),(v=i.getLinkPoint(x,k,i.computeSpot(!1),!1,!1,b,w)).G()||v.set(x.U.bl),i.V(3,v.x,v.y))))),i.Ni();else if(e.fromVertex.layer===e.toVertex.layer)i.Ni();else{var M,P,T=!1,S=!1,C=0,N=i.ht+1;i.jc?(S=!0,4<(C=i.oa)&&i.points.removeRange(2,C-3)):i.Ie===Xh?(T=!0,4<(C=i.oa)&&i.points.removeRange(2,C-3),N=2):(C=i.oa,M=i.computeSpot(!0)===Te,P=i.computeSpot(!1)===Te,2<C&&M&&P?i.points.removeRange(1,C-2):3<C&&M&&!P?i.points.removeRange(1,C-3):3<C&&!M&&P?i.points.removeRange(2,C-2):4<C&&!M&&!P&&i.points.removeRange(2,C-3));var j,D,L,A,F=e.fromVertex,z=e.toVertex;if(e.rev){for(var B,O,E=0;null!==z&&F!==z;){D=j=null;for(var q,I=z.lc.i;I.next();){var G=I.value;if(G.link===e.link&&(j=G.fromVertex,D=G.toVertex,null===j.qd))break}j!==F&&(H=i.l(N-1).x,K=i.l(N-1).y,U=j.na,J=j.ua,S?180===this.aa||0===this.aa?2===N?(i.w(N++,H,K),i.w(N++,H,J)):(null!==D?D.ua:K)!==J&&(Y=this.Lb[j.layer-1],i.w(N++,Y,K),i.w(N++,Y,J)):2===N?(i.w(N++,H,K),i.w(N++,U,K)):(null!==D?D.na:H)!==U&&(Y=this.Lb[j.layer-1],i.w(N++,H,Y),i.w(N++,U,Y)):2===N?(W=Math.max(10,this.ig[z.layer]),X=Math.max(10,this.Ff[z.layer]),T?180===this.aa?U<=z.M.x?(E=z.M.x,i.w(N++,E-W,J),i.w(N++,E,J),i.w(N++,E+X,J)):(i.w(N++,U-W,J),i.w(N++,U,J),i.w(N++,U+X,J)):90===this.aa?J>=z.M.bottom?(E=z.M.y+z.M.height,i.w(N++,U,E+X),i.w(N++,U,E),i.w(N++,U,E-W)):(i.w(N++,U,J+X),i.w(N++,U,J),i.w(N++,U,J-W)):270===this.aa?J<=z.M.y?(E=z.M.y,i.w(N++,U,E-W),i.w(N++,U,E),i.w(N++,U,E+X)):(i.w(N++,U,J-W),i.w(N++,U,J),i.w(N++,U,J+X)):0===this.aa&&(U>=z.M.right?(E=z.M.x+z.M.width,i.w(N++,E+X,J),i.w(N++,E,J),i.w(N++,E-W,J)):(i.w(N++,U+X,J),i.w(N++,U,J),i.w(N++,U-W,J))):(i.w(N++,H,K),q=0,180===this.aa||0===this.aa?((180===this.aa?U>=z.M.right:U<=z.M.x)&&(q=(0===this.aa?-W:X)/2),i.w(N++,H+q,J)):((270===this.aa?J>=z.M.bottom:J<=z.M.y)&&(q=(90===this.aa?-W:X)/2),i.w(N++,U,K+q)),i.w(N++,U,J))):(W=Math.max(10,this.ig[j.layer]),X=Math.max(10,this.Ff[j.layer]),180===this.aa?(T&&i.w(N++,U-W,J),i.w(N++,U,J),T&&i.w(N++,U+X,J)):90===this.aa?(T&&i.w(N++,U,J+X),i.w(N++,U,J),T&&i.w(N++,U,J-W)):270===this.aa?(T&&i.w(N++,U,J-W),i.w(N++,U,J),T&&i.w(N++,U,J+X)):(T&&i.w(N++,U+X,J),i.w(N++,U,J),T&&i.w(N++,U-W,J)))),z=j}null!==k&&i.computeSpot(!1)===Te&&!S||(H=i.l(N-1).x,K=i.l(N-1).y,U=i.l(N).x,J=i.l(N).y,S?(B=this.Ff[F.layer],O=0,180===this.aa||0===this.aa?((O=K)>=F.M.y&&O<=F.M.bottom&&(180===this.aa?U>=F.M.x:U<=F.M.right)&&(E=F.na+(180===this.aa?-B:B),O=O<F.M.y+F.M.height/2?F.M.y-this.Hd/2:F.M.bottom+this.Hd/2,i.w(N++,E,K),i.w(N++,E,O)),i.w(N++,U,O)):((O=H)>=F.M.x&&O<=F.M.right&&(270===this.aa?J>=F.M.y:J<=F.M.bottom)&&(E=F.ua+(270===this.aa?-B:B),O=O<F.M.x+F.M.width/2?F.M.x-this.Hd/2:F.M.right+this.Hd/2,i.w(N++,H,E),i.w(N++,O,E)),i.w(N++,O,J)),i.w(N++,U,J)):T?(W=Math.max(10,this.ig[F.layer]),X=Math.max(10,this.Ff[F.layer]),180===this.aa&&U>=F.M.x?(E=F.M.x+F.M.width,i.V(N-2,E,K),i.V(N-1,E+X,K)):90===this.aa&&J<=F.M.bottom?(E=F.M.y,i.V(N-2,H,E),i.V(N-1,H,E-W)):270===this.aa&&J>=F.M.y?(E=F.M.y+F.M.height,i.V(N-2,H,E),i.V(N-1,H,E+X)):0===this.aa&&U<=F.M.right&&(E=F.M.x,i.V(N-2,E,K),i.V(N-1,E-W,K))):(W=Math.max(10,this.ig[F.layer]),X=Math.max(10,this.Ff[F.layer]),q=0,180===this.aa||0===this.aa?((180===this.aa?U<=F.M.x:U>=F.M.right)&&(q=(0===this.aa?X:-W)/2),i.w(N++,U+q,K)):((270===this.aa?J<=F.M.y:J>=F.M.bottom)&&(q=(90===this.aa?X:-W)/2),i.w(N++,H,J+q)),i.w(N++,U,J)))}else{for(;null!==F&&F!==z;){D=j=null;for(var R=F.ac.i;R.next();){var V=R.value;if(V.link===e.link&&(j=V.toVertex,null!==(D=V.fromVertex).qd&&(D=null),null===j.qd))break}var H=0,K=0,U=0,J=0,Y=0,W=0,X=0;j!==z&&(H=i.l(N-1).x,K=i.l(N-1).y,U=j.na,J=j.ua,S?180===this.aa||0===this.aa?(null!==D?D.ua:K)!==J&&(Y=this.Lb[j.layer],2===N&&(Y=0===this.aa?Math.max(Y,H):Math.min(Y,H)),i.w(N++,Y,K),i.w(N++,Y,J)):(null!==D?D.na:H)!==U&&(Y=this.Lb[j.layer],2===N&&(Y=90===this.aa?Math.max(Y,K):Math.min(Y,K)),i.w(N++,H,Y),i.w(N++,U,Y)):(W=Math.max(10,this.ig[j.layer]),X=Math.max(10,this.Ff[j.layer]),180===this.aa?(i.w(N++,U+X,J),T&&i.w(N++,U,J),i.w(N++,U-W,J)):90===this.aa?(i.w(N++,U,J-W),T&&i.w(N++,U,J),i.w(N++,U,J+X)):270===this.aa?(i.w(N++,U,J+X),T&&i.w(N++,U,J),i.w(N++,U,J-W)):(i.w(N++,U-W,J),T&&i.w(N++,U,J),i.w(N++,U+X,J)))),F=j}S&&(H=i.l(N-1).x,K=i.l(N-1).y,U=i.l(N).x,J=i.l(N).y,180===this.aa||0===this.aa?K!==J&&(Y=0===this.aa?Math.min(Math.max((U+H)/2,this.Lb[z.layer]),U):Math.max(Math.min((U+H)/2,this.Lb[z.layer]),U),i.w(N++,Y,K),i.w(N++,Y,J)):H!==U&&(Y=90===this.aa?Math.min(Math.max((J+K)/2,this.Lb[z.layer]),J):Math.max(Math.min((J+K)/2,this.Lb[z.layer]),J),i.w(N++,H,Y),i.w(N++,U,Y)))}null!==m&&T&&(null!==w&&(i.computeSpot(!0)===Te&&(L=i.l(0),A=i.l(2),L.K(A)||i.V(1,(L.x+A.x)/2,(L.y+A.y)/2)),(v=i.getLinkPoint(b,w,Te,!0,!1,x,k)).G()||v.set(b.U.bl),i.V(0,v.x,v.y)),null!==k&&(i.computeSpot(!1)===Te&&(L=i.l(i.oa-1),A=i.l(i.oa-3),L.K(A)||i.V(i.oa-2,(L.x+A.x)/2,(L.y+A.y)/2)),(v=i.getLinkPoint(x,k,Te,!1,!1,b,w)).G()||v.set(x.U.bl),i.V(i.oa-1,v.x,v.y))),i.Ni(),e.commit()}}}for(var Z=new Dn(Ru),Q=this.network.edges.i;Q.next();){var $=Q.value.link;null!==$&&$.jc&&!Z.contains($)&&Z.add($)}if(0<Z.count)if(90===this.aa||270===this.aa){for(var _=new Dn(Lc),tt=Z.i;tt.next();){var it=tt.value;if(null!==it&&it.jc)for(var et=2;et<it.oa-3;et++){var nt,ot,rt,st,at,ht,lt=it.l(et),ut=it.l(et+1);Nc(lt.y,ut.y)&&!Nc(lt.x,ut.x)&&((nt=new Lc).layer=Math.floor(lt.y/2),ot=it.l(0),rt=it.l(it.oa-1),nt.first=ot.x*ot.x+ot.y,nt.Rd=rt.x*rt.x+rt.y,nt.Ge=Math.min(lt.x,ut.x),nt.Yd=Math.max(lt.x,ut.x),(nt.index=et)+2<(nt.link=it).oa&&(st=it.l(et-1),at=it.l(et+2),ht=0,st.y<lt.y?ht=at.y<lt.y?3:lt.x<ut.x?2:1:st.y>lt.y&&(ht=at.y>lt.y?0:ut.x<lt.x?2:1),nt.$h=ht),_.add(nt))}}if(1<_.count){_.sort(this.RE);for(var ft=0;ft<_.count;){for(var ct=_.n[ft].layer,dt=ft+1;dt<_.count&&_.n[dt].layer===ct;)dt++;if(1<dt-ft)for(var pt=ft;pt<dt;){for(var yt=_.n[pt].Yd,gt=ft+1;gt<dt&&_.n[gt].Ge<yt;)yt=Math.max(yt,_.n[gt].Yd),gt++;var vt=gt-pt;if(1<vt){_.Jp(this.ix,pt,pt+vt);for(var mt=1,bt=_.n[pt].Rd,et=pt;et<gt;et++){var xt=_.n[et];xt.Rd!==bt&&(mt++,bt=xt.Rd)}_.Jp(this.QE,pt,pt+vt);for(var wt=1,bt=_.n[pt].first,et=pt;et<gt;et++)(xt=_.n[et]).first!==bt&&(wt++,bt=xt.first);var kt=!0,Mt=wt;mt<wt?(kt=!1,Mt=mt,bt=_.n[pt].Rd,_.Jp(this.ix,pt,pt+vt)):bt=_.n[pt].first;for(var Pt=0,et=pt;et<gt;et++){xt=_.n[et],(kt?xt.first:xt.Rd)!==bt&&(Pt++,bt=kt?xt.first:xt.Rd),lt=(it=xt.link).l(xt.index),ut=it.l(xt.index+1);var Tt=this.pE*(Pt-(Mt-1)/2);it.Bl(),it.V(xt.index,lt.x,lt.y+Tt),it.V(xt.index+1,ut.x,ut.y+Tt),it.Ni()}}pt=gt}ft=dt}}}else{for(var St=new Dn(Lc),Ct=Z.i;Ct.next();){var Nt=Ct.value;if(null!==Nt&&Nt.jc)for(var jt=2;jt<Nt.oa-3;jt++){var Dt,Lt,At,Ft,zt,Bt,Ot=Nt.l(jt),Et=Nt.l(jt+1);Nc(Ot.x,Et.x)&&!Nc(Ot.y,Et.y)&&((Dt=new Lc).layer=Math.floor(Ot.x/2),Lt=Nt.l(0),At=Nt.l(Nt.oa-1),Dt.first=Lt.x+Lt.y*Lt.y,Dt.Rd=At.x+At.y*At.y,Dt.Ge=Math.min(Ot.y,Et.y),Dt.Yd=Math.max(Ot.y,Et.y),(Dt.index=jt)+2<(Dt.link=Nt).oa&&(Ft=Nt.l(jt-1),zt=Nt.l(jt+2),Bt=0,Ft.x<Ot.x?Bt=zt.x<Ot.x?3:Ot.y<Et.y?2:1:Ft.x>Ot.x&&(Bt=zt.x>Ot.x?0:Et.y<Ot.y?2:1),Dt.$h=Bt),St.add(Dt))}}if(1<St.count){St.sort(this.RE);for(var qt=0;qt<St.count;){for(var It=St.n[qt].layer,Gt=qt+1;Gt<St.count&&St.n[Gt].layer===It;)Gt++;if(1<Gt-qt)for(var Rt=qt;Rt<Gt;){for(var Vt=St.n[Rt].Yd,Ht=qt+1;Ht<Gt&&St.n[Ht].Ge<Vt;)Vt=Math.max(Vt,St.n[Ht].Yd),Ht++;var Kt=Ht-Rt;if(1<Kt){St.Jp(this.ix,Rt,Rt+Kt);for(var Ut=1,Jt=St.n[Rt].Rd,jt=Rt;jt<Ht;jt++){var Yt=St.n[jt];Yt.Rd!==Jt&&(Ut++,Jt=Yt.Rd)}St.Jp(this.QE,Rt,Rt+Kt);for(var Wt=1,Jt=St.n[Rt].first,jt=Rt;jt<Ht;jt++)(Yt=St.n[jt]).first!==Jt&&(Wt++,Jt=Yt.first);var Xt=!0,Zt=Wt;Ut<Wt?(Xt=!1,Zt=Ut,Jt=St.n[Rt].Rd,St.Jp(this.ix,Rt,Rt+Kt)):Jt=St.n[Rt].first;for(var Qt=0,jt=Rt;jt<Ht;jt++){Yt=St.n[jt],(Xt?Yt.first:Yt.Rd)!==Jt&&(Qt++,Jt=Xt?Yt.first:Yt.Rd),Ot=(Nt=Yt.link).l(Yt.index),Et=Nt.l(Yt.index+1);var $t=this.pE*(Qt-(Zt-1)/2);Nt.Bl(),Nt.V(Yt.index,Ot.x+$t,Ot.y),Nt.V(Yt.index+1,Et.x+$t,Et.y),Nt.Ni()}}Rt=Ht}qt=Gt}}}},ac.prototype.RE=function(t,i){return t instanceof Lc&&i instanceof Lc&&t!==i?t.layer<i.layer?-1:t.layer>i.layer?1:t.Ge<i.Ge?-1:t.Ge>i.Ge?1:t.Yd<i.Yd?-1:t.Yd>i.Yd?1:0:0},ac.prototype.QE=function(t,i){return t instanceof Lc&&i instanceof Lc&&t!==i?t.first<i.first?-1:t.first>i.first||t.$h<i.$h?1:t.$h>i.$h||t.Ge<i.Ge?-1:t.Ge>i.Ge?1:t.Yd<i.Yd?-1:t.Yd>i.Yd?1:0:0},ac.prototype.ix=function(t,i){return t instanceof Lc&&i instanceof Lc&&t!==i?t.Rd<i.Rd?-1:t.Rd>i.Rd||t.$h<i.$h?1:t.$h>i.$h||t.Ge<i.Ge?-1:t.Ge>i.Ge?1:t.Yd<i.Yd?-1:t.Yd>i.Yd?1:0:0},Nn.defineProperty(ac,{layerSpacing:"layerSpacing"},function(){return this.$l},function(t){this.$l!==t&&(Nn.j(t,"number",ac,"layerSpacing"),0<=t&&(this.$l=t,this.H()))}),Nn.defineProperty(ac,{qD:"columnSpacing"},function(){return this.Hd},function(t){this.Hd!==t&&(Nn.j(t,"number",ac,"columnSpacing"),0<t&&(this.Hd=t,this.H()))}),Nn.defineProperty(ac,{direction:"direction"},function(){return this.aa},function(t){this.aa!==t&&(Nn.j(t,"number",ac,"direction"),0===t||90===t||180===t||270===t?(this.aa=t,this.H()):Nn.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}),Nn.defineProperty(ac,{angle:"angle"},function(){return this.direction},function(t){this.direction=t}),Nn.defineProperty(ac,{AG:"cycleRemoveOption"},function(){return this.An},function(t){this.An!==t&&(Nn.pb(t,ac,ac,"cycleRemoveOption"),t===Bl||t===zl)&&(this.An=t,this.H())}),Nn.defineProperty(ac,{BH:"layeringOption"},function(){return this.bo},function(t){this.bo!==t&&(Nn.pb(t,ac,ac,"layeringOption"),t===Ol||t===El||t===ql)&&(this.bo=t,this.H())}),Nn.defineProperty(ac,{lH:"initializeOption"},function(){return this.Sn},function(t){this.Sn!==t&&(Nn.pb(t,ac,ac,"initializeOption"),t===Il||t===Gl||t===Rl)&&(this.Sn=t,this.H())}),Nn.defineProperty(ac,{ZJ:"iterations"},function(){return this.Xl},function(t){this.Xl!==t&&(Nn.Ue(t,Ac,"iterations"),0<=t&&(this.Xl=t,this.H()))}),Nn.defineProperty(ac,{eG:"aggressiveOption"},function(){return this.nn},function(t){this.nn!==t&&(Nn.pb(t,ac,ac,"aggressiveOption"),t===Vl||t===Hl||t===Kl)&&(this.nn=t,this.H())}),Nn.defineProperty(ac,{vK:"packOption"},function(){return this.Di},function(t){this.Di!==t&&(Nn.j(t,"number",ac,"packOption"),0<=t&&t<8&&(this.Di=t,this.H()))}),Nn.defineProperty(ac,{Gp:"setsPortSpots"},function(){return this.Kh},function(t){this.Kh!==t&&(Nn.j(t,"boolean",ac,"setsPortSpots"),this.Kh=t,this.H())}),Nn.defineProperty(ac,{pE:"linkSpacing"},function(){return this.ir},function(t){this.ir!==t&&(Nn.j(t,"number",ac,"linkSpacing"),0<=t&&(this.ir=t,this.H()))}),Nn.u(ac,{KH:"maxLayer"},function(){return this.ob}),Nn.u(ac,{eK:"maxIndex"},function(){return this.ov}),Nn.u(ac,{dK:"maxColumn"},function(){return this.Fb}),Nn.u(ac,{jK:"minIndexLayer"},function(){return this.sr}),Nn.u(ac,{fK:"maxIndexLayer"},function(){return this.Hf}),ac.CycleDepthFirst=zl=Nn.p(ac,"CycleDepthFirst",0),ac.CycleGreedy=Bl=Nn.p(ac,"CycleGreedy",1),ac.LayerOptimalLinkLength=Ol=Nn.p(ac,"LayerOptimalLinkLength",0),ac.LayerLongestPathSink=El=Nn.p(ac,"LayerLongestPathSink",1),ac.LayerLongestPathSource=ql=Nn.p(ac,"LayerLongestPathSource",2),ac.InitDepthFirstOut=Il=Nn.p(ac,"InitDepthFirstOut",0),ac.InitDepthFirstIn=Gl=Nn.p(ac,"InitDepthFirstIn",1),ac.InitNaive=Rl=Nn.p(ac,"InitNaive",2),ac.AggressiveNone=Vl=Nn.p(ac,"AggressiveNone",0),ac.AggressiveLess=Hl=Nn.p(ac,"AggressiveLess",1),ac.AggressiveMore=Kl=Nn.p(ac,"AggressiveMore",2),ac.PackNone=0,ac.PackExpand=Ul=1,ac.PackStraighten=Jl=2,ac.PackMedian=Yl=4,ac.PackAll=Wl=7,Nn.Nd(Lc,{layer:!0,first:!0,Rd:!0,Ge:!0,Yd:!0,index:!0,link:!0,$h:!0}),Nn.Ja(Ac,Nf),Nn.ea("LayeredDigraphNetwork",Ac),Ac.prototype.createVertex=function(){return new Fc},Ac.prototype.createEdge=function(){return new zc},Nn.Ja(Fc,Lf),Nn.ea("LayeredDigraphVertex",Fc),Nn.Ja(zc,Af),Nn.ea("LayeredDigraphEdge",zc),Nn.Ja(Bc,Sf),Nn.ea("TreeLayout",Bc),Bc.prototype.cloneProtected=function(t){Sf.prototype.cloneProtected.call(this,t),t.Kr=this.Kr,t.Fs=this.Fs,t.mv=this.mv,t.th=this.th,t.fd=this.fd,t.bg.assign(this.bg),t.ra.copyInheritedPropertiesFrom(this.ra),t.ta.copyInheritedPropertiesFrom(this.ta)},Bc.prototype.createNetwork=function(){return new sd},Bc.prototype.makeNetwork=function(t){function i(t){if(t instanceof Lu)return!t.uf&&"Comment"!==t.gc;if(t instanceof Ru){var i=t.T;return null===i||i.uf||"Comment"===i.gc?!1:null!==(t=t.Z)&&!t.uf&&"Comment"!==t.gc}return!1}var e=this.createNetwork();return e.Pb=this,t instanceof Oo?(e.Sj(t.Ag,!0,i),e.Sj(t.links,!0,i)):t instanceof kf?e.Sj(t.Ic,!1,i):e.Sj(t.i,!1,i),e},Bc.prototype.doLayout=function(t){if(null===t&&Nn.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.Nf!==mu&&(this.Xd=this.initialOrigin(this.Xd)),null===(n=this.g)&&t instanceof Oo&&(n=t),this.Df=this.path===Xl&&null!==n?n.Qd?Zl:Ql:this.path===Xl?Zl:this.path,0<this.network.vertexes.count){for(this.network.uw(),t=this.network.vertexes.i;t.next();)(n=t.value).initialized=!1,n.level=0,n.parent=null,n.children=[];if(0<this.ud.count){for(t=new Q(ad),n=this.ud.i;n.next();){var i=n.value;i instanceof Lu?null!==(i=this.network.Nm(i))&&t.add(i):i instanceof ad&&t.add(i)}this.ud=t}for(0===this.ud.count&&this.findRoots(),t=this.ud.copy().i;t.next();)(n=t.value).initialized||(n.initialized=!0,function t(i,e){if(null!==e){switch(i.Df){case Zl:if(0<e.ac.count){for(var n=new Dn(ad),o=e.GG;o.next();){var r=o.value;Oc(i,e,r)&&n.add(r)}0<n.count&&(e.children=n.dc())}break;case Ql:if(0<e.lc.count){for(n=new Dn(ad),o=e.DI;o.next();)r=o.value,Oc(i,e,r)&&n.add(r);0<n.count&&(e.children=n.dc())}break;default:Nn.k("Unhandled path value"+i.Df.toString())}for(n=e.children,o=n.length,r=0;r<o;r++){var s=n[r];s.initialized=!0,s.level=e.level+1,s.parent=e,i.ud.remove(s)}for(r=0;r<o;r++)s=n[r],t(i,s)}}(this,n));for(t=this.ud.i;t.next();)(n=t.value)instanceof ad&&function t(i,e){if(null!==e){i.initializeTreeVertexValues(e),e.alignment===au&&i.sortTreeVertexChildren(e);for(var n=0,o=e.Em,r=0,s=e.children,a=s.length,h=0;h<a;h++){var l=s[h];t(i,l),n+=l.descendantCount+1,o=Math.max(o,l.maxChildrenCount),r=Math.max(r,l.maxGenerationCount)}e.descendantCount=n,e.maxChildrenCount=o,e.maxGenerationCount=0<o?r+1:0}}(this,n);for(t=this.ud.i;t.next();)(n=t.value)instanceof ad&&function t(i,e){if(null!==e){i.assignTreeVertexValues(e);for(var n=e.children,o=n.length,r=0;r<o;r++)t(i,n[r])}}(this,n);for(t=this.ud.i;t.next();)(n=t.value)instanceof ad&&function t(i,e){if(null!==e){e.alignment!==au&&i.sortTreeVertexChildren(e);for(var n=e.children,o=n.length,r=0;r<o;r++)t(i,n[r])}}(this,n);if(this.Zy(),this.Iz===wu){for(i=[],t=this.network.vertexes.i;t.next();){var e=t.value;null===(n=e.parent)&&(n=e);var n=0===n.angle||180===n.angle;void 0===(r=i[e.level])&&(r=0),i[e.level]=Math.max(r,n?e.width:e.height)}for(e=0;e<i.length;e++)void 0===i[e]&&(i[e]=0);for(this.PA=i,t=this.network.vertexes.i;t.next();)null===(n=(e=t.value).parent)&&(n=e),0===n.angle||180===n.angle?(180===n.angle&&(e.it+=i[e.level]-e.width),e.width=i[e.level]):(270===n.angle&&(e.jt+=i[e.level]-e.height),e.height=i[e.level])}else if(this.Iz===xu)for(t=this.network.vertexes.i;t.next();){for(n=0===(i=t.value).angle||180===i.angle,r=-1,e=0;e<i.children.length;e++)var o=i.children[e],r=Math.max(r,n?o.width:o.height);if(0<=r)for(e=0;e<i.children.length;e++)o=i.children[e],n?(180===i.angle&&(o.it+=r-o.width),o.width=r):(270===i.angle&&(o.jt+=r-o.height),o.height=r)}for(t=this.ud.i;t.next();)(n=t.value)instanceof ad&&this.layoutTree(n);this.arrangeTrees(),this.updateParts()}this.network=null,this.ud=new Q(Object),this.wf=!0},Bc.prototype.findRoots=function(){for(var t=this.network.vertexes.i;t.next();){var i=t.value;switch(this.Df){case Zl:0===i.lc.count&&this.ud.add(i);break;case Ql:0===i.ac.count&&this.ud.add(i);break;default:Nn.k("Unhandled path value "+this.Df.toString())}}if(0===this.ud.count){for(var t=999999,i=null,e=this.network.vertexes.i;e.next();){var n=e.value;switch(this.Df){case Zl:n.lc.count<t&&(t=n.lc.count,i=n);break;case Ql:n.ac.count<t&&(t=n.ac.count,i=n);break;default:Nn.k("Unhandled path value "+this.Df.toString())}}null!==i&&this.ud.add(i)}},Bc.prototype.removeChild=function(t,i){if(null!==t&&null!==i){for(var e=t.children,n=0,o=0;o<e.length;o++)e[o]===i&&n++;if(0<n){for(var n=Array(e.length-n),r=0,o=0;o<e.length;o++)e[o]!==i&&(n[r++]=e[o]);t.children=n}}},Bc.prototype.initializeTreeVertexValues=function(t){var i=function(t,i){switch(t.Fs){default:case cu:return null!==i.parent?i.parent:t.ra;case yu:return null===i.parent?t.ra:null===i.parent.parent?t.ta:i.parent;case pu:return null!==i.parent?null!==i.parent.parent?i.parent.parent:t.ta:t.ra;case du:var e=!0;if(0===i.Em)e=!1;else for(var n=i.children,o=n.length,r=0;r<o;r++)if(0<n[r].Em){e=!1;break}return e&&null!==i.parent?t.ta:null!==i.parent?i.parent:t.ra}}(this,t);if(t.copyInheritedPropertiesFrom(i),null!==t.parent&&t.parent.alignment===au){for(var i=t.angle,e=t.parent.children,n=0;n<e.length&&t!==e[n];)n++;0==n%2?n!==e.length-1&&(i=90===i||180!==i&&270===i?180:270):i=90===i||180!==i&&270===i?0:90,t.angle=i}t.initialized=!0},Bc.prototype.assignTreeVertexValues=function(){},Bc.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case $l:break;case _l:t.children.reverse();break;case tu:t.children.sort(t.comparer);break;case iu:t.children.sort(t.comparer),t.children.reverse();break;default:Nn.k("Unhandled sorting value "+t.sorting.toString())}},Bc.prototype.Zy=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},Bc.prototype.addComments=function(t){var i=t.angle,e=t.parent,n=0,o=nu,o=!1;null!==e&&(n=e.angle,o=Ec(o=e.alignment));var i=90===i||270===i,n=90===n||270===n,e=0===t.Em,r=0,s=0,a=0,h=t.commentSpacing;if(null!==t.Jc)for(var l=t.Jc.LD();l.next();){var u=l.value;"Comment"===u.gc&&u.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(u),u.sf(),u=u.Ca,i&&!e||!o&&!n&&e||o&&n&&e?(r=Math.max(r,u.width),s+=u.height+Math.abs(a)):(r+=u.width+Math.abs(a),s=Math.max(s,u.height)),a=h)}null!==t.comments&&(i&&!e||!o&&!n&&e||o&&n&&e?(r+=Math.abs(t.commentMargin),s=Math.max(0,s-t.height)):(s+=Math.abs(t.commentMargin),r=Math.max(0,r-t.width)),o=Nn.gk(0,0,t.M.width+r,t.M.height+s),t.mb=o,Nn.Vb(o))},Bc.prototype.layoutComments=function(t){if(null!==t.comments){var i=t.Jc.Ca,e=t.parent,n=t.angle,o=0,r=nu,r=!1;null!==e&&(o=e.angle,r=Ec(r=e.alignment));for(var e=90===n||270===n,n=90===o||270===o,s=0===t.Em,a=Ic(t),h=0,l=t.comments,u=l.length,f=Nn.L(),c=0;c<u;c++){var d=l[c],p=d.Ca;if(e&&!s||!r&&!n&&s||r&&n&&s){if(135<o&&!r||n&&a)if(0<=t.commentMargin)for(f.m(t.M.x-t.commentMargin-p.width,t.M.y+h),d.move(f),d=d.vg();d.next();){var y=d.value;y.xb=M,y.yb=N}else for(f.m(t.M.x+2*t.O.x-t.commentMargin,t.M.y+h),d.move(f),d=d.vg();d.next();)(y=d.value).xb=N,y.yb=M;else if(0<=t.commentMargin)for(f.m(t.M.x+2*t.O.x+t.commentMargin,t.M.y+h),d.move(f),d=d.vg();d.next();)(y=d.value).xb=N,y.yb=M;else for(f.m(t.M.x+t.commentMargin-p.width,t.M.y+h),d.move(f),d=d.vg();d.next();)(y=d.value).xb=M,y.yb=N;h=0<=t.commentSpacing?h+(p.height+t.commentSpacing):h+(t.commentSpacing-p.height)}else{if(135<o&&!r||!n&&a)if(0<=t.commentMargin)for(f.m(t.M.x+h,t.M.y-t.commentMargin-p.height),d.move(f),d=d.vg();d.next();)(y=d.value).xb=k,y.yb=j;else for(f.m(t.M.x+h,t.M.y+2*t.O.y-t.commentMargin),d.move(f),d=d.vg();d.next();)(y=d.value).xb=j,y.yb=k;else if(0<=t.commentMargin)for(f.m(t.M.x+h,t.M.y+2*t.O.y+t.commentMargin),d.move(f),d=d.vg();d.next();)(y=d.value).xb=j,y.yb=k;else for(f.m(t.M.x+h,t.M.y+t.commentMargin-p.height),d.move(f),d=d.vg();d.next();)(y=d.value).xb=k,y.yb=j;h=0<=t.commentSpacing?h+(p.width+t.commentSpacing):h+(t.commentSpacing-p.width)}}if(Nn.v(f),i=h-t.commentSpacing-(e?i.height:i.width),this.Df===Zl)for(o=t.ac;o.next();)null===(t=o.value.link)||t.rl||(t.ll=0<i?i:NaN);else for(o=t.lc;o.next();)null===(t=o.value.link)||t.rl||(t.Fl=0<i?i:NaN)}},Bc.prototype.layoutTree=function(t){if(null!==t){for(var i=(n=t.children).length,e=0;e<i;e++)this.layoutTree(n[e]);switch(t.compaction){case uu:Gc(this,t);break;case fu:if(t.alignment===au)Gc(this,t);else if(0===t.Em){var e=t.parent,n=!1,i=0,o=nu;null!==e&&(i=e.angle,n=Ec(o=e.alignment)),e=Ic(t),t.ma.m(0,0),t.fb.m(t.width,t.height),null===t.parent||null===t.comments||(180!==i&&270!==i||n)&&!e?t.Ma.m(0,0):180===i&&!n||(90===i||270===i)&&e?t.Ma.m(t.width-2*t.O.x,0):t.Ma.m(0,t.height-2*t.O.y),t.At=null,t.St=null}else{for(var r=nd(t),n=90===r||270===r,s=0,a=t.children,h=a.length,l=0;l<h;l++)var u=a[l],s=Math.max(s,n?u.fb.width:u.fb.height);var f=t.alignment,e=f===ou,c=f===ru,d=Ec(f),p=Math.max(0,t.breadthLimit),i=od(t),y=t.nodeSpacing,g=rd(t),v=t.rowSpacing,m=0;(e||c||t.Bp||t.Cp&&1===t.maxGenerationCount)&&(m=Math.max(0,t.rowIndent));var e=t.width,o=t.height,b=0,x=0,w=0,k=null,M=null,P=0,T=0,S=0,C=0,N=0,j=0,D=0,L=0,u=0;if(d&&!qc(f)&&135<r&&a.reverse(),qc(f))if(1<h)for(l=0;l<h;l++)0==l%2&&l!==h-1?L=Math.max(L,n?a[l].fb.width:a[l].fb.height):0!=l%2&&(u=Math.max(u,n?a[l].fb.width:a[l].fb.height));else 1===h&&(L=n?a[0].fb.width:a[0].fb.height);if(d){switch(f){case su:L=(T=(r<135?Rc:Vc)(t,a,L,b,x)).x,b=T.width,x=T.height;break;case hu:for(l=0;l<h;l++){var A=(u=a[l]).fb,k=0===j?0:v;n?(u.ma.m(s-A.width,C+k),b=Math.max(b,A.width),x=Math.max(x,C+k+A.height),C+=k+A.height):(u.ma.m(S+k,s-A.height),b=Math.max(b,S+k+A.width),x=Math.max(x,A.height),S+=k+A.width),j++}break;case lu:for(l=0;l<h;l++)A=(u=a[l]).fb,k=0===j?0:v,n?(u.ma.m(y/2+t.O.x,C+k),b=Math.max(b,A.width),x=Math.max(x,C+k+A.height),C+=k+A.height):(u.ma.m(S+k,y/2+t.O.y),b=Math.max(b,S+k+A.width),x=Math.max(x,A.height),S+=k+A.width),j++}k=td(this,2),M=td(this,2),n?(k[0].m(0,0),k[1].m(0,x),M[0].m(b,0)):(k[0].m(0,0),k[1].m(b,0),M[0].m(0,x)),M[1].m(b,x)}else for(l=0;l<h;l++){var F,z,A=(u=a[l]).fb;n?(0<p&&0<j&&S+y+A.width>p&&(S<s&&Xc(t,f,s-S,0,D,l-1),N++,D=l,w=x,S=j=0,C=135<r?-x-v:x+v),Qc(this,u,0,C),(z=0)===j?(k=u.At,M=u.St,P=A.width,T=A.height,null!==k&&null!==M&&r===nd(u)||(k=td(this,2),M=td(this,2),k[0].m(0,0),k[1].m(0,T),M[0].m(P,0),M[1].m(P,T))):(z=(T=_c(this,t,u,k,M,P,T,F=Nn.jb())).x,k=F[0],M=F[1],P=T.width,T=T.height,Nn.sa(F),S<A.width&&z<0&&(Zc(t,-z,0,D,l-1),$c(k,-z,0),$c(M,-z,0),z=0)),u.ma.m(z,C),b=Math.max(b,P),x=Math.max(x,w+(0===N?0:v)+A.height),S=P):(0<p&&0<j&&C+y+A.height>p&&(C<s&&Xc(t,f,0,s-C,D,l-1),N++,D=l,w=b,C=j=0,S=135<r?-b-v:b+v),Qc(this,u,S,0),(z=0)===j?(k=u.At,M=u.St,P=A.width,T=A.height,null!==k&&null!==M&&r===nd(u)||(k=td(this,2),M=td(this,2),k[0].m(0,0),k[1].m(P,0),M[0].m(0,T),M[1].m(P,T))):(z=(T=_c(this,t,u,k,M,P,T,F=Nn.jb())).x,k=F[0],M=F[1],P=T.width,T=T.height,Nn.sa(F),C<A.height&&z<0&&(Zc(t,0,-z,D,l-1),$c(k,0,-z),$c(M,0,-z),z=0)),u.ma.m(S,z),x=Math.max(x,T),b=Math.max(b,w+(0===N?0:v)+A.width),C=T),j++}switch(0<N&&(n?(x+=Math.max(0,i),S<b&&Xc(t,f,b-S,0,D,h-1),0<m&&(c||Zc(t,m,0,0,h-1),b+=m)):(b+=Math.max(0,i),C<x&&Xc(t,f,0,x-C,D,h-1),0<m&&(c||Zc(t,0,m,0,h-1),x+=m))),c=s=0,f){case eu:n?s+=b/2-t.O.x-g/2:c+=x/2-t.O.y-g/2;break;case nu:0<N?n?s+=b/2-t.O.x-g/2:c+=x/2-t.O.y-g/2:n?s+=(l=a[0].ma.x+a[0].Ma.x)+((L=a[h-1].ma.x+a[h-1].Ma.x+2*a[h-1].O.x)-l)/2-t.O.x-g/2:c+=(l=a[0].ma.y+a[0].Ma.y)+((L=a[h-1].ma.y+a[h-1].Ma.y+2*a[h-1].O.y)-l)/2-t.O.y-g/2;break;case ou:n?(s-=g,b+=g):(c-=g,x+=g);break;case ru:n?(s+=b-t.width+g,b+=g):(c+=x-t.height+g,x+=g);break;case su:n?s=1<h?s+(L+y/2-t.O.x):s+(a[0].O.x-t.O.x+a[0].Ma.x):c=1<h?c+(L+y/2-t.O.y):c+(a[0].O.y-t.O.y+a[0].Ma.y);break;case hu:n?s+=b+y/2-t.O.x:c+=x+y/2-t.O.y;break;case lu:break;default:Nn.k("Unhandled alignment value "+f.toString())}for(l=0;l<h;l++)u=a[l],n?u.ma.m(u.ma.x+u.Ma.x-s,u.ma.y+(135<r?(d?-x:-u.fb.height)+u.Ma.y-i:o+i+u.Ma.y)):u.ma.m(u.ma.x+(135<r?(d?-b:-u.fb.width)+u.Ma.x-i:e+i+u.Ma.x),u.ma.y+u.Ma.y-c);if(h=a=0,d?n?(b=Jc(t,b,s),s<0&&(s=0),135<r&&(c+=x+i),x+=o+i,f===lu&&(a+=y/2+t.O.x),h+=o+i):(135<r&&(s+=b+i),b+=e+i,x=Yc(t,x,c),c<0&&(c=0),f===lu&&(h+=y/2+t.O.y),a+=e+i):n?(null===t.comments?b<e&&(a=(f=Wc(f,e-b,0)).x,h=f.y,b=e,s=0):b=Jc(t,b,s),s<0&&(a-=s,s=0),135<r&&(c+=x+i),x=Math.max(Math.max(x,o),x+o+i),h+=o+i):(135<r&&(s+=b+i),b=Math.max(Math.max(b,e),b+e+i),null===t.comments?x<o&&(a=(f=Wc(f,0,o-x)).x,h=f.y,x=o,c=0):x=Yc(t,x,c),c<0&&(h-=c,c=0),a+=e+i),0<N)r=td(this,4),f=td(this,4),n?(r[2].m(0,o+i),r[3].m(r[2].x,x),f[2].m(b,r[2].y),f[3].m(f[2].x,r[3].y)):(r[2].m(e+i,0),r[3].m(b,r[2].y),f[2].m(r[2].x,x),f[3].m(r[3].x,f[2].y));else{for(r=td(this,k.length+2),f=td(this,M.length+2),l=0;l<k.length;l++)d=k[l],r[l+2].m(d.x+a,d.y+h);for(l=0;l<M.length;l++)d=M[l],f[l+2].m(d.x+a,d.y+h)}n?(r[0].m(s,0),r[1].m(r[0].x,o),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),f[0].m(s+e,0),f[1].m(f[0].x,o),f[2].y<f[1].y&&(f[2].x<f[0].x?f[2].assign(f[1]):f[1].assign(f[2])),f[3].y<f[2].y&&(f[3].x<f[0].x?f[3].assign(f[2]):f[2].assign(f[3])),r[2].y-=i/2,f[2].y-=i/2):(r[0].m(0,c),r[1].m(e,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),f[0].m(0,c+o),f[1].m(e,f[0].y),f[2].x<f[1].x&&(f[2].y<f[0].y?f[2].assign(f[1]):f[1].assign(f[2])),f[3].x<f[2].x&&(f[3].y<f[0].y?f[3].assign(f[2]):f[2].assign(f[3])),r[2].x-=i/2,f[2].x-=i/2),id(this,k),id(this,M),t.At=r,t.St=f,t.Ma.m(s,c),t.fb.m(b,x)}break;default:Nn.k("Unhandled compaction value "+t.compaction.toString())}}},Bc.prototype.arrangeTrees=function(){if(this.fd===mu)for(var t=this.ud.i;t.next();){var i,e,n=t.value;n instanceof ad&&(null!==(i=n.Jc)&&(i=(e=i.position).x,e=e.y,isFinite(i)||(i=0),isFinite(e)||(e=0),ed(this,n,i,e)))}else{for(i=[],t=this.ud.i;t.next();)(n=t.value)instanceof ad&&i.push(n);switch(this.sorting){case $l:break;case _l:i.reverse();break;case tu:i.sort(this.comparer);break;case iu:i.sort(this.comparer),i.reverse();break;default:Nn.k("Unhandled sorting value "+this.sorting.toString())}for(t=(n=this.Xd).x,n=n.y,e=0;e<i.length;e++){var o=i[e];switch(ed(this,o,t+o.Ma.x,n+o.Ma.y),this.fd){case gu:n+=o.fb.height+this.bg.height;break;case vu:t+=o.fb.width+this.bg.width;break;default:Nn.k("Unhandled arrangement value "+this.fd.toString())}}}},Bc.prototype.commitLayout=function(){this.oA(),this.commitNodes(),this.dz(),this.xt&&this.commitLinks()},Bc.prototype.commitNodes=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Bc.prototype.dz=function(){if(this.Iz===wu){for(var t=this.PA,i=[],e=null,n=this.network.vertexes.i;n.next();){var o=n.value;null===e?e=o.mb.copy():e.ai(o.mb);var r=void 0===(r=i[o.level])?od(o):Math.max(r,od(o));i[o.level]=r}for(n=0;n<i.length;n++)void 0===i[n]&&(i[n]=0);o=90===this.angle||270===this.angle?(e.Qf(this.nodeSpacing/2,this.layerSpacing),new Se(-this.nodeSpacing/2,-this.layerSpacing/2)):(e.Qf(this.layerSpacing,this.nodeSpacing/2),new Se(-this.layerSpacing/2,-this.nodeSpacing/2));var r=[],e=90===this.angle||270===this.angle?e.width:e.height,s=0;if(180===this.angle||270===this.angle)for(n=0;n<t.length;n++)s+=t[n]+i[n];for(n=0;n<t.length;n++){var a=t[n]+i[n];270===this.angle?(s-=a,r.push(new Ln(0,s,e,a))):90===this.angle?(r.push(new Ln(0,s,e,a)),s+=a):180===this.angle?(s-=a,r.push(new Ln(s,0,a,e))):(r.push(new Ln(s,0,a,e)),s+=a)}this.commitLayers(r,o)}},Bc.prototype.commitLayers=function(){},Bc.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},Bc.prototype.oA=function(){for(var t=this.ud.i;t.next();){var i=t.value;i instanceof ad&&function t(i,e){if(null!==e){i.setPortSpots(e);for(var n=e.children,o=n.length,r=0;r<o;r++)t(i,n[r])}}(this,i)}},Bc.prototype.setPortSpots=function(t){var i=t.alignment;if(Ec(i)){var e,n=this.Df===Zl,o=nd(t);switch(o){case 0:e=N;break;case 90:e=j;break;case 180:e=M;break;default:e=k}var r=t.children,s=r.length;switch(i){case su:case au:for(i=0;i<s;i++){var a=r[i];if(null!==(a=(n?a.lc:a.ac).first())&&null!==(a=a.link)){var h=90===o||270===o?M:k;if(1===s||i===s-1&&1==s%2)switch(o){case 0:h=M;break;case 90:h=k;break;case 180:h=N;break;default:h=j}else 0==i%2&&(h=90===o||270===o?N:j);n?(t.setsPortSpot&&(a.xb=e),t.setsChildPortSpot&&(a.yb=h)):(t.setsPortSpot&&(a.xb=h),t.setsChildPortSpot&&(a.yb=e))}}break;case hu:for(h=90===o||270===o?N:j,o=n?t.ac:t.lc;o.next();)null!==(a=o.value.link)&&(n?(t.setsPortSpot&&(a.xb=e),t.setsChildPortSpot&&(a.yb=h)):(t.setsPortSpot&&(a.xb=h),t.setsChildPortSpot&&(a.yb=e)));break;case lu:for(h=90===o||270===o?M:k,o=n?t.ac:t.lc;o.next();)null!==(a=o.value.link)&&(n?(t.setsPortSpot&&(a.xb=e),t.setsChildPortSpot&&(a.yb=h)):(t.setsPortSpot&&(a.xb=h),t.setsChildPortSpot&&(a.yb=e)))}}else if(n=nd(t),this.Df===Zl){for(e=t.ac;e.next();)if(null!==(o=e.value.link)){if(t.setsPortSpot)if(t.portSpot.Uc())switch(n){case 0:o.xb=N;break;case 90:o.xb=j;break;case 180:o.xb=M;break;default:o.xb=k}else o.xb=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Uc())switch(n){case 0:o.yb=M;break;case 90:o.yb=k;break;case 180:o.yb=N;break;default:o.yb=j}else o.yb=t.childPortSpot}}else for(e=t.lc;e.next();)if(null!==(o=e.value.link)){if(t.setsPortSpot)if(t.portSpot.Uc())switch(n){case 0:o.yb=N;break;case 90:o.yb=j;break;case 180:o.yb=M;break;default:o.yb=k}else o.yb=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Uc())switch(n){case 0:o.xb=M;break;case 90:o.xb=k;break;case 180:o.xb=N;break;default:o.xb=j}else o.xb=t.childPortSpot}},Nn.defineProperty(Bc,{CK:"roots"},function(){return this.ud},function(t){this.ud!==t&&(Nn.A(t,Q,Bc,"roots"),this.ud=t,this.H())}),Nn.defineProperty(Bc,{path:"path"},function(){return this.Kr},function(t){this.Kr!==t&&(Nn.pb(t,Bc,Bc,"path"),this.Kr=t,this.H())}),Nn.defineProperty(Bc,{QI:"treeStyle"},function(){return this.Fs},function(t){this.fd!==t&&(Nn.pb(t,Bc,Bc,"treeStyle"),t===cu||t===pu||t===du||t===yu)&&(this.Fs=t,this.H())}),Nn.defineProperty(Bc,{Iz:"layerStyle"},function(){return this.mv},function(t){this.fd!==t&&(Nn.pb(t,Bc,Bc,"layerStyle"),t===bu||t===xu||t===wu)&&(this.mv=t,this.H())}),Nn.defineProperty(Bc,{comments:"comments"},function(){return this.th},function(t){this.th!==t&&(Nn.j(t,"boolean",Bc,"comments"),this.th=t,this.H())}),Nn.defineProperty(Bc,{Nf:"arrangement"},function(){return this.fd},function(t){this.fd!==t&&(Nn.pb(t,Bc,Bc,"arrangement"),t===gu||t===vu||t===mu)&&(this.fd=t,this.H())}),Nn.defineProperty(Bc,{jD:"arrangementSpacing"},function(){return this.bg},function(t){Nn.A(t,st,Bc,"arrangementSpacing"),this.bg.K(t)||(this.bg.assign(t),this.H())}),Nn.defineProperty(Bc,{BK:"rootDefaults"},function(){return this.ra},function(t){this.ra!==t&&(Nn.A(t,ad,Bc,"rootDefaults"),this.ra=t,this.H())}),Nn.defineProperty(Bc,{gJ:"alternateDefaults"},function(){return this.ta},function(t){this.ta!==t&&(Nn.A(t,ad,Bc,"alternateDefaults"),this.ta=t,this.H())}),Nn.defineProperty(Bc,{sorting:"sorting"},function(){return this.ra.sorting},function(t){this.ra.sorting!==t&&(Nn.pb(t,Bc,Bc,"sorting"),t===$l||t===_l||t===tu||iu)&&(this.ra.sorting=t,this.H())}),Nn.defineProperty(Bc,{comparer:"comparer"},function(){return this.ra.comparer},function(t){this.ra.comparer!==t&&(Nn.j(t,"function",Bc,"comparer"),this.ra.comparer=t,this.H())}),Nn.defineProperty(Bc,{angle:"angle"},function(){return this.ra.angle},function(t){this.ra.angle!==t&&(Nn.j(t,"number",Bc,"angle"),0===t||90===t||180===t||270===t?(this.ra.angle=t,this.H()):Nn.k("TreeLayout.angle must be 0, 90, 180, or 270"))}),Nn.defineProperty(Bc,{alignment:"alignment"},function(){return this.ra.alignment},function(t){this.ra.alignment!==t&&(Nn.pb(t,Bc,Bc,"alignment"),this.ra.alignment=t,this.H())}),Nn.defineProperty(Bc,{nodeIndent:"nodeIndent"},function(){return this.ra.nodeIndent},function(t){this.ra.nodeIndent!==t&&(Nn.j(t,"number",Bc,"nodeIndent"),0<=t&&(this.ra.nodeIndent=t,this.H()))}),Nn.defineProperty(Bc,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.ra.nodeIndentPastParent},function(t){this.ra.nodeIndentPastParent!==t&&(Nn.j(t,"number",Bc,"nodeIndentPastParent"),0<=t&&t<=1&&(this.ra.nodeIndentPastParent=t,this.H()))}),Nn.defineProperty(Bc,{nodeSpacing:"nodeSpacing"},function(){return this.ra.nodeSpacing},function(t){this.ra.nodeSpacing!==t&&(Nn.j(t,"number",Bc,"nodeSpacing"),this.ra.nodeSpacing=t,this.H())}),Nn.defineProperty(Bc,{layerSpacing:"layerSpacing"},function(){return this.ra.layerSpacing},function(t){this.ra.layerSpacing!==t&&(Nn.j(t,"number",Bc,"layerSpacing"),this.ra.layerSpacing=t,this.H())}),Nn.defineProperty(Bc,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.ra.layerSpacingParentOverlap},function(t){this.ra.layerSpacingParentOverlap!==t&&(Nn.j(t,"number",Bc,"layerSpacingParentOverlap"),0<=t&&t<=1&&(this.ra.layerSpacingParentOverlap=t,this.H()))}),Nn.defineProperty(Bc,{compaction:"compaction"},function(){return this.ra.compaction},function(t){this.ra.compaction!==t&&(Nn.pb(t,Bc,Bc,"compaction"),t===uu||t===fu)&&(this.ra.compaction=t,this.H())}),Nn.defineProperty(Bc,{breadthLimit:"breadthLimit"},function(){return this.ra.breadthLimit},function(t){this.ra.breadthLimit!==t&&(Nn.j(t,"number",Bc,"breadthLimit"),0<=t&&(this.ra.breadthLimit=t,this.H()))}),Nn.defineProperty(Bc,{rowSpacing:"rowSpacing"},function(){return this.ra.rowSpacing},function(t){this.ra.rowSpacing!==t&&(Nn.j(t,"number",Bc,"rowSpacing"),this.ra.rowSpacing=t,this.H())}),Nn.defineProperty(Bc,{rowIndent:"rowIndent"},function(){return this.ra.rowIndent},function(t){this.ra.rowIndent!==t&&(Nn.j(t,"number",Bc,"rowIndent"),0<=t&&(this.ra.rowIndent=t,this.H()))}),Nn.defineProperty(Bc,{commentSpacing:"commentSpacing"},function(){return this.ra.commentSpacing},function(t){this.ra.commentSpacing!==t&&(Nn.j(t,"number",Bc,"commentSpacing"),this.ra.commentSpacing=t,this.H())}),Nn.defineProperty(Bc,{commentMargin:"commentMargin"},function(){return this.ra.commentMargin},function(t){this.ra.commentMargin!==t&&(Nn.j(t,"number",Bc,"commentMargin"),this.ra.commentMargin=t,this.H())}),Nn.defineProperty(Bc,{setsPortSpot:"setsPortSpot"},function(){return this.ra.setsPortSpot},function(t){this.ra.setsPortSpot!==t&&(Nn.j(t,"boolean",Bc,"setsPortSpot"),this.ra.setsPortSpot=t,this.H())}),Nn.defineProperty(Bc,{portSpot:"portSpot"},function(){return this.ra.portSpot},function(t){Nn.A(t,ct,Bc,"portSpot"),this.ra.portSpot.K(t)||(this.ra.portSpot=t,this.H())}),Nn.defineProperty(Bc,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.ra.setsChildPortSpot},function(t){this.ra.setsChildPortSpot!==t&&(Nn.j(t,"boolean",Bc,"setsChildPortSpot"),this.ra.setsChildPortSpot=t,this.H())}),Nn.defineProperty(Bc,{childPortSpot:"childPortSpot"},function(){return this.ra.childPortSpot},function(t){Nn.A(t,ct,Bc,"childPortSpot"),this.ra.childPortSpot.K(t)||(this.ra.childPortSpot=t,this.H())}),Nn.defineProperty(Bc,{rJ:"alternateSorting"},function(){return this.ta.sorting},function(t){this.ta.sorting!==t&&(Nn.pb(t,Bc,Bc,"alternateSorting"),t===$l||t===_l||t===tu||iu)&&(this.ta.sorting=t,this.H())}),Nn.defineProperty(Bc,{fJ:"alternateComparer"},function(){return this.ta.comparer},function(t){this.ta.comparer!==t&&(Nn.j(t,"function",Bc,"alternateComparer"),this.ta.comparer=t,this.H())}),Nn.defineProperty(Bc,{$I:"alternateAngle"},function(){return this.ta.angle},function(t){this.ta.angle!==t&&(Nn.j(t,"number",Bc,"alternateAngle"),0===t||90===t||180===t||270===t)&&(this.ta.angle=t,this.H())}),Nn.defineProperty(Bc,{ZI:"alternateAlignment"},function(){return this.ta.alignment},function(t){this.ta.alignment!==t&&(Nn.pb(t,Bc,Bc,"alternateAlignment"),this.ta.alignment=t,this.H())}),Nn.defineProperty(Bc,{jJ:"alternateNodeIndent"},function(){return this.ta.nodeIndent},function(t){this.ta.nodeIndent!==t&&(Nn.j(t,"number",Bc,"alternateNodeIndent"),0<=t&&(this.ta.nodeIndent=t,this.H()))}),Nn.defineProperty(Bc,{kJ:"alternateNodeIndentPastParent"},function(){return this.ta.nodeIndentPastParent},function(t){this.ta.nodeIndentPastParent!==t&&(Nn.j(t,"number",Bc,"alternateNodeIndentPastParent"),0<=t&&t<=1&&(this.ta.nodeIndentPastParent=t,this.H()))}),Nn.defineProperty(Bc,{lJ:"alternateNodeSpacing"},function(){return this.ta.nodeSpacing},function(t){this.ta.nodeSpacing!==t&&(Nn.j(t,"number",Bc,"alternateNodeSpacing"),this.ta.nodeSpacing=t,this.H())}),Nn.defineProperty(Bc,{hJ:"alternateLayerSpacing"},function(){return this.ta.layerSpacing},function(t){this.ta.layerSpacing!==t&&(Nn.j(t,"number",Bc,"alternateLayerSpacing"),this.ta.layerSpacing=t,this.H())}),Nn.defineProperty(Bc,{iJ:"alternateLayerSpacingParentOverlap"},function(){return this.ta.layerSpacingParentOverlap},function(t){this.ta.layerSpacingParentOverlap!==t&&(Nn.j(t,"number",Bc,"alternateLayerSpacingParentOverlap"),0<=t&&t<=1&&(this.ta.layerSpacingParentOverlap=t,this.H()))}),Nn.defineProperty(Bc,{eJ:"alternateCompaction"},function(){return this.ta.compaction},function(t){this.ta.compaction!==t&&(Nn.pb(t,Bc,Bc,"alternateCompaction"),t===uu||t===fu)&&(this.ta.compaction=t,this.H())}),Nn.defineProperty(Bc,{aJ:"alternateBreadthLimit"},function(){return this.ta.breadthLimit},function(t){this.ta.breadthLimit!==t&&(Nn.j(t,"number",Bc,"alternateBreadthLimit"),0<=t&&(this.ta.breadthLimit=t,this.H()))}),Nn.defineProperty(Bc,{oJ:"alternateRowSpacing"},function(){return this.ta.rowSpacing},function(t){this.ta.rowSpacing!==t&&(Nn.j(t,"number",Bc,"alternateRowSpacing"),this.ta.rowSpacing=t,this.H())}),Nn.defineProperty(Bc,{nJ:"alternateRowIndent"},function(){return this.ta.rowIndent},function(t){this.ta.rowIndent!==t&&(Nn.j(t,"number",Bc,"alternateRowIndent"),0<=t&&(this.ta.rowIndent=t,this.H()))}),Nn.defineProperty(Bc,{dJ:"alternateCommentSpacing"},function(){return this.ta.commentSpacing},function(t){this.ta.commentSpacing!==t&&(Nn.j(t,"number",Bc,"alternateCommentSpacing"),this.ta.commentSpacing=t,this.H())}),Nn.defineProperty(Bc,{cJ:"alternateCommentMargin"},function(){return this.ta.commentMargin},function(t){this.ta.commentMargin!==t&&(Nn.j(t,"number",Bc,"alternateCommentMargin"),this.ta.commentMargin=t,this.H())}),Nn.defineProperty(Bc,{qJ:"alternateSetsPortSpot"},function(){return this.ta.setsPortSpot},function(t){this.ta.setsPortSpot!==t&&(Nn.j(t,"boolean",Bc,"alternateSetsPortSpot"),this.ta.setsPortSpot=t,this.H())}),Nn.defineProperty(Bc,{mJ:"alternatePortSpot"},function(){return this.ta.portSpot},function(t){Nn.A(t,ct,Bc,"alternatePortSpot"),this.ta.portSpot.K(t)||(this.ta.portSpot=t,this.H())}),Nn.defineProperty(Bc,{pJ:"alternateSetsChildPortSpot"},function(){return this.ta.setsChildPortSpot},function(t){this.ta.setsChildPortSpot!==t&&(Nn.j(t,"boolean",Bc,"alternateSetsChildPortSpot"),this.ta.setsChildPortSpot=t,this.H())}),Nn.defineProperty(Bc,{bJ:"alternateChildPortSpot"},function(){return this.ta.childPortSpot},function(t){Nn.A(t,ct,Bc,"alternateChildPortSpot"),this.ta.childPortSpot.K(t)||(this.ta.childPortSpot=t,this.H())}),Bc.PathDefault=Xl=Nn.p(Bc,"PathDefault",-1),Bc.PathDestination=Zl=Nn.p(Bc,"PathDestination",0),Bc.PathSource=Ql=Nn.p(Bc,"PathSource",1),Bc.SortingForwards=$l=Nn.p(Bc,"SortingForwards",10),Bc.SortingReverse=_l=Nn.p(Bc,"SortingReverse",11),Bc.SortingAscending=tu=Nn.p(Bc,"SortingAscending",12),Bc.SortingDescending=iu=Nn.p(Bc,"SortingDescending",13),Bc.AlignmentCenterSubtrees=eu=Nn.p(Bc,"AlignmentCenterSubtrees",20),Bc.AlignmentCenterChildren=nu=Nn.p(Bc,"AlignmentCenterChildren",21),Bc.AlignmentStart=ou=Nn.p(Bc,"AlignmentStart",22),Bc.AlignmentEnd=ru=Nn.p(Bc,"AlignmentEnd",23),Bc.AlignmentBus=su=Nn.p(Bc,"AlignmentBus",24),Bc.AlignmentBusBranching=au=Nn.p(Bc,"AlignmentBusBranching",25),Bc.AlignmentTopLeftBus=hu=Nn.p(Bc,"AlignmentTopLeftBus",26),Bc.AlignmentBottomRightBus=lu=Nn.p(Bc,"AlignmentBottomRightBus",27),Bc.CompactionNone=uu=Nn.p(Bc,"CompactionNone",30),Bc.CompactionBlock=fu=Nn.p(Bc,"CompactionBlock",31),Bc.StyleLayered=cu=Nn.p(Bc,"StyleLayered",40),Bc.StyleLastParents=du=Nn.p(Bc,"StyleLastParents",41),Bc.StyleAlternating=pu=Nn.p(Bc,"StyleAlternating",42),Bc.StyleRootOnly=yu=Nn.p(Bc,"StyleRootOnly",43),Bc.ArrangementVertical=gu=Nn.p(Bc,"ArrangementVertical",50),Bc.ArrangementHorizontal=vu=Nn.p(Bc,"ArrangementHorizontal",51),Bc.ArrangementFixedRoots=mu=Nn.p(Bc,"ArrangementFixedRoots",52),Bc.LayerIndividual=bu=Nn.p(Bc,"LayerIndividual",60),Bc.LayerSiblings=xu=Nn.p(Bc,"LayerSiblings",61),Bc.LayerUniform=wu=Nn.p(Bc,"LayerUniform",62),Nn.Ja(sd,Nf),Nn.ea("TreeNetwork",sd),sd.prototype.createVertex=function(){return new ad},sd.prototype.createEdge=function(){return new hd},Nn.Ja(ad,Lf),Nn.ea("TreeVertex",ad),ad.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.sorting=t.sorting,this.comparer=t.comparer,this.angle=t.angle,this.alignment=t.alignment,this.nodeIndent=t.nodeIndent,this.nodeIndentPastParent=t.nodeIndentPastParent,this.nodeSpacing=t.nodeSpacing,this.layerSpacing=t.layerSpacing,this.layerSpacingParentOverlap=t.layerSpacingParentOverlap,this.compaction=t.compaction,this.breadthLimit=t.breadthLimit,this.rowSpacing=t.rowSpacing,this.rowIndent=t.rowIndent,this.commentSpacing=t.commentSpacing,this.commentMargin=t.commentMargin,this.setsPortSpot=t.setsPortSpot,this.portSpot=t.portSpot,this.setsChildPortSpot=t.setsChildPortSpot,this.childPortSpot=t.childPortSpot)},Nn.u(ad,{Em:"childrenCount"},function(){return this.children.length}),Nn.defineProperty(ad,{AK:"relativePosition"},function(){return this.ma},function(t){this.ma.set(t)}),Nn.defineProperty(ad,{MK:"subtreeSize"},function(){return this.fb},function(t){this.fb.set(t)}),Nn.defineProperty(ad,{LK:"subtreeOffset"},function(){return this.Ma},function(t){this.Ma.set(t)}),Nn.Ja(hd,Af),Nn.ea("TreeEdge",hd),hd.prototype.commit=function(){var t=this.link;if(null!==t&&!t.rl){var i=this.network.Pb,e=null,n=null;switch(i.Df){case Zl:e=this.fromVertex,n=this.toVertex;break;case Ql:e=this.toVertex,n=this.fromVertex;break;default:Nn.k("Unhandled path value "+i.Df.toString())}if(null!==e&&null!==n)if(0!==(i=this.Rr).x||0!==i.y||e.rI){var n=e.mb,o=nd(e),r=od(e),s=e.rowSpacing;t.hn();var a,h,l=t.Ie===Xh,u=t.jc,f=0;if(t.Bl(),u||l){for(f=2;4<t.oa;)t.FE(2);a=t.l(1),h=t.l(2)}else{for(f=1;3<t.oa;)t.FE(1);a=t.l(0),h=t.l(t.oa-1)}var c=t.l(t.oa-1),d=0;0===o?(e.alignment===ru?(d=n.bottom+i.y,0===i.y&&a.y>c.y+e.rowIndent&&(d=Math.min(d,Math.max(a.y,d-rd(e))))):e.alignment===ou?(d=n.top+i.y,0===i.y&&a.y<c.y-e.rowIndent&&(d=Math.max(d,Math.min(a.y,d+rd(e))))):d=e.Bp||e.Cp&&1===e.maxGenerationCount?n.top-e.Ma.y+i.y:n.y+n.height/2+i.y,l?(t.w(f,a.x,d),f++,t.w(f,n.right+r,d),f++,t.w(f,n.right+r+(i.x-s)/3,d),f++,t.w(f,n.right+r+2*(i.x-s)/3,d),f++,t.w(f,n.right+r+(i.x-s),d),f++,t.w(f,h.x,d)):(u&&(t.w(f,n.right+r/2,a.y),f++),t.w(f,n.right+r/2,d),f++,t.w(f,n.right+r+i.x-(u?s/2:s),d),f++,u&&t.w(f,t.l(f-1).x,h.y))):90===o?(e.alignment===ru?(d=n.right+i.x,0===i.x&&a.x>c.x+e.rowIndent&&(d=Math.min(d,Math.max(a.x,d-rd(e))))):e.alignment===ou?(d=n.left+i.x,0===i.x&&a.x<c.x-e.rowIndent&&(d=Math.max(d,Math.min(a.x,d+rd(e))))):d=e.Bp||e.Cp&&1===e.maxGenerationCount?n.left-e.Ma.x+i.x:n.x+n.width/2+i.x,l?(t.w(f,d,a.y),f++,t.w(f,d,n.bottom+r),f++,t.w(f,d,n.bottom+r+(i.y-s)/3),f++,t.w(f,d,n.bottom+r+2*(i.y-s)/3),f++,t.w(f,d,n.bottom+r+(i.y-s)),f++,t.w(f,d,h.y)):(u&&(t.w(f,a.x,n.bottom+r/2),f++),t.w(f,d,n.bottom+r/2),f++,t.w(f,d,n.bottom+r+i.y-(u?s/2:s)),f++,u&&t.w(f,h.x,t.l(f-1).y))):180===o?(e.alignment===ru?(d=n.bottom+i.y,0===i.y&&a.y>c.y+e.rowIndent&&(d=Math.min(d,Math.max(a.y,d-rd(e))))):e.alignment===ou?(d=n.top+i.y,0===i.y&&a.y<c.y-e.rowIndent&&(d=Math.max(d,Math.min(a.y,d+rd(e))))):d=e.Bp||e.Cp&&1===e.maxGenerationCount?n.top-e.Ma.y+i.y:n.y+n.height/2+i.y,l?(t.w(f,a.x,d),f++,t.w(f,n.left-r,d),f++,t.w(f,n.left-r+(i.x+s)/3,d),f++,t.w(f,n.left-r+2*(i.x+s)/3,d),f++,t.w(f,n.left-r+(i.x+s),d),f++,t.w(f,h.x,d)):(u&&(t.w(f,n.left-r/2,a.y),f++),t.w(f,n.left-r/2,d),f++,t.w(f,n.left-r+i.x+(u?s/2:s),d),f++,u&&t.w(f,t.l(f-1).x,h.y))):270===o?(e.alignment===ru?(d=n.right+i.x,0===i.x&&a.x>c.x+e.rowIndent&&(d=Math.min(d,Math.max(a.x,d-rd(e))))):e.alignment===ou?(d=n.left+i.x,0===i.x&&a.x<c.x-e.rowIndent&&(d=Math.max(d,Math.min(a.x,d+rd(e))))):d=e.Bp||e.Cp&&1===e.maxGenerationCount?n.left-e.Ma.x+i.x:n.x+n.width/2+i.x,l?(t.w(f,d,a.y),f++,t.w(f,d,n.top-r),f++,t.w(f,d,n.top-r+(i.y+s)/3),f++,t.w(f,d,n.top-r+2*(i.y+s)/3),f++,t.w(f,d,n.top-r+(i.y+s)),f++,t.w(f,d,h.y)):(u&&(t.w(f,a.x,n.top-r/2),f++),t.w(f,d,n.top-r/2),f++,t.w(f,d,n.top-r+i.y+(u?s/2:s)),f++,u&&t.w(f,h.x,t.l(f-1).y))):Nn.k("Invalid angle "+o),t.Ni()}else o=e,r=n,t=this.link,(e=nd(o))!==nd(r)&&(i=od(o),n=o.mb,o=r.mb,0===e&&o.left-n.right<i+1||90===e&&o.top-n.bottom<i+1||180===e&&n.left-o.right<i+1||270===e&&n.top-o.bottom<i+1||(t.hn(),o=t.Ie===Xh,r=t.jc,s=Ec(this.fromVertex.alignment),t.Bl(),0===e?(e=n.right+i/2,o?4===t.oa&&(i=t.l(3).y,t.V(1,e-20,t.l(1).y),t.w(2,e-20,i),t.w(3,e,i),t.w(4,e+20,i),t.V(5,t.l(5).x,i)):r?s?t.V(3,t.l(2).x,t.l(4).y):6===t.oa&&(t.V(2,e,t.l(2).y),t.V(3,e,t.l(3).y)):4===t.oa?t.w(2,e,t.l(2).y):3===t.oa?t.V(1,e,t.l(2).y):2===t.oa&&t.w(1,e,t.l(1).y)):90===e?(i=n.bottom+i/2,o?4===t.oa&&(e=t.l(3).x,t.V(1,t.l(1).x,i-20),t.w(2,e,i-20),t.w(3,e,i),t.w(4,e,i+20),t.V(5,e,t.l(5).y)):r?s?t.V(3,t.l(2).x,t.l(4).y):6===t.oa&&(t.V(2,t.l(2).x,i),t.V(3,t.l(3).x,i)):4===t.oa?t.w(2,t.l(2).x,i):3===t.oa?t.V(1,t.l(2).x,i):2===t.oa&&t.w(1,t.l(1).x,i)):180===e?(e=n.left-i/2,o?4===t.oa&&(i=t.l(3).y,t.V(1,e+20,t.l(1).y),t.w(2,e+20,i),t.w(3,e,i),t.w(4,e-20,i),t.V(5,t.l(5).x,i)):r?s?t.V(3,t.l(2).x,t.l(4).y):6===t.oa&&(t.V(2,e,t.l(2).y),t.V(3,e,t.l(3).y)):4===t.oa?t.w(2,e,t.l(2).y):3===t.oa?t.V(1,e,t.l(2).y):2===t.oa&&t.w(1,e,t.l(1).y)):270===e&&(i=n.top-i/2,o?4===t.oa&&(e=t.l(3).x,t.V(1,t.l(1).x,i+20),t.w(2,e,i+20),t.w(3,e,i),t.w(4,e,i-20),t.V(5,e,t.l(5).y)):r?s?t.V(3,t.l(2).x,t.l(4).y):6===t.oa&&(t.V(2,t.l(2).x,i),t.V(3,t.l(3).x,i)):4===t.oa?t.w(2,t.l(2).x,i):3===t.oa?t.V(1,t.l(2).x,i):2===t.oa&&t.w(1,t.l(1).x,i)),t.Ni()))}},Nn.defineProperty(hd,{zK:"relativePoint"},function(){return this.Rr},function(t){this.Rr.set(t)}),Nn.Ja(ld,ks),ld.prototype.cloneProtected=function(t){ks.prototype.cloneProtected.call(this,t),t.element=this.Pe.cloneNode(!0)},ld.prototype.toString=function(){return"HTMLHost("+this.Pe.toString()+")#"+Nn.ld(this)},ld.prototype.Xj=function(t,i){var e,n,o=this.Pe;null!==o&&((e=this.Xa(jn)).x-=this.U.width/2,e.y-=this.U.height/2,e.x-=this.U.x,e.y-=this.U.y,e=i.mF(e),null===(n=i.hl)||n.contains(o)||n.appendChild(o),n=this.transform,o.style.transform="matrix("+n.m11+","+n.m12+","+n.m21+","+n.m22+","+n.dx+","+n.dy+")",o.style.transformOrigin="0 0",n=e.y,o.style.left=e.x+"px",o.style.top=n+"px")},ld.prototype.np=function(t,i,e,n){var o=this.xa;isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(i=o.height);var o=this.xf,r=this.ih;e=Math.max(e,r.width),n=Math.max(n,r.height),t=Math.min(o.width,t),i=Math.min(o.height,i),t=Math.max(e,t),i=Math.max(n,i),null!==(e=this.Pe)&&(t=(i=e.getBoundingClientRect()).width,i=i.height),An(this.Qc,t,i),Ss(this,0,0,t,i)},ld.prototype.Li=function(t,i,e,n){js(this,t,i,e,n)},Nn.u(ld,{Ha:"naturalBounds"},function(){return this.Qc}),Nn.defineProperty(ld,{element:"element"},function(){return this.Pe},function(t){var i=this.Pe;i!==t&&(t instanceof HTMLElement||Nn.k("HTMLHost.element must be an instance of HTMLElement."),(this.Pe=t).className="HTMLHost",this.h("element",i,t),this.pa())}),s.version="1.6.16",h&&(h.module&&"object"===_typeof(h.module)&&"object"===_typeof(h.module.exports)?h.module.exports=s:h.define&&"function"==typeof h.define&&h.define.amd?(h.go=s,h.define(s)):h.go=s),"undefined"!=typeof module&&"object"===_typeof(module.exports)&&(module.exports=s)}(window),go.Diagram.inherit(GuidedDraggingTool,go.DraggingTool),GuidedDraggingTool.prototype.clearGuidelines=function(){this.diagram.remove(this.guidelineHbottom),this.diagram.remove(this.guidelineHcenter),this.diagram.remove(this.guidelineHtop),this.diagram.remove(this.guidelineVleft),this.diagram.remove(this.guidelineVright),this.diagram.remove(this.guidelineVcenter)},GuidedDraggingTool.prototype.doDeactivate=function(){go.DraggingTool.prototype.doDeactivate.call(this),this.clearGuidelines()},GuidedDraggingTool.prototype.doDragOver=function(t,i){this.clearGuidelines();var e,n=(this.copiedParts||this.draggedParts).iterator;n.next()&&(e=n.key,this.showHorizontalMatches(e,this.isGuidelineEnabled,!1),this.showVerticalMatches(e,this.isGuidelineEnabled,!1))},GuidedDraggingTool.prototype.doDropOnto=function(t,i){this.clearGuidelines();var e,n,o,r=(this.copiedParts||this.draggedParts).iterator;r.next()&&(e=r.key,n=this.diagram.lastInput,o=this.isGuidelineSnapEnabled&&!n.shift,this.showHorizontalMatches(e,!1,o),this.showVerticalMatches(e,!1,o))},GuidedDraggingTool.prototype.invalidateLinks=function(t){t instanceof go.Node&&t.invalidateConnectedLinks()},GuidedDraggingTool.prototype.showHorizontalMatches=function(r,t,i){var e=r.actualBounds,s=e.y,a=e.y+e.height/2,h=e.y+e.height,n=this.guidelineSnapDistance,o=this.searchDistance,l=e.copy();l.inflate(o,n+1);var u,f,c,d,p,y,g=this.diagram.findObjectsIn(l,function(t){return t.part},function(t){return t instanceof go.Part&&!(t instanceof go.Link)&&t.isTopLevel&&!t.layer.isTemporary},!0),v=n,m=null;g.each(function(t){var i,e,n,o;t!==r&&(e=(i=t.actualBounds).y,n=i.y+i.height/2,o=i.y+i.height,Math.abs(a-n)<v&&(v=Math.abs(a-n),m=t,u=go.Spot.Center,f=go.Spot.Center),Math.abs(s-e)<v?(v=Math.abs(s-e),m=t,u=go.Spot.Top,f=go.Spot.Top):Math.abs(s-o)<v&&(v=Math.abs(s-o),m=t,u=go.Spot.Top,f=go.Spot.Bottom),Math.abs(h-e)<v?(v=Math.abs(h-e),m=t,u=go.Spot.Bottom,f=go.Spot.Top):Math.abs(h-o)<v&&(v=Math.abs(h-o),m=t,u=go.Spot.Bottom,f=go.Spot.Bottom))}),null!==m&&(c=m.actualBounds,d=Math.min(e.x,c.x)-10,p=Math.max(e.x+e.width,c.x+c.width)+10,y=(new go.Point).setRectSpot(c,f),u===go.Spot.Center?(i&&(r.move(new go.Point(e.x,y.y-e.height/2)),this.invalidateLinks(r)),t&&(this.guidelineHcenter.position=new go.Point(d,y.y),this.guidelineHcenter.elt(0).width=p-d,this.diagram.add(this.guidelineHcenter))):u===go.Spot.Top?(i&&(r.move(new go.Point(e.x,y.y)),this.invalidateLinks(r)),t&&(this.guidelineHtop.position=new go.Point(d,y.y),this.guidelineHtop.elt(0).width=p-d,this.diagram.add(this.guidelineHtop))):u===go.Spot.Bottom&&(i&&(r.move(new go.Point(e.x,y.y-e.height)),this.invalidateLinks(r)),t&&(this.guidelineHbottom.position=new go.Point(d,y.y),this.guidelineHbottom.elt(0).width=p-d,this.diagram.add(this.guidelineHbottom))))},GuidedDraggingTool.prototype.showVerticalMatches=function(r,t,i){var e=r.actualBounds,s=e.x,a=e.x+e.width/2,h=e.x+e.width,n=this.guidelineSnapDistance,o=this.searchDistance,l=e.copy();l.inflate(n+1,o);var u,f,c,d,p,y,g=this.diagram.findObjectsIn(l,function(t){return t.part},function(t){return t instanceof go.Part&&!(t instanceof go.Link)&&t.isTopLevel&&!t.layer.isTemporary},!0),v=n,m=null;g.each(function(t){var i,e,n,o;t!==r&&(e=(i=t.actualBounds).x,n=i.x+i.width/2,o=i.x+i.width,Math.abs(a-n)<v&&(v=Math.abs(a-n),m=t,u=go.Spot.Center,f=go.Spot.Center),Math.abs(s-e)<v?(v=Math.abs(s-e),m=t,u=go.Spot.Left,f=go.Spot.Left):Math.abs(s-o)<v&&(v=Math.abs(s-o),m=t,u=go.Spot.Left,f=go.Spot.Right),Math.abs(h-e)<v?(v=Math.abs(h-e),m=t,u=go.Spot.Right,f=go.Spot.Left):Math.abs(h-o)<v&&(v=Math.abs(h-o),m=t,u=go.Spot.Right,f=go.Spot.Right))}),null!==m&&(c=m.actualBounds,d=Math.min(e.y,c.y)-10,p=Math.max(e.y+e.height,c.y+c.height)+10,y=(new go.Point).setRectSpot(c,f),u===go.Spot.Center?(i&&(r.move(new go.Point(y.x-e.width/2,e.y)),this.invalidateLinks(r)),t&&(this.guidelineVcenter.position=new go.Point(y.x,d),this.guidelineVcenter.elt(0).height=p-d,this.diagram.add(this.guidelineVcenter))):u===go.Spot.Left?(i&&(r.move(new go.Point(y.x,e.y)),this.invalidateLinks(r)),t&&(this.guidelineVleft.position=new go.Point(y.x,d),this.guidelineVleft.elt(0).height=p-d,this.diagram.add(this.guidelineVleft))):u===go.Spot.Right&&(i&&(r.move(new go.Point(y.x-e.width,e.y)),this.invalidateLinks(r)),t&&(this.guidelineVright.position=new go.Point(y.x,d),this.guidelineVright.elt(0).height=p-d,this.diagram.add(this.guidelineVright))))},Object.defineProperty(GuidedDraggingTool.prototype,"guidelineSnapDistance",{get:function(){return this._guidelineSnapDistance},set:function(t){if("number"!=typeof t||isNaN(t)||t<0)throw new Error("new value for GuidedDraggingTool.guidelineSnapDistance must be a non-negative number.");this._guidelineSnapDistance!==t&&(this._guidelineSnapDistance=t)}}),Object.defineProperty(GuidedDraggingTool.prototype,"isGuidelineEnabled",{get:function(){return this._isGuidelineEnabled},set:function(t){if("boolean"!=typeof t)throw new Error("new value for GuidedDraggingTool.isGuidelineEnabled must be a boolean value.");this._isGuidelineEnabled!==t&&(this._isGuidelineEnabled=t)}}),Object.defineProperty(GuidedDraggingTool.prototype,"horizontalGuidelineColor",{get:function(){return this._horizontalGuidelineColor},set:function(t){this._horizontalGuidelineColor!==t&&(this._horizontalGuidelineColor=t,this.guidelineHbottom.elements.first().stroke=this._horizontalGuidelineColor,this.guidelineHtop.elements.first().stroke=this._horizontalGuidelineColor)}}),Object.defineProperty(GuidedDraggingTool.prototype,"verticalGuidelineColor",{get:function(){return this._verticalGuidelineColor},set:function(t){this._verticalGuidelineColor!==t&&(this._verticalGuidelineColor=t,this.guidelineVleft.elements.first().stroke=this._verticalGuidelineColor,this.guidelineVright.elements.first().stroke=this._verticalGuidelineColor)}}),Object.defineProperty(GuidedDraggingTool.prototype,"centerGuidelineColor",{get:function(){return this._centerGuidelineColor},set:function(t){this._centerGuidelineColor!==t&&(this._centerGuidelineColor=t,this.guidelineVcenter.elements.first().stroke=this._centerGuidelineColor,this.guidelineHcenter.elements.first().stroke=this._centerGuidelineColor)}}),Object.defineProperty(GuidedDraggingTool.prototype,"guidelineWidth",{get:function(){return this._guidelineWidth},set:function(t){if("number"!=typeof t||isNaN(t)||t<0)throw new Error("New value for GuidedDraggingTool.guidelineWidth must be a non-negative number.");this._guidelineWidth!==t&&(this._guidelineWidth=t,this.guidelineVcenter.elements.first().strokeWidth=t,this.guidelineHcenter.elements.first().strokeWidth=t,this.guidelineVleft.elements.first().strokeWidth=t,this.guidelineVright.elements.first().strokeWidth=t,this.guidelineHbottom.elements.first().strokeWidth=t,this.guidelineHtop.elements.first().strokeWidth=t)}}),Object.defineProperty(GuidedDraggingTool.prototype,"searchDistance",{get:function(){return this._searchDistance},set:function(t){if("number"!=typeof t||isNaN(t)||t<=0)throw new Error("new value for GuidedDraggingTool.searchDistance must be a positive number.");this._searchDistance!==t&&(this._searchDistance=t)}}),Object.defineProperty(GuidedDraggingTool.prototype,"isGuidelineSnapEnabled",{get:function(){return this._isGuidelineSnapEnabled},set:function(t){if("boolean"!=typeof t)throw new Error("new value for GuidedDraggingTool.isGuidelineSnapEnabled must be a boolean.");this._isGuidelineSnapEnabled!==t&&(this._isGuidelineSnapEnabled=t)}});var mk=go.GraphObject.make,position_changed_timer=null,modified_p=null;function modifiedTakeScreenshot(){}function modified(){modified_p&&clearTimeout(modified_p),modified_p=setTimeout(modifiedTakeScreenshot,15e3)}function isChildNode(t,i){for(var e=$.processes.diagram.links.iterator;e.next();){var n=e.value.data;if(n.from===t.data.key&&n.to===i.data.key)return!0}return!1}function deleteNode(t,i){$.processes.events.deleteBlock({key:t.data.key},function(){cleanChilds(t),i&&$.processes.diagram.remove(t)})}function cleanChilds(t){for(var i=t.linksConnected;i.next();){var e=i.value.data;$.processes.events.deletelink(e,function(){})}for(var n=t.findNodesConnected();n.next();){var o=n.value;isChildNode(t,o)&&$.processes.types[o.data.category].parent_id&&$.processes.diagram.remove(o)}}function linkRelink(i,t){var e=$.processes.diagram.findLinksByExample(t).first();$.processes.events.relink({from:t,to:i},function(){var t=$.processes.diagram.model;t.startTransaction("undoredo"),t.setDataProperty(e.data,"to",i.to),t.commitTransaction("undoredo"),modified()})}$.processes={mode:"edit",events:{newBlock:null},undoManager:{undolist:[],redolist:[],push:function(t){this.undolist.push(t),this.redolist=[],this.updateButtons()},undo:function(){var t;this.undolist.length&&(t=this.undolist.pop(),this.redolist.push(t),t.undo(t),this.updateButtons())},redo:function(){var t;this.redolist.length&&(t=this.redolist.pop(),this.undolist.push(t),t.redo(t),this.updateButtons())},updateButtons:function(){$mx("#idProcessUndoBtn").prop("disabled",0==this.undolist.length),$mx("#idProcessRedoBtn").prop("disabled",0==this.redolist.length)}},deleteSelection:function(){$.processes.diagram.commandHandler.deleteSelection()},restoreElement:function(e,n){e&&e.closest(".layout-panel-block").remove(),$.ajax("/customers/processes/"+$mx(".diagram").data("process-id")+"/restore.json?element_id="+n).success(function(t){$.processes.diagram.startTransaction("restore");for(var i=0;i<t.nodes.length;i++)$.processes.diagram.model.addNodeData(t.nodes[i]);for(i=0;i<t.links.length;i++)$.processes.diagram.model.addLinkData(t.links[i]);$.processes.diagram.commitTransaction("restore"),e&&$.layout.panels.right.close(),modified(),e&&$.processes.undoManager.push({key:n,undo:function(t){deleteNode($.processes.diagram.findNodeForKey(t.key),!0)},redo:function(t){$.processes.restoreElement(null,t.key)}})})}},$.processes.init=function(t,o,i,r){var s=$mx(t);$.processes.data=o,$.processes.types=r;var e=null;function n(t,i,e,n){return"endpoint"==t.data.category||($mx.isset(r[e.data.category].options.type)&&(r[t.data.category].options.ports[i.portId].type==r[e.data.category].options.type||"*"==r[e.data.category].options.type)||$mx.isset(r[t.data.category].options.type)&&"*"==r[t.data.category].options.type)}var l=mk(go.Diagram,t,{initialDocumentSpot:go.Spot.TopCenter,initialViewportSpot:go.Spot.TopCenter,padding:400,scale:o.viewportZoom/100,initialPosition:go.Point.parse(o.viewportPosition),initialContentAlignment:go.Spot.Center,grid:mk(go.Panel,"Grid",{},mk(go.Shape,"LineH",{stroke:"#e5e5e5",strokeWidth:.5,interval:10}),mk(go.Shape,"LineV",{stroke:"#e5e5e5",strokeWidth:.5,interval:10})),isReadOnly:o.isReadonly,allowDrop:!0,"draggingTool.dragsLink":!1,"animationManager.isEnabled":!1,draggingTool:new GuidedDraggingTool,"draggingTool.guidelineWidth":0,"draggingTool.isGridSnapRealtime":!1,"draggingTool.gridSnapCellSize":new go.Size(20,20),"linkingTool.isUnconnectedLinkValid":!1,"linkingTool.portGravity":20,"linkingTool.direction":go.LinkingTool.ForwardsOnly,maxSelectionCount:1,"diagram.allowCopy":!1,allowRelink:!0,"relinkingTool.isUnconnectedLinkValid":!1,"relinkingTool.portGravity":20,"relinkingTool.linkValidation":n,"linkingTool.linkValidation":n,"toolManager.hoverDelay":0,"dragSelectingTool.canStart":function(){return!1},"commandHandler.doKeyDown":function(){var t=l.lastInput,i=t.control||t.meta,e=t.key;"Z"===e&&i&&t.shift?$.processes.undoManager.redo():"Z"===e&&i?$.processes.undoManager.undo():go.CommandHandler.prototype.doKeyDown.call(this)},"undoManager.isEnabled":!1,ModelChanged:function(t){switch(t.propertyName){case"StartedTransaction":e="undoredo"==t.oldValue?null:{key:null,method:null,oldValue:null,newValue:null};break;case"CommittedTransaction":e&&e.key&&$.processes.undoManager.push(e);break;case"loc":var i;e&&(null==e.key?(i=function(t,i){var e=$.processes.diagram.model,n=$.processes.diagram.findNodeForKey(t);e.startTransaction("undoredo"),e.setDataProperty(n.data,"loc",i),e.commitTransaction("undoredo"),$.ajax({url:o.urlPrefix+"change/move.html",data:{from_id:t,loc:i}}),modified()},e.method="move",e.key=t.object.key,e.oldValue=t.oldValue,e.undo=function(t){i(t.key,t.oldValue)},e.redo=function(t){i(t.key,t.newValue)}):e.newValue=t.newValue)}}});function a(){$.processes.events.setViewport({zoom:100*l.scale,x:Math.round(l.position.x),y:Math.round(l.position.y)})}function h(t,i,e,n,o,r,s){var a={fill:o,stroke:"transparent",desiredSize:new go.Size(8,8),portId:t,fromSpot:i,toSpot:i,fromLinkable:e,toLinkable:n,cursor:"pointer",fromMaxLinks:1|s};return null==o&&(a.alignmentFocus=i),mk(go.Panel,"Horizontal",{margin:new go.Margin(2,0),alignment:i,column:0,row:r},mk(go.Shape,"Circle",a))}function u(){return[new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),{locationSpot:go.Spot.Center,selectionAdorned:!1,selectionChanged:function(t){var i,e=null!=r[t.data.category]?r[t.data.category].options:null;e&&(t.findObject("title").stroke=t.isSelected?"#fff":e.stroke,t.findObject("shape").fill=t.isSelected?e.stroke:e.fill,(i=t.findObject("icon")).stroke=i.fill=t.isSelected?"#fff":e.stroke)}}]}$.processes.diagram=l,s.on("dragenter",function(t){return t.preventDefault(),!0}).on("dragover",function(t){return t.preventDefault(),!1}).on("drop",function(t){t.preventDefault();var i=t.dataTransfer.getData("mx-processes-block");if(i&&this===l.div){var e=t.target;if(!(e instanceof HTMLCanvasElement))return;var n=e.getBoundingClientRect(),o=n.width;0===o&&(o=.001);var r=n.height;0===r&&(r=.001);var s=t.clientX-n.left*(e.width/o),a=t.clientY-n.top*(e.height/r),h=l.transformViewToDoc(new go.Point(s,a));$.processes.events.newBlock({block_type_id:i,loc:Math.round(h.x)+" "+Math.round(h.y)},function(t){l.startTransaction(),l.model.addNodeData(t),l.commitTransaction(),modified()})}}),l.addDiagramListener("ChangingSelection",function(t){}),l.addDiagramListener("ChangedSelection",function(t){var i;"edit"==$.processes.mode&&(i=!1,t.diagram.selection.each(function(t){t instanceof go.Node&&(i=!0)}),i||$.processes.events.clearSelection())}),l.addDiagramListener("ViewportBoundsChanged",function(t){$.processes.showZoomValue(Math.round(100*l.scale)),position_changed_timer&&clearTimeout(position_changed_timer),position_changed_timer=setTimeout(a,3e3)}),l.addDiagramListener("LinkDrawn",function(t){$.processes.events.newlink({t:t.subject.toPortId,f:t.subject.fromPortId,from:t.subject.fromNode.data.key,to:t.subject.toNode.data.key},function(){t.subject.category="flow",modified();var e=$.processes.diagram.model;$.processes.undoManager.push({link:{from:t.subject.fromNode.data.key,to:t.subject.toNode.data.key,f:t.subject.fromPort.portId,t:t.subject.toPort.portId,category:t.subject.data.category},undo:function(i){$.processes.events.deletelink(i.link,function(){var t=$.processes.diagram.findLinksByExample(i.link).first();e.startTransaction(),$.processes.diagram.remove(t),e.commitTransaction()})},redo:function(t){$.processes.events.newlink(t.link,function(){modified(),e.startTransaction(),e.addLinkData(t.link),e.commitTransaction()})}})})}),l.addDiagramListener("LinkRelinked",function(t){var i={from:t.subject.fromNode.data.key,to:t.parameter.part.data.key,f:t.subject.fromPort.portId,t:t.subject.toPort.portId},e={from:t.subject.fromNode.data.key,to:t.subject.toNode.data.key,f:t.subject.fromPort.portId,t:t.subject.toPort.portId};$.processes.undoManager.push({from:i,to:e,undo:function(t){linkRelink(t.from,t.to)},redo:function(t){linkRelink(t.to,t.from)}}),$.processes.events.relink({from:i,to:e},function(){modified()})}),l.addDiagramListener("SelectionMoved",function(t){t.subject.each(function(t){$.processes.events.moveBlock({key:t.data.key,loc:t.data.loc},function(){modified()})})}),l.addDiagramListener("SelectionDeleting",function(i){var t=i.subject.iterator;if(0!=t.count){if(t.next(),t.value instanceof go.Node&&0==t.value.data.key)return!(i.cancel=!0);confirm("      ?")?i.subject.each(function(t){var e;if(t instanceof go.Link&&(e=$.processes.diagram.model,$.processes.undoManager.push({link:{from:t.fromNode.data.key,to:t.toNode.data.key,f:t.fromPort.portId,t:t.toPort.portId,category:t.data.category},undo:function(t){$.ajax({url:o.urlPrefix+"change/link.html",data:{from_port:t.link.f,from_id:t.link.from,to_port:t.link.t,to_id:t.link.to}}),modified(),e.startTransaction(),e.addLinkData({from:t.link.from,to:t.link.to,f:t.link.f,t:t.link.t,category:t.link.category}),e.commitTransaction()},redo:function(t){$.ajax({url:o.urlPrefix+"change/deletelink.html",data:{from_port:t.link.f,from_id:t.link.from,to_port:t.link.t,to_id:t.link.to}});var i=$.processes.diagram.findLinksByExample(t.link).first();e.startTransaction(),$.processes.diagram.remove(i),e.commitTransaction()}}),$.processes.events.deletelink({f:t.fromPortId,from:t.fromNode.data.key,t:t.toPortId,to:t.toNode.data.key},function(){})),t instanceof go.Node){if("f10"==t.data.category&&t.data.data.campaing_id)return i.cancel=!0,alert("   ");$.processes.undoManager.push({key:t.data.key,undo:function(t){$.processes.restoreElement(null,t.key)},redo:function(t){deleteNode($.processes.diagram.findNodeForKey(t.key),!0)}}),deleteNode(t,!1)}modified()}):i.cancel=!0}});function f(t,i){$.processes.events.selectElement(i.part.data)}for(var c in r)if(r[c].options){var d=r[c].options,p={left:go.Spot.Left,right:go.Spot.Right,bottom:go.Spot.Bottom},y={left:mk(go.Panel,"Table",{alignment:go.Spot.Left}),right:mk(go.Panel,"Table",{alignment:go.Spot.Right}),top:mk(go.Panel,"Table",{alignment:go.Spot.Top,alignmentFocus:go.Spot.Center}),bottom:mk(go.Panel,"Table",{alignment:go.Spot.Bottom})};if(null!=r[c].options.ports)for(var g in r[c].options.ports){var v=r[c].options.ports[g];y[v.position].add(h(g,p[v.position],!0,!1,v.color,$mx.nvl(v.index,0),$mx.nvl(v.max,1)))}var m={portId:"t",toSpot:go.Spot.Top,alignment:go.Spot.Top,alignmentFocus:go.Spot.Center,toLinkable:!0,fromLinkable:!1,minSize:new go.Size(100,20),fill:null==d.fill?"#fff":d.fill,stroke:null==d.stroke?"rgba(0,0,0,.1)":d.stroke,strokeWidth:2,name:"shape"},b=[],x=[];x.push(mk(go.Panel,"Auto",{alignment:go.Spot.TopRight,alignmentFocus:go.Spot.TopRight,visible:!1,name:"statistics"},mk(go.Shape,"RoundedRectangle",{fill:"#fff",stroke:null,margin:2}),mk(go.TextBlock,{text:"-",stroke:"#000",font:"bold 10px arial",name:"statistics_text",margin:3,textAlign:"center"}))),null!=r[c].options.actions&&r[c].options.actions.length&&b.push(mk(go.Panel,"Auto",{alignment:go.Spot.Bottom,cursor:"pointer",visible:!o.isReadonly,click:$.proxy(function(t,i){$.processes.tmp_point=i.part.location.copy();var e=$.map(this.options.actions,function(t){return'<li><a href="'+t.link.replace("{id}",i.part.data.key)+(-1!=t.link.indexOf("?")?"&":"?")+"callback="+encodeURIComponent(t.callback)+'" data-modal="'+$.nvl(t.modal,"push")+'" data-modal-hash="item">'+t.title+"</a></li>"});console.log(e);var n=$mx('<div class="popover popover-dark bottom dropdown-menu"><div class="arrow"></div>'+e.join("")+"</div>").appendTo(s);n.css({position:"absolute",left:i.part.location.x*l.scale-n.outerWidth()/2-i.diagram.position.x*l.scale,top:(i.part.location.y-i.diagram.position.y+i.part.naturalBounds.height/2)*l.scale,display:"block"});function o(){$mx(window).off("resize",o),r.remove(),n.hide(),setTimeout(function(){n.remove()},1e3)}var r=$mx('<div class="modal-backdrop modal-content fade in" />').css("z-index",1025).appendTo(s);n.find("a").click(o),r.on("click",o),$mx(window).on("resize",o)},r[c])},mk(go.Shape,"Circle",{width:18,height:18,fill:"#5cb85c",stroke:null},{}),mk(go.TextBlock,{stroke:"#fff",text:"+"})));var w="left"==d.icon?16:30;l.nodeTemplateMap.add(c,mk(go.Node,"Spot",u(),mk(go.Panel,"Auto",mk(go.Shape,"RoundedRectangle",m,new go.Binding("figure","figure")),mk(go.Panel,"left"==d.icon?"Horizontal":"Vertical",mk(go.Shape,{name:"icon",margin:"left"==d.icon?new go.Margin(-2,0,0,10):new go.Margin(10,0,0,0),maxSize:new go.Size(w,w),fill:d.stroke,stroke:d.stroke,strokeWidth:.5},new go.Binding("geometry","category",function(t){return go.Geometry.parse(r[t].icon,!0)}),new go.Binding("visible","",function(t){return!!r[t.data.key].icon}).ofObject()),mk(go.TextBlock,{font:"10pt sans-serif",margin:new go.Margin(10,10,10,10),maxSize:new go.Size(400,100),wrap:go.TextBlock.WrapFit,editable:!1,name:"title",stroke:d.stroke},new go.Binding("text","",function(t){return t.data.title}).ofObject(),new go.Binding("stroke","isSelected",function(t,i){return"#fff"}))),{click:f}),b,x,mk(go.Panel,"Auto",{alignment:go.Spot.TopLeft,alignmentFocus:go.Spot.TopLeft,name:"alert",width:22,toolTip:mk(go.Adornment,"Auto",mk(go.Shape,{fill:"#fff"}),mk(go.TextBlock,{margin:4},new go.Binding("text","",function(t){return t.alert})))},mk(go.Shape,"Circle",{height:14,fill:"#CB0000",stroke:null,margin:4}),mk(go.TextBlock,{text:"!",stroke:"#fff",font:"bold 10px 'arial black', arial",width:10,textAlign:"center"}),new go.Binding("visible","",function(t){return!!t.data.alert}).ofObject()),_.values(y)))}l.nodeTemplateMap.add("endpoint",mk(go.Node,"Spot",u(),{click:f},mk(go.Panel,"Auto",mk(go.Shape,"Circle",{minSize:new go.Size(20,20),angle:90,fill:"#000000",stroke:null}),mk(go.TextBlock,"Start",{name:"text"},{font:"11pt Helvetica, Arial, sans-serif",stroke:"whitesmoke"},new go.Binding("text"))),h("b",go.Spot.Bottom,!0,!1,"#1BC98E",0))),l.linkTemplateMap.add("flow",mk(go.Link,{selectable:!0},{relinkableFrom:!1,relinkableTo:!0,reshapable:!1,isAnimated:!1,mouseEnter:function(t,i){i.stroke="rgba(30,144,255,0.2)"},mouseLeave:function(t,i){i.stroke="transparent"}},{adjusting:go.Link.Stretch,routing:go.Link.AvoidsNodes,curve:go.Link.JumpGap,corner:5,toShortLength:4},new go.Binding("points").makeTwoWay(),mk(go.Shape,{isPanelMain:!0,strokeWidth:1},new go.Binding("stroke","fromPort",function(t){return t.fill}).ofObject()),mk(go.Shape,{toArrow:"standard",stroke:null},new go.Binding("fill","fromPort",function(t){return t.fill}).ofObject()),mk(go.Panel,"Auto",{visible:!0,name:"LABEL",segmentIndex:2,segmentFraction:.5},mk(go.Shape,"RoundedRectangle",{stroke:null,fill:"transparent"}),mk(go.TextBlock,"text",{textAlign:"center",font:"10pt helvetica, arial, sans-serif",stroke:"#333333",editable:!1},new go.Binding("text","",function(t){return r[t.fromNode.category].options.ports[t.fromPort.portId].title}).ofObject())))),l.linkTemplateMap.add("option",mk(go.Link,{selectable:!1},{relinkableFrom:!1,relinkableTo:!1,reshapable:!1,isAnimated:!1,mouseEnter:function(t,i){i.stroke="rgba(30,144,255,0.2)"},mouseLeave:function(t,i){i.stroke="transparent"}},{adjusting:go.Link.Stretch,routing:go.Link.AvoidsNodes,curve:go.Link.JumpGap,corner:5,toShortLength:4},new go.Binding("points").makeTwoWay(),mk(go.Shape,{isPanelMain:!0,strokeWidth:2,stroke:"#999",strokeDashArray:[3,2]}),mk(go.Panel,"Auto",{visible:!0,name:"LABEL",segmentIndex:2,segmentFraction:.5},new go.Binding("visible","visible").makeTwoWay()))),l.model=go.Model.fromJson(i),$mx.observe(".diagram-overview-init",function(t){myOverview=mk(go.Overview,this,{observed:l,contentAlignment:go.Spot.Center}),myOverview.box.elt(0).stroke="dodgerblue"}),$.processes.diagram=l},$mx(document.body).on("dragstart",".processes-pallete",function(t){t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move",t.dataTransfer.setData("mx-processes-block",$mx(t.target).data("value"))}),$.diagram={create:function(t){var i=(t=$mx(t)).closest(".diagram-place").find(".diagram");$.ajax({url:i.data("create"),data:t.data(),success:function(t){$.processes.diagram.model.addNodeData({key:t.key,text:t.title,category:t.category})}})}};
